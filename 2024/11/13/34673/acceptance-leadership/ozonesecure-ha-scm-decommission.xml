<?xml version="1.0" encoding="UTF-8"?>
<robot generator="Rebot 6.1.1 (Python 3.9.18 on linux)" generated="20241113 15:54:25.034" rpa="false" schemaversion="4">
<suite id="s1" name="ozonesecure-ha-scm-decommission">
<suite id="s1-s1" name="Kinit" source="/opt/hadoop/smoketest/kinit.robot">
<test id="s1-s1-t1" name="Kinit" line="27">
<kw name="Kinit test user" library="commonlib">
<arg>${testuser}</arg>
<arg>${testuser}.keytab</arg>
<kw name="Pass Execution If" library="BuiltIn">
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Skip in unsecure cluster</arg>
<doc>Conditionally skips rest of the current test, setup, or teardown with PASS status.</doc>
<status status="PASS" starttime="20241113 15:51:16.706" endtime="20241113 15:51:16.706"/>
</kw>
<kw name="Get test user principal" library="commonlib">
<var>${TEST_USER}</var>
<arg>${user}</arg>
<kw name="Execute" library="os">
<var>${instance}</var>
<arg>hostname | sed 's/scm[0-9].org/scm/;s/scm[0-9]/scm/;s/om[0-9]/om/'</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20241113 15:51:16.710" level="INFO">Running command 'hostname | sed 's/scm[0-9].org/scm/;s/scm[0-9]/scm/;s/om[0-9]/om/' 2&gt;&amp;1'.</msg>
<msg timestamp="20241113 15:51:16.714" level="INFO">${rc} = 0</msg>
<msg timestamp="20241113 15:51:16.714" level="INFO">${output} = scm</msg>
<status status="PASS" starttime="20241113 15:51:16.708" endtime="20241113 15:51:16.714"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20241113 15:51:16.715" level="INFO">scm</msg>
<status status="PASS" starttime="20241113 15:51:16.714" endtime="20241113 15:51:16.715"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20241113 15:51:16.715" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<status status="PASS" starttime="20241113 15:51:16.715" endtime="20241113 15:51:16.715"/>
</kw>
<status status="PASS" starttime="20241113 15:51:16.707" endtime="20241113 15:51:16.715"/>
</kw>
<msg timestamp="20241113 15:51:16.715" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20241113 15:51:16.707" endtime="20241113 15:51:16.715"/>
</kw>
<msg timestamp="20241113 15:51:16.716" level="INFO">${instance} = scm</msg>
<status status="PASS" starttime="20241113 15:51:16.707" endtime="20241113 15:51:16.716"/>
</kw>
<msg timestamp="20241113 15:51:16.716" level="INFO">${TEST_USER} = testuser/scm@EXAMPLE.COM</msg>
<status status="PASS" starttime="20241113 15:51:16.706" endtime="20241113 15:51:16.716"/>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<arg>${TEST_USER}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<msg timestamp="20241113 15:51:16.716" level="INFO">${TEST_USER} = testuser/scm@EXAMPLE.COM</msg>
<status status="PASS" starttime="20241113 15:51:16.716" endtime="20241113 15:51:16.716"/>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k -t /etc/security/keytabs/${keytab} ${TEST_USER}</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<kw name="Execute" library="os">
<arg>kinit -k -t /etc/security/keytabs/${keytab} ${TEST_USER}</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20241113 15:51:16.720" level="INFO">Running command 'kinit -k -t /etc/security/keytabs/testuser.keytab testuser/scm@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20241113 15:51:16.769" level="INFO">${rc} = 0</msg>
<msg timestamp="20241113 15:51:16.769" level="INFO">${output} = </msg>
<status status="PASS" starttime="20241113 15:51:16.718" endtime="20241113 15:51:16.769"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20241113 15:51:16.770" level="INFO"/>
<status status="PASS" starttime="20241113 15:51:16.770" endtime="20241113 15:51:16.770"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20241113 15:51:16.771" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<status status="PASS" starttime="20241113 15:51:16.771" endtime="20241113 15:51:16.771"/>
</kw>
<status status="PASS" starttime="20241113 15:51:16.717" endtime="20241113 15:51:16.771"/>
</kw>
<msg timestamp="20241113 15:51:16.771" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20241113 15:51:16.717" endtime="20241113 15:51:16.771"/>
</kw>
<status status="PASS" starttime="20241113 15:51:16.717" endtime="20241113 15:51:16.771"/>
</kw>
<status status="PASS" starttime="20241113 15:51:16.716" endtime="20241113 15:51:16.771"/>
</kw>
<status status="PASS" starttime="20241113 15:51:16.705" endtime="20241113 15:51:16.772"/>
</kw>
<timeout value="2 minutes"/>
<status status="PASS" starttime="20241113 15:51:16.705" endtime="20241113 15:51:16.772"/>
</test>
<doc>Kinit test user</doc>
<status status="PASS" starttime="20241113 15:51:16.666" endtime="20241113 15:51:16.773"/>
</suite>
<suite id="s1-s2" name="Primordial-Scm" source="/opt/hadoop/smoketest/scmha/primordial-scm.robot">
<test id="s1-s2-t1" name="Verify SCM Count" line="33">
<kw name="Get SCM Node Count">
<var>${scm_count}</var>
<kw name="Execute" library="os">
<var>${result}</var>
<arg>ozone admin scm roles --service-id=scmservice</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20241113 15:51:21.669" level="INFO">Running command 'ozone admin scm roles --service-id=scmservice 2&gt;&amp;1'.</msg>
<msg timestamp="20241113 15:51:25.076" level="INFO">${rc} = 0</msg>
<msg timestamp="20241113 15:51:25.076" level="INFO">${output} = scm2.org:9894:FOLLOWER:27f4fda3-c6f6-4413-af8b-f24c1ab5f5ff:172.25.0.117
scm3.org:9894:FOLLOWER:86f25435-a35d-45fb-b26d-881c010658ec:172.25.0.118
scm4.org:9894:FOLLOWER:09f610e9-cec4-4497-9e15-b0c71b2...</msg>
<status status="PASS" starttime="20241113 15:51:21.667" endtime="20241113 15:51:25.076"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20241113 15:51:25.077" level="INFO">scm2.org:9894:FOLLOWER:27f4fda3-c6f6-4413-af8b-f24c1ab5f5ff:172.25.0.117
scm3.org:9894:FOLLOWER:86f25435-a35d-45fb-b26d-881c010658ec:172.25.0.118
scm4.org:9894:FOLLOWER:09f610e9-cec4-4497-9e15-b0c71b2e1d5d:172.25.0.120
scm1.org:9894:LEADER:8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f:172.25.0.116</msg>
<status status="PASS" starttime="20241113 15:51:25.076" endtime="20241113 15:51:25.077"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20241113 15:51:25.077" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<status status="PASS" starttime="20241113 15:51:25.077" endtime="20241113 15:51:25.077"/>
</kw>
<status status="PASS" starttime="20241113 15:51:21.666" endtime="20241113 15:51:25.077"/>
</kw>
<msg timestamp="20241113 15:51:25.078" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20241113 15:51:21.666" endtime="20241113 15:51:25.078"/>
</kw>
<msg timestamp="20241113 15:51:25.078" level="INFO">${result} = scm2.org:9894:FOLLOWER:27f4fda3-c6f6-4413-af8b-f24c1ab5f5ff:172.25.0.117
scm3.org:9894:FOLLOWER:86f25435-a35d-45fb-b26d-881c010658ec:172.25.0.118
scm4.org:9894:FOLLOWER:09f610e9-cec4-4497-9e15-b0c71b2...</msg>
<status status="PASS" starttime="20241113 15:51:21.665" endtime="20241113 15:51:25.078"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${result}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20241113 15:51:25.078" level="INFO">scm2.org:9894:FOLLOWER:27f4fda3-c6f6-4413-af8b-f24c1ab5f5ff:172.25.0.117
scm3.org:9894:FOLLOWER:86f25435-a35d-45fb-b26d-881c010658ec:172.25.0.118
scm4.org:9894:FOLLOWER:09f610e9-cec4-4497-9e15-b0c71b2e1d5d:172.25.0.120
scm1.org:9894:LEADER:8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f:172.25.0.116</msg>
<status status="PASS" starttime="20241113 15:51:25.078" endtime="20241113 15:51:25.078"/>
</kw>
<kw name="Get Line Count" library="String">
<var>${scm_count}</var>
<arg>${result}</arg>
<doc>Returns and logs the number of lines in the given string.</doc>
<msg timestamp="20241113 15:51:25.078" level="INFO">4 lines</msg>
<msg timestamp="20241113 15:51:25.079" level="INFO">${scm_count} = 4</msg>
<status status="PASS" starttime="20241113 15:51:25.078" endtime="20241113 15:51:25.079"/>
</kw>
<msg timestamp="20241113 15:51:25.079" level="INFO">${scm_count} = 4</msg>
<status status="PASS" starttime="20241113 15:51:21.665" endtime="20241113 15:51:25.079"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>SCM Instance Count: ${scm_count}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20241113 15:51:25.079" level="INFO">SCM Instance Count: 4</msg>
<status status="PASS" starttime="20241113 15:51:25.079" endtime="20241113 15:51:25.079"/>
</kw>
<kw name="Convert To String" library="BuiltIn">
<var>${scm_count}</var>
<arg>${scm_count}</arg>
<doc>Converts the given item to a Unicode string.</doc>
<msg timestamp="20241113 15:51:25.080" level="INFO">${scm_count} = 4</msg>
<status status="PASS" starttime="20241113 15:51:25.079" endtime="20241113 15:51:25.080"/>
</kw>
<kw name="Should Be Equal" library="BuiltIn">
<arg>4</arg>
<arg>${scm_count}</arg>
<doc>Fails if the given objects are unequal.</doc>
<status status="PASS" starttime="20241113 15:51:25.080" endtime="20241113 15:51:25.080"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20241113 15:51:21.665" endtime="20241113 15:51:25.080"/>
</test>
<test id="s1-s2-t2" name="Transfer Leader to SCM4" line="39">
<kw name="Execute" library="os">
<var>${result}</var>
<arg>ozone admin scm roles --service-id=scmservice</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20241113 15:51:25.084" level="INFO">Running command 'ozone admin scm roles --service-id=scmservice 2&gt;&amp;1'.</msg>
<msg timestamp="20241113 15:51:28.597" level="INFO">${rc} = 0</msg>
<msg timestamp="20241113 15:51:28.597" level="INFO">${output} = scm2.org:9894:FOLLOWER:27f4fda3-c6f6-4413-af8b-f24c1ab5f5ff:172.25.0.117
scm3.org:9894:FOLLOWER:86f25435-a35d-45fb-b26d-881c010658ec:172.25.0.118
scm4.org:9894:FOLLOWER:09f610e9-cec4-4497-9e15-b0c71b2...</msg>
<status status="PASS" starttime="20241113 15:51:25.082" endtime="20241113 15:51:28.597"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20241113 15:51:28.598" level="INFO">scm2.org:9894:FOLLOWER:27f4fda3-c6f6-4413-af8b-f24c1ab5f5ff:172.25.0.117
scm3.org:9894:FOLLOWER:86f25435-a35d-45fb-b26d-881c010658ec:172.25.0.118
scm4.org:9894:FOLLOWER:09f610e9-cec4-4497-9e15-b0c71b2e1d5d:172.25.0.120
scm1.org:9894:LEADER:8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f:172.25.0.116</msg>
<status status="PASS" starttime="20241113 15:51:28.597" endtime="20241113 15:51:28.598"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20241113 15:51:28.598" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<status status="PASS" starttime="20241113 15:51:28.598" endtime="20241113 15:51:28.598"/>
</kw>
<status status="PASS" starttime="20241113 15:51:25.082" endtime="20241113 15:51:28.598"/>
</kw>
<msg timestamp="20241113 15:51:28.598" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20241113 15:51:25.081" endtime="20241113 15:51:28.598"/>
</kw>
<msg timestamp="20241113 15:51:28.598" level="INFO">${result} = scm2.org:9894:FOLLOWER:27f4fda3-c6f6-4413-af8b-f24c1ab5f5ff:172.25.0.117
scm3.org:9894:FOLLOWER:86f25435-a35d-45fb-b26d-881c010658ec:172.25.0.118
scm4.org:9894:FOLLOWER:09f610e9-cec4-4497-9e15-b0c71b2...</msg>
<status status="PASS" starttime="20241113 15:51:25.081" endtime="20241113 15:51:28.598"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${result}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20241113 15:51:28.599" level="INFO">scm2.org:9894:FOLLOWER:27f4fda3-c6f6-4413-af8b-f24c1ab5f5ff:172.25.0.117
scm3.org:9894:FOLLOWER:86f25435-a35d-45fb-b26d-881c010658ec:172.25.0.118
scm4.org:9894:FOLLOWER:09f610e9-cec4-4497-9e15-b0c71b2e1d5d:172.25.0.120
scm1.org:9894:LEADER:8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f:172.25.0.116</msg>
<status status="PASS" starttime="20241113 15:51:28.599" endtime="20241113 15:51:28.599"/>
</kw>
<kw name="Get Lines Containing String" library="String">
<var>${scm4_line}</var>
<arg>${result}</arg>
<arg>scm4.org</arg>
<doc>Returns lines of the given ``string`` that contain the ``pattern``.</doc>
<msg timestamp="20241113 15:51:28.599" level="INFO">1 out of 4 lines matched</msg>
<msg timestamp="20241113 15:51:28.599" level="INFO">${scm4_line} = scm4.org:9894:FOLLOWER:09f610e9-cec4-4497-9e15-b0c71b2e1d5d:172.25.0.120</msg>
<status status="PASS" starttime="20241113 15:51:28.599" endtime="20241113 15:51:28.599"/>
</kw>
<kw name="Split String" library="String">
<var>${scm4_split}</var>
<arg>${scm4_line}</arg>
<arg>:</arg>
<doc>Splits the ``string`` using ``separator`` as a delimiter string.</doc>
<msg timestamp="20241113 15:51:28.600" level="INFO">${scm4_split} = ['scm4.org', '9894', 'FOLLOWER', '09f610e9-cec4-4497-9e15-b0c71b2e1d5d', '172.25.0.120']</msg>
<status status="PASS" starttime="20241113 15:51:28.600" endtime="20241113 15:51:28.600"/>
</kw>
<kw name="Strip String" library="String">
<var>${scm4_uuid}</var>
<arg>${scm4_split[3]}</arg>
<doc>Remove leading and/or trailing whitespaces from the given string.</doc>
<msg timestamp="20241113 15:51:28.601" level="INFO">${scm4_uuid} = 09f610e9-cec4-4497-9e15-b0c71b2e1d5d</msg>
<status status="PASS" starttime="20241113 15:51:28.600" endtime="20241113 15:51:28.601"/>
</kw>
<kw name="Execute" library="os">
<var>${result}</var>
<arg>ozone admin scm transfer --service-id=scmservice -n ${scm4_uuid}</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20241113 15:51:28.604" level="INFO">Running command 'ozone admin scm transfer --service-id=scmservice -n 09f610e9-cec4-4497-9e15-b0c71b2e1d5d 2&gt;&amp;1'.</msg>
<msg timestamp="20241113 15:51:38.206" level="INFO">${rc} = 0</msg>
<msg timestamp="20241113 15:51:38.206" level="INFO">${output} = Transfer leadership successfully to 09f610e9-cec4-4497-9e15-b0c71b2e1d5d.</msg>
<status status="PASS" starttime="20241113 15:51:28.602" endtime="20241113 15:51:38.206"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20241113 15:51:38.207" level="INFO">Transfer leadership successfully to 09f610e9-cec4-4497-9e15-b0c71b2e1d5d.</msg>
<status status="PASS" starttime="20241113 15:51:38.206" endtime="20241113 15:51:38.207"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20241113 15:51:38.207" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<status status="PASS" starttime="20241113 15:51:38.207" endtime="20241113 15:51:38.207"/>
</kw>
<status status="PASS" starttime="20241113 15:51:28.602" endtime="20241113 15:51:38.207"/>
</kw>
<msg timestamp="20241113 15:51:38.207" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20241113 15:51:28.601" endtime="20241113 15:51:38.207"/>
</kw>
<msg timestamp="20241113 15:51:38.208" level="INFO">${result} = Transfer leadership successfully to 09f610e9-cec4-4497-9e15-b0c71b2e1d5d.</msg>
<status status="PASS" starttime="20241113 15:51:28.601" endtime="20241113 15:51:38.208"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${result}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20241113 15:51:38.208" level="INFO">Transfer leadership successfully to 09f610e9-cec4-4497-9e15-b0c71b2e1d5d.</msg>
<status status="PASS" starttime="20241113 15:51:38.208" endtime="20241113 15:51:38.208"/>
</kw>
<kw name="Should Contain" library="BuiltIn">
<arg>${result}</arg>
<arg>Transfer leadership successfully</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20241113 15:51:38.208" endtime="20241113 15:51:38.208"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20241113 15:51:25.081" endtime="20241113 15:51:38.208"/>
</test>
<test id="s1-s2-t3" name="Verify SCM4 Certificate" line="50">
<kw name="Execute" library="os">
<var>${root_ca_output}</var>
<arg>ozone admin cert list -c 1</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20241113 15:51:38.212" level="INFO">Running command 'ozone admin cert list -c 1 2&gt;&amp;1'.</msg>
<msg timestamp="20241113 15:51:43.845" level="INFO">${rc} = 0</msg>
<msg timestamp="20241113 15:51:43.845" level="INFO">${output} = The certificate list could be longer than the batch size: 1. Please use the "-c" option to see more certificates.
Certificate list:(BatchSize=1, CertCount=1)
SerialNumber      Valid From              ...</msg>
<status status="PASS" starttime="20241113 15:51:38.210" endtime="20241113 15:51:43.845"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20241113 15:51:43.846" level="INFO">The certificate list could be longer than the batch size: 1. Please use the "-c" option to see more certificates.
Certificate list:(BatchSize=1, CertCount=1)
SerialNumber      Valid From                     Expiry                         Subject                                                                                                        Issuer                                                                                                        
1                 Wed Nov 13 15:49:15 UTC 2024   Sat Dec 22 15:49:15 UTC 2029   CN=scm@scm1.org,OU=8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f,O=CID-e8cd8088-d0c4-42b4-a237-9229c81229e6,SERIALNUMBER=1 CN=scm@scm1.org,OU=8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f,O=CID-e8cd8088-d0c4-42b4-a237-9229c81229e6,SERIALNUMBER=1</msg>
<status status="PASS" starttime="20241113 15:51:43.846" endtime="20241113 15:51:43.846"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20241113 15:51:43.847" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<status status="PASS" starttime="20241113 15:51:43.846" endtime="20241113 15:51:43.847"/>
</kw>
<status status="PASS" starttime="20241113 15:51:38.210" endtime="20241113 15:51:43.847"/>
</kw>
<msg timestamp="20241113 15:51:43.847" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20241113 15:51:38.210" endtime="20241113 15:51:43.847"/>
</kw>
<msg timestamp="20241113 15:51:43.847" level="INFO">${root_ca_output} = The certificate list could be longer than the batch size: 1. Please use the "-c" option to see more certificates.
Certificate list:(BatchSize=1, CertCount=1)
SerialNumber      Valid From              ...</msg>
<status status="PASS" starttime="20241113 15:51:38.210" endtime="20241113 15:51:43.847"/>
</kw>
<kw name="Get Lines Containing String" library="String">
<var>${root_ca_cert}</var>
<arg>${root_ca_output}</arg>
<arg>scm1.org</arg>
<doc>Returns lines of the given ``string`` that contain the ``pattern``.</doc>
<msg timestamp="20241113 15:51:43.848" level="INFO">1 out of 4 lines matched</msg>
<msg timestamp="20241113 15:51:43.848" level="INFO">${root_ca_cert} = 1                 Wed Nov 13 15:49:15 UTC 2024   Sat Dec 22 15:49:15 UTC 2029   CN=scm@scm1.org,OU=8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f,O=CID-e8cd8088-d0c4-42b4-a237-9229c81229e6,SERIALNUMBER=1 CN=scm...</msg>
<status status="PASS" starttime="20241113 15:51:43.848" endtime="20241113 15:51:43.848"/>
</kw>
<kw name="Split String" library="String">
<var>${root_ca_cert_split}</var>
<arg>${root_ca_cert}</arg>
<doc>Splits the ``string`` using ``separator`` as a delimiter string.</doc>
<msg timestamp="20241113 15:51:43.848" level="INFO">${root_ca_cert_split} = ['1', 'Wed', 'Nov', '13', '15:49:15', 'UTC', '2024', 'Sat', 'Dec', '22', '15:49:15', 'UTC', '2029', 'CN=scm@scm1.org,OU=8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f,O=CID-e8cd8088-d0c4-42b4-a237-9229c81229e6,...</msg>
<status status="PASS" starttime="20241113 15:51:43.848" endtime="20241113 15:51:43.848"/>
</kw>
<kw name="Strip String" library="String">
<var>${root_ca_cert_subject}</var>
<arg>${root_ca_cert_split[3]}</arg>
<doc>Remove leading and/or trailing whitespaces from the given string.</doc>
<msg timestamp="20241113 15:51:43.849" level="INFO">${root_ca_cert_subject} = 13</msg>
<status status="PASS" starttime="20241113 15:51:43.848" endtime="20241113 15:51:43.849"/>
</kw>
<kw name="Execute" library="os">
<var>${output}</var>
<arg>ozone admin cert list -c 1000000</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20241113 15:51:43.852" level="INFO">Running command 'ozone admin cert list -c 1000000 2&gt;&amp;1'.</msg>
<msg timestamp="20241113 15:51:49.866" level="INFO">${rc} = 0</msg>
<msg timestamp="20241113 15:51:49.866" level="INFO">${output} = Certificate list:(BatchSize=1000000, CertCount=12)
SerialNumber      Valid From                     Expiry                         Subject                                                              ...</msg>
<status status="PASS" starttime="20241113 15:51:43.850" endtime="20241113 15:51:49.866"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20241113 15:51:49.867" level="INFO">Certificate list:(BatchSize=1000000, CertCount=12)
SerialNumber      Valid From                     Expiry                         Subject                                                                                                        Issuer                                                                                                        
1                 Wed Nov 13 15:49:15 UTC 2024   Sat Dec 22 15:49:15 UTC 2029   CN=scm@scm1.org,OU=8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f,O=CID-e8cd8088-d0c4-42b4-a237-9229c81229e6,SERIALNUMBER=1 CN=scm@scm1.org,OU=8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f,O=CID-e8cd8088-d0c4-42b4-a237-9229c81229e6,SERIALNUMBER=1
2                 Wed Nov 13 15:49:15 UTC 2024   Sat Dec 22 15:49:15 UTC 2029   CN=scm-sub@scm1.org,OU=8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f,O=CID-e8cd8088-d0c4-42b4-a237-9229c81229e6,SERIALNUMBER=2 CN=scm@scm1.org,OU=8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f,O=CID-e8cd8088-d0c4-42b4-a237-9229c81229e6,SERIALNUMBER=1
3                 Wed Nov 13 15:49:35 UTC 2024   Thu Nov 13 15:49:35 UTC 2025   CN=recon@recon,OU=8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f,O=CID-e8cd8088-d0c4-42b4-a237-9229c81229e6,SERIALNUMBER=3 CN=scm-sub@scm1.org,OU=8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f,O=CID-e8cd8088-d0c4-42b4-a237-9229c81229e6,SERIALNUMBER=2
4                 Wed Nov 13 15:49:38 UTC 2024   Sat Dec 22 15:49:38 UTC 2029   CN=scm-sub@scm2.org,OU=27f4fda3-c6f6-4413-af8b-f24c1ab5f5ff,O=CID-e8cd8088-d0c4-42b4-a237-9229c81229e6,SERIALNUMBER=4 CN=scm@scm1.org,OU=8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f,O=CID-e8cd8088-d0c4-42b4-a237-9229c81229e6,SERIALNUMBER=1
5                 Wed Nov 13 15:49:50 UTC 2024   Sat Dec 22 15:49:50 UTC 2029   CN=scm-sub@scm3.org,OU=86f25435-a35d-45fb-b26d-881c010658ec,O=CID-e8cd8088-d0c4-42b4-a237-9229c81229e6,SERIALNUMBER=5 CN=scm@scm1.org,OU=8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f,O=CID-e8cd8088-d0c4-42b4-a237-9229c81229e6,SERIALNUMBER=1
6                 Wed Nov 13 15:50:14 UTC 2024   Thu Nov 13 15:50:14 UTC 2025   CN=dn@3a5fade1cd03,OU=8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f,O=CID-e8cd8088-d0c4-42b4-a237-9229c81229e6,SERIALNUMBER=6 CN=scm-sub@scm1.org,OU=8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f,O=CID-e8cd8088-d0c4-42b4-a237-9229c81229e6,SERIALNUMBER=2
7                 Wed Nov 13 15:50:16 UTC 2024   Thu Nov 13 15:50:16 UTC 2025   CN=dn@545c4a649e5a,OU=8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f,O=CID-e8cd8088-d0c4-42b4-a237-9229c81229e6,SERIALNUMBER=7 CN=scm-sub@scm1.org,OU=8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f,O=CID-e8cd8088-d0c4-42b4-a237-9229c81229e6,SERIALNUMBER=2
8                 Wed Nov 13 15:50:16 UTC 2024   Thu Nov 13 15:50:16 UTC 2025   CN=dn@d24fe78002fa,OU=8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f,O=CID-e8cd8088-d0c4-42b4-a237-9229c81229e6,SERIALNUMBER=8 CN=scm-sub@scm1.org,OU=8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f,O=CID-e8cd8088-d0c4-42b4-a237-9229c81229e6,SERIALNUMBER=2
9                 Wed Nov 13 15:50:17 UTC 2024   Thu Nov 13 15:50:17 UTC 2025   CN=om1,OU=8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f,O=CID-e8cd8088-d0c4-42b4-a237-9229c81229e6,SERIALNUMBER=9       CN=scm-sub@scm1.org,OU=8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f,O=CID-e8cd8088-d0c4-42b4-a237-9229c81229e6,SERIALNUMBER=2
10                Wed Nov 13 15:50:17 UTC 2024   Thu Nov 13 15:50:17 UTC 2025   CN=om3,OU=8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f,O=CID-e8cd8088-d0c4-42b4-a237-9229c81229e6,SERIALNUMBER=10      CN=scm-sub@scm1.org,OU=8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f,O=CID-e8cd8088-d0c4-42b4-a237-9229c81229e6,SERIALNUMBER=2
11                Wed Nov 13 15:50:18 UTC 2024   Thu Nov 13 15:50:18 UTC 2025   CN=om2,OU=8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f,O=CID-e8cd8088-d0c4-42b4-a237-9229c81229e6,SERIALNUMBER=11      CN=scm-sub@scm1.org,OU=8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f,O=CID-e8cd8088-d0c4-42b4-a237-9229c81229e6,SERIALNUMBER=2
12                Wed Nov 13 15:51:08 UTC 2024   Sat Dec 22 15:51:08 UTC 2029   CN=scm-sub@scm4.org,OU=09f610e9-cec4-4497-9e15-b0c71b2e1d5d,O=CID-e8cd8088-d0c4-42b4-a237-9229c81229e6,SERIALNUMBER=12 CN=scm@scm1.org,OU=8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f,O=CID-e8cd8088-d0c4-42b4-a237-9229c81229e6,SERIALNUMBER=1</msg>
<status status="PASS" starttime="20241113 15:51:49.866" endtime="20241113 15:51:49.867"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20241113 15:51:49.867" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<status status="PASS" starttime="20241113 15:51:49.867" endtime="20241113 15:51:49.867"/>
</kw>
<status status="PASS" starttime="20241113 15:51:43.850" endtime="20241113 15:51:49.868"/>
</kw>
<msg timestamp="20241113 15:51:49.868" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20241113 15:51:43.850" endtime="20241113 15:51:49.868"/>
</kw>
<msg timestamp="20241113 15:51:49.868" level="INFO">${output} = Certificate list:(BatchSize=1000000, CertCount=12)
SerialNumber      Valid From                     Expiry                         Subject                                                              ...</msg>
<status status="PASS" starttime="20241113 15:51:43.849" endtime="20241113 15:51:49.868"/>
</kw>
<kw name="Get Lines Containing String" library="String">
<var>${scm4_cert}</var>
<arg>${output}</arg>
<arg>scm4.org</arg>
<doc>Returns lines of the given ``string`` that contain the ``pattern``.</doc>
<msg timestamp="20241113 15:51:49.869" level="INFO">1 out of 14 lines matched</msg>
<msg timestamp="20241113 15:51:49.869" level="INFO">${scm4_cert} = 12                Wed Nov 13 15:51:08 UTC 2024   Sat Dec 22 15:51:08 UTC 2029   CN=scm-sub@scm4.org,OU=09f610e9-cec4-4497-9e15-b0c71b2e1d5d,O=CID-e8cd8088-d0c4-42b4-a237-9229c81229e6,SERIALNUMBER=12 C...</msg>
<status status="PASS" starttime="20241113 15:51:49.868" endtime="20241113 15:51:49.869"/>
</kw>
<kw name="Split String" library="String">
<var>${scm4_cert_split}</var>
<arg>${scm4_cert}</arg>
<doc>Splits the ``string`` using ``separator`` as a delimiter string.</doc>
<msg timestamp="20241113 15:51:49.869" level="INFO">${scm4_cert_split} = ['12', 'Wed', 'Nov', '13', '15:51:08', 'UTC', '2024', 'Sat', 'Dec', '22', '15:51:08', 'UTC', '2029', 'CN=scm-sub@scm4.org,OU=09f610e9-cec4-4497-9e15-b0c71b2e1d5d,O=CID-e8cd8088-d0c4-42b4-a237-9229c812...</msg>
<status status="PASS" starttime="20241113 15:51:49.869" endtime="20241113 15:51:49.869"/>
</kw>
<kw name="Strip String" library="String">
<var>${scm4_cert_issuer}</var>
<arg>${scm4_cert_split[4]}</arg>
<doc>Remove leading and/or trailing whitespaces from the given string.</doc>
<msg timestamp="20241113 15:51:49.871" level="INFO">${scm4_cert_issuer} = 15:51:08</msg>
<status status="PASS" starttime="20241113 15:51:49.870" endtime="20241113 15:51:49.871"/>
</kw>
<kw name="Should Not Be Equal As Strings" library="BuiltIn">
<arg>${scm4_cert_issuer}</arg>
<arg>${root_ca_cert_subject}</arg>
<doc>Fails if objects are equal after converting them to strings.</doc>
<status status="PASS" starttime="20241113 15:51:49.871" endtime="20241113 15:51:49.871"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20241113 15:51:38.209" endtime="20241113 15:51:49.872"/>
</test>
<doc>Smoketest ozone cluster startup</doc>
<status status="PASS" starttime="20241113 15:51:21.626" endtime="20241113 15:51:49.872"/>
</suite>
<suite id="s1-s3" name="Kinit" source="/opt/hadoop/smoketest/kinit.robot">
<test id="s1-s3-t1" name="Kinit" line="27">
<kw name="Kinit test user" library="commonlib">
<arg>${testuser}</arg>
<arg>${testuser}.keytab</arg>
<kw name="Pass Execution If" library="BuiltIn">
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Skip in unsecure cluster</arg>
<doc>Conditionally skips rest of the current test, setup, or teardown with PASS status.</doc>
<status status="PASS" starttime="20241113 15:52:21.104" endtime="20241113 15:52:21.105"/>
</kw>
<kw name="Get test user principal" library="commonlib">
<var>${TEST_USER}</var>
<arg>${user}</arg>
<kw name="Execute" library="os">
<var>${instance}</var>
<arg>hostname | sed 's/scm[0-9].org/scm/;s/scm[0-9]/scm/;s/om[0-9]/om/'</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20241113 15:52:21.108" level="INFO">Running command 'hostname | sed 's/scm[0-9].org/scm/;s/scm[0-9]/scm/;s/om[0-9]/om/' 2&gt;&amp;1'.</msg>
<msg timestamp="20241113 15:52:21.113" level="INFO">${rc} = 0</msg>
<msg timestamp="20241113 15:52:21.113" level="INFO">${output} = scm</msg>
<status status="PASS" starttime="20241113 15:52:21.106" endtime="20241113 15:52:21.113"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20241113 15:52:21.114" level="INFO">scm</msg>
<status status="PASS" starttime="20241113 15:52:21.113" endtime="20241113 15:52:21.114"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20241113 15:52:21.114" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<status status="PASS" starttime="20241113 15:52:21.114" endtime="20241113 15:52:21.114"/>
</kw>
<status status="PASS" starttime="20241113 15:52:21.105" endtime="20241113 15:52:21.114"/>
</kw>
<msg timestamp="20241113 15:52:21.114" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20241113 15:52:21.105" endtime="20241113 15:52:21.114"/>
</kw>
<msg timestamp="20241113 15:52:21.115" level="INFO">${instance} = scm</msg>
<status status="PASS" starttime="20241113 15:52:21.105" endtime="20241113 15:52:21.115"/>
</kw>
<msg timestamp="20241113 15:52:21.115" level="INFO">${TEST_USER} = testuser/scm@EXAMPLE.COM</msg>
<status status="PASS" starttime="20241113 15:52:21.105" endtime="20241113 15:52:21.115"/>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<arg>${TEST_USER}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<msg timestamp="20241113 15:52:21.115" level="INFO">${TEST_USER} = testuser/scm@EXAMPLE.COM</msg>
<status status="PASS" starttime="20241113 15:52:21.115" endtime="20241113 15:52:21.115"/>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k -t /etc/security/keytabs/${keytab} ${TEST_USER}</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<kw name="Execute" library="os">
<arg>kinit -k -t /etc/security/keytabs/${keytab} ${TEST_USER}</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20241113 15:52:21.118" level="INFO">Running command 'kinit -k -t /etc/security/keytabs/testuser.keytab testuser/scm@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20241113 15:52:21.157" level="INFO">${rc} = 0</msg>
<msg timestamp="20241113 15:52:21.157" level="INFO">${output} = </msg>
<status status="PASS" starttime="20241113 15:52:21.116" endtime="20241113 15:52:21.157"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20241113 15:52:21.158" level="INFO"/>
<status status="PASS" starttime="20241113 15:52:21.158" endtime="20241113 15:52:21.158"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20241113 15:52:21.159" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<status status="PASS" starttime="20241113 15:52:21.158" endtime="20241113 15:52:21.159"/>
</kw>
<status status="PASS" starttime="20241113 15:52:21.116" endtime="20241113 15:52:21.159"/>
</kw>
<msg timestamp="20241113 15:52:21.159" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20241113 15:52:21.116" endtime="20241113 15:52:21.159"/>
</kw>
<status status="PASS" starttime="20241113 15:52:21.116" endtime="20241113 15:52:21.159"/>
</kw>
<status status="PASS" starttime="20241113 15:52:21.115" endtime="20241113 15:52:21.159"/>
</kw>
<status status="PASS" starttime="20241113 15:52:21.104" endtime="20241113 15:52:21.159"/>
</kw>
<timeout value="2 minutes"/>
<status status="PASS" starttime="20241113 15:52:21.103" endtime="20241113 15:52:21.159"/>
</test>
<doc>Kinit test user</doc>
<status status="PASS" starttime="20241113 15:52:21.066" endtime="20241113 15:52:21.160"/>
</suite>
<suite id="s1-s4" name="Scm-Decommission" source="/opt/hadoop/smoketest/scmha/scm-decommission.robot">
<kw name="Run Keyword If" library="BuiltIn" type="SETUP">
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<kw name="Kinit test user" library="commonlib">
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<kw name="Pass Execution If" library="BuiltIn">
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Skip in unsecure cluster</arg>
<doc>Conditionally skips rest of the current test, setup, or teardown with PASS status.</doc>
<status status="PASS" starttime="20241113 15:52:31.602" endtime="20241113 15:52:31.602"/>
</kw>
<kw name="Get test user principal" library="commonlib">
<var>${TEST_USER}</var>
<arg>${user}</arg>
<kw name="Execute" library="os">
<var>${instance}</var>
<arg>hostname | sed 's/scm[0-9].org/scm/;s/scm[0-9]/scm/;s/om[0-9]/om/'</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20241113 15:52:31.605" level="INFO">Running command 'hostname | sed 's/scm[0-9].org/scm/;s/scm[0-9]/scm/;s/om[0-9]/om/' 2&gt;&amp;1'.</msg>
<msg timestamp="20241113 15:52:31.609" level="INFO">${rc} = 0</msg>
<msg timestamp="20241113 15:52:31.609" level="INFO">${output} = s3g</msg>
<status status="PASS" starttime="20241113 15:52:31.603" endtime="20241113 15:52:31.609"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20241113 15:52:31.609" level="INFO">s3g</msg>
<status status="PASS" starttime="20241113 15:52:31.609" endtime="20241113 15:52:31.609"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20241113 15:52:31.610" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<status status="PASS" starttime="20241113 15:52:31.609" endtime="20241113 15:52:31.610"/>
</kw>
<status status="PASS" starttime="20241113 15:52:31.603" endtime="20241113 15:52:31.610"/>
</kw>
<msg timestamp="20241113 15:52:31.610" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20241113 15:52:31.603" endtime="20241113 15:52:31.610"/>
</kw>
<msg timestamp="20241113 15:52:31.610" level="INFO">${instance} = s3g</msg>
<status status="PASS" starttime="20241113 15:52:31.602" endtime="20241113 15:52:31.610"/>
</kw>
<msg timestamp="20241113 15:52:31.610" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" starttime="20241113 15:52:31.602" endtime="20241113 15:52:31.610"/>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<arg>${TEST_USER}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<msg timestamp="20241113 15:52:31.611" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" starttime="20241113 15:52:31.611" endtime="20241113 15:52:31.611"/>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k -t /etc/security/keytabs/${keytab} ${TEST_USER}</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<kw name="Execute" library="os">
<arg>kinit -k -t /etc/security/keytabs/${keytab} ${TEST_USER}</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20241113 15:52:31.614" level="INFO">Running command 'kinit -k -t /etc/security/keytabs/testuser.keytab testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20241113 15:52:31.640" level="INFO">${rc} = 0</msg>
<msg timestamp="20241113 15:52:31.640" level="INFO">${output} = </msg>
<status status="PASS" starttime="20241113 15:52:31.612" endtime="20241113 15:52:31.640"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20241113 15:52:31.640" level="INFO"/>
<status status="PASS" starttime="20241113 15:52:31.640" endtime="20241113 15:52:31.640"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20241113 15:52:31.641" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<status status="PASS" starttime="20241113 15:52:31.641" endtime="20241113 15:52:31.641"/>
</kw>
<status status="PASS" starttime="20241113 15:52:31.612" endtime="20241113 15:52:31.641"/>
</kw>
<msg timestamp="20241113 15:52:31.641" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20241113 15:52:31.611" endtime="20241113 15:52:31.641"/>
</kw>
<status status="PASS" starttime="20241113 15:52:31.611" endtime="20241113 15:52:31.641"/>
</kw>
<status status="PASS" starttime="20241113 15:52:31.611" endtime="20241113 15:52:31.641"/>
</kw>
<status status="PASS" starttime="20241113 15:52:31.601" endtime="20241113 15:52:31.641"/>
</kw>
<status status="PASS" starttime="20241113 15:52:31.601" endtime="20241113 15:52:31.641"/>
</kw>
<test id="s1-s4-t1" name="Decommission SCM Primordial Node" line="66">
<kw name="Get Primordial SCM ID">
<var>${primordial_scm_id}</var>
<kw name="Execute" library="os">
<var>${result}</var>
<arg>ozone admin scm roles --service-id=scmservice</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20241113 15:52:31.645" level="INFO">Running command 'ozone admin scm roles --service-id=scmservice 2&gt;&amp;1'.</msg>
<msg timestamp="20241113 15:52:35.025" level="INFO">${rc} = 0</msg>
<msg timestamp="20241113 15:52:35.025" level="INFO">${output} = scm2.org:9894:FOLLOWER:27f4fda3-c6f6-4413-af8b-f24c1ab5f5ff:172.25.0.117
scm3.org:9894:FOLLOWER:86f25435-a35d-45fb-b26d-881c010658ec:172.25.0.118
scm1.org:9894:LEADER:8cdf81f1-04c6-4d1a-b408-ff2c2fe6a...</msg>
<status status="PASS" starttime="20241113 15:52:31.643" endtime="20241113 15:52:35.025"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20241113 15:52:35.027" level="INFO">scm2.org:9894:FOLLOWER:27f4fda3-c6f6-4413-af8b-f24c1ab5f5ff:172.25.0.117
scm3.org:9894:FOLLOWER:86f25435-a35d-45fb-b26d-881c010658ec:172.25.0.118
scm1.org:9894:LEADER:8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f:172.25.0.116</msg>
<status status="PASS" starttime="20241113 15:52:35.026" endtime="20241113 15:52:35.027"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20241113 15:52:35.027" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<status status="PASS" starttime="20241113 15:52:35.027" endtime="20241113 15:52:35.027"/>
</kw>
<status status="PASS" starttime="20241113 15:52:31.643" endtime="20241113 15:52:35.028"/>
</kw>
<msg timestamp="20241113 15:52:35.028" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20241113 15:52:31.643" endtime="20241113 15:52:35.028"/>
</kw>
<msg timestamp="20241113 15:52:35.028" level="INFO">${result} = scm2.org:9894:FOLLOWER:27f4fda3-c6f6-4413-af8b-f24c1ab5f5ff:172.25.0.117
scm3.org:9894:FOLLOWER:86f25435-a35d-45fb-b26d-881c010658ec:172.25.0.118
scm1.org:9894:LEADER:8cdf81f1-04c6-4d1a-b408-ff2c2fe6a...</msg>
<status status="PASS" starttime="20241113 15:52:31.642" endtime="20241113 15:52:35.028"/>
</kw>
<kw name="Get Lines Matching Pattern" library="String">
<var>${primordial_node}</var>
<arg>${result}</arg>
<arg>scm[1234].org:9894:LEADER*</arg>
<doc>Returns lines of the given ``string`` that match the ``pattern``.</doc>
<msg timestamp="20241113 15:52:35.029" level="INFO">1 out of 3 lines matched</msg>
<msg timestamp="20241113 15:52:35.029" level="INFO">${primordial_node} = scm1.org:9894:LEADER:8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f:172.25.0.116</msg>
<status status="PASS" starttime="20241113 15:52:35.028" endtime="20241113 15:52:35.029"/>
</kw>
<kw name="Split String" library="String">
<var>${primordial_split}</var>
<arg>${primordial_node}</arg>
<arg>:</arg>
<doc>Splits the ``string`` using ``separator`` as a delimiter string.</doc>
<msg timestamp="20241113 15:52:35.029" level="INFO">${primordial_split} = ['scm1.org', '9894', 'LEADER', '8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f', '172.25.0.116']</msg>
<status status="PASS" starttime="20241113 15:52:35.029" endtime="20241113 15:52:35.029"/>
</kw>
<kw name="Strip String" library="String">
<var>${primordial_scmId}</var>
<arg>${primordial_split[3]}</arg>
<doc>Remove leading and/or trailing whitespaces from the given string.</doc>
<msg timestamp="20241113 15:52:35.031" level="INFO">${primordial_scmId} = 8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f</msg>
<status status="PASS" starttime="20241113 15:52:35.029" endtime="20241113 15:52:35.031"/>
</kw>
<msg timestamp="20241113 15:52:35.031" level="INFO">${primordial_scm_id} = 8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f</msg>
<status status="PASS" starttime="20241113 15:52:31.642" endtime="20241113 15:52:35.031"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>Primordial scm id : ${primordial_scm_id}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20241113 15:52:35.031" level="INFO">Primordial scm id : 8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f</msg>
<status status="PASS" starttime="20241113 15:52:35.031" endtime="20241113 15:52:35.031"/>
</kw>
<kw name="Execute And Ignore Error" library="os">
<var>${decomm_output}</var>
<arg>ozone admin scm decommission --nodeid=${primordial_scm_id}</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20241113 15:52:35.034" level="INFO">Running command 'ozone admin scm decommission --nodeid=8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f 2&gt;&amp;1'.</msg>
<msg timestamp="20241113 15:52:38.142" level="INFO">${rc} = 255</msg>
<msg timestamp="20241113 15:52:38.142" level="INFO">${output} = Error decommissioning Scm 8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f, Cannot remove current leader.</msg>
<status status="PASS" starttime="20241113 15:52:35.032" endtime="20241113 15:52:38.142"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20241113 15:52:38.143" level="INFO">Error decommissioning Scm 8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f, Cannot remove current leader.</msg>
<status status="PASS" starttime="20241113 15:52:38.143" endtime="20241113 15:52:38.143"/>
</kw>
<msg timestamp="20241113 15:52:38.143" level="INFO">${decomm_output} = Error decommissioning Scm 8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f, Cannot remove current leader.</msg>
<status status="PASS" starttime="20241113 15:52:35.031" endtime="20241113 15:52:38.143"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${decomm_output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20241113 15:52:38.144" level="INFO">Error decommissioning Scm 8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f, Cannot remove current leader.</msg>
<status status="PASS" starttime="20241113 15:52:38.143" endtime="20241113 15:52:38.144"/>
</kw>
<kw name="Should Contain" library="BuiltIn">
<arg>${decomm_output}</arg>
<arg>Cannot remove current leader</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20241113 15:52:38.144" endtime="20241113 15:52:38.144"/>
</kw>
<kw name="Create volume bucket and put key">
<var>${md5sum}</var>
<kw name="Execute" library="os">
<arg>ozone sh volume create /${VOLUME}</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20241113 15:52:38.147" level="INFO">Running command 'ozone sh volume create /decom-volume 2&gt;&amp;1'.</msg>
<msg timestamp="20241113 15:52:42.166" level="INFO">${rc} = 0</msg>
<msg timestamp="20241113 15:52:42.166" level="INFO">${output} = </msg>
<status status="PASS" starttime="20241113 15:52:38.145" endtime="20241113 15:52:42.166"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20241113 15:52:42.167" level="INFO"/>
<status status="PASS" starttime="20241113 15:52:42.167" endtime="20241113 15:52:42.167"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20241113 15:52:42.167" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<status status="PASS" starttime="20241113 15:52:42.167" endtime="20241113 15:52:42.168"/>
</kw>
<status status="PASS" starttime="20241113 15:52:38.145" endtime="20241113 15:52:42.168"/>
</kw>
<msg timestamp="20241113 15:52:42.168" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20241113 15:52:38.145" endtime="20241113 15:52:42.168"/>
</kw>
<status status="PASS" starttime="20241113 15:52:38.144" endtime="20241113 15:52:42.168"/>
</kw>
<kw name="Execute" library="os">
<arg>ozone sh bucket create /${VOLUME}/${BUCKET}</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20241113 15:52:42.171" level="INFO">Running command 'ozone sh bucket create /decom-volume/decom-bucket 2&gt;&amp;1'.</msg>
<msg timestamp="20241113 15:52:46.242" level="INFO">${rc} = 0</msg>
<msg timestamp="20241113 15:52:46.242" level="INFO">${output} = </msg>
<status status="PASS" starttime="20241113 15:52:42.169" endtime="20241113 15:52:46.242"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20241113 15:52:46.243" level="INFO"/>
<status status="PASS" starttime="20241113 15:52:46.242" endtime="20241113 15:52:46.243"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20241113 15:52:46.243" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<status status="PASS" starttime="20241113 15:52:46.243" endtime="20241113 15:52:46.243"/>
</kw>
<status status="PASS" starttime="20241113 15:52:42.169" endtime="20241113 15:52:46.243"/>
</kw>
<msg timestamp="20241113 15:52:46.243" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20241113 15:52:42.168" endtime="20241113 15:52:46.244"/>
</kw>
<status status="PASS" starttime="20241113 15:52:42.168" endtime="20241113 15:52:46.244"/>
</kw>
<kw name="Create File" library="OperatingSystem">
<arg>/tmp/${TESTFILE}</arg>
<doc>Creates a file with the given content and encoding.</doc>
<msg timestamp="20241113 15:52:46.244" level="INFO" html="true">Created file '&lt;a href="file:///tmp/testfiledecomm"&gt;/tmp/testfiledecomm&lt;/a&gt;'.</msg>
<status status="PASS" starttime="20241113 15:52:46.244" endtime="20241113 15:52:46.244"/>
</kw>
<kw name="Execute" library="os">
<arg>echo "This is a decommissioning test" &gt; /tmp/${TESTFILE}</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20241113 15:52:46.247" level="INFO">Running command 'echo "This is a decommissioning test" &gt; /tmp/testfiledecomm'.</msg>
<msg timestamp="20241113 15:52:46.249" level="INFO">${rc} = 0</msg>
<msg timestamp="20241113 15:52:46.249" level="INFO">${output} = </msg>
<status status="PASS" starttime="20241113 15:52:46.245" endtime="20241113 15:52:46.249"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20241113 15:52:46.250" level="INFO"/>
<status status="PASS" starttime="20241113 15:52:46.249" endtime="20241113 15:52:46.250"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20241113 15:52:46.250" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<status status="PASS" starttime="20241113 15:52:46.250" endtime="20241113 15:52:46.250"/>
</kw>
<status status="PASS" starttime="20241113 15:52:46.245" endtime="20241113 15:52:46.250"/>
</kw>
<msg timestamp="20241113 15:52:46.250" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20241113 15:52:46.245" endtime="20241113 15:52:46.250"/>
</kw>
<status status="PASS" starttime="20241113 15:52:46.244" endtime="20241113 15:52:46.251"/>
</kw>
<kw name="Execute" library="os">
<var>${md5sum}</var>
<arg>md5sum /tmp/${TESTFILE} | awk '{print $1}'</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20241113 15:52:46.253" level="INFO">Running command 'md5sum /tmp/testfiledecomm | awk '{print $1}' 2&gt;&amp;1'.</msg>
<msg timestamp="20241113 15:52:46.258" level="INFO">${rc} = 0</msg>
<msg timestamp="20241113 15:52:46.258" level="INFO">${output} = ce98d686e952355ef42e64f4b0dcf65f</msg>
<status status="PASS" starttime="20241113 15:52:46.251" endtime="20241113 15:52:46.258"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20241113 15:52:46.258" level="INFO">ce98d686e952355ef42e64f4b0dcf65f</msg>
<status status="PASS" starttime="20241113 15:52:46.258" endtime="20241113 15:52:46.258"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20241113 15:52:46.259" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<status status="PASS" starttime="20241113 15:52:46.258" endtime="20241113 15:52:46.259"/>
</kw>
<status status="PASS" starttime="20241113 15:52:46.251" endtime="20241113 15:52:46.259"/>
</kw>
<msg timestamp="20241113 15:52:46.259" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20241113 15:52:46.251" endtime="20241113 15:52:46.259"/>
</kw>
<msg timestamp="20241113 15:52:46.259" level="INFO">${md5sum} = ce98d686e952355ef42e64f4b0dcf65f</msg>
<status status="PASS" starttime="20241113 15:52:46.251" endtime="20241113 15:52:46.259"/>
</kw>
<kw name="Execute" library="os">
<arg>ozone sh key put /${VOLUME}/${BUCKET}/${TESTFILE} /tmp/${TESTFILE}</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20241113 15:52:46.262" level="INFO">Running command 'ozone sh key put /decom-volume/decom-bucket/testfiledecomm /tmp/testfiledecomm 2&gt;&amp;1'.</msg>
<msg timestamp="20241113 15:52:53.462" level="INFO">${rc} = 0</msg>
<msg timestamp="20241113 15:52:53.462" level="INFO">${output} = </msg>
<status status="PASS" starttime="20241113 15:52:46.260" endtime="20241113 15:52:53.462"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20241113 15:52:53.463" level="INFO"/>
<status status="PASS" starttime="20241113 15:52:53.462" endtime="20241113 15:52:53.463"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20241113 15:52:53.463" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<status status="PASS" starttime="20241113 15:52:53.463" endtime="20241113 15:52:53.464"/>
</kw>
<status status="PASS" starttime="20241113 15:52:46.260" endtime="20241113 15:52:53.464"/>
</kw>
<msg timestamp="20241113 15:52:53.464" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20241113 15:52:46.260" endtime="20241113 15:52:53.464"/>
</kw>
<status status="PASS" starttime="20241113 15:52:46.259" endtime="20241113 15:52:53.464"/>
</kw>
<msg timestamp="20241113 15:52:53.464" level="INFO">${md5sum} = ce98d686e952355ef42e64f4b0dcf65f</msg>
<status status="PASS" starttime="20241113 15:52:38.144" endtime="20241113 15:52:53.464"/>
</kw>
<kw name="Transfer Leader to non-primordial node Follower">
<var>${transfer_result}</var>
<kw name="Execute" library="os">
<var>${result}</var>
<arg>ozone admin scm roles --service-id=scmservice</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20241113 15:52:53.467" level="INFO">Running command 'ozone admin scm roles --service-id=scmservice 2&gt;&amp;1'.</msg>
<msg timestamp="20241113 15:52:56.908" level="INFO">${rc} = 0</msg>
<msg timestamp="20241113 15:52:56.908" level="INFO">${output} = scm2.org:9894:FOLLOWER:27f4fda3-c6f6-4413-af8b-f24c1ab5f5ff:172.25.0.117
scm3.org:9894:FOLLOWER:86f25435-a35d-45fb-b26d-881c010658ec:172.25.0.118
scm1.org:9894:LEADER:8cdf81f1-04c6-4d1a-b408-ff2c2fe6a...</msg>
<status status="PASS" starttime="20241113 15:52:53.465" endtime="20241113 15:52:56.908"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20241113 15:52:56.909" level="INFO">scm2.org:9894:FOLLOWER:27f4fda3-c6f6-4413-af8b-f24c1ab5f5ff:172.25.0.117
scm3.org:9894:FOLLOWER:86f25435-a35d-45fb-b26d-881c010658ec:172.25.0.118
scm1.org:9894:LEADER:8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f:172.25.0.116</msg>
<status status="PASS" starttime="20241113 15:52:56.908" endtime="20241113 15:52:56.909"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20241113 15:52:56.910" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<status status="PASS" starttime="20241113 15:52:56.909" endtime="20241113 15:52:56.910"/>
</kw>
<status status="PASS" starttime="20241113 15:52:53.465" endtime="20241113 15:52:56.910"/>
</kw>
<msg timestamp="20241113 15:52:56.910" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20241113 15:52:53.465" endtime="20241113 15:52:56.910"/>
</kw>
<msg timestamp="20241113 15:52:56.910" level="INFO">${result} = scm2.org:9894:FOLLOWER:27f4fda3-c6f6-4413-af8b-f24c1ab5f5ff:172.25.0.117
scm3.org:9894:FOLLOWER:86f25435-a35d-45fb-b26d-881c010658ec:172.25.0.118
scm1.org:9894:LEADER:8cdf81f1-04c6-4d1a-b408-ff2c2fe6a...</msg>
<status status="PASS" starttime="20241113 15:52:53.465" endtime="20241113 15:52:56.910"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${result}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20241113 15:52:56.910" level="INFO">scm2.org:9894:FOLLOWER:27f4fda3-c6f6-4413-af8b-f24c1ab5f5ff:172.25.0.117
scm3.org:9894:FOLLOWER:86f25435-a35d-45fb-b26d-881c010658ec:172.25.0.118
scm1.org:9894:LEADER:8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f:172.25.0.116</msg>
<status status="PASS" starttime="20241113 15:52:56.910" endtime="20241113 15:52:56.910"/>
</kw>
<kw name="Get Lines Matching Pattern" library="String">
<var>${follower_nodes}</var>
<arg>${result}</arg>
<arg>scm[1234].org:9894:FOLLOWER*</arg>
<doc>Returns lines of the given ``string`` that match the ``pattern``.</doc>
<msg timestamp="20241113 15:52:56.911" level="INFO">2 out of 3 lines matched</msg>
<msg timestamp="20241113 15:52:56.911" level="INFO">${follower_nodes} = scm2.org:9894:FOLLOWER:27f4fda3-c6f6-4413-af8b-f24c1ab5f5ff:172.25.0.117
scm3.org:9894:FOLLOWER:86f25435-a35d-45fb-b26d-881c010658ec:172.25.0.118</msg>
<status status="PASS" starttime="20241113 15:52:56.911" endtime="20241113 15:52:56.911"/>
</kw>
<kw name="Get Line" library="String">
<var>${follower_node}</var>
<arg>${follower_nodes}</arg>
<arg>0</arg>
<doc>Returns the specified line from the given ``string``.</doc>
<msg timestamp="20241113 15:52:56.912" level="INFO">${follower_node} = scm2.org:9894:FOLLOWER:27f4fda3-c6f6-4413-af8b-f24c1ab5f5ff:172.25.0.117</msg>
<status status="PASS" starttime="20241113 15:52:56.911" endtime="20241113 15:52:56.912"/>
</kw>
<kw name="Split String" library="String">
<var>${follower_split}</var>
<arg>${follower_node}</arg>
<arg>:</arg>
<doc>Splits the ``string`` using ``separator`` as a delimiter string.</doc>
<msg timestamp="20241113 15:52:56.912" level="INFO">${follower_split} = ['scm2.org', '9894', 'FOLLOWER', '27f4fda3-c6f6-4413-af8b-f24c1ab5f5ff', '172.25.0.117']</msg>
<status status="PASS" starttime="20241113 15:52:56.912" endtime="20241113 15:52:56.912"/>
</kw>
<kw name="Strip String" library="String">
<var>${follower_scmId}</var>
<arg>${follower_split[3]}</arg>
<doc>Remove leading and/or trailing whitespaces from the given string.</doc>
<msg timestamp="20241113 15:52:56.913" level="INFO">${follower_scmId} = 27f4fda3-c6f6-4413-af8b-f24c1ab5f5ff</msg>
<status status="PASS" starttime="20241113 15:52:56.912" endtime="20241113 15:52:56.913"/>
</kw>
<kw name="Execute" library="os">
<var>${result}</var>
<arg>ozone admin scm transfer --service-id=scmservice -n ${follower_scmId}</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20241113 15:52:56.916" level="INFO">Running command 'ozone admin scm transfer --service-id=scmservice -n 27f4fda3-c6f6-4413-af8b-f24c1ab5f5ff 2&gt;&amp;1'.</msg>
<msg timestamp="20241113 15:53:07.613" level="INFO">${rc} = 0</msg>
<msg timestamp="20241113 15:53:07.613" level="INFO">${output} = Transfer leadership successfully to 27f4fda3-c6f6-4413-af8b-f24c1ab5f5ff.</msg>
<status status="PASS" starttime="20241113 15:52:56.914" endtime="20241113 15:53:07.613"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20241113 15:53:07.614" level="INFO">Transfer leadership successfully to 27f4fda3-c6f6-4413-af8b-f24c1ab5f5ff.</msg>
<status status="PASS" starttime="20241113 15:53:07.614" endtime="20241113 15:53:07.614"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20241113 15:53:07.615" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<status status="PASS" starttime="20241113 15:53:07.614" endtime="20241113 15:53:07.615"/>
</kw>
<status status="PASS" starttime="20241113 15:52:56.914" endtime="20241113 15:53:07.615"/>
</kw>
<msg timestamp="20241113 15:53:07.615" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20241113 15:52:56.913" endtime="20241113 15:53:07.615"/>
</kw>
<msg timestamp="20241113 15:53:07.615" level="INFO">${result} = Transfer leadership successfully to 27f4fda3-c6f6-4413-af8b-f24c1ab5f5ff.</msg>
<status status="PASS" starttime="20241113 15:52:56.913" endtime="20241113 15:53:07.615"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${result}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20241113 15:53:07.615" level="INFO">Transfer leadership successfully to 27f4fda3-c6f6-4413-af8b-f24c1ab5f5ff.</msg>
<status status="PASS" starttime="20241113 15:53:07.615" endtime="20241113 15:53:07.615"/>
</kw>
<msg timestamp="20241113 15:53:07.616" level="INFO">${transfer_result} = Transfer leadership successfully to 27f4fda3-c6f6-4413-af8b-f24c1ab5f5ff.</msg>
<status status="PASS" starttime="20241113 15:52:53.464" endtime="20241113 15:53:07.616"/>
</kw>
<kw name="Should Contain" library="BuiltIn">
<arg>${transfer_result}</arg>
<arg>Transfer leadership successfully</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20241113 15:53:07.616" endtime="20241113 15:53:07.616"/>
</kw>
<kw name="Get SCM Node count">
<var>${node_count}</var>
<kw name="Execute" library="os">
<var>${result}</var>
<arg>ozone admin scm roles --service-id=scmservice</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20241113 15:53:07.619" level="INFO">Running command 'ozone admin scm roles --service-id=scmservice 2&gt;&amp;1'.</msg>
<msg timestamp="20241113 15:53:12.959" level="INFO">${rc} = 0</msg>
<msg timestamp="20241113 15:53:12.959" level="INFO">${output} = scm2.org:9894:LEADER:27f4fda3-c6f6-4413-af8b-f24c1ab5f5ff:172.25.0.117
scm3.org:9894:FOLLOWER:86f25435-a35d-45fb-b26d-881c010658ec:172.25.0.118
scm1.org:9894:FOLLOWER:8cdf81f1-04c6-4d1a-b408-ff2c2fe6a...</msg>
<status status="PASS" starttime="20241113 15:53:07.617" endtime="20241113 15:53:12.959"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20241113 15:53:12.960" level="INFO">scm2.org:9894:LEADER:27f4fda3-c6f6-4413-af8b-f24c1ab5f5ff:172.25.0.117
scm3.org:9894:FOLLOWER:86f25435-a35d-45fb-b26d-881c010658ec:172.25.0.118
scm1.org:9894:FOLLOWER:8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f:172.25.0.116</msg>
<status status="PASS" starttime="20241113 15:53:12.960" endtime="20241113 15:53:12.960"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20241113 15:53:12.961" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<status status="PASS" starttime="20241113 15:53:12.960" endtime="20241113 15:53:12.961"/>
</kw>
<status status="PASS" starttime="20241113 15:53:07.617" endtime="20241113 15:53:12.961"/>
</kw>
<msg timestamp="20241113 15:53:12.961" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20241113 15:53:07.617" endtime="20241113 15:53:12.961"/>
</kw>
<msg timestamp="20241113 15:53:12.961" level="INFO">${result} = scm2.org:9894:LEADER:27f4fda3-c6f6-4413-af8b-f24c1ab5f5ff:172.25.0.117
scm3.org:9894:FOLLOWER:86f25435-a35d-45fb-b26d-881c010658ec:172.25.0.118
scm1.org:9894:FOLLOWER:8cdf81f1-04c6-4d1a-b408-ff2c2fe6a...</msg>
<status status="PASS" starttime="20241113 15:53:07.616" endtime="20241113 15:53:12.961"/>
</kw>
<kw name="Get Lines Matching Pattern" library="String">
<var>${nodes_in_quorum}</var>
<arg>${result}</arg>
<arg>scm[1234].org:9894:*</arg>
<doc>Returns lines of the given ``string`` that match the ``pattern``.</doc>
<msg timestamp="20241113 15:53:12.962" level="INFO">3 out of 3 lines matched</msg>
<msg timestamp="20241113 15:53:12.962" level="INFO">${nodes_in_quorum} = scm2.org:9894:LEADER:27f4fda3-c6f6-4413-af8b-f24c1ab5f5ff:172.25.0.117
scm3.org:9894:FOLLOWER:86f25435-a35d-45fb-b26d-881c010658ec:172.25.0.118
scm1.org:9894:FOLLOWER:8cdf81f1-04c6-4d1a-b408-ff2c2fe6a...</msg>
<status status="PASS" starttime="20241113 15:53:12.961" endtime="20241113 15:53:12.962"/>
</kw>
<kw name="Get Line Count" library="String">
<var>${node_count}</var>
<arg>${nodes_in_quorum}</arg>
<doc>Returns and logs the number of lines in the given string.</doc>
<msg timestamp="20241113 15:53:12.962" level="INFO">3 lines</msg>
<msg timestamp="20241113 15:53:12.962" level="INFO">${node_count} = 3</msg>
<status status="PASS" starttime="20241113 15:53:12.962" endtime="20241113 15:53:12.962"/>
</kw>
<msg timestamp="20241113 15:53:12.963" level="INFO">${node_count} = 3</msg>
<status status="PASS" starttime="20241113 15:53:07.616" endtime="20241113 15:53:12.963"/>
</kw>
<kw name="Convert To String" library="BuiltIn">
<var>${node_count_pre}</var>
<arg>${node_count}</arg>
<doc>Converts the given item to a Unicode string.</doc>
<msg timestamp="20241113 15:53:12.963" level="INFO">${node_count_pre} = 3</msg>
<status status="PASS" starttime="20241113 15:53:12.963" endtime="20241113 15:53:12.963"/>
</kw>
<kw name="Evaluate" library="BuiltIn">
<var>${n}</var>
<arg>${node_count}-1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<msg timestamp="20241113 15:53:12.963" level="INFO">${n} = 2</msg>
<status status="PASS" starttime="20241113 15:53:12.963" endtime="20241113 15:53:12.963"/>
</kw>
<kw name="Convert To String" library="BuiltIn">
<var>${node_count_expect}</var>
<arg>${n}</arg>
<doc>Converts the given item to a Unicode string.</doc>
<msg timestamp="20241113 15:53:12.964" level="INFO">${node_count_expect} = 2</msg>
<status status="PASS" starttime="20241113 15:53:12.964" endtime="20241113 15:53:12.964"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>SCM Instance Count before SCM Decommission: ${node_count_pre}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20241113 15:53:12.964" level="INFO">SCM Instance Count before SCM Decommission: 3</msg>
<status status="PASS" starttime="20241113 15:53:12.964" endtime="20241113 15:53:12.964"/>
</kw>
<kw name="Execute" library="os">
<var>${decommission_res}</var>
<arg>ozone admin scm decommission --nodeid=${primordial_scm_id}</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20241113 15:53:12.967" level="INFO">Running command 'ozone admin scm decommission --nodeid=8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f 2&gt;&amp;1'.</msg>
<msg timestamp="20241113 15:53:18.415" level="INFO">${rc} = 0</msg>
<msg timestamp="20241113 15:53:18.415" level="INFO">${output} = Decommissioned Scm 8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f</msg>
<status status="PASS" starttime="20241113 15:53:12.965" endtime="20241113 15:53:18.416"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20241113 15:53:18.416" level="INFO">Decommissioned Scm 8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f</msg>
<status status="PASS" starttime="20241113 15:53:18.416" endtime="20241113 15:53:18.417"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20241113 15:53:18.417" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<status status="PASS" starttime="20241113 15:53:18.417" endtime="20241113 15:53:18.417"/>
</kw>
<status status="PASS" starttime="20241113 15:53:12.965" endtime="20241113 15:53:18.417"/>
</kw>
<msg timestamp="20241113 15:53:18.417" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20241113 15:53:12.965" endtime="20241113 15:53:18.417"/>
</kw>
<msg timestamp="20241113 15:53:18.417" level="INFO">${decommission_res} = Decommissioned Scm 8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f</msg>
<status status="PASS" starttime="20241113 15:53:12.964" endtime="20241113 15:53:18.418"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${decommission_res}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20241113 15:53:18.418" level="INFO">Decommissioned Scm 8cdf81f1-04c6-4d1a-b408-ff2c2fe6ae1f</msg>
<status status="PASS" starttime="20241113 15:53:18.418" endtime="20241113 15:53:18.418"/>
</kw>
<kw name="Should Contain" library="BuiltIn">
<arg>${decommission_res}</arg>
<arg>Decommissioned</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20241113 15:53:18.418" endtime="20241113 15:53:18.418"/>
</kw>
<kw name="Get SCM Node count">
<var>${node_count}</var>
<kw name="Execute" library="os">
<var>${result}</var>
<arg>ozone admin scm roles --service-id=scmservice</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20241113 15:53:18.422" level="INFO">Running command 'ozone admin scm roles --service-id=scmservice 2&gt;&amp;1'.</msg>
<msg timestamp="20241113 15:53:23.577" level="INFO">${rc} = 0</msg>
<msg timestamp="20241113 15:53:23.578" level="INFO">${output} = scm2.org:9894:LEADER:27f4fda3-c6f6-4413-af8b-f24c1ab5f5ff:172.25.0.117
scm3.org:9894:FOLLOWER:86f25435-a35d-45fb-b26d-881c010658ec:172.25.0.118</msg>
<status status="PASS" starttime="20241113 15:53:18.420" endtime="20241113 15:53:23.578"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20241113 15:53:23.579" level="INFO">scm2.org:9894:LEADER:27f4fda3-c6f6-4413-af8b-f24c1ab5f5ff:172.25.0.117
scm3.org:9894:FOLLOWER:86f25435-a35d-45fb-b26d-881c010658ec:172.25.0.118</msg>
<status status="PASS" starttime="20241113 15:53:23.578" endtime="20241113 15:53:23.579"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20241113 15:53:23.579" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<status status="PASS" starttime="20241113 15:53:23.579" endtime="20241113 15:53:23.579"/>
</kw>
<status status="PASS" starttime="20241113 15:53:18.419" endtime="20241113 15:53:23.579"/>
</kw>
<msg timestamp="20241113 15:53:23.579" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20241113 15:53:18.419" endtime="20241113 15:53:23.579"/>
</kw>
<msg timestamp="20241113 15:53:23.579" level="INFO">${result} = scm2.org:9894:LEADER:27f4fda3-c6f6-4413-af8b-f24c1ab5f5ff:172.25.0.117
scm3.org:9894:FOLLOWER:86f25435-a35d-45fb-b26d-881c010658ec:172.25.0.118</msg>
<status status="PASS" starttime="20241113 15:53:18.419" endtime="20241113 15:53:23.580"/>
</kw>
<kw name="Get Lines Matching Pattern" library="String">
<var>${nodes_in_quorum}</var>
<arg>${result}</arg>
<arg>scm[1234].org:9894:*</arg>
<doc>Returns lines of the given ``string`` that match the ``pattern``.</doc>
<msg timestamp="20241113 15:53:23.580" level="INFO">2 out of 2 lines matched</msg>
<msg timestamp="20241113 15:53:23.580" level="INFO">${nodes_in_quorum} = scm2.org:9894:LEADER:27f4fda3-c6f6-4413-af8b-f24c1ab5f5ff:172.25.0.117
scm3.org:9894:FOLLOWER:86f25435-a35d-45fb-b26d-881c010658ec:172.25.0.118</msg>
<status status="PASS" starttime="20241113 15:53:23.580" endtime="20241113 15:53:23.580"/>
</kw>
<kw name="Get Line Count" library="String">
<var>${node_count}</var>
<arg>${nodes_in_quorum}</arg>
<doc>Returns and logs the number of lines in the given string.</doc>
<msg timestamp="20241113 15:53:23.580" level="INFO">2 lines</msg>
<msg timestamp="20241113 15:53:23.580" level="INFO">${node_count} = 2</msg>
<status status="PASS" starttime="20241113 15:53:23.580" endtime="20241113 15:53:23.580"/>
</kw>
<msg timestamp="20241113 15:53:23.581" level="INFO">${node_count} = 2</msg>
<status status="PASS" starttime="20241113 15:53:18.418" endtime="20241113 15:53:23.581"/>
</kw>
<kw name="Convert To String" library="BuiltIn">
<var>${node_count_post}</var>
<arg>${node_count}</arg>
<doc>Converts the given item to a Unicode string.</doc>
<msg timestamp="20241113 15:53:23.581" level="INFO">${node_count_post} = 2</msg>
<status status="PASS" starttime="20241113 15:53:23.581" endtime="20241113 15:53:23.581"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>SCM Instance Count after SCM Decommission: ${node_count_post}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20241113 15:53:23.581" level="INFO">SCM Instance Count after SCM Decommission: 2</msg>
<status status="PASS" starttime="20241113 15:53:23.581" endtime="20241113 15:53:23.581"/>
</kw>
<kw name="Should Be Equal" library="BuiltIn">
<arg>${node_count_expect}</arg>
<arg>${node_count_post}</arg>
<doc>Fails if the given objects are unequal.</doc>
<status status="PASS" starttime="20241113 15:53:23.582" endtime="20241113 15:53:23.582"/>
</kw>
<kw name="Execute" library="os">
<arg>ozone sh key get /${VOLUME}/${BUCKET}/${TESTFILE} /tmp/getdecomfile</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20241113 15:53:23.585" level="INFO">Running command 'ozone sh key get /decom-volume/decom-bucket/testfiledecomm /tmp/getdecomfile 2&gt;&amp;1'.</msg>
<msg timestamp="20241113 15:54:13.539" level="INFO">${rc} = 0</msg>
<msg timestamp="20241113 15:54:13.539" level="INFO">${output} = </msg>
<status status="PASS" starttime="20241113 15:53:23.583" endtime="20241113 15:54:13.539"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20241113 15:54:13.540" level="INFO"/>
<status status="PASS" starttime="20241113 15:54:13.539" endtime="20241113 15:54:13.540"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20241113 15:54:13.540" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<status status="PASS" starttime="20241113 15:54:13.540" endtime="20241113 15:54:13.540"/>
</kw>
<status status="PASS" starttime="20241113 15:53:23.583" endtime="20241113 15:54:13.540"/>
</kw>
<msg timestamp="20241113 15:54:13.540" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20241113 15:53:23.582" endtime="20241113 15:54:13.540"/>
</kw>
<status status="PASS" starttime="20241113 15:53:23.582" endtime="20241113 15:54:13.541"/>
</kw>
<kw name="Execute" library="os">
<var>${md5sum_new}</var>
<arg>md5sum /tmp/getdecomfile | awk '{print $1}'</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20241113 15:54:13.543" level="INFO">Running command 'md5sum /tmp/getdecomfile | awk '{print $1}' 2&gt;&amp;1'.</msg>
<msg timestamp="20241113 15:54:13.548" level="INFO">${rc} = 0</msg>
<msg timestamp="20241113 15:54:13.548" level="INFO">${output} = ce98d686e952355ef42e64f4b0dcf65f</msg>
<status status="PASS" starttime="20241113 15:54:13.541" endtime="20241113 15:54:13.548"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20241113 15:54:13.548" level="INFO">ce98d686e952355ef42e64f4b0dcf65f</msg>
<status status="PASS" starttime="20241113 15:54:13.548" endtime="20241113 15:54:13.548"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20241113 15:54:13.549" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<status status="PASS" starttime="20241113 15:54:13.549" endtime="20241113 15:54:13.549"/>
</kw>
<status status="PASS" starttime="20241113 15:54:13.541" endtime="20241113 15:54:13.549"/>
</kw>
<msg timestamp="20241113 15:54:13.549" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20241113 15:54:13.541" endtime="20241113 15:54:13.549"/>
</kw>
<msg timestamp="20241113 15:54:13.549" level="INFO">${md5sum_new} = ce98d686e952355ef42e64f4b0dcf65f</msg>
<status status="PASS" starttime="20241113 15:54:13.541" endtime="20241113 15:54:13.549"/>
</kw>
<kw name="Should Be Equal" library="BuiltIn">
<arg>${md5sum}</arg>
<arg>${md5sum_new}</arg>
<doc>Fails if the given objects are unequal.</doc>
<status status="PASS" starttime="20241113 15:54:13.549" endtime="20241113 15:54:13.550"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20241113 15:52:31.642" endtime="20241113 15:54:13.550"/>
</test>
<doc>Test Ozone SCM Decommissioning</doc>
<status status="PASS" starttime="20241113 15:52:31.565" endtime="20241113 15:54:13.551"/>
</suite>
<status status="PASS" starttime="N/A" endtime="N/A" elapsedtime="130433"/>
</suite>
<statistics>
<total>
<stat pass="6" fail="0" skip="0">All Tests</stat>
</total>
<tag>
</tag>
<suite>
<stat pass="6" fail="0" skip="0" id="s1" name="ozonesecure-ha-scm-decommission">ozonesecure-ha-scm-decommission</stat>
<stat pass="1" fail="0" skip="0" id="s1-s1" name="Kinit">ozonesecure-ha-scm-decommission.Kinit</stat>
<stat pass="3" fail="0" skip="0" id="s1-s2" name="Primordial-Scm">ozonesecure-ha-scm-decommission.Primordial-Scm</stat>
<stat pass="1" fail="0" skip="0" id="s1-s3" name="Kinit">ozonesecure-ha-scm-decommission.Kinit</stat>
<stat pass="1" fail="0" skip="0" id="s1-s4" name="Scm-Decommission">ozonesecure-ha-scm-decommission.Scm-Decommission</stat>
</suite>
</statistics>
<errors>
</errors>
</robot>
