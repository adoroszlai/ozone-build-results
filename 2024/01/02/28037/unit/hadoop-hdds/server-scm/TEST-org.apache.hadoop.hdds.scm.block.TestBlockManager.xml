<?xml version="1.0" encoding="UTF-8"?>
<testsuite xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="https://maven.apache.org/surefire/maven-surefire-plugin/xsd/surefire-test-report-3.0.xsd" version="3.0" name="org.apache.hadoop.hdds.scm.block.TestBlockManager" time="4.697" tests="12" errors="0" skipped="0" failures="1">
  <properties>
    <property name="awt.toolkit" value="sun.awt.X11.XToolkit"/>
    <property name="file.encoding.pkg" value="sun.io"/>
    <property name="java.specification.version" value="1.8"/>
    <property name="sun.cpu.isalist" value=""/>
    <property name="sun.jnu.encoding" value="UTF-8"/>
    <property name="gradle.enterprise.listener.surefire.forkId" value="1"/>
    <property name="java.class.path" value="/home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-classes:/home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/classes:/home/runner/work/ozone/ozone/hadoop-hdds/test-utils/target/classes:/home/runner/.m2/repository/com/google/guava/guava/32.0.0-jre/guava-32.0.0-jre.jar:/home/runner/.m2/repository/com/google/guava/failureaccess/1.0.1/failureaccess-1.0.1.jar:/home/runner/.m2/repository/com/google/guava/listenablefuture/9999.0-empty-to-avoid-conflict-with-guava/listenablefuture-9999.0-empty-to-avoid-conflict-with-guava.jar:/home/runner/.m2/repository/com/google/code/findbugs/jsr305/3.0.0/jsr305-3.0.0.jar:/home/runner/.m2/repository/org/checkerframework/checker-qual/3.33.0/checker-qual-3.33.0.jar:/home/runner/.m2/repository/com/google/errorprone/error_prone_annotations/2.2.0/error_prone_annotations-2.2.0.jar:/home/runner/.m2/repository/com/google/j2objc/j2objc-annotations/2.8/j2objc-annotations-2.8.jar:/home/runner/.m2/repository/commons-io/commons-io/2.11.0/commons-io-2.11.0.jar:/home/runner/.m2/repository/commons-logging/commons-logging/1.2/commons-logging-1.2.jar:/home/runner/.m2/repository/ch/qos/reload4j/reload4j/1.2.25/reload4j-1.2.25.jar:/home/runner/.m2/repository/org/apache/commons/commons-lang3/3.14.0/commons-lang3-3.14.0.jar:/home/runner/.m2/repository/org/slf4j/slf4j-api/1.7.36/slf4j-api-1.7.36.jar:/home/runner/.m2/repository/org/apache/logging/log4j/log4j-api/2.17.1/log4j-api-2.17.1.jar:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/classes:/home/runner/work/ozone/ozone/hadoop-hdds/hadoop-dependency-client/target/classes:/home/runner/.m2/repository/info/picocli/picocli/4.7.5/picocli-4.7.5.jar:/home/runner/.m2/repository/com/fasterxml/jackson/core/jackson-annotations/2.13.4/jackson-annotations-2.13.4.jar:/home/runner/.m2/repository/com/fasterxml/jackson/datatype/jackson-datatype-jsr310/2.13.4/jackson-datatype-jsr310-2.13.4.jar:/home/runner/.m2/repository/com/fasterxml/jackson/core/jackson-core/2.13.4/jackson-core-2.13.4.jar:/home/runner/work/ozone/ozone/hadoop-hdds/annotations/target/classes:/home/runner/work/ozone/ozone/hadoop-hdds/config/target/classes:/home/runner/.m2/repository/javax/annotation/javax.annotation-api/1.3.2/javax.annotation-api-1.3.2.jar:/home/runner/.m2/repository/org/apache/ratis/ratis-server/3.0.0/ratis-server-3.0.0.jar:/home/runner/.m2/repository/org/apache/ratis/ratis-thirdparty-misc/1.0.5/ratis-thirdparty-misc-1.0.5.jar:/home/runner/.m2/repository/org/apache/ratis/ratis-proto/3.0.0/ratis-proto-3.0.0.jar:/home/runner/.m2/repository/org/apache/ratis/ratis-common/3.0.0/ratis-common-3.0.0.jar:/home/runner/.m2/repository/org/apache/ratis/ratis-client/3.0.0/ratis-client-3.0.0.jar:/home/runner/.m2/repository/org/apache/ratis/ratis-server-api/3.0.0/ratis-server-api-3.0.0.jar:/home/runner/.m2/repository/org/apache/ratis/ratis-metrics-api/3.0.0/ratis-metrics-api-3.0.0.jar:/home/runner/.m2/repository/org/apache/ratis/ratis-metrics-dropwizard3/3.0.0/ratis-metrics-dropwizard3-3.0.0.jar:/home/runner/.m2/repository/org/apache/ratis/ratis-netty/3.0.0/ratis-netty-3.0.0.jar:/home/runner/.m2/repository/org/apache/ratis/ratis-grpc/3.0.0/ratis-grpc-3.0.0.jar:/home/runner/.m2/repository/org/apache/commons/commons-pool2/2.6.0/commons-pool2-2.6.0.jar:/home/runner/.m2/repository/org/bouncycastle/bcpkix-jdk15on/1.67/bcpkix-jdk15on-1.67.jar:/home/runner/.m2/repository/commons-validator/commons-validator/1.6/commons-validator-1.6.jar:/home/runner/.m2/repository/commons-beanutils/commons-beanutils/1.9.4/commons-beanutils-1.9.4.jar:/home/runner/.m2/repository/commons-digester/commons-digester/1.8.1/commons-digester-1.8.1.jar:/home/runner/.m2/repository/commons-collections/commons-collections/3.2.2/commons-collections-3.2.2.jar:/home/runner/.m2/repository/io/jaegertracing/jaeger-client/1.6.0/jaeger-client-1.6.0.jar:/home/runner/.m2/repository/io/jaegertracing/jaeger-thrift/1.6.0/jaeger-thrift-1.6.0.jar:/home/runner/.m2/repository/org/apache/thrift/libthrift/0.14.1/libthrift-0.14.1.jar:/home/runner/.m2/repository/io/jaegertracing/jaeger-core/1.6.0/jaeger-core-1.6.0.jar:/home/runner/.m2/repository/io/jaegertracing/jaeger-tracerresolver/1.6.0/jaeger-tracerresolver-1.6.0.jar:/home/runner/.m2/repository/io/opentracing/contrib/opentracing-tracerresolver/0.1.8/opentracing-tracerresolver-0.1.8.jar:/home/runner/.m2/repository/org/jetbrains/kotlin/kotlin-stdlib/1.9.22/kotlin-stdlib-1.9.22.jar:/home/runner/.m2/repository/org/jetbrains/annotations/13.0/annotations-13.0.jar:/home/runner/.m2/repository/io/opentracing/opentracing-util/0.33.0/opentracing-util-0.33.0.jar:/home/runner/.m2/repository/io/opentracing/opentracing-api/0.33.0/opentracing-api-0.33.0.jar:/home/runner/.m2/repository/io/opentracing/opentracing-noop/0.33.0/opentracing-noop-0.33.0.jar:/home/runner/.m2/repository/org/yaml/snakeyaml/2.0/snakeyaml-2.0.jar:/home/runner/.m2/repository/org/reflections/reflections/0.9.11/reflections-0.9.11.jar:/home/runner/.m2/repository/org/javassist/javassist/3.21.0-GA/javassist-3.21.0-GA.jar:/home/runner/work/ozone/ozone/hadoop-hdds/interface-client/target/classes:/home/runner/.m2/repository/org/apache/hadoop/thirdparty/hadoop-shaded-protobuf_3_7/1.1.1/hadoop-shaded-protobuf_3_7-1.1.1.jar:/home/runner/work/ozone/ozone/hadoop-hdds/interface-admin/target/classes:/home/runner/.m2/repository/io/grpc/grpc-api/1.58.0/grpc-api-1.58.0.jar:/home/runner/work/ozone/ozone/hadoop-hdds/container-service/target/classes:/home/runner/.m2/repository/org/apache/commons/commons-compress/1.25.0/commons-compress-1.25.0.jar:/home/runner/.m2/repository/com/github/luben/zstd-jni/1.5.2-5/zstd-jni-1.5.2-5.jar:/home/runner/.m2/repository/commons-codec/commons-codec/1.15/commons-codec-1.15.jar:/home/runner/.m2/repository/jakarta/xml/bind/jakarta.xml.bind-api/2.3.3/jakarta.xml.bind-api-2.3.3.jar:/home/runner/.m2/repository/jakarta/activation/jakarta.activation-api/1.2.2/jakarta.activation-api-1.2.2.jar:/home/runner/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.9/jaxb-runtime-2.3.9.jar:/home/runner/.m2/repository/org/glassfish/jaxb/txw2/2.3.9/txw2-2.3.9.jar:/home/runner/.m2/repository/com/sun/istack/istack-commons-runtime/3.0.12/istack-commons-runtime-3.0.12.jar:/home/runner/.m2/repository/com/sun/activation/jakarta.activation/1.2.2/jakarta.activation-1.2.2.jar:/home/runner/.m2/repository/io/netty/netty-transport/4.1.100.Final/netty-transport-4.1.100.Final.jar:/home/runner/.m2/repository/io/netty/netty-common/4.1.100.Final/netty-common-4.1.100.Final.jar:/home/runner/.m2/repository/io/netty/netty-buffer/4.1.100.Final/netty-buffer-4.1.100.Final.jar:/home/runner/.m2/repository/io/netty/netty-resolver/4.1.100.Final/netty-resolver-4.1.100.Final.jar:/home/runner/.m2/repository/io/netty/netty-codec/4.1.100.Final/netty-codec-4.1.100.Final.jar:/home/runner/.m2/repository/io/netty/netty-handler/4.1.100.Final/netty-handler-4.1.100.Final.jar:/home/runner/.m2/repository/io/netty/netty-transport-native-unix-common/4.1.100.Final/netty-transport-native-unix-common-4.1.100.Final.jar:/home/runner/work/ozone/ozone/hadoop-hdds/client/target/classes:/home/runner/work/ozone/ozone/hadoop-hdds/erasurecode/target/classes:/home/runner/work/ozone/ozone/hadoop-hdds/hadoop-dependency-server/target/classes:/home/runner/.m2/repository/org/apache/hadoop/hadoop-annotations/3.3.6/hadoop-annotations-3.3.6.jar:/usr/lib/jvm/temurin-8-jdk-amd64/jre/../lib/tools.jar:/home/runner/.m2/repository/org/apache/hadoop/hadoop-common/3.3.6/hadoop-common-3.3.6.jar:/home/runner/.m2/repository/org/apache/hadoop/thirdparty/hadoop-shaded-guava/1.1.1/hadoop-shaded-guava-1.1.1.jar:/home/runner/.m2/repository/org/apache/httpcomponents/httpclient/4.5.13/httpclient-4.5.13.jar:/home/runner/.m2/repository/org/apache/httpcomponents/httpcore/4.4.16/httpcore-4.4.16.jar:/home/runner/.m2/repository/commons-net/commons-net/3.10.0/commons-net-3.10.0.jar:/home/runner/.m2/repository/javax/servlet/javax.servlet-api/3.1.0/javax.servlet-api-3.1.0.jar:/home/runner/.m2/repository/javax/servlet/jsp/jsp-api/2.1/jsp-api-2.1.jar:/home/runner/.m2/repository/com/sun/jersey/jersey-core/1.19.4/jersey-core-1.19.4.jar:/home/runner/.m2/repository/javax/ws/rs/jsr311-api/1.1.1/jsr311-api-1.1.1.jar:/home/runner/.m2/repository/com/sun/jersey/jersey-servlet/1.19.4/jersey-servlet-1.19.4.jar:/home/runner/.m2/repository/com/sun/jersey/jersey-server/1.19.4/jersey-server-1.19.4.jar:/home/runner/.m2/repository/com/google/re2j/re2j/1.1/re2j-1.1.jar:/home/runner/.m2/repository/com/google/code/gson/gson/2.9.0/gson-2.9.0.jar:/home/runner/.m2/repository/org/apache/hadoop/hadoop-auth/3.3.6/hadoop-auth-3.3.6.jar:/home/runner/.m2/repository/com/nimbusds/nimbus-jose-jwt/9.8.1/nimbus-jose-jwt-9.8.1.jar:/home/runner/.m2/repository/com/github/stephenc/jcip/jcip-annotations/1.0-1/jcip-annotations-1.0-1.jar:/home/runner/.m2/repository/com/jcraft/jsch/0.1.54/jsch-0.1.54.jar:/home/runner/.m2/repository/org/apache/kerby/kerb-core/1.0.1/kerb-core-1.0.1.jar:/home/runner/.m2/repository/org/apache/kerby/kerby-pkix/1.0.1/kerby-pkix-1.0.1.jar:/home/runner/.m2/repository/org/apache/kerby/kerby-asn1/1.0.1/kerby-asn1-1.0.1.jar:/home/runner/.m2/repository/org/apache/kerby/kerby-util/1.0.1/kerby-util-1.0.1.jar:/home/runner/.m2/repository/org/codehaus/woodstox/stax2-api/4.2.2/stax2-api-4.2.2.jar:/home/runner/.m2/repository/com/fasterxml/woodstox/woodstox-core/5.4.0/woodstox-core-5.4.0.jar:/home/runner/.m2/repository/dnsjava/dnsjava/2.1.7/dnsjava-2.1.7.jar:/home/runner/.m2/repository/org/xerial/snappy/snappy-java/1.1.8.2/snappy-java-1.1.8.2.jar:/home/runner/.m2/repository/commons-cli/commons-cli/1.6.0/commons-cli-1.6.0.jar:/home/runner/.m2/repository/org/apache/hadoop/hadoop-hdfs/3.3.6/hadoop-hdfs-3.3.6.jar:/home/runner/.m2/repository/org/eclipse/jetty/jetty-util-ajax/9.4.53.v20231009/jetty-util-ajax-9.4.53.v20231009.jar:/home/runner/.m2/repository/commons-daemon/commons-daemon/1.0.13/commons-daemon-1.0.13.jar:/home/runner/work/ozone/ozone/hadoop-hdds/framework/target/classes:/home/runner/work/ozone/ozone/hadoop-hdds/interface-server/target/classes:/home/runner/work/ozone/ozone/hadoop-hdds/managed-rocksdb/target/classes:/home/runner/.m2/repository/org/rocksdb/rocksdbjni/7.7.3/rocksdbjni-7.7.3.jar:/home/runner/.m2/repository/org/slf4j/slf4j-reload4j/1.7.36/slf4j-reload4j-1.7.36.jar:/home/runner/.m2/repository/org/apache/commons/commons-configuration2/2.1.1/commons-configuration2-2.1.1.jar:/home/runner/.m2/repository/commons-fileupload/commons-fileupload/1.5/commons-fileupload-1.5.jar:/home/runner/.m2/repository/org/apache/logging/log4j/log4j-core/2.17.1/log4j-core-2.17.1.jar:/home/runner/.m2/repository/com/lmax/disruptor/3.4.2/disruptor-3.4.2.jar:/home/runner/.m2/repository/org/eclipse/jetty/jetty-util/9.4.53.v20231009/jetty-util-9.4.53.v20231009.jar:/home/runner/.m2/repository/org/eclipse/jetty/jetty-server/9.4.53.v20231009/jetty-server-9.4.53.v20231009.jar:/home/runner/.m2/repository/org/eclipse/jetty/jetty-http/9.4.53.v20231009/jetty-http-9.4.53.v20231009.jar:/home/runner/.m2/repository/org/eclipse/jetty/jetty-io/9.4.53.v20231009/jetty-io-9.4.53.v20231009.jar:/home/runner/.m2/repository/org/eclipse/jetty/jetty-servlet/9.4.53.v20231009/jetty-servlet-9.4.53.v20231009.jar:/home/runner/.m2/repository/org/eclipse/jetty/jetty-security/9.4.53.v20231009/jetty-security-9.4.53.v20231009.jar:/home/runner/.m2/repository/org/eclipse/jetty/jetty-webapp/9.4.53.v20231009/jetty-webapp-9.4.53.v20231009.jar:/home/runner/.m2/repository/org/eclipse/jetty/jetty-xml/9.4.53.v20231009/jetty-xml-9.4.53.v20231009.jar:/home/runner/.m2/repository/io/prometheus/simpleclient_dropwizard/0.16.0/simpleclient_dropwizard-0.16.0.jar:/home/runner/.m2/repository/io/prometheus/simpleclient/0.16.0/simpleclient-0.16.0.jar:/home/runner/.m2/repository/io/prometheus/simpleclient_common/0.16.0/simpleclient_common-0.16.0.jar:/home/runner/work/ozone/ozone/hadoop-hdds/rocksdb-checkpoint-differ/target/classes:/home/runner/work/ozone/ozone/hadoop-hdds/rocks-native/target/classes:/home/runner/.m2/repository/org/jgrapht/jgrapht-core/1.0.1/jgrapht-core-1.0.1.jar:/home/runner/.m2/repository/org/jgrapht/jgrapht-ext/1.0.1/jgrapht-ext-1.0.1.jar:/home/runner/.m2/repository/org/tinyjee/jgraphx/jgraphx/2.0.0.1/jgraphx-2.0.0.1.jar:/home/runner/.m2/repository/jgraph/jgraph/5.13.0.0/jgraph-5.13.0.0.jar:/home/runner/.m2/repository/org/antlr/antlr4-runtime/4.5.3/antlr4-runtime-4.5.3.jar:/home/runner/.m2/repository/org/awaitility/awaitility/4.2.0/awaitility-4.2.0.jar:/home/runner/.m2/repository/org/hamcrest/hamcrest/2.1/hamcrest-2.1.jar:/home/runner/work/ozone/ozone/hadoop-hdds/docs/target/classes:/home/runner/.m2/repository/io/dropwizard/metrics/metrics-core/3.2.4/metrics-core-3.2.4.jar:/home/runner/.m2/repository/org/apache/commons/commons-math3/3.1.1/commons-math3-3.1.1.jar:/home/runner/.m2/repository/org/apache/commons/commons-text/1.10.0/commons-text-1.10.0.jar:/home/runner/.m2/repository/org/apache/hadoop/hadoop-hdfs-client/3.3.6/hadoop-hdfs-client-3.3.6.jar:/home/runner/.m2/repository/com/squareup/okhttp3/okhttp/4.12.0/okhttp-4.12.0.jar:/home/runner/.m2/repository/com/squareup/okio/okio/3.6.0/okio-3.6.0.jar:/home/runner/.m2/repository/com/squareup/okio/okio-jvm/3.6.0/okio-jvm-3.6.0.jar:/home/runner/.m2/repository/org/jetbrains/kotlin/kotlin-stdlib-jdk8/1.9.22/kotlin-stdlib-jdk8-1.9.22.jar:/home/runner/.m2/repository/org/jetbrains/kotlin/kotlin-stdlib-jdk7/1.9.22/kotlin-stdlib-jdk7-1.9.22.jar:/home/runner/.m2/repository/org/jetbrains/kotlin/kotlin-stdlib-common/1.9.22/kotlin-stdlib-common-1.9.22.jar:/home/runner/.m2/repository/com/fasterxml/jackson/core/jackson-databind/2.13.4.2/jackson-databind-2.13.4.2.jar:/home/runner/work/ozone/ozone/hadoop-hdds/container-service/target/test-classes:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/test-classes:/home/runner/.m2/repository/org/hamcrest/hamcrest-core/1.3/hamcrest-core-1.3.jar:/home/runner/.m2/repository/org/assertj/assertj-core/3.12.2/assertj-core-3.12.2.jar:/home/runner/.m2/repository/org/mockito/mockito-core/3.5.9/mockito-core-3.5.9.jar:/home/runner/.m2/repository/net/bytebuddy/byte-buddy/1.10.13/byte-buddy-1.10.13.jar:/home/runner/.m2/repository/net/bytebuddy/byte-buddy-agent/1.10.13/byte-buddy-agent-1.10.13.jar:/home/runner/.m2/repository/org/objenesis/objenesis/1.0/objenesis-1.0.jar:/home/runner/.m2/repository/org/hamcrest/hamcrest-all/1.3/hamcrest-all-1.3.jar:/home/runner/.m2/repository/org/bouncycastle/bcprov-jdk15on/1.67/bcprov-jdk15on-1.67.jar:/home/runner/work/ozone/ozone/hadoop-hdds/hadoop-dependency-test/target/classes:/home/runner/.m2/repository/org/apache/hadoop/hadoop-common/3.3.6/hadoop-common-3.3.6-tests.jar:/home/runner/.m2/repository/org/apache/hadoop/hadoop-hdfs/3.3.6/hadoop-hdfs-3.3.6-tests.jar:/home/runner/.m2/repository/com/google/protobuf/protobuf-java/2.5.0/protobuf-java-2.5.0.jar:/home/runner/.m2/repository/org/junit/jupiter/junit-jupiter-api/5.10.1/junit-jupiter-api-5.10.1.jar:/home/runner/.m2/repository/org/opentest4j/opentest4j/1.3.0/opentest4j-1.3.0.jar:/home/runner/.m2/repository/org/junit/platform/junit-platform-commons/1.10.1/junit-platform-commons-1.10.1.jar:/home/runner/.m2/repository/org/apiguardian/apiguardian-api/1.1.2/apiguardian-api-1.1.2.jar:/home/runner/.m2/repository/org/junit/jupiter/junit-jupiter-engine/5.10.1/junit-jupiter-engine-5.10.1.jar:/home/runner/.m2/repository/org/junit/platform/junit-platform-engine/1.10.1/junit-platform-engine-1.10.1.jar:/home/runner/.m2/repository/org/junit/vintage/junit-vintage-engine/5.10.1/junit-vintage-engine-5.10.1.jar:/home/runner/.m2/repository/org/junit/platform/junit-platform-launcher/1.10.1/junit-platform-launcher-1.10.1.jar:/home/runner/.m2/repository/org/junit/jupiter/junit-jupiter-params/5.10.1/junit-jupiter-params-5.10.1.jar:/home/runner/.m2/repository/junit/junit/4.13.1/junit-4.13.1.jar:/home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/gradle-enterprise/test-listeners.jar:"/>
    <property name="java.vm.vendor" value="Temurin"/>
    <property name="sun.arch.data.model" value="64"/>
    <property name="test.build.dir" value="/home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir"/>
    <property name="test.cache.data" value=""/>
    <property name="java.vendor.url" value="https://adoptium.net/"/>
    <property name="user.timezone" value="Etc/UTC"/>
    <property name="os.name" value="Linux"/>
    <property name="java.vm.specification.version" value="1.8"/>
    <property name="test.build.data" value="/home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir"/>
    <property name="sun.java.launcher" value="SUN_STANDARD"/>
    <property name="sun.boot.library.path" value="/usr/lib/jvm/temurin-8-jdk-amd64/jre/lib/amd64"/>
    <property name="sun.java.command" value="/home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/surefire/surefirebooter-20240102202601918_2901.jar /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/surefire 2024-01-02T20-09-07_308-jvmRun1 surefire-20240102202601918_2899tmp surefire_299-20240102202601918_2900tmp"/>
    <property name="native.lib.tmp.dir" value="/tmp"/>
    <property name="surefire.test.class.path" value="/home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-classes:/home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/classes:/home/runner/work/ozone/ozone/hadoop-hdds/test-utils/target/classes:/home/runner/.m2/repository/com/google/guava/guava/32.0.0-jre/guava-32.0.0-jre.jar:/home/runner/.m2/repository/com/google/guava/failureaccess/1.0.1/failureaccess-1.0.1.jar:/home/runner/.m2/repository/com/google/guava/listenablefuture/9999.0-empty-to-avoid-conflict-with-guava/listenablefuture-9999.0-empty-to-avoid-conflict-with-guava.jar:/home/runner/.m2/repository/com/google/code/findbugs/jsr305/3.0.0/jsr305-3.0.0.jar:/home/runner/.m2/repository/org/checkerframework/checker-qual/3.33.0/checker-qual-3.33.0.jar:/home/runner/.m2/repository/com/google/errorprone/error_prone_annotations/2.2.0/error_prone_annotations-2.2.0.jar:/home/runner/.m2/repository/com/google/j2objc/j2objc-annotations/2.8/j2objc-annotations-2.8.jar:/home/runner/.m2/repository/commons-io/commons-io/2.11.0/commons-io-2.11.0.jar:/home/runner/.m2/repository/commons-logging/commons-logging/1.2/commons-logging-1.2.jar:/home/runner/.m2/repository/ch/qos/reload4j/reload4j/1.2.25/reload4j-1.2.25.jar:/home/runner/.m2/repository/org/apache/commons/commons-lang3/3.14.0/commons-lang3-3.14.0.jar:/home/runner/.m2/repository/org/slf4j/slf4j-api/1.7.36/slf4j-api-1.7.36.jar:/home/runner/.m2/repository/org/apache/logging/log4j/log4j-api/2.17.1/log4j-api-2.17.1.jar:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/classes:/home/runner/work/ozone/ozone/hadoop-hdds/hadoop-dependency-client/target/classes:/home/runner/.m2/repository/info/picocli/picocli/4.7.5/picocli-4.7.5.jar:/home/runner/.m2/repository/com/fasterxml/jackson/core/jackson-annotations/2.13.4/jackson-annotations-2.13.4.jar:/home/runner/.m2/repository/com/fasterxml/jackson/datatype/jackson-datatype-jsr310/2.13.4/jackson-datatype-jsr310-2.13.4.jar:/home/runner/.m2/repository/com/fasterxml/jackson/core/jackson-core/2.13.4/jackson-core-2.13.4.jar:/home/runner/work/ozone/ozone/hadoop-hdds/annotations/target/classes:/home/runner/work/ozone/ozone/hadoop-hdds/config/target/classes:/home/runner/.m2/repository/javax/annotation/javax.annotation-api/1.3.2/javax.annotation-api-1.3.2.jar:/home/runner/.m2/repository/org/apache/ratis/ratis-server/3.0.0/ratis-server-3.0.0.jar:/home/runner/.m2/repository/org/apache/ratis/ratis-thirdparty-misc/1.0.5/ratis-thirdparty-misc-1.0.5.jar:/home/runner/.m2/repository/org/apache/ratis/ratis-proto/3.0.0/ratis-proto-3.0.0.jar:/home/runner/.m2/repository/org/apache/ratis/ratis-common/3.0.0/ratis-common-3.0.0.jar:/home/runner/.m2/repository/org/apache/ratis/ratis-client/3.0.0/ratis-client-3.0.0.jar:/home/runner/.m2/repository/org/apache/ratis/ratis-server-api/3.0.0/ratis-server-api-3.0.0.jar:/home/runner/.m2/repository/org/apache/ratis/ratis-metrics-api/3.0.0/ratis-metrics-api-3.0.0.jar:/home/runner/.m2/repository/org/apache/ratis/ratis-metrics-dropwizard3/3.0.0/ratis-metrics-dropwizard3-3.0.0.jar:/home/runner/.m2/repository/org/apache/ratis/ratis-netty/3.0.0/ratis-netty-3.0.0.jar:/home/runner/.m2/repository/org/apache/ratis/ratis-grpc/3.0.0/ratis-grpc-3.0.0.jar:/home/runner/.m2/repository/org/apache/commons/commons-pool2/2.6.0/commons-pool2-2.6.0.jar:/home/runner/.m2/repository/org/bouncycastle/bcpkix-jdk15on/1.67/bcpkix-jdk15on-1.67.jar:/home/runner/.m2/repository/commons-validator/commons-validator/1.6/commons-validator-1.6.jar:/home/runner/.m2/repository/commons-beanutils/commons-beanutils/1.9.4/commons-beanutils-1.9.4.jar:/home/runner/.m2/repository/commons-digester/commons-digester/1.8.1/commons-digester-1.8.1.jar:/home/runner/.m2/repository/commons-collections/commons-collections/3.2.2/commons-collections-3.2.2.jar:/home/runner/.m2/repository/io/jaegertracing/jaeger-client/1.6.0/jaeger-client-1.6.0.jar:/home/runner/.m2/repository/io/jaegertracing/jaeger-thrift/1.6.0/jaeger-thrift-1.6.0.jar:/home/runner/.m2/repository/org/apache/thrift/libthrift/0.14.1/libthrift-0.14.1.jar:/home/runner/.m2/repository/io/jaegertracing/jaeger-core/1.6.0/jaeger-core-1.6.0.jar:/home/runner/.m2/repository/io/jaegertracing/jaeger-tracerresolver/1.6.0/jaeger-tracerresolver-1.6.0.jar:/home/runner/.m2/repository/io/opentracing/contrib/opentracing-tracerresolver/0.1.8/opentracing-tracerresolver-0.1.8.jar:/home/runner/.m2/repository/org/jetbrains/kotlin/kotlin-stdlib/1.9.22/kotlin-stdlib-1.9.22.jar:/home/runner/.m2/repository/org/jetbrains/annotations/13.0/annotations-13.0.jar:/home/runner/.m2/repository/io/opentracing/opentracing-util/0.33.0/opentracing-util-0.33.0.jar:/home/runner/.m2/repository/io/opentracing/opentracing-api/0.33.0/opentracing-api-0.33.0.jar:/home/runner/.m2/repository/io/opentracing/opentracing-noop/0.33.0/opentracing-noop-0.33.0.jar:/home/runner/.m2/repository/org/yaml/snakeyaml/2.0/snakeyaml-2.0.jar:/home/runner/.m2/repository/org/reflections/reflections/0.9.11/reflections-0.9.11.jar:/home/runner/.m2/repository/org/javassist/javassist/3.21.0-GA/javassist-3.21.0-GA.jar:/home/runner/work/ozone/ozone/hadoop-hdds/interface-client/target/classes:/home/runner/.m2/repository/org/apache/hadoop/thirdparty/hadoop-shaded-protobuf_3_7/1.1.1/hadoop-shaded-protobuf_3_7-1.1.1.jar:/home/runner/work/ozone/ozone/hadoop-hdds/interface-admin/target/classes:/home/runner/.m2/repository/io/grpc/grpc-api/1.58.0/grpc-api-1.58.0.jar:/home/runner/work/ozone/ozone/hadoop-hdds/container-service/target/classes:/home/runner/.m2/repository/org/apache/commons/commons-compress/1.25.0/commons-compress-1.25.0.jar:/home/runner/.m2/repository/com/github/luben/zstd-jni/1.5.2-5/zstd-jni-1.5.2-5.jar:/home/runner/.m2/repository/commons-codec/commons-codec/1.15/commons-codec-1.15.jar:/home/runner/.m2/repository/jakarta/xml/bind/jakarta.xml.bind-api/2.3.3/jakarta.xml.bind-api-2.3.3.jar:/home/runner/.m2/repository/jakarta/activation/jakarta.activation-api/1.2.2/jakarta.activation-api-1.2.2.jar:/home/runner/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.9/jaxb-runtime-2.3.9.jar:/home/runner/.m2/repository/org/glassfish/jaxb/txw2/2.3.9/txw2-2.3.9.jar:/home/runner/.m2/repository/com/sun/istack/istack-commons-runtime/3.0.12/istack-commons-runtime-3.0.12.jar:/home/runner/.m2/repository/com/sun/activation/jakarta.activation/1.2.2/jakarta.activation-1.2.2.jar:/home/runner/.m2/repository/io/netty/netty-transport/4.1.100.Final/netty-transport-4.1.100.Final.jar:/home/runner/.m2/repository/io/netty/netty-common/4.1.100.Final/netty-common-4.1.100.Final.jar:/home/runner/.m2/repository/io/netty/netty-buffer/4.1.100.Final/netty-buffer-4.1.100.Final.jar:/home/runner/.m2/repository/io/netty/netty-resolver/4.1.100.Final/netty-resolver-4.1.100.Final.jar:/home/runner/.m2/repository/io/netty/netty-codec/4.1.100.Final/netty-codec-4.1.100.Final.jar:/home/runner/.m2/repository/io/netty/netty-handler/4.1.100.Final/netty-handler-4.1.100.Final.jar:/home/runner/.m2/repository/io/netty/netty-transport-native-unix-common/4.1.100.Final/netty-transport-native-unix-common-4.1.100.Final.jar:/home/runner/work/ozone/ozone/hadoop-hdds/client/target/classes:/home/runner/work/ozone/ozone/hadoop-hdds/erasurecode/target/classes:/home/runner/work/ozone/ozone/hadoop-hdds/hadoop-dependency-server/target/classes:/home/runner/.m2/repository/org/apache/hadoop/hadoop-annotations/3.3.6/hadoop-annotations-3.3.6.jar:/usr/lib/jvm/temurin-8-jdk-amd64/jre/../lib/tools.jar:/home/runner/.m2/repository/org/apache/hadoop/hadoop-common/3.3.6/hadoop-common-3.3.6.jar:/home/runner/.m2/repository/org/apache/hadoop/thirdparty/hadoop-shaded-guava/1.1.1/hadoop-shaded-guava-1.1.1.jar:/home/runner/.m2/repository/org/apache/httpcomponents/httpclient/4.5.13/httpclient-4.5.13.jar:/home/runner/.m2/repository/org/apache/httpcomponents/httpcore/4.4.16/httpcore-4.4.16.jar:/home/runner/.m2/repository/commons-net/commons-net/3.10.0/commons-net-3.10.0.jar:/home/runner/.m2/repository/javax/servlet/javax.servlet-api/3.1.0/javax.servlet-api-3.1.0.jar:/home/runner/.m2/repository/javax/servlet/jsp/jsp-api/2.1/jsp-api-2.1.jar:/home/runner/.m2/repository/com/sun/jersey/jersey-core/1.19.4/jersey-core-1.19.4.jar:/home/runner/.m2/repository/javax/ws/rs/jsr311-api/1.1.1/jsr311-api-1.1.1.jar:/home/runner/.m2/repository/com/sun/jersey/jersey-servlet/1.19.4/jersey-servlet-1.19.4.jar:/home/runner/.m2/repository/com/sun/jersey/jersey-server/1.19.4/jersey-server-1.19.4.jar:/home/runner/.m2/repository/com/google/re2j/re2j/1.1/re2j-1.1.jar:/home/runner/.m2/repository/com/google/code/gson/gson/2.9.0/gson-2.9.0.jar:/home/runner/.m2/repository/org/apache/hadoop/hadoop-auth/3.3.6/hadoop-auth-3.3.6.jar:/home/runner/.m2/repository/com/nimbusds/nimbus-jose-jwt/9.8.1/nimbus-jose-jwt-9.8.1.jar:/home/runner/.m2/repository/com/github/stephenc/jcip/jcip-annotations/1.0-1/jcip-annotations-1.0-1.jar:/home/runner/.m2/repository/com/jcraft/jsch/0.1.54/jsch-0.1.54.jar:/home/runner/.m2/repository/org/apache/kerby/kerb-core/1.0.1/kerb-core-1.0.1.jar:/home/runner/.m2/repository/org/apache/kerby/kerby-pkix/1.0.1/kerby-pkix-1.0.1.jar:/home/runner/.m2/repository/org/apache/kerby/kerby-asn1/1.0.1/kerby-asn1-1.0.1.jar:/home/runner/.m2/repository/org/apache/kerby/kerby-util/1.0.1/kerby-util-1.0.1.jar:/home/runner/.m2/repository/org/codehaus/woodstox/stax2-api/4.2.2/stax2-api-4.2.2.jar:/home/runner/.m2/repository/com/fasterxml/woodstox/woodstox-core/5.4.0/woodstox-core-5.4.0.jar:/home/runner/.m2/repository/dnsjava/dnsjava/2.1.7/dnsjava-2.1.7.jar:/home/runner/.m2/repository/org/xerial/snappy/snappy-java/1.1.8.2/snappy-java-1.1.8.2.jar:/home/runner/.m2/repository/commons-cli/commons-cli/1.6.0/commons-cli-1.6.0.jar:/home/runner/.m2/repository/org/apache/hadoop/hadoop-hdfs/3.3.6/hadoop-hdfs-3.3.6.jar:/home/runner/.m2/repository/org/eclipse/jetty/jetty-util-ajax/9.4.53.v20231009/jetty-util-ajax-9.4.53.v20231009.jar:/home/runner/.m2/repository/commons-daemon/commons-daemon/1.0.13/commons-daemon-1.0.13.jar:/home/runner/work/ozone/ozone/hadoop-hdds/framework/target/classes:/home/runner/work/ozone/ozone/hadoop-hdds/interface-server/target/classes:/home/runner/work/ozone/ozone/hadoop-hdds/managed-rocksdb/target/classes:/home/runner/.m2/repository/org/rocksdb/rocksdbjni/7.7.3/rocksdbjni-7.7.3.jar:/home/runner/.m2/repository/org/slf4j/slf4j-reload4j/1.7.36/slf4j-reload4j-1.7.36.jar:/home/runner/.m2/repository/org/apache/commons/commons-configuration2/2.1.1/commons-configuration2-2.1.1.jar:/home/runner/.m2/repository/commons-fileupload/commons-fileupload/1.5/commons-fileupload-1.5.jar:/home/runner/.m2/repository/org/apache/logging/log4j/log4j-core/2.17.1/log4j-core-2.17.1.jar:/home/runner/.m2/repository/com/lmax/disruptor/3.4.2/disruptor-3.4.2.jar:/home/runner/.m2/repository/org/eclipse/jetty/jetty-util/9.4.53.v20231009/jetty-util-9.4.53.v20231009.jar:/home/runner/.m2/repository/org/eclipse/jetty/jetty-server/9.4.53.v20231009/jetty-server-9.4.53.v20231009.jar:/home/runner/.m2/repository/org/eclipse/jetty/jetty-http/9.4.53.v20231009/jetty-http-9.4.53.v20231009.jar:/home/runner/.m2/repository/org/eclipse/jetty/jetty-io/9.4.53.v20231009/jetty-io-9.4.53.v20231009.jar:/home/runner/.m2/repository/org/eclipse/jetty/jetty-servlet/9.4.53.v20231009/jetty-servlet-9.4.53.v20231009.jar:/home/runner/.m2/repository/org/eclipse/jetty/jetty-security/9.4.53.v20231009/jetty-security-9.4.53.v20231009.jar:/home/runner/.m2/repository/org/eclipse/jetty/jetty-webapp/9.4.53.v20231009/jetty-webapp-9.4.53.v20231009.jar:/home/runner/.m2/repository/org/eclipse/jetty/jetty-xml/9.4.53.v20231009/jetty-xml-9.4.53.v20231009.jar:/home/runner/.m2/repository/io/prometheus/simpleclient_dropwizard/0.16.0/simpleclient_dropwizard-0.16.0.jar:/home/runner/.m2/repository/io/prometheus/simpleclient/0.16.0/simpleclient-0.16.0.jar:/home/runner/.m2/repository/io/prometheus/simpleclient_common/0.16.0/simpleclient_common-0.16.0.jar:/home/runner/work/ozone/ozone/hadoop-hdds/rocksdb-checkpoint-differ/target/classes:/home/runner/work/ozone/ozone/hadoop-hdds/rocks-native/target/classes:/home/runner/.m2/repository/org/jgrapht/jgrapht-core/1.0.1/jgrapht-core-1.0.1.jar:/home/runner/.m2/repository/org/jgrapht/jgrapht-ext/1.0.1/jgrapht-ext-1.0.1.jar:/home/runner/.m2/repository/org/tinyjee/jgraphx/jgraphx/2.0.0.1/jgraphx-2.0.0.1.jar:/home/runner/.m2/repository/jgraph/jgraph/5.13.0.0/jgraph-5.13.0.0.jar:/home/runner/.m2/repository/org/antlr/antlr4-runtime/4.5.3/antlr4-runtime-4.5.3.jar:/home/runner/.m2/repository/org/awaitility/awaitility/4.2.0/awaitility-4.2.0.jar:/home/runner/.m2/repository/org/hamcrest/hamcrest/2.1/hamcrest-2.1.jar:/home/runner/work/ozone/ozone/hadoop-hdds/docs/target/classes:/home/runner/.m2/repository/io/dropwizard/metrics/metrics-core/3.2.4/metrics-core-3.2.4.jar:/home/runner/.m2/repository/org/apache/commons/commons-math3/3.1.1/commons-math3-3.1.1.jar:/home/runner/.m2/repository/org/apache/commons/commons-text/1.10.0/commons-text-1.10.0.jar:/home/runner/.m2/repository/org/apache/hadoop/hadoop-hdfs-client/3.3.6/hadoop-hdfs-client-3.3.6.jar:/home/runner/.m2/repository/com/squareup/okhttp3/okhttp/4.12.0/okhttp-4.12.0.jar:/home/runner/.m2/repository/com/squareup/okio/okio/3.6.0/okio-3.6.0.jar:/home/runner/.m2/repository/com/squareup/okio/okio-jvm/3.6.0/okio-jvm-3.6.0.jar:/home/runner/.m2/repository/org/jetbrains/kotlin/kotlin-stdlib-jdk8/1.9.22/kotlin-stdlib-jdk8-1.9.22.jar:/home/runner/.m2/repository/org/jetbrains/kotlin/kotlin-stdlib-jdk7/1.9.22/kotlin-stdlib-jdk7-1.9.22.jar:/home/runner/.m2/repository/org/jetbrains/kotlin/kotlin-stdlib-common/1.9.22/kotlin-stdlib-common-1.9.22.jar:/home/runner/.m2/repository/com/fasterxml/jackson/core/jackson-databind/2.13.4.2/jackson-databind-2.13.4.2.jar:/home/runner/work/ozone/ozone/hadoop-hdds/container-service/target/test-classes:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/test-classes:/home/runner/.m2/repository/org/hamcrest/hamcrest-core/1.3/hamcrest-core-1.3.jar:/home/runner/.m2/repository/org/assertj/assertj-core/3.12.2/assertj-core-3.12.2.jar:/home/runner/.m2/repository/org/mockito/mockito-core/3.5.9/mockito-core-3.5.9.jar:/home/runner/.m2/repository/net/bytebuddy/byte-buddy/1.10.13/byte-buddy-1.10.13.jar:/home/runner/.m2/repository/net/bytebuddy/byte-buddy-agent/1.10.13/byte-buddy-agent-1.10.13.jar:/home/runner/.m2/repository/org/objenesis/objenesis/1.0/objenesis-1.0.jar:/home/runner/.m2/repository/org/hamcrest/hamcrest-all/1.3/hamcrest-all-1.3.jar:/home/runner/.m2/repository/org/bouncycastle/bcprov-jdk15on/1.67/bcprov-jdk15on-1.67.jar:/home/runner/work/ozone/ozone/hadoop-hdds/hadoop-dependency-test/target/classes:/home/runner/.m2/repository/org/apache/hadoop/hadoop-common/3.3.6/hadoop-common-3.3.6-tests.jar:/home/runner/.m2/repository/org/apache/hadoop/hadoop-hdfs/3.3.6/hadoop-hdfs-3.3.6-tests.jar:/home/runner/.m2/repository/com/google/protobuf/protobuf-java/2.5.0/protobuf-java-2.5.0.jar:/home/runner/.m2/repository/org/junit/jupiter/junit-jupiter-api/5.10.1/junit-jupiter-api-5.10.1.jar:/home/runner/.m2/repository/org/opentest4j/opentest4j/1.3.0/opentest4j-1.3.0.jar:/home/runner/.m2/repository/org/junit/platform/junit-platform-commons/1.10.1/junit-platform-commons-1.10.1.jar:/home/runner/.m2/repository/org/apiguardian/apiguardian-api/1.1.2/apiguardian-api-1.1.2.jar:/home/runner/.m2/repository/org/junit/jupiter/junit-jupiter-engine/5.10.1/junit-jupiter-engine-5.10.1.jar:/home/runner/.m2/repository/org/junit/platform/junit-platform-engine/1.10.1/junit-platform-engine-1.10.1.jar:/home/runner/.m2/repository/org/junit/vintage/junit-vintage-engine/5.10.1/junit-vintage-engine-5.10.1.jar:/home/runner/.m2/repository/org/junit/platform/junit-platform-launcher/1.10.1/junit-platform-launcher-1.10.1.jar:/home/runner/.m2/repository/org/junit/jupiter/junit-jupiter-params/5.10.1/junit-jupiter-params-5.10.1.jar:/home/runner/.m2/repository/junit/junit/4.13.1/junit-4.13.1.jar:/home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/gradle-enterprise/test-listeners.jar:"/>
    <property name="sun.cpu.endian" value="little"/>
    <property name="user.home" value="/home/runner"/>
    <property name="user.language" value="en"/>
    <property name="java.specification.vendor" value="Oracle Corporation"/>
    <property name="java.home" value="/usr/lib/jvm/temurin-8-jdk-amd64/jre"/>
    <property name="java.security.krb5.conf" value="/home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-classes/krb5.conf"/>
    <property name="file.separator" value="/"/>
    <property name="basedir" value="/home/runner/work/ozone/ozone/hadoop-hdds/server-scm"/>
    <property name="line.separator" value="&#10;"/>
    <property name="java.vm.specification.vendor" value="Oracle Corporation"/>
    <property name="java.specification.name" value="Java Platform API Specification"/>
    <property name="skip.installnpx" value="true"/>
    <property name="java.awt.graphicsenv" value="sun.awt.X11GraphicsEnvironment"/>
    <property name="surefire.real.class.path" value="/home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/surefire/surefirebooter-20240102202601918_2901.jar:/home/runner/.m2/repository/org/jacoco/org.jacoco.agent/0.8.5/org.jacoco.agent-0.8.5-runtime.jar"/>
    <property name="sun.boot.class.path" value="/usr/lib/jvm/temurin-8-jdk-amd64/jre/lib/resources.jar:/usr/lib/jvm/temurin-8-jdk-amd64/jre/lib/rt.jar:/usr/lib/jvm/temurin-8-jdk-amd64/jre/lib/sunrsasign.jar:/usr/lib/jvm/temurin-8-jdk-amd64/jre/lib/jsse.jar:/usr/lib/jvm/temurin-8-jdk-amd64/jre/lib/jce.jar:/usr/lib/jvm/temurin-8-jdk-amd64/jre/lib/charsets.jar:/usr/lib/jvm/temurin-8-jdk-amd64/jre/lib/jfr.jar:/usr/lib/jvm/temurin-8-jdk-amd64/jre/classes"/>
    <property name="hadoop.log.dir" value="/home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/log"/>
    <property name="sun.management.compiler" value="HotSpot 64-Bit Tiered Compilers"/>
    <property name="java.runtime.version" value="1.8.0_392-b08"/>
    <property name="skip.npx" value="true"/>
    <property name="user.name" value="runner"/>
    <property name="java.net.preferIPv4Stack" value="true"/>
    <property name="path.separator" value=":"/>
    <property name="java.security.egd" value="file:///dev/urandom"/>
    <property name="os.version" value="5.15.0-1053-azure"/>
    <property name="java.endorsed.dirs" value="/usr/lib/jvm/temurin-8-jdk-amd64/jre/lib/endorsed"/>
    <property name="java.runtime.name" value="OpenJDK Runtime Environment"/>
    <property name="com.gradle.maven.scan.extension.test.listener.junitplatform.NestedExecutionSafeDelegatingTestExecutionListener" value="48f278eb"/>
    <property name="file.encoding" value="UTF-8"/>
    <property name="java.vm.name" value="OpenJDK 64-Bit Server VM"/>
    <property name="test.build.webapps" value=""/>
    <property name="localRepository" value="/home/runner/.m2/repository"/>
    <property name="gradle.enterprise.listener.port" value="42003"/>
    <property name="java.vendor.url.bug" value="https://github.com/adoptium/adoptium-support/issues"/>
    <property name="require.test.libhadoop" value=""/>
    <property name="java.io.tmpdir" value="/tmp"/>
    <property name="java.version" value="1.8.0_392"/>
    <property name="user.dir" value="/home/runner/work/ozone/ozone/hadoop-hdds/server-scm"/>
    <property name="os.arch" value="amd64"/>
    <property name="test.build.classes" value="/home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-classes"/>
    <property name="java.vm.specification.name" value="Java Virtual Machine Specification"/>
    <property name="java.awt.printerjob" value="sun.print.PSPrinterJob"/>
    <property name="sun.os.patch.level" value="unknown"/>
    <property name="excludedGroups" value="native | unhealthy | org.apache.ozone.test.UnhealthyTest"/>
    <property name="hadoop.tmp.dir" value="/home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/tmp"/>
    <property name="java.library.path" value="/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib"/>
    <property name="java.vendor" value="Temurin"/>
    <property name="java.vm.info" value="mixed mode"/>
    <property name="java.vm.version" value="25.392-b08"/>
    <property name="java.specification.maintenance.version" value="5"/>
    <property name="sun.io.unicode.encoding" value="UnicodeLittle"/>
    <property name="java.ext.dirs" value="/usr/lib/jvm/temurin-8-jdk-amd64/jre/lib/ext:/usr/java/packages/lib/ext"/>
    <property name="java.class.version" value="52.0"/>
  </properties>
  <testcase name="testMultipleBlockAllocationWithClosedContainer" classname="org.apache.hadoop.hdds.scm.block.TestBlockManager" time="2.54">
    <system-out><![CDATA[2024-01-02 20:32:12,534 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchemaFromFile(129)) - Loading schema from [file:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/classes/network-topology-default.xml]
2024-01-02 20:32:12,537 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchema(176)) - Loading network topology layer schema file
2024-01-02 20:32:12,587 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchemaFromFile(129)) - Loading schema from [file:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/classes/network-topology-default.xml]
2024-01-02 20:32:12,587 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchema(176)) - Loading network topology layer schema file
2024-01-02 20:32:12,816 [main] INFO  reflections.Reflections (Reflections.java:scan(232)) - Reflections took 153 ms to scan 6 urls, producing 167 keys and 373 values 
2024-01-02 20:32:12,879 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/e8d7fc2d-310e-4315-a0d8-a85fb20d44fe
2024-01-02 20:32:12,880 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/8e41763a-1839-469d-9e8c-d4095722560e
2024-01-02 20:32:12,880 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/5d909982-d9bb-4fff-899e-5202ae67d1b0
2024-01-02 20:32:12,881 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/ccd02a59-4b52-45e5-a762-90847fd38c92
2024-01-02 20:32:12,881 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/b438b5ba-db7a-43b4-91b7-15008fd9d3f8
2024-01-02 20:32:12,882 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/bbb8bc60-6c65-4089-9409-2b02c60a47d2
2024-01-02 20:32:12,882 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/f26110df-398b-4b3f-ad5b-af1c55b6a519
2024-01-02 20:32:12,883 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/9c1886ac-4be2-4896-abe1-19a50370d262
2024-01-02 20:32:12,883 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/78e08be2-b8ea-41f8-9e40-7f2aeaed3c8d
2024-01-02 20:32:12,883 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/7e522cad-18ea-4f7e-8f84-cb6e2c6731f9
2024-01-02 20:32:12,992 [main] WARN  utils.HAUtils (HAUtils.java:getMetaDir(339)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:13,133 [main] WARN  db.DBStoreBuilder (DBStoreBuilder.java:applyDBDefinition(167)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:13,260 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:<init>(241)) - Init the HA SequenceIdGenerator.
2024-01-02 20:32:13,272 [main] INFO  pipeline.PipelineStateManagerImpl (PipelineStateManagerImpl.java:initialize(78)) - No pipeline exists in current db
2024-01-02 20:32:13,290 [main] INFO  algorithms.LeaderChoosePolicyFactory (LeaderChoosePolicyFactory.java:getPolicy(57)) - Create leader choose policy of type org.apache.hadoop.hdds.scm.pipeline.leader.choose.algorithms.MinLeaderCountChoosePolicy
2024-01-02 20:32:13,295 [main] INFO  algorithms.ContainerPlacementPolicyFactory (ContainerPlacementPolicyFactory.java:getPolicyInternal(86)) - Create container placement policy of type org.apache.hadoop.hdds.scm.container.placement.algorithms.SCMContainerPlacementRackScatter
2024-01-02 20:32:13,344 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service BackgroundPipelineCreator.
2024-01-02 20:32:13,345 [main] INFO  pipeline.BackgroundPipelineCreator (BackgroundPipelineCreator.java:start(127)) - Starting RatisPipelineUtilsThread.
2024-01-02 20:32:13,348 [main] INFO  BackgroundPipelineScrubber (BackgroundSCMService.java:start(68)) - Starting BackgroundPipelineScrubber Service.
2024-01-02 20:32:13,349 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service BackgroundPipelineScrubber.
2024-01-02 20:32:13,350 [main] INFO  algorithms.LeaderChoosePolicyFactory (LeaderChoosePolicyFactory.java:getPolicy(57)) - Create leader choose policy of type org.apache.hadoop.hdds.scm.pipeline.leader.choose.algorithms.MinLeaderCountChoosePolicy
2024-01-02 20:32:13,417 [main] INFO  safemode.ContainerSafeModeRule (ContainerSafeModeRule.java:<init>(91)) - containers with one replica threshold count 0
2024-01-02 20:32:13,421 [main] INFO  safemode.HealthyPipelineSafeModeRule (HealthyPipelineSafeModeRule.java:initializeRule(176)) - Total pipeline count is 0, healthy pipeline threshold count is 0
2024-01-02 20:32:13,423 [main] INFO  safemode.OneReplicaPipelineSafeModeRule (OneReplicaPipelineSafeModeRule.java:initializeRule(193)) - Total pipeline count is 0, pipeline's with at least one datanode reported threshold count is 0
2024-01-02 20:32:13,434 [main] WARN  server.ServerUtils (ServerUtils.java:getScmDbDir(155)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:13,466 [main] WARN  server.ServerUtils (ServerUtils.java:getScmDbDir(155)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:13,468 [main] INFO  ha.SCMHANodeDetails (SCMHANodeDetails.java:loadSCMHAConfig(207)) - ServiceID for StorageContainerManager is null
2024-01-02 20:32:13,469 [main] INFO  ha.SCMHANodeDetails (SCMHANodeDetails.java:loadSCMHAConfig(212)) - ozone.scm.default.service.id is not defined, falling back to ozone.scm.service.ids to find serviceID for StorageContainerManager if it is HA enabled cluster
2024-01-02 20:32:13,813 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchemaFromFile(129)) - Loading schema from [file:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/classes/network-topology-default.xml]
2024-01-02 20:32:13,814 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchema(176)) - Loading network topology layer schema file
2024-01-02 20:32:13,823 [main] INFO  metrics.MetricRegistries (MetricRegistriesLoader.java:load(64)) - Loaded MetricRegistries class org.apache.ratis.metrics.dropwizard3.Dm3MetricRegistriesImpl
2024-01-02 20:32:13,824 [main] INFO  upgrade.AbstractLayoutVersionManager (AbstractLayoutVersionManager.java:init(83)) - Initializing Layout version manager with metadata layout = HADOOP_PRC_PORTS_IN_DATANODEDETAILS (version = 7), software layout = HADOOP_PRC_PORTS_IN_DATANODEDETAILS (version = 7)
2024-01-02 20:32:13,928 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToSequenceId(370)) - upgrade localId to 113750153625600000
2024-01-02 20:32:13,929 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToSequenceId(380)) - upgrade delTxnId to 0
2024-01-02 20:32:13,930 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToSequenceId(397)) - upgrade containerId to 0
2024-01-02 20:32:13,932 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToCertificateSequenceId(444)) - upgrade CertificateId to 2
2024-01-02 20:32:13,932 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:<init>(241)) - Init the HA SequenceIdGenerator.
2024-01-02 20:32:13,937 [main] INFO  algorithms.ContainerPlacementPolicyFactory (ContainerPlacementPolicyFactory.java:getPolicyInternal(86)) - Create container placement policy of type org.apache.hadoop.hdds.scm.container.placement.algorithms.SCMContainerPlacementRackAware
2024-01-02 20:32:13,937 [main] INFO  algorithms.ContainerPlacementPolicyFactory (ContainerPlacementPolicyFactory.java:getPolicyInternal(86)) - Create container placement policy of type org.apache.hadoop.hdds.scm.container.placement.algorithms.SCMContainerPlacementRackScatter
2024-01-02 20:32:13,939 [main] INFO  ExpiredContainerReplicaOpScrubber (BackgroundSCMService.java:start(68)) - Starting ExpiredContainerReplicaOpScrubber Service.
2024-01-02 20:32:13,941 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service ExpiredContainerReplicaOpScrubber.
2024-01-02 20:32:13,948 [main] INFO  algorithms.PipelineChoosePolicyFactory (PipelineChoosePolicyFactory.java:createPipelineChoosePolicyFromClass(78)) - Create pipeline choose policy of type org.apache.hadoop.hdds.scm.pipeline.choose.algorithms.RandomPipelineChoosePolicy
2024-01-02 20:32:13,949 [main] INFO  algorithms.PipelineChoosePolicyFactory (PipelineChoosePolicyFactory.java:createPipelineChoosePolicyFromClass(78)) - Create pipeline choose policy of type org.apache.hadoop.hdds.scm.pipeline.choose.algorithms.RandomPipelineChoosePolicy
2024-01-02 20:32:13,970 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service SCMBlockDeletingService.
2024-01-02 20:32:14,034 [main] INFO  replication.ReplicationManager (ReplicationManager.java:start(294)) - Starting Replication Monitor Thread.
2024-01-02 20:32:14,036 [ReplicationMonitor] INFO  replication.ReplicationManager (ReplicationManager.java:processAll(369)) - Replication Manager is not ready to run until 300000ms after safemode exit
2024-01-02 20:32:14,036 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service ReplicationManager.
2024-01-02 20:32:14,054 [main] WARN  util.NativeCodeLoader (NativeCodeLoader.java:<clinit>(60)) - Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
2024-01-02 20:32:14,062 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:<init>(440)) - SCM start with adminUsers: [runner]
2024-01-02 20:32:14,341 [main] INFO  audit.AuditLogger (AuditLogger.java:refreshDebugCmdSet(130)) - Refresh DebugCmdSet for SCMAudit to [].
2024-01-02 20:32:14,368 [main] INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(90)) - Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
2024-01-02 20:32:14,390 [main] INFO  ipc.Server (Server.java:<init>(1287)) - Listener at 0.0.0.0:34505
2024-01-02 20:32:14,392 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:run(1323)) - Starting Socket Reader #1 for port 0
2024-01-02 20:32:14,421 [main] INFO  audit.AuditLogger (AuditLogger.java:refreshDebugCmdSet(130)) - Refresh DebugCmdSet for SCMAudit to [].
2024-01-02 20:32:14,428 [main] INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(90)) - Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
2024-01-02 20:32:14,428 [main] INFO  ipc.Server (Server.java:<init>(1287)) - Listener at 0.0.0.0:44843
2024-01-02 20:32:14,429 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:run(1323)) - Starting Socket Reader #1 for port 0
2024-01-02 20:32:14,447 [main] INFO  audit.AuditLogger (AuditLogger.java:refreshDebugCmdSet(130)) - Refresh DebugCmdSet for SCMAudit to [].
2024-01-02 20:32:14,455 [main] INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(90)) - Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
2024-01-02 20:32:14,455 [main] INFO  ipc.Server (Server.java:<init>(1287)) - Listener at 0.0.0.0:33219
2024-01-02 20:32:14,456 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:run(1323)) - Starting Socket Reader #1 for port 0
2024-01-02 20:32:14,497 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service ContainerBalancer.
2024-01-02 20:32:14,499 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:<init>(453)) - 
Container Balancer status:
Key                            Value
Running                        false
Container Balancer Configuration values:
Key                                                Value
Threshold                                          10
Max Datanodes to Involve per Iteration(percent)    20
Max Size to Move per Iteration                     500GB
Max Size Entering Target per Iteration             26GB
Max Size Leaving Source per Iteration              26GB
Number of Iterations                               10
Time Limit for Single Container's Movement         65min
Time Limit for Single Container's Replication      50min
Interval between each Iteration                    70min
Whether to Enable Network Topology                 false
Whether to Trigger Refresh Datanode Usage Info     false
Container IDs to Exclude from Balancing            None
Datanodes Specified to be Balanced                 None
Datanodes Excluded from Balancing                  None

2024-01-02 20:32:14,505 [main] INFO  ha.SCMContext (SCMContext.java:updateSafeModeStatus(230)) - Update SafeModeStatus from SafeModeStatus{safeModeStatus=false, preCheckPassed=true} to SafeModeStatus{safeModeStatus=false, preCheckPassed=true}.
2024-01-02 20:32:14,535 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=434f68b5-af20-4bbe-b349-06761063921c to datanode:b438b5ba-db7a-43b4-91b7-15008fd9d3f8
2024-01-02 20:32:14,536 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=434f68b5-af20-4bbe-b349-06761063921c to datanode:ccd02a59-4b52-45e5-a762-90847fd38c92
2024-01-02 20:32:14,537 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=434f68b5-af20-4bbe-b349-06761063921c to datanode:bbb8bc60-6c65-4089-9409-2b02c60a47d2
2024-01-02 20:32:14,597 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=5768235d-d50d-4f96-96c3-246f5b1c9afa to datanode:5d909982-d9bb-4fff-899e-5202ae67d1b0
2024-01-02 20:32:14,598 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=5768235d-d50d-4f96-96c3-246f5b1c9afa to datanode:9c1886ac-4be2-4896-abe1-19a50370d262
2024-01-02 20:32:14,598 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=5768235d-d50d-4f96-96c3-246f5b1c9afa to datanode:f26110df-398b-4b3f-ad5b-af1c55b6a519
2024-01-02 20:32:14,618 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:getNextId(145)) - Allocate a batch for containerId, change lastId from 0 to 1000.
2024-01-02 20:32:14,626 [main] WARN  ha.SequenceIdGenerator (SequenceIdGenerator.java:allocateBatch(258)) - Failed to allocate a batch for localId, expected lastId is 0, actual lastId is 113750153625600000.
2024-01-02 20:32:14,627 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:getNextId(145)) - Allocate a batch for localId, change lastId from 113750153625600000 to 113750153625601000.
2024-01-02 20:32:14,716 [EventQueue-CloseContainerForCloseContainerEventHandler] INFO  container.CloseContainerEventHandler (CloseContainerEventHandler.java:onMessage(88)) - Close container Event triggered for container : #1, current state: OPEN
2024-01-02 20:32:14,721 [EventQueue-CloseContainerForCloseContainerEventHandler] INFO  container.CloseContainerEventHandler (CloseContainerEventHandler.java:onMessage(88)) - Close container Event triggered for container : #2, current state: OPEN
2024-01-02 20:32:14,722 [EventQueue-CloseContainerForCloseContainerEventHandler] INFO  container.CloseContainerEventHandler (CloseContainerEventHandler.java:onMessage(88)) - Close container Event triggered for container : #4, current state: OPEN
2024-01-02 20:32:14,723 [EventQueue-CloseContainerForCloseContainerEventHandler] INFO  container.CloseContainerEventHandler (CloseContainerEventHandler.java:onMessage(88)) - Close container Event triggered for container : #3, current state: OPEN
2024-01-02 20:32:14,724 [EventQueue-CloseContainerForCloseContainerEventHandler] INFO  container.CloseContainerEventHandler (CloseContainerEventHandler.java:onMessage(88)) - Close container Event triggered for container : #5, current state: OPEN
2024-01-02 20:32:14,725 [EventQueue-CloseContainerForCloseContainerEventHandler] INFO  container.CloseContainerEventHandler (CloseContainerEventHandler.java:onMessage(88)) - Close container Event triggered for container : #6, current state: OPEN
2024-01-02 20:32:14,783 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1654)) - Container Balancer is not running.
2024-01-02 20:32:14,784 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stopReplicationManager(1787)) - Stopping Replication Manager Service.
2024-01-02 20:32:14,784 [main] INFO  replication.ReplicationManager (ReplicationManager.java:stop(326)) - Stopping Replication Monitor Thread.
2024-01-02 20:32:14,784 [UnderReplicatedProcessor] WARN  replication.UnhealthyReplicationProcessor (UnhealthyReplicationProcessor.java:run(180)) - UnderReplicatedProcessor interrupted. Exiting...
2024-01-02 20:32:14,784 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1663)) - Stopping the Datanode Admin Monitor.
2024-01-02 20:32:14,784 [OverReplicatedProcessor] WARN  replication.UnhealthyReplicationProcessor (UnhealthyReplicationProcessor.java:run(180)) - OverReplicatedProcessor interrupted. Exiting...
2024-01-02 20:32:14,784 [ReplicationMonitor] INFO  replication.ReplicationManager (ReplicationManager.java:run(933)) - Replication Monitor Thread is stopped
2024-01-02 20:32:14,785 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1670)) - Stopping datanode service RPC server
2024-01-02 20:32:14,786 [main] INFO  server.SCMDatanodeProtocolServer (SCMDatanodeProtocolServer.java:stop(424)) - Stopping the RPC server for DataNodes
2024-01-02 20:32:14,786 [main] INFO  ipc.Server (Server.java:stop(3523)) - Stopping server on 34505
2024-01-02 20:32:14,787 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1678)) - Stopping block service RPC server
2024-01-02 20:32:14,787 [main] INFO  server.SCMBlockProtocolServer (SCMBlockProtocolServer.java:stop(168)) - Stopping the RPC server for Block Protocol
2024-01-02 20:32:14,787 [main] INFO  ipc.Server (Server.java:stop(3523)) - Stopping server on 44843
2024-01-02 20:32:14,788 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1685)) - Stopping the StorageContainerLocationProtocol RPC server
2024-01-02 20:32:14,788 [main] INFO  server.SCMClientProtocolServer (SCMClientProtocolServer.java:stop(210)) - Stopping the RPC server for Client Protocol
2024-01-02 20:32:14,788 [main] INFO  ipc.Server (Server.java:stop(3523)) - Stopping server on 33219
2024-01-02 20:32:14,789 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1692)) - Stopping Storage Container Manager HTTP server.
2024-01-02 20:32:14,789 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1700)) - Stopping SCM LayoutVersionManager Service.
2024-01-02 20:32:14,790 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1712)) - Stopping Block Manager Service.
2024-01-02 20:32:14,790 [main] INFO  utils.BackgroundService (BackgroundService.java:shutdown(160)) - Shutting down service SCMBlockDeletingService
2024-01-02 20:32:14,790 [main] INFO  utils.BackgroundService (BackgroundService.java:shutdown(160)) - Shutting down service SCMBlockDeletingService
2024-01-02 20:32:14,791 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1732)) - Stopping SCM Event Queue.
2024-01-02 20:32:14,792 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1743)) - Stopping SCM HA services.
2024-01-02 20:32:14,793 [main] INFO  pipeline.BackgroundPipelineCreator (BackgroundPipelineCreator.java:stop(152)) - Stopping RatisPipelineUtilsThread.
2024-01-02 20:32:14,793 [RatisPipelineUtilsThread-0] WARN  pipeline.BackgroundPipelineCreator (BackgroundPipelineCreator.java:run(183)) - RatisPipelineUtilsThread is interrupted.
2024-01-02 20:32:14,793 [main] INFO  BackgroundPipelineScrubber (BackgroundSCMService.java:stop(131)) - Stopping BackgroundPipelineScrubber Service.
2024-01-02 20:32:14,793 [BackgroundPipelineScrubber] WARN  BackgroundPipelineScrubber (BackgroundSCMService.java:run(115)) - BackgroundPipelineScrubber is interrupted, exit
2024-01-02 20:32:14,794 [main] INFO  ExpiredContainerReplicaOpScrubber (BackgroundSCMService.java:stop(131)) - Stopping ExpiredContainerReplicaOpScrubber Service.
2024-01-02 20:32:14,795 [main] INFO  utils.BackgroundService (BackgroundService.java:shutdown(160)) - Shutting down service SCMBlockDeletingService
2024-01-02 20:32:14,795 [main] INFO  replication.ReplicationManager (ReplicationManager.java:stop(336)) - Replication Monitor Thread is not running.
2024-01-02 20:32:14,795 [main] WARN  balancer.ContainerBalancer (ContainerBalancer.java:stop(327)) - Cannot stop Container Balancer because it's not running or stopping
2024-01-02 20:32:14,794 [ExpiredContainerReplicaOpScrubber] WARN  ExpiredContainerReplicaOpScrubber (BackgroundSCMService.java:run(115)) - ExpiredContainerReplicaOpScrubber is interrupted, exit
2024-01-02 20:32:14,796 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1778)) - Stopping SCM MetadataStore.
]]></system-out>
  </testcase>
  <testcase name="testMultipleBlockAllocation" classname="org.apache.hadoop.hdds.scm.block.TestBlockManager" time="0.188">
    <system-out><![CDATA[2024-01-02 20:32:14,841 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchemaFromFile(129)) - Loading schema from [file:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/classes/network-topology-default.xml]
2024-01-02 20:32:14,841 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchema(176)) - Loading network topology layer schema file
2024-01-02 20:32:14,854 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchemaFromFile(129)) - Loading schema from [file:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/classes/network-topology-default.xml]
2024-01-02 20:32:14,855 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchema(176)) - Loading network topology layer schema file
2024-01-02 20:32:14,857 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/209379db-53f7-4031-825a-4f6911711324
2024-01-02 20:32:14,858 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/ae8e39dc-6fa8-47b2-a6ac-4aa5267b0510
2024-01-02 20:32:14,858 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/473b6af0-f851-4b4e-9588-cd4abe544c50
2024-01-02 20:32:14,858 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/a2cff30d-4d95-4f62-84d8-cb8e830c66c2
2024-01-02 20:32:14,859 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/1771875d-dfbd-4175-a345-89400f2413fe
2024-01-02 20:32:14,859 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/47a6d938-f349-41c8-a917-ec23c4ebf344
2024-01-02 20:32:14,859 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/4122e71f-ac81-49d1-a4c9-49be27aa0311
2024-01-02 20:32:14,860 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/a22b6cfb-8274-4757-8de3-d12760a1919a
2024-01-02 20:32:14,860 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/9406d905-044b-4755-94ae-b36ba6ad01f5
2024-01-02 20:32:14,860 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/502a1db3-aecc-48ee-80a7-eb9de94b73db
2024-01-02 20:32:14,861 [main] WARN  utils.HAUtils (HAUtils.java:getMetaDir(339)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:14,861 [main] WARN  db.DBStoreBuilder (DBStoreBuilder.java:applyDBDefinition(167)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:14,928 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:<init>(241)) - Init the HA SequenceIdGenerator.
2024-01-02 20:32:14,928 [main] INFO  pipeline.PipelineStateManagerImpl (PipelineStateManagerImpl.java:initialize(78)) - No pipeline exists in current db
2024-01-02 20:32:14,928 [main] INFO  algorithms.LeaderChoosePolicyFactory (LeaderChoosePolicyFactory.java:getPolicy(57)) - Create leader choose policy of type org.apache.hadoop.hdds.scm.pipeline.leader.choose.algorithms.MinLeaderCountChoosePolicy
2024-01-02 20:32:14,929 [main] INFO  algorithms.ContainerPlacementPolicyFactory (ContainerPlacementPolicyFactory.java:getPolicyInternal(86)) - Create container placement policy of type org.apache.hadoop.hdds.scm.container.placement.algorithms.SCMContainerPlacementRackScatter
2024-01-02 20:32:14,929 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service BackgroundPipelineCreator.
2024-01-02 20:32:14,930 [main] INFO  pipeline.BackgroundPipelineCreator (BackgroundPipelineCreator.java:start(127)) - Starting RatisPipelineUtilsThread.
2024-01-02 20:32:14,930 [main] INFO  BackgroundPipelineScrubber (BackgroundSCMService.java:start(68)) - Starting BackgroundPipelineScrubber Service.
2024-01-02 20:32:14,930 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service BackgroundPipelineScrubber.
2024-01-02 20:32:14,931 [main] INFO  algorithms.LeaderChoosePolicyFactory (LeaderChoosePolicyFactory.java:getPolicy(57)) - Create leader choose policy of type org.apache.hadoop.hdds.scm.pipeline.leader.choose.algorithms.MinLeaderCountChoosePolicy
2024-01-02 20:32:14,932 [main] INFO  safemode.ContainerSafeModeRule (ContainerSafeModeRule.java:<init>(91)) - containers with one replica threshold count 0
2024-01-02 20:32:14,933 [main] INFO  safemode.HealthyPipelineSafeModeRule (HealthyPipelineSafeModeRule.java:initializeRule(176)) - Total pipeline count is 0, healthy pipeline threshold count is 0
2024-01-02 20:32:14,933 [main] INFO  safemode.OneReplicaPipelineSafeModeRule (OneReplicaPipelineSafeModeRule.java:initializeRule(193)) - Total pipeline count is 0, pipeline's with at least one datanode reported threshold count is 0
2024-01-02 20:32:14,933 [main] WARN  server.ServerUtils (ServerUtils.java:getScmDbDir(155)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:14,934 [main] WARN  server.ServerUtils (ServerUtils.java:getScmDbDir(155)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:14,935 [main] INFO  ha.SCMHANodeDetails (SCMHANodeDetails.java:loadSCMHAConfig(207)) - ServiceID for StorageContainerManager is null
2024-01-02 20:32:14,935 [main] INFO  ha.SCMHANodeDetails (SCMHANodeDetails.java:loadSCMHAConfig(212)) - ozone.scm.default.service.id is not defined, falling back to ozone.scm.service.ids to find serviceID for StorageContainerManager if it is HA enabled cluster
2024-01-02 20:32:14,936 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchemaFromFile(129)) - Loading schema from [file:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/classes/network-topology-default.xml]
2024-01-02 20:32:14,937 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchema(176)) - Loading network topology layer schema file
2024-01-02 20:32:14,940 [main] INFO  upgrade.AbstractLayoutVersionManager (AbstractLayoutVersionManager.java:init(83)) - Initializing Layout version manager with metadata layout = HADOOP_PRC_PORTS_IN_DATANODEDETAILS (version = 7), software layout = HADOOP_PRC_PORTS_IN_DATANODEDETAILS (version = 7)
2024-01-02 20:32:14,941 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToSequenceId(370)) - upgrade localId to 113750153625600000
2024-01-02 20:32:14,942 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToSequenceId(380)) - upgrade delTxnId to 0
2024-01-02 20:32:14,943 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToSequenceId(397)) - upgrade containerId to 0
2024-01-02 20:32:14,943 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToCertificateSequenceId(444)) - upgrade CertificateId to 2
2024-01-02 20:32:14,944 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:<init>(241)) - Init the HA SequenceIdGenerator.
2024-01-02 20:32:14,944 [main] INFO  algorithms.ContainerPlacementPolicyFactory (ContainerPlacementPolicyFactory.java:getPolicyInternal(86)) - Create container placement policy of type org.apache.hadoop.hdds.scm.container.placement.algorithms.SCMContainerPlacementRackAware
2024-01-02 20:32:14,944 [main] INFO  algorithms.ContainerPlacementPolicyFactory (ContainerPlacementPolicyFactory.java:getPolicyInternal(86)) - Create container placement policy of type org.apache.hadoop.hdds.scm.container.placement.algorithms.SCMContainerPlacementRackScatter
2024-01-02 20:32:14,945 [main] INFO  ExpiredContainerReplicaOpScrubber (BackgroundSCMService.java:start(68)) - Starting ExpiredContainerReplicaOpScrubber Service.
2024-01-02 20:32:14,945 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service ExpiredContainerReplicaOpScrubber.
2024-01-02 20:32:14,945 [main] INFO  algorithms.PipelineChoosePolicyFactory (PipelineChoosePolicyFactory.java:createPipelineChoosePolicyFromClass(78)) - Create pipeline choose policy of type org.apache.hadoop.hdds.scm.pipeline.choose.algorithms.RandomPipelineChoosePolicy
2024-01-02 20:32:14,946 [main] INFO  algorithms.PipelineChoosePolicyFactory (PipelineChoosePolicyFactory.java:createPipelineChoosePolicyFromClass(78)) - Create pipeline choose policy of type org.apache.hadoop.hdds.scm.pipeline.choose.algorithms.RandomPipelineChoosePolicy
2024-01-02 20:32:14,946 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service SCMBlockDeletingService.
2024-01-02 20:32:14,948 [main] INFO  replication.ReplicationManager (ReplicationManager.java:start(294)) - Starting Replication Monitor Thread.
2024-01-02 20:32:14,951 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service ReplicationManager.
2024-01-02 20:32:14,951 [ReplicationMonitor] INFO  replication.ReplicationManager (ReplicationManager.java:processAll(369)) - Replication Manager is not ready to run until 300000ms after safemode exit
2024-01-02 20:32:14,952 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:<init>(440)) - SCM start with adminUsers: [runner]
2024-01-02 20:32:14,952 [main] INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(90)) - Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
2024-01-02 20:32:14,952 [main] INFO  ipc.Server (Server.java:<init>(1287)) - Listener at 0.0.0.0:37227
2024-01-02 20:32:14,953 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:run(1323)) - Starting Socket Reader #1 for port 0
2024-01-02 20:32:14,961 [main] INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(90)) - Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
2024-01-02 20:32:14,961 [main] INFO  ipc.Server (Server.java:<init>(1287)) - Listener at 0.0.0.0:39331
2024-01-02 20:32:14,962 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:run(1323)) - Starting Socket Reader #1 for port 0
2024-01-02 20:32:14,963 [main] INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(90)) - Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
2024-01-02 20:32:14,963 [main] INFO  ipc.Server (Server.java:<init>(1287)) - Listener at 0.0.0.0:42817
2024-01-02 20:32:14,963 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:run(1323)) - Starting Socket Reader #1 for port 0
2024-01-02 20:32:14,972 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service ContainerBalancer.
2024-01-02 20:32:14,973 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:<init>(453)) - 
Container Balancer status:
Key                            Value
Running                        false
Container Balancer Configuration values:
Key                                                Value
Threshold                                          10
Max Datanodes to Involve per Iteration(percent)    20
Max Size to Move per Iteration                     500GB
Max Size Entering Target per Iteration             26GB
Max Size Leaving Source per Iteration              26GB
Number of Iterations                               10
Time Limit for Single Container's Movement         65min
Time Limit for Single Container's Replication      50min
Interval between each Iteration                    70min
Whether to Enable Network Topology                 false
Whether to Trigger Refresh Datanode Usage Info     false
Container IDs to Exclude from Balancing            None
Datanodes Specified to be Balanced                 None
Datanodes Excluded from Balancing                  None

2024-01-02 20:32:14,976 [main] INFO  ha.SCMContext (SCMContext.java:updateSafeModeStatus(230)) - Update SafeModeStatus from SafeModeStatus{safeModeStatus=false, preCheckPassed=true} to SafeModeStatus{safeModeStatus=false, preCheckPassed=true}.
2024-01-02 20:32:14,978 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=2fd7f0ff-70da-41a3-9aa1-cf268f15fe66 to datanode:a22b6cfb-8274-4757-8de3-d12760a1919a
2024-01-02 20:32:14,979 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=2fd7f0ff-70da-41a3-9aa1-cf268f15fe66 to datanode:47a6d938-f349-41c8-a917-ec23c4ebf344
2024-01-02 20:32:14,979 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=2fd7f0ff-70da-41a3-9aa1-cf268f15fe66 to datanode:4122e71f-ac81-49d1-a4c9-49be27aa0311
2024-01-02 20:32:14,988 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=c1c81f7a-0d85-49a4-b093-08800a2e53c0 to datanode:473b6af0-f851-4b4e-9588-cd4abe544c50
2024-01-02 20:32:14,988 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=c1c81f7a-0d85-49a4-b093-08800a2e53c0 to datanode:a22b6cfb-8274-4757-8de3-d12760a1919a
2024-01-02 20:32:14,989 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=c1c81f7a-0d85-49a4-b093-08800a2e53c0 to datanode:47a6d938-f349-41c8-a917-ec23c4ebf344
2024-01-02 20:32:14,993 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:getNextId(145)) - Allocate a batch for containerId, change lastId from 0 to 1000.
2024-01-02 20:32:14,994 [main] WARN  ha.SequenceIdGenerator (SequenceIdGenerator.java:allocateBatch(258)) - Failed to allocate a batch for localId, expected lastId is 0, actual lastId is 113750153625600000.
2024-01-02 20:32:14,995 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:getNextId(145)) - Allocate a batch for localId, change lastId from 113750153625600000 to 113750153625601000.
2024-01-02 20:32:14,996 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1654)) - Container Balancer is not running.
2024-01-02 20:32:14,996 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stopReplicationManager(1787)) - Stopping Replication Manager Service.
2024-01-02 20:32:14,997 [main] INFO  replication.ReplicationManager (ReplicationManager.java:stop(326)) - Stopping Replication Monitor Thread.
2024-01-02 20:32:14,997 [UnderReplicatedProcessor] WARN  replication.UnhealthyReplicationProcessor (UnhealthyReplicationProcessor.java:run(180)) - UnderReplicatedProcessor interrupted. Exiting...
2024-01-02 20:32:14,997 [ReplicationMonitor] INFO  replication.ReplicationManager (ReplicationManager.java:run(933)) - Replication Monitor Thread is stopped
2024-01-02 20:32:14,997 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1663)) - Stopping the Datanode Admin Monitor.
2024-01-02 20:32:14,997 [OverReplicatedProcessor] WARN  replication.UnhealthyReplicationProcessor (UnhealthyReplicationProcessor.java:run(180)) - OverReplicatedProcessor interrupted. Exiting...
2024-01-02 20:32:14,998 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1670)) - Stopping datanode service RPC server
2024-01-02 20:32:14,998 [main] INFO  server.SCMDatanodeProtocolServer (SCMDatanodeProtocolServer.java:stop(424)) - Stopping the RPC server for DataNodes
2024-01-02 20:32:14,998 [main] INFO  ipc.Server (Server.java:stop(3523)) - Stopping server on 37227
2024-01-02 20:32:14,999 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1678)) - Stopping block service RPC server
2024-01-02 20:32:14,999 [main] INFO  server.SCMBlockProtocolServer (SCMBlockProtocolServer.java:stop(168)) - Stopping the RPC server for Block Protocol
2024-01-02 20:32:14,999 [main] INFO  ipc.Server (Server.java:stop(3523)) - Stopping server on 39331
2024-01-02 20:32:15,000 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1685)) - Stopping the StorageContainerLocationProtocol RPC server
2024-01-02 20:32:15,000 [main] INFO  server.SCMClientProtocolServer (SCMClientProtocolServer.java:stop(210)) - Stopping the RPC server for Client Protocol
2024-01-02 20:32:15,000 [main] INFO  ipc.Server (Server.java:stop(3523)) - Stopping server on 42817
2024-01-02 20:32:15,000 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1692)) - Stopping Storage Container Manager HTTP server.
2024-01-02 20:32:15,000 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1700)) - Stopping SCM LayoutVersionManager Service.
2024-01-02 20:32:15,001 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1712)) - Stopping Block Manager Service.
2024-01-02 20:32:15,001 [main] INFO  utils.BackgroundService (BackgroundService.java:shutdown(160)) - Shutting down service SCMBlockDeletingService
2024-01-02 20:32:15,001 [main] INFO  utils.BackgroundService (BackgroundService.java:shutdown(160)) - Shutting down service SCMBlockDeletingService
2024-01-02 20:32:15,001 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1732)) - Stopping SCM Event Queue.
2024-01-02 20:32:15,002 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1743)) - Stopping SCM HA services.
2024-01-02 20:32:15,002 [main] INFO  pipeline.BackgroundPipelineCreator (BackgroundPipelineCreator.java:stop(152)) - Stopping RatisPipelineUtilsThread.
2024-01-02 20:32:15,002 [RatisPipelineUtilsThread-0] WARN  pipeline.BackgroundPipelineCreator (BackgroundPipelineCreator.java:run(183)) - RatisPipelineUtilsThread is interrupted.
2024-01-02 20:32:15,002 [main] INFO  BackgroundPipelineScrubber (BackgroundSCMService.java:stop(131)) - Stopping BackgroundPipelineScrubber Service.
2024-01-02 20:32:15,002 [BackgroundPipelineScrubber] WARN  BackgroundPipelineScrubber (BackgroundSCMService.java:run(115)) - BackgroundPipelineScrubber is interrupted, exit
2024-01-02 20:32:15,003 [main] INFO  ExpiredContainerReplicaOpScrubber (BackgroundSCMService.java:stop(131)) - Stopping ExpiredContainerReplicaOpScrubber Service.
2024-01-02 20:32:15,003 [ExpiredContainerReplicaOpScrubber] WARN  ExpiredContainerReplicaOpScrubber (BackgroundSCMService.java:run(115)) - ExpiredContainerReplicaOpScrubber is interrupted, exit
2024-01-02 20:32:15,003 [main] INFO  utils.BackgroundService (BackgroundService.java:shutdown(160)) - Shutting down service SCMBlockDeletingService
2024-01-02 20:32:15,003 [main] INFO  replication.ReplicationManager (ReplicationManager.java:stop(336)) - Replication Monitor Thread is not running.
2024-01-02 20:32:15,003 [main] WARN  balancer.ContainerBalancer (ContainerBalancer.java:stop(327)) - Cannot stop Container Balancer because it's not running or stopping
2024-01-02 20:32:15,004 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1778)) - Stopping SCM MetadataStore.
2024-01-02 20:32:15,004 [test-leaseManagerLeaseManager#LeaseMonitor] WARN  lease.LeaseManager (LeaseManager.java:run(287)) - Lease manager is interrupted. Shutting down...
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedNanos(AbstractQueuedSynchronizer.java:1039)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.tryAcquireSharedNanos(AbstractQueuedSynchronizer.java:1328)
	at java.util.concurrent.Semaphore.tryAcquire(Semaphore.java:409)
	at org.apache.hadoop.ozone.lease.LeaseManager$LeaseMonitor.run(LeaseManager.java:285)
	at java.lang.Thread.run(Thread.java:750)
]]></system-out>
  </testcase>
  <testcase name="testAllocateBlockWithExclusion" classname="org.apache.hadoop.hdds.scm.block.TestBlockManager" time="0.209">
    <system-out><![CDATA[2024-01-02 20:32:15,026 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchemaFromFile(129)) - Loading schema from [file:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/classes/network-topology-default.xml]
2024-01-02 20:32:15,026 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchema(176)) - Loading network topology layer schema file
2024-01-02 20:32:15,036 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchemaFromFile(129)) - Loading schema from [file:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/classes/network-topology-default.xml]
2024-01-02 20:32:15,036 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchema(176)) - Loading network topology layer schema file
2024-01-02 20:32:15,038 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/acd5e413-16db-4d6b-b578-e34572ccaa87
2024-01-02 20:32:15,038 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/f63020a0-ef41-4f02-9234-d741f7d63472
2024-01-02 20:32:15,038 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/00051372-945f-42c3-9bac-715e13018254
2024-01-02 20:32:15,039 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/735e24d4-a5ce-435c-a4f9-4d736024c8ad
2024-01-02 20:32:15,039 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/3176ec14-7f00-4708-8007-6e0a062bf35a
2024-01-02 20:32:15,040 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/7c7d5ace-1eaa-4f0f-ab1b-b6e58764051f
2024-01-02 20:32:15,040 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/eb631acf-2c65-49ab-8e81-19e0388787e2
2024-01-02 20:32:15,040 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/3b9bd2e9-e4eb-4170-8d93-76985a7e0f9e
2024-01-02 20:32:15,041 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/7938d7b1-e273-46dc-86b3-e3aa3ab485c0
2024-01-02 20:32:15,041 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/07dede2c-60ad-4bad-9efe-0249d102c80d
2024-01-02 20:32:15,041 [main] WARN  utils.HAUtils (HAUtils.java:getMetaDir(339)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:15,042 [main] WARN  db.DBStoreBuilder (DBStoreBuilder.java:applyDBDefinition(167)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:15,111 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:<init>(241)) - Init the HA SequenceIdGenerator.
2024-01-02 20:32:15,111 [main] INFO  pipeline.PipelineStateManagerImpl (PipelineStateManagerImpl.java:initialize(78)) - No pipeline exists in current db
2024-01-02 20:32:15,111 [main] INFO  algorithms.LeaderChoosePolicyFactory (LeaderChoosePolicyFactory.java:getPolicy(57)) - Create leader choose policy of type org.apache.hadoop.hdds.scm.pipeline.leader.choose.algorithms.MinLeaderCountChoosePolicy
2024-01-02 20:32:15,112 [main] INFO  algorithms.ContainerPlacementPolicyFactory (ContainerPlacementPolicyFactory.java:getPolicyInternal(86)) - Create container placement policy of type org.apache.hadoop.hdds.scm.container.placement.algorithms.SCMContainerPlacementRackScatter
2024-01-02 20:32:15,112 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service BackgroundPipelineCreator.
2024-01-02 20:32:15,112 [main] INFO  pipeline.BackgroundPipelineCreator (BackgroundPipelineCreator.java:start(127)) - Starting RatisPipelineUtilsThread.
2024-01-02 20:32:15,113 [main] INFO  BackgroundPipelineScrubber (BackgroundSCMService.java:start(68)) - Starting BackgroundPipelineScrubber Service.
2024-01-02 20:32:15,113 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service BackgroundPipelineScrubber.
2024-01-02 20:32:15,113 [main] INFO  algorithms.LeaderChoosePolicyFactory (LeaderChoosePolicyFactory.java:getPolicy(57)) - Create leader choose policy of type org.apache.hadoop.hdds.scm.pipeline.leader.choose.algorithms.MinLeaderCountChoosePolicy
2024-01-02 20:32:15,114 [main] INFO  safemode.ContainerSafeModeRule (ContainerSafeModeRule.java:<init>(91)) - containers with one replica threshold count 0
2024-01-02 20:32:15,115 [main] INFO  safemode.HealthyPipelineSafeModeRule (HealthyPipelineSafeModeRule.java:initializeRule(176)) - Total pipeline count is 0, healthy pipeline threshold count is 0
2024-01-02 20:32:15,115 [main] INFO  safemode.OneReplicaPipelineSafeModeRule (OneReplicaPipelineSafeModeRule.java:initializeRule(193)) - Total pipeline count is 0, pipeline's with at least one datanode reported threshold count is 0
2024-01-02 20:32:15,115 [main] WARN  server.ServerUtils (ServerUtils.java:getScmDbDir(155)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:15,117 [main] WARN  server.ServerUtils (ServerUtils.java:getScmDbDir(155)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:15,117 [main] INFO  ha.SCMHANodeDetails (SCMHANodeDetails.java:loadSCMHAConfig(207)) - ServiceID for StorageContainerManager is null
2024-01-02 20:32:15,118 [main] INFO  ha.SCMHANodeDetails (SCMHANodeDetails.java:loadSCMHAConfig(212)) - ozone.scm.default.service.id is not defined, falling back to ozone.scm.service.ids to find serviceID for StorageContainerManager if it is HA enabled cluster
2024-01-02 20:32:15,119 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchemaFromFile(129)) - Loading schema from [file:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/classes/network-topology-default.xml]
2024-01-02 20:32:15,119 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchema(176)) - Loading network topology layer schema file
2024-01-02 20:32:15,121 [main] INFO  upgrade.AbstractLayoutVersionManager (AbstractLayoutVersionManager.java:init(83)) - Initializing Layout version manager with metadata layout = HADOOP_PRC_PORTS_IN_DATANODEDETAILS (version = 7), software layout = HADOOP_PRC_PORTS_IN_DATANODEDETAILS (version = 7)
2024-01-02 20:32:15,123 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToSequenceId(370)) - upgrade localId to 113750153625600000
2024-01-02 20:32:15,124 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToSequenceId(380)) - upgrade delTxnId to 0
2024-01-02 20:32:15,124 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToSequenceId(397)) - upgrade containerId to 0
2024-01-02 20:32:15,125 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToCertificateSequenceId(444)) - upgrade CertificateId to 2
2024-01-02 20:32:15,126 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:<init>(241)) - Init the HA SequenceIdGenerator.
2024-01-02 20:32:15,126 [main] INFO  algorithms.ContainerPlacementPolicyFactory (ContainerPlacementPolicyFactory.java:getPolicyInternal(86)) - Create container placement policy of type org.apache.hadoop.hdds.scm.container.placement.algorithms.SCMContainerPlacementRackAware
2024-01-02 20:32:15,126 [main] INFO  algorithms.ContainerPlacementPolicyFactory (ContainerPlacementPolicyFactory.java:getPolicyInternal(86)) - Create container placement policy of type org.apache.hadoop.hdds.scm.container.placement.algorithms.SCMContainerPlacementRackScatter
2024-01-02 20:32:15,126 [main] INFO  ExpiredContainerReplicaOpScrubber (BackgroundSCMService.java:start(68)) - Starting ExpiredContainerReplicaOpScrubber Service.
2024-01-02 20:32:15,127 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service ExpiredContainerReplicaOpScrubber.
2024-01-02 20:32:15,127 [main] INFO  algorithms.PipelineChoosePolicyFactory (PipelineChoosePolicyFactory.java:createPipelineChoosePolicyFromClass(78)) - Create pipeline choose policy of type org.apache.hadoop.hdds.scm.pipeline.choose.algorithms.RandomPipelineChoosePolicy
2024-01-02 20:32:15,127 [main] INFO  algorithms.PipelineChoosePolicyFactory (PipelineChoosePolicyFactory.java:createPipelineChoosePolicyFromClass(78)) - Create pipeline choose policy of type org.apache.hadoop.hdds.scm.pipeline.choose.algorithms.RandomPipelineChoosePolicy
2024-01-02 20:32:15,128 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service SCMBlockDeletingService.
2024-01-02 20:32:15,130 [main] INFO  replication.ReplicationManager (ReplicationManager.java:start(294)) - Starting Replication Monitor Thread.
2024-01-02 20:32:15,133 [ReplicationMonitor] INFO  replication.ReplicationManager (ReplicationManager.java:processAll(369)) - Replication Manager is not ready to run until 300000ms after safemode exit
2024-01-02 20:32:15,133 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service ReplicationManager.
2024-01-02 20:32:15,133 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:<init>(440)) - SCM start with adminUsers: [runner]
2024-01-02 20:32:15,134 [main] INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(90)) - Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
2024-01-02 20:32:15,134 [main] INFO  ipc.Server (Server.java:<init>(1287)) - Listener at 0.0.0.0:43303
2024-01-02 20:32:15,134 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:run(1323)) - Starting Socket Reader #1 for port 0
2024-01-02 20:32:15,135 [main] INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(90)) - Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
2024-01-02 20:32:15,135 [main] INFO  ipc.Server (Server.java:<init>(1287)) - Listener at 0.0.0.0:35911
2024-01-02 20:32:15,153 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:run(1323)) - Starting Socket Reader #1 for port 0
2024-01-02 20:32:15,154 [main] INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(90)) - Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
2024-01-02 20:32:15,154 [main] INFO  ipc.Server (Server.java:<init>(1287)) - Listener at 0.0.0.0:42867
2024-01-02 20:32:15,154 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:run(1323)) - Starting Socket Reader #1 for port 0
2024-01-02 20:32:15,158 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service ContainerBalancer.
2024-01-02 20:32:15,159 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:<init>(453)) - 
Container Balancer status:
Key                            Value
Running                        false
Container Balancer Configuration values:
Key                                                Value
Threshold                                          10
Max Datanodes to Involve per Iteration(percent)    20
Max Size to Move per Iteration                     500GB
Max Size Entering Target per Iteration             26GB
Max Size Leaving Source per Iteration              26GB
Number of Iterations                               10
Time Limit for Single Container's Movement         65min
Time Limit for Single Container's Replication      50min
Interval between each Iteration                    70min
Whether to Enable Network Topology                 false
Whether to Trigger Refresh Datanode Usage Info     false
Container IDs to Exclude from Balancing            None
Datanodes Specified to be Balanced                 None
Datanodes Excluded from Balancing                  None

2024-01-02 20:32:15,160 [main] INFO  ha.SCMContext (SCMContext.java:updateSafeModeStatus(230)) - Update SafeModeStatus from SafeModeStatus{safeModeStatus=false, preCheckPassed=true} to SafeModeStatus{safeModeStatus=false, preCheckPassed=true}.
2024-01-02 20:32:15,162 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=87e6da35-e31c-45d0-839a-552356c05594 to datanode:3176ec14-7f00-4708-8007-6e0a062bf35a
2024-01-02 20:32:15,162 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=87e6da35-e31c-45d0-839a-552356c05594 to datanode:f63020a0-ef41-4f02-9234-d741f7d63472
2024-01-02 20:32:15,163 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=87e6da35-e31c-45d0-839a-552356c05594 to datanode:acd5e413-16db-4d6b-b578-e34572ccaa87
2024-01-02 20:32:15,165 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=9e47656b-5de3-4040-9279-53964985cce1 to datanode:acd5e413-16db-4d6b-b578-e34572ccaa87
2024-01-02 20:32:15,166 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=9e47656b-5de3-4040-9279-53964985cce1 to datanode:3176ec14-7f00-4708-8007-6e0a062bf35a
2024-01-02 20:32:15,166 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=9e47656b-5de3-4040-9279-53964985cce1 to datanode:7c7d5ace-1eaa-4f0f-ab1b-b6e58764051f
2024-01-02 20:32:15,168 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=c32ab063-5d29-4912-8df1-1f6f31ecd89b to datanode:3b9bd2e9-e4eb-4170-8d93-76985a7e0f9e
2024-01-02 20:32:15,168 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=c32ab063-5d29-4912-8df1-1f6f31ecd89b to datanode:7c7d5ace-1eaa-4f0f-ab1b-b6e58764051f
2024-01-02 20:32:15,168 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=c32ab063-5d29-4912-8df1-1f6f31ecd89b to datanode:eb631acf-2c65-49ab-8e81-19e0388787e2
2024-01-02 20:32:15,170 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=f3eb43ed-df2a-4681-81ff-cf2541b45bc7 to datanode:f63020a0-ef41-4f02-9234-d741f7d63472
2024-01-02 20:32:15,171 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=f3eb43ed-df2a-4681-81ff-cf2541b45bc7 to datanode:3b9bd2e9-e4eb-4170-8d93-76985a7e0f9e
2024-01-02 20:32:15,171 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=f3eb43ed-df2a-4681-81ff-cf2541b45bc7 to datanode:eb631acf-2c65-49ab-8e81-19e0388787e2
2024-01-02 20:32:15,178 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:getNextId(145)) - Allocate a batch for containerId, change lastId from 0 to 1000.
2024-01-02 20:32:15,179 [main] WARN  ha.SequenceIdGenerator (SequenceIdGenerator.java:allocateBatch(258)) - Failed to allocate a batch for localId, expected lastId is 0, actual lastId is 113750153625600000.
2024-01-02 20:32:15,179 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:getNextId(145)) - Allocate a batch for localId, change lastId from 113750153625600000 to 113750153625601000.
2024-01-02 20:32:15,207 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1654)) - Container Balancer is not running.
2024-01-02 20:32:15,207 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stopReplicationManager(1787)) - Stopping Replication Manager Service.
2024-01-02 20:32:15,207 [main] INFO  replication.ReplicationManager (ReplicationManager.java:stop(326)) - Stopping Replication Monitor Thread.
2024-01-02 20:32:15,207 [UnderReplicatedProcessor] WARN  replication.UnhealthyReplicationProcessor (UnhealthyReplicationProcessor.java:run(180)) - UnderReplicatedProcessor interrupted. Exiting...
2024-01-02 20:32:15,208 [OverReplicatedProcessor] WARN  replication.UnhealthyReplicationProcessor (UnhealthyReplicationProcessor.java:run(180)) - OverReplicatedProcessor interrupted. Exiting...
2024-01-02 20:32:15,208 [ReplicationMonitor] INFO  replication.ReplicationManager (ReplicationManager.java:run(933)) - Replication Monitor Thread is stopped
2024-01-02 20:32:15,208 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1663)) - Stopping the Datanode Admin Monitor.
2024-01-02 20:32:15,209 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1670)) - Stopping datanode service RPC server
2024-01-02 20:32:15,209 [main] INFO  server.SCMDatanodeProtocolServer (SCMDatanodeProtocolServer.java:stop(424)) - Stopping the RPC server for DataNodes
2024-01-02 20:32:15,209 [main] INFO  ipc.Server (Server.java:stop(3523)) - Stopping server on 43303
2024-01-02 20:32:15,209 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1678)) - Stopping block service RPC server
2024-01-02 20:32:15,209 [main] INFO  server.SCMBlockProtocolServer (SCMBlockProtocolServer.java:stop(168)) - Stopping the RPC server for Block Protocol
2024-01-02 20:32:15,210 [main] INFO  ipc.Server (Server.java:stop(3523)) - Stopping server on 35911
2024-01-02 20:32:15,210 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1685)) - Stopping the StorageContainerLocationProtocol RPC server
2024-01-02 20:32:15,210 [main] INFO  server.SCMClientProtocolServer (SCMClientProtocolServer.java:stop(210)) - Stopping the RPC server for Client Protocol
2024-01-02 20:32:15,210 [main] INFO  ipc.Server (Server.java:stop(3523)) - Stopping server on 42867
2024-01-02 20:32:15,211 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1692)) - Stopping Storage Container Manager HTTP server.
2024-01-02 20:32:15,211 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1700)) - Stopping SCM LayoutVersionManager Service.
2024-01-02 20:32:15,211 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1712)) - Stopping Block Manager Service.
2024-01-02 20:32:15,211 [main] INFO  utils.BackgroundService (BackgroundService.java:shutdown(160)) - Shutting down service SCMBlockDeletingService
2024-01-02 20:32:15,211 [main] INFO  utils.BackgroundService (BackgroundService.java:shutdown(160)) - Shutting down service SCMBlockDeletingService
2024-01-02 20:32:15,211 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1732)) - Stopping SCM Event Queue.
2024-01-02 20:32:15,212 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1743)) - Stopping SCM HA services.
2024-01-02 20:32:15,212 [main] INFO  pipeline.BackgroundPipelineCreator (BackgroundPipelineCreator.java:stop(152)) - Stopping RatisPipelineUtilsThread.
2024-01-02 20:32:15,212 [RatisPipelineUtilsThread-0] WARN  pipeline.BackgroundPipelineCreator (BackgroundPipelineCreator.java:run(183)) - RatisPipelineUtilsThread is interrupted.
2024-01-02 20:32:15,213 [main] INFO  BackgroundPipelineScrubber (BackgroundSCMService.java:stop(131)) - Stopping BackgroundPipelineScrubber Service.
2024-01-02 20:32:15,213 [BackgroundPipelineScrubber] WARN  BackgroundPipelineScrubber (BackgroundSCMService.java:run(115)) - BackgroundPipelineScrubber is interrupted, exit
2024-01-02 20:32:15,213 [ExpiredContainerReplicaOpScrubber] WARN  ExpiredContainerReplicaOpScrubber (BackgroundSCMService.java:run(115)) - ExpiredContainerReplicaOpScrubber is interrupted, exit
2024-01-02 20:32:15,213 [main] INFO  ExpiredContainerReplicaOpScrubber (BackgroundSCMService.java:stop(131)) - Stopping ExpiredContainerReplicaOpScrubber Service.
2024-01-02 20:32:15,214 [main] INFO  utils.BackgroundService (BackgroundService.java:shutdown(160)) - Shutting down service SCMBlockDeletingService
2024-01-02 20:32:15,214 [main] INFO  replication.ReplicationManager (ReplicationManager.java:stop(336)) - Replication Monitor Thread is not running.
2024-01-02 20:32:15,214 [main] WARN  balancer.ContainerBalancer (ContainerBalancer.java:stop(327)) - Cannot stop Container Balancer because it's not running or stopping
2024-01-02 20:32:15,214 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1778)) - Stopping SCM MetadataStore.
2024-01-02 20:32:15,214 [test-leaseManagerLeaseManager#LeaseMonitor] WARN  lease.LeaseManager (LeaseManager.java:run(287)) - Lease manager is interrupted. Shutting down...
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedNanos(AbstractQueuedSynchronizer.java:1039)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.tryAcquireSharedNanos(AbstractQueuedSynchronizer.java:1328)
	at java.util.concurrent.Semaphore.tryAcquire(Semaphore.java:409)
	at org.apache.hadoop.ozone.lease.LeaseManager$LeaseMonitor.run(LeaseManager.java:285)
	at java.lang.Thread.run(Thread.java:750)
]]></system-out>
  </testcase>
  <testcase name="testBlockDistributionWithMultipleRaftLogDisks" classname="org.apache.hadoop.hdds.scm.block.TestBlockManager" time="0.154">
    <system-out><![CDATA[2024-01-02 20:32:15,235 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchemaFromFile(129)) - Loading schema from [file:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/classes/network-topology-default.xml]
2024-01-02 20:32:15,235 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchema(176)) - Loading network topology layer schema file
2024-01-02 20:32:15,246 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchemaFromFile(129)) - Loading schema from [file:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/classes/network-topology-default.xml]
2024-01-02 20:32:15,247 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchema(176)) - Loading network topology layer schema file
2024-01-02 20:32:15,249 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/a7a1347b-0a7e-453b-92b9-0ec6755f098b
2024-01-02 20:32:15,249 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/a850aea1-f036-4c53-8fe1-6d3d9d18960e
2024-01-02 20:32:15,249 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/4cd0eef7-fe6f-4d6c-98af-cd9716c97aca
2024-01-02 20:32:15,250 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/211923fa-535e-4835-b996-0586fd85c066
2024-01-02 20:32:15,250 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/ad98be9a-1445-43d3-b395-54663076a91c
2024-01-02 20:32:15,250 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/d3e30e50-79db-48f0-a998-d01adf0d3d75
2024-01-02 20:32:15,250 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/cd61132f-ccd2-4d87-b84d-dd8c0853a273
2024-01-02 20:32:15,251 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/3cb75d97-6a50-4b68-bb53-9024be2a5e67
2024-01-02 20:32:15,251 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/6718459f-5289-4506-860c-f818a30d8482
2024-01-02 20:32:15,251 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/9925482a-ed0a-498b-a0bc-a9a1b23a25ae
2024-01-02 20:32:15,251 [main] WARN  utils.HAUtils (HAUtils.java:getMetaDir(339)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:15,252 [main] WARN  db.DBStoreBuilder (DBStoreBuilder.java:applyDBDefinition(167)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:15,313 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:<init>(241)) - Init the HA SequenceIdGenerator.
2024-01-02 20:32:15,313 [main] INFO  pipeline.PipelineStateManagerImpl (PipelineStateManagerImpl.java:initialize(78)) - No pipeline exists in current db
2024-01-02 20:32:15,314 [main] INFO  algorithms.LeaderChoosePolicyFactory (LeaderChoosePolicyFactory.java:getPolicy(57)) - Create leader choose policy of type org.apache.hadoop.hdds.scm.pipeline.leader.choose.algorithms.MinLeaderCountChoosePolicy
2024-01-02 20:32:15,314 [main] INFO  algorithms.ContainerPlacementPolicyFactory (ContainerPlacementPolicyFactory.java:getPolicyInternal(86)) - Create container placement policy of type org.apache.hadoop.hdds.scm.container.placement.algorithms.SCMContainerPlacementRackScatter
2024-01-02 20:32:15,315 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service BackgroundPipelineCreator.
2024-01-02 20:32:15,315 [main] INFO  pipeline.BackgroundPipelineCreator (BackgroundPipelineCreator.java:start(127)) - Starting RatisPipelineUtilsThread.
2024-01-02 20:32:15,315 [main] INFO  BackgroundPipelineScrubber (BackgroundSCMService.java:start(68)) - Starting BackgroundPipelineScrubber Service.
2024-01-02 20:32:15,315 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service BackgroundPipelineScrubber.
2024-01-02 20:32:15,316 [main] INFO  algorithms.LeaderChoosePolicyFactory (LeaderChoosePolicyFactory.java:getPolicy(57)) - Create leader choose policy of type org.apache.hadoop.hdds.scm.pipeline.leader.choose.algorithms.MinLeaderCountChoosePolicy
2024-01-02 20:32:15,316 [main] INFO  safemode.ContainerSafeModeRule (ContainerSafeModeRule.java:<init>(91)) - containers with one replica threshold count 0
2024-01-02 20:32:15,317 [main] INFO  safemode.HealthyPipelineSafeModeRule (HealthyPipelineSafeModeRule.java:initializeRule(176)) - Total pipeline count is 0, healthy pipeline threshold count is 0
2024-01-02 20:32:15,317 [main] INFO  safemode.OneReplicaPipelineSafeModeRule (OneReplicaPipelineSafeModeRule.java:initializeRule(193)) - Total pipeline count is 0, pipeline's with at least one datanode reported threshold count is 0
2024-01-02 20:32:15,317 [main] WARN  server.ServerUtils (ServerUtils.java:getScmDbDir(155)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:15,319 [main] WARN  server.ServerUtils (ServerUtils.java:getScmDbDir(155)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:15,319 [main] INFO  ha.SCMHANodeDetails (SCMHANodeDetails.java:loadSCMHAConfig(207)) - ServiceID for StorageContainerManager is null
2024-01-02 20:32:15,319 [main] INFO  ha.SCMHANodeDetails (SCMHANodeDetails.java:loadSCMHAConfig(212)) - ozone.scm.default.service.id is not defined, falling back to ozone.scm.service.ids to find serviceID for StorageContainerManager if it is HA enabled cluster
2024-01-02 20:32:15,320 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchemaFromFile(129)) - Loading schema from [file:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/classes/network-topology-default.xml]
2024-01-02 20:32:15,320 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchema(176)) - Loading network topology layer schema file
2024-01-02 20:32:15,322 [main] INFO  upgrade.AbstractLayoutVersionManager (AbstractLayoutVersionManager.java:init(83)) - Initializing Layout version manager with metadata layout = HADOOP_PRC_PORTS_IN_DATANODEDETAILS (version = 7), software layout = HADOOP_PRC_PORTS_IN_DATANODEDETAILS (version = 7)
2024-01-02 20:32:15,323 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToSequenceId(370)) - upgrade localId to 113750153625600000
2024-01-02 20:32:15,326 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToSequenceId(380)) - upgrade delTxnId to 0
2024-01-02 20:32:15,326 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToSequenceId(397)) - upgrade containerId to 0
2024-01-02 20:32:15,327 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToCertificateSequenceId(444)) - upgrade CertificateId to 2
2024-01-02 20:32:15,327 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:<init>(241)) - Init the HA SequenceIdGenerator.
2024-01-02 20:32:15,327 [main] INFO  algorithms.ContainerPlacementPolicyFactory (ContainerPlacementPolicyFactory.java:getPolicyInternal(86)) - Create container placement policy of type org.apache.hadoop.hdds.scm.container.placement.algorithms.SCMContainerPlacementRackAware
2024-01-02 20:32:15,327 [main] INFO  algorithms.ContainerPlacementPolicyFactory (ContainerPlacementPolicyFactory.java:getPolicyInternal(86)) - Create container placement policy of type org.apache.hadoop.hdds.scm.container.placement.algorithms.SCMContainerPlacementRackScatter
2024-01-02 20:32:15,328 [main] INFO  ExpiredContainerReplicaOpScrubber (BackgroundSCMService.java:start(68)) - Starting ExpiredContainerReplicaOpScrubber Service.
2024-01-02 20:32:15,328 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service ExpiredContainerReplicaOpScrubber.
2024-01-02 20:32:15,328 [main] INFO  algorithms.PipelineChoosePolicyFactory (PipelineChoosePolicyFactory.java:createPipelineChoosePolicyFromClass(78)) - Create pipeline choose policy of type org.apache.hadoop.hdds.scm.pipeline.choose.algorithms.RandomPipelineChoosePolicy
2024-01-02 20:32:15,328 [main] INFO  algorithms.PipelineChoosePolicyFactory (PipelineChoosePolicyFactory.java:createPipelineChoosePolicyFromClass(78)) - Create pipeline choose policy of type org.apache.hadoop.hdds.scm.pipeline.choose.algorithms.RandomPipelineChoosePolicy
2024-01-02 20:32:15,329 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service SCMBlockDeletingService.
2024-01-02 20:32:15,330 [main] INFO  replication.ReplicationManager (ReplicationManager.java:start(294)) - Starting Replication Monitor Thread.
2024-01-02 20:32:15,333 [ReplicationMonitor] INFO  replication.ReplicationManager (ReplicationManager.java:processAll(369)) - Replication Manager is not ready to run until 300000ms after safemode exit
2024-01-02 20:32:15,333 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service ReplicationManager.
2024-01-02 20:32:15,335 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:<init>(440)) - SCM start with adminUsers: [runner]
2024-01-02 20:32:15,336 [main] INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(90)) - Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
2024-01-02 20:32:15,336 [main] INFO  ipc.Server (Server.java:<init>(1287)) - Listener at 0.0.0.0:46465
2024-01-02 20:32:15,337 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:run(1323)) - Starting Socket Reader #1 for port 0
2024-01-02 20:32:15,339 [main] INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(90)) - Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
2024-01-02 20:32:15,339 [main] INFO  ipc.Server (Server.java:<init>(1287)) - Listener at 0.0.0.0:36935
2024-01-02 20:32:15,340 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:run(1323)) - Starting Socket Reader #1 for port 0
2024-01-02 20:32:15,341 [main] INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(90)) - Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
2024-01-02 20:32:15,341 [main] INFO  ipc.Server (Server.java:<init>(1287)) - Listener at 0.0.0.0:41813
2024-01-02 20:32:15,341 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:run(1323)) - Starting Socket Reader #1 for port 0
2024-01-02 20:32:15,349 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service ContainerBalancer.
2024-01-02 20:32:15,350 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:<init>(453)) - 
Container Balancer status:
Key                            Value
Running                        false
Container Balancer Configuration values:
Key                                                Value
Threshold                                          10
Max Datanodes to Involve per Iteration(percent)    20
Max Size to Move per Iteration                     500GB
Max Size Entering Target per Iteration             26GB
Max Size Leaving Source per Iteration              26GB
Number of Iterations                               10
Time Limit for Single Container's Movement         65min
Time Limit for Single Container's Replication      50min
Interval between each Iteration                    70min
Whether to Enable Network Topology                 false
Whether to Trigger Refresh Datanode Usage Info     false
Container IDs to Exclude from Balancing            None
Datanodes Specified to be Balanced                 None
Datanodes Excluded from Balancing                  None

2024-01-02 20:32:15,351 [main] INFO  ha.SCMContext (SCMContext.java:updateSafeModeStatus(230)) - Update SafeModeStatus from SafeModeStatus{safeModeStatus=false, preCheckPassed=true} to SafeModeStatus{safeModeStatus=false, preCheckPassed=true}.
2024-01-02 20:32:15,353 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=6d4632d7-9a18-4fba-9184-20078a693ad8 to datanode:211923fa-535e-4835-b996-0586fd85c066
2024-01-02 20:32:15,353 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=6d4632d7-9a18-4fba-9184-20078a693ad8 to datanode:3cb75d97-6a50-4b68-bb53-9024be2a5e67
2024-01-02 20:32:15,353 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=6d4632d7-9a18-4fba-9184-20078a693ad8 to datanode:a850aea1-f036-4c53-8fe1-6d3d9d18960e
2024-01-02 20:32:15,356 [pool-127-thread-1] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:getNextId(145)) - Allocate a batch for containerId, change lastId from 0 to 1000.
2024-01-02 20:32:15,357 [pool-127-thread-1] WARN  ha.SequenceIdGenerator (SequenceIdGenerator.java:allocateBatch(258)) - Failed to allocate a batch for localId, expected lastId is 0, actual lastId is 113750153625600000.
2024-01-02 20:32:15,358 [pool-127-thread-1] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:getNextId(145)) - Allocate a batch for localId, change lastId from 113750153625600000 to 113750153625601000.
2024-01-02 20:32:15,361 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1654)) - Container Balancer is not running.
2024-01-02 20:32:15,362 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stopReplicationManager(1787)) - Stopping Replication Manager Service.
2024-01-02 20:32:15,362 [main] INFO  replication.ReplicationManager (ReplicationManager.java:stop(326)) - Stopping Replication Monitor Thread.
2024-01-02 20:32:15,362 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1663)) - Stopping the Datanode Admin Monitor.
2024-01-02 20:32:15,362 [ReplicationMonitor] INFO  replication.ReplicationManager (ReplicationManager.java:run(933)) - Replication Monitor Thread is stopped
2024-01-02 20:32:15,362 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1670)) - Stopping datanode service RPC server
2024-01-02 20:32:15,362 [main] INFO  server.SCMDatanodeProtocolServer (SCMDatanodeProtocolServer.java:stop(424)) - Stopping the RPC server for DataNodes
2024-01-02 20:32:15,363 [main] INFO  ipc.Server (Server.java:stop(3523)) - Stopping server on 46465
2024-01-02 20:32:15,362 [OverReplicatedProcessor] WARN  replication.UnhealthyReplicationProcessor (UnhealthyReplicationProcessor.java:run(180)) - OverReplicatedProcessor interrupted. Exiting...
2024-01-02 20:32:15,362 [UnderReplicatedProcessor] WARN  replication.UnhealthyReplicationProcessor (UnhealthyReplicationProcessor.java:run(180)) - UnderReplicatedProcessor interrupted. Exiting...
2024-01-02 20:32:15,363 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1678)) - Stopping block service RPC server
2024-01-02 20:32:15,363 [main] INFO  server.SCMBlockProtocolServer (SCMBlockProtocolServer.java:stop(168)) - Stopping the RPC server for Block Protocol
2024-01-02 20:32:15,364 [main] INFO  ipc.Server (Server.java:stop(3523)) - Stopping server on 36935
2024-01-02 20:32:15,364 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1685)) - Stopping the StorageContainerLocationProtocol RPC server
2024-01-02 20:32:15,364 [main] INFO  server.SCMClientProtocolServer (SCMClientProtocolServer.java:stop(210)) - Stopping the RPC server for Client Protocol
2024-01-02 20:32:15,364 [main] INFO  ipc.Server (Server.java:stop(3523)) - Stopping server on 41813
2024-01-02 20:32:15,365 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1692)) - Stopping Storage Container Manager HTTP server.
2024-01-02 20:32:15,365 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1700)) - Stopping SCM LayoutVersionManager Service.
2024-01-02 20:32:15,365 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1712)) - Stopping Block Manager Service.
2024-01-02 20:32:15,365 [main] INFO  utils.BackgroundService (BackgroundService.java:shutdown(160)) - Shutting down service SCMBlockDeletingService
2024-01-02 20:32:15,365 [main] INFO  utils.BackgroundService (BackgroundService.java:shutdown(160)) - Shutting down service SCMBlockDeletingService
2024-01-02 20:32:15,366 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1732)) - Stopping SCM Event Queue.
2024-01-02 20:32:15,366 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1743)) - Stopping SCM HA services.
2024-01-02 20:32:15,367 [main] INFO  pipeline.BackgroundPipelineCreator (BackgroundPipelineCreator.java:stop(152)) - Stopping RatisPipelineUtilsThread.
2024-01-02 20:32:15,367 [RatisPipelineUtilsThread-0] WARN  pipeline.BackgroundPipelineCreator (BackgroundPipelineCreator.java:run(183)) - RatisPipelineUtilsThread is interrupted.
2024-01-02 20:32:15,367 [main] INFO  BackgroundPipelineScrubber (BackgroundSCMService.java:stop(131)) - Stopping BackgroundPipelineScrubber Service.
2024-01-02 20:32:15,367 [BackgroundPipelineScrubber] WARN  BackgroundPipelineScrubber (BackgroundSCMService.java:run(115)) - BackgroundPipelineScrubber is interrupted, exit
2024-01-02 20:32:15,368 [ExpiredContainerReplicaOpScrubber] WARN  ExpiredContainerReplicaOpScrubber (BackgroundSCMService.java:run(115)) - ExpiredContainerReplicaOpScrubber is interrupted, exit
2024-01-02 20:32:15,368 [main] INFO  ExpiredContainerReplicaOpScrubber (BackgroundSCMService.java:stop(131)) - Stopping ExpiredContainerReplicaOpScrubber Service.
2024-01-02 20:32:15,368 [main] INFO  utils.BackgroundService (BackgroundService.java:shutdown(160)) - Shutting down service SCMBlockDeletingService
2024-01-02 20:32:15,368 [main] INFO  replication.ReplicationManager (ReplicationManager.java:stop(336)) - Replication Monitor Thread is not running.
2024-01-02 20:32:15,368 [main] WARN  balancer.ContainerBalancer (ContainerBalancer.java:stop(327)) - Cannot stop Container Balancer because it's not running or stopping
2024-01-02 20:32:15,369 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1778)) - Stopping SCM MetadataStore.
2024-01-02 20:32:15,369 [test-leaseManagerLeaseManager#LeaseMonitor] WARN  lease.LeaseManager (LeaseManager.java:run(287)) - Lease manager is interrupted. Shutting down...
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedNanos(AbstractQueuedSynchronizer.java:1039)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.tryAcquireSharedNanos(AbstractQueuedSynchronizer.java:1328)
	at java.util.concurrent.Semaphore.tryAcquire(Semaphore.java:409)
	at org.apache.hadoop.ozone.lease.LeaseManager$LeaseMonitor.run(LeaseManager.java:285)
	at java.lang.Thread.run(Thread.java:750)
]]></system-out>
  </testcase>
  <testcase name="testAllocateBlockInParallel" classname="org.apache.hadoop.hdds.scm.block.TestBlockManager" time="0.283">
    <system-out><![CDATA[2024-01-02 20:32:15,388 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchemaFromFile(129)) - Loading schema from [file:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/classes/network-topology-default.xml]
2024-01-02 20:32:15,388 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchema(176)) - Loading network topology layer schema file
2024-01-02 20:32:15,397 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchemaFromFile(129)) - Loading schema from [file:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/classes/network-topology-default.xml]
2024-01-02 20:32:15,397 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchema(176)) - Loading network topology layer schema file
2024-01-02 20:32:15,399 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/1488b8f3-5c66-4470-a192-e8c7a2d21851
2024-01-02 20:32:15,399 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/096265cb-7e73-4678-94f5-1ebbca8bd9fa
2024-01-02 20:32:15,399 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/eb9a02b5-18c8-43e2-9e4b-6251019872df
2024-01-02 20:32:15,399 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/076e1aec-dc8c-4e47-8066-05a6155b98ec
2024-01-02 20:32:15,400 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/d990007b-2d38-43d7-be22-9a6c04512428
2024-01-02 20:32:15,400 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/d4a3f3e1-3624-47a9-a1f2-97f3ea035fac
2024-01-02 20:32:15,400 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/3a8a8967-be6c-4a31-b8e4-1f10471aa8dd
2024-01-02 20:32:15,400 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/6fd0049d-74ab-4019-909b-f4a8e3ef74c3
2024-01-02 20:32:15,401 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/63635f69-572b-4060-a9ff-81ac158e2627
2024-01-02 20:32:15,401 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/0bb56751-230a-4217-b47a-52598adaaad7
2024-01-02 20:32:15,401 [main] WARN  utils.HAUtils (HAUtils.java:getMetaDir(339)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:15,401 [main] WARN  db.DBStoreBuilder (DBStoreBuilder.java:applyDBDefinition(167)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:15,465 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:<init>(241)) - Init the HA SequenceIdGenerator.
2024-01-02 20:32:15,465 [main] INFO  pipeline.PipelineStateManagerImpl (PipelineStateManagerImpl.java:initialize(78)) - No pipeline exists in current db
2024-01-02 20:32:15,465 [main] INFO  algorithms.LeaderChoosePolicyFactory (LeaderChoosePolicyFactory.java:getPolicy(57)) - Create leader choose policy of type org.apache.hadoop.hdds.scm.pipeline.leader.choose.algorithms.MinLeaderCountChoosePolicy
2024-01-02 20:32:15,466 [main] INFO  algorithms.ContainerPlacementPolicyFactory (ContainerPlacementPolicyFactory.java:getPolicyInternal(86)) - Create container placement policy of type org.apache.hadoop.hdds.scm.container.placement.algorithms.SCMContainerPlacementRackScatter
2024-01-02 20:32:15,466 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service BackgroundPipelineCreator.
2024-01-02 20:32:15,466 [main] INFO  pipeline.BackgroundPipelineCreator (BackgroundPipelineCreator.java:start(127)) - Starting RatisPipelineUtilsThread.
2024-01-02 20:32:15,466 [main] INFO  BackgroundPipelineScrubber (BackgroundSCMService.java:start(68)) - Starting BackgroundPipelineScrubber Service.
2024-01-02 20:32:15,467 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service BackgroundPipelineScrubber.
2024-01-02 20:32:15,467 [main] INFO  algorithms.LeaderChoosePolicyFactory (LeaderChoosePolicyFactory.java:getPolicy(57)) - Create leader choose policy of type org.apache.hadoop.hdds.scm.pipeline.leader.choose.algorithms.MinLeaderCountChoosePolicy
2024-01-02 20:32:15,468 [main] INFO  safemode.ContainerSafeModeRule (ContainerSafeModeRule.java:<init>(91)) - containers with one replica threshold count 0
2024-01-02 20:32:15,468 [main] INFO  safemode.HealthyPipelineSafeModeRule (HealthyPipelineSafeModeRule.java:initializeRule(176)) - Total pipeline count is 0, healthy pipeline threshold count is 0
2024-01-02 20:32:15,468 [main] INFO  safemode.OneReplicaPipelineSafeModeRule (OneReplicaPipelineSafeModeRule.java:initializeRule(193)) - Total pipeline count is 0, pipeline's with at least one datanode reported threshold count is 0
2024-01-02 20:32:15,469 [main] WARN  server.ServerUtils (ServerUtils.java:getScmDbDir(155)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:15,470 [main] WARN  server.ServerUtils (ServerUtils.java:getScmDbDir(155)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:15,470 [main] INFO  ha.SCMHANodeDetails (SCMHANodeDetails.java:loadSCMHAConfig(207)) - ServiceID for StorageContainerManager is null
2024-01-02 20:32:15,470 [main] INFO  ha.SCMHANodeDetails (SCMHANodeDetails.java:loadSCMHAConfig(212)) - ozone.scm.default.service.id is not defined, falling back to ozone.scm.service.ids to find serviceID for StorageContainerManager if it is HA enabled cluster
2024-01-02 20:32:15,471 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchemaFromFile(129)) - Loading schema from [file:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/classes/network-topology-default.xml]
2024-01-02 20:32:15,471 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchema(176)) - Loading network topology layer schema file
2024-01-02 20:32:15,473 [main] INFO  upgrade.AbstractLayoutVersionManager (AbstractLayoutVersionManager.java:init(83)) - Initializing Layout version manager with metadata layout = HADOOP_PRC_PORTS_IN_DATANODEDETAILS (version = 7), software layout = HADOOP_PRC_PORTS_IN_DATANODEDETAILS (version = 7)
2024-01-02 20:32:15,474 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToSequenceId(370)) - upgrade localId to 113750153625600000
2024-01-02 20:32:15,475 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToSequenceId(380)) - upgrade delTxnId to 0
2024-01-02 20:32:15,475 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToSequenceId(397)) - upgrade containerId to 0
2024-01-02 20:32:15,475 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToCertificateSequenceId(444)) - upgrade CertificateId to 2
2024-01-02 20:32:15,476 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:<init>(241)) - Init the HA SequenceIdGenerator.
2024-01-02 20:32:15,476 [main] INFO  algorithms.ContainerPlacementPolicyFactory (ContainerPlacementPolicyFactory.java:getPolicyInternal(86)) - Create container placement policy of type org.apache.hadoop.hdds.scm.container.placement.algorithms.SCMContainerPlacementRackAware
2024-01-02 20:32:15,476 [main] INFO  algorithms.ContainerPlacementPolicyFactory (ContainerPlacementPolicyFactory.java:getPolicyInternal(86)) - Create container placement policy of type org.apache.hadoop.hdds.scm.container.placement.algorithms.SCMContainerPlacementRackScatter
2024-01-02 20:32:15,476 [main] INFO  ExpiredContainerReplicaOpScrubber (BackgroundSCMService.java:start(68)) - Starting ExpiredContainerReplicaOpScrubber Service.
2024-01-02 20:32:15,477 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service ExpiredContainerReplicaOpScrubber.
2024-01-02 20:32:15,477 [main] INFO  algorithms.PipelineChoosePolicyFactory (PipelineChoosePolicyFactory.java:createPipelineChoosePolicyFromClass(78)) - Create pipeline choose policy of type org.apache.hadoop.hdds.scm.pipeline.choose.algorithms.RandomPipelineChoosePolicy
2024-01-02 20:32:15,477 [main] INFO  algorithms.PipelineChoosePolicyFactory (PipelineChoosePolicyFactory.java:createPipelineChoosePolicyFromClass(78)) - Create pipeline choose policy of type org.apache.hadoop.hdds.scm.pipeline.choose.algorithms.RandomPipelineChoosePolicy
2024-01-02 20:32:15,478 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service SCMBlockDeletingService.
2024-01-02 20:32:15,479 [main] INFO  replication.ReplicationManager (ReplicationManager.java:start(294)) - Starting Replication Monitor Thread.
2024-01-02 20:32:15,481 [ReplicationMonitor] INFO  replication.ReplicationManager (ReplicationManager.java:processAll(369)) - Replication Manager is not ready to run until 300000ms after safemode exit
2024-01-02 20:32:15,481 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service ReplicationManager.
2024-01-02 20:32:15,485 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:<init>(440)) - SCM start with adminUsers: [runner]
2024-01-02 20:32:15,485 [main] INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(90)) - Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
2024-01-02 20:32:15,485 [main] INFO  ipc.Server (Server.java:<init>(1287)) - Listener at 0.0.0.0:37091
2024-01-02 20:32:15,486 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:run(1323)) - Starting Socket Reader #1 for port 0
2024-01-02 20:32:15,487 [main] INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(90)) - Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
2024-01-02 20:32:15,487 [main] INFO  ipc.Server (Server.java:<init>(1287)) - Listener at 0.0.0.0:37321
2024-01-02 20:32:15,487 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:run(1323)) - Starting Socket Reader #1 for port 0
2024-01-02 20:32:15,488 [main] INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(90)) - Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
2024-01-02 20:32:15,488 [main] INFO  ipc.Server (Server.java:<init>(1287)) - Listener at 0.0.0.0:46805
2024-01-02 20:32:15,489 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:run(1323)) - Starting Socket Reader #1 for port 0
2024-01-02 20:32:15,492 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service ContainerBalancer.
2024-01-02 20:32:15,493 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:<init>(453)) - 
Container Balancer status:
Key                            Value
Running                        false
Container Balancer Configuration values:
Key                                                Value
Threshold                                          10
Max Datanodes to Involve per Iteration(percent)    20
Max Size to Move per Iteration                     500GB
Max Size Entering Target per Iteration             26GB
Max Size Leaving Source per Iteration              26GB
Number of Iterations                               10
Time Limit for Single Container's Movement         65min
Time Limit for Single Container's Replication      50min
Interval between each Iteration                    70min
Whether to Enable Network Topology                 false
Whether to Trigger Refresh Datanode Usage Info     false
Container IDs to Exclude from Balancing            None
Datanodes Specified to be Balanced                 None
Datanodes Excluded from Balancing                  None

2024-01-02 20:32:15,493 [main] INFO  ha.SCMContext (SCMContext.java:updateSafeModeStatus(230)) - Update SafeModeStatus from SafeModeStatus{safeModeStatus=false, preCheckPassed=true} to SafeModeStatus{safeModeStatus=false, preCheckPassed=true}.
2024-01-02 20:32:15,500 [pool-167-thread-1] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=489c4e09-a2d7-421f-acce-faeffdf71cb8 to datanode:eb9a02b5-18c8-43e2-9e4b-6251019872df
2024-01-02 20:32:15,505 [pool-167-thread-1] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=489c4e09-a2d7-421f-acce-faeffdf71cb8 to datanode:096265cb-7e73-4678-94f5-1ebbca8bd9fa
2024-01-02 20:32:15,505 [pool-167-thread-1] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=489c4e09-a2d7-421f-acce-faeffdf71cb8 to datanode:6fd0049d-74ab-4019-909b-f4a8e3ef74c3
2024-01-02 20:32:15,508 [pool-168-thread-1] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=b40cb4e5-01be-4c47-9111-ebd197d69372 to datanode:076e1aec-dc8c-4e47-8066-05a6155b98ec
2024-01-02 20:32:15,508 [pool-168-thread-1] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=b40cb4e5-01be-4c47-9111-ebd197d69372 to datanode:096265cb-7e73-4678-94f5-1ebbca8bd9fa
2024-01-02 20:32:15,508 [pool-168-thread-1] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=b40cb4e5-01be-4c47-9111-ebd197d69372 to datanode:d4a3f3e1-3624-47a9-a1f2-97f3ea035fac
2024-01-02 20:32:15,510 [pool-169-thread-1] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=c82abf1c-0244-4a8a-a2ff-27c707bb2d1d to datanode:d990007b-2d38-43d7-be22-9a6c04512428
2024-01-02 20:32:15,510 [pool-169-thread-1] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=c82abf1c-0244-4a8a-a2ff-27c707bb2d1d to datanode:6fd0049d-74ab-4019-909b-f4a8e3ef74c3
2024-01-02 20:32:15,510 [pool-169-thread-1] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=c82abf1c-0244-4a8a-a2ff-27c707bb2d1d to datanode:eb9a02b5-18c8-43e2-9e4b-6251019872df
2024-01-02 20:32:15,512 [pool-170-thread-1] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=c80e3247-b8da-47ac-8656-026f132a4b23 to datanode:076e1aec-dc8c-4e47-8066-05a6155b98ec
2024-01-02 20:32:15,512 [pool-170-thread-1] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=c80e3247-b8da-47ac-8656-026f132a4b23 to datanode:1488b8f3-5c66-4470-a192-e8c7a2d21851
2024-01-02 20:32:15,512 [pool-170-thread-1] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=c80e3247-b8da-47ac-8656-026f132a4b23 to datanode:d4a3f3e1-3624-47a9-a1f2-97f3ea035fac
2024-01-02 20:32:15,515 [pool-175-thread-1] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=9bba70fa-6bae-4289-b33d-2ed923cfec89 to datanode:d990007b-2d38-43d7-be22-9a6c04512428
2024-01-02 20:32:15,515 [pool-175-thread-1] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=9bba70fa-6bae-4289-b33d-2ed923cfec89 to datanode:3a8a8967-be6c-4a31-b8e4-1f10471aa8dd
2024-01-02 20:32:15,515 [pool-175-thread-1] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=9bba70fa-6bae-4289-b33d-2ed923cfec89 to datanode:1488b8f3-5c66-4470-a192-e8c7a2d21851
2024-01-02 20:32:15,517 [pool-176-thread-1] WARN  pipeline.WritableRatisContainerProvider (WritableRatisContainerProvider.java:getContainer(122)) - Pipeline creation failed for repConfig RATIS/THREE Datanodes may be used up. Try to see if any pipeline is in ALLOCATED state, and then will wait for it to be OPEN
org.apache.hadoop.hdds.scm.exceptions.SCMException: Pipeline creation failed due to no sufficient healthy datanodes. Required 3. Found 1. Excluded 7.
	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.filterViableNodes(PipelinePlacementPolicy.java:167)
	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.chooseDatanodesInternal(PipelinePlacementPolicy.java:256)
	at org.apache.hadoop.hdds.scm.SCMCommonPlacementPolicy.chooseDatanodes(SCMCommonPlacementPolicy.java:209)
	at org.apache.hadoop.hdds.scm.SCMCommonPlacementPolicy.chooseDatanodes(SCMCommonPlacementPolicy.java:140)
	at org.apache.hadoop.hdds.scm.pipeline.RatisPipelineProvider.create(RatisPipelineProvider.java:177)
	at org.apache.hadoop.hdds.scm.pipeline.RatisPipelineProvider.create(RatisPipelineProvider.java:57)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineFactory.create(PipelineFactory.java:89)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineManagerImpl.createPipeline(PipelineManagerImpl.java:255)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineManagerImpl.createPipeline(PipelineManagerImpl.java:241)
	at org.apache.hadoop.hdds.scm.pipeline.WritableRatisContainerProvider.getContainer(WritableRatisContainerProvider.java:116)
	at org.apache.hadoop.hdds.scm.pipeline.WritableContainerFactory.getContainer(WritableContainerFactory.java:74)
	at org.apache.hadoop.hdds.scm.block.BlockManagerImpl.allocateBlock(BlockManagerImpl.java:166)
	at org.apache.hadoop.hdds.scm.block.TestBlockManager.lambda$testAllocateBlockInParallel$0(TestBlockManager.java:262)
	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1604)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-01-02 20:32:15,519 [pool-178-thread-1] WARN  pipeline.WritableRatisContainerProvider (WritableRatisContainerProvider.java:getContainer(122)) - Pipeline creation failed for repConfig RATIS/THREE Datanodes may be used up. Try to see if any pipeline is in ALLOCATED state, and then will wait for it to be OPEN
org.apache.hadoop.hdds.scm.exceptions.SCMException: Pipeline creation failed due to no sufficient healthy datanodes. Required 3. Found 1. Excluded 7.
	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.filterViableNodes(PipelinePlacementPolicy.java:167)
	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.chooseDatanodesInternal(PipelinePlacementPolicy.java:256)
	at org.apache.hadoop.hdds.scm.SCMCommonPlacementPolicy.chooseDatanodes(SCMCommonPlacementPolicy.java:209)
	at org.apache.hadoop.hdds.scm.SCMCommonPlacementPolicy.chooseDatanodes(SCMCommonPlacementPolicy.java:140)
	at org.apache.hadoop.hdds.scm.pipeline.RatisPipelineProvider.create(RatisPipelineProvider.java:177)
	at org.apache.hadoop.hdds.scm.pipeline.RatisPipelineProvider.create(RatisPipelineProvider.java:57)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineFactory.create(PipelineFactory.java:89)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineManagerImpl.createPipeline(PipelineManagerImpl.java:255)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineManagerImpl.createPipeline(PipelineManagerImpl.java:241)
	at org.apache.hadoop.hdds.scm.pipeline.WritableRatisContainerProvider.getContainer(WritableRatisContainerProvider.java:116)
	at org.apache.hadoop.hdds.scm.pipeline.WritableContainerFactory.getContainer(WritableContainerFactory.java:74)
	at org.apache.hadoop.hdds.scm.block.BlockManagerImpl.allocateBlock(BlockManagerImpl.java:166)
	at org.apache.hadoop.hdds.scm.block.TestBlockManager.lambda$testAllocateBlockInParallel$0(TestBlockManager.java:262)
	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1604)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-01-02 20:32:15,520 [pool-179-thread-1] WARN  pipeline.WritableRatisContainerProvider (WritableRatisContainerProvider.java:getContainer(122)) - Pipeline creation failed for repConfig RATIS/THREE Datanodes may be used up. Try to see if any pipeline is in ALLOCATED state, and then will wait for it to be OPEN
org.apache.hadoop.hdds.scm.exceptions.SCMException: Pipeline creation failed due to no sufficient healthy datanodes. Required 3. Found 1. Excluded 7.
	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.filterViableNodes(PipelinePlacementPolicy.java:167)
	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.chooseDatanodesInternal(PipelinePlacementPolicy.java:256)
	at org.apache.hadoop.hdds.scm.SCMCommonPlacementPolicy.chooseDatanodes(SCMCommonPlacementPolicy.java:209)
	at org.apache.hadoop.hdds.scm.SCMCommonPlacementPolicy.chooseDatanodes(SCMCommonPlacementPolicy.java:140)
	at org.apache.hadoop.hdds.scm.pipeline.RatisPipelineProvider.create(RatisPipelineProvider.java:177)
	at org.apache.hadoop.hdds.scm.pipeline.RatisPipelineProvider.create(RatisPipelineProvider.java:57)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineFactory.create(PipelineFactory.java:89)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineManagerImpl.createPipeline(PipelineManagerImpl.java:255)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineManagerImpl.createPipeline(PipelineManagerImpl.java:241)
	at org.apache.hadoop.hdds.scm.pipeline.WritableRatisContainerProvider.getContainer(WritableRatisContainerProvider.java:116)
	at org.apache.hadoop.hdds.scm.pipeline.WritableContainerFactory.getContainer(WritableContainerFactory.java:74)
	at org.apache.hadoop.hdds.scm.block.BlockManagerImpl.allocateBlock(BlockManagerImpl.java:166)
	at org.apache.hadoop.hdds.scm.block.TestBlockManager.lambda$testAllocateBlockInParallel$0(TestBlockManager.java:262)
	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1604)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-01-02 20:32:15,522 [pool-180-thread-1] WARN  pipeline.WritableRatisContainerProvider (WritableRatisContainerProvider.java:getContainer(122)) - Pipeline creation failed for repConfig RATIS/THREE Datanodes may be used up. Try to see if any pipeline is in ALLOCATED state, and then will wait for it to be OPEN
org.apache.hadoop.hdds.scm.exceptions.SCMException: Pipeline creation failed due to no sufficient healthy datanodes. Required 3. Found 1. Excluded 7.
	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.filterViableNodes(PipelinePlacementPolicy.java:167)
	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.chooseDatanodesInternal(PipelinePlacementPolicy.java:256)
	at org.apache.hadoop.hdds.scm.SCMCommonPlacementPolicy.chooseDatanodes(SCMCommonPlacementPolicy.java:209)
	at org.apache.hadoop.hdds.scm.SCMCommonPlacementPolicy.chooseDatanodes(SCMCommonPlacementPolicy.java:140)
	at org.apache.hadoop.hdds.scm.pipeline.RatisPipelineProvider.create(RatisPipelineProvider.java:177)
	at org.apache.hadoop.hdds.scm.pipeline.RatisPipelineProvider.create(RatisPipelineProvider.java:57)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineFactory.create(PipelineFactory.java:89)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineManagerImpl.createPipeline(PipelineManagerImpl.java:255)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineManagerImpl.createPipeline(PipelineManagerImpl.java:241)
	at org.apache.hadoop.hdds.scm.pipeline.WritableRatisContainerProvider.getContainer(WritableRatisContainerProvider.java:116)
	at org.apache.hadoop.hdds.scm.pipeline.WritableContainerFactory.getContainer(WritableContainerFactory.java:74)
	at org.apache.hadoop.hdds.scm.block.BlockManagerImpl.allocateBlock(BlockManagerImpl.java:166)
	at org.apache.hadoop.hdds.scm.block.TestBlockManager.lambda$testAllocateBlockInParallel$0(TestBlockManager.java:262)
	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1604)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-01-02 20:32:15,524 [pool-171-thread-1] WARN  pipeline.WritableRatisContainerProvider (WritableRatisContainerProvider.java:getContainer(122)) - Pipeline creation failed for repConfig RATIS/THREE Datanodes may be used up. Try to see if any pipeline is in ALLOCATED state, and then will wait for it to be OPEN
org.apache.hadoop.hdds.scm.exceptions.SCMException: Pipeline creation failed due to no sufficient healthy datanodes. Required 3. Found 1. Excluded 7.
	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.filterViableNodes(PipelinePlacementPolicy.java:167)
	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.chooseDatanodesInternal(PipelinePlacementPolicy.java:256)
	at org.apache.hadoop.hdds.scm.SCMCommonPlacementPolicy.chooseDatanodes(SCMCommonPlacementPolicy.java:209)
	at org.apache.hadoop.hdds.scm.SCMCommonPlacementPolicy.chooseDatanodes(SCMCommonPlacementPolicy.java:140)
	at org.apache.hadoop.hdds.scm.pipeline.RatisPipelineProvider.create(RatisPipelineProvider.java:177)
	at org.apache.hadoop.hdds.scm.pipeline.RatisPipelineProvider.create(RatisPipelineProvider.java:57)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineFactory.create(PipelineFactory.java:89)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineManagerImpl.createPipeline(PipelineManagerImpl.java:255)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineManagerImpl.createPipeline(PipelineManagerImpl.java:241)
	at org.apache.hadoop.hdds.scm.pipeline.WritableRatisContainerProvider.getContainer(WritableRatisContainerProvider.java:116)
	at org.apache.hadoop.hdds.scm.pipeline.WritableContainerFactory.getContainer(WritableContainerFactory.java:74)
	at org.apache.hadoop.hdds.scm.block.BlockManagerImpl.allocateBlock(BlockManagerImpl.java:166)
	at org.apache.hadoop.hdds.scm.block.TestBlockManager.lambda$testAllocateBlockInParallel$0(TestBlockManager.java:262)
	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1604)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-01-02 20:32:15,525 [pool-177-thread-1] WARN  pipeline.WritableRatisContainerProvider (WritableRatisContainerProvider.java:getContainer(122)) - Pipeline creation failed for repConfig RATIS/THREE Datanodes may be used up. Try to see if any pipeline is in ALLOCATED state, and then will wait for it to be OPEN
org.apache.hadoop.hdds.scm.exceptions.SCMException: Pipeline creation failed due to no sufficient healthy datanodes. Required 3. Found 1. Excluded 7.
	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.filterViableNodes(PipelinePlacementPolicy.java:167)
	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.chooseDatanodesInternal(PipelinePlacementPolicy.java:256)
	at org.apache.hadoop.hdds.scm.SCMCommonPlacementPolicy.chooseDatanodes(SCMCommonPlacementPolicy.java:209)
	at org.apache.hadoop.hdds.scm.SCMCommonPlacementPolicy.chooseDatanodes(SCMCommonPlacementPolicy.java:140)
	at org.apache.hadoop.hdds.scm.pipeline.RatisPipelineProvider.create(RatisPipelineProvider.java:177)
	at org.apache.hadoop.hdds.scm.pipeline.RatisPipelineProvider.create(RatisPipelineProvider.java:57)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineFactory.create(PipelineFactory.java:89)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineManagerImpl.createPipeline(PipelineManagerImpl.java:255)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineManagerImpl.createPipeline(PipelineManagerImpl.java:241)
	at org.apache.hadoop.hdds.scm.pipeline.WritableRatisContainerProvider.getContainer(WritableRatisContainerProvider.java:116)
	at org.apache.hadoop.hdds.scm.pipeline.WritableContainerFactory.getContainer(WritableContainerFactory.java:74)
	at org.apache.hadoop.hdds.scm.block.BlockManagerImpl.allocateBlock(BlockManagerImpl.java:166)
	at org.apache.hadoop.hdds.scm.block.TestBlockManager.lambda$testAllocateBlockInParallel$0(TestBlockManager.java:262)
	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1604)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-01-02 20:32:15,527 [pool-172-thread-1] WARN  pipeline.WritableRatisContainerProvider (WritableRatisContainerProvider.java:getContainer(122)) - Pipeline creation failed for repConfig RATIS/THREE Datanodes may be used up. Try to see if any pipeline is in ALLOCATED state, and then will wait for it to be OPEN
org.apache.hadoop.hdds.scm.exceptions.SCMException: Pipeline creation failed due to no sufficient healthy datanodes. Required 3. Found 1. Excluded 7.
	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.filterViableNodes(PipelinePlacementPolicy.java:167)
	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.chooseDatanodesInternal(PipelinePlacementPolicy.java:256)
	at org.apache.hadoop.hdds.scm.SCMCommonPlacementPolicy.chooseDatanodes(SCMCommonPlacementPolicy.java:209)
	at org.apache.hadoop.hdds.scm.SCMCommonPlacementPolicy.chooseDatanodes(SCMCommonPlacementPolicy.java:140)
	at org.apache.hadoop.hdds.scm.pipeline.RatisPipelineProvider.create(RatisPipelineProvider.java:177)
	at org.apache.hadoop.hdds.scm.pipeline.RatisPipelineProvider.create(RatisPipelineProvider.java:57)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineFactory.create(PipelineFactory.java:89)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineManagerImpl.createPipeline(PipelineManagerImpl.java:255)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineManagerImpl.createPipeline(PipelineManagerImpl.java:241)
	at org.apache.hadoop.hdds.scm.pipeline.WritableRatisContainerProvider.getContainer(WritableRatisContainerProvider.java:116)
	at org.apache.hadoop.hdds.scm.pipeline.WritableContainerFactory.getContainer(WritableContainerFactory.java:74)
	at org.apache.hadoop.hdds.scm.block.BlockManagerImpl.allocateBlock(BlockManagerImpl.java:166)
	at org.apache.hadoop.hdds.scm.block.TestBlockManager.lambda$testAllocateBlockInParallel$0(TestBlockManager.java:262)
	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1604)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-01-02 20:32:15,528 [pool-173-thread-1] WARN  pipeline.WritableRatisContainerProvider (WritableRatisContainerProvider.java:getContainer(122)) - Pipeline creation failed for repConfig RATIS/THREE Datanodes may be used up. Try to see if any pipeline is in ALLOCATED state, and then will wait for it to be OPEN
org.apache.hadoop.hdds.scm.exceptions.SCMException: Pipeline creation failed due to no sufficient healthy datanodes. Required 3. Found 1. Excluded 7.
	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.filterViableNodes(PipelinePlacementPolicy.java:167)
	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.chooseDatanodesInternal(PipelinePlacementPolicy.java:256)
	at org.apache.hadoop.hdds.scm.SCMCommonPlacementPolicy.chooseDatanodes(SCMCommonPlacementPolicy.java:209)
	at org.apache.hadoop.hdds.scm.SCMCommonPlacementPolicy.chooseDatanodes(SCMCommonPlacementPolicy.java:140)
	at org.apache.hadoop.hdds.scm.pipeline.RatisPipelineProvider.create(RatisPipelineProvider.java:177)
	at org.apache.hadoop.hdds.scm.pipeline.RatisPipelineProvider.create(RatisPipelineProvider.java:57)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineFactory.create(PipelineFactory.java:89)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineManagerImpl.createPipeline(PipelineManagerImpl.java:255)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineManagerImpl.createPipeline(PipelineManagerImpl.java:241)
	at org.apache.hadoop.hdds.scm.pipeline.WritableRatisContainerProvider.getContainer(WritableRatisContainerProvider.java:116)
	at org.apache.hadoop.hdds.scm.pipeline.WritableContainerFactory.getContainer(WritableContainerFactory.java:74)
	at org.apache.hadoop.hdds.scm.block.BlockManagerImpl.allocateBlock(BlockManagerImpl.java:166)
	at org.apache.hadoop.hdds.scm.block.TestBlockManager.lambda$testAllocateBlockInParallel$0(TestBlockManager.java:262)
	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1604)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-01-02 20:32:15,529 [pool-182-thread-1] WARN  pipeline.WritableRatisContainerProvider (WritableRatisContainerProvider.java:getContainer(122)) - Pipeline creation failed for repConfig RATIS/THREE Datanodes may be used up. Try to see if any pipeline is in ALLOCATED state, and then will wait for it to be OPEN
org.apache.hadoop.hdds.scm.exceptions.SCMException: Pipeline creation failed due to no sufficient healthy datanodes. Required 3. Found 1. Excluded 7.
	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.filterViableNodes(PipelinePlacementPolicy.java:167)
	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.chooseDatanodesInternal(PipelinePlacementPolicy.java:256)
	at org.apache.hadoop.hdds.scm.SCMCommonPlacementPolicy.chooseDatanodes(SCMCommonPlacementPolicy.java:209)
	at org.apache.hadoop.hdds.scm.SCMCommonPlacementPolicy.chooseDatanodes(SCMCommonPlacementPolicy.java:140)
	at org.apache.hadoop.hdds.scm.pipeline.RatisPipelineProvider.create(RatisPipelineProvider.java:177)
	at org.apache.hadoop.hdds.scm.pipeline.RatisPipelineProvider.create(RatisPipelineProvider.java:57)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineFactory.create(PipelineFactory.java:89)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineManagerImpl.createPipeline(PipelineManagerImpl.java:255)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineManagerImpl.createPipeline(PipelineManagerImpl.java:241)
	at org.apache.hadoop.hdds.scm.pipeline.WritableRatisContainerProvider.getContainer(WritableRatisContainerProvider.java:116)
	at org.apache.hadoop.hdds.scm.pipeline.WritableContainerFactory.getContainer(WritableContainerFactory.java:74)
	at org.apache.hadoop.hdds.scm.block.BlockManagerImpl.allocateBlock(BlockManagerImpl.java:166)
	at org.apache.hadoop.hdds.scm.block.TestBlockManager.lambda$testAllocateBlockInParallel$0(TestBlockManager.java:262)
	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1604)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-01-02 20:32:15,531 [pool-184-thread-1] WARN  pipeline.WritableRatisContainerProvider (WritableRatisContainerProvider.java:getContainer(122)) - Pipeline creation failed for repConfig RATIS/THREE Datanodes may be used up. Try to see if any pipeline is in ALLOCATED state, and then will wait for it to be OPEN
org.apache.hadoop.hdds.scm.exceptions.SCMException: Pipeline creation failed due to no sufficient healthy datanodes. Required 3. Found 1. Excluded 7.
	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.filterViableNodes(PipelinePlacementPolicy.java:167)
	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.chooseDatanodesInternal(PipelinePlacementPolicy.java:256)
	at org.apache.hadoop.hdds.scm.SCMCommonPlacementPolicy.chooseDatanodes(SCMCommonPlacementPolicy.java:209)
	at org.apache.hadoop.hdds.scm.SCMCommonPlacementPolicy.chooseDatanodes(SCMCommonPlacementPolicy.java:140)
	at org.apache.hadoop.hdds.scm.pipeline.RatisPipelineProvider.create(RatisPipelineProvider.java:177)
	at org.apache.hadoop.hdds.scm.pipeline.RatisPipelineProvider.create(RatisPipelineProvider.java:57)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineFactory.create(PipelineFactory.java:89)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineManagerImpl.createPipeline(PipelineManagerImpl.java:255)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineManagerImpl.createPipeline(PipelineManagerImpl.java:241)
	at org.apache.hadoop.hdds.scm.pipeline.WritableRatisContainerProvider.getContainer(WritableRatisContainerProvider.java:116)
	at org.apache.hadoop.hdds.scm.pipeline.WritableContainerFactory.getContainer(WritableContainerFactory.java:74)
	at org.apache.hadoop.hdds.scm.block.BlockManagerImpl.allocateBlock(BlockManagerImpl.java:166)
	at org.apache.hadoop.hdds.scm.block.TestBlockManager.lambda$testAllocateBlockInParallel$0(TestBlockManager.java:262)
	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1604)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-01-02 20:32:15,533 [pool-174-thread-1] WARN  pipeline.WritableRatisContainerProvider (WritableRatisContainerProvider.java:getContainer(122)) - Pipeline creation failed for repConfig RATIS/THREE Datanodes may be used up. Try to see if any pipeline is in ALLOCATED state, and then will wait for it to be OPEN
org.apache.hadoop.hdds.scm.exceptions.SCMException: Pipeline creation failed due to no sufficient healthy datanodes. Required 3. Found 1. Excluded 7.
	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.filterViableNodes(PipelinePlacementPolicy.java:167)
	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.chooseDatanodesInternal(PipelinePlacementPolicy.java:256)
	at org.apache.hadoop.hdds.scm.SCMCommonPlacementPolicy.chooseDatanodes(SCMCommonPlacementPolicy.java:209)
	at org.apache.hadoop.hdds.scm.SCMCommonPlacementPolicy.chooseDatanodes(SCMCommonPlacementPolicy.java:140)
	at org.apache.hadoop.hdds.scm.pipeline.RatisPipelineProvider.create(RatisPipelineProvider.java:177)
	at org.apache.hadoop.hdds.scm.pipeline.RatisPipelineProvider.create(RatisPipelineProvider.java:57)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineFactory.create(PipelineFactory.java:89)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineManagerImpl.createPipeline(PipelineManagerImpl.java:255)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineManagerImpl.createPipeline(PipelineManagerImpl.java:241)
	at org.apache.hadoop.hdds.scm.pipeline.WritableRatisContainerProvider.getContainer(WritableRatisContainerProvider.java:116)
	at org.apache.hadoop.hdds.scm.pipeline.WritableContainerFactory.getContainer(WritableContainerFactory.java:74)
	at org.apache.hadoop.hdds.scm.block.BlockManagerImpl.allocateBlock(BlockManagerImpl.java:166)
	at org.apache.hadoop.hdds.scm.block.TestBlockManager.lambda$testAllocateBlockInParallel$0(TestBlockManager.java:262)
	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1604)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-01-02 20:32:15,534 [pool-183-thread-1] WARN  pipeline.WritableRatisContainerProvider (WritableRatisContainerProvider.java:getContainer(122)) - Pipeline creation failed for repConfig RATIS/THREE Datanodes may be used up. Try to see if any pipeline is in ALLOCATED state, and then will wait for it to be OPEN
org.apache.hadoop.hdds.scm.exceptions.SCMException: Pipeline creation failed due to no sufficient healthy datanodes. Required 3. Found 1. Excluded 7.
	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.filterViableNodes(PipelinePlacementPolicy.java:167)
	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.chooseDatanodesInternal(PipelinePlacementPolicy.java:256)
	at org.apache.hadoop.hdds.scm.SCMCommonPlacementPolicy.chooseDatanodes(SCMCommonPlacementPolicy.java:209)
	at org.apache.hadoop.hdds.scm.SCMCommonPlacementPolicy.chooseDatanodes(SCMCommonPlacementPolicy.java:140)
	at org.apache.hadoop.hdds.scm.pipeline.RatisPipelineProvider.create(RatisPipelineProvider.java:177)
	at org.apache.hadoop.hdds.scm.pipeline.RatisPipelineProvider.create(RatisPipelineProvider.java:57)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineFactory.create(PipelineFactory.java:89)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineManagerImpl.createPipeline(PipelineManagerImpl.java:255)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineManagerImpl.createPipeline(PipelineManagerImpl.java:241)
	at org.apache.hadoop.hdds.scm.pipeline.WritableRatisContainerProvider.getContainer(WritableRatisContainerProvider.java:116)
	at org.apache.hadoop.hdds.scm.pipeline.WritableContainerFactory.getContainer(WritableContainerFactory.java:74)
	at org.apache.hadoop.hdds.scm.block.BlockManagerImpl.allocateBlock(BlockManagerImpl.java:166)
	at org.apache.hadoop.hdds.scm.block.TestBlockManager.lambda$testAllocateBlockInParallel$0(TestBlockManager.java:262)
	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1604)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-01-02 20:32:15,535 [pool-181-thread-1] WARN  pipeline.WritableRatisContainerProvider (WritableRatisContainerProvider.java:getContainer(122)) - Pipeline creation failed for repConfig RATIS/THREE Datanodes may be used up. Try to see if any pipeline is in ALLOCATED state, and then will wait for it to be OPEN
org.apache.hadoop.hdds.scm.exceptions.SCMException: Pipeline creation failed due to no sufficient healthy datanodes. Required 3. Found 1. Excluded 7.
	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.filterViableNodes(PipelinePlacementPolicy.java:167)
	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.chooseDatanodesInternal(PipelinePlacementPolicy.java:256)
	at org.apache.hadoop.hdds.scm.SCMCommonPlacementPolicy.chooseDatanodes(SCMCommonPlacementPolicy.java:209)
	at org.apache.hadoop.hdds.scm.SCMCommonPlacementPolicy.chooseDatanodes(SCMCommonPlacementPolicy.java:140)
	at org.apache.hadoop.hdds.scm.pipeline.RatisPipelineProvider.create(RatisPipelineProvider.java:177)
	at org.apache.hadoop.hdds.scm.pipeline.RatisPipelineProvider.create(RatisPipelineProvider.java:57)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineFactory.create(PipelineFactory.java:89)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineManagerImpl.createPipeline(PipelineManagerImpl.java:255)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineManagerImpl.createPipeline(PipelineManagerImpl.java:241)
	at org.apache.hadoop.hdds.scm.pipeline.WritableRatisContainerProvider.getContainer(WritableRatisContainerProvider.java:116)
	at org.apache.hadoop.hdds.scm.pipeline.WritableContainerFactory.getContainer(WritableContainerFactory.java:74)
	at org.apache.hadoop.hdds.scm.block.BlockManagerImpl.allocateBlock(BlockManagerImpl.java:166)
	at org.apache.hadoop.hdds.scm.block.TestBlockManager.lambda$testAllocateBlockInParallel$0(TestBlockManager.java:262)
	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1604)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-01-02 20:32:15,537 [pool-186-thread-1] WARN  pipeline.WritableRatisContainerProvider (WritableRatisContainerProvider.java:getContainer(122)) - Pipeline creation failed for repConfig RATIS/THREE Datanodes may be used up. Try to see if any pipeline is in ALLOCATED state, and then will wait for it to be OPEN
org.apache.hadoop.hdds.scm.exceptions.SCMException: Pipeline creation failed due to no sufficient healthy datanodes. Required 3. Found 1. Excluded 7.
	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.filterViableNodes(PipelinePlacementPolicy.java:167)
	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.chooseDatanodesInternal(PipelinePlacementPolicy.java:256)
	at org.apache.hadoop.hdds.scm.SCMCommonPlacementPolicy.chooseDatanodes(SCMCommonPlacementPolicy.java:209)
	at org.apache.hadoop.hdds.scm.SCMCommonPlacementPolicy.chooseDatanodes(SCMCommonPlacementPolicy.java:140)
	at org.apache.hadoop.hdds.scm.pipeline.RatisPipelineProvider.create(RatisPipelineProvider.java:177)
	at org.apache.hadoop.hdds.scm.pipeline.RatisPipelineProvider.create(RatisPipelineProvider.java:57)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineFactory.create(PipelineFactory.java:89)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineManagerImpl.createPipeline(PipelineManagerImpl.java:255)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineManagerImpl.createPipeline(PipelineManagerImpl.java:241)
	at org.apache.hadoop.hdds.scm.pipeline.WritableRatisContainerProvider.getContainer(WritableRatisContainerProvider.java:116)
	at org.apache.hadoop.hdds.scm.pipeline.WritableContainerFactory.getContainer(WritableContainerFactory.java:74)
	at org.apache.hadoop.hdds.scm.block.BlockManagerImpl.allocateBlock(BlockManagerImpl.java:166)
	at org.apache.hadoop.hdds.scm.block.TestBlockManager.lambda$testAllocateBlockInParallel$0(TestBlockManager.java:262)
	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1604)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-01-02 20:32:15,541 [pool-185-thread-1] WARN  pipeline.WritableRatisContainerProvider (WritableRatisContainerProvider.java:getContainer(122)) - Pipeline creation failed for repConfig RATIS/THREE Datanodes may be used up. Try to see if any pipeline is in ALLOCATED state, and then will wait for it to be OPEN
org.apache.hadoop.hdds.scm.exceptions.SCMException: Pipeline creation failed due to no sufficient healthy datanodes. Required 3. Found 1. Excluded 7.
	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.filterViableNodes(PipelinePlacementPolicy.java:167)
	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.chooseDatanodesInternal(PipelinePlacementPolicy.java:256)
	at org.apache.hadoop.hdds.scm.SCMCommonPlacementPolicy.chooseDatanodes(SCMCommonPlacementPolicy.java:209)
	at org.apache.hadoop.hdds.scm.SCMCommonPlacementPolicy.chooseDatanodes(SCMCommonPlacementPolicy.java:140)
	at org.apache.hadoop.hdds.scm.pipeline.RatisPipelineProvider.create(RatisPipelineProvider.java:177)
	at org.apache.hadoop.hdds.scm.pipeline.RatisPipelineProvider.create(RatisPipelineProvider.java:57)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineFactory.create(PipelineFactory.java:89)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineManagerImpl.createPipeline(PipelineManagerImpl.java:255)
	at org.apache.hadoop.hdds.scm.pipeline.PipelineManagerImpl.createPipeline(PipelineManagerImpl.java:241)
	at org.apache.hadoop.hdds.scm.pipeline.WritableRatisContainerProvider.getContainer(WritableRatisContainerProvider.java:116)
	at org.apache.hadoop.hdds.scm.pipeline.WritableContainerFactory.getContainer(WritableContainerFactory.java:74)
	at org.apache.hadoop.hdds.scm.block.BlockManagerImpl.allocateBlock(BlockManagerImpl.java:166)
	at org.apache.hadoop.hdds.scm.block.TestBlockManager.lambda$testAllocateBlockInParallel$0(TestBlockManager.java:262)
	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1604)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2024-01-02 20:32:15,542 [pool-185-thread-1] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:getNextId(145)) - Allocate a batch for containerId, change lastId from 0 to 1000.
2024-01-02 20:32:15,542 [pool-185-thread-1] WARN  ha.SequenceIdGenerator (SequenceIdGenerator.java:allocateBatch(258)) - Failed to allocate a batch for localId, expected lastId is 0, actual lastId is 113750153625600000.
2024-01-02 20:32:15,543 [pool-185-thread-1] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:getNextId(145)) - Allocate a batch for localId, change lastId from 113750153625600000 to 113750153625601000.
2024-01-02 20:32:15,638 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1654)) - Container Balancer is not running.
2024-01-02 20:32:15,638 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stopReplicationManager(1787)) - Stopping Replication Manager Service.
2024-01-02 20:32:15,638 [main] INFO  replication.ReplicationManager (ReplicationManager.java:stop(326)) - Stopping Replication Monitor Thread.
2024-01-02 20:32:15,638 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1663)) - Stopping the Datanode Admin Monitor.
2024-01-02 20:32:15,638 [UnderReplicatedProcessor] WARN  replication.UnhealthyReplicationProcessor (UnhealthyReplicationProcessor.java:run(180)) - UnderReplicatedProcessor interrupted. Exiting...
2024-01-02 20:32:15,639 [ReplicationMonitor] INFO  replication.ReplicationManager (ReplicationManager.java:run(933)) - Replication Monitor Thread is stopped
2024-01-02 20:32:15,639 [OverReplicatedProcessor] WARN  replication.UnhealthyReplicationProcessor (UnhealthyReplicationProcessor.java:run(180)) - OverReplicatedProcessor interrupted. Exiting...
2024-01-02 20:32:15,639 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1670)) - Stopping datanode service RPC server
2024-01-02 20:32:15,639 [main] INFO  server.SCMDatanodeProtocolServer (SCMDatanodeProtocolServer.java:stop(424)) - Stopping the RPC server for DataNodes
2024-01-02 20:32:15,639 [main] INFO  ipc.Server (Server.java:stop(3523)) - Stopping server on 37091
2024-01-02 20:32:15,640 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1678)) - Stopping block service RPC server
2024-01-02 20:32:15,640 [main] INFO  server.SCMBlockProtocolServer (SCMBlockProtocolServer.java:stop(168)) - Stopping the RPC server for Block Protocol
2024-01-02 20:32:15,640 [main] INFO  ipc.Server (Server.java:stop(3523)) - Stopping server on 37321
2024-01-02 20:32:15,641 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1685)) - Stopping the StorageContainerLocationProtocol RPC server
2024-01-02 20:32:15,641 [main] INFO  server.SCMClientProtocolServer (SCMClientProtocolServer.java:stop(210)) - Stopping the RPC server for Client Protocol
2024-01-02 20:32:15,641 [main] INFO  ipc.Server (Server.java:stop(3523)) - Stopping server on 46805
2024-01-02 20:32:15,641 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1692)) - Stopping Storage Container Manager HTTP server.
2024-01-02 20:32:15,642 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1700)) - Stopping SCM LayoutVersionManager Service.
2024-01-02 20:32:15,642 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1712)) - Stopping Block Manager Service.
2024-01-02 20:32:15,642 [main] INFO  utils.BackgroundService (BackgroundService.java:shutdown(160)) - Shutting down service SCMBlockDeletingService
2024-01-02 20:32:15,642 [main] INFO  utils.BackgroundService (BackgroundService.java:shutdown(160)) - Shutting down service SCMBlockDeletingService
2024-01-02 20:32:15,643 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1732)) - Stopping SCM Event Queue.
2024-01-02 20:32:15,643 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1743)) - Stopping SCM HA services.
2024-01-02 20:32:15,643 [main] INFO  pipeline.BackgroundPipelineCreator (BackgroundPipelineCreator.java:stop(152)) - Stopping RatisPipelineUtilsThread.
2024-01-02 20:32:15,643 [RatisPipelineUtilsThread-0] WARN  pipeline.BackgroundPipelineCreator (BackgroundPipelineCreator.java:run(183)) - RatisPipelineUtilsThread is interrupted.
2024-01-02 20:32:15,644 [main] INFO  BackgroundPipelineScrubber (BackgroundSCMService.java:stop(131)) - Stopping BackgroundPipelineScrubber Service.
2024-01-02 20:32:15,644 [BackgroundPipelineScrubber] WARN  BackgroundPipelineScrubber (BackgroundSCMService.java:run(115)) - BackgroundPipelineScrubber is interrupted, exit
2024-01-02 20:32:15,644 [main] INFO  ExpiredContainerReplicaOpScrubber (BackgroundSCMService.java:stop(131)) - Stopping ExpiredContainerReplicaOpScrubber Service.
2024-01-02 20:32:15,644 [ExpiredContainerReplicaOpScrubber] WARN  ExpiredContainerReplicaOpScrubber (BackgroundSCMService.java:run(115)) - ExpiredContainerReplicaOpScrubber is interrupted, exit
2024-01-02 20:32:15,644 [main] INFO  utils.BackgroundService (BackgroundService.java:shutdown(160)) - Shutting down service SCMBlockDeletingService
2024-01-02 20:32:15,645 [main] INFO  replication.ReplicationManager (ReplicationManager.java:stop(336)) - Replication Monitor Thread is not running.
2024-01-02 20:32:15,645 [main] WARN  balancer.ContainerBalancer (ContainerBalancer.java:stop(327)) - Cannot stop Container Balancer because it's not running or stopping
2024-01-02 20:32:15,645 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1778)) - Stopping SCM MetadataStore.
2024-01-02 20:32:15,645 [test-leaseManagerLeaseManager#LeaseMonitor] WARN  lease.LeaseManager (LeaseManager.java:run(287)) - Lease manager is interrupted. Shutting down...
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedNanos(AbstractQueuedSynchronizer.java:1039)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.tryAcquireSharedNanos(AbstractQueuedSynchronizer.java:1328)
	at java.util.concurrent.Semaphore.tryAcquire(Semaphore.java:409)
	at org.apache.hadoop.ozone.lease.LeaseManager$LeaseMonitor.run(LeaseManager.java:285)
	at java.lang.Thread.run(Thread.java:750)
]]></system-out>
  </testcase>
  <testcase name="testBlockAllocationWithNoAvailablePipelines" classname="org.apache.hadoop.hdds.scm.block.TestBlockManager" time="0.253">
    <system-out><![CDATA[2024-01-02 20:32:15,675 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchemaFromFile(129)) - Loading schema from [file:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/classes/network-topology-default.xml]
2024-01-02 20:32:15,675 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchema(176)) - Loading network topology layer schema file
2024-01-02 20:32:15,683 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchemaFromFile(129)) - Loading schema from [file:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/classes/network-topology-default.xml]
2024-01-02 20:32:15,684 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchema(176)) - Loading network topology layer schema file
2024-01-02 20:32:15,685 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/1b6230dd-6277-4547-96a1-e9f337baea36
2024-01-02 20:32:15,685 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/97a2b75f-d1b8-4a0a-9fc8-80d061600b1d
2024-01-02 20:32:15,686 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/d16a68e5-4b15-42b7-8d4c-c039b8f39576
2024-01-02 20:32:15,686 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/bb100adc-cf75-4c56-817e-849c5c3ca854
2024-01-02 20:32:15,686 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/56034d83-eb8b-479a-9cde-0341e5ae772a
2024-01-02 20:32:15,686 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/4c8d1267-b3e3-4031-b943-a2ef81886250
2024-01-02 20:32:15,686 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/6fa24832-b9f2-40c3-9e24-4b93e47dface
2024-01-02 20:32:15,687 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/f1add954-9ffa-4303-9614-5f0c38b9872a
2024-01-02 20:32:15,687 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/269268e9-bad6-4d19-8c97-dd99e9446b66
2024-01-02 20:32:15,687 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/2cf768d8-3555-47fa-b104-524f11785fb9
2024-01-02 20:32:15,687 [main] WARN  utils.HAUtils (HAUtils.java:getMetaDir(339)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:15,687 [main] WARN  db.DBStoreBuilder (DBStoreBuilder.java:applyDBDefinition(167)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:15,752 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:<init>(241)) - Init the HA SequenceIdGenerator.
2024-01-02 20:32:15,752 [main] INFO  pipeline.PipelineStateManagerImpl (PipelineStateManagerImpl.java:initialize(78)) - No pipeline exists in current db
2024-01-02 20:32:15,752 [main] INFO  algorithms.LeaderChoosePolicyFactory (LeaderChoosePolicyFactory.java:getPolicy(57)) - Create leader choose policy of type org.apache.hadoop.hdds.scm.pipeline.leader.choose.algorithms.MinLeaderCountChoosePolicy
2024-01-02 20:32:15,752 [main] INFO  algorithms.ContainerPlacementPolicyFactory (ContainerPlacementPolicyFactory.java:getPolicyInternal(86)) - Create container placement policy of type org.apache.hadoop.hdds.scm.container.placement.algorithms.SCMContainerPlacementRackScatter
2024-01-02 20:32:15,753 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service BackgroundPipelineCreator.
2024-01-02 20:32:15,753 [main] INFO  pipeline.BackgroundPipelineCreator (BackgroundPipelineCreator.java:start(127)) - Starting RatisPipelineUtilsThread.
2024-01-02 20:32:15,753 [main] INFO  BackgroundPipelineScrubber (BackgroundSCMService.java:start(68)) - Starting BackgroundPipelineScrubber Service.
2024-01-02 20:32:15,754 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service BackgroundPipelineScrubber.
2024-01-02 20:32:15,754 [main] INFO  algorithms.LeaderChoosePolicyFactory (LeaderChoosePolicyFactory.java:getPolicy(57)) - Create leader choose policy of type org.apache.hadoop.hdds.scm.pipeline.leader.choose.algorithms.MinLeaderCountChoosePolicy
2024-01-02 20:32:15,755 [main] INFO  safemode.ContainerSafeModeRule (ContainerSafeModeRule.java:<init>(91)) - containers with one replica threshold count 0
2024-01-02 20:32:15,755 [main] INFO  safemode.HealthyPipelineSafeModeRule (HealthyPipelineSafeModeRule.java:initializeRule(176)) - Total pipeline count is 0, healthy pipeline threshold count is 0
2024-01-02 20:32:15,755 [main] INFO  safemode.OneReplicaPipelineSafeModeRule (OneReplicaPipelineSafeModeRule.java:initializeRule(193)) - Total pipeline count is 0, pipeline's with at least one datanode reported threshold count is 0
2024-01-02 20:32:15,755 [main] WARN  server.ServerUtils (ServerUtils.java:getScmDbDir(155)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:15,757 [main] WARN  server.ServerUtils (ServerUtils.java:getScmDbDir(155)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:15,757 [main] INFO  ha.SCMHANodeDetails (SCMHANodeDetails.java:loadSCMHAConfig(207)) - ServiceID for StorageContainerManager is null
2024-01-02 20:32:15,757 [main] INFO  ha.SCMHANodeDetails (SCMHANodeDetails.java:loadSCMHAConfig(212)) - ozone.scm.default.service.id is not defined, falling back to ozone.scm.service.ids to find serviceID for StorageContainerManager if it is HA enabled cluster
2024-01-02 20:32:15,758 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchemaFromFile(129)) - Loading schema from [file:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/classes/network-topology-default.xml]
2024-01-02 20:32:15,758 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchema(176)) - Loading network topology layer schema file
2024-01-02 20:32:15,759 [main] INFO  upgrade.AbstractLayoutVersionManager (AbstractLayoutVersionManager.java:init(83)) - Initializing Layout version manager with metadata layout = HADOOP_PRC_PORTS_IN_DATANODEDETAILS (version = 7), software layout = HADOOP_PRC_PORTS_IN_DATANODEDETAILS (version = 7)
2024-01-02 20:32:15,761 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToSequenceId(370)) - upgrade localId to 113750153625600000
2024-01-02 20:32:15,761 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToSequenceId(380)) - upgrade delTxnId to 0
2024-01-02 20:32:15,762 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToSequenceId(397)) - upgrade containerId to 0
2024-01-02 20:32:15,762 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToCertificateSequenceId(444)) - upgrade CertificateId to 2
2024-01-02 20:32:15,762 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:<init>(241)) - Init the HA SequenceIdGenerator.
2024-01-02 20:32:15,763 [main] INFO  algorithms.ContainerPlacementPolicyFactory (ContainerPlacementPolicyFactory.java:getPolicyInternal(86)) - Create container placement policy of type org.apache.hadoop.hdds.scm.container.placement.algorithms.SCMContainerPlacementRackAware
2024-01-02 20:32:15,763 [main] INFO  algorithms.ContainerPlacementPolicyFactory (ContainerPlacementPolicyFactory.java:getPolicyInternal(86)) - Create container placement policy of type org.apache.hadoop.hdds.scm.container.placement.algorithms.SCMContainerPlacementRackScatter
2024-01-02 20:32:15,763 [main] INFO  ExpiredContainerReplicaOpScrubber (BackgroundSCMService.java:start(68)) - Starting ExpiredContainerReplicaOpScrubber Service.
2024-01-02 20:32:15,763 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service ExpiredContainerReplicaOpScrubber.
2024-01-02 20:32:15,764 [main] INFO  algorithms.PipelineChoosePolicyFactory (PipelineChoosePolicyFactory.java:createPipelineChoosePolicyFromClass(78)) - Create pipeline choose policy of type org.apache.hadoop.hdds.scm.pipeline.choose.algorithms.RandomPipelineChoosePolicy
2024-01-02 20:32:15,764 [main] INFO  algorithms.PipelineChoosePolicyFactory (PipelineChoosePolicyFactory.java:createPipelineChoosePolicyFromClass(78)) - Create pipeline choose policy of type org.apache.hadoop.hdds.scm.pipeline.choose.algorithms.RandomPipelineChoosePolicy
2024-01-02 20:32:15,764 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service SCMBlockDeletingService.
2024-01-02 20:32:15,766 [main] INFO  replication.ReplicationManager (ReplicationManager.java:start(294)) - Starting Replication Monitor Thread.
2024-01-02 20:32:15,766 [ReplicationMonitor] INFO  replication.ReplicationManager (ReplicationManager.java:processAll(369)) - Replication Manager is not ready to run until 300000ms after safemode exit
2024-01-02 20:32:15,766 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service ReplicationManager.
2024-01-02 20:32:15,767 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:<init>(440)) - SCM start with adminUsers: [runner]
2024-01-02 20:32:15,768 [main] INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(90)) - Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
2024-01-02 20:32:15,768 [main] INFO  ipc.Server (Server.java:<init>(1287)) - Listener at 0.0.0.0:34775
2024-01-02 20:32:15,769 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:run(1323)) - Starting Socket Reader #1 for port 0
2024-01-02 20:32:15,774 [main] INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(90)) - Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
2024-01-02 20:32:15,774 [main] INFO  ipc.Server (Server.java:<init>(1287)) - Listener at 0.0.0.0:38399
2024-01-02 20:32:15,774 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:run(1323)) - Starting Socket Reader #1 for port 0
2024-01-02 20:32:15,775 [main] INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(90)) - Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
2024-01-02 20:32:15,776 [main] INFO  ipc.Server (Server.java:<init>(1287)) - Listener at 0.0.0.0:42453
2024-01-02 20:32:15,777 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:run(1323)) - Starting Socket Reader #1 for port 0
2024-01-02 20:32:15,786 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service ContainerBalancer.
2024-01-02 20:32:15,786 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:<init>(453)) - 
Container Balancer status:
Key                            Value
Running                        false
Container Balancer Configuration values:
Key                                                Value
Threshold                                          10
Max Datanodes to Involve per Iteration(percent)    20
Max Size to Move per Iteration                     500GB
Max Size Entering Target per Iteration             26GB
Max Size Leaving Source per Iteration              26GB
Number of Iterations                               10
Time Limit for Single Container's Movement         65min
Time Limit for Single Container's Replication      50min
Interval between each Iteration                    70min
Whether to Enable Network Topology                 false
Whether to Trigger Refresh Datanode Usage Info     false
Container IDs to Exclude from Balancing            None
Datanodes Specified to be Balanced                 None
Datanodes Excluded from Balancing                  None

2024-01-02 20:32:15,789 [main] INFO  ha.SCMContext (SCMContext.java:updateSafeModeStatus(230)) - Update SafeModeStatus from SafeModeStatus{safeModeStatus=false, preCheckPassed=true} to SafeModeStatus{safeModeStatus=false, preCheckPassed=true}.
2024-01-02 20:32:15,790 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=bf94153a-09ff-4c23-80d6-81bd9155b89b to datanode:4c8d1267-b3e3-4031-b943-a2ef81886250
2024-01-02 20:32:15,793 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=bf94153a-09ff-4c23-80d6-81bd9155b89b to datanode:bb100adc-cf75-4c56-817e-849c5c3ca854
2024-01-02 20:32:15,793 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=bf94153a-09ff-4c23-80d6-81bd9155b89b to datanode:97a2b75f-d1b8-4a0a-9fc8-80d061600b1d
2024-01-02 20:32:15,895 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:getNextId(145)) - Allocate a batch for containerId, change lastId from 0 to 1000.
2024-01-02 20:32:15,896 [main] WARN  ha.SequenceIdGenerator (SequenceIdGenerator.java:allocateBatch(258)) - Failed to allocate a batch for localId, expected lastId is 0, actual lastId is 113750153625600000.
2024-01-02 20:32:15,897 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:getNextId(145)) - Allocate a batch for localId, change lastId from 113750153625600000 to 113750153625601000.
2024-01-02 20:32:15,897 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1654)) - Container Balancer is not running.
2024-01-02 20:32:15,897 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stopReplicationManager(1787)) - Stopping Replication Manager Service.
2024-01-02 20:32:15,898 [main] INFO  replication.ReplicationManager (ReplicationManager.java:stop(326)) - Stopping Replication Monitor Thread.
2024-01-02 20:32:15,898 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1663)) - Stopping the Datanode Admin Monitor.
2024-01-02 20:32:15,898 [OverReplicatedProcessor] WARN  replication.UnhealthyReplicationProcessor (UnhealthyReplicationProcessor.java:run(180)) - OverReplicatedProcessor interrupted. Exiting...
2024-01-02 20:32:15,898 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1670)) - Stopping datanode service RPC server
2024-01-02 20:32:15,899 [main] INFO  server.SCMDatanodeProtocolServer (SCMDatanodeProtocolServer.java:stop(424)) - Stopping the RPC server for DataNodes
2024-01-02 20:32:15,899 [main] INFO  ipc.Server (Server.java:stop(3523)) - Stopping server on 34775
2024-01-02 20:32:15,898 [ReplicationMonitor] INFO  replication.ReplicationManager (ReplicationManager.java:run(933)) - Replication Monitor Thread is stopped
2024-01-02 20:32:15,898 [UnderReplicatedProcessor] WARN  replication.UnhealthyReplicationProcessor (UnhealthyReplicationProcessor.java:run(180)) - UnderReplicatedProcessor interrupted. Exiting...
2024-01-02 20:32:15,900 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1678)) - Stopping block service RPC server
2024-01-02 20:32:15,900 [main] INFO  server.SCMBlockProtocolServer (SCMBlockProtocolServer.java:stop(168)) - Stopping the RPC server for Block Protocol
2024-01-02 20:32:15,900 [main] INFO  ipc.Server (Server.java:stop(3523)) - Stopping server on 38399
2024-01-02 20:32:15,901 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1685)) - Stopping the StorageContainerLocationProtocol RPC server
2024-01-02 20:32:15,902 [main] INFO  server.SCMClientProtocolServer (SCMClientProtocolServer.java:stop(210)) - Stopping the RPC server for Client Protocol
2024-01-02 20:32:15,902 [main] INFO  ipc.Server (Server.java:stop(3523)) - Stopping server on 42453
2024-01-02 20:32:15,902 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1692)) - Stopping Storage Container Manager HTTP server.
2024-01-02 20:32:15,903 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1700)) - Stopping SCM LayoutVersionManager Service.
2024-01-02 20:32:15,903 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1712)) - Stopping Block Manager Service.
2024-01-02 20:32:15,903 [main] INFO  utils.BackgroundService (BackgroundService.java:shutdown(160)) - Shutting down service SCMBlockDeletingService
2024-01-02 20:32:15,903 [main] INFO  utils.BackgroundService (BackgroundService.java:shutdown(160)) - Shutting down service SCMBlockDeletingService
2024-01-02 20:32:15,903 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1732)) - Stopping SCM Event Queue.
2024-01-02 20:32:15,904 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1743)) - Stopping SCM HA services.
2024-01-02 20:32:15,904 [main] INFO  pipeline.BackgroundPipelineCreator (BackgroundPipelineCreator.java:stop(152)) - Stopping RatisPipelineUtilsThread.
2024-01-02 20:32:15,904 [RatisPipelineUtilsThread-0] WARN  pipeline.BackgroundPipelineCreator (BackgroundPipelineCreator.java:run(183)) - RatisPipelineUtilsThread is interrupted.
2024-01-02 20:32:15,905 [main] INFO  BackgroundPipelineScrubber (BackgroundSCMService.java:stop(131)) - Stopping BackgroundPipelineScrubber Service.
2024-01-02 20:32:15,905 [BackgroundPipelineScrubber] WARN  BackgroundPipelineScrubber (BackgroundSCMService.java:run(115)) - BackgroundPipelineScrubber is interrupted, exit
2024-01-02 20:32:15,905 [ExpiredContainerReplicaOpScrubber] WARN  ExpiredContainerReplicaOpScrubber (BackgroundSCMService.java:run(115)) - ExpiredContainerReplicaOpScrubber is interrupted, exit
2024-01-02 20:32:15,905 [main] INFO  ExpiredContainerReplicaOpScrubber (BackgroundSCMService.java:stop(131)) - Stopping ExpiredContainerReplicaOpScrubber Service.
2024-01-02 20:32:15,906 [main] INFO  utils.BackgroundService (BackgroundService.java:shutdown(160)) - Shutting down service SCMBlockDeletingService
2024-01-02 20:32:15,906 [main] INFO  replication.ReplicationManager (ReplicationManager.java:stop(336)) - Replication Monitor Thread is not running.
2024-01-02 20:32:15,906 [main] WARN  balancer.ContainerBalancer (ContainerBalancer.java:stop(327)) - Cannot stop Container Balancer because it's not running or stopping
2024-01-02 20:32:15,907 [test-leaseManagerLeaseManager#LeaseMonitor] WARN  lease.LeaseManager (LeaseManager.java:run(287)) - Lease manager is interrupted. Shutting down...
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedNanos(AbstractQueuedSynchronizer.java:1039)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.tryAcquireSharedNanos(AbstractQueuedSynchronizer.java:1328)
	at java.util.concurrent.Semaphore.tryAcquire(Semaphore.java:409)
	at org.apache.hadoop.ozone.lease.LeaseManager$LeaseMonitor.run(LeaseManager.java:285)
	at java.lang.Thread.run(Thread.java:750)
2024-01-02 20:32:15,907 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1778)) - Stopping SCM MetadataStore.
]]></system-out>
  </testcase>
  <testcase name="testAllocateOversizedBlock" classname="org.apache.hadoop.hdds.scm.block.TestBlockManager" time="0.163">
    <system-out><![CDATA[2024-01-02 20:32:15,927 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchemaFromFile(129)) - Loading schema from [file:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/classes/network-topology-default.xml]
2024-01-02 20:32:15,927 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchema(176)) - Loading network topology layer schema file
2024-01-02 20:32:15,936 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchemaFromFile(129)) - Loading schema from [file:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/classes/network-topology-default.xml]
2024-01-02 20:32:15,936 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchema(176)) - Loading network topology layer schema file
2024-01-02 20:32:15,938 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/4a6290ad-4df5-4a5f-87ea-986b506049c1
2024-01-02 20:32:15,938 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/dd3e4688-7ba8-407f-8408-8e181ff80473
2024-01-02 20:32:15,938 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/32883882-e5e2-4860-84e3-1c069151c3f6
2024-01-02 20:32:15,939 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/b0601aec-6e0a-4b72-bcc5-602fb3d59679
2024-01-02 20:32:15,939 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/6c646673-8ceb-464b-826a-42622fcf98e8
2024-01-02 20:32:15,939 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/98c97edc-4941-4174-9d86-234ad7d962b0
2024-01-02 20:32:15,939 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/629b3741-226c-487b-8e5e-9166355673b5
2024-01-02 20:32:15,939 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/765dbe6f-0948-4077-a2c7-024e0413dbb2
2024-01-02 20:32:15,940 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/999717ed-6182-4747-9a02-36e74b472033
2024-01-02 20:32:15,940 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/e282aa98-73c6-4da1-ad06-a372eb053872
2024-01-02 20:32:15,940 [main] WARN  utils.HAUtils (HAUtils.java:getMetaDir(339)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:15,941 [main] WARN  db.DBStoreBuilder (DBStoreBuilder.java:applyDBDefinition(167)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:16,015 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:<init>(241)) - Init the HA SequenceIdGenerator.
2024-01-02 20:32:16,015 [main] INFO  pipeline.PipelineStateManagerImpl (PipelineStateManagerImpl.java:initialize(78)) - No pipeline exists in current db
2024-01-02 20:32:16,016 [main] INFO  algorithms.LeaderChoosePolicyFactory (LeaderChoosePolicyFactory.java:getPolicy(57)) - Create leader choose policy of type org.apache.hadoop.hdds.scm.pipeline.leader.choose.algorithms.MinLeaderCountChoosePolicy
2024-01-02 20:32:16,016 [main] INFO  algorithms.ContainerPlacementPolicyFactory (ContainerPlacementPolicyFactory.java:getPolicyInternal(86)) - Create container placement policy of type org.apache.hadoop.hdds.scm.container.placement.algorithms.SCMContainerPlacementRackScatter
2024-01-02 20:32:16,016 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service BackgroundPipelineCreator.
2024-01-02 20:32:16,017 [main] INFO  pipeline.BackgroundPipelineCreator (BackgroundPipelineCreator.java:start(127)) - Starting RatisPipelineUtilsThread.
2024-01-02 20:32:16,017 [main] INFO  BackgroundPipelineScrubber (BackgroundSCMService.java:start(68)) - Starting BackgroundPipelineScrubber Service.
2024-01-02 20:32:16,017 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service BackgroundPipelineScrubber.
2024-01-02 20:32:16,017 [main] INFO  algorithms.LeaderChoosePolicyFactory (LeaderChoosePolicyFactory.java:getPolicy(57)) - Create leader choose policy of type org.apache.hadoop.hdds.scm.pipeline.leader.choose.algorithms.MinLeaderCountChoosePolicy
2024-01-02 20:32:16,018 [main] INFO  safemode.ContainerSafeModeRule (ContainerSafeModeRule.java:<init>(91)) - containers with one replica threshold count 0
2024-01-02 20:32:16,019 [main] INFO  safemode.HealthyPipelineSafeModeRule (HealthyPipelineSafeModeRule.java:initializeRule(176)) - Total pipeline count is 0, healthy pipeline threshold count is 0
2024-01-02 20:32:16,019 [main] INFO  safemode.OneReplicaPipelineSafeModeRule (OneReplicaPipelineSafeModeRule.java:initializeRule(193)) - Total pipeline count is 0, pipeline's with at least one datanode reported threshold count is 0
2024-01-02 20:32:16,019 [main] WARN  server.ServerUtils (ServerUtils.java:getScmDbDir(155)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:16,020 [main] WARN  server.ServerUtils (ServerUtils.java:getScmDbDir(155)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:16,021 [main] INFO  ha.SCMHANodeDetails (SCMHANodeDetails.java:loadSCMHAConfig(207)) - ServiceID for StorageContainerManager is null
2024-01-02 20:32:16,021 [main] INFO  ha.SCMHANodeDetails (SCMHANodeDetails.java:loadSCMHAConfig(212)) - ozone.scm.default.service.id is not defined, falling back to ozone.scm.service.ids to find serviceID for StorageContainerManager if it is HA enabled cluster
2024-01-02 20:32:16,022 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchemaFromFile(129)) - Loading schema from [file:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/classes/network-topology-default.xml]
2024-01-02 20:32:16,022 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchema(176)) - Loading network topology layer schema file
2024-01-02 20:32:16,024 [main] INFO  upgrade.AbstractLayoutVersionManager (AbstractLayoutVersionManager.java:init(83)) - Initializing Layout version manager with metadata layout = HADOOP_PRC_PORTS_IN_DATANODEDETAILS (version = 7), software layout = HADOOP_PRC_PORTS_IN_DATANODEDETAILS (version = 7)
2024-01-02 20:32:16,025 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToSequenceId(370)) - upgrade localId to 113750153625600000
2024-01-02 20:32:16,025 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToSequenceId(380)) - upgrade delTxnId to 0
2024-01-02 20:32:16,026 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToSequenceId(397)) - upgrade containerId to 0
2024-01-02 20:32:16,026 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToCertificateSequenceId(444)) - upgrade CertificateId to 2
2024-01-02 20:32:16,026 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:<init>(241)) - Init the HA SequenceIdGenerator.
2024-01-02 20:32:16,027 [main] INFO  algorithms.ContainerPlacementPolicyFactory (ContainerPlacementPolicyFactory.java:getPolicyInternal(86)) - Create container placement policy of type org.apache.hadoop.hdds.scm.container.placement.algorithms.SCMContainerPlacementRackAware
2024-01-02 20:32:16,027 [main] INFO  algorithms.ContainerPlacementPolicyFactory (ContainerPlacementPolicyFactory.java:getPolicyInternal(86)) - Create container placement policy of type org.apache.hadoop.hdds.scm.container.placement.algorithms.SCMContainerPlacementRackScatter
2024-01-02 20:32:16,027 [main] INFO  ExpiredContainerReplicaOpScrubber (BackgroundSCMService.java:start(68)) - Starting ExpiredContainerReplicaOpScrubber Service.
2024-01-02 20:32:16,027 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service ExpiredContainerReplicaOpScrubber.
2024-01-02 20:32:16,028 [main] INFO  algorithms.PipelineChoosePolicyFactory (PipelineChoosePolicyFactory.java:createPipelineChoosePolicyFromClass(78)) - Create pipeline choose policy of type org.apache.hadoop.hdds.scm.pipeline.choose.algorithms.RandomPipelineChoosePolicy
2024-01-02 20:32:16,028 [main] INFO  algorithms.PipelineChoosePolicyFactory (PipelineChoosePolicyFactory.java:createPipelineChoosePolicyFromClass(78)) - Create pipeline choose policy of type org.apache.hadoop.hdds.scm.pipeline.choose.algorithms.RandomPipelineChoosePolicy
2024-01-02 20:32:16,029 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service SCMBlockDeletingService.
2024-01-02 20:32:16,030 [main] INFO  replication.ReplicationManager (ReplicationManager.java:start(294)) - Starting Replication Monitor Thread.
2024-01-02 20:32:16,030 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service ReplicationManager.
2024-01-02 20:32:16,030 [ReplicationMonitor] INFO  replication.ReplicationManager (ReplicationManager.java:processAll(369)) - Replication Manager is not ready to run until 300000ms after safemode exit
2024-01-02 20:32:16,033 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:<init>(440)) - SCM start with adminUsers: [runner]
2024-01-02 20:32:16,033 [main] INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(90)) - Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
2024-01-02 20:32:16,033 [main] INFO  ipc.Server (Server.java:<init>(1287)) - Listener at 0.0.0.0:41859
2024-01-02 20:32:16,036 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:run(1323)) - Starting Socket Reader #1 for port 0
2024-01-02 20:32:16,041 [main] INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(90)) - Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
2024-01-02 20:32:16,041 [main] INFO  ipc.Server (Server.java:<init>(1287)) - Listener at 0.0.0.0:40141
2024-01-02 20:32:16,045 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:run(1323)) - Starting Socket Reader #1 for port 0
2024-01-02 20:32:16,050 [main] INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(90)) - Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
2024-01-02 20:32:16,050 [main] INFO  ipc.Server (Server.java:<init>(1287)) - Listener at 0.0.0.0:42331
2024-01-02 20:32:16,051 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:run(1323)) - Starting Socket Reader #1 for port 0
2024-01-02 20:32:16,055 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service ContainerBalancer.
2024-01-02 20:32:16,055 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:<init>(453)) - 
Container Balancer status:
Key                            Value
Running                        false
Container Balancer Configuration values:
Key                                                Value
Threshold                                          10
Max Datanodes to Involve per Iteration(percent)    20
Max Size to Move per Iteration                     500GB
Max Size Entering Target per Iteration             26GB
Max Size Leaving Source per Iteration              26GB
Number of Iterations                               10
Time Limit for Single Container's Movement         65min
Time Limit for Single Container's Replication      50min
Interval between each Iteration                    70min
Whether to Enable Network Topology                 false
Whether to Trigger Refresh Datanode Usage Info     false
Container IDs to Exclude from Balancing            None
Datanodes Specified to be Balanced                 None
Datanodes Excluded from Balancing                  None

2024-01-02 20:32:16,056 [main] INFO  ha.SCMContext (SCMContext.java:updateSafeModeStatus(230)) - Update SafeModeStatus from SafeModeStatus{safeModeStatus=false, preCheckPassed=true} to SafeModeStatus{safeModeStatus=false, preCheckPassed=true}.
2024-01-02 20:32:16,059 [main] WARN  block.BlockManagerImpl (BlockManagerImpl.java:allocateBlock(161)) - Invalid block size requested : 6442450944
2024-01-02 20:32:16,059 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1654)) - Container Balancer is not running.
2024-01-02 20:32:16,060 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stopReplicationManager(1787)) - Stopping Replication Manager Service.
2024-01-02 20:32:16,060 [main] INFO  replication.ReplicationManager (ReplicationManager.java:stop(326)) - Stopping Replication Monitor Thread.
2024-01-02 20:32:16,060 [UnderReplicatedProcessor] WARN  replication.UnhealthyReplicationProcessor (UnhealthyReplicationProcessor.java:run(180)) - UnderReplicatedProcessor interrupted. Exiting...
2024-01-02 20:32:16,060 [OverReplicatedProcessor] WARN  replication.UnhealthyReplicationProcessor (UnhealthyReplicationProcessor.java:run(180)) - OverReplicatedProcessor interrupted. Exiting...
2024-01-02 20:32:16,061 [ReplicationMonitor] INFO  replication.ReplicationManager (ReplicationManager.java:run(933)) - Replication Monitor Thread is stopped
2024-01-02 20:32:16,061 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1663)) - Stopping the Datanode Admin Monitor.
2024-01-02 20:32:16,063 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1670)) - Stopping datanode service RPC server
2024-01-02 20:32:16,063 [main] INFO  server.SCMDatanodeProtocolServer (SCMDatanodeProtocolServer.java:stop(424)) - Stopping the RPC server for DataNodes
2024-01-02 20:32:16,063 [main] INFO  ipc.Server (Server.java:stop(3523)) - Stopping server on 41859
2024-01-02 20:32:16,064 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1678)) - Stopping block service RPC server
2024-01-02 20:32:16,065 [main] INFO  server.SCMBlockProtocolServer (SCMBlockProtocolServer.java:stop(168)) - Stopping the RPC server for Block Protocol
2024-01-02 20:32:16,065 [main] INFO  ipc.Server (Server.java:stop(3523)) - Stopping server on 40141
2024-01-02 20:32:16,065 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1685)) - Stopping the StorageContainerLocationProtocol RPC server
2024-01-02 20:32:16,066 [main] INFO  server.SCMClientProtocolServer (SCMClientProtocolServer.java:stop(210)) - Stopping the RPC server for Client Protocol
2024-01-02 20:32:16,066 [main] INFO  ipc.Server (Server.java:stop(3523)) - Stopping server on 42331
2024-01-02 20:32:16,066 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1692)) - Stopping Storage Container Manager HTTP server.
2024-01-02 20:32:16,066 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1700)) - Stopping SCM LayoutVersionManager Service.
2024-01-02 20:32:16,067 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1712)) - Stopping Block Manager Service.
2024-01-02 20:32:16,067 [main] INFO  utils.BackgroundService (BackgroundService.java:shutdown(160)) - Shutting down service SCMBlockDeletingService
2024-01-02 20:32:16,067 [main] INFO  utils.BackgroundService (BackgroundService.java:shutdown(160)) - Shutting down service SCMBlockDeletingService
2024-01-02 20:32:16,067 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1732)) - Stopping SCM Event Queue.
2024-01-02 20:32:16,067 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1743)) - Stopping SCM HA services.
2024-01-02 20:32:16,068 [main] INFO  pipeline.BackgroundPipelineCreator (BackgroundPipelineCreator.java:stop(152)) - Stopping RatisPipelineUtilsThread.
2024-01-02 20:32:16,068 [RatisPipelineUtilsThread-0] WARN  pipeline.BackgroundPipelineCreator (BackgroundPipelineCreator.java:run(183)) - RatisPipelineUtilsThread is interrupted.
2024-01-02 20:32:16,069 [BackgroundPipelineScrubber] WARN  BackgroundPipelineScrubber (BackgroundSCMService.java:run(115)) - BackgroundPipelineScrubber is interrupted, exit
2024-01-02 20:32:16,069 [main] INFO  BackgroundPipelineScrubber (BackgroundSCMService.java:stop(131)) - Stopping BackgroundPipelineScrubber Service.
2024-01-02 20:32:16,069 [main] INFO  ExpiredContainerReplicaOpScrubber (BackgroundSCMService.java:stop(131)) - Stopping ExpiredContainerReplicaOpScrubber Service.
2024-01-02 20:32:16,070 [main] INFO  utils.BackgroundService (BackgroundService.java:shutdown(160)) - Shutting down service SCMBlockDeletingService
2024-01-02 20:32:16,070 [ExpiredContainerReplicaOpScrubber] WARN  ExpiredContainerReplicaOpScrubber (BackgroundSCMService.java:run(115)) - ExpiredContainerReplicaOpScrubber is interrupted, exit
2024-01-02 20:32:16,070 [main] INFO  replication.ReplicationManager (ReplicationManager.java:stop(336)) - Replication Monitor Thread is not running.
2024-01-02 20:32:16,070 [main] WARN  balancer.ContainerBalancer (ContainerBalancer.java:stop(327)) - Cannot stop Container Balancer because it's not running or stopping
2024-01-02 20:32:16,071 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1778)) - Stopping SCM MetadataStore.
2024-01-02 20:32:16,071 [test-leaseManagerLeaseManager#LeaseMonitor] WARN  lease.LeaseManager (LeaseManager.java:run(287)) - Lease manager is interrupted. Shutting down...
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedNanos(AbstractQueuedSynchronizer.java:1039)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.tryAcquireSharedNanos(AbstractQueuedSynchronizer.java:1328)
	at java.util.concurrent.Semaphore.tryAcquire(Semaphore.java:409)
	at org.apache.hadoop.ozone.lease.LeaseManager$LeaseMonitor.run(LeaseManager.java:285)
	at java.lang.Thread.run(Thread.java:750)
]]></system-out>
  </testcase>
  <testcase name="testAllocateBlockFailureInSafeMode" classname="org.apache.hadoop.hdds.scm.block.TestBlockManager" time="0.165">
    <system-out><![CDATA[2024-01-02 20:32:16,094 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchemaFromFile(129)) - Loading schema from [file:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/classes/network-topology-default.xml]
2024-01-02 20:32:16,094 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchema(176)) - Loading network topology layer schema file
2024-01-02 20:32:16,103 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchemaFromFile(129)) - Loading schema from [file:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/classes/network-topology-default.xml]
2024-01-02 20:32:16,103 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchema(176)) - Loading network topology layer schema file
2024-01-02 20:32:16,104 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/ab65bd18-cf96-4e12-9a6d-071ace3d5567
2024-01-02 20:32:16,104 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/75bc18c5-37ea-4856-befe-a2eae0ca72bb
2024-01-02 20:32:16,104 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/a276dd2c-01b5-4596-a2c6-5679e91a8dc3
2024-01-02 20:32:16,105 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/11ea3100-571e-40e0-9899-fdc524a478be
2024-01-02 20:32:16,105 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/a0bed96c-cd97-406e-8e7d-35aa29171efc
2024-01-02 20:32:16,105 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/c788f325-51db-4323-a791-ea9728cf4abd
2024-01-02 20:32:16,105 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/1d164ac5-8e72-4d1c-9d04-99244fa7d2d7
2024-01-02 20:32:16,106 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/925da885-41d7-4ff4-a53d-ddea12a2b4c4
2024-01-02 20:32:16,106 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/22c0639b-a8a8-49f7-b063-5a4be73ade3c
2024-01-02 20:32:16,106 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/19e76fe2-3115-426f-92e8-a88094ff093e
2024-01-02 20:32:16,106 [main] WARN  utils.HAUtils (HAUtils.java:getMetaDir(339)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:16,107 [main] WARN  db.DBStoreBuilder (DBStoreBuilder.java:applyDBDefinition(167)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:16,184 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:<init>(241)) - Init the HA SequenceIdGenerator.
2024-01-02 20:32:16,184 [main] INFO  pipeline.PipelineStateManagerImpl (PipelineStateManagerImpl.java:initialize(78)) - No pipeline exists in current db
2024-01-02 20:32:16,184 [main] INFO  algorithms.LeaderChoosePolicyFactory (LeaderChoosePolicyFactory.java:getPolicy(57)) - Create leader choose policy of type org.apache.hadoop.hdds.scm.pipeline.leader.choose.algorithms.MinLeaderCountChoosePolicy
2024-01-02 20:32:16,184 [main] INFO  algorithms.ContainerPlacementPolicyFactory (ContainerPlacementPolicyFactory.java:getPolicyInternal(86)) - Create container placement policy of type org.apache.hadoop.hdds.scm.container.placement.algorithms.SCMContainerPlacementRackScatter
2024-01-02 20:32:16,185 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service BackgroundPipelineCreator.
2024-01-02 20:32:16,185 [main] INFO  pipeline.BackgroundPipelineCreator (BackgroundPipelineCreator.java:start(127)) - Starting RatisPipelineUtilsThread.
2024-01-02 20:32:16,185 [main] INFO  BackgroundPipelineScrubber (BackgroundSCMService.java:start(68)) - Starting BackgroundPipelineScrubber Service.
2024-01-02 20:32:16,185 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service BackgroundPipelineScrubber.
2024-01-02 20:32:16,186 [main] INFO  algorithms.LeaderChoosePolicyFactory (LeaderChoosePolicyFactory.java:getPolicy(57)) - Create leader choose policy of type org.apache.hadoop.hdds.scm.pipeline.leader.choose.algorithms.MinLeaderCountChoosePolicy
2024-01-02 20:32:16,187 [main] INFO  safemode.ContainerSafeModeRule (ContainerSafeModeRule.java:<init>(91)) - containers with one replica threshold count 0
2024-01-02 20:32:16,187 [main] INFO  safemode.HealthyPipelineSafeModeRule (HealthyPipelineSafeModeRule.java:initializeRule(176)) - Total pipeline count is 0, healthy pipeline threshold count is 0
2024-01-02 20:32:16,187 [main] INFO  safemode.OneReplicaPipelineSafeModeRule (OneReplicaPipelineSafeModeRule.java:initializeRule(193)) - Total pipeline count is 0, pipeline's with at least one datanode reported threshold count is 0
2024-01-02 20:32:16,187 [main] WARN  server.ServerUtils (ServerUtils.java:getScmDbDir(155)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:16,188 [main] WARN  server.ServerUtils (ServerUtils.java:getScmDbDir(155)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:16,189 [main] INFO  ha.SCMHANodeDetails (SCMHANodeDetails.java:loadSCMHAConfig(207)) - ServiceID for StorageContainerManager is null
2024-01-02 20:32:16,189 [main] INFO  ha.SCMHANodeDetails (SCMHANodeDetails.java:loadSCMHAConfig(212)) - ozone.scm.default.service.id is not defined, falling back to ozone.scm.service.ids to find serviceID for StorageContainerManager if it is HA enabled cluster
2024-01-02 20:32:16,190 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchemaFromFile(129)) - Loading schema from [file:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/classes/network-topology-default.xml]
2024-01-02 20:32:16,190 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchema(176)) - Loading network topology layer schema file
2024-01-02 20:32:16,191 [main] INFO  upgrade.AbstractLayoutVersionManager (AbstractLayoutVersionManager.java:init(83)) - Initializing Layout version manager with metadata layout = HADOOP_PRC_PORTS_IN_DATANODEDETAILS (version = 7), software layout = HADOOP_PRC_PORTS_IN_DATANODEDETAILS (version = 7)
2024-01-02 20:32:16,192 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToSequenceId(370)) - upgrade localId to 113750153625600000
2024-01-02 20:32:16,193 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToSequenceId(380)) - upgrade delTxnId to 0
2024-01-02 20:32:16,193 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToSequenceId(397)) - upgrade containerId to 0
2024-01-02 20:32:16,194 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToCertificateSequenceId(444)) - upgrade CertificateId to 2
2024-01-02 20:32:16,194 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:<init>(241)) - Init the HA SequenceIdGenerator.
2024-01-02 20:32:16,194 [main] INFO  algorithms.ContainerPlacementPolicyFactory (ContainerPlacementPolicyFactory.java:getPolicyInternal(86)) - Create container placement policy of type org.apache.hadoop.hdds.scm.container.placement.algorithms.SCMContainerPlacementRackAware
2024-01-02 20:32:16,194 [main] INFO  algorithms.ContainerPlacementPolicyFactory (ContainerPlacementPolicyFactory.java:getPolicyInternal(86)) - Create container placement policy of type org.apache.hadoop.hdds.scm.container.placement.algorithms.SCMContainerPlacementRackScatter
2024-01-02 20:32:16,195 [main] INFO  ExpiredContainerReplicaOpScrubber (BackgroundSCMService.java:start(68)) - Starting ExpiredContainerReplicaOpScrubber Service.
2024-01-02 20:32:16,195 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service ExpiredContainerReplicaOpScrubber.
2024-01-02 20:32:16,195 [main] INFO  algorithms.PipelineChoosePolicyFactory (PipelineChoosePolicyFactory.java:createPipelineChoosePolicyFromClass(78)) - Create pipeline choose policy of type org.apache.hadoop.hdds.scm.pipeline.choose.algorithms.RandomPipelineChoosePolicy
2024-01-02 20:32:16,195 [main] INFO  algorithms.PipelineChoosePolicyFactory (PipelineChoosePolicyFactory.java:createPipelineChoosePolicyFromClass(78)) - Create pipeline choose policy of type org.apache.hadoop.hdds.scm.pipeline.choose.algorithms.RandomPipelineChoosePolicy
2024-01-02 20:32:16,196 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service SCMBlockDeletingService.
2024-01-02 20:32:16,198 [main] INFO  replication.ReplicationManager (ReplicationManager.java:start(294)) - Starting Replication Monitor Thread.
2024-01-02 20:32:16,198 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service ReplicationManager.
2024-01-02 20:32:16,198 [ReplicationMonitor] INFO  replication.ReplicationManager (ReplicationManager.java:processAll(369)) - Replication Manager is not ready to run until 300000ms after safemode exit
2024-01-02 20:32:16,199 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:<init>(440)) - SCM start with adminUsers: [runner]
2024-01-02 20:32:16,199 [main] INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(90)) - Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
2024-01-02 20:32:16,199 [main] INFO  ipc.Server (Server.java:<init>(1287)) - Listener at 0.0.0.0:39085
2024-01-02 20:32:16,200 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:run(1323)) - Starting Socket Reader #1 for port 0
2024-01-02 20:32:16,201 [main] INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(90)) - Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
2024-01-02 20:32:16,202 [main] INFO  ipc.Server (Server.java:<init>(1287)) - Listener at 0.0.0.0:34879
2024-01-02 20:32:16,205 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:run(1323)) - Starting Socket Reader #1 for port 0
2024-01-02 20:32:16,209 [main] INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(90)) - Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
2024-01-02 20:32:16,209 [main] INFO  ipc.Server (Server.java:<init>(1287)) - Listener at 0.0.0.0:44825
2024-01-02 20:32:16,210 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:run(1323)) - Starting Socket Reader #1 for port 0
2024-01-02 20:32:16,221 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service ContainerBalancer.
2024-01-02 20:32:16,221 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:<init>(453)) - 
Container Balancer status:
Key                            Value
Running                        false
Container Balancer Configuration values:
Key                                                Value
Threshold                                          10
Max Datanodes to Involve per Iteration(percent)    20
Max Size to Move per Iteration                     500GB
Max Size Entering Target per Iteration             26GB
Max Size Leaving Source per Iteration              26GB
Number of Iterations                               10
Time Limit for Single Container's Movement         65min
Time Limit for Single Container's Replication      50min
Interval between each Iteration                    70min
Whether to Enable Network Topology                 false
Whether to Trigger Refresh Datanode Usage Info     false
Container IDs to Exclude from Balancing            None
Datanodes Specified to be Balanced                 None
Datanodes Excluded from Balancing                  None

2024-01-02 20:32:16,222 [main] INFO  ha.SCMContext (SCMContext.java:updateSafeModeStatus(230)) - Update SafeModeStatus from SafeModeStatus{safeModeStatus=false, preCheckPassed=true} to SafeModeStatus{safeModeStatus=false, preCheckPassed=true}.
2024-01-02 20:32:16,223 [main] INFO  ha.SCMContext (SCMContext.java:updateSafeModeStatus(230)) - Update SafeModeStatus from SafeModeStatus{safeModeStatus=false, preCheckPassed=true} to SafeModeStatus{safeModeStatus=true, preCheckPassed=true}.
2024-01-02 20:32:16,223 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1654)) - Container Balancer is not running.
2024-01-02 20:32:16,223 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stopReplicationManager(1787)) - Stopping Replication Manager Service.
2024-01-02 20:32:16,224 [main] INFO  replication.ReplicationManager (ReplicationManager.java:stop(326)) - Stopping Replication Monitor Thread.
2024-01-02 20:32:16,224 [ReplicationMonitor] INFO  replication.ReplicationManager (ReplicationManager.java:run(933)) - Replication Monitor Thread is stopped
2024-01-02 20:32:16,224 [OverReplicatedProcessor] WARN  replication.UnhealthyReplicationProcessor (UnhealthyReplicationProcessor.java:run(180)) - OverReplicatedProcessor interrupted. Exiting...
2024-01-02 20:32:16,224 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1663)) - Stopping the Datanode Admin Monitor.
2024-01-02 20:32:16,224 [UnderReplicatedProcessor] WARN  replication.UnhealthyReplicationProcessor (UnhealthyReplicationProcessor.java:run(180)) - UnderReplicatedProcessor interrupted. Exiting...
2024-01-02 20:32:16,226 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1670)) - Stopping datanode service RPC server
2024-01-02 20:32:16,226 [main] INFO  server.SCMDatanodeProtocolServer (SCMDatanodeProtocolServer.java:stop(424)) - Stopping the RPC server for DataNodes
2024-01-02 20:32:16,226 [main] INFO  ipc.Server (Server.java:stop(3523)) - Stopping server on 39085
2024-01-02 20:32:16,227 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1678)) - Stopping block service RPC server
2024-01-02 20:32:16,227 [main] INFO  server.SCMBlockProtocolServer (SCMBlockProtocolServer.java:stop(168)) - Stopping the RPC server for Block Protocol
2024-01-02 20:32:16,227 [main] INFO  ipc.Server (Server.java:stop(3523)) - Stopping server on 34879
2024-01-02 20:32:16,228 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1685)) - Stopping the StorageContainerLocationProtocol RPC server
2024-01-02 20:32:16,228 [main] INFO  server.SCMClientProtocolServer (SCMClientProtocolServer.java:stop(210)) - Stopping the RPC server for Client Protocol
2024-01-02 20:32:16,229 [main] INFO  ipc.Server (Server.java:stop(3523)) - Stopping server on 44825
2024-01-02 20:32:16,229 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1692)) - Stopping Storage Container Manager HTTP server.
2024-01-02 20:32:16,229 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1700)) - Stopping SCM LayoutVersionManager Service.
2024-01-02 20:32:16,230 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1712)) - Stopping Block Manager Service.
2024-01-02 20:32:16,230 [main] INFO  utils.BackgroundService (BackgroundService.java:shutdown(160)) - Shutting down service SCMBlockDeletingService
2024-01-02 20:32:16,230 [main] INFO  utils.BackgroundService (BackgroundService.java:shutdown(160)) - Shutting down service SCMBlockDeletingService
2024-01-02 20:32:16,230 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1732)) - Stopping SCM Event Queue.
2024-01-02 20:32:16,231 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1743)) - Stopping SCM HA services.
2024-01-02 20:32:16,231 [main] INFO  pipeline.BackgroundPipelineCreator (BackgroundPipelineCreator.java:stop(152)) - Stopping RatisPipelineUtilsThread.
2024-01-02 20:32:16,231 [RatisPipelineUtilsThread-0] WARN  pipeline.BackgroundPipelineCreator (BackgroundPipelineCreator.java:run(183)) - RatisPipelineUtilsThread is interrupted.
2024-01-02 20:32:16,231 [BackgroundPipelineScrubber] WARN  BackgroundPipelineScrubber (BackgroundSCMService.java:run(115)) - BackgroundPipelineScrubber is interrupted, exit
2024-01-02 20:32:16,232 [main] INFO  BackgroundPipelineScrubber (BackgroundSCMService.java:stop(131)) - Stopping BackgroundPipelineScrubber Service.
2024-01-02 20:32:16,232 [main] INFO  ExpiredContainerReplicaOpScrubber (BackgroundSCMService.java:stop(131)) - Stopping ExpiredContainerReplicaOpScrubber Service.
2024-01-02 20:32:16,232 [main] INFO  utils.BackgroundService (BackgroundService.java:shutdown(160)) - Shutting down service SCMBlockDeletingService
2024-01-02 20:32:16,232 [ExpiredContainerReplicaOpScrubber] WARN  ExpiredContainerReplicaOpScrubber (BackgroundSCMService.java:run(115)) - ExpiredContainerReplicaOpScrubber is interrupted, exit
2024-01-02 20:32:16,232 [main] INFO  replication.ReplicationManager (ReplicationManager.java:stop(336)) - Replication Monitor Thread is not running.
2024-01-02 20:32:16,233 [main] WARN  balancer.ContainerBalancer (ContainerBalancer.java:stop(327)) - Cannot stop Container Balancer because it's not running or stopping
2024-01-02 20:32:16,233 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1778)) - Stopping SCM MetadataStore.
2024-01-02 20:32:16,233 [test-leaseManagerLeaseManager#LeaseMonitor] WARN  lease.LeaseManager (LeaseManager.java:run(287)) - Lease manager is interrupted. Shutting down...
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedNanos(AbstractQueuedSynchronizer.java:1039)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.tryAcquireSharedNanos(AbstractQueuedSynchronizer.java:1328)
	at java.util.concurrent.Semaphore.tryAcquire(Semaphore.java:409)
	at org.apache.hadoop.ozone.lease.LeaseManager$LeaseMonitor.run(LeaseManager.java:285)
	at java.lang.Thread.run(Thread.java:750)
]]></system-out>
  </testcase>
  <testcase name="testAllocateBlock" classname="org.apache.hadoop.hdds.scm.block.TestBlockManager" time="0.166">
    <system-out><![CDATA[2024-01-02 20:32:16,258 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchemaFromFile(129)) - Loading schema from [file:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/classes/network-topology-default.xml]
2024-01-02 20:32:16,258 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchema(176)) - Loading network topology layer schema file
2024-01-02 20:32:16,267 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchemaFromFile(129)) - Loading schema from [file:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/classes/network-topology-default.xml]
2024-01-02 20:32:16,267 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchema(176)) - Loading network topology layer schema file
2024-01-02 20:32:16,268 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/7cf8e2e3-35d7-4621-8c6b-3b257fbb876c
2024-01-02 20:32:16,268 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/849a3ca2-be78-47b2-855a-e60f62098965
2024-01-02 20:32:16,268 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/3bae4bda-8767-4948-8bec-92e9829f3ec3
2024-01-02 20:32:16,268 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/bb257bc8-d5ac-4dd4-9509-e5914f14c381
2024-01-02 20:32:16,269 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/eaf42b52-e623-4ff4-be21-2efed29f9bf6
2024-01-02 20:32:16,269 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/0a0d0e8a-ce37-4dd7-a5e2-3ecea8c799c2
2024-01-02 20:32:16,269 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/31edff49-6add-4937-b5cc-59592bfa3553
2024-01-02 20:32:16,269 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/efc0495a-aa00-47e6-a280-a840c96dc7bc
2024-01-02 20:32:16,269 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/6403c70d-62db-4b00-ac09-9f714e7674d5
2024-01-02 20:32:16,269 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/0d972569-ca9d-4f1d-a225-87b007258065
2024-01-02 20:32:16,269 [main] WARN  utils.HAUtils (HAUtils.java:getMetaDir(339)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:16,270 [main] WARN  db.DBStoreBuilder (DBStoreBuilder.java:applyDBDefinition(167)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:16,338 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:<init>(241)) - Init the HA SequenceIdGenerator.
2024-01-02 20:32:16,338 [main] INFO  pipeline.PipelineStateManagerImpl (PipelineStateManagerImpl.java:initialize(78)) - No pipeline exists in current db
2024-01-02 20:32:16,338 [main] INFO  algorithms.LeaderChoosePolicyFactory (LeaderChoosePolicyFactory.java:getPolicy(57)) - Create leader choose policy of type org.apache.hadoop.hdds.scm.pipeline.leader.choose.algorithms.MinLeaderCountChoosePolicy
2024-01-02 20:32:16,339 [main] INFO  algorithms.ContainerPlacementPolicyFactory (ContainerPlacementPolicyFactory.java:getPolicyInternal(86)) - Create container placement policy of type org.apache.hadoop.hdds.scm.container.placement.algorithms.SCMContainerPlacementRackScatter
2024-01-02 20:32:16,339 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service BackgroundPipelineCreator.
2024-01-02 20:32:16,339 [main] INFO  pipeline.BackgroundPipelineCreator (BackgroundPipelineCreator.java:start(127)) - Starting RatisPipelineUtilsThread.
2024-01-02 20:32:16,339 [main] INFO  BackgroundPipelineScrubber (BackgroundSCMService.java:start(68)) - Starting BackgroundPipelineScrubber Service.
2024-01-02 20:32:16,340 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service BackgroundPipelineScrubber.
2024-01-02 20:32:16,340 [main] INFO  algorithms.LeaderChoosePolicyFactory (LeaderChoosePolicyFactory.java:getPolicy(57)) - Create leader choose policy of type org.apache.hadoop.hdds.scm.pipeline.leader.choose.algorithms.MinLeaderCountChoosePolicy
2024-01-02 20:32:16,341 [main] INFO  safemode.ContainerSafeModeRule (ContainerSafeModeRule.java:<init>(91)) - containers with one replica threshold count 0
2024-01-02 20:32:16,341 [main] INFO  safemode.HealthyPipelineSafeModeRule (HealthyPipelineSafeModeRule.java:initializeRule(176)) - Total pipeline count is 0, healthy pipeline threshold count is 0
2024-01-02 20:32:16,341 [main] INFO  safemode.OneReplicaPipelineSafeModeRule (OneReplicaPipelineSafeModeRule.java:initializeRule(193)) - Total pipeline count is 0, pipeline's with at least one datanode reported threshold count is 0
2024-01-02 20:32:16,341 [main] WARN  server.ServerUtils (ServerUtils.java:getScmDbDir(155)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:16,342 [main] WARN  server.ServerUtils (ServerUtils.java:getScmDbDir(155)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:16,342 [main] INFO  ha.SCMHANodeDetails (SCMHANodeDetails.java:loadSCMHAConfig(207)) - ServiceID for StorageContainerManager is null
2024-01-02 20:32:16,343 [main] INFO  ha.SCMHANodeDetails (SCMHANodeDetails.java:loadSCMHAConfig(212)) - ozone.scm.default.service.id is not defined, falling back to ozone.scm.service.ids to find serviceID for StorageContainerManager if it is HA enabled cluster
2024-01-02 20:32:16,343 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchemaFromFile(129)) - Loading schema from [file:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/classes/network-topology-default.xml]
2024-01-02 20:32:16,344 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchema(176)) - Loading network topology layer schema file
2024-01-02 20:32:16,345 [main] INFO  upgrade.AbstractLayoutVersionManager (AbstractLayoutVersionManager.java:init(83)) - Initializing Layout version manager with metadata layout = HADOOP_PRC_PORTS_IN_DATANODEDETAILS (version = 7), software layout = HADOOP_PRC_PORTS_IN_DATANODEDETAILS (version = 7)
2024-01-02 20:32:16,346 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToSequenceId(370)) - upgrade localId to 113750153625600000
2024-01-02 20:32:16,347 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToSequenceId(380)) - upgrade delTxnId to 0
2024-01-02 20:32:16,347 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToSequenceId(397)) - upgrade containerId to 0
2024-01-02 20:32:16,348 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToCertificateSequenceId(444)) - upgrade CertificateId to 2
2024-01-02 20:32:16,348 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:<init>(241)) - Init the HA SequenceIdGenerator.
2024-01-02 20:32:16,348 [main] INFO  algorithms.ContainerPlacementPolicyFactory (ContainerPlacementPolicyFactory.java:getPolicyInternal(86)) - Create container placement policy of type org.apache.hadoop.hdds.scm.container.placement.algorithms.SCMContainerPlacementRackAware
2024-01-02 20:32:16,348 [main] INFO  algorithms.ContainerPlacementPolicyFactory (ContainerPlacementPolicyFactory.java:getPolicyInternal(86)) - Create container placement policy of type org.apache.hadoop.hdds.scm.container.placement.algorithms.SCMContainerPlacementRackScatter
2024-01-02 20:32:16,349 [main] INFO  ExpiredContainerReplicaOpScrubber (BackgroundSCMService.java:start(68)) - Starting ExpiredContainerReplicaOpScrubber Service.
2024-01-02 20:32:16,349 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service ExpiredContainerReplicaOpScrubber.
2024-01-02 20:32:16,349 [main] INFO  algorithms.PipelineChoosePolicyFactory (PipelineChoosePolicyFactory.java:createPipelineChoosePolicyFromClass(78)) - Create pipeline choose policy of type org.apache.hadoop.hdds.scm.pipeline.choose.algorithms.RandomPipelineChoosePolicy
2024-01-02 20:32:16,350 [main] INFO  algorithms.PipelineChoosePolicyFactory (PipelineChoosePolicyFactory.java:createPipelineChoosePolicyFromClass(78)) - Create pipeline choose policy of type org.apache.hadoop.hdds.scm.pipeline.choose.algorithms.RandomPipelineChoosePolicy
2024-01-02 20:32:16,350 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service SCMBlockDeletingService.
2024-01-02 20:32:16,351 [main] INFO  replication.ReplicationManager (ReplicationManager.java:start(294)) - Starting Replication Monitor Thread.
2024-01-02 20:32:16,352 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service ReplicationManager.
2024-01-02 20:32:16,352 [ReplicationMonitor] INFO  replication.ReplicationManager (ReplicationManager.java:processAll(369)) - Replication Manager is not ready to run until 300000ms after safemode exit
2024-01-02 20:32:16,353 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:<init>(440)) - SCM start with adminUsers: [runner]
2024-01-02 20:32:16,353 [main] INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(90)) - Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
2024-01-02 20:32:16,353 [main] INFO  ipc.Server (Server.java:<init>(1287)) - Listener at 0.0.0.0:40081
2024-01-02 20:32:16,354 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:run(1323)) - Starting Socket Reader #1 for port 0
2024-01-02 20:32:16,357 [main] INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(90)) - Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
2024-01-02 20:32:16,357 [main] INFO  ipc.Server (Server.java:<init>(1287)) - Listener at 0.0.0.0:39747
2024-01-02 20:32:16,357 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:run(1323)) - Starting Socket Reader #1 for port 0
2024-01-02 20:32:16,364 [main] INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(90)) - Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
2024-01-02 20:32:16,364 [main] INFO  ipc.Server (Server.java:<init>(1287)) - Listener at 0.0.0.0:34557
2024-01-02 20:32:16,366 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:run(1323)) - Starting Socket Reader #1 for port 0
2024-01-02 20:32:16,381 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service ContainerBalancer.
2024-01-02 20:32:16,382 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:<init>(453)) - 
Container Balancer status:
Key                            Value
Running                        false
Container Balancer Configuration values:
Key                                                Value
Threshold                                          10
Max Datanodes to Involve per Iteration(percent)    20
Max Size to Move per Iteration                     500GB
Max Size Entering Target per Iteration             26GB
Max Size Leaving Source per Iteration              26GB
Number of Iterations                               10
Time Limit for Single Container's Movement         65min
Time Limit for Single Container's Replication      50min
Interval between each Iteration                    70min
Whether to Enable Network Topology                 false
Whether to Trigger Refresh Datanode Usage Info     false
Container IDs to Exclude from Balancing            None
Datanodes Specified to be Balanced                 None
Datanodes Excluded from Balancing                  None

2024-01-02 20:32:16,383 [main] INFO  ha.SCMContext (SCMContext.java:updateSafeModeStatus(230)) - Update SafeModeStatus from SafeModeStatus{safeModeStatus=false, preCheckPassed=true} to SafeModeStatus{safeModeStatus=false, preCheckPassed=true}.
2024-01-02 20:32:16,384 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=8e41a7ac-4fb8-4eb6-bd48-9e3891dc7fdf to datanode:849a3ca2-be78-47b2-855a-e60f62098965
2024-01-02 20:32:16,384 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=8e41a7ac-4fb8-4eb6-bd48-9e3891dc7fdf to datanode:bb257bc8-d5ac-4dd4-9509-e5914f14c381
2024-01-02 20:32:16,384 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=8e41a7ac-4fb8-4eb6-bd48-9e3891dc7fdf to datanode:efc0495a-aa00-47e6-a280-a840c96dc7bc
2024-01-02 20:32:16,387 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:getNextId(145)) - Allocate a batch for containerId, change lastId from 0 to 1000.
2024-01-02 20:32:16,388 [main] WARN  ha.SequenceIdGenerator (SequenceIdGenerator.java:allocateBatch(258)) - Failed to allocate a batch for localId, expected lastId is 0, actual lastId is 113750153625600000.
2024-01-02 20:32:16,388 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:getNextId(145)) - Allocate a batch for localId, change lastId from 113750153625600000 to 113750153625601000.
2024-01-02 20:32:16,389 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1654)) - Container Balancer is not running.
2024-01-02 20:32:16,389 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stopReplicationManager(1787)) - Stopping Replication Manager Service.
2024-01-02 20:32:16,389 [main] INFO  replication.ReplicationManager (ReplicationManager.java:stop(326)) - Stopping Replication Monitor Thread.
2024-01-02 20:32:16,389 [UnderReplicatedProcessor] WARN  replication.UnhealthyReplicationProcessor (UnhealthyReplicationProcessor.java:run(180)) - UnderReplicatedProcessor interrupted. Exiting...
2024-01-02 20:32:16,393 [Finalizer] WARN  managed.ManagedRocksObjectUtils (ManagedRocksObjectUtils.java:reportLeak(67)) - ManagedWriteBatch is not closed properly
2024-01-02 20:32:16,390 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1663)) - Stopping the Datanode Admin Monitor.
2024-01-02 20:32:16,390 [ReplicationMonitor] INFO  replication.ReplicationManager (ReplicationManager.java:run(933)) - Replication Monitor Thread is stopped
2024-01-02 20:32:16,389 [OverReplicatedProcessor] WARN  replication.UnhealthyReplicationProcessor (UnhealthyReplicationProcessor.java:run(180)) - OverReplicatedProcessor interrupted. Exiting...
2024-01-02 20:32:16,395 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1670)) - Stopping datanode service RPC server
2024-01-02 20:32:16,396 [main] INFO  server.SCMDatanodeProtocolServer (SCMDatanodeProtocolServer.java:stop(424)) - Stopping the RPC server for DataNodes
2024-01-02 20:32:16,396 [main] INFO  ipc.Server (Server.java:stop(3523)) - Stopping server on 40081
2024-01-02 20:32:16,395 [Finalizer] WARN  managed.ManagedRocksObjectUtils (ManagedRocksObjectUtils.java:reportLeak(67)) - ManagedWriteBatch is not closed properly
2024-01-02 20:32:16,396 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1678)) - Stopping block service RPC server
2024-01-02 20:32:16,397 [main] INFO  server.SCMBlockProtocolServer (SCMBlockProtocolServer.java:stop(168)) - Stopping the RPC server for Block Protocol
2024-01-02 20:32:16,397 [main] INFO  ipc.Server (Server.java:stop(3523)) - Stopping server on 39747
2024-01-02 20:32:16,396 [Finalizer] WARN  managed.ManagedRocksObjectUtils (ManagedRocksObjectUtils.java:reportLeak(67)) - ManagedWriteBatch is not closed properly
2024-01-02 20:32:16,397 [Finalizer] WARN  managed.ManagedRocksObjectUtils (ManagedRocksObjectUtils.java:reportLeak(67)) - ManagedWriteBatch is not closed properly
2024-01-02 20:32:16,397 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1685)) - Stopping the StorageContainerLocationProtocol RPC server
2024-01-02 20:32:16,397 [main] INFO  server.SCMClientProtocolServer (SCMClientProtocolServer.java:stop(210)) - Stopping the RPC server for Client Protocol
2024-01-02 20:32:16,398 [main] INFO  ipc.Server (Server.java:stop(3523)) - Stopping server on 34557
2024-01-02 20:32:16,398 [Finalizer] WARN  managed.ManagedRocksObjectUtils (ManagedRocksObjectUtils.java:reportLeak(67)) - ManagedWriteBatch is not closed properly
2024-01-02 20:32:16,399 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1692)) - Stopping Storage Container Manager HTTP server.
2024-01-02 20:32:16,399 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1700)) - Stopping SCM LayoutVersionManager Service.
2024-01-02 20:32:16,399 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1712)) - Stopping Block Manager Service.
2024-01-02 20:32:16,399 [main] INFO  utils.BackgroundService (BackgroundService.java:shutdown(160)) - Shutting down service SCMBlockDeletingService
2024-01-02 20:32:16,399 [main] INFO  utils.BackgroundService (BackgroundService.java:shutdown(160)) - Shutting down service SCMBlockDeletingService
2024-01-02 20:32:16,399 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1732)) - Stopping SCM Event Queue.
2024-01-02 20:32:16,401 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1743)) - Stopping SCM HA services.
2024-01-02 20:32:16,401 [main] INFO  pipeline.BackgroundPipelineCreator (BackgroundPipelineCreator.java:stop(152)) - Stopping RatisPipelineUtilsThread.
2024-01-02 20:32:16,401 [RatisPipelineUtilsThread-0] WARN  pipeline.BackgroundPipelineCreator (BackgroundPipelineCreator.java:run(183)) - RatisPipelineUtilsThread is interrupted.
2024-01-02 20:32:16,401 [main] INFO  BackgroundPipelineScrubber (BackgroundSCMService.java:stop(131)) - Stopping BackgroundPipelineScrubber Service.
2024-01-02 20:32:16,401 [BackgroundPipelineScrubber] WARN  BackgroundPipelineScrubber (BackgroundSCMService.java:run(115)) - BackgroundPipelineScrubber is interrupted, exit
2024-01-02 20:32:16,402 [main] INFO  ExpiredContainerReplicaOpScrubber (BackgroundSCMService.java:stop(131)) - Stopping ExpiredContainerReplicaOpScrubber Service.
2024-01-02 20:32:16,402 [ExpiredContainerReplicaOpScrubber] WARN  ExpiredContainerReplicaOpScrubber (BackgroundSCMService.java:run(115)) - ExpiredContainerReplicaOpScrubber is interrupted, exit
2024-01-02 20:32:16,402 [main] INFO  utils.BackgroundService (BackgroundService.java:shutdown(160)) - Shutting down service SCMBlockDeletingService
2024-01-02 20:32:16,402 [main] INFO  replication.ReplicationManager (ReplicationManager.java:stop(336)) - Replication Monitor Thread is not running.
2024-01-02 20:32:16,402 [main] WARN  balancer.ContainerBalancer (ContainerBalancer.java:stop(327)) - Cannot stop Container Balancer because it's not running or stopping
2024-01-02 20:32:16,402 [test-leaseManagerLeaseManager#LeaseMonitor] WARN  lease.LeaseManager (LeaseManager.java:run(287)) - Lease manager is interrupted. Shutting down...
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedNanos(AbstractQueuedSynchronizer.java:1039)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.tryAcquireSharedNanos(AbstractQueuedSynchronizer.java:1328)
	at java.util.concurrent.Semaphore.tryAcquire(Semaphore.java:409)
	at org.apache.hadoop.ozone.lease.LeaseManager$LeaseMonitor.run(LeaseManager.java:285)
	at java.lang.Thread.run(Thread.java:750)
2024-01-02 20:32:16,402 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1778)) - Stopping SCM MetadataStore.
]]></system-out>
  </testcase>
  <testcase name="testBlockDistributionWithMultipleDisks" classname="org.apache.hadoop.hdds.scm.block.TestBlockManager" time="0.152">
    <system-out><![CDATA[2024-01-02 20:32:16,422 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchemaFromFile(129)) - Loading schema from [file:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/classes/network-topology-default.xml]
2024-01-02 20:32:16,422 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchema(176)) - Loading network topology layer schema file
2024-01-02 20:32:16,431 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchemaFromFile(129)) - Loading schema from [file:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/classes/network-topology-default.xml]
2024-01-02 20:32:16,431 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchema(176)) - Loading network topology layer schema file
2024-01-02 20:32:16,432 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/04d2f305-d964-434c-8908-1861132f2147
2024-01-02 20:32:16,432 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/31c4b73e-20ea-4025-8644-535db8681246
2024-01-02 20:32:16,433 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/f6e577e1-8485-4ab1-8ea2-0449b5858211
2024-01-02 20:32:16,433 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/c2c99ab0-b62d-4117-bb99-a6b2b9777fc8
2024-01-02 20:32:16,433 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/ab99d25f-4929-4148-b869-83ce2fcd2ad4
2024-01-02 20:32:16,433 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/17e41ca5-9263-48f9-bb95-6c0e75c9b903
2024-01-02 20:32:16,434 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/a9f3732d-516a-4755-a5b1-083d6603f24a
2024-01-02 20:32:16,434 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/f0fdfd9a-54dd-49b6-8ce9-c121685323c6
2024-01-02 20:32:16,434 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/5c111de0-fa22-4bdd-81e9-32c3771f3d2f
2024-01-02 20:32:16,434 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/32b9535a-4b92-4310-af45-044641c5efb8
2024-01-02 20:32:16,434 [main] WARN  utils.HAUtils (HAUtils.java:getMetaDir(339)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:16,435 [main] WARN  db.DBStoreBuilder (DBStoreBuilder.java:applyDBDefinition(167)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:16,499 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:<init>(241)) - Init the HA SequenceIdGenerator.
2024-01-02 20:32:16,499 [main] INFO  pipeline.PipelineStateManagerImpl (PipelineStateManagerImpl.java:initialize(78)) - No pipeline exists in current db
2024-01-02 20:32:16,499 [main] INFO  algorithms.LeaderChoosePolicyFactory (LeaderChoosePolicyFactory.java:getPolicy(57)) - Create leader choose policy of type org.apache.hadoop.hdds.scm.pipeline.leader.choose.algorithms.MinLeaderCountChoosePolicy
2024-01-02 20:32:16,500 [main] INFO  algorithms.ContainerPlacementPolicyFactory (ContainerPlacementPolicyFactory.java:getPolicyInternal(86)) - Create container placement policy of type org.apache.hadoop.hdds.scm.container.placement.algorithms.SCMContainerPlacementRackScatter
2024-01-02 20:32:16,500 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service BackgroundPipelineCreator.
2024-01-02 20:32:16,500 [main] INFO  pipeline.BackgroundPipelineCreator (BackgroundPipelineCreator.java:start(127)) - Starting RatisPipelineUtilsThread.
2024-01-02 20:32:16,500 [main] INFO  BackgroundPipelineScrubber (BackgroundSCMService.java:start(68)) - Starting BackgroundPipelineScrubber Service.
2024-01-02 20:32:16,501 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service BackgroundPipelineScrubber.
2024-01-02 20:32:16,501 [main] INFO  algorithms.LeaderChoosePolicyFactory (LeaderChoosePolicyFactory.java:getPolicy(57)) - Create leader choose policy of type org.apache.hadoop.hdds.scm.pipeline.leader.choose.algorithms.MinLeaderCountChoosePolicy
2024-01-02 20:32:16,502 [main] INFO  safemode.ContainerSafeModeRule (ContainerSafeModeRule.java:<init>(91)) - containers with one replica threshold count 0
2024-01-02 20:32:16,502 [main] INFO  safemode.HealthyPipelineSafeModeRule (HealthyPipelineSafeModeRule.java:initializeRule(176)) - Total pipeline count is 0, healthy pipeline threshold count is 0
2024-01-02 20:32:16,502 [main] INFO  safemode.OneReplicaPipelineSafeModeRule (OneReplicaPipelineSafeModeRule.java:initializeRule(193)) - Total pipeline count is 0, pipeline's with at least one datanode reported threshold count is 0
2024-01-02 20:32:16,503 [main] WARN  server.ServerUtils (ServerUtils.java:getScmDbDir(155)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:16,504 [main] WARN  server.ServerUtils (ServerUtils.java:getScmDbDir(155)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:16,504 [main] INFO  ha.SCMHANodeDetails (SCMHANodeDetails.java:loadSCMHAConfig(207)) - ServiceID for StorageContainerManager is null
2024-01-02 20:32:16,504 [main] INFO  ha.SCMHANodeDetails (SCMHANodeDetails.java:loadSCMHAConfig(212)) - ozone.scm.default.service.id is not defined, falling back to ozone.scm.service.ids to find serviceID for StorageContainerManager if it is HA enabled cluster
2024-01-02 20:32:16,506 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchemaFromFile(129)) - Loading schema from [file:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/classes/network-topology-default.xml]
2024-01-02 20:32:16,506 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchema(176)) - Loading network topology layer schema file
2024-01-02 20:32:16,507 [main] INFO  upgrade.AbstractLayoutVersionManager (AbstractLayoutVersionManager.java:init(83)) - Initializing Layout version manager with metadata layout = HADOOP_PRC_PORTS_IN_DATANODEDETAILS (version = 7), software layout = HADOOP_PRC_PORTS_IN_DATANODEDETAILS (version = 7)
2024-01-02 20:32:16,508 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToSequenceId(370)) - upgrade localId to 113750153625600000
2024-01-02 20:32:16,509 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToSequenceId(380)) - upgrade delTxnId to 0
2024-01-02 20:32:16,510 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToSequenceId(397)) - upgrade containerId to 0
2024-01-02 20:32:16,510 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToCertificateSequenceId(444)) - upgrade CertificateId to 2
2024-01-02 20:32:16,510 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:<init>(241)) - Init the HA SequenceIdGenerator.
2024-01-02 20:32:16,510 [main] INFO  algorithms.ContainerPlacementPolicyFactory (ContainerPlacementPolicyFactory.java:getPolicyInternal(86)) - Create container placement policy of type org.apache.hadoop.hdds.scm.container.placement.algorithms.SCMContainerPlacementRackAware
2024-01-02 20:32:16,511 [main] INFO  algorithms.ContainerPlacementPolicyFactory (ContainerPlacementPolicyFactory.java:getPolicyInternal(86)) - Create container placement policy of type org.apache.hadoop.hdds.scm.container.placement.algorithms.SCMContainerPlacementRackScatter
2024-01-02 20:32:16,511 [main] INFO  ExpiredContainerReplicaOpScrubber (BackgroundSCMService.java:start(68)) - Starting ExpiredContainerReplicaOpScrubber Service.
2024-01-02 20:32:16,511 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service ExpiredContainerReplicaOpScrubber.
2024-01-02 20:32:16,511 [main] INFO  algorithms.PipelineChoosePolicyFactory (PipelineChoosePolicyFactory.java:createPipelineChoosePolicyFromClass(78)) - Create pipeline choose policy of type org.apache.hadoop.hdds.scm.pipeline.choose.algorithms.RandomPipelineChoosePolicy
2024-01-02 20:32:16,512 [main] INFO  algorithms.PipelineChoosePolicyFactory (PipelineChoosePolicyFactory.java:createPipelineChoosePolicyFromClass(78)) - Create pipeline choose policy of type org.apache.hadoop.hdds.scm.pipeline.choose.algorithms.RandomPipelineChoosePolicy
2024-01-02 20:32:16,512 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service SCMBlockDeletingService.
2024-01-02 20:32:16,513 [main] INFO  replication.ReplicationManager (ReplicationManager.java:start(294)) - Starting Replication Monitor Thread.
2024-01-02 20:32:16,517 [ReplicationMonitor] INFO  replication.ReplicationManager (ReplicationManager.java:processAll(369)) - Replication Manager is not ready to run until 300000ms after safemode exit
2024-01-02 20:32:16,517 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service ReplicationManager.
2024-01-02 20:32:16,518 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:<init>(440)) - SCM start with adminUsers: [runner]
2024-01-02 20:32:16,518 [main] INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(90)) - Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
2024-01-02 20:32:16,518 [main] INFO  ipc.Server (Server.java:<init>(1287)) - Listener at 0.0.0.0:45815
2024-01-02 20:32:16,519 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:run(1323)) - Starting Socket Reader #1 for port 0
2024-01-02 20:32:16,526 [main] INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(90)) - Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
2024-01-02 20:32:16,526 [main] INFO  ipc.Server (Server.java:<init>(1287)) - Listener at 0.0.0.0:33281
2024-01-02 20:32:16,526 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:run(1323)) - Starting Socket Reader #1 for port 0
2024-01-02 20:32:16,529 [main] INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(90)) - Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
2024-01-02 20:32:16,529 [main] INFO  ipc.Server (Server.java:<init>(1287)) - Listener at 0.0.0.0:44711
2024-01-02 20:32:16,531 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:run(1323)) - Starting Socket Reader #1 for port 0
2024-01-02 20:32:16,533 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service ContainerBalancer.
2024-01-02 20:32:16,534 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:<init>(453)) - 
Container Balancer status:
Key                            Value
Running                        false
Container Balancer Configuration values:
Key                                                Value
Threshold                                          10
Max Datanodes to Involve per Iteration(percent)    20
Max Size to Move per Iteration                     500GB
Max Size Entering Target per Iteration             26GB
Max Size Leaving Source per Iteration              26GB
Number of Iterations                               10
Time Limit for Single Container's Movement         65min
Time Limit for Single Container's Replication      50min
Interval between each Iteration                    70min
Whether to Enable Network Topology                 false
Whether to Trigger Refresh Datanode Usage Info     false
Container IDs to Exclude from Balancing            None
Datanodes Specified to be Balanced                 None
Datanodes Excluded from Balancing                  None

2024-01-02 20:32:16,534 [main] INFO  ha.SCMContext (SCMContext.java:updateSafeModeStatus(230)) - Update SafeModeStatus from SafeModeStatus{safeModeStatus=false, preCheckPassed=true} to SafeModeStatus{safeModeStatus=false, preCheckPassed=true}.
2024-01-02 20:32:16,535 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=83fb84e8-b782-4c94-8429-0a267665d635 to datanode:31c4b73e-20ea-4025-8644-535db8681246
2024-01-02 20:32:16,535 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=83fb84e8-b782-4c94-8429-0a267665d635 to datanode:f0fdfd9a-54dd-49b6-8ce9-c121685323c6
2024-01-02 20:32:16,536 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=83fb84e8-b782-4c94-8429-0a267665d635 to datanode:c2c99ab0-b62d-4117-bb99-a6b2b9777fc8
2024-01-02 20:32:16,538 [pool-342-thread-1] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:getNextId(145)) - Allocate a batch for containerId, change lastId from 0 to 1000.
2024-01-02 20:32:16,540 [pool-342-thread-1] WARN  ha.SequenceIdGenerator (SequenceIdGenerator.java:allocateBatch(258)) - Failed to allocate a batch for localId, expected lastId is 0, actual lastId is 113750153625600000.
2024-01-02 20:32:16,540 [pool-342-thread-1] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:getNextId(145)) - Allocate a batch for localId, change lastId from 113750153625600000 to 113750153625601000.
2024-01-02 20:32:16,550 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1654)) - Container Balancer is not running.
2024-01-02 20:32:16,551 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stopReplicationManager(1787)) - Stopping Replication Manager Service.
2024-01-02 20:32:16,551 [main] INFO  replication.ReplicationManager (ReplicationManager.java:stop(326)) - Stopping Replication Monitor Thread.
2024-01-02 20:32:16,551 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1663)) - Stopping the Datanode Admin Monitor.
2024-01-02 20:32:16,551 [ReplicationMonitor] INFO  replication.ReplicationManager (ReplicationManager.java:run(933)) - Replication Monitor Thread is stopped
2024-01-02 20:32:16,551 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1670)) - Stopping datanode service RPC server
2024-01-02 20:32:16,551 [main] INFO  server.SCMDatanodeProtocolServer (SCMDatanodeProtocolServer.java:stop(424)) - Stopping the RPC server for DataNodes
2024-01-02 20:32:16,552 [main] INFO  ipc.Server (Server.java:stop(3523)) - Stopping server on 45815
2024-01-02 20:32:16,551 [UnderReplicatedProcessor] WARN  replication.UnhealthyReplicationProcessor (UnhealthyReplicationProcessor.java:run(180)) - UnderReplicatedProcessor interrupted. Exiting...
2024-01-02 20:32:16,552 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1678)) - Stopping block service RPC server
2024-01-02 20:32:16,552 [main] INFO  server.SCMBlockProtocolServer (SCMBlockProtocolServer.java:stop(168)) - Stopping the RPC server for Block Protocol
2024-01-02 20:32:16,552 [main] INFO  ipc.Server (Server.java:stop(3523)) - Stopping server on 33281
2024-01-02 20:32:16,551 [OverReplicatedProcessor] WARN  replication.UnhealthyReplicationProcessor (UnhealthyReplicationProcessor.java:run(180)) - OverReplicatedProcessor interrupted. Exiting...
2024-01-02 20:32:16,553 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1685)) - Stopping the StorageContainerLocationProtocol RPC server
2024-01-02 20:32:16,553 [main] INFO  server.SCMClientProtocolServer (SCMClientProtocolServer.java:stop(210)) - Stopping the RPC server for Client Protocol
2024-01-02 20:32:16,553 [main] INFO  ipc.Server (Server.java:stop(3523)) - Stopping server on 44711
2024-01-02 20:32:16,555 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1692)) - Stopping Storage Container Manager HTTP server.
2024-01-02 20:32:16,555 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1700)) - Stopping SCM LayoutVersionManager Service.
2024-01-02 20:32:16,555 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1712)) - Stopping Block Manager Service.
2024-01-02 20:32:16,555 [main] INFO  utils.BackgroundService (BackgroundService.java:shutdown(160)) - Shutting down service SCMBlockDeletingService
2024-01-02 20:32:16,555 [main] INFO  utils.BackgroundService (BackgroundService.java:shutdown(160)) - Shutting down service SCMBlockDeletingService
2024-01-02 20:32:16,555 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1732)) - Stopping SCM Event Queue.
2024-01-02 20:32:16,556 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1743)) - Stopping SCM HA services.
2024-01-02 20:32:16,556 [main] INFO  pipeline.BackgroundPipelineCreator (BackgroundPipelineCreator.java:stop(152)) - Stopping RatisPipelineUtilsThread.
2024-01-02 20:32:16,556 [RatisPipelineUtilsThread-0] WARN  pipeline.BackgroundPipelineCreator (BackgroundPipelineCreator.java:run(183)) - RatisPipelineUtilsThread is interrupted.
2024-01-02 20:32:16,556 [main] INFO  BackgroundPipelineScrubber (BackgroundSCMService.java:stop(131)) - Stopping BackgroundPipelineScrubber Service.
2024-01-02 20:32:16,556 [BackgroundPipelineScrubber] WARN  BackgroundPipelineScrubber (BackgroundSCMService.java:run(115)) - BackgroundPipelineScrubber is interrupted, exit
2024-01-02 20:32:16,557 [main] INFO  ExpiredContainerReplicaOpScrubber (BackgroundSCMService.java:stop(131)) - Stopping ExpiredContainerReplicaOpScrubber Service.
2024-01-02 20:32:16,557 [ExpiredContainerReplicaOpScrubber] WARN  ExpiredContainerReplicaOpScrubber (BackgroundSCMService.java:run(115)) - ExpiredContainerReplicaOpScrubber is interrupted, exit
2024-01-02 20:32:16,557 [main] INFO  utils.BackgroundService (BackgroundService.java:shutdown(160)) - Shutting down service SCMBlockDeletingService
2024-01-02 20:32:16,557 [main] INFO  replication.ReplicationManager (ReplicationManager.java:stop(336)) - Replication Monitor Thread is not running.
2024-01-02 20:32:16,557 [main] WARN  balancer.ContainerBalancer (ContainerBalancer.java:stop(327)) - Cannot stop Container Balancer because it's not running or stopping
2024-01-02 20:32:16,557 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1778)) - Stopping SCM MetadataStore.
2024-01-02 20:32:16,558 [test-leaseManagerLeaseManager#LeaseMonitor] WARN  lease.LeaseManager (LeaseManager.java:run(287)) - Lease manager is interrupted. Shutting down...
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedNanos(AbstractQueuedSynchronizer.java:1039)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.tryAcquireSharedNanos(AbstractQueuedSynchronizer.java:1328)
	at java.util.concurrent.Semaphore.tryAcquire(Semaphore.java:409)
	at org.apache.hadoop.ozone.lease.LeaseManager$LeaseMonitor.run(LeaseManager.java:285)
	at java.lang.Thread.run(Thread.java:750)
]]></system-out>
  </testcase>
  <testcase name="testBlockDistribution" classname="org.apache.hadoop.hdds.scm.block.TestBlockManager" time="0.143">
    <failure message="expected: &lt;3&gt; but was: &lt;1&gt;" type="org.opentest4j.AssertionFailedError"><![CDATA[org.opentest4j.AssertionFailedError: expected: <3> but was: <1>
	at org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:151)
	at org.junit.jupiter.api.AssertionFailureBuilder.buildAndThrow(AssertionFailureBuilder.java:132)
	at org.junit.jupiter.api.AssertEquals.failNotEqual(AssertEquals.java:197)
	at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:150)
	at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:145)
	at org.junit.jupiter.api.Assertions.assertEquals(Assertions.java:531)
	at org.apache.hadoop.hdds.scm.block.TestBlockManager.lambda$testBlockDistribution$2(TestBlockManager.java:333)
	at java.util.concurrent.ConcurrentHashMap$ValuesView.forEach(ConcurrentHashMap.java:4705)
	at org.apache.hadoop.hdds.scm.block.TestBlockManager.testBlockDistribution(TestBlockManager.java:332)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at java.util.ArrayList.forEach(ArrayList.java:1259)
	at java.util.ArrayList.forEach(ArrayList.java:1259)
]]></failure>
    <system-out><![CDATA[2024-01-02 20:32:16,575 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchemaFromFile(129)) - Loading schema from [file:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/classes/network-topology-default.xml]
2024-01-02 20:32:16,575 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchema(176)) - Loading network topology layer schema file
2024-01-02 20:32:16,585 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchemaFromFile(129)) - Loading schema from [file:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/classes/network-topology-default.xml]
2024-01-02 20:32:16,585 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchema(176)) - Loading network topology layer schema file
2024-01-02 20:32:16,586 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/b59c269a-068e-4417-9472-7c7ee519a49c
2024-01-02 20:32:16,586 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/e858c0b4-7af2-4c14-86cf-ade0e8212c63
2024-01-02 20:32:16,586 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/d8fbd0ed-ed0f-46fa-8af9-65dd0c870b7a
2024-01-02 20:32:16,586 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/7fc48330-9b86-4aba-9083-eac4f5efd33a
2024-01-02 20:32:16,586 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/a226692f-137b-4d0c-8fe2-c38bab5f2dd9
2024-01-02 20:32:16,587 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/f262e7c6-4fa0-4797-814c-cea940d1c0db
2024-01-02 20:32:16,587 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/93650a8e-952c-4528-a3ed-47fd202fdd6e
2024-01-02 20:32:16,587 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/21e8a8cf-55c2-4081-b4d4-3c91205a0cbf
2024-01-02 20:32:16,587 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/1c1228fd-28af-4dbd-8733-c611d6c47746
2024-01-02 20:32:16,587 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/c8f8b188-d69b-4533-8929-ca12d9185662
2024-01-02 20:32:16,587 [main] WARN  utils.HAUtils (HAUtils.java:getMetaDir(339)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:16,588 [main] WARN  db.DBStoreBuilder (DBStoreBuilder.java:applyDBDefinition(167)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:16,654 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:<init>(241)) - Init the HA SequenceIdGenerator.
2024-01-02 20:32:16,654 [main] INFO  pipeline.PipelineStateManagerImpl (PipelineStateManagerImpl.java:initialize(78)) - No pipeline exists in current db
2024-01-02 20:32:16,654 [main] INFO  algorithms.LeaderChoosePolicyFactory (LeaderChoosePolicyFactory.java:getPolicy(57)) - Create leader choose policy of type org.apache.hadoop.hdds.scm.pipeline.leader.choose.algorithms.MinLeaderCountChoosePolicy
2024-01-02 20:32:16,655 [main] INFO  algorithms.ContainerPlacementPolicyFactory (ContainerPlacementPolicyFactory.java:getPolicyInternal(86)) - Create container placement policy of type org.apache.hadoop.hdds.scm.container.placement.algorithms.SCMContainerPlacementRackScatter
2024-01-02 20:32:16,655 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service BackgroundPipelineCreator.
2024-01-02 20:32:16,655 [main] INFO  pipeline.BackgroundPipelineCreator (BackgroundPipelineCreator.java:start(127)) - Starting RatisPipelineUtilsThread.
2024-01-02 20:32:16,655 [main] INFO  BackgroundPipelineScrubber (BackgroundSCMService.java:start(68)) - Starting BackgroundPipelineScrubber Service.
2024-01-02 20:32:16,656 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service BackgroundPipelineScrubber.
2024-01-02 20:32:16,656 [main] INFO  algorithms.LeaderChoosePolicyFactory (LeaderChoosePolicyFactory.java:getPolicy(57)) - Create leader choose policy of type org.apache.hadoop.hdds.scm.pipeline.leader.choose.algorithms.MinLeaderCountChoosePolicy
2024-01-02 20:32:16,656 [main] INFO  safemode.ContainerSafeModeRule (ContainerSafeModeRule.java:<init>(91)) - containers with one replica threshold count 0
2024-01-02 20:32:16,657 [main] INFO  safemode.HealthyPipelineSafeModeRule (HealthyPipelineSafeModeRule.java:initializeRule(176)) - Total pipeline count is 0, healthy pipeline threshold count is 0
2024-01-02 20:32:16,657 [main] INFO  safemode.OneReplicaPipelineSafeModeRule (OneReplicaPipelineSafeModeRule.java:initializeRule(193)) - Total pipeline count is 0, pipeline's with at least one datanode reported threshold count is 0
2024-01-02 20:32:16,657 [main] WARN  server.ServerUtils (ServerUtils.java:getScmDbDir(155)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:16,659 [main] WARN  server.ServerUtils (ServerUtils.java:getScmDbDir(155)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:16,659 [main] INFO  ha.SCMHANodeDetails (SCMHANodeDetails.java:loadSCMHAConfig(207)) - ServiceID for StorageContainerManager is null
2024-01-02 20:32:16,659 [main] INFO  ha.SCMHANodeDetails (SCMHANodeDetails.java:loadSCMHAConfig(212)) - ozone.scm.default.service.id is not defined, falling back to ozone.scm.service.ids to find serviceID for StorageContainerManager if it is HA enabled cluster
2024-01-02 20:32:16,660 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchemaFromFile(129)) - Loading schema from [file:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/classes/network-topology-default.xml]
2024-01-02 20:32:16,660 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchema(176)) - Loading network topology layer schema file
2024-01-02 20:32:16,661 [main] INFO  upgrade.AbstractLayoutVersionManager (AbstractLayoutVersionManager.java:init(83)) - Initializing Layout version manager with metadata layout = HADOOP_PRC_PORTS_IN_DATANODEDETAILS (version = 7), software layout = HADOOP_PRC_PORTS_IN_DATANODEDETAILS (version = 7)
2024-01-02 20:32:16,663 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToSequenceId(370)) - upgrade localId to 113750153625600000
2024-01-02 20:32:16,663 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToSequenceId(380)) - upgrade delTxnId to 0
2024-01-02 20:32:16,664 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToSequenceId(397)) - upgrade containerId to 0
2024-01-02 20:32:16,664 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToCertificateSequenceId(444)) - upgrade CertificateId to 2
2024-01-02 20:32:16,664 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:<init>(241)) - Init the HA SequenceIdGenerator.
2024-01-02 20:32:16,665 [main] INFO  algorithms.ContainerPlacementPolicyFactory (ContainerPlacementPolicyFactory.java:getPolicyInternal(86)) - Create container placement policy of type org.apache.hadoop.hdds.scm.container.placement.algorithms.SCMContainerPlacementRackAware
2024-01-02 20:32:16,665 [main] INFO  algorithms.ContainerPlacementPolicyFactory (ContainerPlacementPolicyFactory.java:getPolicyInternal(86)) - Create container placement policy of type org.apache.hadoop.hdds.scm.container.placement.algorithms.SCMContainerPlacementRackScatter
2024-01-02 20:32:16,665 [main] INFO  ExpiredContainerReplicaOpScrubber (BackgroundSCMService.java:start(68)) - Starting ExpiredContainerReplicaOpScrubber Service.
2024-01-02 20:32:16,665 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service ExpiredContainerReplicaOpScrubber.
2024-01-02 20:32:16,666 [main] INFO  algorithms.PipelineChoosePolicyFactory (PipelineChoosePolicyFactory.java:createPipelineChoosePolicyFromClass(78)) - Create pipeline choose policy of type org.apache.hadoop.hdds.scm.pipeline.choose.algorithms.RandomPipelineChoosePolicy
2024-01-02 20:32:16,666 [main] INFO  algorithms.PipelineChoosePolicyFactory (PipelineChoosePolicyFactory.java:createPipelineChoosePolicyFromClass(78)) - Create pipeline choose policy of type org.apache.hadoop.hdds.scm.pipeline.choose.algorithms.RandomPipelineChoosePolicy
2024-01-02 20:32:16,666 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service SCMBlockDeletingService.
2024-01-02 20:32:16,668 [main] INFO  replication.ReplicationManager (ReplicationManager.java:start(294)) - Starting Replication Monitor Thread.
2024-01-02 20:32:16,668 [ReplicationMonitor] INFO  replication.ReplicationManager (ReplicationManager.java:processAll(369)) - Replication Manager is not ready to run until 300000ms after safemode exit
2024-01-02 20:32:16,668 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service ReplicationManager.
2024-01-02 20:32:16,669 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:<init>(440)) - SCM start with adminUsers: [runner]
2024-01-02 20:32:16,669 [main] INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(90)) - Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
2024-01-02 20:32:16,669 [main] INFO  ipc.Server (Server.java:<init>(1287)) - Listener at 0.0.0.0:46253
2024-01-02 20:32:16,670 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:run(1323)) - Starting Socket Reader #1 for port 0
2024-01-02 20:32:16,673 [main] INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(90)) - Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
2024-01-02 20:32:16,674 [main] INFO  ipc.Server (Server.java:<init>(1287)) - Listener at 0.0.0.0:37595
2024-01-02 20:32:16,674 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:run(1323)) - Starting Socket Reader #1 for port 0
2024-01-02 20:32:16,675 [main] INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(90)) - Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
2024-01-02 20:32:16,675 [main] INFO  ipc.Server (Server.java:<init>(1287)) - Listener at 0.0.0.0:39691
2024-01-02 20:32:16,676 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:run(1323)) - Starting Socket Reader #1 for port 0
2024-01-02 20:32:16,679 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service ContainerBalancer.
2024-01-02 20:32:16,679 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:<init>(453)) - 
Container Balancer status:
Key                            Value
Running                        false
Container Balancer Configuration values:
Key                                                Value
Threshold                                          10
Max Datanodes to Involve per Iteration(percent)    20
Max Size to Move per Iteration                     500GB
Max Size Entering Target per Iteration             26GB
Max Size Leaving Source per Iteration              26GB
Number of Iterations                               10
Time Limit for Single Container's Movement         65min
Time Limit for Single Container's Replication      50min
Interval between each Iteration                    70min
Whether to Enable Network Topology                 false
Whether to Trigger Refresh Datanode Usage Info     false
Container IDs to Exclude from Balancing            None
Datanodes Specified to be Balanced                 None
Datanodes Excluded from Balancing                  None

2024-01-02 20:32:16,680 [main] INFO  ha.SCMContext (SCMContext.java:updateSafeModeStatus(230)) - Update SafeModeStatus from SafeModeStatus{safeModeStatus=false, preCheckPassed=true} to SafeModeStatus{safeModeStatus=false, preCheckPassed=true}.
2024-01-02 20:32:16,681 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=513237b6-4610-4d82-8dcd-ab1ec98ddd2e to datanode:e858c0b4-7af2-4c14-86cf-ade0e8212c63
2024-01-02 20:32:16,681 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=513237b6-4610-4d82-8dcd-ab1ec98ddd2e to datanode:b59c269a-068e-4417-9472-7c7ee519a49c
2024-01-02 20:32:16,681 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=513237b6-4610-4d82-8dcd-ab1ec98ddd2e to datanode:21e8a8cf-55c2-4081-b4d4-3c91205a0cbf
2024-01-02 20:32:16,684 [pool-382-thread-1] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:getNextId(145)) - Allocate a batch for containerId, change lastId from 0 to 1000.
2024-01-02 20:32:16,687 [pool-382-thread-1] WARN  ha.SequenceIdGenerator (SequenceIdGenerator.java:allocateBatch(258)) - Failed to allocate a batch for localId, expected lastId is 0, actual lastId is 113750153625600000.
2024-01-02 20:32:16,687 [pool-382-thread-1] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:getNextId(145)) - Allocate a batch for localId, change lastId from 113750153625600000 to 113750153625601000.
2024-01-02 20:32:16,694 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1654)) - Container Balancer is not running.
2024-01-02 20:32:16,694 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stopReplicationManager(1787)) - Stopping Replication Manager Service.
2024-01-02 20:32:16,694 [main] INFO  replication.ReplicationManager (ReplicationManager.java:stop(326)) - Stopping Replication Monitor Thread.
2024-01-02 20:32:16,694 [UnderReplicatedProcessor] WARN  replication.UnhealthyReplicationProcessor (UnhealthyReplicationProcessor.java:run(180)) - UnderReplicatedProcessor interrupted. Exiting...
2024-01-02 20:32:16,694 [OverReplicatedProcessor] WARN  replication.UnhealthyReplicationProcessor (UnhealthyReplicationProcessor.java:run(180)) - OverReplicatedProcessor interrupted. Exiting...
2024-01-02 20:32:16,695 [ReplicationMonitor] INFO  replication.ReplicationManager (ReplicationManager.java:run(933)) - Replication Monitor Thread is stopped
2024-01-02 20:32:16,695 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1663)) - Stopping the Datanode Admin Monitor.
2024-01-02 20:32:16,695 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1670)) - Stopping datanode service RPC server
2024-01-02 20:32:16,695 [main] INFO  server.SCMDatanodeProtocolServer (SCMDatanodeProtocolServer.java:stop(424)) - Stopping the RPC server for DataNodes
2024-01-02 20:32:16,695 [main] INFO  ipc.Server (Server.java:stop(3523)) - Stopping server on 46253
2024-01-02 20:32:16,695 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1678)) - Stopping block service RPC server
2024-01-02 20:32:16,696 [main] INFO  server.SCMBlockProtocolServer (SCMBlockProtocolServer.java:stop(168)) - Stopping the RPC server for Block Protocol
2024-01-02 20:32:16,696 [main] INFO  ipc.Server (Server.java:stop(3523)) - Stopping server on 37595
2024-01-02 20:32:16,696 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1685)) - Stopping the StorageContainerLocationProtocol RPC server
2024-01-02 20:32:16,696 [main] INFO  server.SCMClientProtocolServer (SCMClientProtocolServer.java:stop(210)) - Stopping the RPC server for Client Protocol
2024-01-02 20:32:16,696 [main] INFO  ipc.Server (Server.java:stop(3523)) - Stopping server on 39691
2024-01-02 20:32:16,696 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1692)) - Stopping Storage Container Manager HTTP server.
2024-01-02 20:32:16,697 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1700)) - Stopping SCM LayoutVersionManager Service.
2024-01-02 20:32:16,697 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1712)) - Stopping Block Manager Service.
2024-01-02 20:32:16,697 [main] INFO  utils.BackgroundService (BackgroundService.java:shutdown(160)) - Shutting down service SCMBlockDeletingService
2024-01-02 20:32:16,697 [main] INFO  utils.BackgroundService (BackgroundService.java:shutdown(160)) - Shutting down service SCMBlockDeletingService
2024-01-02 20:32:16,697 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1732)) - Stopping SCM Event Queue.
2024-01-02 20:32:16,697 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1743)) - Stopping SCM HA services.
2024-01-02 20:32:16,698 [main] INFO  pipeline.BackgroundPipelineCreator (BackgroundPipelineCreator.java:stop(152)) - Stopping RatisPipelineUtilsThread.
2024-01-02 20:32:16,698 [RatisPipelineUtilsThread-0] WARN  pipeline.BackgroundPipelineCreator (BackgroundPipelineCreator.java:run(183)) - RatisPipelineUtilsThread is interrupted.
2024-01-02 20:32:16,698 [main] INFO  BackgroundPipelineScrubber (BackgroundSCMService.java:stop(131)) - Stopping BackgroundPipelineScrubber Service.
2024-01-02 20:32:16,698 [BackgroundPipelineScrubber] WARN  BackgroundPipelineScrubber (BackgroundSCMService.java:run(115)) - BackgroundPipelineScrubber is interrupted, exit
2024-01-02 20:32:16,698 [ExpiredContainerReplicaOpScrubber] WARN  ExpiredContainerReplicaOpScrubber (BackgroundSCMService.java:run(115)) - ExpiredContainerReplicaOpScrubber is interrupted, exit
2024-01-02 20:32:16,698 [main] INFO  ExpiredContainerReplicaOpScrubber (BackgroundSCMService.java:stop(131)) - Stopping ExpiredContainerReplicaOpScrubber Service.
2024-01-02 20:32:16,698 [main] INFO  utils.BackgroundService (BackgroundService.java:shutdown(160)) - Shutting down service SCMBlockDeletingService
2024-01-02 20:32:16,699 [main] INFO  replication.ReplicationManager (ReplicationManager.java:stop(336)) - Replication Monitor Thread is not running.
2024-01-02 20:32:16,699 [main] WARN  balancer.ContainerBalancer (ContainerBalancer.java:stop(327)) - Cannot stop Container Balancer because it's not running or stopping
2024-01-02 20:32:16,699 [test-leaseManagerLeaseManager#LeaseMonitor] WARN  lease.LeaseManager (LeaseManager.java:run(287)) - Lease manager is interrupted. Shutting down...
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedNanos(AbstractQueuedSynchronizer.java:1039)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.tryAcquireSharedNanos(AbstractQueuedSynchronizer.java:1328)
	at java.util.concurrent.Semaphore.tryAcquire(Semaphore.java:409)
	at org.apache.hadoop.ozone.lease.LeaseManager$LeaseMonitor.run(LeaseManager.java:285)
	at java.lang.Thread.run(Thread.java:750)
2024-01-02 20:32:16,699 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1778)) - Stopping SCM MetadataStore.
]]></system-out>
  </testcase>
  <testcase name="testAllocateBlockSucInSafeMode" classname="org.apache.hadoop.hdds.scm.block.TestBlockManager" time="0.241">
    <system-out><![CDATA[2024-01-02 20:32:16,723 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchemaFromFile(129)) - Loading schema from [file:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/classes/network-topology-default.xml]
2024-01-02 20:32:16,723 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchema(176)) - Loading network topology layer schema file
2024-01-02 20:32:16,732 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchemaFromFile(129)) - Loading schema from [file:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/classes/network-topology-default.xml]
2024-01-02 20:32:16,732 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchema(176)) - Loading network topology layer schema file
2024-01-02 20:32:16,733 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/526dded6-77ab-4e1f-9586-b45113ddc8a4
2024-01-02 20:32:16,734 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/2273e5e1-35a1-47e5-ac5f-b6aca2f6adeb
2024-01-02 20:32:16,734 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/b03d4b4f-07e6-458c-a669-327a9e1b872d
2024-01-02 20:32:16,734 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/041f226b-e9f9-42de-9acf-05e1e792d26d
2024-01-02 20:32:16,735 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/640aaf53-e9a8-487e-9f56-cfd39b425e01
2024-01-02 20:32:16,735 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/728065ef-f435-4a8d-9ef0-50480352c4eb
2024-01-02 20:32:16,735 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/e984001d-b374-422e-91f0-7e031618cc69
2024-01-02 20:32:16,735 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/976415e0-8962-4668-a3fb-868613c1e56a
2024-01-02 20:32:16,735 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/8c8f21aa-0be9-4da1-aecc-591f66edd836
2024-01-02 20:32:16,736 [main] INFO  net.NetworkTopologyImpl (NetworkTopologyImpl.java:add(124)) - Added a new node: /default-rack/9e49fcbf-37d6-4c97-9909-e4caf82b72f6
2024-01-02 20:32:16,736 [main] WARN  utils.HAUtils (HAUtils.java:getMetaDir(339)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:16,736 [main] WARN  db.DBStoreBuilder (DBStoreBuilder.java:applyDBDefinition(167)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:16,807 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:<init>(241)) - Init the HA SequenceIdGenerator.
2024-01-02 20:32:16,808 [main] INFO  pipeline.PipelineStateManagerImpl (PipelineStateManagerImpl.java:initialize(78)) - No pipeline exists in current db
2024-01-02 20:32:16,808 [main] INFO  algorithms.LeaderChoosePolicyFactory (LeaderChoosePolicyFactory.java:getPolicy(57)) - Create leader choose policy of type org.apache.hadoop.hdds.scm.pipeline.leader.choose.algorithms.MinLeaderCountChoosePolicy
2024-01-02 20:32:16,808 [main] INFO  algorithms.ContainerPlacementPolicyFactory (ContainerPlacementPolicyFactory.java:getPolicyInternal(86)) - Create container placement policy of type org.apache.hadoop.hdds.scm.container.placement.algorithms.SCMContainerPlacementRackScatter
2024-01-02 20:32:16,808 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service BackgroundPipelineCreator.
2024-01-02 20:32:16,808 [main] INFO  pipeline.BackgroundPipelineCreator (BackgroundPipelineCreator.java:start(127)) - Starting RatisPipelineUtilsThread.
2024-01-02 20:32:16,809 [main] INFO  BackgroundPipelineScrubber (BackgroundSCMService.java:start(68)) - Starting BackgroundPipelineScrubber Service.
2024-01-02 20:32:16,809 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service BackgroundPipelineScrubber.
2024-01-02 20:32:16,809 [main] INFO  algorithms.LeaderChoosePolicyFactory (LeaderChoosePolicyFactory.java:getPolicy(57)) - Create leader choose policy of type org.apache.hadoop.hdds.scm.pipeline.leader.choose.algorithms.MinLeaderCountChoosePolicy
2024-01-02 20:32:16,810 [main] INFO  safemode.ContainerSafeModeRule (ContainerSafeModeRule.java:<init>(91)) - containers with one replica threshold count 0
2024-01-02 20:32:16,810 [main] INFO  safemode.HealthyPipelineSafeModeRule (HealthyPipelineSafeModeRule.java:initializeRule(176)) - Total pipeline count is 0, healthy pipeline threshold count is 0
2024-01-02 20:32:16,810 [main] INFO  safemode.OneReplicaPipelineSafeModeRule (OneReplicaPipelineSafeModeRule.java:initializeRule(193)) - Total pipeline count is 0, pipeline's with at least one datanode reported threshold count is 0
2024-01-02 20:32:16,811 [main] WARN  server.ServerUtils (ServerUtils.java:getScmDbDir(155)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:16,812 [main] WARN  server.ServerUtils (ServerUtils.java:getScmDbDir(155)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2024-01-02 20:32:16,812 [main] INFO  ha.SCMHANodeDetails (SCMHANodeDetails.java:loadSCMHAConfig(207)) - ServiceID for StorageContainerManager is null
2024-01-02 20:32:16,813 [main] INFO  ha.SCMHANodeDetails (SCMHANodeDetails.java:loadSCMHAConfig(212)) - ozone.scm.default.service.id is not defined, falling back to ozone.scm.service.ids to find serviceID for StorageContainerManager if it is HA enabled cluster
2024-01-02 20:32:16,813 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchemaFromFile(129)) - Loading schema from [file:/home/runner/work/ozone/ozone/hadoop-hdds/common/target/classes/network-topology-default.xml]
2024-01-02 20:32:16,813 [main] INFO  net.NodeSchemaLoader (NodeSchemaLoader.java:loadSchema(176)) - Loading network topology layer schema file
2024-01-02 20:32:16,815 [main] INFO  upgrade.AbstractLayoutVersionManager (AbstractLayoutVersionManager.java:init(83)) - Initializing Layout version manager with metadata layout = HADOOP_PRC_PORTS_IN_DATANODEDETAILS (version = 7), software layout = HADOOP_PRC_PORTS_IN_DATANODEDETAILS (version = 7)
2024-01-02 20:32:16,816 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToSequenceId(370)) - upgrade localId to 113750153625600000
2024-01-02 20:32:16,817 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToSequenceId(380)) - upgrade delTxnId to 0
2024-01-02 20:32:16,817 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToSequenceId(397)) - upgrade containerId to 0
2024-01-02 20:32:16,818 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:upgradeToCertificateSequenceId(444)) - upgrade CertificateId to 2
2024-01-02 20:32:16,818 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:<init>(241)) - Init the HA SequenceIdGenerator.
2024-01-02 20:32:16,818 [main] INFO  algorithms.ContainerPlacementPolicyFactory (ContainerPlacementPolicyFactory.java:getPolicyInternal(86)) - Create container placement policy of type org.apache.hadoop.hdds.scm.container.placement.algorithms.SCMContainerPlacementRackAware
2024-01-02 20:32:16,818 [main] INFO  algorithms.ContainerPlacementPolicyFactory (ContainerPlacementPolicyFactory.java:getPolicyInternal(86)) - Create container placement policy of type org.apache.hadoop.hdds.scm.container.placement.algorithms.SCMContainerPlacementRackScatter
2024-01-02 20:32:16,818 [main] INFO  ExpiredContainerReplicaOpScrubber (BackgroundSCMService.java:start(68)) - Starting ExpiredContainerReplicaOpScrubber Service.
2024-01-02 20:32:16,819 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service ExpiredContainerReplicaOpScrubber.
2024-01-02 20:32:16,819 [main] INFO  algorithms.PipelineChoosePolicyFactory (PipelineChoosePolicyFactory.java:createPipelineChoosePolicyFromClass(78)) - Create pipeline choose policy of type org.apache.hadoop.hdds.scm.pipeline.choose.algorithms.RandomPipelineChoosePolicy
2024-01-02 20:32:16,819 [main] INFO  algorithms.PipelineChoosePolicyFactory (PipelineChoosePolicyFactory.java:createPipelineChoosePolicyFromClass(78)) - Create pipeline choose policy of type org.apache.hadoop.hdds.scm.pipeline.choose.algorithms.RandomPipelineChoosePolicy
2024-01-02 20:32:16,820 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service SCMBlockDeletingService.
2024-01-02 20:32:16,821 [main] INFO  replication.ReplicationManager (ReplicationManager.java:start(294)) - Starting Replication Monitor Thread.
2024-01-02 20:32:16,822 [ReplicationMonitor] INFO  replication.ReplicationManager (ReplicationManager.java:processAll(369)) - Replication Manager is not ready to run until 300000ms after safemode exit
2024-01-02 20:32:16,822 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service ReplicationManager.
2024-01-02 20:32:16,823 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:<init>(440)) - SCM start with adminUsers: [runner]
2024-01-02 20:32:16,823 [main] INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(90)) - Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
2024-01-02 20:32:16,823 [main] INFO  ipc.Server (Server.java:<init>(1287)) - Listener at 0.0.0.0:43717
2024-01-02 20:32:16,824 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:run(1323)) - Starting Socket Reader #1 for port 0
2024-01-02 20:32:16,825 [main] INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(90)) - Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
2024-01-02 20:32:16,825 [main] INFO  ipc.Server (Server.java:<init>(1287)) - Listener at 0.0.0.0:39229
2024-01-02 20:32:16,826 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:run(1323)) - Starting Socket Reader #1 for port 0
2024-01-02 20:32:16,827 [main] INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(90)) - Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
2024-01-02 20:32:16,827 [main] INFO  ipc.Server (Server.java:<init>(1287)) - Listener at 0.0.0.0:38611
2024-01-02 20:32:16,827 [Socket Reader #1 for port 0] INFO  ipc.Server (Server.java:run(1323)) - Starting Socket Reader #1 for port 0
2024-01-02 20:32:16,830 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service ContainerBalancer.
2024-01-02 20:32:16,830 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:<init>(453)) - 
Container Balancer status:
Key                            Value
Running                        false
Container Balancer Configuration values:
Key                                                Value
Threshold                                          10
Max Datanodes to Involve per Iteration(percent)    20
Max Size to Move per Iteration                     500GB
Max Size Entering Target per Iteration             26GB
Max Size Leaving Source per Iteration              26GB
Number of Iterations                               10
Time Limit for Single Container's Movement         65min
Time Limit for Single Container's Replication      50min
Interval between each Iteration                    70min
Whether to Enable Network Topology                 false
Whether to Trigger Refresh Datanode Usage Info     false
Container IDs to Exclude from Balancing            None
Datanodes Specified to be Balanced                 None
Datanodes Excluded from Balancing                  None

2024-01-02 20:32:16,831 [main] INFO  ha.SCMContext (SCMContext.java:updateSafeModeStatus(230)) - Update SafeModeStatus from SafeModeStatus{safeModeStatus=false, preCheckPassed=true} to SafeModeStatus{safeModeStatus=false, preCheckPassed=true}.
2024-01-02 20:32:16,833 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=e5af4f7e-e1e6-4070-a6be-611399b2cfb8 to datanode:2273e5e1-35a1-47e5-ac5f-b6aca2f6adeb
2024-01-02 20:32:16,833 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=e5af4f7e-e1e6-4070-a6be-611399b2cfb8 to datanode:041f226b-e9f9-42de-9acf-05e1e792d26d
2024-01-02 20:32:16,833 [main] INFO  pipeline.RatisPipelineProvider (RatisPipelineProvider.java:lambda$create$0(206)) - Sending CreatePipelineCommand for pipeline:PipelineID=e5af4f7e-e1e6-4070-a6be-611399b2cfb8 to datanode:976415e0-8962-4668-a3fb-868613c1e56a
2024-01-02 20:32:16,935 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:getNextId(145)) - Allocate a batch for containerId, change lastId from 0 to 1000.
2024-01-02 20:32:16,936 [main] WARN  ha.SequenceIdGenerator (SequenceIdGenerator.java:allocateBatch(258)) - Failed to allocate a batch for localId, expected lastId is 0, actual lastId is 113750153625600000.
2024-01-02 20:32:16,936 [main] INFO  ha.SequenceIdGenerator (SequenceIdGenerator.java:getNextId(145)) - Allocate a batch for localId, change lastId from 113750153625600000 to 113750153625601000.
2024-01-02 20:32:16,936 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1654)) - Container Balancer is not running.
2024-01-02 20:32:16,936 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stopReplicationManager(1787)) - Stopping Replication Manager Service.
2024-01-02 20:32:16,937 [main] INFO  replication.ReplicationManager (ReplicationManager.java:stop(326)) - Stopping Replication Monitor Thread.
2024-01-02 20:32:16,937 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1663)) - Stopping the Datanode Admin Monitor.
2024-01-02 20:32:16,937 [ReplicationMonitor] INFO  replication.ReplicationManager (ReplicationManager.java:run(933)) - Replication Monitor Thread is stopped
2024-01-02 20:32:16,937 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1670)) - Stopping datanode service RPC server
2024-01-02 20:32:16,937 [main] INFO  server.SCMDatanodeProtocolServer (SCMDatanodeProtocolServer.java:stop(424)) - Stopping the RPC server for DataNodes
2024-01-02 20:32:16,938 [main] INFO  ipc.Server (Server.java:stop(3523)) - Stopping server on 43717
2024-01-02 20:32:16,937 [OverReplicatedProcessor] WARN  replication.UnhealthyReplicationProcessor (UnhealthyReplicationProcessor.java:run(180)) - OverReplicatedProcessor interrupted. Exiting...
2024-01-02 20:32:16,937 [UnderReplicatedProcessor] WARN  replication.UnhealthyReplicationProcessor (UnhealthyReplicationProcessor.java:run(180)) - UnderReplicatedProcessor interrupted. Exiting...
2024-01-02 20:32:16,938 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1678)) - Stopping block service RPC server
2024-01-02 20:32:16,938 [main] INFO  server.SCMBlockProtocolServer (SCMBlockProtocolServer.java:stop(168)) - Stopping the RPC server for Block Protocol
2024-01-02 20:32:16,938 [main] INFO  ipc.Server (Server.java:stop(3523)) - Stopping server on 39229
2024-01-02 20:32:16,939 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1685)) - Stopping the StorageContainerLocationProtocol RPC server
2024-01-02 20:32:16,939 [main] INFO  server.SCMClientProtocolServer (SCMClientProtocolServer.java:stop(210)) - Stopping the RPC server for Client Protocol
2024-01-02 20:32:16,939 [main] INFO  ipc.Server (Server.java:stop(3523)) - Stopping server on 38611
2024-01-02 20:32:16,941 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1692)) - Stopping Storage Container Manager HTTP server.
2024-01-02 20:32:16,941 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1700)) - Stopping SCM LayoutVersionManager Service.
2024-01-02 20:32:16,941 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1712)) - Stopping Block Manager Service.
2024-01-02 20:32:16,941 [main] INFO  utils.BackgroundService (BackgroundService.java:shutdown(160)) - Shutting down service SCMBlockDeletingService
2024-01-02 20:32:16,941 [main] INFO  utils.BackgroundService (BackgroundService.java:shutdown(160)) - Shutting down service SCMBlockDeletingService
2024-01-02 20:32:16,942 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1732)) - Stopping SCM Event Queue.
2024-01-02 20:32:16,942 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1743)) - Stopping SCM HA services.
2024-01-02 20:32:16,942 [main] INFO  pipeline.BackgroundPipelineCreator (BackgroundPipelineCreator.java:stop(152)) - Stopping RatisPipelineUtilsThread.
2024-01-02 20:32:16,942 [RatisPipelineUtilsThread-0] WARN  pipeline.BackgroundPipelineCreator (BackgroundPipelineCreator.java:run(183)) - RatisPipelineUtilsThread is interrupted.
2024-01-02 20:32:16,942 [main] INFO  BackgroundPipelineScrubber (BackgroundSCMService.java:stop(131)) - Stopping BackgroundPipelineScrubber Service.
2024-01-02 20:32:16,942 [BackgroundPipelineScrubber] WARN  BackgroundPipelineScrubber (BackgroundSCMService.java:run(115)) - BackgroundPipelineScrubber is interrupted, exit
2024-01-02 20:32:16,943 [ExpiredContainerReplicaOpScrubber] WARN  ExpiredContainerReplicaOpScrubber (BackgroundSCMService.java:run(115)) - ExpiredContainerReplicaOpScrubber is interrupted, exit
2024-01-02 20:32:16,943 [main] INFO  ExpiredContainerReplicaOpScrubber (BackgroundSCMService.java:stop(131)) - Stopping ExpiredContainerReplicaOpScrubber Service.
2024-01-02 20:32:16,943 [main] INFO  utils.BackgroundService (BackgroundService.java:shutdown(160)) - Shutting down service SCMBlockDeletingService
2024-01-02 20:32:16,943 [main] INFO  replication.ReplicationManager (ReplicationManager.java:stop(336)) - Replication Monitor Thread is not running.
2024-01-02 20:32:16,943 [main] WARN  balancer.ContainerBalancer (ContainerBalancer.java:stop(327)) - Cannot stop Container Balancer because it's not running or stopping
2024-01-02 20:32:16,944 [test-leaseManagerLeaseManager#LeaseMonitor] WARN  lease.LeaseManager (LeaseManager.java:run(287)) - Lease manager is interrupted. Shutting down...
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedNanos(AbstractQueuedSynchronizer.java:1039)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.tryAcquireSharedNanos(AbstractQueuedSynchronizer.java:1328)
	at java.util.concurrent.Semaphore.tryAcquire(Semaphore.java:409)
	at org.apache.hadoop.ozone.lease.LeaseManager$LeaseMonitor.run(LeaseManager.java:285)
	at java.lang.Thread.run(Thread.java:750)
2024-01-02 20:32:16,944 [main] INFO  server.StorageContainerManager (StorageContainerManager.java:stop(1778)) - Stopping SCM MetadataStore.
]]></system-out>
  </testcase>
</testsuite>