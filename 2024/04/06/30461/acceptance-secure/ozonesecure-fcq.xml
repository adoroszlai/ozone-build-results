<?xml version="1.0" encoding="UTF-8"?>
<robot generator="Rebot 7.0 (Python 3.8.10 on linux)" generated="2024-04-06T20:59:59.279322" rpa="false" schemaversion="5">
<suite id="s1" name="ozonesecure-fcq" source="/opt/hadoop/smoketest/fcq/s3_om_fcq.robot">
<test id="s1-t1" name="Test setup headers" line="64">
<kw name="Setup headers">
<kw name="Kinit test user" owner="commonlib">
<kw name="Pass Execution If" owner="BuiltIn">
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Skip in unsecure cluster</arg>
<doc>Conditionally skips rest of the current test, setup, or teardown with PASS status.</doc>
<status status="PASS" start="2024-04-06T20:59:06.749000" elapsed="0.000000"/>
</kw>
<kw name="Get test user principal" owner="commonlib">
<kw name="Execute" owner="os">
<kw name="Run Keyword And Return" owner="BuiltIn">
<kw name="Execute and checkrc" owner="os">
<kw name="Run And Return Rc And Output" owner="OperatingSystem">
<msg time="2024-04-06T20:59:06.752000" level="INFO">Running command 'hostname | sed 's/scm[0-9].org/scm/;s/scm[0-9]/scm/;s/om[0-9]/om/' 2&gt;&amp;1'.</msg>
<msg time="2024-04-06T20:59:06.755000" level="INFO">${rc} = 0</msg>
<msg time="2024-04-06T20:59:06.755000" level="INFO">${output} = s3g</msg>
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<status status="PASS" start="2024-04-06T20:59:06.751000" elapsed="0.004000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-04-06T20:59:06.755000" level="INFO">s3g</msg>
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-04-06T20:59:06.755000" elapsed="0.000000"/>
</kw>
<kw name="Should Be Equal As Integers" owner="BuiltIn">
<msg time="2024-04-06T20:59:06.756000" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<status status="PASS" start="2024-04-06T20:59:06.755000" elapsed="0.001000"/>
</kw>
<arg>${command}</arg>
<arg>0</arg>
<status status="PASS" start="2024-04-06T20:59:06.750000" elapsed="0.006000"/>
</kw>
<msg time="2024-04-06T20:59:06.756000" level="INFO">Returning from the enclosing user keyword.</msg>
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<status status="PASS" start="2024-04-06T20:59:06.750000" elapsed="0.006000"/>
</kw>
<msg time="2024-04-06T20:59:06.756000" level="INFO">${instance} = s3g</msg>
<var>${instance}</var>
<arg>hostname | sed 's/scm[0-9].org/scm/;s/scm[0-9]/scm/;s/om[0-9]/om/'</arg>
<status status="PASS" start="2024-04-06T20:59:06.750000" elapsed="0.006000"/>
</kw>
<msg time="2024-04-06T20:59:06.756000" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<var>${TEST_USER}</var>
<arg>${user}</arg>
<status status="PASS" start="2024-04-06T20:59:06.749000" elapsed="0.007000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2024-04-06T20:59:06.757000" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<arg>${TEST_USER}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2024-04-06T20:59:06.757000" elapsed="0.000000"/>
</kw>
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Execute" owner="os">
<kw name="Run Keyword And Return" owner="BuiltIn">
<kw name="Execute and checkrc" owner="os">
<kw name="Run And Return Rc And Output" owner="OperatingSystem">
<msg time="2024-04-06T20:59:06.759000" level="INFO">Running command 'kinit -k -t /etc/security/keytabs/testuser.keytab testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg time="2024-04-06T20:59:06.908000" level="INFO">${rc} = 0</msg>
<msg time="2024-04-06T20:59:06.908000" level="INFO">${output} = </msg>
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<status status="PASS" start="2024-04-06T20:59:06.758000" elapsed="0.151000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-04-06T20:59:06.909000" level="INFO"/>
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-04-06T20:59:06.909000" elapsed="0.000000"/>
</kw>
<kw name="Should Be Equal As Integers" owner="BuiltIn">
<msg time="2024-04-06T20:59:06.910000" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<status status="PASS" start="2024-04-06T20:59:06.909000" elapsed="0.001000"/>
</kw>
<arg>${command}</arg>
<arg>0</arg>
<status status="PASS" start="2024-04-06T20:59:06.758000" elapsed="0.152000"/>
</kw>
<msg time="2024-04-06T20:59:06.910000" level="INFO">Returning from the enclosing user keyword.</msg>
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<status status="PASS" start="2024-04-06T20:59:06.758000" elapsed="0.152000"/>
</kw>
<arg>kinit -k -t /etc/security/keytabs/${keytab} ${TEST_USER}</arg>
<status status="PASS" start="2024-04-06T20:59:06.757000" elapsed="0.153000"/>
</kw>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k -t /etc/security/keytabs/${keytab} ${TEST_USER}</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2024-04-06T20:59:06.757000" elapsed="0.153000"/>
</kw>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<status status="PASS" start="2024-04-06T20:59:06.748000" elapsed="0.162000"/>
</kw>
<kw name="Setup secure v4 headers" owner="commonawslib">
<kw name="Execute And Ignore Error" owner="os">
<kw name="Run And Return Rc And Output" owner="OperatingSystem">
<msg time="2024-04-06T20:59:06.912000" level="INFO">Running command 'ozone s3 getsecret  2&gt;&amp;1'.</msg>
<msg time="2024-04-06T20:59:09.855000" level="INFO">${rc} = 0</msg>
<msg time="2024-04-06T20:59:09.855000" level="INFO">${output} = awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=7fc7eb57a468ac6fb936664dbee006ae1bc5cd3592e1a946c0aa5a6da8e53a00
isDeleted=false
transactionLogIndex=0</msg>
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<status status="PASS" start="2024-04-06T20:59:06.911000" elapsed="2.944000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-04-06T20:59:09.856000" level="INFO">awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=7fc7eb57a468ac6fb936664dbee006ae1bc5cd3592e1a946c0aa5a6da8e53a00
isDeleted=false
transactionLogIndex=0</msg>
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-04-06T20:59:09.856000" elapsed="0.000000"/>
</kw>
<msg time="2024-04-06T20:59:09.857000" level="INFO">${result} = awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=7fc7eb57a468ac6fb936664dbee006ae1bc5cd3592e1a946c0aa5a6da8e53a00
isDeleted=false
transactionLogIndex=0</msg>
<var>${result}</var>
<arg>ozone s3 getsecret ${OM_HA_PARAM}</arg>
<status status="PASS" start="2024-04-06T20:59:06.911000" elapsed="2.946000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Should Contain" owner="BuiltIn">
<msg time="2024-04-06T20:59:09.858000" level="FAIL">'awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=7fc7eb57a468ac6fb936664dbee006ae1bc5cd3592e1a946c0aa5a6da8e53a00
isDeleted=false
transactionLogIndex=0' does not contain 'S3_SECRET_ALREADY_EXISTS'</msg>
<arg>${result}</arg>
<arg>S3_SECRET_ALREADY_EXISTS</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="FAIL" start="2024-04-06T20:59:09.857000" elapsed="0.001000"/>
</kw>
<msg time="2024-04-06T20:59:09.858000" level="INFO">${exists} = False</msg>
<var>${exists}</var>
<arg>Should Contain</arg>
<arg>${result}</arg>
<arg>S3_SECRET_ALREADY_EXISTS</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2024-04-06T20:59:09.857000" elapsed="0.001000"/>
</kw>
<if>
<branch type="IF" condition="${exists}">
<kw name="Execute" owner="os">
<arg>ozone s3 revokesecret -y ${OM_HA_PARAM}</arg>
<status status="NOT RUN" start="2024-04-06T20:59:09.859000" elapsed="0.000000"/>
</kw>
<kw name="Execute" owner="os">
<var>${result}</var>
<arg>ozone s3 getsecret ${OM_HA_PARAM}</arg>
<status status="NOT RUN" start="2024-04-06T20:59:09.859000" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2024-04-06T20:59:09.858000" elapsed="0.001000"/>
</branch>
<status status="PASS" start="2024-04-06T20:59:09.858000" elapsed="0.001000"/>
</if>
<kw name="Get Regexp Matches" owner="String">
<msg time="2024-04-06T20:59:09.860000" level="INFO">${accessKey} = ['testuser/s3g@EXAMPLE.COM']</msg>
<var>${accessKey}</var>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<status status="PASS" start="2024-04-06T20:59:09.859000" elapsed="0.001000"/>
</kw>
<kw name="Get Variable Value" owner="BuiltIn">
<msg time="2024-04-06T20:59:09.861000" level="INFO">${accessKey} = ['testuser/s3g@EXAMPLE.COM']</msg>
<var>${accessKey}</var>
<arg>${accessKey}</arg>
<arg>testuser</arg>
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<status status="PASS" start="2024-04-06T20:59:09.860000" elapsed="0.001000"/>
</kw>
<kw name="Get Regexp Matches" owner="String">
<msg time="2024-04-06T20:59:09.861000" level="INFO">${secret} = ['7fc7eb57a468ac6fb936664dbee006ae1bc5cd3592e1a946c0aa5a6da8e53a00']</msg>
<var>${secret}</var>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<status status="PASS" start="2024-04-06T20:59:09.861000" elapsed="0.000000"/>
</kw>
<kw name="Set Variable" owner="BuiltIn">
<msg time="2024-04-06T20:59:09.862000" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<var>${accessKey}</var>
<arg>${accessKey[0]}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="PASS" start="2024-04-06T20:59:09.861000" elapsed="0.001000"/>
</kw>
<kw name="Set Variable" owner="BuiltIn">
<msg time="2024-04-06T20:59:09.863000" level="INFO">${secret} = 7fc7eb57a468ac6fb936664dbee006ae1bc5cd3592e1a946c0aa5a6da8e53a00</msg>
<var>${secret}</var>
<arg>${secret[0]}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="PASS" start="2024-04-06T20:59:09.862000" elapsed="0.001000"/>
</kw>
<kw name="Execute" owner="os">
<kw name="Run Keyword And Return" owner="BuiltIn">
<kw name="Execute and checkrc" owner="os">
<kw name="Run And Return Rc And Output" owner="OperatingSystem">
<msg time="2024-04-06T20:59:09.866000" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg time="2024-04-06T20:59:10.238000" level="INFO">${rc} = 0</msg>
<msg time="2024-04-06T20:59:10.238000" level="INFO">${output} = </msg>
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<status status="PASS" start="2024-04-06T20:59:09.864000" elapsed="0.374000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-04-06T20:59:10.239000" level="INFO"/>
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-04-06T20:59:10.238000" elapsed="0.001000"/>
</kw>
<kw name="Should Be Equal As Integers" owner="BuiltIn">
<msg time="2024-04-06T20:59:10.239000" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<status status="PASS" start="2024-04-06T20:59:10.239000" elapsed="0.000000"/>
</kw>
<arg>${command}</arg>
<arg>0</arg>
<status status="PASS" start="2024-04-06T20:59:09.864000" elapsed="0.375000"/>
</kw>
<msg time="2024-04-06T20:59:10.240000" level="INFO">Returning from the enclosing user keyword.</msg>
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<status status="PASS" start="2024-04-06T20:59:09.864000" elapsed="0.376000"/>
</kw>
<arg>aws configure set default.s3.signature_version s3v4</arg>
<status status="PASS" start="2024-04-06T20:59:09.863000" elapsed="0.377000"/>
</kw>
<kw name="Execute" owner="os">
<kw name="Run Keyword And Return" owner="BuiltIn">
<kw name="Execute and checkrc" owner="os">
<kw name="Run And Return Rc And Output" owner="OperatingSystem">
<msg time="2024-04-06T20:59:10.242000" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg time="2024-04-06T20:59:10.612000" level="INFO">${rc} = 0</msg>
<msg time="2024-04-06T20:59:10.612000" level="INFO">${output} = </msg>
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<status status="PASS" start="2024-04-06T20:59:10.241000" elapsed="0.371000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-04-06T20:59:10.612000" level="INFO"/>
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-04-06T20:59:10.612000" elapsed="0.001000"/>
</kw>
<kw name="Should Be Equal As Integers" owner="BuiltIn">
<msg time="2024-04-06T20:59:10.613000" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<status status="PASS" start="2024-04-06T20:59:10.613000" elapsed="0.000000"/>
</kw>
<arg>${command}</arg>
<arg>0</arg>
<status status="PASS" start="2024-04-06T20:59:10.241000" elapsed="0.372000"/>
</kw>
<msg time="2024-04-06T20:59:10.613000" level="INFO">Returning from the enclosing user keyword.</msg>
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<status status="PASS" start="2024-04-06T20:59:10.240000" elapsed="0.373000"/>
</kw>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
<status status="PASS" start="2024-04-06T20:59:10.240000" elapsed="0.373000"/>
</kw>
<kw name="Execute" owner="os">
<kw name="Run Keyword And Return" owner="BuiltIn">
<kw name="Execute and checkrc" owner="os">
<kw name="Run And Return Rc And Output" owner="OperatingSystem">
<msg time="2024-04-06T20:59:10.616000" level="INFO">Running command 'aws configure set aws_secret_access_key 7fc7eb57a468ac6fb936664dbee006ae1bc5cd3592e1a946c0aa5a6da8e53a00 2&gt;&amp;1'.</msg>
<msg time="2024-04-06T20:59:10.981000" level="INFO">${rc} = 0</msg>
<msg time="2024-04-06T20:59:10.981000" level="INFO">${output} = </msg>
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<status status="PASS" start="2024-04-06T20:59:10.615000" elapsed="0.367000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-04-06T20:59:10.982000" level="INFO"/>
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-04-06T20:59:10.982000" elapsed="0.000000"/>
</kw>
<kw name="Should Be Equal As Integers" owner="BuiltIn">
<msg time="2024-04-06T20:59:10.983000" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<status status="PASS" start="2024-04-06T20:59:10.983000" elapsed="0.000000"/>
</kw>
<arg>${command}</arg>
<arg>0</arg>
<status status="PASS" start="2024-04-06T20:59:10.614000" elapsed="0.369000"/>
</kw>
<msg time="2024-04-06T20:59:10.983000" level="INFO">Returning from the enclosing user keyword.</msg>
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<status status="PASS" start="2024-04-06T20:59:10.614000" elapsed="0.369000"/>
</kw>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
<status status="PASS" start="2024-04-06T20:59:10.614000" elapsed="0.369000"/>
</kw>
<kw name="Execute" owner="os">
<kw name="Run Keyword And Return" owner="BuiltIn">
<kw name="Execute and checkrc" owner="os">
<kw name="Run And Return Rc And Output" owner="OperatingSystem">
<msg time="2024-04-06T20:59:10.986000" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg time="2024-04-06T20:59:11.361000" level="INFO">${rc} = 0</msg>
<msg time="2024-04-06T20:59:11.361000" level="INFO">${output} = </msg>
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<status status="PASS" start="2024-04-06T20:59:10.985000" elapsed="0.376000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-04-06T20:59:11.362000" level="INFO"/>
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-04-06T20:59:11.362000" elapsed="0.000000"/>
</kw>
<kw name="Should Be Equal As Integers" owner="BuiltIn">
<msg time="2024-04-06T20:59:11.363000" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<status status="PASS" start="2024-04-06T20:59:11.362000" elapsed="0.001000"/>
</kw>
<arg>${command}</arg>
<arg>0</arg>
<status status="PASS" start="2024-04-06T20:59:10.984000" elapsed="0.379000"/>
</kw>
<msg time="2024-04-06T20:59:11.363000" level="INFO">Returning from the enclosing user keyword.</msg>
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<status status="PASS" start="2024-04-06T20:59:10.984000" elapsed="0.379000"/>
</kw>
<arg>aws configure set region us-west-1</arg>
<status status="PASS" start="2024-04-06T20:59:10.983000" elapsed="0.380000"/>
</kw>
<kw name="Execute" owner="os">
<kw name="Run Keyword And Return" owner="BuiltIn">
<kw name="Execute and checkrc" owner="os">
<kw name="Run And Return Rc And Output" owner="OperatingSystem">
<msg time="2024-04-06T20:59:11.366000" level="INFO">Running command 'aws configure set default.s3.addressing_style path 2&gt;&amp;1'.</msg>
<msg time="2024-04-06T20:59:11.746000" level="INFO">${rc} = 0</msg>
<msg time="2024-04-06T20:59:11.746000" level="INFO">${output} = </msg>
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<status status="PASS" start="2024-04-06T20:59:11.364000" elapsed="0.382000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-04-06T20:59:11.747000" level="INFO"/>
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-04-06T20:59:11.746000" elapsed="0.001000"/>
</kw>
<kw name="Should Be Equal As Integers" owner="BuiltIn">
<msg time="2024-04-06T20:59:11.747000" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<status status="PASS" start="2024-04-06T20:59:11.747000" elapsed="0.000000"/>
</kw>
<arg>${command}</arg>
<arg>0</arg>
<status status="PASS" start="2024-04-06T20:59:11.364000" elapsed="0.384000"/>
</kw>
<msg time="2024-04-06T20:59:11.748000" level="INFO">Returning from the enclosing user keyword.</msg>
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<status status="PASS" start="2024-04-06T20:59:11.364000" elapsed="0.384000"/>
</kw>
<arg>aws configure set default.s3.addressing_style ${OZONE_S3_ADDRESS_STYLE}</arg>
<status status="PASS" start="2024-04-06T20:59:11.363000" elapsed="0.385000"/>
</kw>
<status status="PASS" start="2024-04-06T20:59:06.910000" elapsed="4.838000"/>
</kw>
<status status="PASS" start="2024-04-06T20:59:06.748000" elapsed="5.000000"/>
</kw>
<status status="PASS" start="2024-04-06T20:59:06.747000" elapsed="5.001000"/>
</test>
<test id="s1-t2" name="Test setup credentials" line="67">
<kw name="Setup aws credentials">
<kw name="Execute" owner="os">
<kw name="Run Keyword And Return" owner="BuiltIn">
<kw name="Execute and checkrc" owner="os">
<kw name="Run And Return Rc And Output" owner="OperatingSystem">
<msg time="2024-04-06T20:59:11.752000" level="INFO">Running command 'aws configure get aws_access_key_id 2&gt;&amp;1'.</msg>
<msg time="2024-04-06T20:59:12.117000" level="INFO">${rc} = 0</msg>
<msg time="2024-04-06T20:59:12.117000" level="INFO">${output} = testuser/s3g@EXAMPLE.COM</msg>
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<status status="PASS" start="2024-04-06T20:59:11.750000" elapsed="0.367000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-04-06T20:59:12.118000" level="INFO">testuser/s3g@EXAMPLE.COM</msg>
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-04-06T20:59:12.117000" elapsed="0.001000"/>
</kw>
<kw name="Should Be Equal As Integers" owner="BuiltIn">
<msg time="2024-04-06T20:59:12.118000" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<status status="PASS" start="2024-04-06T20:59:12.118000" elapsed="0.000000"/>
</kw>
<arg>${command}</arg>
<arg>0</arg>
<status status="PASS" start="2024-04-06T20:59:11.750000" elapsed="0.368000"/>
</kw>
<msg time="2024-04-06T20:59:12.118000" level="INFO">Returning from the enclosing user keyword.</msg>
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<status status="PASS" start="2024-04-06T20:59:11.750000" elapsed="0.369000"/>
</kw>
<msg time="2024-04-06T20:59:12.119000" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<var>${accessKey}</var>
<arg>aws configure get aws_access_key_id</arg>
<status status="PASS" start="2024-04-06T20:59:11.749000" elapsed="0.370000"/>
</kw>
<kw name="Execute" owner="os">
<kw name="Run Keyword And Return" owner="BuiltIn">
<kw name="Execute and checkrc" owner="os">
<kw name="Run And Return Rc And Output" owner="OperatingSystem">
<msg time="2024-04-06T20:59:12.121000" level="INFO">Running command 'aws configure get aws_secret_access_key 2&gt;&amp;1'.</msg>
<msg time="2024-04-06T20:59:12.478000" level="INFO">${rc} = 0</msg>
<msg time="2024-04-06T20:59:12.478000" level="INFO">${output} = 7fc7eb57a468ac6fb936664dbee006ae1bc5cd3592e1a946c0aa5a6da8e53a00</msg>
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<status status="PASS" start="2024-04-06T20:59:12.120000" elapsed="0.358000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-04-06T20:59:12.479000" level="INFO">7fc7eb57a468ac6fb936664dbee006ae1bc5cd3592e1a946c0aa5a6da8e53a00</msg>
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-04-06T20:59:12.479000" elapsed="0.000000"/>
</kw>
<kw name="Should Be Equal As Integers" owner="BuiltIn">
<msg time="2024-04-06T20:59:12.480000" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<status status="PASS" start="2024-04-06T20:59:12.479000" elapsed="0.001000"/>
</kw>
<arg>${command}</arg>
<arg>0</arg>
<status status="PASS" start="2024-04-06T20:59:12.120000" elapsed="0.360000"/>
</kw>
<msg time="2024-04-06T20:59:12.480000" level="INFO">Returning from the enclosing user keyword.</msg>
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<status status="PASS" start="2024-04-06T20:59:12.119000" elapsed="0.361000"/>
</kw>
<msg time="2024-04-06T20:59:12.480000" level="INFO">${secret} = 7fc7eb57a468ac6fb936664dbee006ae1bc5cd3592e1a946c0aa5a6da8e53a00</msg>
<var>${secret}</var>
<arg>aws configure get aws_secret_access_key</arg>
<status status="PASS" start="2024-04-06T20:59:12.119000" elapsed="0.361000"/>
</kw>
<kw name="Set Environment Variable" owner="OperatingSystem">
<msg time="2024-04-06T20:59:12.480000" level="INFO">Environment variable 'AWS_SECRET_ACCESS_KEY' set to value '7fc7eb57a468ac6fb936664dbee006ae1bc5cd3592e1a946c0aa5a6da8e53a00'.</msg>
<arg>AWS_SECRET_ACCESS_KEY</arg>
<arg>${secret}</arg>
<doc>Sets an environment variable to a specified value.</doc>
<status status="PASS" start="2024-04-06T20:59:12.480000" elapsed="0.000000"/>
</kw>
<kw name="Set Environment Variable" owner="OperatingSystem">
<msg time="2024-04-06T20:59:12.481000" level="INFO">Environment variable 'AWS_ACCESS_KEY_ID' set to value 'testuser/s3g@EXAMPLE.COM'.</msg>
<arg>AWS_ACCESS_KEY_ID</arg>
<arg>${accessKey}</arg>
<doc>Sets an environment variable to a specified value.</doc>
<status status="PASS" start="2024-04-06T20:59:12.481000" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2024-04-06T20:59:11.749000" elapsed="0.732000"/>
</kw>
<status status="PASS" start="2024-04-06T20:59:11.749000" elapsed="0.732000"/>
</test>
<test id="s1-t3" name="Test create bucket 1" line="70">
<kw name="Setup bucket1">
<kw name="Execute AWSS3APICli" owner="commonawslib">
<kw name="Execute" owner="os">
<kw name="Run Keyword And Return" owner="BuiltIn">
<kw name="Execute and checkrc" owner="os">
<kw name="Run And Return Rc And Output" owner="OperatingSystem">
<msg time="2024-04-06T20:59:12.485000" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-bucket --bucket bucket1 2&gt;&amp;1'.</msg>
<msg time="2024-04-06T20:59:14.302000" level="INFO">${rc} = 0</msg>
<msg time="2024-04-06T20:59:14.302000" level="INFO">${output} = {
    "Location": "http://s3g:9878/bucket1"
}</msg>
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<status status="PASS" start="2024-04-06T20:59:12.484000" elapsed="1.818000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-04-06T20:59:14.303000" level="INFO">{
    "Location": "http://s3g:9878/bucket1"
}</msg>
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-04-06T20:59:14.303000" elapsed="0.000000"/>
</kw>
<kw name="Should Be Equal As Integers" owner="BuiltIn">
<msg time="2024-04-06T20:59:14.304000" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<status status="PASS" start="2024-04-06T20:59:14.303000" elapsed="0.001000"/>
</kw>
<arg>${command}</arg>
<arg>0</arg>
<status status="PASS" start="2024-04-06T20:59:12.483000" elapsed="1.821000"/>
</kw>
<msg time="2024-04-06T20:59:14.304000" level="INFO">Returning from the enclosing user keyword.</msg>
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<status status="PASS" start="2024-04-06T20:59:12.483000" elapsed="1.821000"/>
</kw>
<msg time="2024-04-06T20:59:14.304000" level="INFO">${output} = {
    "Location": "http://s3g:9878/bucket1"
}</msg>
<var>${output}</var>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
<status status="PASS" start="2024-04-06T20:59:12.483000" elapsed="1.821000"/>
</kw>
<arg>create-bucket --bucket bucket1</arg>
<status status="PASS" start="2024-04-06T20:59:12.482000" elapsed="1.822000"/>
</kw>
<status status="PASS" start="2024-04-06T20:59:12.482000" elapsed="1.822000"/>
</kw>
<status status="PASS" start="2024-04-06T20:59:12.481000" elapsed="1.824000"/>
</test>
<test id="s1-t4" name="Test OM JMX endpoint" line="73">
<kw name="Verify endpoint is up">
<kw name="Run Keyword If" owner="BuiltIn">
<kw name="Kinit HTTP user" owner="commonlib">
<kw name="Pass Execution If" owner="BuiltIn">
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Skip in unsecure cluster</arg>
<doc>Conditionally skips rest of the current test, setup, or teardown with PASS status.</doc>
<status status="PASS" start="2024-04-06T20:59:14.307000" elapsed="0.000000"/>
</kw>
<kw name="Get test user principal" owner="commonlib">
<kw name="Execute" owner="os">
<kw name="Run Keyword And Return" owner="BuiltIn">
<kw name="Execute and checkrc" owner="os">
<kw name="Run And Return Rc And Output" owner="OperatingSystem">
<msg time="2024-04-06T20:59:14.310000" level="INFO">Running command 'hostname | sed 's/scm[0-9].org/scm/;s/scm[0-9]/scm/;s/om[0-9]/om/' 2&gt;&amp;1'.</msg>
<msg time="2024-04-06T20:59:14.319000" level="INFO">${rc} = 0</msg>
<msg time="2024-04-06T20:59:14.319000" level="INFO">${output} = s3g</msg>
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<status status="PASS" start="2024-04-06T20:59:14.308000" elapsed="0.011000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-04-06T20:59:14.320000" level="INFO">s3g</msg>
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-04-06T20:59:14.319000" elapsed="0.001000"/>
</kw>
<kw name="Should Be Equal As Integers" owner="BuiltIn">
<msg time="2024-04-06T20:59:14.320000" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<status status="PASS" start="2024-04-06T20:59:14.320000" elapsed="0.000000"/>
</kw>
<arg>${command}</arg>
<arg>0</arg>
<status status="PASS" start="2024-04-06T20:59:14.308000" elapsed="0.012000"/>
</kw>
<msg time="2024-04-06T20:59:14.320000" level="INFO">Returning from the enclosing user keyword.</msg>
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<status status="PASS" start="2024-04-06T20:59:14.308000" elapsed="0.013000"/>
</kw>
<msg time="2024-04-06T20:59:14.321000" level="INFO">${instance} = s3g</msg>
<var>${instance}</var>
<arg>hostname | sed 's/scm[0-9].org/scm/;s/scm[0-9]/scm/;s/om[0-9]/om/'</arg>
<status status="PASS" start="2024-04-06T20:59:14.307000" elapsed="0.014000"/>
</kw>
<msg time="2024-04-06T20:59:14.321000" level="INFO">${principal} = HTTP/s3g@EXAMPLE.COM</msg>
<var>${principal}</var>
<arg>HTTP</arg>
<status status="PASS" start="2024-04-06T20:59:14.307000" elapsed="0.014000"/>
</kw>
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Execute" owner="os">
<kw name="Run Keyword And Return" owner="BuiltIn">
<kw name="Execute and checkrc" owner="os">
<kw name="Run And Return Rc And Output" owner="OperatingSystem">
<msg time="2024-04-06T20:59:14.324000" level="INFO">Running command 'kinit -k -t /etc/security/keytabs/HTTP.keytab HTTP/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg time="2024-04-06T20:59:14.477000" level="INFO">${rc} = 0</msg>
<msg time="2024-04-06T20:59:14.477000" level="INFO">${output} = </msg>
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<status status="PASS" start="2024-04-06T20:59:14.323000" elapsed="0.154000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-04-06T20:59:14.478000" level="INFO"/>
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-04-06T20:59:14.478000" elapsed="0.000000"/>
</kw>
<kw name="Should Be Equal As Integers" owner="BuiltIn">
<msg time="2024-04-06T20:59:14.479000" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<status status="PASS" start="2024-04-06T20:59:14.478000" elapsed="0.001000"/>
</kw>
<arg>${command}</arg>
<arg>0</arg>
<status status="PASS" start="2024-04-06T20:59:14.322000" elapsed="0.157000"/>
</kw>
<msg time="2024-04-06T20:59:14.479000" level="INFO">Returning from the enclosing user keyword.</msg>
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<status status="PASS" start="2024-04-06T20:59:14.322000" elapsed="0.157000"/>
</kw>
<arg>kinit -k -t /etc/security/keytabs/HTTP.keytab ${principal}</arg>
<status status="PASS" start="2024-04-06T20:59:14.322000" elapsed="0.157000"/>
</kw>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k -t /etc/security/keytabs/HTTP.keytab ${principal}</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2024-04-06T20:59:14.321000" elapsed="0.158000"/>
</kw>
<status status="PASS" start="2024-04-06T20:59:14.306000" elapsed="0.174000"/>
</kw>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit HTTP user</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" start="2024-04-06T20:59:14.306000" elapsed="0.174000"/>
</kw>
<kw name="Execute" owner="os">
<kw name="Run Keyword And Return" owner="BuiltIn">
<kw name="Execute and checkrc" owner="os">
<kw name="Run And Return Rc And Output" owner="OperatingSystem">
<msg time="2024-04-06T20:59:14.482000" level="INFO">Running command 'curl --negotiate -u : -v -s -I http://om:9874/jmx 2&gt;&amp;1'.</msg>
<msg time="2024-04-06T20:59:14.849000" level="INFO">${rc} = 0</msg>
<msg time="2024-04-06T20:59:14.849000" level="INFO">${output} = * About to connect() to om port 9874 (#0)
*   Trying 172.18.0.4...
* Connected to om (172.18.0.4) port 9874 (#0)
&gt; HEAD /jmx HTTP/1.1
&gt; User-Agent: curl/7.29.0
&gt; Host: om:9874
&gt; Accept: */*
&gt; 
&lt; HTTP/...</msg>
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<status status="PASS" start="2024-04-06T20:59:14.481000" elapsed="0.368000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-04-06T20:59:14.850000" level="INFO">* About to connect() to om port 9874 (#0)
*   Trying 172.18.0.4...
* Connected to om (172.18.0.4) port 9874 (#0)
&gt; HEAD /jmx HTTP/1.1
&gt; User-Agent: curl/7.29.0
&gt; Host: om:9874
&gt; Accept: */*
&gt; 
&lt; HTTP/1.1 401 Authentication required
&lt; Pragma: no-cache
&lt; X-Content-Type-Options: nosniff
&lt; X-XSS-Protection: 1; mode=block
&lt; X-FRAME-OPTIONS: SAMEORIGIN
&lt; WWW-Authenticate: Negotiate
&lt; Set-Cookie: hadoop.auth=; Path=/; HttpOnly
&lt; Cache-Control: must-revalidate,no-cache,no-store
&lt; Content-Type: text/html;charset=iso-8859-1
&lt; Content-Length: 404
&lt; 
* Connection #0 to host om left intact
* Issue another request to this URL: 'http://om:9874/jmx'
* Found bundle for host om: 0x1e11f50
* Re-using existing connection! (#0) with host om
* Connected to om (172.18.0.4) port 9874 (#0)
* Server auth using GSS-Negotiate with user ''
&gt; HEAD /jmx HTTP/1.1
&gt; Authorization: Negotiate YIICUAYJKoZIhvcSAQICAQBuggI/MIICO6ADAgEFoQMCAQ6iBwMFACAAAACjggFPYYIBSzCCAUegAwIBBaENGwtFWEFNUExFLkNPTaIVMBOgAwIBA6EMMAobBEhUVFAbAm9to4IBGDCCARSgAwIBEqEDAgEBooIBBgSCAQLzkPKl6UW5yWMg5F2EHiw4vVan7/59mDVpSAJKbUQ/CM+Ewb0/FcU0gnog91hUCzuDyLqs1JUqSWjAH7dgZzou1OP5031Bg0a4Zi43sZeoI7ZOdr4DaBTRbkt6mpqnDnfN4hP5xaXVoe7cFms3kRqWdvSdxJqNAH0oM1E4S3xE0VArisUyMoKTDj+2GSA9AEp5KO4kSwWcPn6l9fxjQIyjtaOZmNwyUjZsCsuA7edhfWeFq1rqA4UDKgS9LbBpdL6d4KrenhGbZmGK1e6wy6428N6B1cEPUWpXZhsI3Sc4IhHiv/46gYp8LkT3vTNbKVqrqhmCtyoQVOFCygOGkfKMf0akgdIwgc+gAwIBEqKBxwSBxFrBRJVQYSdBQyJvdBHIExELQnzoBDDDY+qFQkSJlammzfG785Ytw3XQICTo3FEOVixn6wcFlIev32X/p+gXuJp+zzl7IIN2mKGhSXeguJyaWDSr9ALkzOWUngOP7gcRz4/KRrw+VuU3eabtJCIvsGNB5/yAyYK/zkoXLtV9YQUz79hwDbW0ky4aODn5QDPhFjXhmDc3jdTW6QZ9JZpmQm88vvjNgCNOGX46eqFaKI/J4rgd+ggM27pFWXbPZotqein5etY=
&gt; User-Agent: curl/7.29.0
&gt; Host: om:9874
&gt; Accept: */*
&gt; 
&lt; HTTP/1.1 200 OK
&lt; Date: Sat, 06 Apr 2024 20:59:14 GMT
&lt; Cache-Control: no-cache
&lt; Expires: Sat, 06 Apr 2024 20:59:14 GMT
&lt; Pragma: no-cache
&lt; Content-Type: application/json; charset=utf8
&lt; X-Content-Type-Options: nosniff
&lt; X-XSS-Protection: 1; mode=block
&lt; X-FRAME-OPTIONS: SAMEORIGIN
&lt; WWW-Authenticate: Negotiate YGoGCSqGSIb3EgECAgIAb1swWaADAgEFoQMCAQ+iTTBLoAMCARKiRARCziF1KaoJquFpEZDMxi5rzc0G9LMHE9kt06AFScdIF5OjykoxCYLUN7L/Ax/Is0v9PhX/AT4NQiZgaY9YnatpkXHu
&lt; Set-Cookie: hadoop.auth="u=HTTP&amp;p=HTTP/s3g@EXAMPLE.COM&amp;t=kerberos&amp;e=1712473154647&amp;s=nTdw8iiA1TiNbtWovzvAjhQLjZnl9mqkann0PNez1JM="; Path=/; HttpOnly
&lt; Access-Control-Allow-Methods: GET
&lt; Access-Control-Allow-Origin: *
&lt; Content-Length: 387025
&lt; 
* Closing connection 0
HTTP/1.1 401 Authentication required
Pragma: no-cache
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
X-FRAME-OPTIONS: SAMEORIGIN
WWW-Authenticate: Negotiate
Set-Cookie: hadoop.auth=; Path=/; HttpOnly
Cache-Control: must-revalidate,no-cache,no-store
Content-Type: text/html;charset=iso-8859-1
Content-Length: 404

HTTP/1.1 200 OK
Date: Sat, 06 Apr 2024 20:59:14 GMT
Cache-Control: no-cache
Expires: Sat, 06 Apr 2024 20:59:14 GMT
Pragma: no-cache
Content-Type: application/json; charset=utf8
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
X-FRAME-OPTIONS: SAMEORIGIN
WWW-Authenticate: Negotiate YGoGCSqGSIb3EgECAgIAb1swWaADAgEFoQMCAQ+iTTBLoAMCARKiRARCziF1KaoJquFpEZDMxi5rzc0G9LMHE9kt06AFScdIF5OjykoxCYLUN7L/Ax/Is0v9PhX/AT4NQiZgaY9YnatpkXHu
Set-Cookie: hadoop.auth="u=HTTP&amp;p=HTTP/s3g@EXAMPLE.COM&amp;t=kerberos&amp;e=1712473154647&amp;s=nTdw8iiA1TiNbtWovzvAjhQLjZnl9mqkann0PNez1JM="; Path=/; HttpOnly
Access-Control-Allow-Methods: GET
Access-Control-Allow-Origin: *
Content-Length: 387025
</msg>
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-04-06T20:59:14.850000" elapsed="0.000000"/>
</kw>
<kw name="Should Be Equal As Integers" owner="BuiltIn">
<msg time="2024-04-06T20:59:14.850000" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<status status="PASS" start="2024-04-06T20:59:14.850000" elapsed="0.000000"/>
</kw>
<arg>${command}</arg>
<arg>0</arg>
<status status="PASS" start="2024-04-06T20:59:14.480000" elapsed="0.371000"/>
</kw>
<msg time="2024-04-06T20:59:14.851000" level="INFO">Returning from the enclosing user keyword.</msg>
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<status status="PASS" start="2024-04-06T20:59:14.480000" elapsed="0.371000"/>
</kw>
<msg time="2024-04-06T20:59:14.851000" level="INFO">${result} = * About to connect() to om port 9874 (#0)
*   Trying 172.18.0.4...
* Connected to om (172.18.0.4) port 9874 (#0)
&gt; HEAD /jmx HTTP/1.1
&gt; User-Agent: curl/7.29.0
&gt; Host: om:9874
&gt; Accept: */*
&gt; 
&lt; HTTP/...</msg>
<var>${result}</var>
<arg>curl --negotiate -u : -v -s -I ${url}</arg>
<status status="PASS" start="2024-04-06T20:59:14.480000" elapsed="0.371000"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${result}</arg>
<arg>200 OK</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2024-04-06T20:59:14.851000" elapsed="0.000000"/>
</kw>
<arg>${OM_JMX_ENDPOINT}</arg>
<status status="PASS" start="2024-04-06T20:59:14.305000" elapsed="0.546000"/>
</kw>
<status status="PASS" start="2024-04-06T20:59:14.305000" elapsed="0.547000"/>
</test>
<test id="s1-t5" name="Test metrics are registered" line="76">
<kw name="Execute" owner="os">
<kw name="Run Keyword And Return" owner="BuiltIn">
<kw name="Execute and checkrc" owner="os">
<kw name="Run And Return Rc And Output" owner="OperatingSystem">
<msg time="2024-04-06T20:59:14.855000" level="INFO">Running command 'curl --negotiate -u : -LSs http://om:9874/jmx | grep DecayRpcSchedulerMetrics2.ipc.9862 2&gt;&amp;1'.</msg>
<msg time="2024-04-06T20:59:14.936000" level="INFO">${rc} = 0</msg>
<msg time="2024-04-06T20:59:14.936000" level="INFO">${output} =     "name" : "Hadoop:service=OzoneManager,name=DecayRpcSchedulerMetrics2.ipc.9862",
    "modelerType" : "DecayRpcSchedulerMetrics2.ipc.9862",</msg>
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<status status="PASS" start="2024-04-06T20:59:14.854000" elapsed="0.082000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-04-06T20:59:14.937000" level="INFO">    "name" : "Hadoop:service=OzoneManager,name=DecayRpcSchedulerMetrics2.ipc.9862",
    "modelerType" : "DecayRpcSchedulerMetrics2.ipc.9862",</msg>
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-04-06T20:59:14.937000" elapsed="0.000000"/>
</kw>
<kw name="Should Be Equal As Integers" owner="BuiltIn">
<msg time="2024-04-06T20:59:14.938000" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<status status="PASS" start="2024-04-06T20:59:14.937000" elapsed="0.001000"/>
</kw>
<arg>${command}</arg>
<arg>0</arg>
<status status="PASS" start="2024-04-06T20:59:14.853000" elapsed="0.085000"/>
</kw>
<msg time="2024-04-06T20:59:14.938000" level="INFO">Returning from the enclosing user keyword.</msg>
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<status status="PASS" start="2024-04-06T20:59:14.853000" elapsed="0.085000"/>
</kw>
<msg time="2024-04-06T20:59:14.938000" level="INFO">${result} =     "name" : "Hadoop:service=OzoneManager,name=DecayRpcSchedulerMetrics2.ipc.9862",
    "modelerType" : "DecayRpcSchedulerMetrics2.ipc.9862",</msg>
<var>${result}</var>
<arg>curl --negotiate -u : -LSs ${OM_JMX_ENDPOINT} | grep ${DECAY_RPC_SCHEDULER_METRICS_NAME}</arg>
<status status="PASS" start="2024-04-06T20:59:14.852000" elapsed="0.086000"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${result}</arg>
<arg>${DECAY_RPC_SCHEDULER_METRICS_NAME}</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2024-04-06T20:59:14.938000" elapsed="0.001000"/>
</kw>
<status status="PASS" start="2024-04-06T20:59:14.852000" elapsed="0.087000"/>
</test>
<test id="s1-t6" name="Run freon s3kg" line="80">
<kw name="Freon s3kg">
<kw name="Execute" owner="os">
<kw name="Run Keyword And Return" owner="BuiltIn">
<kw name="Execute and checkrc" owner="os">
<kw name="Run And Return Rc And Output" owner="OperatingSystem">
<msg time="2024-04-06T20:59:14.944000" level="INFO">Running command 'ozone freon s3kg -e http://s3g:9878 -t 10 -n 1000 -p s3bg  2&gt;&amp;1'.</msg>
<msg time="2024-04-06T20:59:44.982000" level="INFO">${rc} = 0</msg>
<msg time="2024-04-06T20:59:44.983000" level="INFO">${output} = 2024-04-06 20:59:16,525 [main] INFO impl.MetricsConfig: Loaded properties from hadoop-metrics2.properties
2024-04-06 20:59:16,628 [main] INFO impl.MetricsSystemImpl: Scheduled Metric snapshot period a...</msg>
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<status status="PASS" start="2024-04-06T20:59:14.943000" elapsed="30.040000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-04-06T20:59:44.983000" level="INFO">2024-04-06 20:59:16,525 [main] INFO impl.MetricsConfig: Loaded properties from hadoop-metrics2.properties
2024-04-06 20:59:16,628 [main] INFO impl.MetricsSystemImpl: Scheduled Metric snapshot period at 10 second(s).
2024-04-06 20:59:16,628 [main] INFO impl.MetricsSystemImpl: ozone-freon metrics system started
2024-04-06 20:59:16,729 [main] INFO freon.BaseFreonGenerator: Executing test with prefix s3bg and number-of-tests 1000
2024-04-06 20:59:16,843 [Thread-5] INFO freon.ProgressBar: Progress: 0.00 % (0 out of 1000)
2024-04-06 20:59:17,845 [Thread-5] INFO freon.ProgressBar: Progress: 0.00 % (0 out of 1000)
2024-04-06 20:59:18,846 [Thread-5] INFO freon.ProgressBar: Progress: 0.00 % (0 out of 1000)
2024-04-06 20:59:19,846 [Thread-5] INFO freon.ProgressBar: Progress: 0.00 % (0 out of 1000)
2024-04-06 20:59:20,848 [Thread-5] INFO freon.ProgressBar: Progress: 1.90 % (19 out of 1000)
2024-04-06 20:59:21,848 [Thread-5] INFO freon.ProgressBar: Progress: 4.40 % (44 out of 1000)
2024-04-06 20:59:22,849 [Thread-5] INFO freon.ProgressBar: Progress: 7.00 % (70 out of 1000)
2024-04-06 20:59:23,850 [Thread-5] INFO freon.ProgressBar: Progress: 9.30 % (93 out of 1000)
2024-04-06 20:59:24,857 [Thread-5] INFO freon.ProgressBar: Progress: 12.10 % (121 out of 1000)
2024-04-06 20:59:25,857 [Thread-5] INFO freon.ProgressBar: Progress: 15.60 % (156 out of 1000)
2024-04-06 20:59:26,870 [Thread-5] INFO freon.ProgressBar: Progress: 18.70 % (187 out of 1000)
2024-04-06 20:59:27,877 [Thread-5] INFO freon.ProgressBar: Progress: 21.40 % (214 out of 1000)
2024-04-06 20:59:28,879 [Thread-5] INFO freon.ProgressBar: Progress: 24.80 % (248 out of 1000)
2024-04-06 20:59:29,880 [Thread-5] INFO freon.ProgressBar: Progress: 27.90 % (279 out of 1000)
2024-04-06 20:59:30,893 [Thread-5] INFO freon.ProgressBar: Progress: 31.90 % (319 out of 1000)
2024-04-06 20:59:31,894 [Thread-5] INFO freon.ProgressBar: Progress: 36.00 % (360 out of 1000)
2024-04-06 20:59:32,898 [Thread-5] INFO freon.ProgressBar: Progress: 40.60 % (406 out of 1000)
2024-04-06 20:59:33,899 [Thread-5] INFO freon.ProgressBar: Progress: 44.20 % (442 out of 1000)
2024-04-06 20:59:34,900 [Thread-5] INFO freon.ProgressBar: Progress: 49.10 % (491 out of 1000)
2024-04-06 20:59:35,901 [Thread-5] INFO freon.ProgressBar: Progress: 54.00 % (540 out of 1000)
2024-04-06 20:59:36,901 [Thread-5] INFO freon.ProgressBar: Progress: 58.20 % (582 out of 1000)
2024-04-06 20:59:37,905 [Thread-5] INFO freon.ProgressBar: Progress: 62.90 % (629 out of 1000)
2024-04-06 20:59:38,906 [Thread-5] INFO freon.ProgressBar: Progress: 68.00 % (680 out of 1000)
2024-04-06 20:59:39,907 [Thread-5] INFO freon.ProgressBar: Progress: 73.00 % (730 out of 1000)
2024-04-06 20:59:40,908 [Thread-5] INFO freon.ProgressBar: Progress: 78.70 % (787 out of 1000)
2024-04-06 20:59:41,920 [Thread-5] INFO freon.ProgressBar: Progress: 84.00 % (840 out of 1000)
2024-04-06 20:59:42,921 [Thread-5] INFO freon.ProgressBar: Progress: 89.40 % (894 out of 1000)
2024-04-06 20:59:43,921 [Thread-5] INFO freon.ProgressBar: Progress: 95.10 % (951 out of 1000)
2024-04-06 20:59:44,922 [Thread-5] INFO freon.ProgressBar: Progress: 100.00 % (1000 out of 1000)
2024-04-06 20:59:44,943 [shutdown-hook-0] INFO metrics: type=TIMER, name=key-create, count=1000, min=68.603081, max=2513.942895, mean=258.9735494044584, stddev=222.33973160598072, median=217.055801, p75=291.215252, p95=445.929321, p98=525.45099, p99=636.976151, p999=2498.35001, mean_rate=36.54473252453621, m1=20.840291285240202, m5=14.429935579174757, m15=13.221030913189924, rate_unit=events/second, duration_unit=milliseconds
2024-04-06 20:59:44,944 [shutdown-hook-0] INFO freon.BaseFreonGenerator: Total execution time (sec): 28
2024-04-06 20:59:44,944 [shutdown-hook-0] INFO freon.BaseFreonGenerator: Failures: 0
2024-04-06 20:59:44,944 [shutdown-hook-0] INFO freon.BaseFreonGenerator: Successful executions: 1000</msg>
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-04-06T20:59:44.983000" elapsed="0.001000"/>
</kw>
<kw name="Should Be Equal As Integers" owner="BuiltIn">
<msg time="2024-04-06T20:59:44.984000" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<status status="PASS" start="2024-04-06T20:59:44.984000" elapsed="0.000000"/>
</kw>
<arg>${command}</arg>
<arg>0</arg>
<status status="PASS" start="2024-04-06T20:59:14.942000" elapsed="30.042000"/>
</kw>
<msg time="2024-04-06T20:59:44.984000" level="INFO">Returning from the enclosing user keyword.</msg>
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<status status="PASS" start="2024-04-06T20:59:14.942000" elapsed="30.042000"/>
</kw>
<msg time="2024-04-06T20:59:44.985000" level="INFO">${result} = 2024-04-06 20:59:16,525 [main] INFO impl.MetricsConfig: Loaded properties from hadoop-metrics2.properties
2024-04-06 20:59:16,628 [main] INFO impl.MetricsSystemImpl: Scheduled Metric snapshot period a...</msg>
<var>${result}</var>
<arg>ozone freon s3kg -e ${S3_ENDPOINT_URL} -t ${threads} -n ${n} -p ${prefix} ${args}</arg>
<status status="PASS" start="2024-04-06T20:59:14.941000" elapsed="30.044000"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${result}</arg>
<arg>Successful executions: ${n}</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2024-04-06T20:59:44.985000" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2024-04-06T20:59:14.939000" elapsed="30.046000"/>
</kw>
<status status="PASS" start="2024-04-06T20:59:14.939000" elapsed="30.046000"/>
</test>
<test id="s1-t7" name="Test caller from metrics" line="83">
<kw name="Check metrics caller">
<kw name="Execute" owner="os">
<kw name="Run Keyword And Return" owner="BuiltIn">
<kw name="Execute and checkrc" owner="os">
<kw name="Run And Return Rc And Output" owner="OperatingSystem">
<msg time="2024-04-06T20:59:44.990000" level="INFO">Running command 'curl --negotiate -u : -LSs http://om:9874/jmx | sed -n '/DecayRpcSchedulerMetrics2.ipc.9862/,/}/p' | grep 'Caller(' 2&gt;&amp;1'.</msg>
<msg time="2024-04-06T20:59:45.079000" level="INFO">${rc} = 0</msg>
<msg time="2024-04-06T20:59:45.079000" level="INFO">${output} =     "Caller(testuser/s3g@EXAMPLE.COM).Volume" : 4002,
    "Caller(testuser/s3g@EXAMPLE.COM).Priority" : 3,</msg>
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<status status="PASS" start="2024-04-06T20:59:44.988000" elapsed="0.091000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2024-04-06T20:59:45.080000" level="INFO">    "Caller(testuser/s3g@EXAMPLE.COM).Volume" : 4002,
    "Caller(testuser/s3g@EXAMPLE.COM).Priority" : 3,</msg>
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2024-04-06T20:59:45.080000" elapsed="0.000000"/>
</kw>
<kw name="Should Be Equal As Integers" owner="BuiltIn">
<msg time="2024-04-06T20:59:45.081000" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;class 'str'&gt;</msg>
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<status status="PASS" start="2024-04-06T20:59:45.080000" elapsed="0.001000"/>
</kw>
<arg>${command}</arg>
<arg>0</arg>
<status status="PASS" start="2024-04-06T20:59:44.988000" elapsed="0.093000"/>
</kw>
<msg time="2024-04-06T20:59:45.081000" level="INFO">Returning from the enclosing user keyword.</msg>
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<status status="PASS" start="2024-04-06T20:59:44.987000" elapsed="0.094000"/>
</kw>
<msg time="2024-04-06T20:59:45.081000" level="INFO">${result} =     "Caller(testuser/s3g@EXAMPLE.COM).Volume" : 4002,
    "Caller(testuser/s3g@EXAMPLE.COM).Priority" : 3,</msg>
<var>${result}</var>
<arg>curl --negotiate -u : -LSs ${OM_JMX_ENDPOINT} | sed -n '/${DECAY_RPC_SCHEDULER_METRICS_NAME}/,/}/p' | grep 'Caller('</arg>
<status status="PASS" start="2024-04-06T20:59:44.987000" elapsed="0.094000"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${result}</arg>
<arg>${TEST_USER}</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2024-04-06T20:59:45.081000" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2024-04-06T20:59:44.986000" elapsed="0.096000"/>
</kw>
<status status="PASS" start="2024-04-06T20:59:44.986000" elapsed="0.096000"/>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="PASS" start="2024-04-06T20:59:06.678000" elapsed="38.405000"/>
</suite>
<statistics>
<total>
<stat pass="7" fail="0" skip="0">All Tests</stat>
</total>
<tag>
</tag>
<suite>
<stat pass="7" fail="0" skip="0" id="s1" name="ozonesecure-fcq">ozonesecure-fcq</stat>
</suite>
</statistics>
<errors>
</errors>
</robot>
