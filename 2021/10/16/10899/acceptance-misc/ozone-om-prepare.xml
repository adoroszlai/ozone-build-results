<?xml version="1.0" encoding="UTF-8"?>
<robot generator="Rebot 4.1.2 (Python 3.6.9 on linux)" generated="20211016 13:06:42.798" rpa="false" schemaversion="2">
<suite id="s1" name="ozone-om-prepare">
<suite id="s1-s1" name="Om-Cancel-Prepare" source="/opt/hadoop/smoketest/omha/om-cancel-prepare.robot">
<kw name="Generate volume and bucket names" type="SETUP">
<kw name="Generate Random String" library="String">
<var>${random}</var>
<arg>5</arg>
<arg>[NUMBERS]</arg>
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<msg timestamp="20211016 13:01:53.562" level="INFO">${random} = 07597</msg>
<status status="PASS" starttime="20211016 13:01:53.561" endtime="20211016 13:01:53.562"/>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<arg>${volume_name}</arg>
<arg>${random}-volume-for-cancel</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<msg timestamp="20211016 13:01:53.563" level="INFO">${volume_name} = 07597-volume-for-cancel</msg>
<status status="PASS" starttime="20211016 13:01:53.562" endtime="20211016 13:01:53.564"/>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<arg>${bucket_name}</arg>
<arg>${random}-bucket-for-cancel</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<msg timestamp="20211016 13:01:53.565" level="INFO">${bucket_name} = 07597-bucket-for-cancel</msg>
<status status="PASS" starttime="20211016 13:01:53.564" endtime="20211016 13:01:53.565"/>
</kw>
<status status="PASS" starttime="20211016 13:01:53.561" endtime="20211016 13:01:53.565"/>
</kw>
<test id="s1-s1-t1" name="Cancel Ozone Manager Prepare">
<kw name="Run Keyword If" library="BuiltIn" type="SETUP">
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" starttime="20211016 13:01:53.566" endtime="20211016 13:01:53.567"/>
</kw>
<kw name="Execute" library="os">
<var>${result}</var>
<arg>ozone admin om cancelprepare -id=omservice</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20211016 13:01:53.572" level="INFO">Running command 'ozone admin om cancelprepare -id=omservice 2&gt;&amp;1'.</msg>
<msg timestamp="20211016 13:01:56.890" level="INFO">${rc} = 0</msg>
<msg timestamp="20211016 13:01:56.890" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteExceptio...</msg>
<status status="PASS" starttime="20211016 13:01:53.568" endtime="20211016 13:01:56.890"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20211016 13:01:56.892" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.ozone.om.exceptions.OMNotLeaderException): OM:om2 is not the leader. Could not determine the leader node.
	at org.apache.hadoop.ozone.om.ratis.utils.OzoneManagerRatisUtils.createNotLeaderException(OzoneManagerRatisUtils.java:465)
	at org.apache.hadoop.ozone.om.ratis.utils.OzoneManagerRatisUtils.checkLeaderStatus(OzoneManagerRatisUtils.java:451)
	at org.apache.hadoop.ozone.protocolPB.OzoneManagerProtocolServerSideTranslatorPB.checkLeaderStatus(OzoneManagerProtocolServerSideTranslatorPB.java:243)
	at org.apache.hadoop.ozone.protocolPB.OzoneManagerProtocolServerSideTranslatorPB.processRequest(OzoneManagerProtocolServerSideTranslatorPB.java:135)
	at org.apache.hadoop.hdds.server.OzoneProtocolMessageDispatcher.processRequest(OzoneProtocolMessageDispatcher.java:87)
	at org.apache.hadoop.ozone.protocolPB.OzoneManagerProtocolServerSideTranslatorPB.submitRequest(OzoneManagerProtocolServerSideTranslatorPB.java:123)
	at org.apache.hadoop.ozone.protocol.proto.OzoneManagerProtocolProtos$OzoneManagerService$2.callBlockingMethod(OzoneManagerProtocolProtos.java)
	at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:466)
	at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:574)
	at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:552)
	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093)
	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1035)
	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:963)
	at java.base/java.security.AccessController.doPrivileged(Native Method)
	at java.base/javax.security.auth.Subject.doAs(Subject.java:423)
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878)
	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2966)
, while invoking $Proxy20.submitRequest over nodeId=om2,nodeAddress=om2:9862 after 1 failover attempts. Trying to failover immediately.
Cancel prepare succeeded, cluster can now accept write requests.</msg>
<status status="PASS" starttime="20211016 13:01:56.891" endtime="20211016 13:01:56.892"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20211016 13:01:56.893" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20211016 13:01:56.892" endtime="20211016 13:01:56.893"/>
</kw>
<status status="PASS" starttime="20211016 13:01:53.568" endtime="20211016 13:01:56.893"/>
</kw>
<msg timestamp="20211016 13:01:56.893" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20211016 13:01:53.567" endtime="20211016 13:01:56.893"/>
</kw>
<msg timestamp="20211016 13:01:56.894" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteExceptio...</msg>
<status status="PASS" starttime="20211016 13:01:53.567" endtime="20211016 13:01:56.894"/>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<arg>3min</arg>
<arg>5sec</arg>
<arg>Should contain</arg>
<arg>${result}</arg>
<arg>Cancel prepare succeeded</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<kw name="Should Contain" library="BuiltIn">
<arg>${result}</arg>
<arg>Cancel prepare succeeded</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20211016 13:01:56.894" endtime="20211016 13:01:56.895"/>
</kw>
<status status="PASS" starttime="20211016 13:01:56.894" endtime="20211016 13:01:56.895"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20211016 13:01:53.565" endtime="20211016 13:01:56.895"/>
</test>
<test id="s1-s1-t2" name="Test write operations">
<kw name="Run Keyword If" library="BuiltIn" type="SETUP">
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" starttime="20211016 13:01:56.897" endtime="20211016 13:01:56.898"/>
</kw>
<kw name="Execute" library="os">
<arg>ozone sh volume create /${volume_name}</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20211016 13:01:56.904" level="INFO">Running command 'ozone sh volume create /07597-volume-for-cancel 2&gt;&amp;1'.</msg>
<msg timestamp="20211016 13:01:59.555" level="INFO">${rc} = 0</msg>
<msg timestamp="20211016 13:01:59.555" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20211016 13:01:56.901" endtime="20211016 13:01:59.556"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20211016 13:01:59.557" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20211016 13:01:59.556" endtime="20211016 13:01:59.557"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20211016 13:01:59.558" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20211016 13:01:59.557" endtime="20211016 13:01:59.558"/>
</kw>
<status status="PASS" starttime="20211016 13:01:56.901" endtime="20211016 13:01:59.558"/>
</kw>
<msg timestamp="20211016 13:01:59.558" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20211016 13:01:56.899" endtime="20211016 13:01:59.559"/>
</kw>
<status status="PASS" starttime="20211016 13:01:56.898" endtime="20211016 13:01:59.559"/>
</kw>
<kw name="Execute" library="os">
<arg>ozone sh bucket create /${volume_name}/${bucket_name}</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20211016 13:01:59.563" level="INFO">Running command 'ozone sh bucket create /07597-volume-for-cancel/07597-bucket-for-cancel 2&gt;&amp;1'.</msg>
<msg timestamp="20211016 13:02:02.185" level="INFO">${rc} = 0</msg>
<msg timestamp="20211016 13:02:02.185" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20211016 13:01:59.561" endtime="20211016 13:02:02.185"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20211016 13:02:02.187" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20211016 13:02:02.186" endtime="20211016 13:02:02.187"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20211016 13:02:02.187" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20211016 13:02:02.187" endtime="20211016 13:02:02.187"/>
</kw>
<status status="PASS" starttime="20211016 13:01:59.560" endtime="20211016 13:02:02.188"/>
</kw>
<msg timestamp="20211016 13:02:02.188" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20211016 13:01:59.560" endtime="20211016 13:02:02.188"/>
</kw>
<status status="PASS" starttime="20211016 13:01:59.559" endtime="20211016 13:02:02.188"/>
</kw>
<kw name="Execute" library="os">
<var>${result}</var>
<arg>ozone sh key put /${volume_name}/${bucket_name}/cancel-key /opt/hadoop/NOTICE.txt</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20211016 13:02:02.192" level="INFO">Running command 'ozone sh key put /07597-volume-for-cancel/07597-bucket-for-cancel/cancel-key /opt/hadoop/NOTICE.txt 2&gt;&amp;1'.</msg>
<msg timestamp="20211016 13:02:07.111" level="INFO">${rc} = 0</msg>
<msg timestamp="20211016 13:02:07.111" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20211016 13:02:02.190" endtime="20211016 13:02:07.111"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20211016 13:02:07.113" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20211016 13:02:07.112" endtime="20211016 13:02:07.113"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20211016 13:02:07.113" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20211016 13:02:07.113" endtime="20211016 13:02:07.114"/>
</kw>
<status status="PASS" starttime="20211016 13:02:02.189" endtime="20211016 13:02:07.114"/>
</kw>
<msg timestamp="20211016 13:02:07.114" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20211016 13:02:02.189" endtime="20211016 13:02:07.114"/>
</kw>
<msg timestamp="20211016 13:02:07.115" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20211016 13:02:02.188" endtime="20211016 13:02:07.115"/>
</kw>
<kw name="Execute" library="os">
<var>${result}</var>
<arg>ozone sh key info /${volume_name}/${bucket_name}/cancel-key</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20211016 13:02:07.118" level="INFO">Running command 'ozone sh key info /07597-volume-for-cancel/07597-bucket-for-cancel/cancel-key 2&gt;&amp;1'.</msg>
<msg timestamp="20211016 13:02:09.990" level="INFO">${rc} = 0</msg>
<msg timestamp="20211016 13:02:09.990" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "volumeName" : "07597-volume-for-cancel",
  "bucketName" : "07597-buck...</msg>
<status status="PASS" starttime="20211016 13:02:07.116" endtime="20211016 13:02:09.990"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20211016 13:02:09.991" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "volumeName" : "07597-volume-for-cancel",
  "bucketName" : "07597-bucket-for-cancel",
  "name" : "cancel-key",
  "dataSize" : 17526,
  "creationTime" : "2021-10-16T13:02:04.831Z",
  "modificationTime" : "2021-10-16T13:02:06.712Z",
  "replicationConfig" : {
    "replicationFactor" : "ONE",
    "requiredNodes" : 1,
    "replicationType" : "RATIS"
  },
  "ozoneKeyLocations" : [ {
    "containerID" : 2,
    "localID" : 107544261427200103,
    "length" : 17526,
    "offset" : 0,
    "keyOffset" : 0
  } ],
  "metadata" : { },
  "replicationType" : "RATIS",
  "replicationFactor" : 1
}</msg>
<status status="PASS" starttime="20211016 13:02:09.990" endtime="20211016 13:02:09.991"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20211016 13:02:09.992" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20211016 13:02:09.991" endtime="20211016 13:02:09.992"/>
</kw>
<status status="PASS" starttime="20211016 13:02:07.116" endtime="20211016 13:02:09.993"/>
</kw>
<msg timestamp="20211016 13:02:09.993" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20211016 13:02:07.115" endtime="20211016 13:02:09.993"/>
</kw>
<msg timestamp="20211016 13:02:09.993" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "volumeName" : "07597-volume-for-cancel",
  "bucketName" : "07597-buck...</msg>
<status status="PASS" starttime="20211016 13:02:07.115" endtime="20211016 13:02:09.993"/>
</kw>
<kw name="Should Contain" library="BuiltIn">
<arg>${result}</arg>
<arg>\"name\" : \"cancel-key\"</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20211016 13:02:09.993" endtime="20211016 13:02:09.994"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20211016 13:01:56.896" endtime="20211016 13:02:09.994"/>
</test>
<doc>Smoke test for ozone manager cancel prepare</doc>
<status status="PASS" starttime="20211016 13:01:53.491" endtime="20211016 13:02:09.995"/>
</suite>
<suite id="s1-s2" name="Om-Prepare" source="/opt/hadoop/smoketest/omha/om-prepare.robot">
<kw name="Create Specific OM data for prepare" type="SETUP">
<kw name="Execute" library="os">
<arg>ozone freon rk --replication-type=RATIS --num-of-volumes 1 --num-of-buckets 1 --num-of-keys 100</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20211016 13:02:14.447" level="INFO">Running command 'ozone freon rk --replication-type=RATIS --num-of-volumes 1 --num-of-buckets 1 --num-of-keys 100 2&gt;&amp;1'.</msg>
<msg timestamp="20211016 13:02:27.533" level="INFO">${rc} = 0</msg>
<msg timestamp="20211016 13:02:27.534" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
2021-10-16 13:02:15,890 [main] INFO impl.MetricsConfig: Loaded properties ...</msg>
<status status="PASS" starttime="20211016 13:02:14.443" endtime="20211016 13:02:27.534"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20211016 13:02:27.534" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
2021-10-16 13:02:15,890 [main] INFO impl.MetricsConfig: Loaded properties from hadoop-metrics2.properties
2021-10-16 13:02:16,054 [main] INFO impl.MetricsSystemImpl: Scheduled Metric snapshot period at 10 second(s).
2021-10-16 13:02:16,054 [main] INFO impl.MetricsSystemImpl: ozone-freon metrics system started
2021-10-16 13:02:16,931 [main] INFO retry.RetryInvocationHandler: com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.ozone.om.exceptions.OMNotLeaderException): OM:om2 is not the leader. Could not determine the leader node.
	at org.apache.hadoop.ozone.protocolPB.OzoneManagerProtocolServerSideTranslatorPB.createNotLeaderException(OzoneManagerProtocolServerSideTranslatorPB.java:187)
	at org.apache.hadoop.ozone.protocolPB.OzoneManagerProtocolServerSideTranslatorPB.createLeaderErrorException(OzoneManagerProtocolServerSideTranslatorPB.java:174)
	at org.apache.hadoop.ozone.protocolPB.OzoneManagerProtocolServerSideTranslatorPB.submitReadRequestToOM(OzoneManagerProtocolServerSideTranslatorPB.java:167)
	at org.apache.hadoop.ozone.protocolPB.OzoneManagerProtocolServerSideTranslatorPB.processRequest(OzoneManagerProtocolServerSideTranslatorPB.java:133)
	at org.apache.hadoop.hdds.server.OzoneProtocolMessageDispatcher.processRequest(OzoneProtocolMessageDispatcher.java:87)
	at org.apache.hadoop.ozone.protocolPB.OzoneManagerProtocolServerSideTranslatorPB.submitRequest(OzoneManagerProtocolServerSideTranslatorPB.java:123)
	at org.apache.hadoop.ozone.protocol.proto.OzoneManagerProtocolProtos$OzoneManagerService$2.callBlockingMethod(OzoneManagerProtocolProtos.java)
	at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:466)
	at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:574)
	at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:552)
	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093)
	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1035)
	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:963)
	at java.base/java.security.AccessController.doPrivileged(Native Method)
	at java.base/javax.security.auth.Subject.doAs(Subject.java:423)
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878)
	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2966)
, while invoking $Proxy22.submitRequest over nodeId=om2,nodeAddress=om2:9862 after 1 failover attempts. Trying to failover immediately.
2021-10-16 13:02:17,088 [main] INFO freon.RandomKeyGenerator: Number of Threads: 10
2021-10-16 13:02:17,116 [main] INFO freon.RandomKeyGenerator: Number of Volumes: 1.
2021-10-16 13:02:17,116 [main] INFO freon.RandomKeyGenerator: Number of Buckets per Volume: 1.
2021-10-16 13:02:17,116 [main] INFO freon.RandomKeyGenerator: Number of Keys per Bucket: 100.
2021-10-16 13:02:17,116 [main] INFO freon.RandomKeyGenerator: Key size: 10240 bytes
2021-10-16 13:02:17,116 [main] INFO freon.RandomKeyGenerator: Buffer size: 4096 bytes
2021-10-16 13:02:17,116 [main] INFO freon.RandomKeyGenerator: validateWrites : false
2021-10-16 13:02:17,116 [main] INFO freon.RandomKeyGenerator: cleanObjects : false
2021-10-16 13:02:17,127 [main] INFO freon.RandomKeyGenerator: Starting progress bar Thread.
2021-10-16 13:02:17,142 [Thread-6] INFO freon.ProgressBar: Progress: 0.00 % (0 out of 100)
2021-10-16 13:02:17,166 [pool-2-thread-1] INFO rpc.RpcClient: Creating Volume: vol-0-72163, with hadoop as owner and space quota set to -1 bytes, counts quota set to -1
2021-10-16 13:02:17,228 [pool-2-thread-2] INFO rpc.RpcClient: Creating Bucket: vol-0-72163/bucket-0-28588, with Versioning false and Storage Type set to DISK and Encryption set to false 
2021-10-16 13:02:18,106 [pool-2-thread-5] WARN impl.MetricsSystemImpl: ozone-freon metrics system already initialized!
2021-10-16 13:02:18,146 [Thread-6] INFO freon.ProgressBar: Progress: 0.00 % (0 out of 100)
2021-10-16 13:02:18,358 [pool-2-thread-5] INFO metrics.MetricRegistries: Loaded MetricRegistries class org.apache.ratis.metrics.impl.MetricRegistriesImpl
2021-10-16 13:02:19,160 [Thread-6] INFO freon.ProgressBar: Progress: 10.00 % (10 out of 100)
2021-10-16 13:02:20,161 [Thread-6] INFO freon.ProgressBar: Progress: 25.00 % (25 out of 100)
2021-10-16 13:02:21,161 [Thread-6] INFO freon.ProgressBar: Progress: 48.00 % (48 out of 100)
2021-10-16 13:02:22,172 [Thread-6] INFO freon.ProgressBar: Progress: 71.00 % (71 out of 100)
2021-10-16 13:02:23,173 [Thread-6] INFO freon.ProgressBar: Progress: 91.00 % (91 out of 100)
2021-10-16 13:02:24,173 [Thread-6] INFO freon.ProgressBar: Progress: 100.00 % (100 out of 100)

***************************************************
Status: Success
Git Base Revision: a3b9c37a397ad4188041dd80621bdeefc46885f2
Number of Volumes created: 1
Number of Buckets created: 1
Number of Keys added: 100
Ratis replication factor: ONE
Ratis replication type: RATIS
Average Time spent in volume creation: 00:00:00,005
Average Time spent in bucket creation: 00:00:00,003
Average Time spent in key creation: 00:00:01,650
Average Time spent in key write: 00:00:00,776
Total bytes written: 1024000
Total Execution time: 00:00:10,875
***************************************************</msg>
<status status="PASS" starttime="20211016 13:02:27.534" endtime="20211016 13:02:27.535"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20211016 13:02:27.535" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20211016 13:02:27.535" endtime="20211016 13:02:27.535"/>
</kw>
<status status="PASS" starttime="20211016 13:02:14.442" endtime="20211016 13:02:27.535"/>
</kw>
<msg timestamp="20211016 13:02:27.536" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20211016 13:02:14.442" endtime="20211016 13:02:27.536"/>
</kw>
<status status="PASS" starttime="20211016 13:02:14.441" endtime="20211016 13:02:27.536"/>
</kw>
<kw name="Generate Random String" library="String">
<var>${random}</var>
<arg>5</arg>
<arg>[NUMBERS]</arg>
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<msg timestamp="20211016 13:02:27.537" level="INFO">${random} = 10583</msg>
<status status="PASS" starttime="20211016 13:02:27.536" endtime="20211016 13:02:27.537"/>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<arg>${volume_name}</arg>
<arg>${random}-volume-for-prepare</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<msg timestamp="20211016 13:02:27.539" level="INFO">${volume_name} = 10583-volume-for-prepare</msg>
<status status="PASS" starttime="20211016 13:02:27.537" endtime="20211016 13:02:27.539"/>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<arg>${bucket_name}</arg>
<arg>${random}-bucket-for-prepare</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<msg timestamp="20211016 13:02:27.540" level="INFO">${bucket_name} = 10583-bucket-for-prepare</msg>
<status status="PASS" starttime="20211016 13:02:27.539" endtime="20211016 13:02:27.540"/>
</kw>
<kw name="Execute" library="os">
<arg>ozone sh volume create /${volume_name}</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20211016 13:02:27.543" level="INFO">Running command 'ozone sh volume create /10583-volume-for-prepare 2&gt;&amp;1'.</msg>
<msg timestamp="20211016 13:02:30.185" level="INFO">${rc} = 0</msg>
<msg timestamp="20211016 13:02:30.185" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20211016 13:02:27.541" endtime="20211016 13:02:30.185"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20211016 13:02:30.186" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20211016 13:02:30.186" endtime="20211016 13:02:30.187"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20211016 13:02:30.189" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20211016 13:02:30.187" endtime="20211016 13:02:30.189"/>
</kw>
<status status="PASS" starttime="20211016 13:02:27.541" endtime="20211016 13:02:30.189"/>
</kw>
<msg timestamp="20211016 13:02:30.189" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20211016 13:02:27.540" endtime="20211016 13:02:30.189"/>
</kw>
<status status="PASS" starttime="20211016 13:02:27.540" endtime="20211016 13:02:30.190"/>
</kw>
<kw name="Execute" library="os">
<arg>ozone sh bucket create /${volume_name}/${bucket_name}</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20211016 13:02:30.193" level="INFO">Running command 'ozone sh bucket create /10583-volume-for-prepare/10583-bucket-for-prepare 2&gt;&amp;1'.</msg>
<msg timestamp="20211016 13:02:32.651" level="INFO">${rc} = 0</msg>
<msg timestamp="20211016 13:02:32.651" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20211016 13:02:30.191" endtime="20211016 13:02:32.651"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20211016 13:02:32.652" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20211016 13:02:32.652" endtime="20211016 13:02:32.652"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20211016 13:02:32.653" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20211016 13:02:32.652" endtime="20211016 13:02:32.653"/>
</kw>
<status status="PASS" starttime="20211016 13:02:30.191" endtime="20211016 13:02:32.653"/>
</kw>
<msg timestamp="20211016 13:02:32.653" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20211016 13:02:30.190" endtime="20211016 13:02:32.653"/>
</kw>
<status status="PASS" starttime="20211016 13:02:30.190" endtime="20211016 13:02:32.654"/>
</kw>
<kw name="Execute" library="os">
<arg>ozone sh key put /${volume_name}/${bucket_name}/prepare-key /opt/hadoop/NOTICE.txt</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20211016 13:02:32.657" level="INFO">Running command 'ozone sh key put /10583-volume-for-prepare/10583-bucket-for-prepare/prepare-key /opt/hadoop/NOTICE.txt 2&gt;&amp;1'.</msg>
<msg timestamp="20211016 13:02:37.674" level="INFO">${rc} = 0</msg>
<msg timestamp="20211016 13:02:37.674" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20211016 13:02:32.655" endtime="20211016 13:02:37.674"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20211016 13:02:37.675" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20211016 13:02:37.675" endtime="20211016 13:02:37.676"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20211016 13:02:37.677" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20211016 13:02:37.676" endtime="20211016 13:02:37.677"/>
</kw>
<status status="PASS" starttime="20211016 13:02:32.655" endtime="20211016 13:02:37.677"/>
</kw>
<msg timestamp="20211016 13:02:37.677" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20211016 13:02:32.654" endtime="20211016 13:02:37.677"/>
</kw>
<status status="PASS" starttime="20211016 13:02:32.654" endtime="20211016 13:02:37.677"/>
</kw>
<status status="PASS" starttime="20211016 13:02:14.441" endtime="20211016 13:02:37.678"/>
</kw>
<test id="s1-s2-t1" name="Prepare Ozone Manager">
<kw name="Run Keyword If" library="BuiltIn" type="SETUP">
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" starttime="20211016 13:02:37.679" endtime="20211016 13:02:37.680"/>
</kw>
<kw name="Execute" library="os">
<var>${result}</var>
<arg>ozone admin om prepare -id=omservice</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20211016 13:02:37.683" level="INFO">Running command 'ozone admin om prepare -id=omservice 2&gt;&amp;1'.</msg>
<msg timestamp="20211016 13:02:45.647" level="INFO">${rc} = 0</msg>
<msg timestamp="20211016 13:02:45.647" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteExceptio...</msg>
<status status="PASS" starttime="20211016 13:02:37.681" endtime="20211016 13:02:45.647"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20211016 13:02:45.649" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.ozone.om.exceptions.OMNotLeaderException): OM:om2 is not the leader. Could not determine the leader node.
	at org.apache.hadoop.ozone.om.ratis.utils.OzoneManagerRatisUtils.createNotLeaderException(OzoneManagerRatisUtils.java:465)
	at org.apache.hadoop.ozone.om.ratis.utils.OzoneManagerRatisUtils.checkLeaderStatus(OzoneManagerRatisUtils.java:451)
	at org.apache.hadoop.ozone.protocolPB.OzoneManagerProtocolServerSideTranslatorPB.checkLeaderStatus(OzoneManagerProtocolServerSideTranslatorPB.java:243)
	at org.apache.hadoop.ozone.protocolPB.OzoneManagerProtocolServerSideTranslatorPB.processRequest(OzoneManagerProtocolServerSideTranslatorPB.java:135)
	at org.apache.hadoop.hdds.server.OzoneProtocolMessageDispatcher.processRequest(OzoneProtocolMessageDispatcher.java:87)
	at org.apache.hadoop.ozone.protocolPB.OzoneManagerProtocolServerSideTranslatorPB.submitRequest(OzoneManagerProtocolServerSideTranslatorPB.java:123)
	at org.apache.hadoop.ozone.protocol.proto.OzoneManagerProtocolProtos$OzoneManagerService$2.callBlockingMethod(OzoneManagerProtocolProtos.java)
	at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:466)
	at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:574)
	at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:552)
	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093)
	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1035)
	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:963)
	at java.base/java.security.AccessController.doPrivileged(Native Method)
	at java.base/javax.security.auth.Subject.doAs(Subject.java:423)
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878)
	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2966)
, while invoking $Proxy20.submitRequest over nodeId=om2,nodeAddress=om2:9862 after 1 failover attempts. Trying to failover immediately.
Ozone Manager Prepare Request successfully returned with Transaction Id : [716].

Checking individual OM instances for prepare request completion...
OM : [om1], Prepare Status : [PREPARE_COMPLETED], Current Transaction Id : [716]
OM : [om3], Prepare Status : [PREPARE_COMPLETED], Current Transaction Id : [716]
OM : [om2], Prepare Status : [PREPARE_COMPLETED], Current Transaction Id : [716]

OM Preparation successful! 
All OMs are prepared
No new write requests will be allowed until preparation is cancelled or upgrade/downgrade is done.</msg>
<status status="PASS" starttime="20211016 13:02:45.648" endtime="20211016 13:02:45.649"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20211016 13:02:45.650" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20211016 13:02:45.649" endtime="20211016 13:02:45.650"/>
</kw>
<status status="PASS" starttime="20211016 13:02:37.681" endtime="20211016 13:02:45.650"/>
</kw>
<msg timestamp="20211016 13:02:45.650" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20211016 13:02:37.680" endtime="20211016 13:02:45.650"/>
</kw>
<msg timestamp="20211016 13:02:45.651" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteExceptio...</msg>
<status status="PASS" starttime="20211016 13:02:37.680" endtime="20211016 13:02:45.651"/>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<arg>3min</arg>
<arg>10sec</arg>
<arg>Should contain</arg>
<arg>${result}</arg>
<arg>OM Preparation successful!</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<kw name="Should Contain" library="BuiltIn">
<arg>${result}</arg>
<arg>OM Preparation successful!</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20211016 13:02:45.651" endtime="20211016 13:02:45.652"/>
</kw>
<status status="PASS" starttime="20211016 13:02:45.651" endtime="20211016 13:02:45.652"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20211016 13:02:37.678" endtime="20211016 13:02:45.652"/>
</test>
<test id="s1-s2-t2" name="Checks if the expected data is present in OM">
<kw name="Run Keyword If" library="BuiltIn" type="SETUP">
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" starttime="20211016 13:02:45.654" endtime="20211016 13:02:45.655"/>
</kw>
<kw name="Execute" library="os">
<var>${result}</var>
<arg>ozone sh key info /${volume_name}/${bucket_name}/prepare-key</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20211016 13:02:45.659" level="INFO">Running command 'ozone sh key info /10583-volume-for-prepare/10583-bucket-for-prepare/prepare-key 2&gt;&amp;1'.</msg>
<msg timestamp="20211016 13:02:48.610" level="INFO">${rc} = 0</msg>
<msg timestamp="20211016 13:02:48.610" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "volumeName" : "10583-volume-for-prepare",
  "bucketName" : "10583-buc...</msg>
<status status="PASS" starttime="20211016 13:02:45.657" endtime="20211016 13:02:48.610"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20211016 13:02:48.611" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "volumeName" : "10583-volume-for-prepare",
  "bucketName" : "10583-bucket-for-prepare",
  "name" : "prepare-key",
  "dataSize" : 17526,
  "creationTime" : "2021-10-16T13:02:35.413Z",
  "modificationTime" : "2021-10-16T13:02:37.284Z",
  "replicationConfig" : {
    "replicationFactor" : "ONE",
    "requiredNodes" : 1,
    "replicationType" : "RATIS"
  },
  "ozoneKeyLocations" : [ {
    "containerID" : 4,
    "localID" : 107544261427200204,
    "length" : 17526,
    "offset" : 0,
    "keyOffset" : 0
  } ],
  "metadata" : { },
  "replicationType" : "RATIS",
  "replicationFactor" : 1
}</msg>
<status status="PASS" starttime="20211016 13:02:48.611" endtime="20211016 13:02:48.611"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20211016 13:02:48.612" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20211016 13:02:48.612" endtime="20211016 13:02:48.612"/>
</kw>
<status status="PASS" starttime="20211016 13:02:45.656" endtime="20211016 13:02:48.613"/>
</kw>
<msg timestamp="20211016 13:02:48.613" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20211016 13:02:45.655" endtime="20211016 13:02:48.613"/>
</kw>
<msg timestamp="20211016 13:02:48.613" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "volumeName" : "10583-volume-for-prepare",
  "bucketName" : "10583-buc...</msg>
<status status="PASS" starttime="20211016 13:02:45.655" endtime="20211016 13:02:48.613"/>
</kw>
<kw name="Should Contain" library="BuiltIn">
<arg>${result}</arg>
<arg>\"name\" : \"prepare-key\"</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20211016 13:02:48.613" endtime="20211016 13:02:48.614"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20211016 13:02:45.653" endtime="20211016 13:02:48.614"/>
</test>
<test id="s1-s2-t3" name="Test write operation fails">
<kw name="Run Keyword If" library="BuiltIn" type="SETUP">
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" starttime="20211016 13:02:48.616" endtime="20211016 13:02:48.617"/>
</kw>
<kw name="Execute and checkrc" library="os">
<var>${result}</var>
<arg>ozone sh key put /${volume_name}/${bucket_name}/prepare-key2 /opt/hadoop/NOTICE.txt</arg>
<arg>255</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20211016 13:02:48.619" level="INFO">Running command 'ozone sh key put /10583-volume-for-prepare/10583-bucket-for-prepare/prepare-key2 /opt/hadoop/NOTICE.txt 2&gt;&amp;1'.</msg>
<msg timestamp="20211016 13:02:51.240" level="INFO">${rc} = 255</msg>
<msg timestamp="20211016 13:02:51.240" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
NOT_SUPPORTED_OPERATION_WHEN_PREPARED Cannot apply write request CreateKey...</msg>
<status status="PASS" starttime="20211016 13:02:48.617" endtime="20211016 13:02:51.240"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20211016 13:02:51.241" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
NOT_SUPPORTED_OPERATION_WHEN_PREPARED Cannot apply write request CreateKey when OM is in prepare mode.</msg>
<status status="PASS" starttime="20211016 13:02:51.240" endtime="20211016 13:02:51.241"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20211016 13:02:51.242" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20211016 13:02:51.242" endtime="20211016 13:02:51.242"/>
</kw>
<msg timestamp="20211016 13:02:51.243" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
NOT_SUPPORTED_OPERATION_WHEN_PREPARED Cannot apply write request CreateKey...</msg>
<status status="PASS" starttime="20211016 13:02:48.617" endtime="20211016 13:02:51.243"/>
</kw>
<kw name="Should Contain" library="BuiltIn">
<arg>${result}</arg>
<arg>OM is in prepare mode</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20211016 13:02:51.243" endtime="20211016 13:02:51.243"/>
</kw>
<kw name="Execute and checkrc" library="os">
<arg>ozone sh key info /${volume_name}/${bucket_name}/prepare-key2</arg>
<arg>255</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20211016 13:02:51.246" level="INFO">Running command 'ozone sh key info /10583-volume-for-prepare/10583-bucket-for-prepare/prepare-key2 2&gt;&amp;1'.</msg>
<msg timestamp="20211016 13:02:53.733" level="INFO">${rc} = 255</msg>
<msg timestamp="20211016 13:02:53.733" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
KEY_NOT_FOUND Key:prepare-key2 not found</msg>
<status status="PASS" starttime="20211016 13:02:51.244" endtime="20211016 13:02:53.733"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20211016 13:02:53.735" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
KEY_NOT_FOUND Key:prepare-key2 not found</msg>
<status status="PASS" starttime="20211016 13:02:53.734" endtime="20211016 13:02:53.735"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20211016 13:02:53.736" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20211016 13:02:53.735" endtime="20211016 13:02:53.736"/>
</kw>
<status status="PASS" starttime="20211016 13:02:51.243" endtime="20211016 13:02:53.736"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20211016 13:02:48.615" endtime="20211016 13:02:53.736"/>
</test>
<doc>Smoke test to test preparing OMs in an OM HA cluster.</doc>
<status status="PASS" starttime="20211016 13:02:14.376" endtime="20211016 13:02:53.738"/>
</suite>
<suite id="s1-s3" name="Om-Prepared" source="/opt/hadoop/smoketest/omha/om-prepared.robot">
<test id="s1-s3-t1" name="Test create volume fails">
<kw name="Run Keyword If" library="BuiltIn" type="SETUP">
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" starttime="20211016 13:02:58.119" endtime="20211016 13:02:58.120"/>
</kw>
<kw name="Generate Random String" library="String">
<var>${random}</var>
<arg>5</arg>
<arg>[NUMBERS]</arg>
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<msg timestamp="20211016 13:02:58.122" level="INFO">${random} = 25894</msg>
<status status="PASS" starttime="20211016 13:02:58.120" endtime="20211016 13:02:58.122"/>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<arg>${volume_name}</arg>
<arg>${random}-volume-for-prepare</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<msg timestamp="20211016 13:02:58.123" level="INFO">${volume_name} = 25894-volume-for-prepare</msg>
<status status="PASS" starttime="20211016 13:02:58.122" endtime="20211016 13:02:58.123"/>
</kw>
<kw name="Execute and checkrc" library="os">
<var>${result}</var>
<arg>ozone sh volume create /${volume_name}</arg>
<arg>255</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20211016 13:02:58.128" level="INFO">Running command 'ozone sh volume create /25894-volume-for-prepare 2&gt;&amp;1'.</msg>
<msg timestamp="20211016 13:03:00.818" level="INFO">${rc} = 255</msg>
<msg timestamp="20211016 13:03:00.818" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
NOT_SUPPORTED_OPERATION_WHEN_PREPARED Cannot apply write request CreateVol...</msg>
<status status="PASS" starttime="20211016 13:02:58.124" endtime="20211016 13:03:00.818"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20211016 13:03:00.819" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
NOT_SUPPORTED_OPERATION_WHEN_PREPARED Cannot apply write request CreateVolume when OM is in prepare mode.</msg>
<status status="PASS" starttime="20211016 13:03:00.818" endtime="20211016 13:03:00.819"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20211016 13:03:00.820" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20211016 13:03:00.819" endtime="20211016 13:03:00.820"/>
</kw>
<msg timestamp="20211016 13:03:00.820" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
NOT_SUPPORTED_OPERATION_WHEN_PREPARED Cannot apply write request CreateVol...</msg>
<status status="PASS" starttime="20211016 13:02:58.123" endtime="20211016 13:03:00.820"/>
</kw>
<kw name="Should Contain" library="BuiltIn">
<arg>${result}</arg>
<arg>OM is in prepare mode</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20211016 13:03:00.821" endtime="20211016 13:03:00.821"/>
</kw>
<kw name="Execute and checkrc" library="os">
<var>${result}</var>
<arg>ozone sh volume info /${volume_name}</arg>
<arg>255</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20211016 13:03:00.824" level="INFO">Running command 'ozone sh volume info /25894-volume-for-prepare 2&gt;&amp;1'.</msg>
<msg timestamp="20211016 13:03:03.278" level="INFO">${rc} = 255</msg>
<msg timestamp="20211016 13:03:03.278" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
VOLUME_NOT_FOUND Volume 25894-volume-for-prepare is not found</msg>
<status status="PASS" starttime="20211016 13:03:00.822" endtime="20211016 13:03:03.279"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20211016 13:03:03.280" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
VOLUME_NOT_FOUND Volume 25894-volume-for-prepare is not found</msg>
<status status="PASS" starttime="20211016 13:03:03.279" endtime="20211016 13:03:03.280"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20211016 13:03:03.281" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20211016 13:03:03.281" endtime="20211016 13:03:03.281"/>
</kw>
<msg timestamp="20211016 13:03:03.282" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
VOLUME_NOT_FOUND Volume 25894-volume-for-prepare is not found</msg>
<status status="PASS" starttime="20211016 13:03:00.821" endtime="20211016 13:03:03.282"/>
</kw>
<kw name="Should Contain" library="BuiltIn">
<arg>${result}</arg>
<arg>VOLUME_NOT_FOUND</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20211016 13:03:03.282" endtime="20211016 13:03:03.283"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20211016 13:02:58.119" endtime="20211016 13:03:03.283"/>
</test>
<test id="s1-s3-t2" name="Test list volumes succeeds">
<kw name="Run Keyword If" library="BuiltIn" type="SETUP">
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" starttime="20211016 13:03:03.285" endtime="20211016 13:03:03.285"/>
</kw>
<kw name="Execute" library="os">
<var>${result}</var>
<arg>ozone sh volume list</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20211016 13:03:03.290" level="INFO">Running command 'ozone sh volume list 2&gt;&amp;1'.</msg>
<msg timestamp="20211016 13:03:06.165" level="INFO">${rc} = 0</msg>
<msg timestamp="20211016 13:03:06.165" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
[ {
  "metadata" : { },
  "name" : "10583-volume-for-prepare",
  "admin" :...</msg>
<status status="PASS" starttime="20211016 13:03:03.287" endtime="20211016 13:03:06.165"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20211016 13:03:06.167" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
[ {
  "metadata" : { },
  "name" : "10583-volume-for-prepare",
  "admin" : "hadoop",
  "owner" : "hadoop",
  "quotaInBytes" : -1,
  "quotaInNamespace" : -1,
  "usedNamespace" : 1,
  "creationTime" : "2021-10-16T13:02:30.116Z",
  "modificationTime" : "2021-10-16T13:02:30.116Z",
  "acls" : [ {
    "type" : "USER",
    "name" : "hadoop",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  }, {
    "type" : "GROUP",
    "name" : "users",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  } ]
}, {
  "metadata" : { },
  "name" : "vol-0-72163",
  "admin" : "hadoop",
  "owner" : "hadoop",
  "quotaInBytes" : -1,
  "quotaInNamespace" : -1,
  "usedNamespace" : 1,
  "creationTime" : "2021-10-16T13:02:17.173Z",
  "modificationTime" : "2021-10-16T13:02:17.173Z",
  "acls" : [ {
    "type" : "USER",
    "name" : "hadoop",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  }, {
    "type" : "GROUP",
    "name" : "users",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  } ]
}, {
  "metadata" : { },
  "name" : "s3v",
  "admin" : "hadoop",
  "owner" : "hadoop",
  "quotaInBytes" : -1,
  "quotaInNamespace" : -1,
  "usedNamespace" : 0,
  "creationTime" : "2021-10-16T13:00:45.511Z",
  "modificationTime" : "2021-10-16T13:00:45.511Z",
  "acls" : [ {
    "type" : "USER",
    "name" : "hadoop",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  }, {
    "type" : "GROUP",
    "name" : "users",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  } ]
}, {
  "metadata" : { },
  "name" : "vol-0-64119",
  "admin" : "hadoop",
  "owner" : "hadoop",
  "quotaInBytes" : -1,
  "quotaInNamespace" : -1,
  "usedNamespace" : 1,
  "creationTime" : "2021-10-16T13:01:11.984Z",
  "modificationTime" : "2021-10-16T13:01:11.984Z",
  "acls" : [ {
    "type" : "USER",
    "name" : "hadoop",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  }, {
    "type" : "GROUP",
    "name" : "users",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  } ]
}, {
  "metadata" : { },
  "name" : "06433-volume-for-prepare",
  "admin" : "hadoop",
  "owner" : "hadoop",
  "quotaInBytes" : -1,
  "quotaInNamespace" : -1,
  "usedNamespace" : 1,
  "creationTime" : "2021-10-16T13:01:25.004Z",
  "modificationTime" : "2021-10-16T13:01:25.004Z",
  "acls" : [ {
    "type" : "USER",
    "name" : "hadoop",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  }, {
    "type" : "GROUP",
    "name" : "users",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  } ]
}, {
  "metadata" : { },
  "name" : "07597-volume-for-cancel",
  "admin" : "hadoop",
  "owner" : "hadoop",
  "quotaInBytes" : -1,
  "quotaInNamespace" : -1,
  "usedNamespace" : 1,
  "creationTime" : "2021-10-16T13:01:59.482Z",
  "modificationTime" : "2021-10-16T13:01:59.482Z",
  "acls" : [ {
    "type" : "USER",
    "name" : "hadoop",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  }, {
    "type" : "GROUP",
    "name" : "users",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  } ]
} ]</msg>
<status status="PASS" starttime="20211016 13:03:06.166" endtime="20211016 13:03:06.167"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20211016 13:03:06.168" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20211016 13:03:06.167" endtime="20211016 13:03:06.168"/>
</kw>
<status status="PASS" starttime="20211016 13:03:03.286" endtime="20211016 13:03:06.168"/>
</kw>
<msg timestamp="20211016 13:03:06.168" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20211016 13:03:03.286" endtime="20211016 13:03:06.168"/>
</kw>
<msg timestamp="20211016 13:03:06.169" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
[ {
  "metadata" : { },
  "name" : "10583-volume-for-prepare",
  "admin" :...</msg>
<status status="PASS" starttime="20211016 13:03:03.285" endtime="20211016 13:03:06.169"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20211016 13:03:03.284" endtime="20211016 13:03:06.169"/>
</test>
<doc>Smoke test to test that OMs are prepared in an OM HA cluster.</doc>
<status status="PASS" starttime="20211016 13:02:58.062" endtime="20211016 13:03:06.170"/>
</suite>
<suite id="s1-s4" name="Om-Prepared" source="/opt/hadoop/smoketest/omha/om-prepared.robot">
<test id="s1-s4-t1" name="Test create volume fails">
<kw name="Run Keyword If" library="BuiltIn" type="SETUP">
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" starttime="20211016 13:04:32.701" endtime="20211016 13:04:32.702"/>
</kw>
<kw name="Generate Random String" library="String">
<var>${random}</var>
<arg>5</arg>
<arg>[NUMBERS]</arg>
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<msg timestamp="20211016 13:04:32.702" level="INFO">${random} = 97814</msg>
<status status="PASS" starttime="20211016 13:04:32.702" endtime="20211016 13:04:32.702"/>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<arg>${volume_name}</arg>
<arg>${random}-volume-for-prepare</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<msg timestamp="20211016 13:04:32.705" level="INFO">${volume_name} = 97814-volume-for-prepare</msg>
<status status="PASS" starttime="20211016 13:04:32.702" endtime="20211016 13:04:32.705"/>
</kw>
<kw name="Execute and checkrc" library="os">
<var>${result}</var>
<arg>ozone sh volume create /${volume_name}</arg>
<arg>255</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20211016 13:04:32.711" level="INFO">Running command 'ozone sh volume create /97814-volume-for-prepare 2&gt;&amp;1'.</msg>
<msg timestamp="20211016 13:04:35.338" level="INFO">${rc} = 255</msg>
<msg timestamp="20211016 13:04:35.338" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
NOT_SUPPORTED_OPERATION_WHEN_PREPARED Cannot apply write request CreateVol...</msg>
<status status="PASS" starttime="20211016 13:04:32.706" endtime="20211016 13:04:35.338"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20211016 13:04:35.339" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
NOT_SUPPORTED_OPERATION_WHEN_PREPARED Cannot apply write request CreateVolume when OM is in prepare mode.</msg>
<status status="PASS" starttime="20211016 13:04:35.339" endtime="20211016 13:04:35.339"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20211016 13:04:35.340" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20211016 13:04:35.340" endtime="20211016 13:04:35.340"/>
</kw>
<msg timestamp="20211016 13:04:35.341" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
NOT_SUPPORTED_OPERATION_WHEN_PREPARED Cannot apply write request CreateVol...</msg>
<status status="PASS" starttime="20211016 13:04:32.705" endtime="20211016 13:04:35.341"/>
</kw>
<kw name="Should Contain" library="BuiltIn">
<arg>${result}</arg>
<arg>OM is in prepare mode</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20211016 13:04:35.341" endtime="20211016 13:04:35.341"/>
</kw>
<kw name="Execute and checkrc" library="os">
<var>${result}</var>
<arg>ozone sh volume info /${volume_name}</arg>
<arg>255</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20211016 13:04:35.344" level="INFO">Running command 'ozone sh volume info /97814-volume-for-prepare 2&gt;&amp;1'.</msg>
<msg timestamp="20211016 13:04:38.021" level="INFO">${rc} = 255</msg>
<msg timestamp="20211016 13:04:38.021" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
VOLUME_NOT_FOUND Volume 97814-volume-for-prepare is not found</msg>
<status status="PASS" starttime="20211016 13:04:35.342" endtime="20211016 13:04:38.021"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20211016 13:04:38.022" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
VOLUME_NOT_FOUND Volume 97814-volume-for-prepare is not found</msg>
<status status="PASS" starttime="20211016 13:04:38.022" endtime="20211016 13:04:38.023"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20211016 13:04:38.023" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20211016 13:04:38.023" endtime="20211016 13:04:38.023"/>
</kw>
<msg timestamp="20211016 13:04:38.023" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
VOLUME_NOT_FOUND Volume 97814-volume-for-prepare is not found</msg>
<status status="PASS" starttime="20211016 13:04:35.341" endtime="20211016 13:04:38.024"/>
</kw>
<kw name="Should Contain" library="BuiltIn">
<arg>${result}</arg>
<arg>VOLUME_NOT_FOUND</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20211016 13:04:38.024" endtime="20211016 13:04:38.024"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20211016 13:04:32.700" endtime="20211016 13:04:38.024"/>
</test>
<test id="s1-s4-t2" name="Test list volumes succeeds">
<kw name="Run Keyword If" library="BuiltIn" type="SETUP">
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" starttime="20211016 13:04:38.026" endtime="20211016 13:04:38.026"/>
</kw>
<kw name="Execute" library="os">
<var>${result}</var>
<arg>ozone sh volume list</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20211016 13:04:38.031" level="INFO">Running command 'ozone sh volume list 2&gt;&amp;1'.</msg>
<msg timestamp="20211016 13:04:41.098" level="INFO">${rc} = 0</msg>
<msg timestamp="20211016 13:04:41.098" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
[ {
  "metadata" : { },
  "name" : "10583-volume-for-prepare",
  "admin" :...</msg>
<status status="PASS" starttime="20211016 13:04:38.027" endtime="20211016 13:04:41.098"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20211016 13:04:41.099" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
[ {
  "metadata" : { },
  "name" : "10583-volume-for-prepare",
  "admin" : "hadoop",
  "owner" : "hadoop",
  "quotaInBytes" : -1,
  "quotaInNamespace" : -1,
  "usedNamespace" : 1,
  "creationTime" : "2021-10-16T13:02:30.116Z",
  "modificationTime" : "2021-10-16T13:02:30.116Z",
  "acls" : [ {
    "type" : "USER",
    "name" : "hadoop",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  }, {
    "type" : "GROUP",
    "name" : "users",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  } ]
}, {
  "metadata" : { },
  "name" : "vol-0-72163",
  "admin" : "hadoop",
  "owner" : "hadoop",
  "quotaInBytes" : -1,
  "quotaInNamespace" : -1,
  "usedNamespace" : 1,
  "creationTime" : "2021-10-16T13:02:17.173Z",
  "modificationTime" : "2021-10-16T13:02:17.173Z",
  "acls" : [ {
    "type" : "USER",
    "name" : "hadoop",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  }, {
    "type" : "GROUP",
    "name" : "users",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  } ]
}, {
  "metadata" : { },
  "name" : "s3v",
  "admin" : "hadoop",
  "owner" : "hadoop",
  "quotaInBytes" : -1,
  "quotaInNamespace" : -1,
  "usedNamespace" : 0,
  "creationTime" : "2021-10-16T13:00:45.511Z",
  "modificationTime" : "2021-10-16T13:00:45.511Z",
  "acls" : [ {
    "type" : "USER",
    "name" : "hadoop",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  }, {
    "type" : "GROUP",
    "name" : "users",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  } ]
}, {
  "metadata" : { },
  "name" : "vol-0-64119",
  "admin" : "hadoop",
  "owner" : "hadoop",
  "quotaInBytes" : -1,
  "quotaInNamespace" : -1,
  "usedNamespace" : 1,
  "creationTime" : "2021-10-16T13:01:11.984Z",
  "modificationTime" : "2021-10-16T13:01:11.984Z",
  "acls" : [ {
    "type" : "USER",
    "name" : "hadoop",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  }, {
    "type" : "GROUP",
    "name" : "users",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  } ]
}, {
  "metadata" : { },
  "name" : "06433-volume-for-prepare",
  "admin" : "hadoop",
  "owner" : "hadoop",
  "quotaInBytes" : -1,
  "quotaInNamespace" : -1,
  "usedNamespace" : 1,
  "creationTime" : "2021-10-16T13:01:25.004Z",
  "modificationTime" : "2021-10-16T13:01:25.004Z",
  "acls" : [ {
    "type" : "USER",
    "name" : "hadoop",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  }, {
    "type" : "GROUP",
    "name" : "users",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  } ]
}, {
  "metadata" : { },
  "name" : "07597-volume-for-cancel",
  "admin" : "hadoop",
  "owner" : "hadoop",
  "quotaInBytes" : -1,
  "quotaInNamespace" : -1,
  "usedNamespace" : 1,
  "creationTime" : "2021-10-16T13:01:59.482Z",
  "modificationTime" : "2021-10-16T13:01:59.482Z",
  "acls" : [ {
    "type" : "USER",
    "name" : "hadoop",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  }, {
    "type" : "GROUP",
    "name" : "users",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  } ]
} ]</msg>
<status status="PASS" starttime="20211016 13:04:41.099" endtime="20211016 13:04:41.100"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20211016 13:04:41.100" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20211016 13:04:41.100" endtime="20211016 13:04:41.100"/>
</kw>
<status status="PASS" starttime="20211016 13:04:38.027" endtime="20211016 13:04:41.101"/>
</kw>
<msg timestamp="20211016 13:04:41.101" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20211016 13:04:38.027" endtime="20211016 13:04:41.101"/>
</kw>
<msg timestamp="20211016 13:04:41.101" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
[ {
  "metadata" : { },
  "name" : "10583-volume-for-prepare",
  "admin" :...</msg>
<status status="PASS" starttime="20211016 13:04:38.026" endtime="20211016 13:04:41.101"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20211016 13:04:38.025" endtime="20211016 13:04:41.102"/>
</test>
<doc>Smoke test to test that OMs are prepared in an OM HA cluster.</doc>
<status status="PASS" starttime="20211016 13:04:32.638" endtime="20211016 13:04:41.103"/>
</suite>
<suite id="s1-s5" name="Loaddata" source="/opt/hadoop/smoketest/topology/loaddata.robot">
<test id="s1-s5-t1" name="Create a volume, bucket and key">
<kw name="Execute" library="os">
<var>${output}</var>
<arg>ozone sh volume create topvol1</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20211016 13:06:08.415" level="INFO">Running command 'ozone sh volume create topvol1 2&gt;&amp;1'.</msg>
<msg timestamp="20211016 13:06:11.374" level="INFO">${rc} = 0</msg>
<msg timestamp="20211016 13:06:11.374" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20211016 13:06:08.411" endtime="20211016 13:06:11.374"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20211016 13:06:11.375" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20211016 13:06:11.374" endtime="20211016 13:06:11.375"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20211016 13:06:11.376" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20211016 13:06:11.376" endtime="20211016 13:06:11.376"/>
</kw>
<status status="PASS" starttime="20211016 13:06:08.410" endtime="20211016 13:06:11.377"/>
</kw>
<msg timestamp="20211016 13:06:11.377" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20211016 13:06:08.410" endtime="20211016 13:06:11.377"/>
</kw>
<msg timestamp="20211016 13:06:11.377" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20211016 13:06:08.409" endtime="20211016 13:06:11.377"/>
</kw>
<kw name="Should Not Contain" library="BuiltIn">
<arg>${output}</arg>
<arg>Failed</arg>
<doc>Fails if ``container`` contains ``item`` one or more times.</doc>
<status status="PASS" starttime="20211016 13:06:11.377" endtime="20211016 13:06:11.378"/>
</kw>
<kw name="Execute" library="os">
<var>${output}</var>
<arg>ozone sh bucket create /topvol1/bucket1</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20211016 13:06:11.390" level="INFO">Running command 'ozone sh bucket create /topvol1/bucket1 2&gt;&amp;1'.</msg>
<msg timestamp="20211016 13:06:14.322" level="INFO">${rc} = 0</msg>
<msg timestamp="20211016 13:06:14.322" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20211016 13:06:11.379" endtime="20211016 13:06:14.322"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20211016 13:06:14.323" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20211016 13:06:14.322" endtime="20211016 13:06:14.323"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20211016 13:06:14.324" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20211016 13:06:14.323" endtime="20211016 13:06:14.324"/>
</kw>
<status status="PASS" starttime="20211016 13:06:11.379" endtime="20211016 13:06:14.324"/>
</kw>
<msg timestamp="20211016 13:06:14.324" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20211016 13:06:11.378" endtime="20211016 13:06:14.325"/>
</kw>
<msg timestamp="20211016 13:06:14.325" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20211016 13:06:11.378" endtime="20211016 13:06:14.325"/>
</kw>
<kw name="Should Not Contain" library="BuiltIn">
<arg>${output}</arg>
<arg>Failed</arg>
<doc>Fails if ``container`` contains ``item`` one or more times.</doc>
<status status="PASS" starttime="20211016 13:06:14.325" endtime="20211016 13:06:14.326"/>
</kw>
<kw name="Execute" library="os">
<var>${output}</var>
<arg>ozone sh key put /topvol1/bucket1/key1 /opt/hadoop/NOTICE.txt</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20211016 13:06:14.332" level="INFO">Running command 'ozone sh key put /topvol1/bucket1/key1 /opt/hadoop/NOTICE.txt 2&gt;&amp;1'.</msg>
<msg timestamp="20211016 13:06:19.757" level="INFO">${rc} = 0</msg>
<msg timestamp="20211016 13:06:19.757" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20211016 13:06:14.330" endtime="20211016 13:06:19.757"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20211016 13:06:19.758" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20211016 13:06:19.757" endtime="20211016 13:06:19.758"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20211016 13:06:19.759" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20211016 13:06:19.758" endtime="20211016 13:06:19.759"/>
</kw>
<status status="PASS" starttime="20211016 13:06:14.328" endtime="20211016 13:06:19.759"/>
</kw>
<msg timestamp="20211016 13:06:19.759" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20211016 13:06:14.327" endtime="20211016 13:06:19.759"/>
</kw>
<msg timestamp="20211016 13:06:19.760" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20211016 13:06:14.327" endtime="20211016 13:06:19.760"/>
</kw>
<kw name="Should Not Contain" library="BuiltIn">
<arg>${output}</arg>
<arg>Failed</arg>
<doc>Fails if ``container`` contains ``item`` one or more times.</doc>
<status status="PASS" starttime="20211016 13:06:19.760" endtime="20211016 13:06:19.760"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20211016 13:06:08.408" endtime="20211016 13:06:19.761"/>
</test>
<doc>Smoketest ozone cluster startup</doc>
<status status="PASS" starttime="20211016 13:06:08.342" endtime="20211016 13:06:19.762"/>
</suite>
<suite id="s1-s6" name="Readdata" source="/opt/hadoop/smoketest/topology/readdata.robot">
<test id="s1-s6-t1" name="Read data from previously created key">
<kw name="Generate Random String" library="String">
<var>${random}</var>
<arg>5</arg>
<arg>[NUMBERS]</arg>
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<msg timestamp="20211016 13:06:24.286" level="INFO">${random} = 84204</msg>
<status status="PASS" starttime="20211016 13:06:24.285" endtime="20211016 13:06:24.286"/>
</kw>
<kw name="Execute" library="os">
<var>${output}</var>
<arg>ozone sh key get /topvol1/bucket1/key1 /tmp/key1-${random}</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20211016 13:06:24.291" level="INFO">Running command 'ozone sh key get /topvol1/bucket1/key1 /tmp/key1-84204 2&gt;&amp;1'.</msg>
<msg timestamp="20211016 13:06:28.869" level="INFO">${rc} = 0</msg>
<msg timestamp="20211016 13:06:28.869" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20211016 13:06:24.288" endtime="20211016 13:06:28.869"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20211016 13:06:28.870" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20211016 13:06:28.869" endtime="20211016 13:06:28.870"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20211016 13:06:28.871" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20211016 13:06:28.871" endtime="20211016 13:06:28.871"/>
</kw>
<status status="PASS" starttime="20211016 13:06:24.287" endtime="20211016 13:06:28.872"/>
</kw>
<msg timestamp="20211016 13:06:28.872" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20211016 13:06:24.287" endtime="20211016 13:06:28.872"/>
</kw>
<msg timestamp="20211016 13:06:28.872" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20211016 13:06:24.286" endtime="20211016 13:06:28.872"/>
</kw>
<kw name="Should Not Contain" library="BuiltIn">
<arg>${output}</arg>
<arg>Failed</arg>
<doc>Fails if ``container`` contains ``item`` one or more times.</doc>
<status status="PASS" starttime="20211016 13:06:28.873" endtime="20211016 13:06:28.873"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20211016 13:06:24.284" endtime="20211016 13:06:28.873"/>
</test>
<doc>Smoketest ozone cluster startup</doc>
<status status="PASS" starttime="20211016 13:06:24.218" endtime="20211016 13:06:28.874"/>
</suite>
<suite id="s1-s7" name="Om-Prepare" source="/opt/hadoop/smoketest/omha/om-prepare.robot">
<kw name="Create Specific OM data for prepare" type="SETUP">
<kw name="Execute" library="os">
<arg>ozone freon rk --replication-type=RATIS --num-of-volumes 1 --num-of-buckets 1 --num-of-keys 100</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20211016 13:01:09.062" level="INFO">Running command 'ozone freon rk --replication-type=RATIS --num-of-volumes 1 --num-of-buckets 1 --num-of-keys 100 2&gt;&amp;1'.</msg>
<msg timestamp="20211016 13:01:22.420" level="INFO">${rc} = 0</msg>
<msg timestamp="20211016 13:01:22.420" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
2021-10-16 13:01:10,542 [main] INFO impl.MetricsConfig: Loaded properties ...</msg>
<status status="PASS" starttime="20211016 13:01:09.058" endtime="20211016 13:01:22.420"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20211016 13:01:22.422" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
2021-10-16 13:01:10,542 [main] INFO impl.MetricsConfig: Loaded properties from hadoop-metrics2.properties
2021-10-16 13:01:10,729 [main] INFO impl.MetricsSystemImpl: Scheduled Metric snapshot period at 10 second(s).
2021-10-16 13:01:10,729 [main] INFO impl.MetricsSystemImpl: ozone-freon metrics system started
2021-10-16 13:01:11,697 [main] INFO retry.RetryInvocationHandler: com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.ozone.om.exceptions.OMNotLeaderException): OM:om2 is not the leader. Could not determine the leader node.
	at org.apache.hadoop.ozone.protocolPB.OzoneManagerProtocolServerSideTranslatorPB.createNotLeaderException(OzoneManagerProtocolServerSideTranslatorPB.java:187)
	at org.apache.hadoop.ozone.protocolPB.OzoneManagerProtocolServerSideTranslatorPB.createLeaderErrorException(OzoneManagerProtocolServerSideTranslatorPB.java:174)
	at org.apache.hadoop.ozone.protocolPB.OzoneManagerProtocolServerSideTranslatorPB.submitReadRequestToOM(OzoneManagerProtocolServerSideTranslatorPB.java:167)
	at org.apache.hadoop.ozone.protocolPB.OzoneManagerProtocolServerSideTranslatorPB.processRequest(OzoneManagerProtocolServerSideTranslatorPB.java:133)
	at org.apache.hadoop.hdds.server.OzoneProtocolMessageDispatcher.processRequest(OzoneProtocolMessageDispatcher.java:87)
	at org.apache.hadoop.ozone.protocolPB.OzoneManagerProtocolServerSideTranslatorPB.submitRequest(OzoneManagerProtocolServerSideTranslatorPB.java:123)
	at org.apache.hadoop.ozone.protocol.proto.OzoneManagerProtocolProtos$OzoneManagerService$2.callBlockingMethod(OzoneManagerProtocolProtos.java)
	at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:466)
	at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:574)
	at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:552)
	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093)
	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1035)
	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:963)
	at java.base/java.security.AccessController.doPrivileged(Native Method)
	at java.base/javax.security.auth.Subject.doAs(Subject.java:423)
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878)
	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2966)
, while invoking $Proxy22.submitRequest over nodeId=om2,nodeAddress=om2:9862 after 1 failover attempts. Trying to failover immediately.
2021-10-16 13:01:11,864 [main] INFO freon.RandomKeyGenerator: Number of Threads: 10
2021-10-16 13:01:11,902 [main] INFO freon.RandomKeyGenerator: Number of Volumes: 1.
2021-10-16 13:01:11,902 [main] INFO freon.RandomKeyGenerator: Number of Buckets per Volume: 1.
2021-10-16 13:01:11,902 [main] INFO freon.RandomKeyGenerator: Number of Keys per Bucket: 100.
2021-10-16 13:01:11,902 [main] INFO freon.RandomKeyGenerator: Key size: 10240 bytes
2021-10-16 13:01:11,903 [main] INFO freon.RandomKeyGenerator: Buffer size: 4096 bytes
2021-10-16 13:01:11,903 [main] INFO freon.RandomKeyGenerator: validateWrites : false
2021-10-16 13:01:11,903 [main] INFO freon.RandomKeyGenerator: cleanObjects : false
2021-10-16 13:01:11,944 [main] INFO freon.RandomKeyGenerator: Starting progress bar Thread.
2021-10-16 13:01:11,947 [Thread-6] INFO freon.ProgressBar: Progress: 0.00 % (0 out of 100)
2021-10-16 13:01:11,968 [pool-2-thread-1] INFO rpc.RpcClient: Creating Volume: vol-0-64119, with hadoop as owner and space quota set to -1 bytes, counts quota set to -1
2021-10-16 13:01:12,290 [pool-2-thread-2] INFO rpc.RpcClient: Creating Bucket: vol-0-64119/bucket-0-85353, with Versioning false and Storage Type set to DISK and Encryption set to false 
2021-10-16 13:01:12,949 [Thread-6] INFO freon.ProgressBar: Progress: 0.00 % (0 out of 100)
2021-10-16 13:01:13,869 [pool-2-thread-5] WARN impl.MetricsSystemImpl: ozone-freon metrics system already initialized!
2021-10-16 13:01:13,951 [Thread-6] INFO freon.ProgressBar: Progress: 0.00 % (0 out of 100)
2021-10-16 13:01:14,179 [pool-2-thread-4] INFO metrics.MetricRegistries: Loaded MetricRegistries class org.apache.ratis.metrics.impl.MetricRegistriesImpl
2021-10-16 13:01:14,958 [Thread-6] INFO freon.ProgressBar: Progress: 10.00 % (10 out of 100)
2021-10-16 13:01:15,963 [Thread-6] INFO freon.ProgressBar: Progress: 11.00 % (11 out of 100)
2021-10-16 13:01:16,966 [Thread-6] INFO freon.ProgressBar: Progress: 20.00 % (20 out of 100)
2021-10-16 13:01:17,967 [Thread-6] INFO freon.ProgressBar: Progress: 33.00 % (33 out of 100)
2021-10-16 13:01:18,979 [Thread-6] INFO freon.ProgressBar: Progress: 52.00 % (52 out of 100)
2021-10-16 13:01:19,983 [Thread-6] INFO freon.ProgressBar: Progress: 73.00 % (73 out of 100)
2021-10-16 13:01:20,986 [Thread-6] INFO freon.ProgressBar: Progress: 91.00 % (91 out of 100)
2021-10-16 13:01:21,986 [Thread-6] INFO freon.ProgressBar: Progress: 100.00 % (100 out of 100)

***************************************************
Status: Success
Git Base Revision: a3b9c37a397ad4188041dd80621bdeefc46885f2
Number of Volumes created: 1
Number of Buckets created: 1
Number of Keys added: 100
Ratis replication factor: ONE
Ratis replication type: RATIS
Average Time spent in volume creation: 00:00:00,029
Average Time spent in bucket creation: 00:00:00,012
Average Time spent in key creation: 00:00:02,689
Average Time spent in key write: 00:00:01,009
Total bytes written: 1024000
Total Execution time: 00:00:11,057
***************************************************</msg>
<status status="PASS" starttime="20211016 13:01:22.421" endtime="20211016 13:01:22.422"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20211016 13:01:22.422" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20211016 13:01:22.422" endtime="20211016 13:01:22.423"/>
</kw>
<status status="PASS" starttime="20211016 13:01:09.058" endtime="20211016 13:01:22.423"/>
</kw>
<msg timestamp="20211016 13:01:22.423" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20211016 13:01:09.057" endtime="20211016 13:01:22.423"/>
</kw>
<status status="PASS" starttime="20211016 13:01:09.057" endtime="20211016 13:01:22.424"/>
</kw>
<kw name="Generate Random String" library="String">
<var>${random}</var>
<arg>5</arg>
<arg>[NUMBERS]</arg>
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<msg timestamp="20211016 13:01:22.424" level="INFO">${random} = 06433</msg>
<status status="PASS" starttime="20211016 13:01:22.424" endtime="20211016 13:01:22.425"/>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<arg>${volume_name}</arg>
<arg>${random}-volume-for-prepare</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<msg timestamp="20211016 13:01:22.426" level="INFO">${volume_name} = 06433-volume-for-prepare</msg>
<status status="PASS" starttime="20211016 13:01:22.425" endtime="20211016 13:01:22.426"/>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<arg>${bucket_name}</arg>
<arg>${random}-bucket-for-prepare</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<msg timestamp="20211016 13:01:22.427" level="INFO">${bucket_name} = 06433-bucket-for-prepare</msg>
<status status="PASS" starttime="20211016 13:01:22.426" endtime="20211016 13:01:22.427"/>
</kw>
<kw name="Execute" library="os">
<arg>ozone sh volume create /${volume_name}</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20211016 13:01:22.430" level="INFO">Running command 'ozone sh volume create /06433-volume-for-prepare 2&gt;&amp;1'.</msg>
<msg timestamp="20211016 13:01:25.038" level="INFO">${rc} = 0</msg>
<msg timestamp="20211016 13:01:25.038" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20211016 13:01:22.428" endtime="20211016 13:01:25.038"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20211016 13:01:25.039" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20211016 13:01:25.039" endtime="20211016 13:01:25.039"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20211016 13:01:25.041" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20211016 13:01:25.040" endtime="20211016 13:01:25.041"/>
</kw>
<status status="PASS" starttime="20211016 13:01:22.428" endtime="20211016 13:01:25.042"/>
</kw>
<msg timestamp="20211016 13:01:25.042" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20211016 13:01:22.428" endtime="20211016 13:01:25.042"/>
</kw>
<status status="PASS" starttime="20211016 13:01:22.427" endtime="20211016 13:01:25.042"/>
</kw>
<kw name="Execute" library="os">
<arg>ozone sh bucket create /${volume_name}/${bucket_name}</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20211016 13:01:25.045" level="INFO">Running command 'ozone sh bucket create /06433-volume-for-prepare/06433-bucket-for-prepare 2&gt;&amp;1'.</msg>
<msg timestamp="20211016 13:01:27.658" level="INFO">${rc} = 0</msg>
<msg timestamp="20211016 13:01:27.659" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20211016 13:01:25.044" endtime="20211016 13:01:27.659"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20211016 13:01:27.660" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20211016 13:01:27.659" endtime="20211016 13:01:27.660"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20211016 13:01:27.660" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20211016 13:01:27.660" endtime="20211016 13:01:27.660"/>
</kw>
<status status="PASS" starttime="20211016 13:01:25.043" endtime="20211016 13:01:27.661"/>
</kw>
<msg timestamp="20211016 13:01:27.661" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20211016 13:01:25.043" endtime="20211016 13:01:27.661"/>
</kw>
<status status="PASS" starttime="20211016 13:01:25.042" endtime="20211016 13:01:27.661"/>
</kw>
<kw name="Execute" library="os">
<arg>ozone sh key put /${volume_name}/${bucket_name}/prepare-key /opt/hadoop/NOTICE.txt</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20211016 13:01:27.665" level="INFO">Running command 'ozone sh key put /06433-volume-for-prepare/06433-bucket-for-prepare/prepare-key /opt/hadoop/NOTICE.txt 2&gt;&amp;1'.</msg>
<msg timestamp="20211016 13:01:32.744" level="INFO">${rc} = 0</msg>
<msg timestamp="20211016 13:01:32.744" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20211016 13:01:27.663" endtime="20211016 13:01:32.744"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20211016 13:01:32.745" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20211016 13:01:32.744" endtime="20211016 13:01:32.745"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20211016 13:01:32.746" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20211016 13:01:32.745" endtime="20211016 13:01:32.746"/>
</kw>
<status status="PASS" starttime="20211016 13:01:27.662" endtime="20211016 13:01:32.746"/>
</kw>
<msg timestamp="20211016 13:01:32.746" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20211016 13:01:27.662" endtime="20211016 13:01:32.746"/>
</kw>
<status status="PASS" starttime="20211016 13:01:27.661" endtime="20211016 13:01:32.747"/>
</kw>
<status status="PASS" starttime="20211016 13:01:09.056" endtime="20211016 13:01:32.747"/>
</kw>
<test id="s1-s7-t1" name="Prepare Ozone Manager">
<kw name="Run Keyword If" library="BuiltIn" type="SETUP">
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" starttime="20211016 13:01:32.748" endtime="20211016 13:01:32.749"/>
</kw>
<kw name="Execute" library="os">
<var>${result}</var>
<arg>ozone admin om prepare -id=omservice</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20211016 13:01:32.753" level="INFO">Running command 'ozone admin om prepare -id=omservice 2&gt;&amp;1'.</msg>
<msg timestamp="20211016 13:01:40.724" level="INFO">${rc} = 0</msg>
<msg timestamp="20211016 13:01:40.724" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteExceptio...</msg>
<status status="PASS" starttime="20211016 13:01:32.751" endtime="20211016 13:01:40.724"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20211016 13:01:40.725" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.ozone.om.exceptions.OMNotLeaderException): OM:om2 is not the leader. Could not determine the leader node.
	at org.apache.hadoop.ozone.om.ratis.utils.OzoneManagerRatisUtils.createNotLeaderException(OzoneManagerRatisUtils.java:465)
	at org.apache.hadoop.ozone.om.ratis.utils.OzoneManagerRatisUtils.checkLeaderStatus(OzoneManagerRatisUtils.java:451)
	at org.apache.hadoop.ozone.protocolPB.OzoneManagerProtocolServerSideTranslatorPB.checkLeaderStatus(OzoneManagerProtocolServerSideTranslatorPB.java:243)
	at org.apache.hadoop.ozone.protocolPB.OzoneManagerProtocolServerSideTranslatorPB.processRequest(OzoneManagerProtocolServerSideTranslatorPB.java:135)
	at org.apache.hadoop.hdds.server.OzoneProtocolMessageDispatcher.processRequest(OzoneProtocolMessageDispatcher.java:87)
	at org.apache.hadoop.ozone.protocolPB.OzoneManagerProtocolServerSideTranslatorPB.submitRequest(OzoneManagerProtocolServerSideTranslatorPB.java:123)
	at org.apache.hadoop.ozone.protocol.proto.OzoneManagerProtocolProtos$OzoneManagerService$2.callBlockingMethod(OzoneManagerProtocolProtos.java)
	at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:466)
	at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:574)
	at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:552)
	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093)
	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1035)
	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:963)
	at java.base/java.security.AccessController.doPrivileged(Native Method)
	at java.base/javax.security.auth.Subject.doAs(Subject.java:423)
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878)
	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2966)
, while invoking $Proxy20.submitRequest over nodeId=om2,nodeAddress=om2:9862 after 1 failover attempts. Trying to failover immediately.
Ozone Manager Prepare Request successfully returned with Transaction Id : [351].

Checking individual OM instances for prepare request completion...
OM : [om1], Prepare Status : [PREPARE_COMPLETED], Current Transaction Id : [351]
OM : [om3], Prepare Status : [PREPARE_COMPLETED], Current Transaction Id : [351]
OM : [om2], Prepare Status : [PREPARE_COMPLETED], Current Transaction Id : [351]

OM Preparation successful! 
All OMs are prepared
No new write requests will be allowed until preparation is cancelled or upgrade/downgrade is done.</msg>
<status status="PASS" starttime="20211016 13:01:40.725" endtime="20211016 13:01:40.725"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20211016 13:01:40.726" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20211016 13:01:40.725" endtime="20211016 13:01:40.726"/>
</kw>
<status status="PASS" starttime="20211016 13:01:32.750" endtime="20211016 13:01:40.726"/>
</kw>
<msg timestamp="20211016 13:01:40.727" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20211016 13:01:32.750" endtime="20211016 13:01:40.727"/>
</kw>
<msg timestamp="20211016 13:01:40.727" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteExceptio...</msg>
<status status="PASS" starttime="20211016 13:01:32.749" endtime="20211016 13:01:40.727"/>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<arg>3min</arg>
<arg>10sec</arg>
<arg>Should contain</arg>
<arg>${result}</arg>
<arg>OM Preparation successful!</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<kw name="Should Contain" library="BuiltIn">
<arg>${result}</arg>
<arg>OM Preparation successful!</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20211016 13:01:40.728" endtime="20211016 13:01:40.728"/>
</kw>
<status status="PASS" starttime="20211016 13:01:40.727" endtime="20211016 13:01:40.728"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20211016 13:01:32.747" endtime="20211016 13:01:40.728"/>
</test>
<test id="s1-s7-t2" name="Checks if the expected data is present in OM">
<kw name="Run Keyword If" library="BuiltIn" type="SETUP">
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" starttime="20211016 13:01:40.730" endtime="20211016 13:01:40.730"/>
</kw>
<kw name="Execute" library="os">
<var>${result}</var>
<arg>ozone sh key info /${volume_name}/${bucket_name}/prepare-key</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20211016 13:01:40.735" level="INFO">Running command 'ozone sh key info /06433-volume-for-prepare/06433-bucket-for-prepare/prepare-key 2&gt;&amp;1'.</msg>
<msg timestamp="20211016 13:01:43.790" level="INFO">${rc} = 0</msg>
<msg timestamp="20211016 13:01:43.790" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "volumeName" : "06433-volume-for-prepare",
  "bucketName" : "06433-buc...</msg>
<status status="PASS" starttime="20211016 13:01:40.732" endtime="20211016 13:01:43.790"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20211016 13:01:43.791" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "volumeName" : "06433-volume-for-prepare",
  "bucketName" : "06433-bucket-for-prepare",
  "name" : "prepare-key",
  "dataSize" : 17526,
  "creationTime" : "2021-10-16T13:01:30.411Z",
  "modificationTime" : "2021-10-16T13:01:32.336Z",
  "replicationConfig" : {
    "replicationFactor" : "ONE",
    "requiredNodes" : 1,
    "replicationType" : "RATIS"
  },
  "ozoneKeyLocations" : [ {
    "containerID" : 4,
    "localID" : 107544261427200101,
    "length" : 17526,
    "offset" : 0,
    "keyOffset" : 0
  } ],
  "metadata" : { },
  "replicationType" : "RATIS",
  "replicationFactor" : 1
}</msg>
<status status="PASS" starttime="20211016 13:01:43.790" endtime="20211016 13:01:43.791"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20211016 13:01:43.792" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20211016 13:01:43.792" endtime="20211016 13:01:43.792"/>
</kw>
<status status="PASS" starttime="20211016 13:01:40.732" endtime="20211016 13:01:43.792"/>
</kw>
<msg timestamp="20211016 13:01:43.793" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20211016 13:01:40.731" endtime="20211016 13:01:43.793"/>
</kw>
<msg timestamp="20211016 13:01:43.793" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "volumeName" : "06433-volume-for-prepare",
  "bucketName" : "06433-buc...</msg>
<status status="PASS" starttime="20211016 13:01:40.731" endtime="20211016 13:01:43.793"/>
</kw>
<kw name="Should Contain" library="BuiltIn">
<arg>${result}</arg>
<arg>\"name\" : \"prepare-key\"</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20211016 13:01:43.793" endtime="20211016 13:01:43.794"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20211016 13:01:40.729" endtime="20211016 13:01:43.794"/>
</test>
<test id="s1-s7-t3" name="Test write operation fails">
<kw name="Run Keyword If" library="BuiltIn" type="SETUP">
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" starttime="20211016 13:01:43.796" endtime="20211016 13:01:43.796"/>
</kw>
<kw name="Execute and checkrc" library="os">
<var>${result}</var>
<arg>ozone sh key put /${volume_name}/${bucket_name}/prepare-key2 /opt/hadoop/NOTICE.txt</arg>
<arg>255</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20211016 13:01:43.801" level="INFO">Running command 'ozone sh key put /06433-volume-for-prepare/06433-bucket-for-prepare/prepare-key2 /opt/hadoop/NOTICE.txt 2&gt;&amp;1'.</msg>
<msg timestamp="20211016 13:01:46.600" level="INFO">${rc} = 255</msg>
<msg timestamp="20211016 13:01:46.600" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
NOT_SUPPORTED_OPERATION_WHEN_PREPARED Cannot apply write request CreateKey...</msg>
<status status="PASS" starttime="20211016 13:01:43.799" endtime="20211016 13:01:46.600"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20211016 13:01:46.601" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
NOT_SUPPORTED_OPERATION_WHEN_PREPARED Cannot apply write request CreateKey when OM is in prepare mode.</msg>
<status status="PASS" starttime="20211016 13:01:46.600" endtime="20211016 13:01:46.601"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20211016 13:01:46.602" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20211016 13:01:46.601" endtime="20211016 13:01:46.602"/>
</kw>
<msg timestamp="20211016 13:01:46.602" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
NOT_SUPPORTED_OPERATION_WHEN_PREPARED Cannot apply write request CreateKey...</msg>
<status status="PASS" starttime="20211016 13:01:43.796" endtime="20211016 13:01:46.602"/>
</kw>
<kw name="Should Contain" library="BuiltIn">
<arg>${result}</arg>
<arg>OM is in prepare mode</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20211016 13:01:46.602" endtime="20211016 13:01:46.603"/>
</kw>
<kw name="Execute and checkrc" library="os">
<arg>ozone sh key info /${volume_name}/${bucket_name}/prepare-key2</arg>
<arg>255</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20211016 13:01:46.605" level="INFO">Running command 'ozone sh key info /06433-volume-for-prepare/06433-bucket-for-prepare/prepare-key2 2&gt;&amp;1'.</msg>
<msg timestamp="20211016 13:01:49.117" level="INFO">${rc} = 255</msg>
<msg timestamp="20211016 13:01:49.117" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
KEY_NOT_FOUND Key:prepare-key2 not found</msg>
<status status="PASS" starttime="20211016 13:01:46.603" endtime="20211016 13:01:49.117"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20211016 13:01:49.119" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
KEY_NOT_FOUND Key:prepare-key2 not found</msg>
<status status="PASS" starttime="20211016 13:01:49.118" endtime="20211016 13:01:49.119"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20211016 13:01:49.119" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20211016 13:01:49.119" endtime="20211016 13:01:49.119"/>
</kw>
<status status="PASS" starttime="20211016 13:01:46.603" endtime="20211016 13:01:49.120"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20211016 13:01:43.795" endtime="20211016 13:01:49.120"/>
</test>
<doc>Smoke test to test preparing OMs in an OM HA cluster.</doc>
<status status="PASS" starttime="20211016 13:01:08.995" endtime="20211016 13:01:49.121"/>
</suite>
<status status="PASS" starttime="N/A" endtime="N/A" elapsedtime="128641"/>
</suite>
<statistics>
<total>
<stat pass="14" fail="0" skip="0">All Tests</stat>
</total>
<tag>
</tag>
<suite>
<stat pass="14" fail="0" skip="0" id="s1" name="ozone-om-prepare">ozone-om-prepare</stat>
<stat pass="2" fail="0" skip="0" id="s1-s1" name="Om-Cancel-Prepare">ozone-om-prepare.Om-Cancel-Prepare</stat>
<stat pass="3" fail="0" skip="0" id="s1-s2" name="Om-Prepare">ozone-om-prepare.Om-Prepare</stat>
<stat pass="2" fail="0" skip="0" id="s1-s3" name="Om-Prepared">ozone-om-prepare.Om-Prepared</stat>
<stat pass="2" fail="0" skip="0" id="s1-s4" name="Om-Prepared">ozone-om-prepare.Om-Prepared</stat>
<stat pass="1" fail="0" skip="0" id="s1-s5" name="Loaddata">ozone-om-prepare.Loaddata</stat>
<stat pass="1" fail="0" skip="0" id="s1-s6" name="Readdata">ozone-om-prepare.Readdata</stat>
<stat pass="3" fail="0" skip="0" id="s1-s7" name="Om-Prepare">ozone-om-prepare.Om-Prepare</stat>
</suite>
</statistics>
<errors>
</errors>
</robot>
