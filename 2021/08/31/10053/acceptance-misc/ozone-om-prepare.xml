<?xml version="1.0" encoding="UTF-8"?>
<robot generator="Rebot 4.1 (Python 3.6.9 on linux)" generated="20210831 01:43:20.525" rpa="false" schemaversion="2">
<suite id="s1" name="ozone-om-prepare">
<suite id="s1-s1" name="Om-Cancel-Prepare" source="/opt/hadoop/smoketest/omha/om-cancel-prepare.robot">
<kw name="Generate volume and bucket names" type="SETUP">
<kw name="Generate Random String" library="String">
<var>${random}</var>
<arg>5</arg>
<arg>[NUMBERS]</arg>
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<msg timestamp="20210831 01:39:06.384" level="INFO">${random} = 22230</msg>
<status status="PASS" starttime="20210831 01:39:06.383" endtime="20210831 01:39:06.384"/>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<arg>${volume_name}</arg>
<arg>${random}-volume-for-cancel</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<msg timestamp="20210831 01:39:06.385" level="INFO">${volume_name} = 22230-volume-for-cancel</msg>
<status status="PASS" starttime="20210831 01:39:06.384" endtime="20210831 01:39:06.385"/>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<arg>${bucket_name}</arg>
<arg>${random}-bucket-for-cancel</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<msg timestamp="20210831 01:39:06.386" level="INFO">${bucket_name} = 22230-bucket-for-cancel</msg>
<status status="PASS" starttime="20210831 01:39:06.385" endtime="20210831 01:39:06.386"/>
</kw>
<status status="PASS" starttime="20210831 01:39:06.383" endtime="20210831 01:39:06.386"/>
</kw>
<test id="s1-s1-t1" name="Cancel Ozone Manager Prepare">
<kw name="Run Keyword If" library="BuiltIn" type="SETUP">
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" starttime="20210831 01:39:06.387" endtime="20210831 01:39:06.388"/>
</kw>
<kw name="Execute" library="os">
<var>${result}</var>
<arg>ozone admin om cancelprepare -id=omservice</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210831 01:39:06.392" level="INFO">Running command 'ozone admin om cancelprepare -id=omservice 2&gt;&amp;1'.</msg>
<msg timestamp="20210831 01:39:09.139" level="INFO">${rc} = 0</msg>
<msg timestamp="20210831 01:39:09.139" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteExceptio...</msg>
<status status="PASS" starttime="20210831 01:39:06.389" endtime="20210831 01:39:09.139"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210831 01:39:09.140" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.ozone.om.exceptions.OMNotLeaderException): OM:om2 is not the leader. Could not determine the leader node.
	at org.apache.hadoop.ozone.om.ratis.utils.OzoneManagerRatisUtils.createNotLeaderException(OzoneManagerRatisUtils.java:421)
	at org.apache.hadoop.ozone.om.ratis.utils.OzoneManagerRatisUtils.checkLeaderStatus(OzoneManagerRatisUtils.java:407)
	at org.apache.hadoop.ozone.protocolPB.OzoneManagerProtocolServerSideTranslatorPB.checkLeaderStatus(OzoneManagerProtocolServerSideTranslatorPB.java:240)
	at org.apache.hadoop.ozone.protocolPB.OzoneManagerProtocolServerSideTranslatorPB.processRequest(OzoneManagerProtocolServerSideTranslatorPB.java:135)
	at org.apache.hadoop.hdds.server.OzoneProtocolMessageDispatcher.processRequest(OzoneProtocolMessageDispatcher.java:87)
	at org.apache.hadoop.ozone.protocolPB.OzoneManagerProtocolServerSideTranslatorPB.submitRequest(OzoneManagerProtocolServerSideTranslatorPB.java:123)
	at org.apache.hadoop.ozone.protocol.proto.OzoneManagerProtocolProtos$OzoneManagerService$2.callBlockingMethod(OzoneManagerProtocolProtos.java)
	at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:466)
	at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:574)
	at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:552)
	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093)
	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1035)
	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:963)
	at java.base/java.security.AccessController.doPrivileged(Native Method)
	at java.base/javax.security.auth.Subject.doAs(Subject.java:423)
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878)
	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2966)
, while invoking $Proxy20.submitRequest over nodeId=om2,nodeAddress=om2:9862 after 1 failover attempts. Trying to failover immediately.
Cancel prepare succeeded, cluster can now accept write requests.</msg>
<status status="PASS" starttime="20210831 01:39:09.140" endtime="20210831 01:39:09.141"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210831 01:39:09.141" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210831 01:39:09.141" endtime="20210831 01:39:09.141"/>
</kw>
<status status="PASS" starttime="20210831 01:39:06.388" endtime="20210831 01:39:09.141"/>
</kw>
<msg timestamp="20210831 01:39:09.142" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210831 01:39:06.388" endtime="20210831 01:39:09.142"/>
</kw>
<msg timestamp="20210831 01:39:09.142" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteExceptio...</msg>
<status status="PASS" starttime="20210831 01:39:06.388" endtime="20210831 01:39:09.142"/>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<arg>3min</arg>
<arg>5sec</arg>
<arg>Should contain</arg>
<arg>${result}</arg>
<arg>Cancel prepare succeeded</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<kw name="Should Contain" library="BuiltIn">
<arg>${result}</arg>
<arg>Cancel prepare succeeded</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20210831 01:39:09.143" endtime="20210831 01:39:09.143"/>
</kw>
<status status="PASS" starttime="20210831 01:39:09.142" endtime="20210831 01:39:09.143"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20210831 01:39:06.386" endtime="20210831 01:39:09.143"/>
</test>
<test id="s1-s1-t2" name="Test write operations">
<kw name="Run Keyword If" library="BuiltIn" type="SETUP">
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" starttime="20210831 01:39:09.145" endtime="20210831 01:39:09.146"/>
</kw>
<kw name="Execute" library="os">
<arg>ozone sh volume create /${volume_name}</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210831 01:39:09.150" level="INFO">Running command 'ozone sh volume create /22230-volume-for-cancel 2&gt;&amp;1'.</msg>
<msg timestamp="20210831 01:39:11.570" level="INFO">${rc} = 0</msg>
<msg timestamp="20210831 01:39:11.570" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210831 01:39:09.148" endtime="20210831 01:39:11.570"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210831 01:39:11.572" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210831 01:39:11.571" endtime="20210831 01:39:11.572"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210831 01:39:11.573" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210831 01:39:11.572" endtime="20210831 01:39:11.573"/>
</kw>
<status status="PASS" starttime="20210831 01:39:09.148" endtime="20210831 01:39:11.573"/>
</kw>
<msg timestamp="20210831 01:39:11.573" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210831 01:39:09.147" endtime="20210831 01:39:11.573"/>
</kw>
<status status="PASS" starttime="20210831 01:39:09.146" endtime="20210831 01:39:11.574"/>
</kw>
<kw name="Execute" library="os">
<arg>ozone sh bucket create /${volume_name}/${bucket_name}</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210831 01:39:11.578" level="INFO">Running command 'ozone sh bucket create /22230-volume-for-cancel/22230-bucket-for-cancel 2&gt;&amp;1'.</msg>
<msg timestamp="20210831 01:39:14.028" level="INFO">${rc} = 0</msg>
<msg timestamp="20210831 01:39:14.028" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210831 01:39:11.576" endtime="20210831 01:39:14.029"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210831 01:39:14.030" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210831 01:39:14.029" endtime="20210831 01:39:14.030"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210831 01:39:14.030" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210831 01:39:14.030" endtime="20210831 01:39:14.031"/>
</kw>
<status status="PASS" starttime="20210831 01:39:11.575" endtime="20210831 01:39:14.031"/>
</kw>
<msg timestamp="20210831 01:39:14.031" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210831 01:39:11.575" endtime="20210831 01:39:14.031"/>
</kw>
<status status="PASS" starttime="20210831 01:39:11.574" endtime="20210831 01:39:14.031"/>
</kw>
<kw name="Execute" library="os">
<var>${result}</var>
<arg>ozone sh key put /${volume_name}/${bucket_name}/cancel-key /opt/hadoop/NOTICE.txt</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210831 01:39:14.035" level="INFO">Running command 'ozone sh key put /22230-volume-for-cancel/22230-bucket-for-cancel/cancel-key /opt/hadoop/NOTICE.txt 2&gt;&amp;1'.</msg>
<msg timestamp="20210831 01:39:18.315" level="INFO">${rc} = 0</msg>
<msg timestamp="20210831 01:39:18.315" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210831 01:39:14.033" endtime="20210831 01:39:18.315"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210831 01:39:18.316" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210831 01:39:18.316" endtime="20210831 01:39:18.317"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210831 01:39:18.317" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210831 01:39:18.317" endtime="20210831 01:39:18.317"/>
</kw>
<status status="PASS" starttime="20210831 01:39:14.032" endtime="20210831 01:39:18.317"/>
</kw>
<msg timestamp="20210831 01:39:18.318" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210831 01:39:14.032" endtime="20210831 01:39:18.318"/>
</kw>
<msg timestamp="20210831 01:39:18.318" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210831 01:39:14.031" endtime="20210831 01:39:18.318"/>
</kw>
<kw name="Execute" library="os">
<var>${result}</var>
<arg>ozone sh key info /${volume_name}/${bucket_name}/cancel-key</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210831 01:39:18.322" level="INFO">Running command 'ozone sh key info /22230-volume-for-cancel/22230-bucket-for-cancel/cancel-key 2&gt;&amp;1'.</msg>
<msg timestamp="20210831 01:39:21.000" level="INFO">${rc} = 0</msg>
<msg timestamp="20210831 01:39:21.000" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "volumeName" : "22230-volume-for-cancel",
  "bucketName" : "22230-buck...</msg>
<status status="PASS" starttime="20210831 01:39:18.320" endtime="20210831 01:39:21.001"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210831 01:39:21.002" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "volumeName" : "22230-volume-for-cancel",
  "bucketName" : "22230-bucket-for-cancel",
  "name" : "cancel-key",
  "dataSize" : 17526,
  "creationTime" : "2021-08-31T01:39:16.350Z",
  "modificationTime" : "2021-08-31T01:39:17.939Z",
  "replicationConfig" : {
    "replicationFactor" : "ONE",
    "requiredNodes" : 1,
    "replicationType" : "RATIS"
  },
  "ozoneKeyLocations" : [ {
    "containerID" : 1,
    "localID" : 107544261427200103,
    "length" : 17526,
    "offset" : 0,
    "keyOffset" : 0
  } ],
  "metadata" : { },
  "replicationFactor" : 1,
  "replicationType" : "RATIS"
}</msg>
<status status="PASS" starttime="20210831 01:39:21.001" endtime="20210831 01:39:21.002"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210831 01:39:21.003" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210831 01:39:21.002" endtime="20210831 01:39:21.003"/>
</kw>
<status status="PASS" starttime="20210831 01:39:18.319" endtime="20210831 01:39:21.003"/>
</kw>
<msg timestamp="20210831 01:39:21.003" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210831 01:39:18.319" endtime="20210831 01:39:21.003"/>
</kw>
<msg timestamp="20210831 01:39:21.004" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "volumeName" : "22230-volume-for-cancel",
  "bucketName" : "22230-buck...</msg>
<status status="PASS" starttime="20210831 01:39:18.318" endtime="20210831 01:39:21.004"/>
</kw>
<kw name="Should Contain" library="BuiltIn">
<arg>${result}</arg>
<arg>\"name\" : \"cancel-key\"</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20210831 01:39:21.004" endtime="20210831 01:39:21.004"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20210831 01:39:09.145" endtime="20210831 01:39:21.004"/>
</test>
<doc>Smoke test for ozone manager cancel prepare</doc>
<status status="PASS" starttime="20210831 01:39:06.333" endtime="20210831 01:39:21.005"/>
</suite>
<suite id="s1-s2" name="Om-Prepare" source="/opt/hadoop/smoketest/omha/om-prepare.robot">
<kw name="Create Specific OM data for prepare" type="SETUP">
<kw name="Execute" library="os">
<arg>ozone freon rk --replication-type=RATIS --num-of-volumes 1 --num-of-buckets 1 --num-of-keys 100</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210831 01:39:25.502" level="INFO">Running command 'ozone freon rk --replication-type=RATIS --num-of-volumes 1 --num-of-buckets 1 --num-of-keys 100 2&gt;&amp;1'.</msg>
<msg timestamp="20210831 01:39:38.308" level="INFO">${rc} = 0</msg>
<msg timestamp="20210831 01:39:38.308" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
2021-08-31 01:39:26,804 [main] INFO impl.MetricsConfig: Loaded properties ...</msg>
<status status="PASS" starttime="20210831 01:39:25.498" endtime="20210831 01:39:38.308"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210831 01:39:38.309" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
2021-08-31 01:39:26,804 [main] INFO impl.MetricsConfig: Loaded properties from hadoop-metrics2.properties
2021-08-31 01:39:26,948 [main] INFO impl.MetricsSystemImpl: Scheduled Metric snapshot period at 10 second(s).
2021-08-31 01:39:26,948 [main] INFO impl.MetricsSystemImpl: ozone-freon metrics system started
2021-08-31 01:39:27,697 [main] INFO retry.RetryInvocationHandler: com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.ozone.om.exceptions.OMNotLeaderException): OM:om2 is not the leader. Could not determine the leader node.
	at org.apache.hadoop.ozone.protocolPB.OzoneManagerProtocolServerSideTranslatorPB.createNotLeaderException(OzoneManagerProtocolServerSideTranslatorPB.java:186)
	at org.apache.hadoop.ozone.protocolPB.OzoneManagerProtocolServerSideTranslatorPB.createLeaderErrorException(OzoneManagerProtocolServerSideTranslatorPB.java:173)
	at org.apache.hadoop.ozone.protocolPB.OzoneManagerProtocolServerSideTranslatorPB.submitReadRequestToOM(OzoneManagerProtocolServerSideTranslatorPB.java:166)
	at org.apache.hadoop.ozone.protocolPB.OzoneManagerProtocolServerSideTranslatorPB.processRequest(OzoneManagerProtocolServerSideTranslatorPB.java:133)
	at org.apache.hadoop.hdds.server.OzoneProtocolMessageDispatcher.processRequest(OzoneProtocolMessageDispatcher.java:87)
	at org.apache.hadoop.ozone.protocolPB.OzoneManagerProtocolServerSideTranslatorPB.submitRequest(OzoneManagerProtocolServerSideTranslatorPB.java:123)
	at org.apache.hadoop.ozone.protocol.proto.OzoneManagerProtocolProtos$OzoneManagerService$2.callBlockingMethod(OzoneManagerProtocolProtos.java)
	at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:466)
	at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:574)
	at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:552)
	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093)
	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1035)
	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:963)
	at java.base/java.security.AccessController.doPrivileged(Native Method)
	at java.base/javax.security.auth.Subject.doAs(Subject.java:423)
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878)
	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2966)
, while invoking $Proxy22.submitRequest over nodeId=om2,nodeAddress=om2:9862 after 1 failover attempts. Trying to failover immediately.
2021-08-31 01:39:27,828 [main] INFO freon.RandomKeyGenerator: Number of Threads: 10
2021-08-31 01:39:27,848 [main] INFO freon.RandomKeyGenerator: Number of Volumes: 1.
2021-08-31 01:39:27,848 [main] INFO freon.RandomKeyGenerator: Number of Buckets per Volume: 1.
2021-08-31 01:39:27,848 [main] INFO freon.RandomKeyGenerator: Number of Keys per Bucket: 100.
2021-08-31 01:39:27,848 [main] INFO freon.RandomKeyGenerator: Key size: 10240 bytes
2021-08-31 01:39:27,848 [main] INFO freon.RandomKeyGenerator: Buffer size: 4096 bytes
2021-08-31 01:39:27,848 [main] INFO freon.RandomKeyGenerator: validateWrites : false
2021-08-31 01:39:27,848 [main] INFO freon.RandomKeyGenerator: cleanObjects : false
2021-08-31 01:39:27,865 [main] INFO freon.RandomKeyGenerator: Starting progress bar Thread.
2021-08-31 01:39:27,878 [Thread-6] INFO freon.ProgressBar: Progress: 0.00 % (0 out of 100)
2021-08-31 01:39:27,903 [pool-2-thread-1] INFO rpc.RpcClient: Creating Volume: vol-0-17469, with hadoop as owner and space quota set to -1 bytes, counts quota set to -1
2021-08-31 01:39:27,956 [pool-2-thread-2] INFO rpc.RpcClient: Creating Bucket: vol-0-17469/bucket-0-75595, with Versioning false and Storage Type set to DISK and Encryption set to false 
2021-08-31 01:39:28,643 [pool-2-thread-3] WARN impl.MetricsSystemImpl: ozone-freon metrics system already initialized!
2021-08-31 01:39:28,881 [Thread-6] INFO freon.ProgressBar: Progress: 10.00 % (10 out of 100)
2021-08-31 01:39:28,927 [pool-2-thread-2] INFO metrics.MetricRegistries: Loaded MetricRegistries class org.apache.ratis.metrics.impl.MetricRegistriesImpl
2021-08-31 01:39:29,883 [Thread-6] INFO freon.ProgressBar: Progress: 11.00 % (11 out of 100)
2021-08-31 01:39:30,883 [Thread-6] INFO freon.ProgressBar: Progress: 35.00 % (35 out of 100)
2021-08-31 01:39:31,885 [Thread-6] INFO freon.ProgressBar: Progress: 60.00 % (60 out of 100)
2021-08-31 01:39:32,890 [Thread-6] INFO freon.ProgressBar: Progress: 85.00 % (85 out of 100)
2021-08-31 01:39:33,891 [Thread-6] INFO freon.ProgressBar: Progress: 100.00 % (100 out of 100)

***************************************************
Status: Success
Git Base Revision: a3b9c37a397ad4188041dd80621bdeefc46885f2
Number of Volumes created: 1
Number of Buckets created: 1
Number of Keys added: 100
Ratis replication factor: ONE
Ratis replication type: RATIS
Average Time spent in volume creation: 00:00:00,006
Average Time spent in bucket creation: 00:00:00,001
Average Time spent in key creation: 00:00:01,340
Average Time spent in key write: 00:00:00,671
Total bytes written: 1024000
Total Execution time: 00:00:10,810
***************************************************</msg>
<status status="PASS" starttime="20210831 01:39:38.309" endtime="20210831 01:39:38.309"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210831 01:39:38.310" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210831 01:39:38.310" endtime="20210831 01:39:38.310"/>
</kw>
<status status="PASS" starttime="20210831 01:39:25.498" endtime="20210831 01:39:38.310"/>
</kw>
<msg timestamp="20210831 01:39:38.310" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210831 01:39:25.498" endtime="20210831 01:39:38.311"/>
</kw>
<status status="PASS" starttime="20210831 01:39:25.497" endtime="20210831 01:39:38.311"/>
</kw>
<kw name="Generate Random String" library="String">
<var>${random}</var>
<arg>5</arg>
<arg>[NUMBERS]</arg>
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<msg timestamp="20210831 01:39:38.311" level="INFO">${random} = 00673</msg>
<status status="PASS" starttime="20210831 01:39:38.311" endtime="20210831 01:39:38.311"/>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<arg>${volume_name}</arg>
<arg>${random}-volume-for-prepare</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<msg timestamp="20210831 01:39:38.313" level="INFO">${volume_name} = 00673-volume-for-prepare</msg>
<status status="PASS" starttime="20210831 01:39:38.312" endtime="20210831 01:39:38.313"/>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<arg>${bucket_name}</arg>
<arg>${random}-bucket-for-prepare</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<msg timestamp="20210831 01:39:38.314" level="INFO">${bucket_name} = 00673-bucket-for-prepare</msg>
<status status="PASS" starttime="20210831 01:39:38.313" endtime="20210831 01:39:38.314"/>
</kw>
<kw name="Execute" library="os">
<arg>ozone sh volume create /${volume_name}</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210831 01:39:38.317" level="INFO">Running command 'ozone sh volume create /00673-volume-for-prepare 2&gt;&amp;1'.</msg>
<msg timestamp="20210831 01:39:40.637" level="INFO">${rc} = 0</msg>
<msg timestamp="20210831 01:39:40.637" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210831 01:39:38.315" endtime="20210831 01:39:40.637"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210831 01:39:40.638" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210831 01:39:40.637" endtime="20210831 01:39:40.638"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210831 01:39:40.641" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210831 01:39:40.638" endtime="20210831 01:39:40.641"/>
</kw>
<status status="PASS" starttime="20210831 01:39:38.315" endtime="20210831 01:39:40.641"/>
</kw>
<msg timestamp="20210831 01:39:40.641" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210831 01:39:38.314" endtime="20210831 01:39:40.641"/>
</kw>
<status status="PASS" starttime="20210831 01:39:38.314" endtime="20210831 01:39:40.641"/>
</kw>
<kw name="Execute" library="os">
<arg>ozone sh bucket create /${volume_name}/${bucket_name}</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210831 01:39:40.646" level="INFO">Running command 'ozone sh bucket create /00673-volume-for-prepare/00673-bucket-for-prepare 2&gt;&amp;1'.</msg>
<msg timestamp="20210831 01:39:43.265" level="INFO">${rc} = 0</msg>
<msg timestamp="20210831 01:39:43.265" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210831 01:39:40.643" endtime="20210831 01:39:43.265"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210831 01:39:43.266" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210831 01:39:43.266" endtime="20210831 01:39:43.266"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210831 01:39:43.267" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210831 01:39:43.267" endtime="20210831 01:39:43.267"/>
</kw>
<status status="PASS" starttime="20210831 01:39:40.642" endtime="20210831 01:39:43.267"/>
</kw>
<msg timestamp="20210831 01:39:43.267" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210831 01:39:40.642" endtime="20210831 01:39:43.267"/>
</kw>
<status status="PASS" starttime="20210831 01:39:40.642" endtime="20210831 01:39:43.268"/>
</kw>
<kw name="Execute" library="os">
<arg>ozone sh key put /${volume_name}/${bucket_name}/prepare-key /opt/hadoop/NOTICE.txt</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210831 01:39:43.272" level="INFO">Running command 'ozone sh key put /00673-volume-for-prepare/00673-bucket-for-prepare/prepare-key /opt/hadoop/NOTICE.txt 2&gt;&amp;1'.</msg>
<msg timestamp="20210831 01:39:47.652" level="INFO">${rc} = 0</msg>
<msg timestamp="20210831 01:39:47.652" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210831 01:39:43.270" endtime="20210831 01:39:47.652"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210831 01:39:47.653" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210831 01:39:47.652" endtime="20210831 01:39:47.653"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210831 01:39:47.654" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210831 01:39:47.653" endtime="20210831 01:39:47.654"/>
</kw>
<status status="PASS" starttime="20210831 01:39:43.269" endtime="20210831 01:39:47.654"/>
</kw>
<msg timestamp="20210831 01:39:47.654" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210831 01:39:43.269" endtime="20210831 01:39:47.655"/>
</kw>
<status status="PASS" starttime="20210831 01:39:43.268" endtime="20210831 01:39:47.655"/>
</kw>
<status status="PASS" starttime="20210831 01:39:25.497" endtime="20210831 01:39:47.655"/>
</kw>
<test id="s1-s2-t1" name="Prepare Ozone Manager">
<kw name="Run Keyword If" library="BuiltIn" type="SETUP">
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" starttime="20210831 01:39:47.656" endtime="20210831 01:39:47.657"/>
</kw>
<kw name="Execute" library="os">
<var>${result}</var>
<arg>ozone admin om prepare -id=omservice</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210831 01:39:47.661" level="INFO">Running command 'ozone admin om prepare -id=omservice 2&gt;&amp;1'.</msg>
<msg timestamp="20210831 01:39:55.406" level="INFO">${rc} = 0</msg>
<msg timestamp="20210831 01:39:55.406" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteExceptio...</msg>
<status status="PASS" starttime="20210831 01:39:47.659" endtime="20210831 01:39:55.407"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210831 01:39:55.408" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.ozone.om.exceptions.OMNotLeaderException): OM:om2 is not the leader. Could not determine the leader node.
	at org.apache.hadoop.ozone.om.ratis.utils.OzoneManagerRatisUtils.createNotLeaderException(OzoneManagerRatisUtils.java:421)
	at org.apache.hadoop.ozone.om.ratis.utils.OzoneManagerRatisUtils.checkLeaderStatus(OzoneManagerRatisUtils.java:407)
	at org.apache.hadoop.ozone.protocolPB.OzoneManagerProtocolServerSideTranslatorPB.checkLeaderStatus(OzoneManagerProtocolServerSideTranslatorPB.java:240)
	at org.apache.hadoop.ozone.protocolPB.OzoneManagerProtocolServerSideTranslatorPB.processRequest(OzoneManagerProtocolServerSideTranslatorPB.java:135)
	at org.apache.hadoop.hdds.server.OzoneProtocolMessageDispatcher.processRequest(OzoneProtocolMessageDispatcher.java:87)
	at org.apache.hadoop.ozone.protocolPB.OzoneManagerProtocolServerSideTranslatorPB.submitRequest(OzoneManagerProtocolServerSideTranslatorPB.java:123)
	at org.apache.hadoop.ozone.protocol.proto.OzoneManagerProtocolProtos$OzoneManagerService$2.callBlockingMethod(OzoneManagerProtocolProtos.java)
	at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:466)
	at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:574)
	at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:552)
	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093)
	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1035)
	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:963)
	at java.base/java.security.AccessController.doPrivileged(Native Method)
	at java.base/javax.security.auth.Subject.doAs(Subject.java:423)
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878)
	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2966)
, while invoking $Proxy20.submitRequest over nodeId=om2,nodeAddress=om2:9862 after 1 failover attempts. Trying to failover immediately.
Ozone Manager Prepare Request successfully returned with Transaction Id : [714].

Checking individual OM instances for prepare request completion...
OM : [om1], Prepare Status : [PREPARE_COMPLETED], Current Transaction Id : [714]
OM : [om3], Prepare Status : [PREPARE_COMPLETED], Current Transaction Id : [714]
OM : [om2], Prepare Status : [PREPARE_COMPLETED], Current Transaction Id : [714]

OM Preparation successful! 
All OMs are prepared
No new write requests will be allowed until preparation is cancelled or upgrade/downgrade is done.</msg>
<status status="PASS" starttime="20210831 01:39:55.407" endtime="20210831 01:39:55.408"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210831 01:39:55.409" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210831 01:39:55.408" endtime="20210831 01:39:55.409"/>
</kw>
<status status="PASS" starttime="20210831 01:39:47.658" endtime="20210831 01:39:55.409"/>
</kw>
<msg timestamp="20210831 01:39:55.409" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210831 01:39:47.658" endtime="20210831 01:39:55.409"/>
</kw>
<msg timestamp="20210831 01:39:55.410" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteExceptio...</msg>
<status status="PASS" starttime="20210831 01:39:47.657" endtime="20210831 01:39:55.410"/>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<arg>3min</arg>
<arg>10sec</arg>
<arg>Should contain</arg>
<arg>${result}</arg>
<arg>OM Preparation successful!</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<kw name="Should Contain" library="BuiltIn">
<arg>${result}</arg>
<arg>OM Preparation successful!</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20210831 01:39:55.410" endtime="20210831 01:39:55.411"/>
</kw>
<status status="PASS" starttime="20210831 01:39:55.410" endtime="20210831 01:39:55.411"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20210831 01:39:47.655" endtime="20210831 01:39:55.411"/>
</test>
<test id="s1-s2-t2" name="Checks if the expected data is present in OM">
<kw name="Run Keyword If" library="BuiltIn" type="SETUP">
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" starttime="20210831 01:39:55.412" endtime="20210831 01:39:55.413"/>
</kw>
<kw name="Execute" library="os">
<var>${result}</var>
<arg>ozone sh key info /${volume_name}/${bucket_name}/prepare-key</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210831 01:39:55.416" level="INFO">Running command 'ozone sh key info /00673-volume-for-prepare/00673-bucket-for-prepare/prepare-key 2&gt;&amp;1'.</msg>
<msg timestamp="20210831 01:39:58.076" level="INFO">${rc} = 0</msg>
<msg timestamp="20210831 01:39:58.077" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "volumeName" : "00673-volume-for-prepare",
  "bucketName" : "00673-buc...</msg>
<status status="PASS" starttime="20210831 01:39:55.414" endtime="20210831 01:39:58.077"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210831 01:39:58.078" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "volumeName" : "00673-volume-for-prepare",
  "bucketName" : "00673-bucket-for-prepare",
  "name" : "prepare-key",
  "dataSize" : 17526,
  "creationTime" : "2021-08-31T01:39:45.744Z",
  "modificationTime" : "2021-08-31T01:39:47.276Z",
  "replicationConfig" : {
    "replicationFactor" : "ONE",
    "requiredNodes" : 1,
    "replicationType" : "RATIS"
  },
  "ozoneKeyLocations" : [ {
    "containerID" : 6,
    "localID" : 107544261427200204,
    "length" : 17526,
    "offset" : 0,
    "keyOffset" : 0
  } ],
  "metadata" : { },
  "replicationFactor" : 1,
  "replicationType" : "RATIS"
}</msg>
<status status="PASS" starttime="20210831 01:39:58.077" endtime="20210831 01:39:58.078"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210831 01:39:58.078" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210831 01:39:58.078" endtime="20210831 01:39:58.078"/>
</kw>
<status status="PASS" starttime="20210831 01:39:55.414" endtime="20210831 01:39:58.079"/>
</kw>
<msg timestamp="20210831 01:39:58.079" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210831 01:39:55.413" endtime="20210831 01:39:58.079"/>
</kw>
<msg timestamp="20210831 01:39:58.079" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "volumeName" : "00673-volume-for-prepare",
  "bucketName" : "00673-buc...</msg>
<status status="PASS" starttime="20210831 01:39:55.413" endtime="20210831 01:39:58.079"/>
</kw>
<kw name="Should Contain" library="BuiltIn">
<arg>${result}</arg>
<arg>\"name\" : \"prepare-key\"</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20210831 01:39:58.079" endtime="20210831 01:39:58.080"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20210831 01:39:55.412" endtime="20210831 01:39:58.080"/>
</test>
<test id="s1-s2-t3" name="Test write operation fails">
<kw name="Run Keyword If" library="BuiltIn" type="SETUP">
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" starttime="20210831 01:39:58.081" endtime="20210831 01:39:58.082"/>
</kw>
<kw name="Execute and checkrc" library="os">
<var>${result}</var>
<arg>ozone sh key put /${volume_name}/${bucket_name}/prepare-key2 /opt/hadoop/NOTICE.txt</arg>
<arg>255</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210831 01:39:58.086" level="INFO">Running command 'ozone sh key put /00673-volume-for-prepare/00673-bucket-for-prepare/prepare-key2 /opt/hadoop/NOTICE.txt 2&gt;&amp;1'.</msg>
<msg timestamp="20210831 01:40:00.637" level="INFO">${rc} = 255</msg>
<msg timestamp="20210831 01:40:00.637" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
NOT_SUPPORTED_OPERATION_WHEN_PREPARED Cannot apply write request CreateKey...</msg>
<status status="PASS" starttime="20210831 01:39:58.083" endtime="20210831 01:40:00.637"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210831 01:40:00.638" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
NOT_SUPPORTED_OPERATION_WHEN_PREPARED Cannot apply write request CreateKey when OM is in prepare mode.</msg>
<status status="PASS" starttime="20210831 01:40:00.637" endtime="20210831 01:40:00.638"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210831 01:40:00.639" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210831 01:40:00.638" endtime="20210831 01:40:00.639"/>
</kw>
<msg timestamp="20210831 01:40:00.639" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
NOT_SUPPORTED_OPERATION_WHEN_PREPARED Cannot apply write request CreateKey...</msg>
<status status="PASS" starttime="20210831 01:39:58.082" endtime="20210831 01:40:00.639"/>
</kw>
<kw name="Should Contain" library="BuiltIn">
<arg>${result}</arg>
<arg>OM is in prepare mode</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20210831 01:40:00.639" endtime="20210831 01:40:00.639"/>
</kw>
<kw name="Execute and checkrc" library="os">
<arg>ozone sh key info /${volume_name}/${bucket_name}/prepare-key2</arg>
<arg>255</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210831 01:40:00.642" level="INFO">Running command 'ozone sh key info /00673-volume-for-prepare/00673-bucket-for-prepare/prepare-key2 2&gt;&amp;1'.</msg>
<msg timestamp="20210831 01:40:03.189" level="INFO">${rc} = 255</msg>
<msg timestamp="20210831 01:40:03.189" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
KEY_NOT_FOUND Key:prepare-key2 not found</msg>
<status status="PASS" starttime="20210831 01:40:00.640" endtime="20210831 01:40:03.189"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210831 01:40:03.190" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
KEY_NOT_FOUND Key:prepare-key2 not found</msg>
<status status="PASS" starttime="20210831 01:40:03.189" endtime="20210831 01:40:03.190"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210831 01:40:03.191" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210831 01:40:03.190" endtime="20210831 01:40:03.191"/>
</kw>
<status status="PASS" starttime="20210831 01:40:00.640" endtime="20210831 01:40:03.191"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20210831 01:39:58.081" endtime="20210831 01:40:03.192"/>
</test>
<doc>Smoke test to test preparing OMs in an OM HA cluster.</doc>
<status status="PASS" starttime="20210831 01:39:25.442" endtime="20210831 01:40:03.193"/>
</suite>
<suite id="s1-s3" name="Om-Prepared" source="/opt/hadoop/smoketest/omha/om-prepared.robot">
<test id="s1-s3-t1" name="Test create volume fails">
<kw name="Run Keyword If" library="BuiltIn" type="SETUP">
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" starttime="20210831 01:40:07.686" endtime="20210831 01:40:07.687"/>
</kw>
<kw name="Generate Random String" library="String">
<var>${random}</var>
<arg>5</arg>
<arg>[NUMBERS]</arg>
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<msg timestamp="20210831 01:40:07.688" level="INFO">${random} = 50975</msg>
<status status="PASS" starttime="20210831 01:40:07.687" endtime="20210831 01:40:07.688"/>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<arg>${volume_name}</arg>
<arg>${random}-volume-for-prepare</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<msg timestamp="20210831 01:40:07.689" level="INFO">${volume_name} = 50975-volume-for-prepare</msg>
<status status="PASS" starttime="20210831 01:40:07.688" endtime="20210831 01:40:07.689"/>
</kw>
<kw name="Execute and checkrc" library="os">
<var>${result}</var>
<arg>ozone sh volume create /${volume_name}</arg>
<arg>255</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210831 01:40:07.693" level="INFO">Running command 'ozone sh volume create /50975-volume-for-prepare 2&gt;&amp;1'.</msg>
<msg timestamp="20210831 01:40:10.129" level="INFO">${rc} = 255</msg>
<msg timestamp="20210831 01:40:10.129" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
NOT_SUPPORTED_OPERATION_WHEN_PREPARED Cannot apply write request CreateVol...</msg>
<status status="PASS" starttime="20210831 01:40:07.689" endtime="20210831 01:40:10.129"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210831 01:40:10.131" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
NOT_SUPPORTED_OPERATION_WHEN_PREPARED Cannot apply write request CreateVolume when OM is in prepare mode.</msg>
<status status="PASS" starttime="20210831 01:40:10.130" endtime="20210831 01:40:10.131"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210831 01:40:10.131" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210831 01:40:10.131" endtime="20210831 01:40:10.131"/>
</kw>
<msg timestamp="20210831 01:40:10.132" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
NOT_SUPPORTED_OPERATION_WHEN_PREPARED Cannot apply write request CreateVol...</msg>
<status status="PASS" starttime="20210831 01:40:07.689" endtime="20210831 01:40:10.132"/>
</kw>
<kw name="Should Contain" library="BuiltIn">
<arg>${result}</arg>
<arg>OM is in prepare mode</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20210831 01:40:10.132" endtime="20210831 01:40:10.132"/>
</kw>
<kw name="Execute and checkrc" library="os">
<var>${result}</var>
<arg>ozone sh volume info /${volume_name}</arg>
<arg>255</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210831 01:40:10.135" level="INFO">Running command 'ozone sh volume info /50975-volume-for-prepare 2&gt;&amp;1'.</msg>
<msg timestamp="20210831 01:40:12.475" level="INFO">${rc} = 255</msg>
<msg timestamp="20210831 01:40:12.475" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
VOLUME_NOT_FOUND Volume 50975-volume-for-prepare is not found</msg>
<status status="PASS" starttime="20210831 01:40:10.133" endtime="20210831 01:40:12.475"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210831 01:40:12.476" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
VOLUME_NOT_FOUND Volume 50975-volume-for-prepare is not found</msg>
<status status="PASS" starttime="20210831 01:40:12.476" endtime="20210831 01:40:12.476"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210831 01:40:12.477" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210831 01:40:12.477" endtime="20210831 01:40:12.477"/>
</kw>
<msg timestamp="20210831 01:40:12.477" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
VOLUME_NOT_FOUND Volume 50975-volume-for-prepare is not found</msg>
<status status="PASS" starttime="20210831 01:40:10.132" endtime="20210831 01:40:12.477"/>
</kw>
<kw name="Should Contain" library="BuiltIn">
<arg>${result}</arg>
<arg>VOLUME_NOT_FOUND</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20210831 01:40:12.478" endtime="20210831 01:40:12.478"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20210831 01:40:07.685" endtime="20210831 01:40:12.478"/>
</test>
<test id="s1-s3-t2" name="Test list volumes succeeds">
<kw name="Run Keyword If" library="BuiltIn" type="SETUP">
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" starttime="20210831 01:40:12.480" endtime="20210831 01:40:12.481"/>
</kw>
<kw name="Execute" library="os">
<var>${result}</var>
<arg>ozone sh volume list</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210831 01:40:12.485" level="INFO">Running command 'ozone sh volume list 2&gt;&amp;1'.</msg>
<msg timestamp="20210831 01:40:15.289" level="INFO">${rc} = 0</msg>
<msg timestamp="20210831 01:40:15.289" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "metadata" : { },
  "name" : "vol-0-29112",
  "admin" : "hadoop",
  "o...</msg>
<status status="PASS" starttime="20210831 01:40:12.482" endtime="20210831 01:40:15.289"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210831 01:40:15.290" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "metadata" : { },
  "name" : "vol-0-29112",
  "admin" : "hadoop",
  "owner" : "hadoop",
  "quotaInBytes" : -1,
  "quotaInNamespace" : -1,
  "usedNamespace" : 1,
  "creationTime" : "2021-08-31T01:38:26.737Z",
  "modificationTime" : "2021-08-31T01:38:26.737Z",
  "acls" : [ {
    "type" : "USER",
    "name" : "hadoop",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  }, {
    "type" : "GROUP",
    "name" : "users",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  } ]
}
{
  "metadata" : { },
  "name" : "22230-volume-for-cancel",
  "admin" : "hadoop",
  "owner" : "hadoop",
  "quotaInBytes" : -1,
  "quotaInNamespace" : -1,
  "usedNamespace" : 1,
  "creationTime" : "2021-08-31T01:39:11.531Z",
  "modificationTime" : "2021-08-31T01:39:11.531Z",
  "acls" : [ {
    "type" : "USER",
    "name" : "hadoop",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  }, {
    "type" : "GROUP",
    "name" : "users",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  } ]
}
{
  "metadata" : { },
  "name" : "26137-volume-for-prepare",
  "admin" : "hadoop",
  "owner" : "hadoop",
  "quotaInBytes" : -1,
  "quotaInNamespace" : -1,
  "usedNamespace" : 1,
  "creationTime" : "2021-08-31T01:38:39.506Z",
  "modificationTime" : "2021-08-31T01:38:39.506Z",
  "acls" : [ {
    "type" : "USER",
    "name" : "hadoop",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  }, {
    "type" : "GROUP",
    "name" : "users",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  } ]
}
{
  "metadata" : { },
  "name" : "s3v",
  "admin" : "hadoop",
  "owner" : "hadoop",
  "quotaInBytes" : -1,
  "quotaInNamespace" : -1,
  "usedNamespace" : 0,
  "creationTime" : "2021-08-31T01:38:00.765Z",
  "modificationTime" : "2021-08-31T01:38:00.765Z",
  "acls" : [ {
    "type" : "USER",
    "name" : "hadoop",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  }, {
    "type" : "GROUP",
    "name" : "users",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  } ]
}
{
  "metadata" : { },
  "name" : "00673-volume-for-prepare",
  "admin" : "hadoop",
  "owner" : "hadoop",
  "quotaInBytes" : -1,
  "quotaInNamespace" : -1,
  "usedNamespace" : 1,
  "creationTime" : "2021-08-31T01:39:40.599Z",
  "modificationTime" : "2021-08-31T01:39:40.599Z",
  "acls" : [ {
    "type" : "USER",
    "name" : "hadoop",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  }, {
    "type" : "GROUP",
    "name" : "users",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  } ]
}
{
  "metadata" : { },
  "name" : "vol-0-17469",
  "admin" : "hadoop",
  "owner" : "hadoop",
  "quotaInBytes" : -1,
  "quotaInNamespace" : -1,
  "usedNamespace" : 1,
  "creationTime" : "2021-08-31T01:39:27.910Z",
  "modificationTime" : "2021-08-31T01:39:27.910Z",
  "acls" : [ {
    "type" : "USER",
    "name" : "hadoop",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  }, {
    "type" : "GROUP",
    "name" : "users",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  } ]
}</msg>
<status status="PASS" starttime="20210831 01:40:15.290" endtime="20210831 01:40:15.291"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210831 01:40:15.291" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210831 01:40:15.291" endtime="20210831 01:40:15.291"/>
</kw>
<status status="PASS" starttime="20210831 01:40:12.482" endtime="20210831 01:40:15.292"/>
</kw>
<msg timestamp="20210831 01:40:15.292" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210831 01:40:12.481" endtime="20210831 01:40:15.292"/>
</kw>
<msg timestamp="20210831 01:40:15.292" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "metadata" : { },
  "name" : "vol-0-29112",
  "admin" : "hadoop",
  "o...</msg>
<status status="PASS" starttime="20210831 01:40:12.481" endtime="20210831 01:40:15.292"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20210831 01:40:12.480" endtime="20210831 01:40:15.292"/>
</test>
<doc>Smoke test to test that OMs are prepared in an OM HA cluster.</doc>
<status status="PASS" starttime="20210831 01:40:07.635" endtime="20210831 01:40:15.293"/>
</suite>
<suite id="s1-s4" name="Om-Prepared" source="/opt/hadoop/smoketest/omha/om-prepared.robot">
<test id="s1-s4-t1" name="Test create volume fails">
<kw name="Run Keyword If" library="BuiltIn" type="SETUP">
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" starttime="20210831 01:41:26.377" endtime="20210831 01:41:26.378"/>
</kw>
<kw name="Generate Random String" library="String">
<var>${random}</var>
<arg>5</arg>
<arg>[NUMBERS]</arg>
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<msg timestamp="20210831 01:41:26.379" level="INFO">${random} = 99857</msg>
<status status="PASS" starttime="20210831 01:41:26.378" endtime="20210831 01:41:26.379"/>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<arg>${volume_name}</arg>
<arg>${random}-volume-for-prepare</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<msg timestamp="20210831 01:41:26.380" level="INFO">${volume_name} = 99857-volume-for-prepare</msg>
<status status="PASS" starttime="20210831 01:41:26.379" endtime="20210831 01:41:26.380"/>
</kw>
<kw name="Execute and checkrc" library="os">
<var>${result}</var>
<arg>ozone sh volume create /${volume_name}</arg>
<arg>255</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210831 01:41:26.384" level="INFO">Running command 'ozone sh volume create /99857-volume-for-prepare 2&gt;&amp;1'.</msg>
<msg timestamp="20210831 01:41:28.805" level="INFO">${rc} = 255</msg>
<msg timestamp="20210831 01:41:28.805" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
NOT_SUPPORTED_OPERATION_WHEN_PREPARED Cannot apply write request CreateVol...</msg>
<status status="PASS" starttime="20210831 01:41:26.381" endtime="20210831 01:41:28.805"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210831 01:41:28.806" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
NOT_SUPPORTED_OPERATION_WHEN_PREPARED Cannot apply write request CreateVolume when OM is in prepare mode.</msg>
<status status="PASS" starttime="20210831 01:41:28.805" endtime="20210831 01:41:28.806"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210831 01:41:28.807" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210831 01:41:28.806" endtime="20210831 01:41:28.807"/>
</kw>
<msg timestamp="20210831 01:41:28.808" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
NOT_SUPPORTED_OPERATION_WHEN_PREPARED Cannot apply write request CreateVol...</msg>
<status status="PASS" starttime="20210831 01:41:26.380" endtime="20210831 01:41:28.808"/>
</kw>
<kw name="Should Contain" library="BuiltIn">
<arg>${result}</arg>
<arg>OM is in prepare mode</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20210831 01:41:28.808" endtime="20210831 01:41:28.808"/>
</kw>
<kw name="Execute and checkrc" library="os">
<var>${result}</var>
<arg>ozone sh volume info /${volume_name}</arg>
<arg>255</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210831 01:41:28.811" level="INFO">Running command 'ozone sh volume info /99857-volume-for-prepare 2&gt;&amp;1'.</msg>
<msg timestamp="20210831 01:41:31.406" level="INFO">${rc} = 255</msg>
<msg timestamp="20210831 01:41:31.406" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
VOLUME_NOT_FOUND Volume 99857-volume-for-prepare is not found</msg>
<status status="PASS" starttime="20210831 01:41:28.809" endtime="20210831 01:41:31.406"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210831 01:41:31.407" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
VOLUME_NOT_FOUND Volume 99857-volume-for-prepare is not found</msg>
<status status="PASS" starttime="20210831 01:41:31.407" endtime="20210831 01:41:31.407"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210831 01:41:31.408" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210831 01:41:31.408" endtime="20210831 01:41:31.408"/>
</kw>
<msg timestamp="20210831 01:41:31.408" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
VOLUME_NOT_FOUND Volume 99857-volume-for-prepare is not found</msg>
<status status="PASS" starttime="20210831 01:41:28.808" endtime="20210831 01:41:31.408"/>
</kw>
<kw name="Should Contain" library="BuiltIn">
<arg>${result}</arg>
<arg>VOLUME_NOT_FOUND</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20210831 01:41:31.409" endtime="20210831 01:41:31.409"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20210831 01:41:26.377" endtime="20210831 01:41:31.409"/>
</test>
<test id="s1-s4-t2" name="Test list volumes succeeds">
<kw name="Run Keyword If" library="BuiltIn" type="SETUP">
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" starttime="20210831 01:41:31.411" endtime="20210831 01:41:31.411"/>
</kw>
<kw name="Execute" library="os">
<var>${result}</var>
<arg>ozone sh volume list</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210831 01:41:31.416" level="INFO">Running command 'ozone sh volume list 2&gt;&amp;1'.</msg>
<msg timestamp="20210831 01:41:34.210" level="INFO">${rc} = 0</msg>
<msg timestamp="20210831 01:41:34.210" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "metadata" : { },
  "name" : "vol-0-29112",
  "admin" : "hadoop",
  "o...</msg>
<status status="PASS" starttime="20210831 01:41:31.413" endtime="20210831 01:41:34.210"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210831 01:41:34.211" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "metadata" : { },
  "name" : "vol-0-29112",
  "admin" : "hadoop",
  "owner" : "hadoop",
  "quotaInBytes" : -1,
  "quotaInNamespace" : -1,
  "usedNamespace" : 1,
  "creationTime" : "2021-08-31T01:38:26.737Z",
  "modificationTime" : "2021-08-31T01:38:26.737Z",
  "acls" : [ {
    "type" : "USER",
    "name" : "hadoop",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  }, {
    "type" : "GROUP",
    "name" : "users",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  } ]
}
{
  "metadata" : { },
  "name" : "22230-volume-for-cancel",
  "admin" : "hadoop",
  "owner" : "hadoop",
  "quotaInBytes" : -1,
  "quotaInNamespace" : -1,
  "usedNamespace" : 1,
  "creationTime" : "2021-08-31T01:39:11.531Z",
  "modificationTime" : "2021-08-31T01:39:11.531Z",
  "acls" : [ {
    "type" : "USER",
    "name" : "hadoop",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  }, {
    "type" : "GROUP",
    "name" : "users",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  } ]
}
{
  "metadata" : { },
  "name" : "26137-volume-for-prepare",
  "admin" : "hadoop",
  "owner" : "hadoop",
  "quotaInBytes" : -1,
  "quotaInNamespace" : -1,
  "usedNamespace" : 1,
  "creationTime" : "2021-08-31T01:38:39.506Z",
  "modificationTime" : "2021-08-31T01:38:39.506Z",
  "acls" : [ {
    "type" : "USER",
    "name" : "hadoop",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  }, {
    "type" : "GROUP",
    "name" : "users",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  } ]
}
{
  "metadata" : { },
  "name" : "s3v",
  "admin" : "hadoop",
  "owner" : "hadoop",
  "quotaInBytes" : -1,
  "quotaInNamespace" : -1,
  "usedNamespace" : 0,
  "creationTime" : "2021-08-31T01:38:00.765Z",
  "modificationTime" : "2021-08-31T01:38:00.765Z",
  "acls" : [ {
    "type" : "USER",
    "name" : "hadoop",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  }, {
    "type" : "GROUP",
    "name" : "users",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  } ]
}
{
  "metadata" : { },
  "name" : "00673-volume-for-prepare",
  "admin" : "hadoop",
  "owner" : "hadoop",
  "quotaInBytes" : -1,
  "quotaInNamespace" : -1,
  "usedNamespace" : 1,
  "creationTime" : "2021-08-31T01:39:40.599Z",
  "modificationTime" : "2021-08-31T01:39:40.599Z",
  "acls" : [ {
    "type" : "USER",
    "name" : "hadoop",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  }, {
    "type" : "GROUP",
    "name" : "users",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  } ]
}
{
  "metadata" : { },
  "name" : "vol-0-17469",
  "admin" : "hadoop",
  "owner" : "hadoop",
  "quotaInBytes" : -1,
  "quotaInNamespace" : -1,
  "usedNamespace" : 1,
  "creationTime" : "2021-08-31T01:39:27.910Z",
  "modificationTime" : "2021-08-31T01:39:27.910Z",
  "acls" : [ {
    "type" : "USER",
    "name" : "hadoop",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  }, {
    "type" : "GROUP",
    "name" : "users",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  } ]
}</msg>
<status status="PASS" starttime="20210831 01:41:34.211" endtime="20210831 01:41:34.212"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210831 01:41:34.212" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210831 01:41:34.212" endtime="20210831 01:41:34.212"/>
</kw>
<status status="PASS" starttime="20210831 01:41:31.412" endtime="20210831 01:41:34.212"/>
</kw>
<msg timestamp="20210831 01:41:34.213" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210831 01:41:31.412" endtime="20210831 01:41:34.213"/>
</kw>
<msg timestamp="20210831 01:41:34.215" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "metadata" : { },
  "name" : "vol-0-29112",
  "admin" : "hadoop",
  "o...</msg>
<status status="PASS" starttime="20210831 01:41:31.411" endtime="20210831 01:41:34.215"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20210831 01:41:31.410" endtime="20210831 01:41:34.215"/>
</test>
<doc>Smoke test to test that OMs are prepared in an OM HA cluster.</doc>
<status status="PASS" starttime="20210831 01:41:26.326" endtime="20210831 01:41:34.219"/>
</suite>
<suite id="s1-s5" name="Loaddata" source="/opt/hadoop/smoketest/topology/loaddata.robot">
<test id="s1-s5-t1" name="Create a volume, bucket and key">
<kw name="Execute" library="os">
<var>${output}</var>
<arg>ozone sh volume create topvol1</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210831 01:42:47.157" level="INFO">Running command 'ozone sh volume create topvol1 2&gt;&amp;1'.</msg>
<msg timestamp="20210831 01:42:49.925" level="INFO">${rc} = 0</msg>
<msg timestamp="20210831 01:42:49.925" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210831 01:42:47.154" endtime="20210831 01:42:49.925"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210831 01:42:49.930" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210831 01:42:49.927" endtime="20210831 01:42:49.930"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210831 01:42:49.931" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210831 01:42:49.931" endtime="20210831 01:42:49.931"/>
</kw>
<status status="PASS" starttime="20210831 01:42:47.153" endtime="20210831 01:42:49.931"/>
</kw>
<msg timestamp="20210831 01:42:49.931" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210831 01:42:47.153" endtime="20210831 01:42:49.932"/>
</kw>
<msg timestamp="20210831 01:42:49.932" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210831 01:42:47.152" endtime="20210831 01:42:49.932"/>
</kw>
<kw name="Should Not Contain" library="BuiltIn">
<arg>${output}</arg>
<arg>Failed</arg>
<doc>Fails if ``container`` contains ``item`` one or more times.</doc>
<status status="PASS" starttime="20210831 01:42:49.932" endtime="20210831 01:42:49.932"/>
</kw>
<kw name="Execute" library="os">
<var>${output}</var>
<arg>ozone sh bucket create /topvol1/bucket1</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210831 01:42:49.939" level="INFO">Running command 'ozone sh bucket create /topvol1/bucket1 2&gt;&amp;1'.</msg>
<msg timestamp="20210831 01:42:52.720" level="INFO">${rc} = 0</msg>
<msg timestamp="20210831 01:42:52.720" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210831 01:42:49.934" endtime="20210831 01:42:52.720"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210831 01:42:52.721" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210831 01:42:52.720" endtime="20210831 01:42:52.721"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210831 01:42:52.722" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210831 01:42:52.722" endtime="20210831 01:42:52.723"/>
</kw>
<status status="PASS" starttime="20210831 01:42:49.933" endtime="20210831 01:42:52.723"/>
</kw>
<msg timestamp="20210831 01:42:52.723" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210831 01:42:49.933" endtime="20210831 01:42:52.723"/>
</kw>
<msg timestamp="20210831 01:42:52.723" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210831 01:42:49.933" endtime="20210831 01:42:52.723"/>
</kw>
<kw name="Should Not Contain" library="BuiltIn">
<arg>${output}</arg>
<arg>Failed</arg>
<doc>Fails if ``container`` contains ``item`` one or more times.</doc>
<status status="PASS" starttime="20210831 01:42:52.724" endtime="20210831 01:42:52.724"/>
</kw>
<kw name="Execute" library="os">
<var>${output}</var>
<arg>ozone sh key put /topvol1/bucket1/key1 /opt/hadoop/NOTICE.txt</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210831 01:42:52.731" level="INFO">Running command 'ozone sh key put /topvol1/bucket1/key1 /opt/hadoop/NOTICE.txt 2&gt;&amp;1'.</msg>
<msg timestamp="20210831 01:42:57.879" level="INFO">${rc} = 0</msg>
<msg timestamp="20210831 01:42:57.880" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210831 01:42:52.727" endtime="20210831 01:42:57.880"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210831 01:42:57.881" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210831 01:42:57.880" endtime="20210831 01:42:57.881"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210831 01:42:57.882" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210831 01:42:57.881" endtime="20210831 01:42:57.882"/>
</kw>
<status status="PASS" starttime="20210831 01:42:52.725" endtime="20210831 01:42:57.883"/>
</kw>
<msg timestamp="20210831 01:42:57.883" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210831 01:42:52.725" endtime="20210831 01:42:57.883"/>
</kw>
<msg timestamp="20210831 01:42:57.883" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210831 01:42:52.724" endtime="20210831 01:42:57.883"/>
</kw>
<kw name="Should Not Contain" library="BuiltIn">
<arg>${output}</arg>
<arg>Failed</arg>
<doc>Fails if ``container`` contains ``item`` one or more times.</doc>
<status status="PASS" starttime="20210831 01:42:57.883" endtime="20210831 01:42:57.884"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20210831 01:42:47.151" endtime="20210831 01:42:57.884"/>
</test>
<doc>Smoketest ozone cluster startup</doc>
<status status="PASS" starttime="20210831 01:42:47.099" endtime="20210831 01:42:57.885"/>
</suite>
<suite id="s1-s6" name="Readdata" source="/opt/hadoop/smoketest/topology/readdata.robot">
<test id="s1-s6-t1" name="Read data from previously created key">
<kw name="Generate Random String" library="String">
<var>${random}</var>
<arg>5</arg>
<arg>[NUMBERS]</arg>
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<msg timestamp="20210831 01:43:02.395" level="INFO">${random} = 70683</msg>
<status status="PASS" starttime="20210831 01:43:02.394" endtime="20210831 01:43:02.395"/>
</kw>
<kw name="Execute" library="os">
<var>${output}</var>
<arg>ozone sh key get /topvol1/bucket1/key1 /tmp/key1-${random}</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210831 01:43:02.400" level="INFO">Running command 'ozone sh key get /topvol1/bucket1/key1 /tmp/key1-70683 2&gt;&amp;1'.</msg>
<msg timestamp="20210831 01:43:06.710" level="INFO">${rc} = 0</msg>
<msg timestamp="20210831 01:43:06.710" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210831 01:43:02.397" endtime="20210831 01:43:06.710"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210831 01:43:06.712" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210831 01:43:06.711" endtime="20210831 01:43:06.712"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210831 01:43:06.712" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210831 01:43:06.712" endtime="20210831 01:43:06.712"/>
</kw>
<status status="PASS" starttime="20210831 01:43:02.396" endtime="20210831 01:43:06.713"/>
</kw>
<msg timestamp="20210831 01:43:06.713" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210831 01:43:02.396" endtime="20210831 01:43:06.713"/>
</kw>
<msg timestamp="20210831 01:43:06.713" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210831 01:43:02.395" endtime="20210831 01:43:06.713"/>
</kw>
<kw name="Should Not Contain" library="BuiltIn">
<arg>${output}</arg>
<arg>Failed</arg>
<doc>Fails if ``container`` contains ``item`` one or more times.</doc>
<status status="PASS" starttime="20210831 01:43:06.713" endtime="20210831 01:43:06.714"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20210831 01:43:02.393" endtime="20210831 01:43:06.714"/>
</test>
<doc>Smoketest ozone cluster startup</doc>
<status status="PASS" starttime="20210831 01:43:02.343" endtime="20210831 01:43:06.715"/>
</suite>
<suite id="s1-s7" name="Om-Prepare" source="/opt/hadoop/smoketest/omha/om-prepare.robot">
<kw name="Create Specific OM data for prepare" type="SETUP">
<kw name="Execute" library="os">
<arg>ozone freon rk --replication-type=RATIS --num-of-volumes 1 --num-of-buckets 1 --num-of-keys 100</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210831 01:38:24.092" level="INFO">Running command 'ozone freon rk --replication-type=RATIS --num-of-volumes 1 --num-of-buckets 1 --num-of-keys 100 2&gt;&amp;1'.</msg>
<msg timestamp="20210831 01:38:37.102" level="INFO">${rc} = 0</msg>
<msg timestamp="20210831 01:38:37.102" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
2021-08-31 01:38:25,560 [main] INFO impl.MetricsConfig: Loaded properties ...</msg>
<status status="PASS" starttime="20210831 01:38:24.088" endtime="20210831 01:38:37.102"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210831 01:38:37.103" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
2021-08-31 01:38:25,560 [main] INFO impl.MetricsConfig: Loaded properties from hadoop-metrics2.properties
2021-08-31 01:38:25,685 [main] INFO impl.MetricsSystemImpl: Scheduled Metric snapshot period at 10 second(s).
2021-08-31 01:38:25,685 [main] INFO impl.MetricsSystemImpl: ozone-freon metrics system started
2021-08-31 01:38:26,458 [main] INFO retry.RetryInvocationHandler: com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.ozone.om.exceptions.OMNotLeaderException): OM:om2 is not the leader. Could not determine the leader node.
	at org.apache.hadoop.ozone.protocolPB.OzoneManagerProtocolServerSideTranslatorPB.createNotLeaderException(OzoneManagerProtocolServerSideTranslatorPB.java:186)
	at org.apache.hadoop.ozone.protocolPB.OzoneManagerProtocolServerSideTranslatorPB.createLeaderErrorException(OzoneManagerProtocolServerSideTranslatorPB.java:173)
	at org.apache.hadoop.ozone.protocolPB.OzoneManagerProtocolServerSideTranslatorPB.submitReadRequestToOM(OzoneManagerProtocolServerSideTranslatorPB.java:166)
	at org.apache.hadoop.ozone.protocolPB.OzoneManagerProtocolServerSideTranslatorPB.processRequest(OzoneManagerProtocolServerSideTranslatorPB.java:133)
	at org.apache.hadoop.hdds.server.OzoneProtocolMessageDispatcher.processRequest(OzoneProtocolMessageDispatcher.java:87)
	at org.apache.hadoop.ozone.protocolPB.OzoneManagerProtocolServerSideTranslatorPB.submitRequest(OzoneManagerProtocolServerSideTranslatorPB.java:123)
	at org.apache.hadoop.ozone.protocol.proto.OzoneManagerProtocolProtos$OzoneManagerService$2.callBlockingMethod(OzoneManagerProtocolProtos.java)
	at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:466)
	at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:574)
	at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:552)
	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093)
	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1035)
	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:963)
	at java.base/java.security.AccessController.doPrivileged(Native Method)
	at java.base/javax.security.auth.Subject.doAs(Subject.java:423)
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878)
	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2966)
, while invoking $Proxy22.submitRequest over nodeId=om2,nodeAddress=om2:9862 after 1 failover attempts. Trying to failover immediately.
2021-08-31 01:38:26,604 [main] INFO freon.RandomKeyGenerator: Number of Threads: 10
2021-08-31 01:38:26,631 [main] INFO freon.RandomKeyGenerator: Number of Volumes: 1.
2021-08-31 01:38:26,631 [main] INFO freon.RandomKeyGenerator: Number of Buckets per Volume: 1.
2021-08-31 01:38:26,632 [main] INFO freon.RandomKeyGenerator: Number of Keys per Bucket: 100.
2021-08-31 01:38:26,632 [main] INFO freon.RandomKeyGenerator: Key size: 10240 bytes
2021-08-31 01:38:26,632 [main] INFO freon.RandomKeyGenerator: Buffer size: 4096 bytes
2021-08-31 01:38:26,632 [main] INFO freon.RandomKeyGenerator: validateWrites : false
2021-08-31 01:38:26,632 [main] INFO freon.RandomKeyGenerator: cleanObjects : false
2021-08-31 01:38:26,650 [main] INFO freon.RandomKeyGenerator: Starting progress bar Thread.
2021-08-31 01:38:26,652 [Thread-6] INFO freon.ProgressBar: Progress: 0.00 % (0 out of 100)
2021-08-31 01:38:26,681 [pool-2-thread-1] INFO rpc.RpcClient: Creating Volume: vol-0-29112, with hadoop as owner and space quota set to -1 bytes, counts quota set to -1
2021-08-31 01:38:27,031 [pool-2-thread-3] INFO rpc.RpcClient: Creating Bucket: vol-0-29112/bucket-0-68952, with Versioning false and Storage Type set to DISK and Encryption set to false 
2021-08-31 01:38:27,665 [Thread-6] INFO freon.ProgressBar: Progress: 0.00 % (0 out of 100)
2021-08-31 01:38:28,446 [pool-2-thread-3] WARN impl.MetricsSystemImpl: ozone-freon metrics system already initialized!
2021-08-31 01:38:28,665 [Thread-6] INFO freon.ProgressBar: Progress: 10.00 % (10 out of 100)
2021-08-31 01:38:28,696 [pool-2-thread-3] INFO metrics.MetricRegistries: Loaded MetricRegistries class org.apache.ratis.metrics.impl.MetricRegistriesImpl
2021-08-31 01:38:29,666 [Thread-6] INFO freon.ProgressBar: Progress: 10.00 % (10 out of 100)
2021-08-31 01:38:30,666 [Thread-6] INFO freon.ProgressBar: Progress: 13.00 % (13 out of 100)
2021-08-31 01:38:31,678 [Thread-6] INFO freon.ProgressBar: Progress: 34.00 % (34 out of 100)
2021-08-31 01:38:32,679 [Thread-6] INFO freon.ProgressBar: Progress: 54.00 % (54 out of 100)
2021-08-31 01:38:33,680 [Thread-6] INFO freon.ProgressBar: Progress: 71.00 % (71 out of 100)
2021-08-31 01:38:34,722 [Thread-6] INFO freon.ProgressBar: Progress: 96.00 % (96 out of 100)
2021-08-31 01:38:35,723 [Thread-6] INFO freon.ProgressBar: Progress: 100.00 % (100 out of 100)

***************************************************
Status: Success
Git Base Revision: a3b9c37a397ad4188041dd80621bdeefc46885f2
Number of Volumes created: 1
Number of Buckets created: 1
Number of Keys added: 100
Ratis replication factor: ONE
Ratis replication type: RATIS
Average Time spent in volume creation: 00:00:00,031
Average Time spent in bucket creation: 00:00:00,014
Average Time spent in key creation: 00:00:02,370
Average Time spent in key write: 00:00:00,820
Total bytes written: 1024000
Total Execution time: 00:00:10,871
***************************************************</msg>
<status status="PASS" starttime="20210831 01:38:37.103" endtime="20210831 01:38:37.104"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210831 01:38:37.104" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210831 01:38:37.104" endtime="20210831 01:38:37.104"/>
</kw>
<status status="PASS" starttime="20210831 01:38:24.088" endtime="20210831 01:38:37.104"/>
</kw>
<msg timestamp="20210831 01:38:37.104" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210831 01:38:24.088" endtime="20210831 01:38:37.105"/>
</kw>
<status status="PASS" starttime="20210831 01:38:24.087" endtime="20210831 01:38:37.105"/>
</kw>
<kw name="Generate Random String" library="String">
<var>${random}</var>
<arg>5</arg>
<arg>[NUMBERS]</arg>
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<msg timestamp="20210831 01:38:37.105" level="INFO">${random} = 26137</msg>
<status status="PASS" starttime="20210831 01:38:37.105" endtime="20210831 01:38:37.106"/>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<arg>${volume_name}</arg>
<arg>${random}-volume-for-prepare</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<msg timestamp="20210831 01:38:37.107" level="INFO">${volume_name} = 26137-volume-for-prepare</msg>
<status status="PASS" starttime="20210831 01:38:37.106" endtime="20210831 01:38:37.107"/>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<arg>${bucket_name}</arg>
<arg>${random}-bucket-for-prepare</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<msg timestamp="20210831 01:38:37.108" level="INFO">${bucket_name} = 26137-bucket-for-prepare</msg>
<status status="PASS" starttime="20210831 01:38:37.107" endtime="20210831 01:38:37.108"/>
</kw>
<kw name="Execute" library="os">
<arg>ozone sh volume create /${volume_name}</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210831 01:38:37.111" level="INFO">Running command 'ozone sh volume create /26137-volume-for-prepare 2&gt;&amp;1'.</msg>
<msg timestamp="20210831 01:38:39.561" level="INFO">${rc} = 0</msg>
<msg timestamp="20210831 01:38:39.561" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210831 01:38:37.109" endtime="20210831 01:38:39.561"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210831 01:38:39.562" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210831 01:38:39.561" endtime="20210831 01:38:39.562"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210831 01:38:39.564" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210831 01:38:39.562" endtime="20210831 01:38:39.564"/>
</kw>
<status status="PASS" starttime="20210831 01:38:37.109" endtime="20210831 01:38:39.564"/>
</kw>
<msg timestamp="20210831 01:38:39.564" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210831 01:38:37.109" endtime="20210831 01:38:39.564"/>
</kw>
<status status="PASS" starttime="20210831 01:38:37.108" endtime="20210831 01:38:39.564"/>
</kw>
<kw name="Execute" library="os">
<arg>ozone sh bucket create /${volume_name}/${bucket_name}</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210831 01:38:39.568" level="INFO">Running command 'ozone sh bucket create /26137-volume-for-prepare/26137-bucket-for-prepare 2&gt;&amp;1'.</msg>
<msg timestamp="20210831 01:38:42.011" level="INFO">${rc} = 0</msg>
<msg timestamp="20210831 01:38:42.011" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210831 01:38:39.566" endtime="20210831 01:38:42.011"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210831 01:38:42.012" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210831 01:38:42.012" endtime="20210831 01:38:42.012"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210831 01:38:42.013" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210831 01:38:42.012" endtime="20210831 01:38:42.013"/>
</kw>
<status status="PASS" starttime="20210831 01:38:39.565" endtime="20210831 01:38:42.013"/>
</kw>
<msg timestamp="20210831 01:38:42.013" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210831 01:38:39.565" endtime="20210831 01:38:42.013"/>
</kw>
<status status="PASS" starttime="20210831 01:38:39.565" endtime="20210831 01:38:42.014"/>
</kw>
<kw name="Execute" library="os">
<arg>ozone sh key put /${volume_name}/${bucket_name}/prepare-key /opt/hadoop/NOTICE.txt</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210831 01:38:42.017" level="INFO">Running command 'ozone sh key put /26137-volume-for-prepare/26137-bucket-for-prepare/prepare-key /opt/hadoop/NOTICE.txt 2&gt;&amp;1'.</msg>
<msg timestamp="20210831 01:38:46.583" level="INFO">${rc} = 0</msg>
<msg timestamp="20210831 01:38:46.583" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210831 01:38:42.015" endtime="20210831 01:38:46.583"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210831 01:38:46.584" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210831 01:38:46.583" endtime="20210831 01:38:46.584"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210831 01:38:46.584" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210831 01:38:46.584" endtime="20210831 01:38:46.584"/>
</kw>
<status status="PASS" starttime="20210831 01:38:42.015" endtime="20210831 01:38:46.585"/>
</kw>
<msg timestamp="20210831 01:38:46.585" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210831 01:38:42.014" endtime="20210831 01:38:46.585"/>
</kw>
<status status="PASS" starttime="20210831 01:38:42.014" endtime="20210831 01:38:46.585"/>
</kw>
<status status="PASS" starttime="20210831 01:38:24.087" endtime="20210831 01:38:46.585"/>
</kw>
<test id="s1-s7-t1" name="Prepare Ozone Manager">
<kw name="Run Keyword If" library="BuiltIn" type="SETUP">
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" starttime="20210831 01:38:46.586" endtime="20210831 01:38:46.587"/>
</kw>
<kw name="Execute" library="os">
<var>${result}</var>
<arg>ozone admin om prepare -id=omservice</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210831 01:38:46.590" level="INFO">Running command 'ozone admin om prepare -id=omservice 2&gt;&amp;1'.</msg>
<msg timestamp="20210831 01:38:54.318" level="INFO">${rc} = 0</msg>
<msg timestamp="20210831 01:38:54.318" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteExceptio...</msg>
<status status="PASS" starttime="20210831 01:38:46.588" endtime="20210831 01:38:54.318"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210831 01:38:54.319" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.ozone.om.exceptions.OMNotLeaderException): OM:om2 is not the leader. Could not determine the leader node.
	at org.apache.hadoop.ozone.om.ratis.utils.OzoneManagerRatisUtils.createNotLeaderException(OzoneManagerRatisUtils.java:421)
	at org.apache.hadoop.ozone.om.ratis.utils.OzoneManagerRatisUtils.checkLeaderStatus(OzoneManagerRatisUtils.java:407)
	at org.apache.hadoop.ozone.protocolPB.OzoneManagerProtocolServerSideTranslatorPB.checkLeaderStatus(OzoneManagerProtocolServerSideTranslatorPB.java:240)
	at org.apache.hadoop.ozone.protocolPB.OzoneManagerProtocolServerSideTranslatorPB.processRequest(OzoneManagerProtocolServerSideTranslatorPB.java:135)
	at org.apache.hadoop.hdds.server.OzoneProtocolMessageDispatcher.processRequest(OzoneProtocolMessageDispatcher.java:87)
	at org.apache.hadoop.ozone.protocolPB.OzoneManagerProtocolServerSideTranslatorPB.submitRequest(OzoneManagerProtocolServerSideTranslatorPB.java:123)
	at org.apache.hadoop.ozone.protocol.proto.OzoneManagerProtocolProtos$OzoneManagerService$2.callBlockingMethod(OzoneManagerProtocolProtos.java)
	at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:466)
	at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:574)
	at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:552)
	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093)
	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1035)
	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:963)
	at java.base/java.security.AccessController.doPrivileged(Native Method)
	at java.base/javax.security.auth.Subject.doAs(Subject.java:423)
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878)
	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2966)
, while invoking $Proxy20.submitRequest over nodeId=om2,nodeAddress=om2:9862 after 1 failover attempts. Trying to failover immediately.
Ozone Manager Prepare Request successfully returned with Transaction Id : [346].

Checking individual OM instances for prepare request completion...
OM : [om1], Prepare Status : [PREPARE_COMPLETED], Current Transaction Id : [346]
OM : [om3], Prepare Status : [PREPARE_COMPLETED], Current Transaction Id : [346]
OM : [om2], Prepare Status : [PREPARE_COMPLETED], Current Transaction Id : [346]

OM Preparation successful! 
All OMs are prepared
No new write requests will be allowed until preparation is cancelled or upgrade/downgrade is done.</msg>
<status status="PASS" starttime="20210831 01:38:54.318" endtime="20210831 01:38:54.319"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210831 01:38:54.320" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210831 01:38:54.319" endtime="20210831 01:38:54.320"/>
</kw>
<status status="PASS" starttime="20210831 01:38:46.588" endtime="20210831 01:38:54.321"/>
</kw>
<msg timestamp="20210831 01:38:54.321" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210831 01:38:46.587" endtime="20210831 01:38:54.321"/>
</kw>
<msg timestamp="20210831 01:38:54.321" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteExceptio...</msg>
<status status="PASS" starttime="20210831 01:38:46.587" endtime="20210831 01:38:54.321"/>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<arg>3min</arg>
<arg>10sec</arg>
<arg>Should contain</arg>
<arg>${result}</arg>
<arg>OM Preparation successful!</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<kw name="Should Contain" library="BuiltIn">
<arg>${result}</arg>
<arg>OM Preparation successful!</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20210831 01:38:54.322" endtime="20210831 01:38:54.322"/>
</kw>
<status status="PASS" starttime="20210831 01:38:54.321" endtime="20210831 01:38:54.322"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20210831 01:38:46.585" endtime="20210831 01:38:54.322"/>
</test>
<test id="s1-s7-t2" name="Checks if the expected data is present in OM">
<kw name="Run Keyword If" library="BuiltIn" type="SETUP">
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" starttime="20210831 01:38:54.324" endtime="20210831 01:38:54.324"/>
</kw>
<kw name="Execute" library="os">
<var>${result}</var>
<arg>ozone sh key info /${volume_name}/${bucket_name}/prepare-key</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210831 01:38:54.328" level="INFO">Running command 'ozone sh key info /26137-volume-for-prepare/26137-bucket-for-prepare/prepare-key 2&gt;&amp;1'.</msg>
<msg timestamp="20210831 01:38:56.961" level="INFO">${rc} = 0</msg>
<msg timestamp="20210831 01:38:56.961" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "volumeName" : "26137-volume-for-prepare",
  "bucketName" : "26137-buc...</msg>
<status status="PASS" starttime="20210831 01:38:54.326" endtime="20210831 01:38:56.961"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210831 01:38:56.962" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "volumeName" : "26137-volume-for-prepare",
  "bucketName" : "26137-bucket-for-prepare",
  "name" : "prepare-key",
  "dataSize" : 17526,
  "creationTime" : "2021-08-31T01:38:44.593Z",
  "modificationTime" : "2021-08-31T01:38:46.185Z",
  "replicationConfig" : {
    "replicationFactor" : "ONE",
    "requiredNodes" : 1,
    "replicationType" : "RATIS"
  },
  "ozoneKeyLocations" : [ {
    "containerID" : 6,
    "localID" : 107544261427200101,
    "length" : 17526,
    "offset" : 0,
    "keyOffset" : 0
  } ],
  "metadata" : { },
  "replicationType" : "RATIS",
  "replicationFactor" : 1
}</msg>
<status status="PASS" starttime="20210831 01:38:56.961" endtime="20210831 01:38:56.962"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210831 01:38:56.963" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210831 01:38:56.962" endtime="20210831 01:38:56.963"/>
</kw>
<status status="PASS" starttime="20210831 01:38:54.325" endtime="20210831 01:38:56.963"/>
</kw>
<msg timestamp="20210831 01:38:56.963" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210831 01:38:54.325" endtime="20210831 01:38:56.963"/>
</kw>
<msg timestamp="20210831 01:38:56.963" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "volumeName" : "26137-volume-for-prepare",
  "bucketName" : "26137-buc...</msg>
<status status="PASS" starttime="20210831 01:38:54.324" endtime="20210831 01:38:56.963"/>
</kw>
<kw name="Should Contain" library="BuiltIn">
<arg>${result}</arg>
<arg>\"name\" : \"prepare-key\"</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20210831 01:38:56.964" endtime="20210831 01:38:56.964"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20210831 01:38:54.323" endtime="20210831 01:38:56.964"/>
</test>
<test id="s1-s7-t3" name="Test write operation fails">
<kw name="Run Keyword If" library="BuiltIn" type="SETUP">
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" starttime="20210831 01:38:56.966" endtime="20210831 01:38:56.966"/>
</kw>
<kw name="Execute and checkrc" library="os">
<var>${result}</var>
<arg>ozone sh key put /${volume_name}/${bucket_name}/prepare-key2 /opt/hadoop/NOTICE.txt</arg>
<arg>255</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210831 01:38:56.970" level="INFO">Running command 'ozone sh key put /26137-volume-for-prepare/26137-bucket-for-prepare/prepare-key2 /opt/hadoop/NOTICE.txt 2&gt;&amp;1'.</msg>
<msg timestamp="20210831 01:38:59.150" level="INFO">${rc} = 255</msg>
<msg timestamp="20210831 01:38:59.150" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
NOT_SUPPORTED_OPERATION_WHEN_PREPARED Cannot apply write request CreateKey...</msg>
<status status="PASS" starttime="20210831 01:38:56.967" endtime="20210831 01:38:59.150"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210831 01:38:59.152" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
NOT_SUPPORTED_OPERATION_WHEN_PREPARED Cannot apply write request CreateKey when OM is in prepare mode.</msg>
<status status="PASS" starttime="20210831 01:38:59.151" endtime="20210831 01:38:59.152"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210831 01:38:59.157" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210831 01:38:59.152" endtime="20210831 01:38:59.157"/>
</kw>
<msg timestamp="20210831 01:38:59.157" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
NOT_SUPPORTED_OPERATION_WHEN_PREPARED Cannot apply write request CreateKey...</msg>
<status status="PASS" starttime="20210831 01:38:56.966" endtime="20210831 01:38:59.157"/>
</kw>
<kw name="Should Contain" library="BuiltIn">
<arg>${result}</arg>
<arg>OM is in prepare mode</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20210831 01:38:59.157" endtime="20210831 01:38:59.158"/>
</kw>
<kw name="Execute and checkrc" library="os">
<arg>ozone sh key info /${volume_name}/${bucket_name}/prepare-key2</arg>
<arg>255</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210831 01:38:59.160" level="INFO">Running command 'ozone sh key info /26137-volume-for-prepare/26137-bucket-for-prepare/prepare-key2 2&gt;&amp;1'.</msg>
<msg timestamp="20210831 01:39:01.557" level="INFO">${rc} = 255</msg>
<msg timestamp="20210831 01:39:01.557" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
KEY_NOT_FOUND Key:prepare-key2 not found</msg>
<status status="PASS" starttime="20210831 01:38:59.158" endtime="20210831 01:39:01.557"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210831 01:39:01.558" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
KEY_NOT_FOUND Key:prepare-key2 not found</msg>
<status status="PASS" starttime="20210831 01:39:01.557" endtime="20210831 01:39:01.558"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210831 01:39:01.559" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210831 01:39:01.558" endtime="20210831 01:39:01.559"/>
</kw>
<status status="PASS" starttime="20210831 01:38:59.158" endtime="20210831 01:39:01.559"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20210831 01:38:56.965" endtime="20210831 01:39:01.559"/>
</test>
<doc>Smoke test to test preparing OMs in an OM HA cluster.</doc>
<status status="PASS" starttime="20210831 01:38:24.036" endtime="20210831 01:39:01.561"/>
</suite>
<status status="PASS" starttime="N/A" endtime="N/A" elapsedtime="120657"/>
</suite>
<statistics>
<total>
<stat pass="14" fail="0" skip="0">All Tests</stat>
</total>
<tag>
</tag>
<suite>
<stat pass="14" fail="0" skip="0" id="s1" name="ozone-om-prepare">ozone-om-prepare</stat>
<stat pass="2" fail="0" skip="0" id="s1-s1" name="Om-Cancel-Prepare">ozone-om-prepare.Om-Cancel-Prepare</stat>
<stat pass="3" fail="0" skip="0" id="s1-s2" name="Om-Prepare">ozone-om-prepare.Om-Prepare</stat>
<stat pass="2" fail="0" skip="0" id="s1-s3" name="Om-Prepared">ozone-om-prepare.Om-Prepared</stat>
<stat pass="2" fail="0" skip="0" id="s1-s4" name="Om-Prepared">ozone-om-prepare.Om-Prepared</stat>
<stat pass="1" fail="0" skip="0" id="s1-s5" name="Loaddata">ozone-om-prepare.Loaddata</stat>
<stat pass="1" fail="0" skip="0" id="s1-s6" name="Readdata">ozone-om-prepare.Readdata</stat>
<stat pass="3" fail="0" skip="0" id="s1-s7" name="Om-Prepare">ozone-om-prepare.Om-Prepare</stat>
</suite>
</statistics>
<errors>
</errors>
</robot>
