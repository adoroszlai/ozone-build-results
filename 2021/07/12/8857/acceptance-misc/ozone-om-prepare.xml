<?xml version="1.0" encoding="UTF-8"?>
<robot generator="Rebot 4.0.3 (Python 3.6.9 on linux)" generated="20210712 10:21:04.239" rpa="false" schemaversion="2">
<suite id="s1" name="ozone-om-prepare">
<suite id="s1-s1" name="Om-Cancel-Prepare" source="/opt/hadoop/smoketest/omha/om-cancel-prepare.robot">
<kw name="Generate volume and bucket names" type="SETUP">
<kw name="Generate Random String" library="String">
<var>${random}</var>
<arg>5</arg>
<arg>[NUMBERS]</arg>
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<msg timestamp="20210712 10:17:11.508" level="INFO">${random} = 67926</msg>
<status status="PASS" starttime="20210712 10:17:11.508" endtime="20210712 10:17:11.508"/>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<arg>${volume_name}</arg>
<arg>${random}-volume-for-cancel</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<msg timestamp="20210712 10:17:11.510" level="INFO">${volume_name} = 67926-volume-for-cancel</msg>
<status status="PASS" starttime="20210712 10:17:11.509" endtime="20210712 10:17:11.510"/>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<arg>${bucket_name}</arg>
<arg>${random}-bucket-for-cancel</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<msg timestamp="20210712 10:17:11.512" level="INFO">${bucket_name} = 67926-bucket-for-cancel</msg>
<status status="PASS" starttime="20210712 10:17:11.510" endtime="20210712 10:17:11.512"/>
</kw>
<status status="PASS" starttime="20210712 10:17:11.507" endtime="20210712 10:17:11.512"/>
</kw>
<test id="s1-s1-t1" name="Cancel Ozone Manager Prepare">
<kw name="Run Keyword If" library="BuiltIn" type="SETUP">
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" starttime="20210712 10:17:11.513" endtime="20210712 10:17:11.514"/>
</kw>
<kw name="Execute" library="os">
<var>${result}</var>
<arg>ozone admin om cancelprepare -id=omservice</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210712 10:17:11.519" level="INFO">Running command 'ozone admin om cancelprepare -id=omservice 2&gt;&amp;1'.</msg>
<msg timestamp="20210712 10:17:14.273" level="INFO">${rc} = 0</msg>
<msg timestamp="20210712 10:17:14.273" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
Cancel prepare succeeded, cluster can now accept write requests.</msg>
<status status="PASS" starttime="20210712 10:17:11.516" endtime="20210712 10:17:14.273"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210712 10:17:14.274" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
Cancel prepare succeeded, cluster can now accept write requests.</msg>
<status status="PASS" starttime="20210712 10:17:14.273" endtime="20210712 10:17:14.274"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210712 10:17:14.275" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210712 10:17:14.274" endtime="20210712 10:17:14.275"/>
</kw>
<status status="PASS" starttime="20210712 10:17:11.515" endtime="20210712 10:17:14.275"/>
</kw>
<msg timestamp="20210712 10:17:14.275" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210712 10:17:11.515" endtime="20210712 10:17:14.276"/>
</kw>
<msg timestamp="20210712 10:17:14.276" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
Cancel prepare succeeded, cluster can now accept write requests.</msg>
<status status="PASS" starttime="20210712 10:17:11.514" endtime="20210712 10:17:14.276"/>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<arg>3min</arg>
<arg>5sec</arg>
<arg>Should contain</arg>
<arg>${result}</arg>
<arg>Cancel prepare succeeded</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<kw name="Should Contain" library="BuiltIn">
<arg>${result}</arg>
<arg>Cancel prepare succeeded</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20210712 10:17:14.277" endtime="20210712 10:17:14.277"/>
</kw>
<status status="PASS" starttime="20210712 10:17:14.276" endtime="20210712 10:17:14.277"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20210712 10:17:11.512" endtime="20210712 10:17:14.277"/>
</test>
<test id="s1-s1-t2" name="Test write operations">
<kw name="Run Keyword If" library="BuiltIn" type="SETUP">
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" starttime="20210712 10:17:14.279" endtime="20210712 10:17:14.280"/>
</kw>
<kw name="Execute" library="os">
<arg>ozone sh volume create /${volume_name}</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210712 10:17:14.285" level="INFO">Running command 'ozone sh volume create /67926-volume-for-cancel 2&gt;&amp;1'.</msg>
<msg timestamp="20210712 10:17:16.732" level="INFO">${rc} = 0</msg>
<msg timestamp="20210712 10:17:16.732" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210712 10:17:14.282" endtime="20210712 10:17:16.732"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210712 10:17:16.733" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210712 10:17:16.732" endtime="20210712 10:17:16.733"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210712 10:17:16.734" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210712 10:17:16.733" endtime="20210712 10:17:16.734"/>
</kw>
<status status="PASS" starttime="20210712 10:17:14.282" endtime="20210712 10:17:16.734"/>
</kw>
<msg timestamp="20210712 10:17:16.734" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210712 10:17:14.280" endtime="20210712 10:17:16.734"/>
</kw>
<status status="PASS" starttime="20210712 10:17:14.280" endtime="20210712 10:17:16.735"/>
</kw>
<kw name="Execute" library="os">
<arg>ozone sh bucket create /${volume_name}/${bucket_name}</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210712 10:17:16.738" level="INFO">Running command 'ozone sh bucket create /67926-volume-for-cancel/67926-bucket-for-cancel 2&gt;&amp;1'.</msg>
<msg timestamp="20210712 10:17:19.337" level="INFO">${rc} = 0</msg>
<msg timestamp="20210712 10:17:19.337" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210712 10:17:16.736" endtime="20210712 10:17:19.337"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210712 10:17:19.338" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210712 10:17:19.338" endtime="20210712 10:17:19.339"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210712 10:17:19.339" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210712 10:17:19.339" endtime="20210712 10:17:19.339"/>
</kw>
<status status="PASS" starttime="20210712 10:17:16.736" endtime="20210712 10:17:19.340"/>
</kw>
<msg timestamp="20210712 10:17:19.340" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210712 10:17:16.735" endtime="20210712 10:17:19.340"/>
</kw>
<status status="PASS" starttime="20210712 10:17:16.735" endtime="20210712 10:17:19.340"/>
</kw>
<kw name="Execute" library="os">
<var>${result}</var>
<arg>ozone sh key put /${volume_name}/${bucket_name}/cancel-key /opt/hadoop/NOTICE.txt</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210712 10:17:19.344" level="INFO">Running command 'ozone sh key put /67926-volume-for-cancel/67926-bucket-for-cancel/cancel-key /opt/hadoop/NOTICE.txt 2&gt;&amp;1'.</msg>
<msg timestamp="20210712 10:17:23.646" level="INFO">${rc} = 0</msg>
<msg timestamp="20210712 10:17:23.646" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210712 10:17:19.342" endtime="20210712 10:17:23.647"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210712 10:17:23.648" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210712 10:17:23.647" endtime="20210712 10:17:23.648"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210712 10:17:23.648" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210712 10:17:23.648" endtime="20210712 10:17:23.648"/>
</kw>
<status status="PASS" starttime="20210712 10:17:19.341" endtime="20210712 10:17:23.649"/>
</kw>
<msg timestamp="20210712 10:17:23.649" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210712 10:17:19.341" endtime="20210712 10:17:23.649"/>
</kw>
<msg timestamp="20210712 10:17:23.649" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210712 10:17:19.340" endtime="20210712 10:17:23.649"/>
</kw>
<kw name="Execute" library="os">
<var>${result}</var>
<arg>ozone sh key info /${volume_name}/${bucket_name}/cancel-key</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210712 10:17:23.653" level="INFO">Running command 'ozone sh key info /67926-volume-for-cancel/67926-bucket-for-cancel/cancel-key 2&gt;&amp;1'.</msg>
<msg timestamp="20210712 10:17:26.849" level="INFO">${rc} = 0</msg>
<msg timestamp="20210712 10:17:26.849" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "volumeName" : "67926-volume-for-cancel",
  "bucketName" : "67926-buck...</msg>
<status status="PASS" starttime="20210712 10:17:23.652" endtime="20210712 10:17:26.849"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210712 10:17:26.851" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "volumeName" : "67926-volume-for-cancel",
  "bucketName" : "67926-bucket-for-cancel",
  "name" : "cancel-key",
  "dataSize" : 17526,
  "creationTime" : "2021-07-12T10:17:21.662Z",
  "modificationTime" : "2021-07-12T10:17:23.274Z",
  "ozoneKeyLocations" : [ {
    "containerID" : 1,
    "localID" : 107544261427200103,
    "length" : 17526,
    "offset" : 0,
    "keyOffset" : 0
  } ],
  "metadata" : { },
  "fileEncryptionInfo" : null,
  "replicationFactor" : 1,
  "replicationType" : "RATIS"
}</msg>
<status status="PASS" starttime="20210712 10:17:26.850" endtime="20210712 10:17:26.851"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210712 10:17:26.852" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210712 10:17:26.851" endtime="20210712 10:17:26.852"/>
</kw>
<status status="PASS" starttime="20210712 10:17:23.651" endtime="20210712 10:17:26.853"/>
</kw>
<msg timestamp="20210712 10:17:26.853" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210712 10:17:23.651" endtime="20210712 10:17:26.853"/>
</kw>
<msg timestamp="20210712 10:17:26.853" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "volumeName" : "67926-volume-for-cancel",
  "bucketName" : "67926-buck...</msg>
<status status="PASS" starttime="20210712 10:17:23.649" endtime="20210712 10:17:26.853"/>
</kw>
<kw name="Should Contain" library="BuiltIn">
<arg>${result}</arg>
<arg>\"name\" : \"cancel-key\"</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20210712 10:17:26.853" endtime="20210712 10:17:26.854"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20210712 10:17:14.279" endtime="20210712 10:17:26.854"/>
</test>
<doc>Smoke test for ozone manager cancel prepare</doc>
<status status="PASS" starttime="20210712 10:17:11.447" endtime="20210712 10:17:26.856"/>
</suite>
<suite id="s1-s2" name="Om-Prepare" source="/opt/hadoop/smoketest/omha/om-prepare.robot">
<kw name="Create Specific OM data for prepare" type="SETUP">
<kw name="Execute" library="os">
<arg>ozone freon rk --replication-type=RATIS --num-of-volumes 1 --num-of-buckets 1 --num-of-keys 100</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210712 10:17:31.463" level="INFO">Running command 'ozone freon rk --replication-type=RATIS --num-of-volumes 1 --num-of-buckets 1 --num-of-keys 100 2&gt;&amp;1'.</msg>
<msg timestamp="20210712 10:17:44.211" level="INFO">${rc} = 0</msg>
<msg timestamp="20210712 10:17:44.211" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
2021-07-12 10:17:32,740 [main] INFO impl.MetricsConfig: Loaded properties ...</msg>
<status status="PASS" starttime="20210712 10:17:31.460" endtime="20210712 10:17:44.211"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210712 10:17:44.212" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
2021-07-12 10:17:32,740 [main] INFO impl.MetricsConfig: Loaded properties from hadoop-metrics2.properties
2021-07-12 10:17:32,856 [main] INFO impl.MetricsSystemImpl: Scheduled Metric snapshot period at 10 second(s).
2021-07-12 10:17:32,856 [main] INFO impl.MetricsSystemImpl: ozone-freon metrics system started
2021-07-12 10:17:33,803 [main] INFO freon.RandomKeyGenerator: Number of Threads: 10
2021-07-12 10:17:33,805 [main] INFO freon.RandomKeyGenerator: Number of Volumes: 1.
2021-07-12 10:17:33,805 [main] INFO freon.RandomKeyGenerator: Number of Buckets per Volume: 1.
2021-07-12 10:17:33,805 [main] INFO freon.RandomKeyGenerator: Number of Keys per Bucket: 100.
2021-07-12 10:17:33,806 [main] INFO freon.RandomKeyGenerator: Key size: 10240 bytes
2021-07-12 10:17:33,808 [main] INFO freon.RandomKeyGenerator: Buffer size: 4096 bytes
2021-07-12 10:17:33,808 [main] INFO freon.RandomKeyGenerator: validateWrites : false
2021-07-12 10:17:33,808 [main] INFO freon.RandomKeyGenerator: cleanObjects : false
2021-07-12 10:17:33,831 [main] INFO freon.RandomKeyGenerator: Starting progress bar Thread.
2021-07-12 10:17:33,843 [Thread-5] INFO freon.ProgressBar: Progress: 0.00 % (0 out of 100)
2021-07-12 10:17:33,868 [pool-2-thread-1] INFO rpc.RpcClient: Creating Volume: vol-0-50365, with hadoop as owner and space quota set to -1 bytes, counts quota set to -1
2021-07-12 10:17:33,926 [pool-2-thread-3] INFO rpc.RpcClient: Creating Bucket: vol-0-50365/bucket-0-67573, with Versioning false and Storage Type set to DISK and Encryption set to false 
2021-07-12 10:17:34,836 [pool-2-thread-3] WARN impl.MetricsSystemImpl: ozone-freon metrics system already initialized!
2021-07-12 10:17:34,851 [Thread-5] INFO freon.ProgressBar: Progress: 0.00 % (0 out of 100)
2021-07-12 10:17:35,112 [pool-2-thread-8] INFO metrics.MetricRegistries: Loaded MetricRegistries class org.apache.ratis.metrics.impl.MetricRegistriesImpl
2021-07-12 10:17:35,113 [pool-2-thread-4] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.client_message_metrics.client-1608A1268039-&gt;339aab0c-99a4-4fd6-85e0-49a7466cd956
2021-07-12 10:17:35,113 [pool-2-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.client_message_metrics.client-0D105EF3EF22-&gt;93a7dae8-0997-49cf-8fc6-81dbe613256c
2021-07-12 10:17:35,115 [pool-2-thread-1] WARN impl.MetricRegistriesImpl: First MetricRegistry has been created without registering reporters. You may need to call MetricRegistries.global().addReporterRegistration(...) before.
2021-07-12 10:17:35,120 [pool-2-thread-4] WARN impl.MetricRegistriesImpl: First MetricRegistry has been created without registering reporters. You may need to call MetricRegistries.global().addReporterRegistration(...) before.
2021-07-12 10:17:35,123 [pool-2-thread-8] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.client_message_metrics.client-494BEED658ED-&gt;49cf3445-cefc-474e-b13a-532e4f0f29f1
2021-07-12 10:17:35,123 [pool-2-thread-8] WARN impl.MetricRegistriesImpl: First MetricRegistry has been created without registering reporters. You may need to call MetricRegistries.global().addReporterRegistration(...) before.
2021-07-12 10:17:35,852 [Thread-5] INFO freon.ProgressBar: Progress: 10.00 % (10 out of 100)
2021-07-12 10:17:36,853 [Thread-5] INFO freon.ProgressBar: Progress: 26.00 % (26 out of 100)
2021-07-12 10:17:37,860 [Thread-5] INFO freon.ProgressBar: Progress: 52.00 % (52 out of 100)
2021-07-12 10:17:38,890 [Thread-5] INFO freon.ProgressBar: Progress: 73.00 % (73 out of 100)
2021-07-12 10:17:39,890 [Thread-5] INFO freon.ProgressBar: Progress: 100.00 % (100 out of 100)

***************************************************
Status: Success
Git Base Revision: a3b9c37a397ad4188041dd80621bdeefc46885f2
Number of Volumes created: 1
Number of Buckets created: 1
Number of Keys added: 100
Ratis replication factor: ONE
Ratis replication type: RATIS
Average Time spent in volume creation: 00:00:00,006
Average Time spent in bucket creation: 00:00:00,002
Average Time spent in key creation: 00:00:01,405
Average Time spent in key write: 00:00:00,921
Total bytes written: 1024000
Total Execution time: 00:00:10,802
***************************************************</msg>
<status status="PASS" starttime="20210712 10:17:44.212" endtime="20210712 10:17:44.212"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210712 10:17:44.213" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210712 10:17:44.212" endtime="20210712 10:17:44.213"/>
</kw>
<status status="PASS" starttime="20210712 10:17:31.459" endtime="20210712 10:17:44.213"/>
</kw>
<msg timestamp="20210712 10:17:44.213" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210712 10:17:31.459" endtime="20210712 10:17:44.214"/>
</kw>
<status status="PASS" starttime="20210712 10:17:31.458" endtime="20210712 10:17:44.214"/>
</kw>
<kw name="Generate Random String" library="String">
<var>${random}</var>
<arg>5</arg>
<arg>[NUMBERS]</arg>
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<msg timestamp="20210712 10:17:44.215" level="INFO">${random} = 69216</msg>
<status status="PASS" starttime="20210712 10:17:44.214" endtime="20210712 10:17:44.215"/>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<arg>${volume_name}</arg>
<arg>${random}-volume-for-prepare</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<msg timestamp="20210712 10:17:44.216" level="INFO">${volume_name} = 69216-volume-for-prepare</msg>
<status status="PASS" starttime="20210712 10:17:44.215" endtime="20210712 10:17:44.216"/>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<arg>${bucket_name}</arg>
<arg>${random}-bucket-for-prepare</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<msg timestamp="20210712 10:17:44.217" level="INFO">${bucket_name} = 69216-bucket-for-prepare</msg>
<status status="PASS" starttime="20210712 10:17:44.216" endtime="20210712 10:17:44.218"/>
</kw>
<kw name="Execute" library="os">
<arg>ozone sh volume create /${volume_name}</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210712 10:17:44.221" level="INFO">Running command 'ozone sh volume create /69216-volume-for-prepare 2&gt;&amp;1'.</msg>
<msg timestamp="20210712 10:17:46.834" level="INFO">${rc} = 0</msg>
<msg timestamp="20210712 10:17:46.834" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210712 10:17:44.219" endtime="20210712 10:17:46.834"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210712 10:17:46.835" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210712 10:17:46.835" endtime="20210712 10:17:46.835"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210712 10:17:46.837" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210712 10:17:46.836" endtime="20210712 10:17:46.838"/>
</kw>
<status status="PASS" starttime="20210712 10:17:44.219" endtime="20210712 10:17:46.838"/>
</kw>
<msg timestamp="20210712 10:17:46.838" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210712 10:17:44.218" endtime="20210712 10:17:46.838"/>
</kw>
<status status="PASS" starttime="20210712 10:17:44.218" endtime="20210712 10:17:46.838"/>
</kw>
<kw name="Execute" library="os">
<arg>ozone sh bucket create /${volume_name}/${bucket_name}</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210712 10:17:46.841" level="INFO">Running command 'ozone sh bucket create /69216-volume-for-prepare/69216-bucket-for-prepare 2&gt;&amp;1'.</msg>
<msg timestamp="20210712 10:17:49.341" level="INFO">${rc} = 0</msg>
<msg timestamp="20210712 10:17:49.341" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210712 10:17:46.840" endtime="20210712 10:17:49.341"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210712 10:17:49.343" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210712 10:17:49.342" endtime="20210712 10:17:49.343"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210712 10:17:49.343" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210712 10:17:49.343" endtime="20210712 10:17:49.343"/>
</kw>
<status status="PASS" starttime="20210712 10:17:46.839" endtime="20210712 10:17:49.344"/>
</kw>
<msg timestamp="20210712 10:17:49.344" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210712 10:17:46.839" endtime="20210712 10:17:49.344"/>
</kw>
<status status="PASS" starttime="20210712 10:17:46.838" endtime="20210712 10:17:49.344"/>
</kw>
<kw name="Execute" library="os">
<arg>ozone sh key put /${volume_name}/${bucket_name}/prepare-key /opt/hadoop/NOTICE.txt</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210712 10:17:49.347" level="INFO">Running command 'ozone sh key put /69216-volume-for-prepare/69216-bucket-for-prepare/prepare-key /opt/hadoop/NOTICE.txt 2&gt;&amp;1'.</msg>
<msg timestamp="20210712 10:17:53.858" level="INFO">${rc} = 0</msg>
<msg timestamp="20210712 10:17:53.859" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210712 10:17:49.346" endtime="20210712 10:17:53.859"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210712 10:17:53.860" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210712 10:17:53.859" endtime="20210712 10:17:53.860"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210712 10:17:53.860" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210712 10:17:53.860" endtime="20210712 10:17:53.860"/>
</kw>
<status status="PASS" starttime="20210712 10:17:49.345" endtime="20210712 10:17:53.861"/>
</kw>
<msg timestamp="20210712 10:17:53.861" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210712 10:17:49.345" endtime="20210712 10:17:53.861"/>
</kw>
<status status="PASS" starttime="20210712 10:17:49.344" endtime="20210712 10:17:53.861"/>
</kw>
<status status="PASS" starttime="20210712 10:17:31.457" endtime="20210712 10:17:53.862"/>
</kw>
<test id="s1-s2-t1" name="Prepare Ozone Manager">
<kw name="Run Keyword If" library="BuiltIn" type="SETUP">
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" starttime="20210712 10:17:53.863" endtime="20210712 10:17:53.864"/>
</kw>
<kw name="Execute" library="os">
<var>${result}</var>
<arg>ozone admin om prepare -id=omservice</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210712 10:17:53.870" level="INFO">Running command 'ozone admin om prepare -id=omservice 2&gt;&amp;1'.</msg>
<msg timestamp="20210712 10:18:01.341" level="INFO">${rc} = 0</msg>
<msg timestamp="20210712 10:18:01.342" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
Ozone Manager Prepare Request successfully returned with Transaction Id : ...</msg>
<status status="PASS" starttime="20210712 10:17:53.866" endtime="20210712 10:18:01.342"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210712 10:18:01.343" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
Ozone Manager Prepare Request successfully returned with Transaction Id : [699].

Checking individual OM instances for prepare request completion...
OM : [om1], Prepare Status : [PREPARE_COMPLETED], Current Transaction Id : [699]
OM : [om3], Prepare Status : [PREPARE_COMPLETED], Current Transaction Id : [699]
OM : [om2], Prepare Status : [PREPARE_COMPLETED], Current Transaction Id : [699]

OM Preparation successful! 
All OMs are prepared
No new write requests will be allowed until preparation is cancelled or upgrade/downgrade is done.</msg>
<status status="PASS" starttime="20210712 10:18:01.342" endtime="20210712 10:18:01.343"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210712 10:18:01.344" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210712 10:18:01.343" endtime="20210712 10:18:01.344"/>
</kw>
<status status="PASS" starttime="20210712 10:17:53.865" endtime="20210712 10:18:01.344"/>
</kw>
<msg timestamp="20210712 10:18:01.344" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210712 10:17:53.865" endtime="20210712 10:18:01.344"/>
</kw>
<msg timestamp="20210712 10:18:01.345" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
Ozone Manager Prepare Request successfully returned with Transaction Id : ...</msg>
<status status="PASS" starttime="20210712 10:17:53.864" endtime="20210712 10:18:01.345"/>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<arg>3min</arg>
<arg>10sec</arg>
<arg>Should contain</arg>
<arg>${result}</arg>
<arg>OM Preparation successful!</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<kw name="Should Contain" library="BuiltIn">
<arg>${result}</arg>
<arg>OM Preparation successful!</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20210712 10:18:01.345" endtime="20210712 10:18:01.346"/>
</kw>
<status status="PASS" starttime="20210712 10:18:01.345" endtime="20210712 10:18:01.346"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20210712 10:17:53.862" endtime="20210712 10:18:01.346"/>
</test>
<test id="s1-s2-t2" name="Checks if the expected data is present in OM">
<kw name="Run Keyword If" library="BuiltIn" type="SETUP">
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" starttime="20210712 10:18:01.348" endtime="20210712 10:18:01.348"/>
</kw>
<kw name="Execute" library="os">
<var>${result}</var>
<arg>ozone sh key info /${volume_name}/${bucket_name}/prepare-key</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210712 10:18:01.352" level="INFO">Running command 'ozone sh key info /69216-volume-for-prepare/69216-bucket-for-prepare/prepare-key 2&gt;&amp;1'.</msg>
<msg timestamp="20210712 10:18:04.152" level="INFO">${rc} = 0</msg>
<msg timestamp="20210712 10:18:04.152" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "volumeName" : "69216-volume-for-prepare",
  "bucketName" : "69216-buc...</msg>
<status status="PASS" starttime="20210712 10:18:01.350" endtime="20210712 10:18:04.152"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210712 10:18:04.153" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "volumeName" : "69216-volume-for-prepare",
  "bucketName" : "69216-bucket-for-prepare",
  "name" : "prepare-key",
  "dataSize" : 17526,
  "creationTime" : "2021-07-12T10:17:51.872Z",
  "modificationTime" : "2021-07-12T10:17:53.443Z",
  "ozoneKeyLocations" : [ {
    "containerID" : 3,
    "localID" : 107544261427200204,
    "length" : 17526,
    "offset" : 0,
    "keyOffset" : 0
  } ],
  "metadata" : { },
  "fileEncryptionInfo" : null,
  "replicationFactor" : 1,
  "replicationType" : "RATIS"
}</msg>
<status status="PASS" starttime="20210712 10:18:04.153" endtime="20210712 10:18:04.154"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210712 10:18:04.154" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210712 10:18:04.154" endtime="20210712 10:18:04.154"/>
</kw>
<status status="PASS" starttime="20210712 10:18:01.349" endtime="20210712 10:18:04.155"/>
</kw>
<msg timestamp="20210712 10:18:04.155" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210712 10:18:01.349" endtime="20210712 10:18:04.155"/>
</kw>
<msg timestamp="20210712 10:18:04.155" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "volumeName" : "69216-volume-for-prepare",
  "bucketName" : "69216-buc...</msg>
<status status="PASS" starttime="20210712 10:18:01.348" endtime="20210712 10:18:04.155"/>
</kw>
<kw name="Should Contain" library="BuiltIn">
<arg>${result}</arg>
<arg>\"name\" : \"prepare-key\"</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20210712 10:18:04.155" endtime="20210712 10:18:04.156"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20210712 10:18:01.347" endtime="20210712 10:18:04.156"/>
</test>
<test id="s1-s2-t3" name="Test write operation fails">
<kw name="Run Keyword If" library="BuiltIn" type="SETUP">
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" starttime="20210712 10:18:04.159" endtime="20210712 10:18:04.159"/>
</kw>
<kw name="Execute and checkrc" library="os">
<var>${result}</var>
<arg>ozone sh key put /${volume_name}/${bucket_name}/prepare-key2 /opt/hadoop/NOTICE.txt</arg>
<arg>255</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210712 10:18:04.162" level="INFO">Running command 'ozone sh key put /69216-volume-for-prepare/69216-bucket-for-prepare/prepare-key2 /opt/hadoop/NOTICE.txt 2&gt;&amp;1'.</msg>
<msg timestamp="20210712 10:18:06.745" level="INFO">${rc} = 255</msg>
<msg timestamp="20210712 10:18:06.745" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
NOT_SUPPORTED_OPERATION_WHEN_PREPARED Cannot apply write request CreateKey...</msg>
<status status="PASS" starttime="20210712 10:18:04.160" endtime="20210712 10:18:06.745"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210712 10:18:06.747" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
NOT_SUPPORTED_OPERATION_WHEN_PREPARED Cannot apply write request CreateKey when OM is in prepare mode.</msg>
<status status="PASS" starttime="20210712 10:18:06.746" endtime="20210712 10:18:06.747"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210712 10:18:06.747" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210712 10:18:06.747" endtime="20210712 10:18:06.747"/>
</kw>
<msg timestamp="20210712 10:18:06.748" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
NOT_SUPPORTED_OPERATION_WHEN_PREPARED Cannot apply write request CreateKey...</msg>
<status status="PASS" starttime="20210712 10:18:04.159" endtime="20210712 10:18:06.748"/>
</kw>
<kw name="Should Contain" library="BuiltIn">
<arg>${result}</arg>
<arg>OM is in prepare mode</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20210712 10:18:06.748" endtime="20210712 10:18:06.748"/>
</kw>
<kw name="Execute and checkrc" library="os">
<arg>ozone sh key info /${volume_name}/${bucket_name}/prepare-key2</arg>
<arg>255</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210712 10:18:06.751" level="INFO">Running command 'ozone sh key info /69216-volume-for-prepare/69216-bucket-for-prepare/prepare-key2 2&gt;&amp;1'.</msg>
<msg timestamp="20210712 10:18:09.213" level="INFO">${rc} = 255</msg>
<msg timestamp="20210712 10:18:09.213" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
KEY_NOT_FOUND Key:prepare-key2 not found</msg>
<status status="PASS" starttime="20210712 10:18:06.749" endtime="20210712 10:18:09.213"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210712 10:18:09.214" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
KEY_NOT_FOUND Key:prepare-key2 not found</msg>
<status status="PASS" starttime="20210712 10:18:09.213" endtime="20210712 10:18:09.214"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210712 10:18:09.215" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210712 10:18:09.215" endtime="20210712 10:18:09.215"/>
</kw>
<status status="PASS" starttime="20210712 10:18:06.748" endtime="20210712 10:18:09.216"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20210712 10:18:04.157" endtime="20210712 10:18:09.216"/>
</test>
<doc>Smoke test to test preparing OMs in an OM HA cluster.</doc>
<status status="PASS" starttime="20210712 10:17:31.397" endtime="20210712 10:18:09.218"/>
</suite>
<suite id="s1-s3" name="Om-Prepared" source="/opt/hadoop/smoketest/omha/om-prepared.robot">
<test id="s1-s3-t1" name="Test create volume fails">
<kw name="Run Keyword If" library="BuiltIn" type="SETUP">
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" starttime="20210712 10:18:13.556" endtime="20210712 10:18:13.556"/>
</kw>
<kw name="Generate Random String" library="String">
<var>${random}</var>
<arg>5</arg>
<arg>[NUMBERS]</arg>
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<msg timestamp="20210712 10:18:13.557" level="INFO">${random} = 20982</msg>
<status status="PASS" starttime="20210712 10:18:13.557" endtime="20210712 10:18:13.557"/>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<arg>${volume_name}</arg>
<arg>${random}-volume-for-prepare</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<msg timestamp="20210712 10:18:13.558" level="INFO">${volume_name} = 20982-volume-for-prepare</msg>
<status status="PASS" starttime="20210712 10:18:13.557" endtime="20210712 10:18:13.558"/>
</kw>
<kw name="Execute and checkrc" library="os">
<var>${result}</var>
<arg>ozone sh volume create /${volume_name}</arg>
<arg>255</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210712 10:18:13.562" level="INFO">Running command 'ozone sh volume create /20982-volume-for-prepare 2&gt;&amp;1'.</msg>
<msg timestamp="20210712 10:18:15.992" level="INFO">${rc} = 255</msg>
<msg timestamp="20210712 10:18:15.992" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
NOT_SUPPORTED_OPERATION_WHEN_PREPARED Cannot apply write request CreateVol...</msg>
<status status="PASS" starttime="20210712 10:18:13.559" endtime="20210712 10:18:15.992"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210712 10:18:15.993" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
NOT_SUPPORTED_OPERATION_WHEN_PREPARED Cannot apply write request CreateVolume when OM is in prepare mode.</msg>
<status status="PASS" starttime="20210712 10:18:15.992" endtime="20210712 10:18:15.993"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210712 10:18:15.994" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210712 10:18:15.993" endtime="20210712 10:18:15.994"/>
</kw>
<msg timestamp="20210712 10:18:15.994" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
NOT_SUPPORTED_OPERATION_WHEN_PREPARED Cannot apply write request CreateVol...</msg>
<status status="PASS" starttime="20210712 10:18:13.559" endtime="20210712 10:18:15.995"/>
</kw>
<kw name="Should Contain" library="BuiltIn">
<arg>${result}</arg>
<arg>OM is in prepare mode</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20210712 10:18:15.995" endtime="20210712 10:18:15.995"/>
</kw>
<kw name="Execute and checkrc" library="os">
<var>${result}</var>
<arg>ozone sh volume info /${volume_name}</arg>
<arg>255</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210712 10:18:15.998" level="INFO">Running command 'ozone sh volume info /20982-volume-for-prepare 2&gt;&amp;1'.</msg>
<msg timestamp="20210712 10:18:18.457" level="INFO">${rc} = 255</msg>
<msg timestamp="20210712 10:18:18.457" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
VOLUME_NOT_FOUND Volume 20982-volume-for-prepare is not found</msg>
<status status="PASS" starttime="20210712 10:18:15.996" endtime="20210712 10:18:18.457"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210712 10:18:18.458" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
VOLUME_NOT_FOUND Volume 20982-volume-for-prepare is not found</msg>
<status status="PASS" starttime="20210712 10:18:18.457" endtime="20210712 10:18:18.458"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210712 10:18:18.459" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210712 10:18:18.458" endtime="20210712 10:18:18.459"/>
</kw>
<msg timestamp="20210712 10:18:18.459" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
VOLUME_NOT_FOUND Volume 20982-volume-for-prepare is not found</msg>
<status status="PASS" starttime="20210712 10:18:15.995" endtime="20210712 10:18:18.459"/>
</kw>
<kw name="Should Contain" library="BuiltIn">
<arg>${result}</arg>
<arg>VOLUME_NOT_FOUND</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20210712 10:18:18.460" endtime="20210712 10:18:18.460"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20210712 10:18:13.555" endtime="20210712 10:18:18.460"/>
</test>
<test id="s1-s3-t2" name="Test list volumes succeeds">
<kw name="Run Keyword If" library="BuiltIn" type="SETUP">
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" starttime="20210712 10:18:18.462" endtime="20210712 10:18:18.462"/>
</kw>
<kw name="Execute" library="os">
<var>${result}</var>
<arg>ozone sh volume list</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210712 10:18:18.467" level="INFO">Running command 'ozone sh volume list 2&gt;&amp;1'.</msg>
<msg timestamp="20210712 10:18:21.259" level="INFO">${rc} = 0</msg>
<msg timestamp="20210712 10:18:21.259" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "metadata" : { },
  "name" : "67926-volume-for-cancel",
  "admin" : "h...</msg>
<status status="PASS" starttime="20210712 10:18:18.464" endtime="20210712 10:18:21.259"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210712 10:18:21.260" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "metadata" : { },
  "name" : "67926-volume-for-cancel",
  "admin" : "hadoop",
  "owner" : "hadoop",
  "quotaInBytes" : -1,
  "quotaInNamespace" : -1,
  "usedNamespace" : 1,
  "creationTime" : "2021-07-12T10:17:16.685Z",
  "modificationTime" : "2021-07-12T10:17:16.685Z",
  "acls" : [ {
    "type" : "USER",
    "name" : "hadoop",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  }, {
    "type" : "GROUP",
    "name" : "users",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  } ]
}
{
  "metadata" : { },
  "name" : "s3v",
  "admin" : "hadoop",
  "owner" : "hadoop",
  "quotaInBytes" : -1,
  "quotaInNamespace" : -1,
  "usedNamespace" : 0,
  "creationTime" : "2021-07-12T10:16:07.248Z",
  "modificationTime" : "2021-07-12T10:16:07.248Z",
  "acls" : [ {
    "type" : "USER",
    "name" : "hadoop",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  }, {
    "type" : "GROUP",
    "name" : "users",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  } ]
}
{
  "metadata" : { },
  "name" : "98288-volume-for-prepare",
  "admin" : "hadoop",
  "owner" : "hadoop",
  "quotaInBytes" : -1,
  "quotaInNamespace" : -1,
  "usedNamespace" : 1,
  "creationTime" : "2021-07-12T10:16:44.462Z",
  "modificationTime" : "2021-07-12T10:16:44.462Z",
  "acls" : [ {
    "type" : "USER",
    "name" : "hadoop",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  }, {
    "type" : "GROUP",
    "name" : "users",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  } ]
}
{
  "metadata" : { },
  "name" : "vol-0-66509",
  "admin" : "hadoop",
  "owner" : "hadoop",
  "quotaInBytes" : -1,
  "quotaInNamespace" : -1,
  "usedNamespace" : 1,
  "creationTime" : "2021-07-12T10:16:31.419Z",
  "modificationTime" : "2021-07-12T10:16:31.419Z",
  "acls" : [ {
    "type" : "USER",
    "name" : "hadoop",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  }, {
    "type" : "GROUP",
    "name" : "users",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  } ]
}
{
  "metadata" : { },
  "name" : "vol-0-50365",
  "admin" : "hadoop",
  "owner" : "hadoop",
  "quotaInBytes" : -1,
  "quotaInNamespace" : -1,
  "usedNamespace" : 1,
  "creationTime" : "2021-07-12T10:17:33.878Z",
  "modificationTime" : "2021-07-12T10:17:33.878Z",
  "acls" : [ {
    "type" : "USER",
    "name" : "hadoop",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  }, {
    "type" : "GROUP",
    "name" : "users",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  } ]
}
{
  "metadata" : { },
  "name" : "69216-volume-for-prepare",
  "admin" : "hadoop",
  "owner" : "hadoop",
  "quotaInBytes" : -1,
  "quotaInNamespace" : -1,
  "usedNamespace" : 1,
  "creationTime" : "2021-07-12T10:17:46.789Z",
  "modificationTime" : "2021-07-12T10:17:46.789Z",
  "acls" : [ {
    "type" : "USER",
    "name" : "hadoop",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  }, {
    "type" : "GROUP",
    "name" : "users",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  } ]
}</msg>
<status status="PASS" starttime="20210712 10:18:21.260" endtime="20210712 10:18:21.260"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210712 10:18:21.261" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210712 10:18:21.261" endtime="20210712 10:18:21.261"/>
</kw>
<status status="PASS" starttime="20210712 10:18:18.463" endtime="20210712 10:18:21.261"/>
</kw>
<msg timestamp="20210712 10:18:21.262" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210712 10:18:18.463" endtime="20210712 10:18:21.262"/>
</kw>
<msg timestamp="20210712 10:18:21.262" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "metadata" : { },
  "name" : "67926-volume-for-cancel",
  "admin" : "h...</msg>
<status status="PASS" starttime="20210712 10:18:18.463" endtime="20210712 10:18:21.262"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20210712 10:18:18.461" endtime="20210712 10:18:21.262"/>
</test>
<doc>Smoke test to test that OMs are prepared in an OM HA cluster.</doc>
<status status="PASS" starttime="20210712 10:18:13.498" endtime="20210712 10:18:21.263"/>
</suite>
<suite id="s1-s4" name="Om-Prepared" source="/opt/hadoop/smoketest/omha/om-prepared.robot">
<test id="s1-s4-t1" name="Test create volume fails">
<kw name="Run Keyword If" library="BuiltIn" type="SETUP">
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" starttime="20210712 10:19:30.402" endtime="20210712 10:19:30.404"/>
</kw>
<kw name="Generate Random String" library="String">
<var>${random}</var>
<arg>5</arg>
<arg>[NUMBERS]</arg>
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<msg timestamp="20210712 10:19:30.405" level="INFO">${random} = 00930</msg>
<status status="PASS" starttime="20210712 10:19:30.404" endtime="20210712 10:19:30.405"/>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<arg>${volume_name}</arg>
<arg>${random}-volume-for-prepare</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<msg timestamp="20210712 10:19:30.407" level="INFO">${volume_name} = 00930-volume-for-prepare</msg>
<status status="PASS" starttime="20210712 10:19:30.405" endtime="20210712 10:19:30.408"/>
</kw>
<kw name="Execute and checkrc" library="os">
<var>${result}</var>
<arg>ozone sh volume create /${volume_name}</arg>
<arg>255</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210712 10:19:30.417" level="INFO">Running command 'ozone sh volume create /00930-volume-for-prepare 2&gt;&amp;1'.</msg>
<msg timestamp="20210712 10:19:33.098" level="INFO">${rc} = 255</msg>
<msg timestamp="20210712 10:19:33.098" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
NOT_SUPPORTED_OPERATION_WHEN_PREPARED Cannot apply write request CreateVol...</msg>
<status status="PASS" starttime="20210712 10:19:30.409" endtime="20210712 10:19:33.098"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210712 10:19:33.099" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
NOT_SUPPORTED_OPERATION_WHEN_PREPARED Cannot apply write request CreateVolume when OM is in prepare mode.</msg>
<status status="PASS" starttime="20210712 10:19:33.098" endtime="20210712 10:19:33.099"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210712 10:19:33.100" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210712 10:19:33.100" endtime="20210712 10:19:33.100"/>
</kw>
<msg timestamp="20210712 10:19:33.101" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
NOT_SUPPORTED_OPERATION_WHEN_PREPARED Cannot apply write request CreateVol...</msg>
<status status="PASS" starttime="20210712 10:19:30.408" endtime="20210712 10:19:33.101"/>
</kw>
<kw name="Should Contain" library="BuiltIn">
<arg>${result}</arg>
<arg>OM is in prepare mode</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20210712 10:19:33.101" endtime="20210712 10:19:33.102"/>
</kw>
<kw name="Execute and checkrc" library="os">
<var>${result}</var>
<arg>ozone sh volume info /${volume_name}</arg>
<arg>255</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210712 10:19:33.105" level="INFO">Running command 'ozone sh volume info /00930-volume-for-prepare 2&gt;&amp;1'.</msg>
<msg timestamp="20210712 10:19:35.363" level="INFO">${rc} = 255</msg>
<msg timestamp="20210712 10:19:35.363" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
VOLUME_NOT_FOUND Volume 00930-volume-for-prepare is not found</msg>
<status status="PASS" starttime="20210712 10:19:33.103" endtime="20210712 10:19:35.363"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210712 10:19:35.364" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
VOLUME_NOT_FOUND Volume 00930-volume-for-prepare is not found</msg>
<status status="PASS" starttime="20210712 10:19:35.363" endtime="20210712 10:19:35.364"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210712 10:19:35.365" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210712 10:19:35.364" endtime="20210712 10:19:35.365"/>
</kw>
<msg timestamp="20210712 10:19:35.365" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
VOLUME_NOT_FOUND Volume 00930-volume-for-prepare is not found</msg>
<status status="PASS" starttime="20210712 10:19:33.102" endtime="20210712 10:19:35.365"/>
</kw>
<kw name="Should Contain" library="BuiltIn">
<arg>${result}</arg>
<arg>VOLUME_NOT_FOUND</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20210712 10:19:35.366" endtime="20210712 10:19:35.366"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20210712 10:19:30.401" endtime="20210712 10:19:35.366"/>
</test>
<test id="s1-s4-t2" name="Test list volumes succeeds">
<kw name="Run Keyword If" library="BuiltIn" type="SETUP">
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" starttime="20210712 10:19:35.368" endtime="20210712 10:19:35.369"/>
</kw>
<kw name="Execute" library="os">
<var>${result}</var>
<arg>ozone sh volume list</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210712 10:19:35.374" level="INFO">Running command 'ozone sh volume list 2&gt;&amp;1'.</msg>
<msg timestamp="20210712 10:19:38.085" level="INFO">${rc} = 0</msg>
<msg timestamp="20210712 10:19:38.085" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "metadata" : { },
  "name" : "67926-volume-for-cancel",
  "admin" : "h...</msg>
<status status="PASS" starttime="20210712 10:19:35.371" endtime="20210712 10:19:38.086"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210712 10:19:38.087" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "metadata" : { },
  "name" : "67926-volume-for-cancel",
  "admin" : "hadoop",
  "owner" : "hadoop",
  "quotaInBytes" : -1,
  "quotaInNamespace" : -1,
  "usedNamespace" : 1,
  "creationTime" : "2021-07-12T10:17:16.685Z",
  "modificationTime" : "2021-07-12T10:17:16.685Z",
  "acls" : [ {
    "type" : "USER",
    "name" : "hadoop",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  }, {
    "type" : "GROUP",
    "name" : "users",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  } ]
}
{
  "metadata" : { },
  "name" : "s3v",
  "admin" : "hadoop",
  "owner" : "hadoop",
  "quotaInBytes" : -1,
  "quotaInNamespace" : -1,
  "usedNamespace" : 0,
  "creationTime" : "2021-07-12T10:16:07.248Z",
  "modificationTime" : "2021-07-12T10:16:07.248Z",
  "acls" : [ {
    "type" : "USER",
    "name" : "hadoop",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  }, {
    "type" : "GROUP",
    "name" : "users",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  } ]
}
{
  "metadata" : { },
  "name" : "98288-volume-for-prepare",
  "admin" : "hadoop",
  "owner" : "hadoop",
  "quotaInBytes" : -1,
  "quotaInNamespace" : -1,
  "usedNamespace" : 1,
  "creationTime" : "2021-07-12T10:16:44.462Z",
  "modificationTime" : "2021-07-12T10:16:44.462Z",
  "acls" : [ {
    "type" : "USER",
    "name" : "hadoop",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  }, {
    "type" : "GROUP",
    "name" : "users",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  } ]
}
{
  "metadata" : { },
  "name" : "vol-0-66509",
  "admin" : "hadoop",
  "owner" : "hadoop",
  "quotaInBytes" : -1,
  "quotaInNamespace" : -1,
  "usedNamespace" : 1,
  "creationTime" : "2021-07-12T10:16:31.419Z",
  "modificationTime" : "2021-07-12T10:16:31.419Z",
  "acls" : [ {
    "type" : "USER",
    "name" : "hadoop",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  }, {
    "type" : "GROUP",
    "name" : "users",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  } ]
}
{
  "metadata" : { },
  "name" : "vol-0-50365",
  "admin" : "hadoop",
  "owner" : "hadoop",
  "quotaInBytes" : -1,
  "quotaInNamespace" : -1,
  "usedNamespace" : 1,
  "creationTime" : "2021-07-12T10:17:33.878Z",
  "modificationTime" : "2021-07-12T10:17:33.878Z",
  "acls" : [ {
    "type" : "USER",
    "name" : "hadoop",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  }, {
    "type" : "GROUP",
    "name" : "users",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  } ]
}
{
  "metadata" : { },
  "name" : "69216-volume-for-prepare",
  "admin" : "hadoop",
  "owner" : "hadoop",
  "quotaInBytes" : -1,
  "quotaInNamespace" : -1,
  "usedNamespace" : 1,
  "creationTime" : "2021-07-12T10:17:46.789Z",
  "modificationTime" : "2021-07-12T10:17:46.789Z",
  "acls" : [ {
    "type" : "USER",
    "name" : "hadoop",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  }, {
    "type" : "GROUP",
    "name" : "users",
    "aclScope" : "ACCESS",
    "aclList" : [ "ALL" ]
  } ]
}</msg>
<status status="PASS" starttime="20210712 10:19:38.086" endtime="20210712 10:19:38.087"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210712 10:19:38.087" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210712 10:19:38.087" endtime="20210712 10:19:38.087"/>
</kw>
<status status="PASS" starttime="20210712 10:19:35.370" endtime="20210712 10:19:38.088"/>
</kw>
<msg timestamp="20210712 10:19:38.088" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210712 10:19:35.370" endtime="20210712 10:19:38.088"/>
</kw>
<msg timestamp="20210712 10:19:38.088" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "metadata" : { },
  "name" : "67926-volume-for-cancel",
  "admin" : "h...</msg>
<status status="PASS" starttime="20210712 10:19:35.369" endtime="20210712 10:19:38.088"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20210712 10:19:35.368" endtime="20210712 10:19:38.089"/>
</test>
<doc>Smoke test to test that OMs are prepared in an OM HA cluster.</doc>
<status status="PASS" starttime="20210712 10:19:30.321" endtime="20210712 10:19:38.090"/>
</suite>
<suite id="s1-s5" name="Loaddata" source="/opt/hadoop/smoketest/topology/loaddata.robot">
<test id="s1-s5-t1" name="Create a volume, bucket and key">
<kw name="Execute" library="os">
<var>${output}</var>
<arg>ozone sh volume create topvol1</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210712 10:20:38.581" level="INFO">Running command 'ozone sh volume create topvol1 2&gt;&amp;1'.</msg>
<msg timestamp="20210712 10:20:41.392" level="INFO">${rc} = 0</msg>
<msg timestamp="20210712 10:20:41.392" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210712 10:20:38.578" endtime="20210712 10:20:41.392"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210712 10:20:41.403" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210712 10:20:41.392" endtime="20210712 10:20:41.403"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210712 10:20:41.404" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210712 10:20:41.404" endtime="20210712 10:20:41.404"/>
</kw>
<status status="PASS" starttime="20210712 10:20:38.577" endtime="20210712 10:20:41.405"/>
</kw>
<msg timestamp="20210712 10:20:41.405" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210712 10:20:38.577" endtime="20210712 10:20:41.405"/>
</kw>
<msg timestamp="20210712 10:20:41.405" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210712 10:20:38.576" endtime="20210712 10:20:41.405"/>
</kw>
<kw name="Should Not Contain" library="BuiltIn">
<arg>${output}</arg>
<arg>Failed</arg>
<doc>Fails if ``container`` contains ``item`` one or more times.</doc>
<status status="PASS" starttime="20210712 10:20:41.405" endtime="20210712 10:20:41.406"/>
</kw>
<kw name="Execute" library="os">
<var>${output}</var>
<arg>ozone sh bucket create /topvol1/bucket1</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210712 10:20:41.414" level="INFO">Running command 'ozone sh bucket create /topvol1/bucket1 2&gt;&amp;1'.</msg>
<msg timestamp="20210712 10:20:44.147" level="INFO">${rc} = 0</msg>
<msg timestamp="20210712 10:20:44.147" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210712 10:20:41.409" endtime="20210712 10:20:44.147"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210712 10:20:44.149" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210712 10:20:44.148" endtime="20210712 10:20:44.149"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210712 10:20:44.150" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210712 10:20:44.149" endtime="20210712 10:20:44.150"/>
</kw>
<status status="PASS" starttime="20210712 10:20:41.408" endtime="20210712 10:20:44.150"/>
</kw>
<msg timestamp="20210712 10:20:44.150" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210712 10:20:41.408" endtime="20210712 10:20:44.150"/>
</kw>
<msg timestamp="20210712 10:20:44.151" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210712 10:20:41.406" endtime="20210712 10:20:44.151"/>
</kw>
<kw name="Should Not Contain" library="BuiltIn">
<arg>${output}</arg>
<arg>Failed</arg>
<doc>Fails if ``container`` contains ``item`` one or more times.</doc>
<status status="PASS" starttime="20210712 10:20:44.151" endtime="20210712 10:20:44.151"/>
</kw>
<kw name="Execute" library="os">
<var>${output}</var>
<arg>ozone sh key put /topvol1/bucket1/key1 /opt/hadoop/NOTICE.txt</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210712 10:20:44.157" level="INFO">Running command 'ozone sh key put /topvol1/bucket1/key1 /opt/hadoop/NOTICE.txt 2&gt;&amp;1'.</msg>
<msg timestamp="20210712 10:20:49.094" level="INFO">${rc} = 0</msg>
<msg timestamp="20210712 10:20:49.095" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210712 10:20:44.154" endtime="20210712 10:20:49.095"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210712 10:20:49.096" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210712 10:20:49.095" endtime="20210712 10:20:49.096"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210712 10:20:49.097" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210712 10:20:49.096" endtime="20210712 10:20:49.097"/>
</kw>
<status status="PASS" starttime="20210712 10:20:44.152" endtime="20210712 10:20:49.097"/>
</kw>
<msg timestamp="20210712 10:20:49.097" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210712 10:20:44.152" endtime="20210712 10:20:49.098"/>
</kw>
<msg timestamp="20210712 10:20:49.098" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210712 10:20:44.151" endtime="20210712 10:20:49.098"/>
</kw>
<kw name="Should Not Contain" library="BuiltIn">
<arg>${output}</arg>
<arg>Failed</arg>
<doc>Fails if ``container`` contains ``item`` one or more times.</doc>
<status status="PASS" starttime="20210712 10:20:49.098" endtime="20210712 10:20:49.099"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20210712 10:20:38.576" endtime="20210712 10:20:49.099"/>
</test>
<doc>Smoketest ozone cluster startup</doc>
<status status="PASS" starttime="20210712 10:20:38.518" endtime="20210712 10:20:49.100"/>
</suite>
<suite id="s1-s6" name="Readdata" source="/opt/hadoop/smoketest/topology/readdata.robot">
<test id="s1-s6-t1" name="Read data from previously created key">
<kw name="Generate Random String" library="String">
<var>${random}</var>
<arg>5</arg>
<arg>[NUMBERS]</arg>
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<msg timestamp="20210712 10:20:53.524" level="INFO">${random} = 82343</msg>
<status status="PASS" starttime="20210712 10:20:53.523" endtime="20210712 10:20:53.524"/>
</kw>
<kw name="Execute" library="os">
<var>${output}</var>
<arg>ozone sh key get /topvol1/bucket1/key1 /tmp/key1-${random}</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210712 10:20:53.529" level="INFO">Running command 'ozone sh key get /topvol1/bucket1/key1 /tmp/key1-82343 2&gt;&amp;1'.</msg>
<msg timestamp="20210712 10:20:57.851" level="INFO">${rc} = 0</msg>
<msg timestamp="20210712 10:20:57.851" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210712 10:20:53.525" endtime="20210712 10:20:57.851"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210712 10:20:57.852" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210712 10:20:57.851" endtime="20210712 10:20:57.852"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210712 10:20:57.853" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210712 10:20:57.852" endtime="20210712 10:20:57.853"/>
</kw>
<status status="PASS" starttime="20210712 10:20:53.525" endtime="20210712 10:20:57.853"/>
</kw>
<msg timestamp="20210712 10:20:57.853" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210712 10:20:53.525" endtime="20210712 10:20:57.853"/>
</kw>
<msg timestamp="20210712 10:20:57.854" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210712 10:20:53.524" endtime="20210712 10:20:57.854"/>
</kw>
<kw name="Should Not Contain" library="BuiltIn">
<arg>${output}</arg>
<arg>Failed</arg>
<doc>Fails if ``container`` contains ``item`` one or more times.</doc>
<status status="PASS" starttime="20210712 10:20:57.854" endtime="20210712 10:20:57.854"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20210712 10:20:53.523" endtime="20210712 10:20:57.855"/>
</test>
<doc>Smoketest ozone cluster startup</doc>
<status status="PASS" starttime="20210712 10:20:53.467" endtime="20210712 10:20:57.856"/>
</suite>
<suite id="s1-s7" name="Om-Prepare" source="/opt/hadoop/smoketest/omha/om-prepare.robot">
<kw name="Create Specific OM data for prepare" type="SETUP">
<kw name="Execute" library="os">
<arg>ozone freon rk --replication-type=RATIS --num-of-volumes 1 --num-of-buckets 1 --num-of-keys 100</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210712 10:16:28.687" level="INFO">Running command 'ozone freon rk --replication-type=RATIS --num-of-volumes 1 --num-of-buckets 1 --num-of-keys 100 2&gt;&amp;1'.</msg>
<msg timestamp="20210712 10:16:41.788" level="INFO">${rc} = 0</msg>
<msg timestamp="20210712 10:16:41.788" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
2021-07-12 10:16:30,006 [main] INFO impl.MetricsConfig: Loaded properties ...</msg>
<status status="PASS" starttime="20210712 10:16:28.683" endtime="20210712 10:16:41.788"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210712 10:16:41.789" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
2021-07-12 10:16:30,006 [main] INFO impl.MetricsConfig: Loaded properties from hadoop-metrics2.properties
2021-07-12 10:16:30,183 [main] INFO impl.MetricsSystemImpl: Scheduled Metric snapshot period at 10 second(s).
2021-07-12 10:16:30,183 [main] INFO impl.MetricsSystemImpl: ozone-freon metrics system started
2021-07-12 10:16:31,338 [main] INFO freon.RandomKeyGenerator: Number of Threads: 10
2021-07-12 10:16:31,339 [main] INFO freon.RandomKeyGenerator: Number of Volumes: 1.
2021-07-12 10:16:31,339 [main] INFO freon.RandomKeyGenerator: Number of Buckets per Volume: 1.
2021-07-12 10:16:31,339 [main] INFO freon.RandomKeyGenerator: Number of Keys per Bucket: 100.
2021-07-12 10:16:31,339 [main] INFO freon.RandomKeyGenerator: Key size: 10240 bytes
2021-07-12 10:16:31,339 [main] INFO freon.RandomKeyGenerator: Buffer size: 4096 bytes
2021-07-12 10:16:31,339 [main] INFO freon.RandomKeyGenerator: validateWrites : false
2021-07-12 10:16:31,339 [main] INFO freon.RandomKeyGenerator: cleanObjects : false
2021-07-12 10:16:31,367 [main] INFO freon.RandomKeyGenerator: Starting progress bar Thread.
2021-07-12 10:16:31,375 [Thread-5] INFO freon.ProgressBar: Progress: 0.00 % (0 out of 100)
2021-07-12 10:16:31,401 [pool-2-thread-1] INFO rpc.RpcClient: Creating Volume: vol-0-66509, with hadoop as owner and space quota set to -1 bytes, counts quota set to -1
2021-07-12 10:16:31,669 [pool-2-thread-2] INFO rpc.RpcClient: Creating Bucket: vol-0-66509/bucket-0-85076, with Versioning false and Storage Type set to DISK and Encryption set to false 
2021-07-12 10:16:32,381 [Thread-5] INFO freon.ProgressBar: Progress: 0.00 % (0 out of 100)
2021-07-12 10:16:33,016 [pool-2-thread-6] WARN impl.MetricsSystemImpl: ozone-freon metrics system already initialized!
2021-07-12 10:16:33,278 [pool-2-thread-5] INFO metrics.MetricRegistries: Loaded MetricRegistries class org.apache.ratis.metrics.impl.MetricRegistriesImpl
2021-07-12 10:16:33,278 [pool-2-thread-2] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.client_message_metrics.client-FE1FBFC59A05-&gt;93a7dae8-0997-49cf-8fc6-81dbe613256c
2021-07-12 10:16:33,279 [pool-2-thread-6] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.client_message_metrics.client-F3EC62727C80-&gt;339aab0c-99a4-4fd6-85e0-49a7466cd956
2021-07-12 10:16:33,279 [pool-2-thread-5] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.client_message_metrics.client-625CA619DC7E-&gt;49cf3445-cefc-474e-b13a-532e4f0f29f1
2021-07-12 10:16:33,280 [pool-2-thread-5] WARN impl.MetricRegistriesImpl: First MetricRegistry has been created without registering reporters. You may need to call MetricRegistries.global().addReporterRegistration(...) before.
2021-07-12 10:16:33,280 [pool-2-thread-6] WARN impl.MetricRegistriesImpl: First MetricRegistry has been created without registering reporters. You may need to call MetricRegistries.global().addReporterRegistration(...) before.
2021-07-12 10:16:33,280 [pool-2-thread-2] WARN impl.MetricRegistriesImpl: First MetricRegistry has been created without registering reporters. You may need to call MetricRegistries.global().addReporterRegistration(...) before.
2021-07-12 10:16:33,381 [Thread-5] INFO freon.ProgressBar: Progress: 10.00 % (10 out of 100)
2021-07-12 10:16:34,382 [Thread-5] INFO freon.ProgressBar: Progress: 10.00 % (10 out of 100)
2021-07-12 10:16:35,404 [Thread-5] INFO freon.ProgressBar: Progress: 14.00 % (14 out of 100)
2021-07-12 10:16:36,407 [Thread-5] INFO freon.ProgressBar: Progress: 34.00 % (34 out of 100)
2021-07-12 10:16:37,412 [Thread-5] INFO freon.ProgressBar: Progress: 53.00 % (53 out of 100)
2021-07-12 10:16:38,431 [Thread-5] INFO freon.ProgressBar: Progress: 75.00 % (75 out of 100)
2021-07-12 10:16:39,445 [Thread-5] INFO freon.ProgressBar: Progress: 96.00 % (96 out of 100)
2021-07-12 10:16:40,445 [Thread-5] INFO freon.ProgressBar: Progress: 100.00 % (100 out of 100)

***************************************************
Status: Success
Git Base Revision: a3b9c37a397ad4188041dd80621bdeefc46885f2
Number of Volumes created: 1
Number of Buckets created: 1
Number of Keys added: 100
Ratis replication factor: ONE
Ratis replication type: RATIS
Average Time spent in volume creation: 00:00:00,026
Average Time spent in bucket creation: 00:00:00,008
Average Time spent in key creation: 00:00:02,367
Average Time spent in key write: 00:00:00,859
Total bytes written: 1024000
Total Execution time: 00:00:11,034
***************************************************</msg>
<status status="PASS" starttime="20210712 10:16:41.788" endtime="20210712 10:16:41.789"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210712 10:16:41.790" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210712 10:16:41.789" endtime="20210712 10:16:41.790"/>
</kw>
<status status="PASS" starttime="20210712 10:16:28.682" endtime="20210712 10:16:41.790"/>
</kw>
<msg timestamp="20210712 10:16:41.790" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210712 10:16:28.682" endtime="20210712 10:16:41.790"/>
</kw>
<status status="PASS" starttime="20210712 10:16:28.681" endtime="20210712 10:16:41.790"/>
</kw>
<kw name="Generate Random String" library="String">
<var>${random}</var>
<arg>5</arg>
<arg>[NUMBERS]</arg>
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<msg timestamp="20210712 10:16:41.791" level="INFO">${random} = 98288</msg>
<status status="PASS" starttime="20210712 10:16:41.791" endtime="20210712 10:16:41.791"/>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<arg>${volume_name}</arg>
<arg>${random}-volume-for-prepare</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<msg timestamp="20210712 10:16:41.794" level="INFO">${volume_name} = 98288-volume-for-prepare</msg>
<status status="PASS" starttime="20210712 10:16:41.791" endtime="20210712 10:16:41.794"/>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<arg>${bucket_name}</arg>
<arg>${random}-bucket-for-prepare</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<msg timestamp="20210712 10:16:41.795" level="INFO">${bucket_name} = 98288-bucket-for-prepare</msg>
<status status="PASS" starttime="20210712 10:16:41.794" endtime="20210712 10:16:41.795"/>
</kw>
<kw name="Execute" library="os">
<arg>ozone sh volume create /${volume_name}</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210712 10:16:41.799" level="INFO">Running command 'ozone sh volume create /98288-volume-for-prepare 2&gt;&amp;1'.</msg>
<msg timestamp="20210712 10:16:44.525" level="INFO">${rc} = 0</msg>
<msg timestamp="20210712 10:16:44.525" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210712 10:16:41.797" endtime="20210712 10:16:44.525"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210712 10:16:44.526" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210712 10:16:44.526" endtime="20210712 10:16:44.526"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210712 10:16:44.528" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210712 10:16:44.527" endtime="20210712 10:16:44.528"/>
</kw>
<status status="PASS" starttime="20210712 10:16:41.796" endtime="20210712 10:16:44.529"/>
</kw>
<msg timestamp="20210712 10:16:44.529" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210712 10:16:41.796" endtime="20210712 10:16:44.529"/>
</kw>
<status status="PASS" starttime="20210712 10:16:41.795" endtime="20210712 10:16:44.529"/>
</kw>
<kw name="Execute" library="os">
<arg>ozone sh bucket create /${volume_name}/${bucket_name}</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210712 10:16:44.533" level="INFO">Running command 'ozone sh bucket create /98288-volume-for-prepare/98288-bucket-for-prepare 2&gt;&amp;1'.</msg>
<msg timestamp="20210712 10:16:47.083" level="INFO">${rc} = 0</msg>
<msg timestamp="20210712 10:16:47.083" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210712 10:16:44.531" endtime="20210712 10:16:47.083"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210712 10:16:47.085" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210712 10:16:47.084" endtime="20210712 10:16:47.085"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210712 10:16:47.085" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210712 10:16:47.085" endtime="20210712 10:16:47.085"/>
</kw>
<status status="PASS" starttime="20210712 10:16:44.530" endtime="20210712 10:16:47.086"/>
</kw>
<msg timestamp="20210712 10:16:47.086" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210712 10:16:44.530" endtime="20210712 10:16:47.086"/>
</kw>
<status status="PASS" starttime="20210712 10:16:44.530" endtime="20210712 10:16:47.086"/>
</kw>
<kw name="Execute" library="os">
<arg>ozone sh key put /${volume_name}/${bucket_name}/prepare-key /opt/hadoop/NOTICE.txt</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210712 10:16:47.090" level="INFO">Running command 'ozone sh key put /98288-volume-for-prepare/98288-bucket-for-prepare/prepare-key /opt/hadoop/NOTICE.txt 2&gt;&amp;1'.</msg>
<msg timestamp="20210712 10:16:51.712" level="INFO">${rc} = 0</msg>
<msg timestamp="20210712 10:16:51.712" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210712 10:16:47.088" endtime="20210712 10:16:51.712"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210712 10:16:51.713" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.</msg>
<status status="PASS" starttime="20210712 10:16:51.712" endtime="20210712 10:16:51.713"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210712 10:16:51.713" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210712 10:16:51.713" endtime="20210712 10:16:51.714"/>
</kw>
<status status="PASS" starttime="20210712 10:16:47.087" endtime="20210712 10:16:51.714"/>
</kw>
<msg timestamp="20210712 10:16:51.714" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210712 10:16:47.087" endtime="20210712 10:16:51.714"/>
</kw>
<status status="PASS" starttime="20210712 10:16:47.087" endtime="20210712 10:16:51.714"/>
</kw>
<status status="PASS" starttime="20210712 10:16:28.681" endtime="20210712 10:16:51.715"/>
</kw>
<test id="s1-s7-t1" name="Prepare Ozone Manager">
<kw name="Run Keyword If" library="BuiltIn" type="SETUP">
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" starttime="20210712 10:16:51.716" endtime="20210712 10:16:51.716"/>
</kw>
<kw name="Execute" library="os">
<var>${result}</var>
<arg>ozone admin om prepare -id=omservice</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210712 10:16:51.721" level="INFO">Running command 'ozone admin om prepare -id=omservice 2&gt;&amp;1'.</msg>
<msg timestamp="20210712 10:16:59.544" level="INFO">${rc} = 0</msg>
<msg timestamp="20210712 10:16:59.544" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
Ozone Manager Prepare Request successfully returned with Transaction Id : ...</msg>
<status status="PASS" starttime="20210712 10:16:51.718" endtime="20210712 10:16:59.545"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210712 10:16:59.546" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
Ozone Manager Prepare Request successfully returned with Transaction Id : [325].

Checking individual OM instances for prepare request completion...
OM : [om1], Prepare Status : [PREPARE_COMPLETED], Current Transaction Id : [325]
OM : [om3], Prepare Status : [PREPARE_COMPLETED], Current Transaction Id : [325]
OM : [om2], Prepare Status : [PREPARE_COMPLETED], Current Transaction Id : [325]

OM Preparation successful! 
All OMs are prepared
No new write requests will be allowed until preparation is cancelled or upgrade/downgrade is done.</msg>
<status status="PASS" starttime="20210712 10:16:59.545" endtime="20210712 10:16:59.546"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210712 10:16:59.547" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210712 10:16:59.546" endtime="20210712 10:16:59.547"/>
</kw>
<status status="PASS" starttime="20210712 10:16:51.717" endtime="20210712 10:16:59.548"/>
</kw>
<msg timestamp="20210712 10:16:59.548" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210712 10:16:51.717" endtime="20210712 10:16:59.548"/>
</kw>
<msg timestamp="20210712 10:16:59.548" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
Ozone Manager Prepare Request successfully returned with Transaction Id : ...</msg>
<status status="PASS" starttime="20210712 10:16:51.717" endtime="20210712 10:16:59.548"/>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<arg>3min</arg>
<arg>10sec</arg>
<arg>Should contain</arg>
<arg>${result}</arg>
<arg>OM Preparation successful!</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<kw name="Should Contain" library="BuiltIn">
<arg>${result}</arg>
<arg>OM Preparation successful!</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20210712 10:16:59.549" endtime="20210712 10:16:59.550"/>
</kw>
<status status="PASS" starttime="20210712 10:16:59.549" endtime="20210712 10:16:59.550"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20210712 10:16:51.715" endtime="20210712 10:16:59.550"/>
</test>
<test id="s1-s7-t2" name="Checks if the expected data is present in OM">
<kw name="Run Keyword If" library="BuiltIn" type="SETUP">
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" starttime="20210712 10:16:59.552" endtime="20210712 10:16:59.553"/>
</kw>
<kw name="Execute" library="os">
<var>${result}</var>
<arg>ozone sh key info /${volume_name}/${bucket_name}/prepare-key</arg>
<kw name="Run Keyword And Return" library="BuiltIn">
<arg>Execute and checkrc</arg>
<arg>${command}</arg>
<arg>0</arg>
<doc>Runs the specified keyword and returns from the enclosing user keyword.</doc>
<kw name="Execute and checkrc" library="os">
<arg>${command}</arg>
<arg>0</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210712 10:16:59.556" level="INFO">Running command 'ozone sh key info /98288-volume-for-prepare/98288-bucket-for-prepare/prepare-key 2&gt;&amp;1'.</msg>
<msg timestamp="20210712 10:17:02.332" level="INFO">${rc} = 0</msg>
<msg timestamp="20210712 10:17:02.332" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "volumeName" : "98288-volume-for-prepare",
  "bucketName" : "98288-buc...</msg>
<status status="PASS" starttime="20210712 10:16:59.554" endtime="20210712 10:17:02.332"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210712 10:17:02.333" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "volumeName" : "98288-volume-for-prepare",
  "bucketName" : "98288-bucket-for-prepare",
  "name" : "prepare-key",
  "dataSize" : 17526,
  "creationTime" : "2021-07-12T10:16:49.544Z",
  "modificationTime" : "2021-07-12T10:16:51.302Z",
  "ozoneKeyLocations" : [ {
    "containerID" : 2,
    "localID" : 107544261427200101,
    "length" : 17526,
    "offset" : 0,
    "keyOffset" : 0
  } ],
  "metadata" : { },
  "fileEncryptionInfo" : null,
  "replicationType" : "RATIS",
  "replicationFactor" : 1
}</msg>
<status status="PASS" starttime="20210712 10:17:02.332" endtime="20210712 10:17:02.333"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210712 10:17:02.334" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210712 10:17:02.333" endtime="20210712 10:17:02.334"/>
</kw>
<status status="PASS" starttime="20210712 10:16:59.554" endtime="20210712 10:17:02.334"/>
</kw>
<msg timestamp="20210712 10:17:02.334" level="INFO">Returning from the enclosing user keyword.</msg>
<status status="PASS" starttime="20210712 10:16:59.553" endtime="20210712 10:17:02.334"/>
</kw>
<msg timestamp="20210712 10:17:02.335" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
{
  "volumeName" : "98288-volume-for-prepare",
  "bucketName" : "98288-buc...</msg>
<status status="PASS" starttime="20210712 10:16:59.553" endtime="20210712 10:17:02.335"/>
</kw>
<kw name="Should Contain" library="BuiltIn">
<arg>${result}</arg>
<arg>\"name\" : \"prepare-key\"</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20210712 10:17:02.335" endtime="20210712 10:17:02.336"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20210712 10:16:59.551" endtime="20210712 10:17:02.336"/>
</test>
<test id="s1-s7-t3" name="Test write operation fails">
<kw name="Run Keyword If" library="BuiltIn" type="SETUP">
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<status status="PASS" starttime="20210712 10:17:02.338" endtime="20210712 10:17:02.338"/>
</kw>
<kw name="Execute and checkrc" library="os">
<var>${result}</var>
<arg>ozone sh key put /${volume_name}/${bucket_name}/prepare-key2 /opt/hadoop/NOTICE.txt</arg>
<arg>255</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210712 10:17:02.341" level="INFO">Running command 'ozone sh key put /98288-volume-for-prepare/98288-bucket-for-prepare/prepare-key2 /opt/hadoop/NOTICE.txt 2&gt;&amp;1'.</msg>
<msg timestamp="20210712 10:17:04.661" level="INFO">${rc} = 255</msg>
<msg timestamp="20210712 10:17:04.661" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
NOT_SUPPORTED_OPERATION_WHEN_PREPARED Cannot apply write request CreateKey...</msg>
<status status="PASS" starttime="20210712 10:17:02.339" endtime="20210712 10:17:04.661"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210712 10:17:04.662" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
NOT_SUPPORTED_OPERATION_WHEN_PREPARED Cannot apply write request CreateKey when OM is in prepare mode.</msg>
<status status="PASS" starttime="20210712 10:17:04.661" endtime="20210712 10:17:04.662"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210712 10:17:04.663" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210712 10:17:04.662" endtime="20210712 10:17:04.663"/>
</kw>
<msg timestamp="20210712 10:17:04.664" level="INFO">${result} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
NOT_SUPPORTED_OPERATION_WHEN_PREPARED Cannot apply write request CreateKey...</msg>
<status status="PASS" starttime="20210712 10:17:02.339" endtime="20210712 10:17:04.664"/>
</kw>
<kw name="Should Contain" library="BuiltIn">
<arg>${result}</arg>
<arg>OM is in prepare mode</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" starttime="20210712 10:17:04.664" endtime="20210712 10:17:04.664"/>
</kw>
<kw name="Execute and checkrc" library="os">
<arg>ozone sh key info /${volume_name}/${bucket_name}/prepare-key2</arg>
<arg>255</arg>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<var>${rc}</var>
<var>${output}</var>
<arg>${command}</arg>
<doc>Runs the given command in the system and returns the RC and output.</doc>
<msg timestamp="20210712 10:17:04.667" level="INFO">Running command 'ozone sh key info /98288-volume-for-prepare/98288-bucket-for-prepare/prepare-key2 2&gt;&amp;1'.</msg>
<msg timestamp="20210712 10:17:07.086" level="INFO">${rc} = 255</msg>
<msg timestamp="20210712 10:17:07.086" level="INFO">${output} = WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
KEY_NOT_FOUND Key:prepare-key2 not found</msg>
<status status="PASS" starttime="20210712 10:17:04.665" endtime="20210712 10:17:07.086"/>
</kw>
<kw name="Log" library="BuiltIn">
<arg>${output}</arg>
<doc>Logs the given message with the given level.</doc>
<msg timestamp="20210712 10:17:07.087" level="INFO">WARNING: HADOOP_CONF_DIR has been deprecated by OZONE_CONF_DIR.
WARNING: HADOOP_LOG_DIR has been deprecated by OZONE_LOG_DIR.
KEY_NOT_FOUND Key:prepare-key2 not found</msg>
<status status="PASS" starttime="20210712 10:17:07.086" endtime="20210712 10:17:07.087"/>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
<doc>Fails if objects are unequal after converting them to integers.</doc>
<msg timestamp="20210712 10:17:07.088" level="INFO">Argument types are:
&lt;class 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" starttime="20210712 10:17:07.087" endtime="20210712 10:17:07.088"/>
</kw>
<status status="PASS" starttime="20210712 10:17:04.665" endtime="20210712 10:17:07.089"/>
</kw>
<timeout value="5 minutes"/>
<status status="PASS" starttime="20210712 10:17:02.337" endtime="20210712 10:17:07.089"/>
</test>
<doc>Smoke test to test preparing OMs in an OM HA cluster.</doc>
<status status="PASS" starttime="20210712 10:16:28.621" endtime="20210712 10:17:07.091"/>
</suite>
<status status="PASS" starttime="N/A" endtime="N/A" elapsedtime="122205"/>
</suite>
<statistics>
<total>
<stat pass="14" fail="0" skip="0">All Tests</stat>
</total>
<tag>
</tag>
<suite>
<stat pass="14" fail="0" skip="0" id="s1" name="ozone-om-prepare">ozone-om-prepare</stat>
<stat pass="2" fail="0" skip="0" id="s1-s1" name="Om-Cancel-Prepare">ozone-om-prepare.Om-Cancel-Prepare</stat>
<stat pass="3" fail="0" skip="0" id="s1-s2" name="Om-Prepare">ozone-om-prepare.Om-Prepare</stat>
<stat pass="2" fail="0" skip="0" id="s1-s3" name="Om-Prepared">ozone-om-prepare.Om-Prepared</stat>
<stat pass="2" fail="0" skip="0" id="s1-s4" name="Om-Prepared">ozone-om-prepare.Om-Prepared</stat>
<stat pass="1" fail="0" skip="0" id="s1-s5" name="Loaddata">ozone-om-prepare.Loaddata</stat>
<stat pass="1" fail="0" skip="0" id="s1-s6" name="Readdata">ozone-om-prepare.Readdata</stat>
<stat pass="3" fail="0" skip="0" id="s1-s7" name="Om-Prepare">ozone-om-prepare.Om-Prepare</stat>
</suite>
</statistics>
<errors>
</errors>
</robot>
