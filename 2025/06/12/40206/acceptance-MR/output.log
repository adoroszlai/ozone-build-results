Using Docker Compose v2
Executing test ozone-ha/test-hadoop.sh
Using Docker Compose v2
Error response from daemon: Head "https://ghcr.io/v2/apache/ozone-runner/manifests/20241216-1-jdk21": EOF
ERROR: Test execution of ozone-ha/test-hadoop.sh is FAILED!!!!
mkdir: created directory '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozone-ha'
mkdir: created directory '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozone-ha/hadoop'
mv: cannot stat 'ozone-ha/result/*': No such file or directory
Executing test ozone/test-hadoop.sh
Using Docker Compose v2

Port 9860 is not available on scm yet

Port 9860 is not available on scm yet

Port 9860 is not available on scm yet

Port 9860 is not available on scm yet

Port 9860 is not available on scm yet

Port 9860 is not available on scm yet

Port 9860 is not available on scm yet

Port 9860 is not available on scm yet

Port 9860 is not available on scm yet

Port 9860 is not available on scm yet

Port 9860 is not available on scm yet

Port 9860 is not available on scm yet

Port 9860 is not available on scm yet

Port 9860 is not available on scm yet

Port 9860 is not available on scm yet

Port 9860 is not available on scm yet

Port 9860 is not available on scm yet

Port 9860 is not available on scm yet

Port 9860 is not available on scm yet
Port 9860 is available on scm
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 235
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 234
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 233
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 232
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 231
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 230
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 229
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 228
SCM is out of safe mode.
No OM HA service, no need to wait
==============================================================================
Createmrenv :: Create directories required for MR test                        
==============================================================================
Create test volume, bucket and key                                    | PASS |
------------------------------------------------------------------------------
Create user dir for hadoop                                            | PASS |
------------------------------------------------------------------------------
Createmrenv :: Create directories required for MR test                | PASS |
2 tests, 2 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozone/result/robot-001.xml
Using Docker Compose v2
received unexpected HTTP status: 500 Internal Server Error
ERROR: Test execution of ozone/test-hadoop.sh is FAILED!!!!
To use Ozone please mount ozone folder to /opt/hadoop
Output:  /rebot-output/ozone-hadoop.xml
renamed '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/rebot-XdARqJ/ozone-hadoop.xml' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozone-hadoop.xml'
removed 'ozone/result/robot-001.xml'
mkdir: created directory '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozone'
mkdir: created directory '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozone/hadoop'
renamed 'ozone/result/dn-audit-8e8fbd541a80.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozone/hadoop/dn-audit-8e8fbd541a80.log'
renamed 'ozone/result/dn-audit-d2944796df56.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozone/hadoop/dn-audit-d2944796df56.log'
renamed 'ozone/result/dn-audit-d9e619ba68f2.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozone/hadoop/dn-audit-d9e619ba68f2.log'
renamed 'ozone/result/docker-ozone-datanode-1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozone/hadoop/docker-ozone-datanode-1.log'
renamed 'ozone/result/docker-ozone-datanode-2.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozone/hadoop/docker-ozone-datanode-2.log'
renamed 'ozone/result/docker-ozone-datanode-3.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozone/hadoop/docker-ozone-datanode-3.log'
renamed 'ozone/result/docker-ozone-httpfs-1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozone/hadoop/docker-ozone-httpfs-1.log'
renamed 'ozone/result/docker-ozone-om-1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozone/hadoop/docker-ozone-om-1.log'
renamed 'ozone/result/docker-ozone-recon-1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozone/hadoop/docker-ozone-recon-1.log'
renamed 'ozone/result/docker-ozone-s3g-1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozone/hadoop/docker-ozone-s3g-1.log'
renamed 'ozone/result/docker-ozone-scm-1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozone/hadoop/docker-ozone-scm-1.log'
renamed 'ozone/result/om-audit-b4ec0a484b10.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozone/hadoop/om-audit-b4ec0a484b10.log'
renamed 'ozone/result/om-sys-audit-b4ec0a484b10.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozone/hadoop/om-sys-audit-b4ec0a484b10.log'
renamed 'ozone/result/s3g-audit-a0dc924531d2.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozone/hadoop/s3g-audit-a0dc924531d2.log'
renamed 'ozone/result/scm-audit-ac9b3bf78847.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozone/hadoop/scm-audit-ac9b3bf78847.log'
Executing test ozonesecure-mr/test.sh
Using Docker Compose v2
Port 88 is available on kdc

Port 9860 is not available on scm yet

Port 9860 is not available on scm yet

Port 9860 is not available on scm yet

Port 9860 is not available on scm yet

Port 9860 is not available on scm yet

Port 9860 is not available on scm yet

Port 9860 is not available on scm yet

Port 9860 is not available on scm yet

Port 9860 is not available on scm yet

Port 9860 is not available on scm yet

Port 9860 is not available on scm yet

Port 9860 is not available on scm yet

Port 9860 is not available on scm yet

Port 9860 is not available on scm yet

Port 9860 is not available on scm yet

Port 9860 is not available on scm yet

Port 9860 is not available on scm yet

Port 9860 is not available on scm yet

Port 9860 is not available on scm yet
Port 9860 is available on scm
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 234
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 233
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 232
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 231
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 230
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 229
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 228
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 227
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 226
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 225
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 224
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 223
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 222
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 221
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 220
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 219
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 218
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 217
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 216
SCM is out of safe mode.
No OM HA service, no need to wait
==============================================================================
Kinit :: Kinit test user                                                      
==============================================================================
Kinit                                                                 | PASS |
------------------------------------------------------------------------------
Kinit :: Kinit test user                                              | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-mr/result/robot-001.xml
==============================================================================
Createmrenv :: Create directories required for MR test                        
==============================================================================
Create test volume, bucket and key                                    | PASS |
------------------------------------------------------------------------------
Create user dir for hadoop                                            | PASS |
------------------------------------------------------------------------------
Createmrenv :: Create directories required for MR test                | PASS |
2 tests, 2 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-mr/result/robot-002.xml
Using Docker Compose v2
Hadoop 2.10.2
Subversion Unknown -r 965fd380006fa78b2315668fbc7eb432e1d8200f
Compiled by ubuntu on 2022-05-24T22:35Z
Compiled with protoc 2.5.0
From source with checksum d3ab737f7788f05d467784f0a86573fe
This command was run using /opt/hadoop/share/hadoop/common/hadoop-common-2.10.2.jar
==============================================================================
Kinit-Hadoop :: Kinit test user                                               
==============================================================================
Kinit                                                                 | PASS |
------------------------------------------------------------------------------
Kinit-Hadoop :: Kinit test user                                       | PASS |
1 critical test, 1 passed, 0 failed
1 test total, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-mr/result/robot-003.xml
==============================================================================
hadoop-2.10.2-hadoopfs-o3fs :: Test ozone fs with hadoopfs                    
==============================================================================
Test hadoop dfs                                                       | PASS |
------------------------------------------------------------------------------
hadoop-2.10.2-hadoopfs-o3fs :: Test ozone fs with hadoopfs            | PASS |
1 critical test, 1 passed, 0 failed
1 test total, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-mr/result/robot-004.xml
==============================================================================
hadoop-2.10.2-hadoopfs-ofs :: Test ozone fs with hadoopfs                     
==============================================================================
Test hadoop dfs                                                       | PASS |
------------------------------------------------------------------------------
hadoop-2.10.2-hadoopfs-ofs :: Test ozone fs with hadoopfs             | PASS |
1 critical test, 1 passed, 0 failed
1 test total, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-mr/result/robot-005.xml
Hadoop 3.4.1
Source code repository https://github.com/apache/hadoop.git -r 4d7825309348956336b8f06a08322b78422849b1
Compiled by mthakur on 2024-10-09T14:57Z
Compiled on platform linux-x86_64
Compiled with protoc 3.23.4
From source with checksum 7292fe9dba5e2e44e3a9f763fce3e680
This command was run using /opt/hadoop/share/hadoop/common/hadoop-common-3.4.1.jar
==============================================================================
Kinit-Hadoop :: Kinit test user                                               
==============================================================================
Kinit                                                                 | PASS |
------------------------------------------------------------------------------
Kinit-Hadoop :: Kinit test user                                       | PASS |
1 critical test, 1 passed, 0 failed
1 test total, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-mr/result/robot-006.xml
==============================================================================
hadoop-3.4.1-hadoopfs-o3fs :: Test ozone fs with hadoopfs                     
==============================================================================
Test hadoop dfs                                                       | PASS |
------------------------------------------------------------------------------
hadoop-3.4.1-hadoopfs-o3fs :: Test ozone fs with hadoopfs             | PASS |
1 critical test, 1 passed, 0 failed
1 test total, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-mr/result/robot-007.xml
==============================================================================
hadoop-3.4.1-mapreduce-o3fs :: Execute MR jobs                                
==============================================================================
Execute PI calculation                                                | PASS |
------------------------------------------------------------------------------
Execute WordCount                                                     | PASS |
------------------------------------------------------------------------------
hadoop-3.4.1-mapreduce-o3fs :: Execute MR jobs                        | PASS |
2 critical tests, 2 passed, 0 failed
2 tests total, 2 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-mr/result/robot-008.xml
==============================================================================
hadoop-3.4.1-hadoopfs-ofs :: Test ozone fs with hadoopfs                      
==============================================================================
Test hadoop dfs                                                       | PASS |
------------------------------------------------------------------------------
hadoop-3.4.1-hadoopfs-ofs :: Test ozone fs with hadoopfs              | PASS |
1 critical test, 1 passed, 0 failed
1 test total, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-mr/result/robot-009.xml
==============================================================================
hadoop-3.4.1-mapreduce-ofs :: Execute MR jobs                                 
==============================================================================
Execute PI calculation                                                | PASS |
------------------------------------------------------------------------------
Execute WordCount                                                     | PASS |
------------------------------------------------------------------------------
hadoop-3.4.1-mapreduce-ofs :: Execute MR jobs                         | PASS |
2 critical tests, 2 passed, 0 failed
2 tests total, 2 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-mr/result/robot-010.xml
To use Ozone please mount ozone folder to /opt/hadoop
Output:  /rebot-output/ozonesecure-mr.xml
renamed '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/rebot-tMMYNm/ozonesecure-mr.xml' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozonesecure-mr.xml'
removed 'ozonesecure-mr/result/robot-001.xml'
removed 'ozonesecure-mr/result/robot-002.xml'
removed 'ozonesecure-mr/result/robot-003.xml'
removed 'ozonesecure-mr/result/robot-004.xml'
removed 'ozonesecure-mr/result/robot-005.xml'
removed 'ozonesecure-mr/result/robot-006.xml'
removed 'ozonesecure-mr/result/robot-007.xml'
removed 'ozonesecure-mr/result/robot-008.xml'
removed 'ozonesecure-mr/result/robot-009.xml'
removed 'ozonesecure-mr/result/robot-010.xml'
mkdir: created directory '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozonesecure-mr'
renamed 'ozonesecure-mr/result/dn-audit-b0780faf046f.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozonesecure-mr/dn-audit-b0780faf046f.log'
renamed 'ozonesecure-mr/result/dn-audit-bc64e5e21ed7.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozonesecure-mr/dn-audit-bc64e5e21ed7.log'
renamed 'ozonesecure-mr/result/dn-audit-dba31de6bc87.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozonesecure-mr/dn-audit-dba31de6bc87.log'
renamed 'ozonesecure-mr/result/docker-ozonesecure-mr-datanode-1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozonesecure-mr/docker-ozonesecure-mr-datanode-1.log'
renamed 'ozonesecure-mr/result/docker-ozonesecure-mr-datanode-2.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozonesecure-mr/docker-ozonesecure-mr-datanode-2.log'
renamed 'ozonesecure-mr/result/docker-ozonesecure-mr-datanode-3.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozonesecure-mr/docker-ozonesecure-mr-datanode-3.log'
renamed 'ozonesecure-mr/result/docker-ozonesecure-mr-kdc-1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozonesecure-mr/docker-ozonesecure-mr-kdc-1.log'
renamed 'ozonesecure-mr/result/docker-ozonesecure-mr-kms-1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozonesecure-mr/docker-ozonesecure-mr-kms-1.log'
renamed 'ozonesecure-mr/result/docker-ozonesecure-mr-nm-1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozonesecure-mr/docker-ozonesecure-mr-nm-1.log'
renamed 'ozonesecure-mr/result/docker-ozonesecure-mr-om-1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozonesecure-mr/docker-ozonesecure-mr-om-1.log'
renamed 'ozonesecure-mr/result/docker-ozonesecure-mr-rm-1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozonesecure-mr/docker-ozonesecure-mr-rm-1.log'
renamed 'ozonesecure-mr/result/docker-ozonesecure-mr-s3g-1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozonesecure-mr/docker-ozonesecure-mr-s3g-1.log'
renamed 'ozonesecure-mr/result/docker-ozonesecure-mr-scm-1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozonesecure-mr/docker-ozonesecure-mr-scm-1.log'
renamed 'ozonesecure-mr/result/kms-audit.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozonesecure-mr/kms-audit.log'
renamed 'ozonesecure-mr/result/om-audit-om.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozonesecure-mr/om-audit-om.log'
renamed 'ozonesecure-mr/result/om-sys-audit-om.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozonesecure-mr/om-sys-audit-om.log'
renamed 'ozonesecure-mr/result/s3g-audit-s3g.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozonesecure-mr/s3g-audit-s3g.log'
renamed 'ozonesecure-mr/result/scm-audit-scm.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/ozonesecure-mr/scm-audit-scm.log'
To use Ozone please mount ozone folder to /opt/hadoop
Log:     /rebot-output/log.html
Report:  /rebot-output/report.html
renamed '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/rebot-YDMnuo/log.html' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/log.html'
renamed '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/rebot-YDMnuo/report.html' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.1.0-SNAPSHOT/compose/result/report.html'
removed directory '/tmp/robot-data-tXJPaD'
