Using Docker Compose v2
Executing test xcompat/test-old.sh
Using Docker Compose v2
Starting 1.1.0 cluster with COMPOSE_FILE=old-cluster.yaml:clients.yaml
Error: Could not find or load main class org.apache.ozone.test.JacocoServer
Caused by: java.lang.ClassNotFoundException: org.apache.ozone.test.JacocoServer
Port 88 is available on kdc
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is available on scm
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 236
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 235
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 234
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 233
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 232
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 231
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 230
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 229
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 228
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 227
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 226
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 225
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 224
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 223
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 222
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 221
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 220
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 219
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 218
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 217
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 216
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 215
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 214
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 213
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 212
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 211
SCM is out of safe mode.
No OM HA service, no need to wait
key1 has been successfully created with options Options{cipher='AES/CTR/NoPadding', bitLength=128, description='null', attributes=null}.
org.apache.hadoop.crypto.key.kms.LoadBalancingKMSClientProvider@4a7f959b has been updated.
2025-03-04 04:09:01,562 [main] INFO impl.MetricsConfig: Loaded properties from hadoop-metrics2.properties
2025-03-04 04:09:01,655 [main] INFO impl.MetricsSystemImpl: Scheduled Metric snapshot period at 10 second(s).
2025-03-04 04:09:01,656 [main] INFO impl.MetricsSystemImpl: ozone-freon metrics system started
2025-03-04 04:09:01,749 [main] INFO freon.BaseFreonGenerator: Executing test with prefix warmup
2025-03-04 04:09:01,752 [Thread-3] INFO freon.ProgressBar: Progress: 0.00 % (0 out of 1)
2025-03-04 04:09:02,614 [main] INFO rpc.RpcClient: Creating Volume: vol1, with testuser/scm@EXAMPLE.COM as owner and space quota set to -1 bytes, counts quota set to -1
2025-03-04 04:09:02,717 [main] INFO rpc.RpcClient: Creating Bucket: vol1/bucket1, with Versioning false and Storage Type set to DISK and Encryption set to false 
2025-03-04 04:09:02,753 [Thread-3] INFO freon.ProgressBar: Progress: 0.00 % (0 out of 1)
2025-03-04 04:09:03,121 [pool-1-thread-1] WARN impl.MetricsSystemImpl: ozone-freon metrics system already initialized!
2025-03-04 04:09:03,281 [pool-1-thread-1] INFO metrics.MetricRegistries: Loaded MetricRegistries class org.apache.ratis.metrics.impl.MetricRegistriesImpl
2025-03-04 04:09:03,282 [pool-1-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.client_message_metrics.client-A11400CFAEDE->fbe9a107-b2d8-4c1b-b376-90fa854d823f
2025-03-04 04:09:03,282 [pool-1-thread-1] WARN impl.MetricRegistriesImpl: First MetricRegistry has been created without registering reporters. You may need to call MetricRegistries.global().addReporterRegistration(...) before.
2025-03-04 04:09:03,753 [Thread-3] INFO freon.ProgressBar: Progress: 0.00 % (0 out of 1)
2025-03-04 04:09:04,754 [Thread-3] INFO freon.ProgressBar: Progress: 100.00 % (1 out of 1)
2025-03-04 04:09:04,776 [Thread-2] INFO metrics: type=TIMER, name=key-create, count=1, min=1607.480733, max=1607.480733, mean=1607.480733, stddev=0.0, median=1607.480733, p75=1607.480733, p95=1607.480733, p98=1607.480733, p99=1607.480733, p999=1607.480733, mean_rate=0.4951037813152739, m1=0.0, m5=0.0, m15=0.0, rate_unit=events/second, duration_unit=milliseconds
2025-03-04 04:09:04,777 [Thread-2] INFO freon.BaseFreonGenerator: Total execution time (sec): 3
2025-03-04 04:09:04,777 [Thread-2] INFO freon.BaseFreonGenerator: Failures: 0
2025-03-04 04:09:04,777 [Thread-2] INFO freon.BaseFreonGenerator: Successful executions: 1
==============================================================================
xcompat-cluster-1.1.0-client-1.1.0-write :: Write Compatibility               
==============================================================================
Create Bucket With Replication Type                                   | PASS |
Client does not support EC
------------------------------------------------------------------------------
Create Encrypted Bucket                                               | PASS |
------------------------------------------------------------------------------
Create Key in Encrypted Bucket                                        | PASS |
------------------------------------------------------------------------------
Key Can Be Written                                                    | PASS |
------------------------------------------------------------------------------
Key Can Be Written To Bucket With Replication Type                    | PASS |
Cluster does not support EC
------------------------------------------------------------------------------
Key Can Be Deleted                                                    | PASS |
------------------------------------------------------------------------------
Dir Can Be Created                                                    | PASS |
------------------------------------------------------------------------------
File Can Be Put                                                       | PASS |
------------------------------------------------------------------------------
File Can Be Put To Bucket With Replication Type                       | PASS |
Cluster does not support EC
------------------------------------------------------------------------------
File Can Be Deleted                                                   | PASS |
------------------------------------------------------------------------------
FSO Bucket Can Be Created and Used                                    | PASS |
Client does not support FSO
------------------------------------------------------------------------------
HSync Can Be Used To Create Keys                                      | PASS |
Client does not support HSYNC
------------------------------------------------------------------------------
xcompat-cluster-1.1.0-client-1.1.0-write :: Write Compatibility       | PASS |
12 tests, 12 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/xcompat/result/robot-001.xml
==============================================================================
xcompat-cluster-1.1.0-client-2.0.0-write :: Write Compatibility               
==============================================================================
Create Bucket With Replication Type                                   | PASS |
Cluster does not support EC
------------------------------------------------------------------------------
Create Encrypted Bucket                                               | FAIL |
134 != 0
------------------------------------------------------------------------------
Create Key in Encrypted Bucket                                        | FAIL |
134 != 0
------------------------------------------------------------------------------
Key Can Be Written                                                    | FAIL |
134 != 0
------------------------------------------------------------------------------
Key Can Be Written To Bucket With Replication Type                    | PASS |
Cluster does not support EC
------------------------------------------------------------------------------
Key Can Be Deleted                                                    | FAIL |
134 != 0
------------------------------------------------------------------------------
Dir Can Be Created                                                    | FAIL |
134 != 0
------------------------------------------------------------------------------
File Can Be Put                                                       | FAIL |
134 != 0
------------------------------------------------------------------------------
File Can Be Put To Bucket With Replication Type                       | PASS |
Cluster does not support EC
------------------------------------------------------------------------------
File Can Be Deleted                                                   | FAIL |
134 != 0
------------------------------------------------------------------------------
FSO Bucket Can Be Created and Used                                    | PASS |
Cluster does not support FSO
------------------------------------------------------------------------------
HSync Can Be Used To Create Keys                                      | PASS |
Cluster does not support HSYNC
------------------------------------------------------------------------------
xcompat-cluster-1.1.0-client-2.0.0-write :: Write Compatibility       | FAIL |
12 tests, 5 passed, 7 failed
==============================================================================
Output:  /tmp/smoketest/xcompat/result/robot-002.xml
jstack 7 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.0.0-SNAPSHOT/compose/xcompat/result/xcompat-datanode-1_HddsDatanodeService.stack
jstack 7 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.0.0-SNAPSHOT/compose/xcompat/result/xcompat-datanode-2_HddsDatanodeService.stack
jstack 7 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.0.0-SNAPSHOT/compose/xcompat/result/xcompat-datanode-3_HddsDatanodeService.stack
jstack 7 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.0.0-SNAPSHOT/compose/xcompat/result/xcompat-datanode-4_HddsDatanodeService.stack
jstack 7 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.0.0-SNAPSHOT/compose/xcompat/result/xcompat-datanode-5_HddsDatanodeService.stack
sh: jps: not found
sh: jps: command not found
jstack 6 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.0.0-SNAPSHOT/compose/xcompat/result/xcompat-om-1_OzoneManagerStarter.stack
jstack 6 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.0.0-SNAPSHOT/compose/xcompat/result/xcompat-recon-1_ReconServer.stack
jstack 7 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.0.0-SNAPSHOT/compose/xcompat/result/xcompat-s3g-1_Gateway.stack
jstack 6 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.0.0-SNAPSHOT/compose/xcompat/result/xcompat-scm-1_StorageContainerManagerStarter.stack
no configuration file provided: not found
no configuration file provided: not found
no configuration file provided: not found
no configuration file provided: not found
no configuration file provided: not found
no configuration file provided: not found
Failed to remove all docker containers in 3 attempts.
ERROR: Test execution of xcompat/test-old.sh is FAILED!!!!
To use Ozone please mount ozone folder to /opt/hadoop
Output:  /rebot-output/xcompat-old.xml
renamed '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.0.0-SNAPSHOT/compose/result/rebot-VNV9dZ/xcompat-old.xml' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.0.0-SNAPSHOT/compose/result/xcompat-old.xml'
removed 'xcompat/result/robot-001.xml'
removed 'xcompat/result/robot-002.xml'
mkdir: created directory '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.0.0-SNAPSHOT/compose/result/xcompat'
mkdir: created directory '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.0.0-SNAPSHOT/compose/result/xcompat/old'
renamed 'xcompat/result/xcompat-datanode-1_HddsDatanodeService.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.0.0-SNAPSHOT/compose/result/xcompat/old/xcompat-datanode-1_HddsDatanodeService.stack'
renamed 'xcompat/result/xcompat-datanode-2_HddsDatanodeService.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.0.0-SNAPSHOT/compose/result/xcompat/old/xcompat-datanode-2_HddsDatanodeService.stack'
renamed 'xcompat/result/xcompat-datanode-3_HddsDatanodeService.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.0.0-SNAPSHOT/compose/result/xcompat/old/xcompat-datanode-3_HddsDatanodeService.stack'
renamed 'xcompat/result/xcompat-datanode-4_HddsDatanodeService.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.0.0-SNAPSHOT/compose/result/xcompat/old/xcompat-datanode-4_HddsDatanodeService.stack'
renamed 'xcompat/result/xcompat-datanode-5_HddsDatanodeService.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.0.0-SNAPSHOT/compose/result/xcompat/old/xcompat-datanode-5_HddsDatanodeService.stack'
renamed 'xcompat/result/xcompat-om-1_OzoneManagerStarter.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.0.0-SNAPSHOT/compose/result/xcompat/old/xcompat-om-1_OzoneManagerStarter.stack'
renamed 'xcompat/result/xcompat-recon-1_ReconServer.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.0.0-SNAPSHOT/compose/result/xcompat/old/xcompat-recon-1_ReconServer.stack'
renamed 'xcompat/result/xcompat-s3g-1_Gateway.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.0.0-SNAPSHOT/compose/result/xcompat/old/xcompat-s3g-1_Gateway.stack'
renamed 'xcompat/result/xcompat-scm-1_StorageContainerManagerStarter.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.0.0-SNAPSHOT/compose/result/xcompat/old/xcompat-scm-1_StorageContainerManagerStarter.stack'
removed '/tmp/robot-data-sPQ4Uo/small'
removed directory '/tmp/robot-data-sPQ4Uo'
