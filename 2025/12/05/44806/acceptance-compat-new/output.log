Using Docker Compose v2
Executing test xcompat/test-new.sh
Using Docker Compose v2
Starting 2.2.0 cluster with COMPOSE_FILE=new-cluster.yaml:clients.yaml
Port 88 is available on kdc
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is available on scm
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 235
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 234
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 233
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 232
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 231
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 230
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 229
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 228
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 227
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 226
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 225
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 224
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 223
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 222
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 221
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 220
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 219
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 218
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 217
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 216
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 215
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 214
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 213
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 212
SCM is out of safe mode.
No OM HA service, no need to wait
key1 has been successfully created with options Options{cipher='AES/CTR/NoPadding', bitLength=128, description='null', attributes=null}.
org.apache.hadoop.crypto.key.kms.LoadBalancingKMSClientProvider@7749bf93 has been updated.
2025-12-05 09:33:48,268 [main] INFO freon.BaseFreonGenerator: Executing test with prefix warmup and number-of-tests 1
2025-12-05 09:33:48,320 [Thread-5] INFO freon.ProgressBar: Progress: 0.00 % (0 out of 1)
2025-12-05 09:33:49,320 [Thread-5] INFO freon.ProgressBar: Progress: 0.00 % (0 out of 1)
2025-12-05 09:33:49,659 [main] INFO rpc.RpcClient: Creating Volume: vol1, with testuser as owner and space quota set to -1 bytes, counts quota set to -1
2025-12-05 09:33:49,782 [main] INFO rpc.RpcClient: Creating Bucket: vol1/bucket1, with server-side default bucket layout, testuser as owner, Versioning false, Storage Type set to DISK and Encryption set to false, Replication Type set to server-side default replication type, Namespace Quota set to -1, Space Quota set to -1 
2025-12-05 09:33:50,113 [pool-2-thread-1] WARN impl.MetricsSystemImpl: ozone-freon metrics system already initialized!
2025-12-05 09:33:50,181 [pool-2-thread-1] INFO netty.NettyConfigKeys$DataStream: setTlsConf GrpcTlsConfig0-
2025-12-05 09:33:50,320 [Thread-5] INFO freon.ProgressBar: Progress: 0.00 % (0 out of 1)
2025-12-05 09:33:51,322 [Thread-5] INFO freon.ProgressBar: Progress: 0.00 % (0 out of 1)
2025-12-05 09:33:52,322 [Thread-5] INFO freon.ProgressBar: Progress: 100.00 % (1 out of 1)
2025-12-05 09:33:52,353 [shutdown-hook-0] INFO metrics: type=TIMER, name=key-create, count=1, min=1853.675483, max=1853.675483, mean=1853.675483, stddev=0.0, median=1853.675483, p75=1853.675483, p95=1853.675483, p98=1853.675483, p99=1853.675483, p999=1853.675483, mean_rate=0.39530712303189486, m1=0.0, m5=0.0, m15=0.0, rate_unit=events/second, duration_unit=milliseconds
2025-12-05 09:33:52,354 [shutdown-hook-0] INFO freon.BaseFreonGenerator: Total execution time (sec): 4
2025-12-05 09:33:52,354 [shutdown-hook-0] INFO freon.BaseFreonGenerator: Failures: 0
2025-12-05 09:33:52,354 [shutdown-hook-0] INFO freon.BaseFreonGenerator: Successful executions: 1
==============================================================================
xcompat-cluster-2.2.0-client-2.2.0-write :: Write Compatibility               
==============================================================================
Create Bucket With Replication Type                                   | PASS |
------------------------------------------------------------------------------
Create Encrypted Bucket                                               | PASS |
------------------------------------------------------------------------------
Create Key in Encrypted Bucket                                        | PASS |
------------------------------------------------------------------------------
Key Can Be Written                                                    | PASS |
------------------------------------------------------------------------------
Key Can Be Written To Bucket With Replication Type                    | PASS |
------------------------------------------------------------------------------
Key Can Be Deleted                                                    | PASS |
------------------------------------------------------------------------------
Dir Can Be Created                                                    | PASS |
------------------------------------------------------------------------------
File Can Be Put                                                       | PASS |
------------------------------------------------------------------------------
File Can Be Put To Bucket With Replication Type                       | PASS |
------------------------------------------------------------------------------
File Can Be Deleted                                                   | PASS |
------------------------------------------------------------------------------
FSO Bucket Can Be Created and Used                                    | PASS |
------------------------------------------------------------------------------
HSync Can Be Used To Create Keys                                      | PASS |
------------------------------------------------------------------------------
xcompat-cluster-2.2.0-client-2.2.0-write :: Write Compatibility       | PASS |
12 tests, 12 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/xcompat/result/robot-001.xml
==============================================================================
xcompat-cluster-2.2.0-client-1.1.0-write :: Write Compatibility               
==============================================================================
Create Bucket With Replication Type                                   | PASS |
Client does not support EC
------------------------------------------------------------------------------
Create Encrypted Bucket                                               | PASS |
------------------------------------------------------------------------------
Create Key in Encrypted Bucket                                        | PASS |
------------------------------------------------------------------------------
Key Can Be Written                                                    | PASS |
------------------------------------------------------------------------------
Key Can Be Written To Bucket With Replication Type                    | PASS |
------------------------------------------------------------------------------
Key Can Be Deleted                                                    | PASS |
------------------------------------------------------------------------------
Dir Can Be Created                                                    | PASS |
------------------------------------------------------------------------------
File Can Be Put                                                       | PASS |
------------------------------------------------------------------------------
File Can Be Put To Bucket With Replication Type                       | PASS |
------------------------------------------------------------------------------
File Can Be Deleted                                                   | PASS |
------------------------------------------------------------------------------
FSO Bucket Can Be Created and Used                                    | PASS |
Client does not support FSO
------------------------------------------------------------------------------
HSync Can Be Used To Create Keys                                      | PASS |
Client does not support HSYNC
------------------------------------------------------------------------------
xcompat-cluster-2.2.0-client-1.1.0-write :: Write Compatibility       | PASS |
12 tests, 12 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/xcompat/result/robot-002.xml
==============================================================================
xcompat-cluster-2.2.0-client-1.2.1-write :: Write Compatibility               
==============================================================================
Create Bucket With Replication Type                                   | PASS |
Client does not support EC
------------------------------------------------------------------------------
Create Encrypted Bucket                                               | PASS |
------------------------------------------------------------------------------
Create Key in Encrypted Bucket                                        | PASS |
------------------------------------------------------------------------------
Key Can Be Written                                                    | PASS |
------------------------------------------------------------------------------
Key Can Be Written To Bucket With Replication Type                    | PASS |
------------------------------------------------------------------------------
Key Can Be Deleted                                                    | PASS |
------------------------------------------------------------------------------
Dir Can Be Created                                                    | PASS |
------------------------------------------------------------------------------
File Can Be Put                                                       | PASS |
------------------------------------------------------------------------------
File Can Be Put To Bucket With Replication Type                       | PASS |
------------------------------------------------------------------------------
File Can Be Deleted                                                   | PASS |
------------------------------------------------------------------------------
FSO Bucket Can Be Created and Used                                    | PASS |
Client does not support FSO
------------------------------------------------------------------------------
HSync Can Be Used To Create Keys                                      | PASS |
Client does not support HSYNC
------------------------------------------------------------------------------
xcompat-cluster-2.2.0-client-1.2.1-write :: Write Compatibility       | PASS |
12 tests, 12 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/xcompat/result/robot-003.xml
==============================================================================
xcompat-cluster-2.2.0-client-1.3.0-write :: Write Compatibility               
==============================================================================
Create Bucket With Replication Type                                   | PASS |
------------------------------------------------------------------------------
Create Encrypted Bucket                                               | PASS |
------------------------------------------------------------------------------
Create Key in Encrypted Bucket                                        | PASS |
------------------------------------------------------------------------------
Key Can Be Written                                                    | PASS |
------------------------------------------------------------------------------
Key Can Be Written To Bucket With Replication Type                    | PASS |
------------------------------------------------------------------------------
Key Can Be Deleted                                                    | PASS |
------------------------------------------------------------------------------
Dir Can Be Created                                                    | PASS |
------------------------------------------------------------------------------
File Can Be Put                                                       | PASS |
------------------------------------------------------------------------------
File Can Be Put To Bucket With Replication Type                       | PASS |
------------------------------------------------------------------------------
File Can Be Deleted                                                   | PASS |
------------------------------------------------------------------------------
FSO Bucket Can Be Created and Used                                    | PASS |
------------------------------------------------------------------------------
HSync Can Be Used To Create Keys                                      | PASS |
Client does not support HSYNC
------------------------------------------------------------------------------
xcompat-cluster-2.2.0-client-1.3.0-write :: Write Compatibility       | PASS |
12 tests, 12 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/xcompat/result/robot-004.xml
==============================================================================
xcompat-cluster-2.2.0-client-1.4.1-write :: Write Compatibility               
==============================================================================
Create Bucket With Replication Type                                   | PASS |
------------------------------------------------------------------------------
Create Encrypted Bucket                                               | PASS |
------------------------------------------------------------------------------
Create Key in Encrypted Bucket                                        | PASS |
------------------------------------------------------------------------------
Key Can Be Written                                                    | PASS |
------------------------------------------------------------------------------
Key Can Be Written To Bucket With Replication Type                    | FAIL |
255 != 0
------------------------------------------------------------------------------
Key Can Be Deleted                                                    | PASS |
------------------------------------------------------------------------------
Dir Can Be Created                                                    | PASS |
------------------------------------------------------------------------------
File Can Be Put                                                       | PASS |
------------------------------------------------------------------------------
File Can Be Put To Bucket With Replication Type                       | PASS |
------------------------------------------------------------------------------
File Can Be Deleted                                                   | PASS |
------------------------------------------------------------------------------
FSO Bucket Can Be Created and Used                                    | PASS |
------------------------------------------------------------------------------
HSync Can Be Used To Create Keys                                      | PASS |
Client does not support HSYNC
------------------------------------------------------------------------------
xcompat-cluster-2.2.0-client-1.4.1-write :: Write Compatibility       | FAIL |
12 tests, 11 passed, 1 failed
==============================================================================
Output:  /tmp/smoketest/xcompat/result/robot-005.xml
jstack 7 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.2.0-SNAPSHOT/compose/xcompat/result/xcompat-datanode-1_HddsDatanodeService.stack
jstack 7 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.2.0-SNAPSHOT/compose/xcompat/result/xcompat-datanode-2_HddsDatanodeService.stack
jstack 7 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.2.0-SNAPSHOT/compose/xcompat/result/xcompat-datanode-3_HddsDatanodeService.stack
jstack 7 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.2.0-SNAPSHOT/compose/xcompat/result/xcompat-datanode-4_HddsDatanodeService.stack
jstack 7 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.2.0-SNAPSHOT/compose/xcompat/result/xcompat-datanode-5_HddsDatanodeService.stack
bash: line 1: jps: command not found
jstack 12 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.2.0-SNAPSHOT/compose/xcompat/result/xcompat-kms-1_KMSWebServer.stack
jstack 7 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.2.0-SNAPSHOT/compose/xcompat/result/xcompat-om-1_OzoneManagerStarter.stack
jstack 7 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.2.0-SNAPSHOT/compose/xcompat/result/xcompat-recon-1_ReconServer.stack
jstack 7 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.2.0-SNAPSHOT/compose/xcompat/result/xcompat-s3g-1_Gateway.stack
jstack 6 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.2.0-SNAPSHOT/compose/xcompat/result/xcompat-scm-1_StorageContainerManagerStarter.stack
no configuration file provided: not found
no configuration file provided: not found
no configuration file provided: not found
no configuration file provided: not found
no configuration file provided: not found
no configuration file provided: not found
Failed to remove all docker containers in 3 attempts.
ERROR: Test execution of xcompat/test-new.sh is FAILED!!!!
To use Ozone please mount ozone folder to /opt/hadoop
Output:  /rebot-output/xcompat-new.xml
renamed '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.2.0-SNAPSHOT/compose/result/rebot-ukxCUa/xcompat-new.xml' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.2.0-SNAPSHOT/compose/result/xcompat-new.xml'
removed 'xcompat/result/robot-001.xml'
removed 'xcompat/result/robot-002.xml'
removed 'xcompat/result/robot-003.xml'
removed 'xcompat/result/robot-004.xml'
removed 'xcompat/result/robot-005.xml'
mkdir: created directory '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.2.0-SNAPSHOT/compose/result/xcompat'
mkdir: created directory '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.2.0-SNAPSHOT/compose/result/xcompat/new'
renamed 'xcompat/result/xcompat-datanode-1_HddsDatanodeService.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.2.0-SNAPSHOT/compose/result/xcompat/new/xcompat-datanode-1_HddsDatanodeService.stack'
renamed 'xcompat/result/xcompat-datanode-2_HddsDatanodeService.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.2.0-SNAPSHOT/compose/result/xcompat/new/xcompat-datanode-2_HddsDatanodeService.stack'
renamed 'xcompat/result/xcompat-datanode-3_HddsDatanodeService.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.2.0-SNAPSHOT/compose/result/xcompat/new/xcompat-datanode-3_HddsDatanodeService.stack'
renamed 'xcompat/result/xcompat-datanode-4_HddsDatanodeService.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.2.0-SNAPSHOT/compose/result/xcompat/new/xcompat-datanode-4_HddsDatanodeService.stack'
renamed 'xcompat/result/xcompat-datanode-5_HddsDatanodeService.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.2.0-SNAPSHOT/compose/result/xcompat/new/xcompat-datanode-5_HddsDatanodeService.stack'
renamed 'xcompat/result/xcompat-kms-1_KMSWebServer.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.2.0-SNAPSHOT/compose/result/xcompat/new/xcompat-kms-1_KMSWebServer.stack'
renamed 'xcompat/result/xcompat-om-1_OzoneManagerStarter.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.2.0-SNAPSHOT/compose/result/xcompat/new/xcompat-om-1_OzoneManagerStarter.stack'
renamed 'xcompat/result/xcompat-recon-1_ReconServer.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.2.0-SNAPSHOT/compose/result/xcompat/new/xcompat-recon-1_ReconServer.stack'
renamed 'xcompat/result/xcompat-s3g-1_Gateway.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.2.0-SNAPSHOT/compose/result/xcompat/new/xcompat-s3g-1_Gateway.stack'
renamed 'xcompat/result/xcompat-scm-1_StorageContainerManagerStarter.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.2.0-SNAPSHOT/compose/result/xcompat/new/xcompat-scm-1_StorageContainerManagerStarter.stack'
To use Ozone please mount ozone folder to /opt/hadoop
Log:     /rebot-output/log.html
Report:  /rebot-output/report.html
renamed '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.2.0-SNAPSHOT/compose/result/rebot-wD7niW/log.html' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.2.0-SNAPSHOT/compose/result/log.html'
renamed '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.2.0-SNAPSHOT/compose/result/rebot-wD7niW/report.html' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-2.2.0-SNAPSHOT/compose/result/report.html'
removed '/tmp/robot-data-Ie94CQ/small'
removed directory '/tmp/robot-data-Ie94CQ'
