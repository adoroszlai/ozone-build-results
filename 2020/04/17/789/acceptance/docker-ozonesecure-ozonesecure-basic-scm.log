Attaching to ozonesecure_scm_1, ozonesecure_datanode_2, ozonesecure_datanode_3, ozonesecure_om_1, ozonesecure_datanode_1, ozonesecure_s3g_1, ozonesecure_kdc_1, ozonesecure_recon_1, ozonesecure_kms_1
datanode_2  | Sleeping for 5 seconds
datanode_2  | Setting up kerberos!!
datanode_2  | KDC ISSUER_SERVER => kdc:8081
datanode_2  | Sleeping for 5 seconds
datanode_2  | Got 200, KDC service ready!!
datanode_2  | Download dn/d4ddc26437df@EXAMPLE.COM keytab file to /etc/security/keytabs/dn.keytab
datanode_2  | --2020-04-17 18:23:18--  http://kdc:8081/keytab/d4ddc26437df/dn
datanode_2  | Resolving kdc (kdc)... 172.24.0.4
datanode_2  | Connecting to kdc (kdc)|172.24.0.4|:8081... connected.
datanode_2  | HTTP request sent, awaiting response... 200 OK
datanode_2  | Length: 158 [application/octet-stream]
datanode_2  | Saving to: '/etc/security/keytabs/dn.keytab'
datanode_2  | 
datanode_2  |      0K                                                       100% 5.93M=0s
datanode_2  | 
datanode_2  | 2020-04-17 18:23:18 (5.93 MB/s) - '/etc/security/keytabs/dn.keytab' saved [158/158]
datanode_2  | 
datanode_2  | Keytab name: FILE:/etc/security/keytabs/dn.keytab
datanode_2  | KVNO Timestamp         Principal
datanode_2  | ---- ----------------- --------------------------------------------------------
datanode_2  |    2 04/17/20 18:23:18 dn/d4ddc26437df@EXAMPLE.COM
datanode_2  |    2 04/17/20 18:23:18 dn/d4ddc26437df@EXAMPLE.COM
datanode_2  | Download HTTP/d4ddc26437df@EXAMPLE.COM keytab file to /etc/security/keytabs/HTTP.keytab
datanode_2  | --2020-04-17 18:23:18--  http://kdc:8081/keytab/d4ddc26437df/HTTP
datanode_2  | Resolving kdc (kdc)... 172.24.0.4
datanode_2  | Connecting to kdc (kdc)|172.24.0.4|:8081... connected.
datanode_2  | HTTP request sent, awaiting response... 200 OK
datanode_2  | Length: 162 [application/octet-stream]
datanode_2  | Saving to: '/etc/security/keytabs/HTTP.keytab'
datanode_2  | 
datanode_2  |      0K                                                       100% 5.52M=0s
datanode_2  | 
datanode_2  | 2020-04-17 18:23:18 (5.52 MB/s) - '/etc/security/keytabs/HTTP.keytab' saved [162/162]
datanode_2  | 
datanode_2  | Keytab name: FILE:/etc/security/keytabs/HTTP.keytab
datanode_2  | KVNO Timestamp         Principal
datanode_2  | ---- ----------------- --------------------------------------------------------
datanode_2  |    2 04/17/20 18:23:18 HTTP/d4ddc26437df@EXAMPLE.COM
datanode_2  |    2 04/17/20 18:23:18 HTTP/d4ddc26437df@EXAMPLE.COM
datanode_2  | No '-XX:...' jvm parameters are used. Adding safer GC settings to the HADOOP_OPTS
datanode_2  | OpenJDK 64-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated in version 9.0 and will likely be removed in a future release.
datanode_2  | 2020-04-17 18:23:24,077 [main] INFO ozone.HddsDatanodeService: STARTUP_MSG: 
datanode_2  | /************************************************************
datanode_2  | STARTUP_MSG: Starting HddsDatanodeService
datanode_2  | STARTUP_MSG:   host = d4ddc26437df/172.24.0.9
datanode_2  | STARTUP_MSG:   args = []
datanode_2  | STARTUP_MSG:   version = 3.2.0
datanode_1  | Sleeping for 5 seconds
datanode_1  | Setting up kerberos!!
datanode_1  | KDC ISSUER_SERVER => kdc:8081
datanode_1  | Sleeping for 5 seconds
datanode_1  | Got 200, KDC service ready!!
datanode_1  | Download dn/1e870b3d5d4c@EXAMPLE.COM keytab file to /etc/security/keytabs/dn.keytab
datanode_1  | --2020-04-17 18:23:16--  http://kdc:8081/keytab/1e870b3d5d4c/dn
datanode_1  | Resolving kdc (kdc)... 172.24.0.4
datanode_1  | Connecting to kdc (kdc)|172.24.0.4|:8081... connected.
datanode_1  | Keytab name: FILE:/etc/security/keytabs/dn.keytab
datanode_1  | KVNO Timestamp         Principal
datanode_1  | ---- ----------------- --------------------------------------------------------
datanode_1  |    2 04/17/20 18:23:16 dn/1e870b3d5d4c@EXAMPLE.COM
datanode_1  |    2 04/17/20 18:23:16 dn/1e870b3d5d4c@EXAMPLE.COM
datanode_1  | Download HTTP/1e870b3d5d4c@EXAMPLE.COM keytab file to /etc/security/keytabs/HTTP.keytab
datanode_1  | HTTP request sent, awaiting response... 200 OK
datanode_1  | Length: 158 [application/octet-stream]
datanode_1  | Saving to: '/etc/security/keytabs/dn.keytab'
datanode_1  | 
datanode_1  |      0K                                                       100% 28.4M=0s
datanode_1  | 
datanode_1  | 2020-04-17 18:23:16 (28.4 MB/s) - '/etc/security/keytabs/dn.keytab' saved [158/158]
datanode_1  | 
datanode_1  | --2020-04-17 18:23:16--  http://kdc:8081/keytab/1e870b3d5d4c/HTTP
datanode_1  | Resolving kdc (kdc)... 172.24.0.4
datanode_1  | Connecting to kdc (kdc)|172.24.0.4|:8081... connected.
datanode_1  | HTTP request sent, awaiting response... 200 OK
datanode_1  | Length: 162 [application/octet-stream]
datanode_1  | Saving to: '/etc/security/keytabs/HTTP.keytab'
datanode_1  | 
datanode_1  |      0K                                                       100% 21.2M=0s
datanode_1  | 
datanode_1  | 2020-04-17 18:23:16 (21.2 MB/s) - '/etc/security/keytabs/HTTP.keytab' saved [162/162]
datanode_1  | 
datanode_1  | Keytab name: FILE:/etc/security/keytabs/HTTP.keytab
datanode_1  | KVNO Timestamp         Principal
datanode_1  | ---- ----------------- --------------------------------------------------------
datanode_1  |    2 04/17/20 18:23:16 HTTP/1e870b3d5d4c@EXAMPLE.COM
datanode_1  |    2 04/17/20 18:23:16 HTTP/1e870b3d5d4c@EXAMPLE.COM
datanode_1  | No '-XX:...' jvm parameters are used. Adding safer GC settings to the HADOOP_OPTS
datanode_1  | OpenJDK 64-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated in version 9.0 and will likely be removed in a future release.
datanode_1  | 2020-04-17 18:23:21,949 [main] INFO ozone.HddsDatanodeService: STARTUP_MSG: 
datanode_1  | /************************************************************
datanode_1  | STARTUP_MSG: Starting HddsDatanodeService
datanode_1  | STARTUP_MSG:   host = 1e870b3d5d4c/172.24.0.5
datanode_1  | STARTUP_MSG:   args = []
datanode_1  | STARTUP_MSG:   version = 3.2.0
datanode_1  | STARTUP_MSG:   classpath = /etc/hadoop:/opt/hadoop/share/hadoop/common/*:/opt/hadoop/share/ozone/lib/kerb-simplekdc-1.0.1.jar:/opt/hadoop/share/ozone/lib/jackson-databind-2.10.3.jar:/opt/hadoop/share/ozone/lib/protobuf-java-2.5.0.jar:/opt/hadoop/share/ozone/lib/bcpkix-jdk15on-1.60.jar:/opt/hadoop/share/ozone/lib/netty-3.10.5.Final.jar:/opt/hadoop/share/ozone/lib/ratis-proto-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/commons-validator-1.6.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-client-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/jaxb-impl-2.3.0.1.jar:/opt/hadoop/share/ozone/lib/kerb-core-1.0.1.jar:/opt/hadoop/share/ozone/lib/jsr305-3.0.0.jar:/opt/hadoop/share/ozone/lib/j2objc-annotations-1.3.jar:/opt/hadoop/share/ozone/lib/leveldbjni-all-1.8.jar:/opt/hadoop/share/ozone/lib/jetty-io-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/htrace-core4-4.1.0-incubating.jar:/opt/hadoop/share/ozone/lib/jaxb-api-2.3.0.jar:/opt/hadoop/share/ozone/lib/hadoop-annotations-3.2.0.jar:/opt/hadoop/share/ozone/lib/kerb-util-1.0.1.jar:/opt/hadoop/share/ozone/lib/jetty-http-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/jetty-xml-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/jackson-jaxrs-1.9.13.jar:/opt/hadoop/share/ozone/lib/ratis-thirdparty-misc-0.3.0.jar:/opt/hadoop/share/ozone/lib/kerby-xdr-1.0.1.jar:/opt/hadoop/share/ozone/lib/jackson-core-asl-1.9.13.jar:/opt/hadoop/share/ozone/lib/jetty-server-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/commons-net-3.6.jar:/opt/hadoop/share/ozone/lib/log4j-api-2.11.0.jar:/opt/hadoop/share/ozone/lib/hadoop-hdfs-3.2.0.jar:/opt/hadoop/share/ozone/lib/opentracing-api-0.31.0.jar:/opt/hadoop/share/ozone/lib/slf4j-log4j12-1.7.25.jar:/opt/hadoop/share/ozone/lib/hadoop-hdfs-client-3.2.0.jar:/opt/hadoop/share/ozone/lib/kerby-config-1.0.1.jar:/opt/hadoop/share/ozone/lib/libthrift-0.12.0.jar:/opt/hadoop/share/ozone/lib/jetty-util-ajax-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/metrics-core-3.2.4.jar:/opt/hadoop/share/ozone/lib/kerby-pkix-1.0.1.jar:/opt/hadoop/share/ozone/lib/guava-28.2-jre.jar:/opt/hadoop/share/ozone/lib/jetty-servlet-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/xz-1.0.jar:/opt/hadoop/share/ozone/lib/activation-1.1.1.jar:/opt/hadoop/share/ozone/lib/jsr311-api-1.1.1.jar:/opt/hadoop/share/ozone/lib/commons-beanutils-1.9.4.jar:/opt/hadoop/share/ozone/lib/rocksdbjni-6.6.4.jar:/opt/hadoop/share/ozone/lib/jetty-security-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-container-service-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/kerb-server-1.0.1.jar:/opt/hadoop/share/ozone/lib/javax.servlet-api-3.1.0.jar:/opt/hadoop/share/ozone/lib/avro-1.7.7.jar:/opt/hadoop/share/ozone/lib/kerb-client-1.0.1.jar:/opt/hadoop/share/ozone/lib/jackson-xc-1.9.13.jar:/opt/hadoop/share/ozone/lib/disruptor-3.4.2.jar:/opt/hadoop/share/ozone/lib/simpleclient_common-0.7.0.jar:/opt/hadoop/share/ozone/lib/dnsjava-2.1.7.jar:/opt/hadoop/share/ozone/lib/jackson-annotations-2.10.3.jar:/opt/hadoop/share/ozone/lib/commons-configuration2-2.1.1.jar:/opt/hadoop/share/ozone/lib/json-smart-2.3.jar:/opt/hadoop/share/ozone/lib/token-provider-1.0.1.jar:/opt/hadoop/share/ozone/lib/log4j-1.2.17.jar:/opt/hadoop/share/ozone/lib/commons-daemon-1.0.13.jar:/opt/hadoop/share/ozone/lib/listenablefuture-9999.0-empty-to-avoid-conflict-with-guava.jar:/opt/hadoop/share/ozone/lib/bcprov-jdk15on-1.60.jar:/opt/hadoop/share/ozone/lib/ratis-grpc-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/jetty-webapp-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/commons-lang3-3.7.jar:/opt/hadoop/share/ozone/lib/jaeger-client-0.34.0.jar:/opt/hadoop/share/ozone/lib/commons-compress-1.4.1.jar:/opt/hadoop/share/ozone/lib/accessors-smart-1.2.jar:/opt/hadoop/share/ozone/lib/re2j-1.1.jar:/opt/hadoop/share/ozone/lib/ratis-client-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/commons-math3-3.1.1.jar:/opt/hadoop/share/ozone/lib/simpleclient_dropwizard-0.7.0.jar:/opt/hadoop/share/ozone/lib/opentracing-noop-0.31.0.jar:/opt/hadoop/share/ozone/lib/simpleclient-0.7.0.jar:/opt/hadoop/share/ozone/lib/httpclient-4.5.2.jar:/opt/hadoop/share/ozone/lib/jaeger-core-0.34.0.jar:/opt/hadoop/share/ozone/lib/asm-5.0.4.jar:/opt/hadoop/share/ozone/lib/kerby-util-1.0.1.jar:/opt/hadoop/share/ozone/lib/failureaccess-1.0.1.jar:/opt/hadoop/share/ozone/lib/jackson-mapper-asl-1.9.13.jar:/opt/hadoop/share/ozone/lib/jsp-api-2.1.jar:/opt/hadoop/share/ozone/lib/jsch-0.1.54.jar:/opt/hadoop/share/ozone/lib/ratis-metrics-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/opentracing-tracerresolver-0.1.5.jar:/opt/hadoop/share/ozone/lib/ratis-common-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/paranamer-2.3.jar:/opt/hadoop/share/ozone/lib/log4j-core-2.11.0.jar:/opt/hadoop/share/ozone/lib/nimbus-jose-jwt-7.9.jar:/opt/hadoop/share/ozone/lib/commons-codec-1.11.jar:/opt/hadoop/share/ozone/lib/commons-pool2-2.6.0.jar:/opt/hadoop/share/ozone/lib/jackson-datatype-jsr310-2.10.3.jar:/opt/hadoop/share/ozone/lib/gson-2.2.4.jar:/opt/hadoop/share/ozone/lib/jcip-annotations-1.0-1.jar:/opt/hadoop/share/ozone/lib/kerb-admin-1.0.1.jar:/opt/hadoop/share/ozone/lib/commons-io-2.5.jar:/opt/hadoop/share/ozone/lib/okio-1.13.0.jar:/opt/hadoop/share/ozone/lib/snakeyaml-1.16.jar:/opt/hadoop/share/ozone/lib/jetty-util-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/jersey-core-1.19.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-hadoop-dependency-client-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/checker-qual-2.10.0.jar:/opt/hadoop/share/ozone/lib/ratis-server-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-server-framework-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/picocli-3.9.6.jar:/opt/hadoop/share/ozone/lib/jaeger-thrift-0.34.0.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-common-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/commons-cli-1.2.jar:/opt/hadoop/share/ozone/lib/woodstox-core-5.0.3.jar:/opt/hadoop/share/ozone/lib/snappy-java-1.0.5.jar:/opt/hadoop/share/ozone/lib/javax.annotation-api-1.2.jar:/opt/hadoop/share/ozone/lib/jaeger-tracerresolver-0.34.0.jar:/opt/hadoop/share/ozone/lib/kerby-asn1-1.0.1.jar:/opt/hadoop/share/ozone/lib/netty-all-4.1.48.Final.jar:/opt/hadoop/share/ozone/lib/okhttp-3.9.0.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-config-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/stax2-api-3.1.4.jar:/opt/hadoop/share/ozone/lib/commons-collections-3.2.2.jar:/opt/hadoop/share/ozone/lib/commons-digester-1.8.1.jar:/opt/hadoop/share/ozone/lib/jettison-1.1.jar:/opt/hadoop/share/ozone/lib/commons-text-1.4.jar:/opt/hadoop/share/ozone/lib/jackson-core-2.10.3.jar:/opt/hadoop/share/ozone/lib/jersey-servlet-1.19.jar:/opt/hadoop/share/ozone/lib/jersey-json-1.19.jar:/opt/hadoop/share/ozone/lib/slf4j-api-1.7.25.jar:/opt/hadoop/share/ozone/lib/commons-logging-1.1.3.jar:/opt/hadoop/share/ozone/lib/kerb-identity-1.0.1.jar:/opt/hadoop/share/ozone/lib/opentracing-util-0.31.0.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-hadoop-dependency-server-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/hadoop-common-3.2.0.jar:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar:/opt/hadoop/share/ozone/lib/kerb-common-1.0.1.jar:/opt/hadoop/share/ozone/lib/jaxb-core-2.3.0.1.jar:/opt/hadoop/share/ozone/lib/jersey-server-1.19.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-common-0.6.0-SNAPSHOT-tests.jar:/opt/hadoop/share/ozone/lib/kerb-crypto-1.0.1.jar:/opt/hadoop/share/ozone/lib/httpcore-4.4.4.jar:/opt/hadoop/share/ozone/lib/ratis-netty-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/web:/opt/hadoop/share/ozone/lib/hadoop-ozone-datanode-0.6.0-SNAPSHOT.jar
datanode_1  | STARTUP_MSG:   build = https://github.com/apache/hadoop.git -r e97acb3bd8f3befd27418996fa5d4b50bf2e17bf; compiled by 'sunilg' on 2019-01-15T17:34Z
datanode_1  | STARTUP_MSG:   java = 11.0.6
datanode_1  | ************************************************************/
datanode_1  | 2020-04-17 18:23:22,026 [main] INFO ozone.HddsDatanodeService: registered UNIX signal handlers for [TERM, HUP, INT]
datanode_1  | 2020-04-17 18:23:23,887 [main] INFO metrics.MetricRegistries: Loaded MetricRegistries class org.apache.ratis.metrics.impl.MetricRegistriesImpl
datanode_1  | 2020-04-17 18:23:24,469 [main] INFO impl.MetricsConfig: Loaded properties from hadoop-metrics2.properties
datanode_1  | 2020-04-17 18:23:25,471 [main] INFO impl.MetricsSystemImpl: Scheduled Metric snapshot period at 10 second(s).
datanode_1  | 2020-04-17 18:23:25,493 [main] INFO impl.MetricsSystemImpl: HddsDatanode metrics system started
datanode_1  | 2020-04-17 18:23:26,474 [main] INFO ozone.HddsDatanodeService: HddsDatanodeService host:1e870b3d5d4c ip:172.24.0.5
datanode_1  | 2020-04-17 18:23:28,956 [main] INFO ozone.HddsDatanodeService: Ozone security is enabled. Attempting login for Hdds Datanode user. Principal: dn/_HOST@EXAMPLE.COM,keytab: /etc/security/keytabs/dn.keytab
datanode_1  | WARNING: An illegal reflective access operation has occurred
datanode_1  | WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
datanode_1  | WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
datanode_1  | WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
datanode_1  | WARNING: All illegal access operations will be denied in a future release
datanode_1  | 2020-04-17 18:23:30,206 [main] INFO security.UserGroupInformation: Login successful for user dn/1e870b3d5d4c@EXAMPLE.COM using keytab file /etc/security/keytabs/dn.keytab
datanode_1  | 2020-04-17 18:23:30,209 [main] INFO ozone.HddsDatanodeService: Hdds Datanode login successful.
datanode_1  | 2020-04-17 18:23:30,211 [main] INFO ozone.HddsDatanodeService: Initializing secure Datanode.
datanode_1  | 2020-04-17 18:23:30,211 [main] ERROR client.DNCertificateClient: Default certificate serial id is not set. Can't locate the default certificate for this client.
datanode_1  | 2020-04-17 18:23:30,211 [main] INFO client.DNCertificateClient: Certificate client init case: 0
datanode_1  | 2020-04-17 18:23:30,212 [main] INFO client.DNCertificateClient: Creating keypair for client as keypair and certificate not found.
datanode_1  | 2020-04-17 18:23:33,481 [main] INFO ozone.HddsDatanodeService: Init response: GETCERT
datanode_1  | 2020-04-17 18:23:33,537 [main] INFO ozone.OzoneSecurityUtil: Adding ip:172.24.0.5,host:1e870b3d5d4c
datanode_1  | 2020-04-17 18:23:33,538 [main] INFO ozone.OzoneSecurityUtil: ip:127.0.0.1 not returned.
datanode_1  | 2020-04-17 18:23:33,581 [main] INFO ozone.HddsDatanodeService: Creating csr for DN-> subject:root@1e870b3d5d4c
datanode_1  | 2020-04-17 18:23:35,831 [main] INFO ipc.Client: Retrying connect to server: scm/172.24.0.6:9961. Already tried 0 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=2147483647, sleepTime=1000 MILLISECONDS)
datanode_1  | 2020-04-17 18:23:36,833 [main] INFO ipc.Client: Retrying connect to server: scm/172.24.0.6:9961. Already tried 1 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=2147483647, sleepTime=1000 MILLISECONDS)
datanode_1  | 2020-04-17 18:23:37,834 [main] INFO ipc.Client: Retrying connect to server: scm/172.24.0.6:9961. Already tried 2 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=2147483647, sleepTime=1000 MILLISECONDS)
datanode_1  | 2020-04-17 18:23:38,855 [main] INFO ipc.Client: Retrying connect to server: scm/172.24.0.6:9961. Already tried 3 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=2147483647, sleepTime=1000 MILLISECONDS)
datanode_1  | 2020-04-17 18:23:39,856 [main] INFO ipc.Client: Retrying connect to server: scm/172.24.0.6:9961. Already tried 4 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=2147483647, sleepTime=1000 MILLISECONDS)
datanode_1  | 2020-04-17 18:23:40,857 [main] INFO ipc.Client: Retrying connect to server: scm/172.24.0.6:9961. Already tried 5 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=2147483647, sleepTime=1000 MILLISECONDS)
datanode_1  | 2020-04-17 18:23:41,859 [main] INFO ipc.Client: Retrying connect to server: scm/172.24.0.6:9961. Already tried 6 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=2147483647, sleepTime=1000 MILLISECONDS)
datanode_1  | 2020-04-17 18:23:42,860 [main] INFO ipc.Client: Retrying connect to server: scm/172.24.0.6:9961. Already tried 7 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=2147483647, sleepTime=1000 MILLISECONDS)
datanode_1  | 2020-04-17 18:23:45,384 [main] INFO ozone.HddsDatanodeService: Successfully stored SCM signed certificate, case:GETCERT.
datanode_1  | 2020-04-17 18:23:45,606 [main] INFO fs.SaveSpaceUsageToFile: Cached usage info file /data/hdds/scmUsed not found
datanode_1  | 2020-04-17 18:23:45,614 [main] INFO volume.HddsVolume: Creating Volume: /data/hdds/hdds of storage type : DISK and capacity : 89311358976
datanode_1  | 2020-04-17 18:23:45,637 [main] INFO volume.MutableVolumeSet: Added Volume : /data/hdds/hdds to VolumeSet
datanode_1  | 2020-04-17 18:23:45,676 [main] INFO volume.ThrottledAsyncChecker: Scheduling a check for /data/hdds/hdds
datanode_1  | 2020-04-17 18:23:45,723 [main] INFO volume.HddsVolumeChecker: Scheduled health check for volume /data/hdds/hdds
datanode_2  | STARTUP_MSG:   classpath = /etc/hadoop:/opt/hadoop/share/hadoop/common/*:/opt/hadoop/share/ozone/lib/kerb-simplekdc-1.0.1.jar:/opt/hadoop/share/ozone/lib/jackson-databind-2.10.3.jar:/opt/hadoop/share/ozone/lib/protobuf-java-2.5.0.jar:/opt/hadoop/share/ozone/lib/bcpkix-jdk15on-1.60.jar:/opt/hadoop/share/ozone/lib/netty-3.10.5.Final.jar:/opt/hadoop/share/ozone/lib/ratis-proto-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/commons-validator-1.6.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-client-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/jaxb-impl-2.3.0.1.jar:/opt/hadoop/share/ozone/lib/kerb-core-1.0.1.jar:/opt/hadoop/share/ozone/lib/jsr305-3.0.0.jar:/opt/hadoop/share/ozone/lib/j2objc-annotations-1.3.jar:/opt/hadoop/share/ozone/lib/leveldbjni-all-1.8.jar:/opt/hadoop/share/ozone/lib/jetty-io-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/htrace-core4-4.1.0-incubating.jar:/opt/hadoop/share/ozone/lib/jaxb-api-2.3.0.jar:/opt/hadoop/share/ozone/lib/hadoop-annotations-3.2.0.jar:/opt/hadoop/share/ozone/lib/kerb-util-1.0.1.jar:/opt/hadoop/share/ozone/lib/jetty-http-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/jetty-xml-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/jackson-jaxrs-1.9.13.jar:/opt/hadoop/share/ozone/lib/ratis-thirdparty-misc-0.3.0.jar:/opt/hadoop/share/ozone/lib/kerby-xdr-1.0.1.jar:/opt/hadoop/share/ozone/lib/jackson-core-asl-1.9.13.jar:/opt/hadoop/share/ozone/lib/jetty-server-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/commons-net-3.6.jar:/opt/hadoop/share/ozone/lib/log4j-api-2.11.0.jar:/opt/hadoop/share/ozone/lib/hadoop-hdfs-3.2.0.jar:/opt/hadoop/share/ozone/lib/opentracing-api-0.31.0.jar:/opt/hadoop/share/ozone/lib/slf4j-log4j12-1.7.25.jar:/opt/hadoop/share/ozone/lib/hadoop-hdfs-client-3.2.0.jar:/opt/hadoop/share/ozone/lib/kerby-config-1.0.1.jar:/opt/hadoop/share/ozone/lib/libthrift-0.12.0.jar:/opt/hadoop/share/ozone/lib/jetty-util-ajax-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/metrics-core-3.2.4.jar:/opt/hadoop/share/ozone/lib/kerby-pkix-1.0.1.jar:/opt/hadoop/share/ozone/lib/guava-28.2-jre.jar:/opt/hadoop/share/ozone/lib/jetty-servlet-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/xz-1.0.jar:/opt/hadoop/share/ozone/lib/activation-1.1.1.jar:/opt/hadoop/share/ozone/lib/jsr311-api-1.1.1.jar:/opt/hadoop/share/ozone/lib/commons-beanutils-1.9.4.jar:/opt/hadoop/share/ozone/lib/rocksdbjni-6.6.4.jar:/opt/hadoop/share/ozone/lib/jetty-security-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-container-service-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/kerb-server-1.0.1.jar:/opt/hadoop/share/ozone/lib/javax.servlet-api-3.1.0.jar:/opt/hadoop/share/ozone/lib/avro-1.7.7.jar:/opt/hadoop/share/ozone/lib/kerb-client-1.0.1.jar:/opt/hadoop/share/ozone/lib/jackson-xc-1.9.13.jar:/opt/hadoop/share/ozone/lib/disruptor-3.4.2.jar:/opt/hadoop/share/ozone/lib/simpleclient_common-0.7.0.jar:/opt/hadoop/share/ozone/lib/dnsjava-2.1.7.jar:/opt/hadoop/share/ozone/lib/jackson-annotations-2.10.3.jar:/opt/hadoop/share/ozone/lib/commons-configuration2-2.1.1.jar:/opt/hadoop/share/ozone/lib/json-smart-2.3.jar:/opt/hadoop/share/ozone/lib/token-provider-1.0.1.jar:/opt/hadoop/share/ozone/lib/log4j-1.2.17.jar:/opt/hadoop/share/ozone/lib/commons-daemon-1.0.13.jar:/opt/hadoop/share/ozone/lib/listenablefuture-9999.0-empty-to-avoid-conflict-with-guava.jar:/opt/hadoop/share/ozone/lib/bcprov-jdk15on-1.60.jar:/opt/hadoop/share/ozone/lib/ratis-grpc-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/jetty-webapp-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/commons-lang3-3.7.jar:/opt/hadoop/share/ozone/lib/jaeger-client-0.34.0.jar:/opt/hadoop/share/ozone/lib/commons-compress-1.4.1.jar:/opt/hadoop/share/ozone/lib/accessors-smart-1.2.jar:/opt/hadoop/share/ozone/lib/re2j-1.1.jar:/opt/hadoop/share/ozone/lib/ratis-client-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/commons-math3-3.1.1.jar:/opt/hadoop/share/ozone/lib/simpleclient_dropwizard-0.7.0.jar:/opt/hadoop/share/ozone/lib/opentracing-noop-0.31.0.jar:/opt/hadoop/share/ozone/lib/simpleclient-0.7.0.jar:/opt/hadoop/share/ozone/lib/httpclient-4.5.2.jar:/opt/hadoop/share/ozone/lib/jaeger-core-0.34.0.jar:/opt/hadoop/share/ozone/lib/asm-5.0.4.jar:/opt/hadoop/share/ozone/lib/kerby-util-1.0.1.jar:/opt/hadoop/share/ozone/lib/failureaccess-1.0.1.jar:/opt/hadoop/share/ozone/lib/jackson-mapper-asl-1.9.13.jar:/opt/hadoop/share/ozone/lib/jsp-api-2.1.jar:/opt/hadoop/share/ozone/lib/jsch-0.1.54.jar:/opt/hadoop/share/ozone/lib/ratis-metrics-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/opentracing-tracerresolver-0.1.5.jar:/opt/hadoop/share/ozone/lib/ratis-common-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/paranamer-2.3.jar:/opt/hadoop/share/ozone/lib/log4j-core-2.11.0.jar:/opt/hadoop/share/ozone/lib/nimbus-jose-jwt-7.9.jar:/opt/hadoop/share/ozone/lib/commons-codec-1.11.jar:/opt/hadoop/share/ozone/lib/commons-pool2-2.6.0.jar:/opt/hadoop/share/ozone/lib/jackson-datatype-jsr310-2.10.3.jar:/opt/hadoop/share/ozone/lib/gson-2.2.4.jar:/opt/hadoop/share/ozone/lib/jcip-annotations-1.0-1.jar:/opt/hadoop/share/ozone/lib/kerb-admin-1.0.1.jar:/opt/hadoop/share/ozone/lib/commons-io-2.5.jar:/opt/hadoop/share/ozone/lib/okio-1.13.0.jar:/opt/hadoop/share/ozone/lib/snakeyaml-1.16.jar:/opt/hadoop/share/ozone/lib/jetty-util-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/jersey-core-1.19.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-hadoop-dependency-client-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/checker-qual-2.10.0.jar:/opt/hadoop/share/ozone/lib/ratis-server-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-server-framework-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/picocli-3.9.6.jar:/opt/hadoop/share/ozone/lib/jaeger-thrift-0.34.0.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-common-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/commons-cli-1.2.jar:/opt/hadoop/share/ozone/lib/woodstox-core-5.0.3.jar:/opt/hadoop/share/ozone/lib/snappy-java-1.0.5.jar:/opt/hadoop/share/ozone/lib/javax.annotation-api-1.2.jar:/opt/hadoop/share/ozone/lib/jaeger-tracerresolver-0.34.0.jar:/opt/hadoop/share/ozone/lib/kerby-asn1-1.0.1.jar:/opt/hadoop/share/ozone/lib/netty-all-4.1.48.Final.jar:/opt/hadoop/share/ozone/lib/okhttp-3.9.0.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-config-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/stax2-api-3.1.4.jar:/opt/hadoop/share/ozone/lib/commons-collections-3.2.2.jar:/opt/hadoop/share/ozone/lib/commons-digester-1.8.1.jar:/opt/hadoop/share/ozone/lib/jettison-1.1.jar:/opt/hadoop/share/ozone/lib/commons-text-1.4.jar:/opt/hadoop/share/ozone/lib/jackson-core-2.10.3.jar:/opt/hadoop/share/ozone/lib/jersey-servlet-1.19.jar:/opt/hadoop/share/ozone/lib/jersey-json-1.19.jar:/opt/hadoop/share/ozone/lib/slf4j-api-1.7.25.jar:/opt/hadoop/share/ozone/lib/commons-logging-1.1.3.jar:/opt/hadoop/share/ozone/lib/kerb-identity-1.0.1.jar:/opt/hadoop/share/ozone/lib/opentracing-util-0.31.0.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-hadoop-dependency-server-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/hadoop-common-3.2.0.jar:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar:/opt/hadoop/share/ozone/lib/kerb-common-1.0.1.jar:/opt/hadoop/share/ozone/lib/jaxb-core-2.3.0.1.jar:/opt/hadoop/share/ozone/lib/jersey-server-1.19.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-common-0.6.0-SNAPSHOT-tests.jar:/opt/hadoop/share/ozone/lib/kerb-crypto-1.0.1.jar:/opt/hadoop/share/ozone/lib/httpcore-4.4.4.jar:/opt/hadoop/share/ozone/lib/ratis-netty-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/web:/opt/hadoop/share/ozone/lib/hadoop-ozone-datanode-0.6.0-SNAPSHOT.jar
datanode_2  | STARTUP_MSG:   build = https://github.com/apache/hadoop.git -r e97acb3bd8f3befd27418996fa5d4b50bf2e17bf; compiled by 'sunilg' on 2019-01-15T17:34Z
datanode_2  | STARTUP_MSG:   java = 11.0.6
datanode_2  | ************************************************************/
datanode_2  | 2020-04-17 18:23:24,104 [main] INFO ozone.HddsDatanodeService: registered UNIX signal handlers for [TERM, HUP, INT]
datanode_2  | 2020-04-17 18:23:25,891 [main] INFO metrics.MetricRegistries: Loaded MetricRegistries class org.apache.ratis.metrics.impl.MetricRegistriesImpl
datanode_2  | 2020-04-17 18:23:26,409 [main] INFO impl.MetricsConfig: Loaded properties from hadoop-metrics2.properties
datanode_2  | 2020-04-17 18:23:27,615 [main] INFO impl.MetricsSystemImpl: Scheduled Metric snapshot period at 10 second(s).
datanode_2  | 2020-04-17 18:23:27,615 [main] INFO impl.MetricsSystemImpl: HddsDatanode metrics system started
datanode_2  | 2020-04-17 18:23:28,605 [main] INFO ozone.HddsDatanodeService: HddsDatanodeService host:d4ddc26437df ip:172.24.0.9
datanode_2  | 2020-04-17 18:23:30,910 [main] INFO ozone.HddsDatanodeService: Ozone security is enabled. Attempting login for Hdds Datanode user. Principal: dn/_HOST@EXAMPLE.COM,keytab: /etc/security/keytabs/dn.keytab
datanode_2  | WARNING: An illegal reflective access operation has occurred
datanode_2  | WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
datanode_2  | WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
datanode_2  | WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
datanode_2  | WARNING: All illegal access operations will be denied in a future release
datanode_2  | 2020-04-17 18:23:32,197 [main] INFO security.UserGroupInformation: Login successful for user dn/d4ddc26437df@EXAMPLE.COM using keytab file /etc/security/keytabs/dn.keytab
datanode_2  | 2020-04-17 18:23:32,197 [main] INFO ozone.HddsDatanodeService: Hdds Datanode login successful.
datanode_2  | 2020-04-17 18:23:32,208 [main] INFO ozone.HddsDatanodeService: Initializing secure Datanode.
datanode_2  | 2020-04-17 18:23:32,209 [main] ERROR client.DNCertificateClient: Default certificate serial id is not set. Can't locate the default certificate for this client.
datanode_2  | 2020-04-17 18:23:32,209 [main] INFO client.DNCertificateClient: Certificate client init case: 0
datanode_2  | 2020-04-17 18:23:32,210 [main] INFO client.DNCertificateClient: Creating keypair for client as keypair and certificate not found.
datanode_2  | 2020-04-17 18:23:36,105 [main] INFO ozone.HddsDatanodeService: Init response: GETCERT
datanode_2  | 2020-04-17 18:23:36,277 [main] INFO ozone.OzoneSecurityUtil: Adding ip:172.24.0.9,host:d4ddc26437df
datanode_2  | 2020-04-17 18:23:36,283 [main] INFO ozone.OzoneSecurityUtil: ip:127.0.0.1 not returned.
datanode_2  | 2020-04-17 18:23:36,290 [main] INFO ozone.HddsDatanodeService: Creating csr for DN-> subject:root@d4ddc26437df
datanode_2  | 2020-04-17 18:23:38,014 [main] INFO ipc.Client: Retrying connect to server: scm/172.24.0.6:9961. Already tried 0 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=2147483647, sleepTime=1000 MILLISECONDS)
datanode_2  | 2020-04-17 18:23:39,015 [main] INFO ipc.Client: Retrying connect to server: scm/172.24.0.6:9961. Already tried 1 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=2147483647, sleepTime=1000 MILLISECONDS)
datanode_2  | 2020-04-17 18:23:40,016 [main] INFO ipc.Client: Retrying connect to server: scm/172.24.0.6:9961. Already tried 2 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=2147483647, sleepTime=1000 MILLISECONDS)
datanode_2  | 2020-04-17 18:23:41,017 [main] INFO ipc.Client: Retrying connect to server: scm/172.24.0.6:9961. Already tried 3 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=2147483647, sleepTime=1000 MILLISECONDS)
datanode_2  | 2020-04-17 18:23:42,018 [main] INFO ipc.Client: Retrying connect to server: scm/172.24.0.6:9961. Already tried 4 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=2147483647, sleepTime=1000 MILLISECONDS)
datanode_2  | 2020-04-17 18:23:43,019 [main] INFO ipc.Client: Retrying connect to server: scm/172.24.0.6:9961. Already tried 5 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=2147483647, sleepTime=1000 MILLISECONDS)
datanode_2  | 2020-04-17 18:23:45,263 [main] INFO ozone.HddsDatanodeService: Successfully stored SCM signed certificate, case:GETCERT.
datanode_2  | 2020-04-17 18:23:45,448 [main] INFO fs.SaveSpaceUsageToFile: Cached usage info file /data/hdds/scmUsed not found
datanode_2  | 2020-04-17 18:23:45,461 [main] INFO volume.HddsVolume: Creating Volume: /data/hdds/hdds of storage type : DISK and capacity : 89311358976
datanode_2  | 2020-04-17 18:23:45,462 [main] INFO volume.MutableVolumeSet: Added Volume : /data/hdds/hdds to VolumeSet
datanode_2  | 2020-04-17 18:23:45,501 [main] INFO volume.ThrottledAsyncChecker: Scheduling a check for /data/hdds/hdds
datanode_2  | 2020-04-17 18:23:45,603 [main] INFO volume.HddsVolumeChecker: Scheduled health check for volume /data/hdds/hdds
datanode_2  | 2020-04-17 18:23:47,332 [main] WARN server.ServerUtils: Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
datanode_2  | 2020-04-17 18:23:47,562 [main] INFO impl.RaftServerProxy: raft.rpc.type = GRPC (default)
datanode_2  | 2020-04-17 18:23:47,883 [main] INFO grpc.GrpcConfigKeys: raft.grpc.server.port = 9858 (custom)
datanode_1  | 2020-04-17 18:23:47,710 [main] WARN server.ServerUtils: Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
datanode_1  | 2020-04-17 18:23:47,865 [main] INFO impl.RaftServerProxy: raft.rpc.type = GRPC (default)
datanode_1  | 2020-04-17 18:23:48,088 [main] INFO grpc.GrpcConfigKeys: raft.grpc.server.port = 9858 (custom)
datanode_1  | 2020-04-17 18:23:48,095 [main] INFO server.GrpcService: raft.grpc.message.size.max = 32MB (=33554432) (custom)
datanode_1  | 2020-04-17 18:23:48,096 [main] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
datanode_1  | 2020-04-17 18:23:48,096 [main] INFO server.GrpcService: raft.grpc.flow.control.window = 5MB (=5242880) (custom)
datanode_1  | 2020-04-17 18:23:48,104 [main] INFO server.RaftServerConfigKeys: raft.server.rpc.request.timeout = 60s (custom)
datanode_1  | 2020-04-17 18:23:48,783 [main] INFO server.RaftServerConfigKeys: raft.server.storage.dir = [/data/metadata/ratis] (custom)
datanode_1  | 2020-04-17 18:23:49,171 [main] INFO http.BaseHttpServer: Starting Web-server for hddsDatanode at: http://0.0.0.0:9882
datanode_1  | 2020-04-17 18:23:49,436 [main] INFO util.log: Logging initialized @32730ms to org.eclipse.jetty.util.log.Slf4jLog
datanode_1  | 2020-04-17 18:23:49,863 [main] INFO server.AuthenticationFilter: Unable to initialize FileSignerSecretProvider, falling back to use random secrets.
datanode_1  | 2020-04-17 18:23:49,879 [main] INFO http.HttpRequestLog: Http request log for http.requests.hddsDatanode is not defined
datanode_1  | 2020-04-17 18:23:49,896 [main] INFO http.HttpServer2: Added global filter 'safety' (class=org.apache.hadoop.hdds.server.http.HttpServer2$QuotingInputFilter)
datanode_1  | 2020-04-17 18:23:49,916 [main] INFO http.HttpServer2: Added filter static_user_filter (class=org.apache.hadoop.hdds.server.http.StaticUserWebFilter$StaticUserFilter) to context hddsDatanode
datanode_1  | 2020-04-17 18:23:49,916 [main] INFO http.HttpServer2: Added filter static_user_filter (class=org.apache.hadoop.hdds.server.http.StaticUserWebFilter$StaticUserFilter) to context logs
datanode_1  | 2020-04-17 18:23:49,917 [main] INFO http.HttpServer2: Added filter static_user_filter (class=org.apache.hadoop.hdds.server.http.StaticUserWebFilter$StaticUserFilter) to context static
datanode_1  | 2020-04-17 18:23:50,064 [main] INFO http.HttpServer2: Jetty bound to port 9882
datanode_1  | 2020-04-17 18:23:50,068 [main] INFO server.Server: jetty-9.4.26.v20200117; built: 2020-01-17T12:35:33.676Z; git: 7b38981d25d14afb4a12ff1f2596756144edf695; jvm 11.0.6+10-LTS
datanode_1  | 2020-04-17 18:23:50,172 [main] INFO server.session: DefaultSessionIdManager workerName=node0
datanode_1  | 2020-04-17 18:23:50,177 [main] INFO server.session: No SessionScavenger set, using defaults
datanode_1  | 2020-04-17 18:23:50,192 [main] INFO server.session: node0 Scavenging every 600000ms
datanode_1  | 2020-04-17 18:23:50,227 [main] INFO handler.ContextHandler: Started o.e.j.s.ServletContextHandler@79d7035{logs,/logs,file:///var/log/hadoop/,AVAILABLE}
datanode_1  | 2020-04-17 18:23:50,228 [main] INFO handler.ContextHandler: Started o.e.j.s.ServletContextHandler@126f8f24{static,/static,jar:file:/opt/hadoop/share/ozone/lib/hadoop-hdds-container-service-0.6.0-SNAPSHOT.jar!/webapps/static,AVAILABLE}
datanode_1  | 2020-04-17 18:23:50,621 [main] INFO handler.ContextHandler: Started o.e.j.w.WebAppContext@2a8dd942{hddsDatanode,/,file:///tmp/jetty-0_0_0_0-9882-hadoop-hdds-container-service-0_6_0-SNAPSHOT_jar-_-any-1013294248077769919.dir/webapp/,AVAILABLE}{jar:file:/opt/hadoop/share/ozone/lib/hadoop-hdds-container-service-0.6.0-SNAPSHOT.jar!/webapps/hddsDatanode}
datanode_1  | 2020-04-17 18:23:50,675 [main] INFO server.AbstractConnector: Started ServerConnector@4b87760e{HTTP/1.1,[http/1.1]}{0.0.0.0:9882}
datanode_1  | 2020-04-17 18:23:50,686 [main] INFO server.Server: Started @33980ms
datanode_1  | 2020-04-17 18:23:50,710 [main] INFO impl.MetricsSinkAdapter: Sink prometheus started
datanode_1  | 2020-04-17 18:23:50,710 [main] INFO impl.MetricsSystemImpl: Registered sink prometheus
datanode_1  | 2020-04-17 18:23:50,731 [main] INFO http.BaseHttpServer: HTTP server of hddsDatanode listening at http://0.0.0.0:9882
datanode_1  | 2020-04-17 18:23:50,792 [org.apache.hadoop.util.JvmPauseMonitor$Monitor@3eaf7fcd] INFO util.JvmPauseMonitor: Starting JVM pause monitor
datanode_1  | 2020-04-17 18:23:50,838 [Datanode State Machine Thread - 0] INFO statemachine.SCMConnectionManager: Adding Recon Server : recon/172.24.0.3:9891
datanode_1  | 2020-04-17 18:23:53,192 [Datanode State Machine Thread - 0] INFO ozoneimpl.OzoneContainer: Attempting to start container services.
datanode_1  | 2020-04-17 18:23:53,196 [Datanode State Machine Thread - 0] INFO ozoneimpl.OzoneContainer: Background container scanner has been disabled.
datanode_1  | 2020-04-17 18:23:53,196 [Datanode State Machine Thread - 0] INFO ratis.XceiverServerRatis: Starting XceiverServerRatis 0086d012-6f96-4817-8e1b-94f6eaa443bc at port 9858
datanode_1  | 2020-04-17 18:23:53,304 [Datanode State Machine Thread - 0] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: start RPC server
datanode_1  | 2020-04-17 18:23:53,740 [Datanode State Machine Thread - 0] INFO server.GrpcService: 0086d012-6f96-4817-8e1b-94f6eaa443bc: GrpcService started, listening on 0.0.0.0/0.0.0.0:9858
datanode_1  | 2020-04-17 18:23:57,839 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: addNew group-E3A4286DACE8:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858] returns group-E3A4286DACE8:java.util.concurrent.CompletableFuture@b8d0759[Not completed]
datanode_1  | 2020-04-17 18:23:57,876 [pool-70-thread-1] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc: new RaftServerImpl for group-E3A4286DACE8:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858] with ContainerStateMachine:uninitialized
datanode_1  | 2020-04-17 18:23:57,880 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.min = 5s (custom)
datanode_1  | 2020-04-17 18:23:57,883 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.max = 5200ms (custom)
datanode_1  | 2020-04-17 18:23:57,883 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpcslowness.timeout = 300s (custom)
datanode_1  | 2020-04-17 18:23:57,884 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.sleep.deviation.threshold = 300 (default)
datanode_1  | 2020-04-17 18:23:57,885 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.install.snapshot.enabled = false (custom)
datanode_1  | 2020-04-17 18:23:57,899 [pool-70-thread-1] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-E3A4286DACE8: ConfigurationManager, init=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858], old=null, confs=<EMPTY_MAP>
datanode_1  | 2020-04-17 18:23:57,901 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.storage.dir = [/data/metadata/ratis] (custom)
datanode_1  | 2020-04-17 18:23:57,906 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.corruption.policy = EXCEPTION (default)
datanode_1  | 2020-04-17 18:23:57,912 [pool-70-thread-1] INFO storage.RaftStorageDirectory: The storage directory /data/metadata/ratis/ab3c73f0-0ac8-42e4-ab42-e3a4286dace8 does not exist. Creating ...
datanode_1  | 2020-04-17 18:23:57,926 [pool-70-thread-1] INFO storage.RaftStorageDirectory: Lock on /data/metadata/ratis/ab3c73f0-0ac8-42e4-ab42-e3a4286dace8/in_use.lock acquired by nodename 6@1e870b3d5d4c
datanode_1  | 2020-04-17 18:23:57,931 [pool-70-thread-1] INFO storage.RaftStorage: Storage directory /data/metadata/ratis/ab3c73f0-0ac8-42e4-ab42-e3a4286dace8 has been successfully formatted.
datanode_1  | 2020-04-17 18:23:57,934 [pool-70-thread-1] INFO ratis.ContainerStateMachine: group-E3A4286DACE8: The snapshot info is null. Setting the last applied indexto:(t:0, i:~)
datanode_1  | 2020-04-17 18:23:57,934 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.notification.no-leader.timeout = 60s (default)
datanode_2  | 2020-04-17 18:23:47,892 [main] INFO server.GrpcService: raft.grpc.message.size.max = 32MB (=33554432) (custom)
datanode_2  | 2020-04-17 18:23:47,892 [main] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
datanode_2  | 2020-04-17 18:23:47,897 [main] INFO server.GrpcService: raft.grpc.flow.control.window = 5MB (=5242880) (custom)
datanode_2  | 2020-04-17 18:23:47,898 [main] INFO server.RaftServerConfigKeys: raft.server.rpc.request.timeout = 60s (custom)
datanode_2  | 2020-04-17 18:23:49,010 [main] INFO server.RaftServerConfigKeys: raft.server.storage.dir = [/data/metadata/ratis] (custom)
datanode_2  | 2020-04-17 18:23:49,522 [main] INFO http.BaseHttpServer: Starting Web-server for hddsDatanode at: http://0.0.0.0:9882
datanode_2  | 2020-04-17 18:23:49,676 [main] INFO util.log: Logging initialized @30894ms to org.eclipse.jetty.util.log.Slf4jLog
datanode_2  | 2020-04-17 18:23:50,165 [main] INFO server.AuthenticationFilter: Unable to initialize FileSignerSecretProvider, falling back to use random secrets.
datanode_2  | 2020-04-17 18:23:50,169 [main] INFO http.HttpRequestLog: Http request log for http.requests.hddsDatanode is not defined
datanode_2  | 2020-04-17 18:23:50,190 [main] INFO http.HttpServer2: Added global filter 'safety' (class=org.apache.hadoop.hdds.server.http.HttpServer2$QuotingInputFilter)
datanode_2  | 2020-04-17 18:23:50,196 [main] INFO http.HttpServer2: Added filter static_user_filter (class=org.apache.hadoop.hdds.server.http.StaticUserWebFilter$StaticUserFilter) to context hddsDatanode
datanode_2  | 2020-04-17 18:23:50,197 [main] INFO http.HttpServer2: Added filter static_user_filter (class=org.apache.hadoop.hdds.server.http.StaticUserWebFilter$StaticUserFilter) to context static
datanode_2  | 2020-04-17 18:23:50,197 [main] INFO http.HttpServer2: Added filter static_user_filter (class=org.apache.hadoop.hdds.server.http.StaticUserWebFilter$StaticUserFilter) to context logs
datanode_2  | 2020-04-17 18:23:50,328 [main] INFO http.HttpServer2: Jetty bound to port 9882
datanode_2  | 2020-04-17 18:23:50,329 [main] INFO server.Server: jetty-9.4.26.v20200117; built: 2020-01-17T12:35:33.676Z; git: 7b38981d25d14afb4a12ff1f2596756144edf695; jvm 11.0.6+10-LTS
datanode_2  | 2020-04-17 18:23:50,449 [main] INFO server.session: DefaultSessionIdManager workerName=node0
datanode_2  | 2020-04-17 18:23:50,449 [main] INFO server.session: No SessionScavenger set, using defaults
datanode_2  | 2020-04-17 18:23:50,480 [main] INFO server.session: node0 Scavenging every 660000ms
datanode_2  | 2020-04-17 18:23:50,513 [main] INFO handler.ContextHandler: Started o.e.j.s.ServletContextHandler@7ce29a2d{logs,/logs,file:///var/log/hadoop/,AVAILABLE}
datanode_2  | 2020-04-17 18:23:50,514 [main] INFO handler.ContextHandler: Started o.e.j.s.ServletContextHandler@243bf087{static,/static,jar:file:/opt/hadoop/share/ozone/lib/hadoop-hdds-container-service-0.6.0-SNAPSHOT.jar!/webapps/static,AVAILABLE}
datanode_2  | 2020-04-17 18:23:50,866 [main] INFO handler.ContextHandler: Started o.e.j.w.WebAppContext@615efd1c{hddsDatanode,/,file:///tmp/jetty-0_0_0_0-9882-hadoop-hdds-container-service-0_6_0-SNAPSHOT_jar-_-any-15786694171496986612.dir/webapp/,AVAILABLE}{jar:file:/opt/hadoop/share/ozone/lib/hadoop-hdds-container-service-0.6.0-SNAPSHOT.jar!/webapps/hddsDatanode}
datanode_2  | 2020-04-17 18:23:50,881 [main] INFO server.AbstractConnector: Started ServerConnector@2b877a54{HTTP/1.1,[http/1.1]}{0.0.0.0:9882}
datanode_2  | 2020-04-17 18:23:50,881 [main] INFO server.Server: Started @32100ms
datanode_2  | 2020-04-17 18:23:50,885 [main] INFO impl.MetricsSinkAdapter: Sink prometheus started
datanode_2  | 2020-04-17 18:23:50,885 [main] INFO impl.MetricsSystemImpl: Registered sink prometheus
datanode_2  | 2020-04-17 18:23:50,890 [main] INFO http.BaseHttpServer: HTTP server of hddsDatanode listening at http://0.0.0.0:9882
datanode_2  | 2020-04-17 18:23:50,963 [org.apache.hadoop.util.JvmPauseMonitor$Monitor@13f92532] INFO util.JvmPauseMonitor: Starting JVM pause monitor
datanode_2  | 2020-04-17 18:23:51,020 [Datanode State Machine Thread - 0] INFO statemachine.SCMConnectionManager: Adding Recon Server : recon/172.24.0.3:9891
datanode_2  | 2020-04-17 18:23:53,231 [Datanode State Machine Thread - 0] INFO ozoneimpl.OzoneContainer: Attempting to start container services.
datanode_2  | 2020-04-17 18:23:53,241 [Datanode State Machine Thread - 0] INFO ozoneimpl.OzoneContainer: Background container scanner has been disabled.
datanode_2  | 2020-04-17 18:23:53,243 [Datanode State Machine Thread - 0] INFO ratis.XceiverServerRatis: Starting XceiverServerRatis f2e775cd-89a9-41b5-a9e0-4408e0d60689 at port 9858
datanode_2  | 2020-04-17 18:23:53,514 [Datanode State Machine Thread - 0] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: start RPC server
datanode_2  | 2020-04-17 18:23:53,760 [Datanode State Machine Thread - 0] INFO server.GrpcService: f2e775cd-89a9-41b5-a9e0-4408e0d60689: GrpcService started, listening on 0.0.0.0/0.0.0.0:9858
datanode_2  | 2020-04-17 18:23:57,970 [Command processor thread] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: addNew group-60084463BA1A:[f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858] returns group-60084463BA1A:java.util.concurrent.CompletableFuture@5d133d2b[Not completed]
datanode_2  | 2020-04-17 18:23:58,036 [pool-70-thread-1] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689: new RaftServerImpl for group-60084463BA1A:[f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858] with ContainerStateMachine:uninitialized
datanode_2  | 2020-04-17 18:23:58,043 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.min = 5s (custom)
datanode_2  | 2020-04-17 18:23:58,044 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.max = 5200ms (custom)
datanode_2  | 2020-04-17 18:23:58,045 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpcslowness.timeout = 300s (custom)
datanode_2  | 2020-04-17 18:23:58,046 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.sleep.deviation.threshold = 300 (default)
datanode_2  | 2020-04-17 18:23:58,051 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.install.snapshot.enabled = false (custom)
datanode_2  | 2020-04-17 18:23:58,080 [pool-70-thread-1] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-60084463BA1A: ConfigurationManager, init=-1: [f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858], old=null, confs=<EMPTY_MAP>
datanode_2  | 2020-04-17 18:23:58,086 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.storage.dir = [/data/metadata/ratis] (custom)
datanode_2  | 2020-04-17 18:23:58,118 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.corruption.policy = EXCEPTION (default)
datanode_2  | 2020-04-17 18:23:58,131 [pool-70-thread-1] INFO storage.RaftStorageDirectory: The storage directory /data/metadata/ratis/e899e35a-1e99-408d-91af-60084463ba1a does not exist. Creating ...
datanode_2  | 2020-04-17 18:23:58,172 [pool-70-thread-1] INFO storage.RaftStorageDirectory: Lock on /data/metadata/ratis/e899e35a-1e99-408d-91af-60084463ba1a/in_use.lock acquired by nodename 6@d4ddc26437df
datanode_2  | 2020-04-17 18:23:58,191 [pool-70-thread-1] INFO storage.RaftStorage: Storage directory /data/metadata/ratis/e899e35a-1e99-408d-91af-60084463ba1a has been successfully formatted.
datanode_2  | 2020-04-17 18:23:58,194 [pool-70-thread-1] INFO ratis.ContainerStateMachine: group-60084463BA1A: The snapshot info is null. Setting the last applied indexto:(t:0, i:~)
datanode_2  | 2020-04-17 18:23:58,259 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.notification.no-leader.timeout = 60s (default)
datanode_2  | 2020-04-17 18:23:58,298 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.use.memory = false (default)
datanode_2  | 2020-04-17 18:23:58,301 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.purge.gap = 1000000 (custom)
datanode_2  | 2020-04-17 18:23:58,301 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
datanode_1  | 2020-04-17 18:23:57,949 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.use.memory = false (default)
datanode_1  | 2020-04-17 18:23:57,954 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.purge.gap = 1000000 (custom)
datanode_1  | 2020-04-17 18:23:57,959 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
datanode_1  | 2020-04-17 18:23:57,983 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
datanode_1  | 2020-04-17 18:23:58,019 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.log_worker.0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_1  | 2020-04-17 18:23:58,127 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.cache.num.max = 2 (custom)
datanode_1  | 2020-04-17 18:23:58,153 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: new 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-E3A4286DACE8-SegmentedRaftLogWorker for RaftStorage:Storage Directory /data/metadata/ratis/ab3c73f0-0ac8-42e4-ab42-e3a4286dace8
datanode_1  | 2020-04-17 18:23:58,166 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.byte-limit = 2147483647 (custom)
datanode_1  | 2020-04-17 18:23:58,167 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.element-limit = 1024 (custom)
datanode_1  | 2020-04-17 18:23:58,172 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
datanode_1  | 2020-04-17 18:23:58,182 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.preallocated.size = 16384 (custom)
datanode_1  | 2020-04-17 18:23:58,182 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.write.buffer.size = 1048576 (custom)
datanode_1  | 2020-04-17 18:23:58,182 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.force.sync.num = 128 (default)
datanode_1  | 2020-04-17 18:23:58,189 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync = true (default)
datanode_1  | 2020-04-17 18:23:58,198 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout = 10s (default)
datanode_1  | 2020-04-17 18:23:58,202 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
datanode_1  | 2020-04-17 18:23:58,374 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.caching.enabled = true (custom)
datanode_1  | 2020-04-17 18:23:58,409 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-E3A4286DACE8-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
datanode_1  | 2020-04-17 18:23:58,423 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.enabled = true (custom)
datanode_1  | 2020-04-17 18:23:58,436 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
datanode_1  | 2020-04-17 18:23:58,438 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.retention.file.num = 5 (custom)
datanode_1  | 2020-04-17 18:23:58,440 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.retrycache.expirytime = 600000ms (custom)
datanode_1  | 2020-04-17 18:23:58,499 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.leader_election.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-E3A4286DACE8
datanode_1  | 2020-04-17 18:23:58,511 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.server.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-E3A4286DACE8
datanode_1  | 2020-04-17 18:23:58,516 [pool-70-thread-1] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-E3A4286DACE8: start as a follower, conf=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858], old=null
datanode_1  | 2020-04-17 18:23:58,518 [pool-70-thread-1] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-E3A4286DACE8: changes role from      null to FOLLOWER at term 0 for startAsFollower
datanode_1  | 2020-04-17 18:23:58,532 [pool-70-thread-1] INFO impl.RoleInfo: 0086d012-6f96-4817-8e1b-94f6eaa443bc: start FollowerState
datanode_1  | 2020-04-17 18:23:58,557 [pool-70-thread-1] INFO util.JmxRegister: Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-E3A4286DACE8,id=0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_1  | 2020-04-17 18:23:58,563 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.state_machine.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-E3A4286DACE8
datanode_1  | 2020-04-17 18:23:58,617 [Command processor thread] INFO commandhandler.CreatePipelineCommandHandler: Created Pipeline RATIS ONE #id: "ab3c73f0-0ac8-42e4-ab42-e3a4286dace8"
datanode_1  | .
datanode_1  | 2020-04-17 18:23:58,617 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: addNew group-2A8041ABD0B3:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] returns group-2A8041ABD0B3:java.util.concurrent.CompletableFuture@5666be43[Not completed]
datanode_1  | 2020-04-17 18:23:58,645 [pool-70-thread-1] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc: new RaftServerImpl for group-2A8041ABD0B3:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] with ContainerStateMachine:uninitialized
datanode_1  | 2020-04-17 18:23:58,650 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.min = 5s (custom)
datanode_1  | 2020-04-17 18:23:58,650 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.max = 5200ms (custom)
datanode_1  | 2020-04-17 18:23:58,651 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpcslowness.timeout = 300s (custom)
datanode_1  | 2020-04-17 18:23:58,651 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.sleep.deviation.threshold = 300 (default)
datanode_1  | 2020-04-17 18:23:58,651 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.install.snapshot.enabled = false (custom)
datanode_1  | 2020-04-17 18:23:58,651 [pool-70-thread-1] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3: ConfigurationManager, init=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null, confs=<EMPTY_MAP>
datanode_1  | 2020-04-17 18:23:58,651 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.storage.dir = [/data/metadata/ratis] (custom)
datanode_1  | 2020-04-17 18:23:58,651 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.corruption.policy = EXCEPTION (default)
datanode_1  | 2020-04-17 18:23:58,652 [pool-70-thread-1] INFO storage.RaftStorageDirectory: The storage directory /data/metadata/ratis/c6484984-fa4c-47a5-afdd-2a8041abd0b3 does not exist. Creating ...
datanode_1  | 2020-04-17 18:23:58,711 [pool-70-thread-1] INFO storage.RaftStorageDirectory: Lock on /data/metadata/ratis/c6484984-fa4c-47a5-afdd-2a8041abd0b3/in_use.lock acquired by nodename 6@1e870b3d5d4c
datanode_1  | 2020-04-17 18:23:58,726 [pool-70-thread-1] INFO storage.RaftStorage: Storage directory /data/metadata/ratis/c6484984-fa4c-47a5-afdd-2a8041abd0b3 has been successfully formatted.
datanode_1  | 2020-04-17 18:23:58,726 [pool-70-thread-1] INFO ratis.ContainerStateMachine: group-2A8041ABD0B3: The snapshot info is null. Setting the last applied indexto:(t:0, i:~)
datanode_1  | 2020-04-17 18:23:58,727 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.notification.no-leader.timeout = 60s (default)
datanode_1  | 2020-04-17 18:23:58,727 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.use.memory = false (default)
datanode_2  | 2020-04-17 18:23:58,342 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
datanode_2  | 2020-04-17 18:23:58,427 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.log_worker.f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_2  | 2020-04-17 18:23:58,589 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.cache.num.max = 2 (custom)
datanode_2  | 2020-04-17 18:23:58,608 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: new f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-60084463BA1A-SegmentedRaftLogWorker for RaftStorage:Storage Directory /data/metadata/ratis/e899e35a-1e99-408d-91af-60084463ba1a
datanode_2  | 2020-04-17 18:23:58,608 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.byte-limit = 2147483647 (custom)
datanode_2  | 2020-04-17 18:23:58,623 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.element-limit = 1024 (custom)
datanode_2  | 2020-04-17 18:23:58,638 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
datanode_2  | 2020-04-17 18:23:58,639 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.preallocated.size = 16384 (custom)
datanode_2  | 2020-04-17 18:23:58,639 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.write.buffer.size = 1048576 (custom)
datanode_2  | 2020-04-17 18:23:58,643 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.force.sync.num = 128 (default)
datanode_2  | 2020-04-17 18:23:58,650 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync = true (default)
datanode_2  | 2020-04-17 18:23:58,651 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout = 10s (default)
datanode_2  | 2020-04-17 18:23:58,652 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
datanode_2  | 2020-04-17 18:23:58,797 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.caching.enabled = true (custom)
datanode_2  | 2020-04-17 18:23:58,824 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-60084463BA1A-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
datanode_2  | 2020-04-17 18:23:58,915 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.enabled = true (custom)
datanode_2  | 2020-04-17 18:23:58,916 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
datanode_2  | 2020-04-17 18:23:58,916 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.retention.file.num = 5 (custom)
datanode_2  | 2020-04-17 18:23:58,928 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.retrycache.expirytime = 600000ms (custom)
datanode_2  | 2020-04-17 18:23:59,050 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.leader_election.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-60084463BA1A
datanode_2  | 2020-04-17 18:23:59,062 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.server.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-60084463BA1A
datanode_2  | 2020-04-17 18:23:59,064 [pool-70-thread-1] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-60084463BA1A: start as a follower, conf=-1: [f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858], old=null
datanode_2  | 2020-04-17 18:23:59,075 [pool-70-thread-1] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-60084463BA1A: changes role from      null to FOLLOWER at term 0 for startAsFollower
datanode_2  | 2020-04-17 18:23:59,090 [pool-70-thread-1] INFO impl.RoleInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689: start FollowerState
datanode_2  | 2020-04-17 18:23:59,112 [pool-70-thread-1] INFO util.JmxRegister: Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-60084463BA1A,id=f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_2  | 2020-04-17 18:23:59,113 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.state_machine.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-60084463BA1A
datanode_2  | 2020-04-17 18:23:59,185 [Command processor thread] INFO commandhandler.CreatePipelineCommandHandler: Created Pipeline RATIS ONE #id: "e899e35a-1e99-408d-91af-60084463ba1a"
datanode_2  | .
datanode_2  | 2020-04-17 18:23:59,186 [Command processor thread] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: addNew group-2A8041ABD0B3:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] returns group-2A8041ABD0B3:java.util.concurrent.CompletableFuture@14f4c010[Not completed]
datanode_2  | 2020-04-17 18:23:59,188 [pool-70-thread-1] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689: new RaftServerImpl for group-2A8041ABD0B3:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] with ContainerStateMachine:uninitialized
datanode_2  | 2020-04-17 18:23:59,195 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.min = 5s (custom)
datanode_2  | 2020-04-17 18:23:59,199 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.max = 5200ms (custom)
datanode_2  | 2020-04-17 18:23:59,199 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpcslowness.timeout = 300s (custom)
datanode_2  | 2020-04-17 18:23:59,199 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.sleep.deviation.threshold = 300 (default)
datanode_2  | 2020-04-17 18:23:59,199 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.install.snapshot.enabled = false (custom)
datanode_2  | 2020-04-17 18:23:59,200 [pool-70-thread-1] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-2A8041ABD0B3: ConfigurationManager, init=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null, confs=<EMPTY_MAP>
datanode_2  | 2020-04-17 18:23:59,200 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.storage.dir = [/data/metadata/ratis] (custom)
datanode_2  | 2020-04-17 18:23:59,200 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.corruption.policy = EXCEPTION (default)
datanode_2  | 2020-04-17 18:23:59,202 [pool-70-thread-1] INFO storage.RaftStorageDirectory: The storage directory /data/metadata/ratis/c6484984-fa4c-47a5-afdd-2a8041abd0b3 does not exist. Creating ...
datanode_2  | 2020-04-17 18:23:59,223 [pool-70-thread-1] INFO storage.RaftStorageDirectory: Lock on /data/metadata/ratis/c6484984-fa4c-47a5-afdd-2a8041abd0b3/in_use.lock acquired by nodename 6@d4ddc26437df
datanode_2  | 2020-04-17 18:23:59,228 [pool-70-thread-1] INFO storage.RaftStorage: Storage directory /data/metadata/ratis/c6484984-fa4c-47a5-afdd-2a8041abd0b3 has been successfully formatted.
datanode_2  | 2020-04-17 18:23:59,238 [pool-70-thread-1] INFO ratis.ContainerStateMachine: group-2A8041ABD0B3: The snapshot info is null. Setting the last applied indexto:(t:0, i:~)
datanode_2  | 2020-04-17 18:23:59,246 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.notification.no-leader.timeout = 60s (default)
datanode_2  | 2020-04-17 18:23:59,247 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.use.memory = false (default)
datanode_2  | 2020-04-17 18:23:59,248 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.purge.gap = 1000000 (custom)
datanode_2  | 2020-04-17 18:23:59,248 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
datanode_2  | 2020-04-17 18:23:59,258 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
datanode_2  | 2020-04-17 18:23:59,258 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.cache.num.max = 2 (custom)
datanode_2  | 2020-04-17 18:23:59,259 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: new f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-2A8041ABD0B3-SegmentedRaftLogWorker for RaftStorage:Storage Directory /data/metadata/ratis/c6484984-fa4c-47a5-afdd-2a8041abd0b3
datanode_2  | 2020-04-17 18:23:59,259 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.byte-limit = 2147483647 (custom)
datanode_2  | 2020-04-17 18:23:59,259 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.element-limit = 1024 (custom)
datanode_2  | 2020-04-17 18:23:59,259 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
datanode_2  | 2020-04-17 18:23:59,259 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.preallocated.size = 16384 (custom)
datanode_2  | 2020-04-17 18:23:59,259 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.write.buffer.size = 1048576 (custom)
datanode_2  | 2020-04-17 18:23:59,260 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.force.sync.num = 128 (default)
datanode_2  | 2020-04-17 18:23:59,262 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync = true (default)
datanode_2  | 2020-04-17 18:23:59,262 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout = 10s (default)
datanode_2  | 2020-04-17 18:23:59,263 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
datanode_2  | 2020-04-17 18:23:59,263 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.caching.enabled = true (custom)
datanode_2  | 2020-04-17 18:23:59,265 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-2A8041ABD0B3-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
datanode_2  | 2020-04-17 18:23:59,283 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.enabled = true (custom)
datanode_2  | 2020-04-17 18:23:59,283 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
datanode_2  | 2020-04-17 18:23:59,283 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.retention.file.num = 5 (custom)
datanode_2  | 2020-04-17 18:23:59,285 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.retrycache.expirytime = 600000ms (custom)
datanode_2  | 2020-04-17 18:23:59,285 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.leader_election.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-2A8041ABD0B3
datanode_2  | 2020-04-17 18:23:59,286 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.server.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-2A8041ABD0B3
datanode_2  | 2020-04-17 18:23:59,286 [pool-70-thread-1] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-2A8041ABD0B3: start as a follower, conf=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null
datanode_2  | 2020-04-17 18:23:59,287 [pool-70-thread-1] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-2A8041ABD0B3: changes role from      null to FOLLOWER at term 0 for startAsFollower
datanode_2  | 2020-04-17 18:23:59,287 [pool-70-thread-1] INFO impl.RoleInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689: start FollowerState
datanode_2  | 2020-04-17 18:23:59,287 [pool-70-thread-1] INFO util.JmxRegister: Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-2A8041ABD0B3,id=f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_2  | 2020-04-17 18:23:59,294 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.state_machine.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-2A8041ABD0B3
datanode_2  | 2020-04-17 18:24:01,143 [Command processor thread] INFO commandhandler.CreatePipelineCommandHandler: Created Pipeline RATIS THREE #id: "c6484984-fa4c-47a5-afdd-2a8041abd0b3"
datanode_2  | .
datanode_2  | 2020-04-17 18:24:01,296 [grpc-default-executor-1] WARN impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Failed groupAdd* GroupManagementRequest:client-B28AE94AC5FD->f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-2A8041ABD0B3, cid=1, seq=0, RW, null, Add:group-2A8041ABD0B3:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858]
datanode_2  | java.util.concurrent.CompletionException: org.apache.ratis.protocol.AlreadyExistsException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Failed to add group-2A8041ABD0B3:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyNow(CompletableFuture.java:670)
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyStage(CompletableFuture.java:658)
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.thenApplyAsync(CompletableFuture.java:2104)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:379)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:363)
datanode_2  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.lambda$groupManagement$0(GrpcAdminProtocolService.java:42)
datanode_2  | 	at org.apache.ratis.grpc.GrpcUtil.asyncCall(GrpcUtil.java:160)
datanode_2  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.groupManagement(GrpcAdminProtocolService.java:42)
datanode_2  | 	at org.apache.ratis.proto.grpc.AdminProtocolServiceGrpc$MethodHandlers.invoke(AdminProtocolServiceGrpc.java:358)
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:172)
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:331)
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:814)
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:123)
datanode_2  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_2  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | Caused by: org.apache.ratis.protocol.AlreadyExistsException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Failed to add group-2A8041ABD0B3:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy$ImplMap.addNew(RaftServerProxy.java:83)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:378)
datanode_2  | 	... 13 more
datanode_1  | 2020-04-17 18:23:58,727 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.purge.gap = 1000000 (custom)
datanode_1  | 2020-04-17 18:23:58,727 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
datanode_1  | 2020-04-17 18:23:58,727 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
datanode_1  | 2020-04-17 18:23:58,727 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.cache.num.max = 2 (custom)
datanode_1  | 2020-04-17 18:23:58,727 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: new 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3-SegmentedRaftLogWorker for RaftStorage:Storage Directory /data/metadata/ratis/c6484984-fa4c-47a5-afdd-2a8041abd0b3
datanode_1  | 2020-04-17 18:23:58,728 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.byte-limit = 2147483647 (custom)
datanode_1  | 2020-04-17 18:23:58,728 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.element-limit = 1024 (custom)
datanode_1  | 2020-04-17 18:23:58,728 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
datanode_1  | 2020-04-17 18:23:58,728 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.preallocated.size = 16384 (custom)
datanode_1  | 2020-04-17 18:23:58,728 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.write.buffer.size = 1048576 (custom)
datanode_1  | 2020-04-17 18:23:58,728 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.force.sync.num = 128 (default)
datanode_1  | 2020-04-17 18:23:58,728 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync = true (default)
datanode_1  | 2020-04-17 18:23:58,728 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout = 10s (default)
datanode_1  | 2020-04-17 18:23:58,728 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
datanode_1  | 2020-04-17 18:23:58,729 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.caching.enabled = true (custom)
datanode_1  | 2020-04-17 18:23:58,729 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
datanode_1  | 2020-04-17 18:23:58,770 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.enabled = true (custom)
datanode_1  | 2020-04-17 18:23:58,770 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
datanode_1  | 2020-04-17 18:23:58,770 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.retention.file.num = 5 (custom)
datanode_1  | 2020-04-17 18:23:58,770 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.retrycache.expirytime = 600000ms (custom)
datanode_1  | 2020-04-17 18:23:58,770 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.leader_election.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3
datanode_1  | 2020-04-17 18:23:58,771 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.server.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3
datanode_1  | 2020-04-17 18:23:58,791 [pool-70-thread-1] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3: start as a follower, conf=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null
datanode_1  | 2020-04-17 18:23:58,791 [pool-70-thread-1] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3: changes role from      null to FOLLOWER at term 0 for startAsFollower
datanode_1  | 2020-04-17 18:23:58,792 [pool-70-thread-1] INFO impl.RoleInfo: 0086d012-6f96-4817-8e1b-94f6eaa443bc: start FollowerState
datanode_1  | 2020-04-17 18:23:58,798 [pool-70-thread-1] INFO util.JmxRegister: Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-2A8041ABD0B3,id=0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_1  | 2020-04-17 18:23:58,798 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.state_machine.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3
datanode_1  | 2020-04-17 18:24:00,516 [grpc-default-executor-0] WARN impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Failed groupAdd* GroupManagementRequest:client-16C21D4E08D0->0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3, cid=0, seq=0, RW, null, Add:group-2A8041ABD0B3:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858]
datanode_1  | java.util.concurrent.CompletionException: org.apache.ratis.protocol.AlreadyExistsException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Failed to add group-2A8041ABD0B3:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyNow(CompletableFuture.java:670)
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyStage(CompletableFuture.java:658)
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture.thenApplyAsync(CompletableFuture.java:2104)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:379)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:363)
datanode_1  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.lambda$groupManagement$0(GrpcAdminProtocolService.java:42)
datanode_1  | 	at org.apache.ratis.grpc.GrpcUtil.asyncCall(GrpcUtil.java:160)
datanode_1  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.groupManagement(GrpcAdminProtocolService.java:42)
datanode_1  | 	at org.apache.ratis.proto.grpc.AdminProtocolServiceGrpc$MethodHandlers.invoke(AdminProtocolServiceGrpc.java:358)
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:172)
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:331)
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:814)
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:123)
datanode_1  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_1  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_1  | Caused by: org.apache.ratis.protocol.AlreadyExistsException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Failed to add group-2A8041ABD0B3:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy$ImplMap.addNew(RaftServerProxy.java:83)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:378)
datanode_1  | 	... 13 more
datanode_1  | 2020-04-17 18:24:01,089 [grpc-default-executor-0] WARN impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Failed groupAdd* GroupManagementRequest:client-EEA7DC7BBFE5->0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3, cid=1, seq=0, RW, null, Add:group-2A8041ABD0B3:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858]
datanode_1  | java.util.concurrent.CompletionException: org.apache.ratis.protocol.AlreadyExistsException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Failed to add group-2A8041ABD0B3:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyNow(CompletableFuture.java:670)
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyStage(CompletableFuture.java:658)
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture.thenApplyAsync(CompletableFuture.java:2104)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:379)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:363)
datanode_1  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.lambda$groupManagement$0(GrpcAdminProtocolService.java:42)
datanode_1  | 	at org.apache.ratis.grpc.GrpcUtil.asyncCall(GrpcUtil.java:160)
datanode_1  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.groupManagement(GrpcAdminProtocolService.java:42)
datanode_1  | 	at org.apache.ratis.proto.grpc.AdminProtocolServiceGrpc$MethodHandlers.invoke(AdminProtocolServiceGrpc.java:358)
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:172)
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:331)
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:814)
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:123)
datanode_1  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_1  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_1  | Caused by: org.apache.ratis.protocol.AlreadyExistsException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Failed to add group-2A8041ABD0B3:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy$ImplMap.addNew(RaftServerProxy.java:83)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:378)
datanode_1  | 	... 13 more
datanode_1  | 2020-04-17 18:24:01,408 [Command processor thread] INFO commandhandler.CreatePipelineCommandHandler: Created Pipeline RATIS THREE #id: "c6484984-fa4c-47a5-afdd-2a8041abd0b3"
datanode_1  | .
datanode_1  | 2020-04-17 18:24:03,556 [Thread-25] INFO impl.FollowerState: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-E3A4286DACE8-FollowerState: change to CANDIDATE, lastRpcTime:5024ms, electionTimeout:5023ms
datanode_1  | 2020-04-17 18:24:03,557 [Thread-25] INFO impl.RoleInfo: 0086d012-6f96-4817-8e1b-94f6eaa443bc: shutdown FollowerState
datanode_1  | 2020-04-17 18:24:03,558 [Thread-25] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-E3A4286DACE8: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
datanode_1  | 2020-04-17 18:24:03,560 [Thread-25] INFO impl.RoleInfo: 0086d012-6f96-4817-8e1b-94f6eaa443bc: start LeaderElection
datanode_1  | 2020-04-17 18:24:03,583 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-E3A4286DACE8-LeaderElection1] INFO impl.LeaderElection: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-E3A4286DACE8-LeaderElection1: begin an election at term 1 for -1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858], old=null
datanode_1  | 2020-04-17 18:24:03,584 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-E3A4286DACE8-LeaderElection1] INFO impl.RoleInfo: 0086d012-6f96-4817-8e1b-94f6eaa443bc: shutdown LeaderElection
datanode_1  | 2020-04-17 18:24:03,585 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-E3A4286DACE8-LeaderElection1] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-E3A4286DACE8: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
datanode_1  | 2020-04-17 18:24:03,585 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-E3A4286DACE8-LeaderElection1] INFO ratis.XceiverServerRatis: Leader change notification received for group: group-E3A4286DACE8 with new leaderId: 0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_1  | 2020-04-17 18:24:03,587 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-E3A4286DACE8-LeaderElection1] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-E3A4286DACE8: change Leader from null to 0086d012-6f96-4817-8e1b-94f6eaa443bc at term 1 for becomeLeader, leader elected after 5651ms
datanode_1  | 2020-04-17 18:24:03,591 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-E3A4286DACE8-LeaderElection1] INFO server.RaftServerConfigKeys: raft.server.staging.catchup.gap = 1000 (default)
datanode_1  | 2020-04-17 18:24:03,592 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-E3A4286DACE8-LeaderElection1] INFO server.RaftServerConfigKeys: raft.server.rpc.sleep.time = 25ms (default)
datanode_1  | 2020-04-17 18:24:03,594 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-E3A4286DACE8-LeaderElection1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.log_appender.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-E3A4286DACE8
datanode_1  | 2020-04-17 18:24:03,669 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-E3A4286DACE8-LeaderElection1] INFO server.RaftServerConfigKeys: raft.server.write.element-limit = 1024 (custom)
datanode_1  | 2020-04-17 18:24:03,670 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-E3A4286DACE8-LeaderElection1] INFO server.RaftServerConfigKeys: raft.server.write.byte-limit = 1073741824 (custom)
datanode_1  | 2020-04-17 18:24:03,674 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-E3A4286DACE8-LeaderElection1] INFO server.RaftServerConfigKeys: raft.server.watch.timeout = 180s (custom)
datanode_1  | 2020-04-17 18:24:03,679 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-E3A4286DACE8-LeaderElection1] INFO server.RaftServerConfigKeys: raft.server.watch.timeout.denomination = 1s (default)
datanode_1  | 2020-04-17 18:24:03,680 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-E3A4286DACE8-LeaderElection1] INFO server.RaftServerConfigKeys: raft.server.watch.element-limit = 65536 (default)
datanode_1  | 2020-04-17 18:24:03,729 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-E3A4286DACE8-LeaderElection1] INFO impl.RoleInfo: 0086d012-6f96-4817-8e1b-94f6eaa443bc: start LeaderState
datanode_1  | 2020-04-17 18:24:03,818 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-E3A4286DACE8-LeaderElection1] INFO segmented.SegmentedRaftLogWorker: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-E3A4286DACE8-SegmentedRaftLogWorker: Starting segment from index:0
datanode_1  | 2020-04-17 18:24:03,830 [Thread-27] INFO impl.FollowerState: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3-FollowerState: change to CANDIDATE, lastRpcTime:5038ms, electionTimeout:5031ms
datanode_1  | 2020-04-17 18:24:03,832 [Thread-27] INFO impl.RoleInfo: 0086d012-6f96-4817-8e1b-94f6eaa443bc: shutdown FollowerState
datanode_3  | Sleeping for 5 seconds
datanode_3  | Setting up kerberos!!
datanode_3  | KDC ISSUER_SERVER => kdc:8081
datanode_3  | Sleeping for 5 seconds
datanode_3  | Got 200, KDC service ready!!
datanode_3  | Download dn/9dd073498a2e@EXAMPLE.COM keytab file to /etc/security/keytabs/dn.keytab
datanode_3  | --2020-04-17 18:23:19--  http://kdc:8081/keytab/9dd073498a2e/dn
datanode_3  | Resolving kdc (kdc)... 172.24.0.4
datanode_3  | Connecting to kdc (kdc)|172.24.0.4|:8081... connected.
datanode_3  | HTTP request sent, awaiting response... 200 OK
datanode_3  | Length: 158 [application/octet-stream]
datanode_3  | Saving to: '/etc/security/keytabs/dn.keytab'
datanode_3  | 
datanode_3  |      0K                                                       100% 21.5M=0s
datanode_3  | 
datanode_3  | 2020-04-17 18:23:19 (21.5 MB/s) - '/etc/security/keytabs/dn.keytab' saved [158/158]
datanode_3  | 
datanode_3  | Keytab name: FILE:/etc/security/keytabs/dn.keytab
datanode_3  | KVNO Timestamp         Principal
datanode_3  | ---- ----------------- --------------------------------------------------------
datanode_3  |    2 04/17/20 18:23:19 dn/9dd073498a2e@EXAMPLE.COM
datanode_3  |    2 04/17/20 18:23:19 dn/9dd073498a2e@EXAMPLE.COM
datanode_3  | Download HTTP/9dd073498a2e@EXAMPLE.COM keytab file to /etc/security/keytabs/HTTP.keytab
datanode_3  | --2020-04-17 18:23:19--  http://kdc:8081/keytab/9dd073498a2e/HTTP
datanode_3  | Resolving kdc (kdc)... 172.24.0.4
datanode_3  | Connecting to kdc (kdc)|172.24.0.4|:8081... connected.
datanode_3  | HTTP request sent, awaiting response... 200 OK
datanode_3  | Length: 162 [application/octet-stream]
datanode_3  | Saving to: '/etc/security/keytabs/HTTP.keytab'
datanode_3  | 
datanode_3  |      0K                                                       100% 26.6M=0s
datanode_3  | 
datanode_3  | 2020-04-17 18:23:19 (26.6 MB/s) - '/etc/security/keytabs/HTTP.keytab' saved [162/162]
datanode_3  | 
datanode_3  | Keytab name: FILE:/etc/security/keytabs/HTTP.keytab
datanode_3  | KVNO Timestamp         Principal
datanode_3  | ---- ----------------- --------------------------------------------------------
datanode_3  |    2 04/17/20 18:23:19 HTTP/9dd073498a2e@EXAMPLE.COM
datanode_3  |    2 04/17/20 18:23:19 HTTP/9dd073498a2e@EXAMPLE.COM
datanode_3  | No '-XX:...' jvm parameters are used. Adding safer GC settings to the HADOOP_OPTS
datanode_3  | OpenJDK 64-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated in version 9.0 and will likely be removed in a future release.
datanode_3  | 2020-04-17 18:23:25,339 [main] INFO ozone.HddsDatanodeService: STARTUP_MSG: 
datanode_3  | /************************************************************
datanode_3  | STARTUP_MSG: Starting HddsDatanodeService
datanode_3  | STARTUP_MSG:   host = 9dd073498a2e/172.24.0.10
datanode_3  | STARTUP_MSG:   args = []
datanode_3  | STARTUP_MSG:   version = 3.2.0
datanode_3  | STARTUP_MSG:   classpath = /etc/hadoop:/opt/hadoop/share/hadoop/common/*:/opt/hadoop/share/ozone/lib/kerb-simplekdc-1.0.1.jar:/opt/hadoop/share/ozone/lib/jackson-databind-2.10.3.jar:/opt/hadoop/share/ozone/lib/protobuf-java-2.5.0.jar:/opt/hadoop/share/ozone/lib/bcpkix-jdk15on-1.60.jar:/opt/hadoop/share/ozone/lib/netty-3.10.5.Final.jar:/opt/hadoop/share/ozone/lib/ratis-proto-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/commons-validator-1.6.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-client-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/jaxb-impl-2.3.0.1.jar:/opt/hadoop/share/ozone/lib/kerb-core-1.0.1.jar:/opt/hadoop/share/ozone/lib/jsr305-3.0.0.jar:/opt/hadoop/share/ozone/lib/j2objc-annotations-1.3.jar:/opt/hadoop/share/ozone/lib/leveldbjni-all-1.8.jar:/opt/hadoop/share/ozone/lib/jetty-io-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/htrace-core4-4.1.0-incubating.jar:/opt/hadoop/share/ozone/lib/jaxb-api-2.3.0.jar:/opt/hadoop/share/ozone/lib/hadoop-annotations-3.2.0.jar:/opt/hadoop/share/ozone/lib/kerb-util-1.0.1.jar:/opt/hadoop/share/ozone/lib/jetty-http-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/jetty-xml-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/jackson-jaxrs-1.9.13.jar:/opt/hadoop/share/ozone/lib/ratis-thirdparty-misc-0.3.0.jar:/opt/hadoop/share/ozone/lib/kerby-xdr-1.0.1.jar:/opt/hadoop/share/ozone/lib/jackson-core-asl-1.9.13.jar:/opt/hadoop/share/ozone/lib/jetty-server-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/commons-net-3.6.jar:/opt/hadoop/share/ozone/lib/log4j-api-2.11.0.jar:/opt/hadoop/share/ozone/lib/hadoop-hdfs-3.2.0.jar:/opt/hadoop/share/ozone/lib/opentracing-api-0.31.0.jar:/opt/hadoop/share/ozone/lib/slf4j-log4j12-1.7.25.jar:/opt/hadoop/share/ozone/lib/hadoop-hdfs-client-3.2.0.jar:/opt/hadoop/share/ozone/lib/kerby-config-1.0.1.jar:/opt/hadoop/share/ozone/lib/libthrift-0.12.0.jar:/opt/hadoop/share/ozone/lib/jetty-util-ajax-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/metrics-core-3.2.4.jar:/opt/hadoop/share/ozone/lib/kerby-pkix-1.0.1.jar:/opt/hadoop/share/ozone/lib/guava-28.2-jre.jar:/opt/hadoop/share/ozone/lib/jetty-servlet-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/xz-1.0.jar:/opt/hadoop/share/ozone/lib/activation-1.1.1.jar:/opt/hadoop/share/ozone/lib/jsr311-api-1.1.1.jar:/opt/hadoop/share/ozone/lib/commons-beanutils-1.9.4.jar:/opt/hadoop/share/ozone/lib/rocksdbjni-6.6.4.jar:/opt/hadoop/share/ozone/lib/jetty-security-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-container-service-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/kerb-server-1.0.1.jar:/opt/hadoop/share/ozone/lib/javax.servlet-api-3.1.0.jar:/opt/hadoop/share/ozone/lib/avro-1.7.7.jar:/opt/hadoop/share/ozone/lib/kerb-client-1.0.1.jar:/opt/hadoop/share/ozone/lib/jackson-xc-1.9.13.jar:/opt/hadoop/share/ozone/lib/disruptor-3.4.2.jar:/opt/hadoop/share/ozone/lib/simpleclient_common-0.7.0.jar:/opt/hadoop/share/ozone/lib/dnsjava-2.1.7.jar:/opt/hadoop/share/ozone/lib/jackson-annotations-2.10.3.jar:/opt/hadoop/share/ozone/lib/commons-configuration2-2.1.1.jar:/opt/hadoop/share/ozone/lib/json-smart-2.3.jar:/opt/hadoop/share/ozone/lib/token-provider-1.0.1.jar:/opt/hadoop/share/ozone/lib/log4j-1.2.17.jar:/opt/hadoop/share/ozone/lib/commons-daemon-1.0.13.jar:/opt/hadoop/share/ozone/lib/listenablefuture-9999.0-empty-to-avoid-conflict-with-guava.jar:/opt/hadoop/share/ozone/lib/bcprov-jdk15on-1.60.jar:/opt/hadoop/share/ozone/lib/ratis-grpc-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/jetty-webapp-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/commons-lang3-3.7.jar:/opt/hadoop/share/ozone/lib/jaeger-client-0.34.0.jar:/opt/hadoop/share/ozone/lib/commons-compress-1.4.1.jar:/opt/hadoop/share/ozone/lib/accessors-smart-1.2.jar:/opt/hadoop/share/ozone/lib/re2j-1.1.jar:/opt/hadoop/share/ozone/lib/ratis-client-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/commons-math3-3.1.1.jar:/opt/hadoop/share/ozone/lib/simpleclient_dropwizard-0.7.0.jar:/opt/hadoop/share/ozone/lib/opentracing-noop-0.31.0.jar:/opt/hadoop/share/ozone/lib/simpleclient-0.7.0.jar:/opt/hadoop/share/ozone/lib/httpclient-4.5.2.jar:/opt/hadoop/share/ozone/lib/jaeger-core-0.34.0.jar:/opt/hadoop/share/ozone/lib/asm-5.0.4.jar:/opt/hadoop/share/ozone/lib/kerby-util-1.0.1.jar:/opt/hadoop/share/ozone/lib/failureaccess-1.0.1.jar:/opt/hadoop/share/ozone/lib/jackson-mapper-asl-1.9.13.jar:/opt/hadoop/share/ozone/lib/jsp-api-2.1.jar:/opt/hadoop/share/ozone/lib/jsch-0.1.54.jar:/opt/hadoop/share/ozone/lib/ratis-metrics-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/opentracing-tracerresolver-0.1.5.jar:/opt/hadoop/share/ozone/lib/ratis-common-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/paranamer-2.3.jar:/opt/hadoop/share/ozone/lib/log4j-core-2.11.0.jar:/opt/hadoop/share/ozone/lib/nimbus-jose-jwt-7.9.jar:/opt/hadoop/share/ozone/lib/commons-codec-1.11.jar:/opt/hadoop/share/ozone/lib/commons-pool2-2.6.0.jar:/opt/hadoop/share/ozone/lib/jackson-datatype-jsr310-2.10.3.jar:/opt/hadoop/share/ozone/lib/gson-2.2.4.jar:/opt/hadoop/share/ozone/lib/jcip-annotations-1.0-1.jar:/opt/hadoop/share/ozone/lib/kerb-admin-1.0.1.jar:/opt/hadoop/share/ozone/lib/commons-io-2.5.jar:/opt/hadoop/share/ozone/lib/okio-1.13.0.jar:/opt/hadoop/share/ozone/lib/snakeyaml-1.16.jar:/opt/hadoop/share/ozone/lib/jetty-util-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/jersey-core-1.19.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-hadoop-dependency-client-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/checker-qual-2.10.0.jar:/opt/hadoop/share/ozone/lib/ratis-server-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-server-framework-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/picocli-3.9.6.jar:/opt/hadoop/share/ozone/lib/jaeger-thrift-0.34.0.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-common-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/commons-cli-1.2.jar:/opt/hadoop/share/ozone/lib/woodstox-core-5.0.3.jar:/opt/hadoop/share/ozone/lib/snappy-java-1.0.5.jar:/opt/hadoop/share/ozone/lib/javax.annotation-api-1.2.jar:/opt/hadoop/share/ozone/lib/jaeger-tracerresolver-0.34.0.jar:/opt/hadoop/share/ozone/lib/kerby-asn1-1.0.1.jar:/opt/hadoop/share/ozone/lib/netty-all-4.1.48.Final.jar:/opt/hadoop/share/ozone/lib/okhttp-3.9.0.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-config-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/stax2-api-3.1.4.jar:/opt/hadoop/share/ozone/lib/commons-collections-3.2.2.jar:/opt/hadoop/share/ozone/lib/commons-digester-1.8.1.jar:/opt/hadoop/share/ozone/lib/jettison-1.1.jar:/opt/hadoop/share/ozone/lib/commons-text-1.4.jar:/opt/hadoop/share/ozone/lib/jackson-core-2.10.3.jar:/opt/hadoop/share/ozone/lib/jersey-servlet-1.19.jar:/opt/hadoop/share/ozone/lib/jersey-json-1.19.jar:/opt/hadoop/share/ozone/lib/slf4j-api-1.7.25.jar:/opt/hadoop/share/ozone/lib/commons-logging-1.1.3.jar:/opt/hadoop/share/ozone/lib/kerb-identity-1.0.1.jar:/opt/hadoop/share/ozone/lib/opentracing-util-0.31.0.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-hadoop-dependency-server-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/hadoop-common-3.2.0.jar:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar:/opt/hadoop/share/ozone/lib/kerb-common-1.0.1.jar:/opt/hadoop/share/ozone/lib/jaxb-core-2.3.0.1.jar:/opt/hadoop/share/ozone/lib/jersey-server-1.19.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-common-0.6.0-SNAPSHOT-tests.jar:/opt/hadoop/share/ozone/lib/kerb-crypto-1.0.1.jar:/opt/hadoop/share/ozone/lib/httpcore-4.4.4.jar:/opt/hadoop/share/ozone/lib/ratis-netty-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/web:/opt/hadoop/share/ozone/lib/hadoop-ozone-datanode-0.6.0-SNAPSHOT.jar
datanode_3  | STARTUP_MSG:   build = https://github.com/apache/hadoop.git -r e97acb3bd8f3befd27418996fa5d4b50bf2e17bf; compiled by 'sunilg' on 2019-01-15T17:34Z
datanode_3  | STARTUP_MSG:   java = 11.0.6
datanode_3  | ************************************************************/
datanode_3  | 2020-04-17 18:23:25,401 [main] INFO ozone.HddsDatanodeService: registered UNIX signal handlers for [TERM, HUP, INT]
datanode_3  | 2020-04-17 18:23:27,198 [main] INFO metrics.MetricRegistries: Loaded MetricRegistries class org.apache.ratis.metrics.impl.MetricRegistriesImpl
datanode_3  | 2020-04-17 18:23:27,761 [main] INFO impl.MetricsConfig: Loaded properties from hadoop-metrics2.properties
datanode_3  | 2020-04-17 18:23:28,907 [main] INFO impl.MetricsSystemImpl: Scheduled Metric snapshot period at 10 second(s).
datanode_3  | 2020-04-17 18:23:28,917 [main] INFO impl.MetricsSystemImpl: HddsDatanode metrics system started
datanode_3  | 2020-04-17 18:23:29,836 [main] INFO ozone.HddsDatanodeService: HddsDatanodeService host:9dd073498a2e ip:172.24.0.10
datanode_3  | 2020-04-17 18:23:31,763 [main] INFO ozone.HddsDatanodeService: Ozone security is enabled. Attempting login for Hdds Datanode user. Principal: dn/_HOST@EXAMPLE.COM,keytab: /etc/security/keytabs/dn.keytab
datanode_3  | WARNING: An illegal reflective access operation has occurred
datanode_3  | WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
datanode_3  | WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
datanode_3  | WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
datanode_3  | WARNING: All illegal access operations will be denied in a future release
datanode_3  | 2020-04-17 18:23:32,841 [main] INFO security.UserGroupInformation: Login successful for user dn/9dd073498a2e@EXAMPLE.COM using keytab file /etc/security/keytabs/dn.keytab
datanode_3  | 2020-04-17 18:23:32,841 [main] INFO ozone.HddsDatanodeService: Hdds Datanode login successful.
datanode_3  | 2020-04-17 18:23:32,841 [main] INFO ozone.HddsDatanodeService: Initializing secure Datanode.
datanode_3  | 2020-04-17 18:23:32,847 [main] ERROR client.DNCertificateClient: Default certificate serial id is not set. Can't locate the default certificate for this client.
datanode_3  | 2020-04-17 18:23:32,847 [main] INFO client.DNCertificateClient: Certificate client init case: 0
datanode_3  | 2020-04-17 18:23:32,848 [main] INFO client.DNCertificateClient: Creating keypair for client as keypair and certificate not found.
datanode_3  | 2020-04-17 18:23:35,034 [main] INFO ozone.HddsDatanodeService: Init response: GETCERT
datanode_3  | 2020-04-17 18:23:35,088 [main] INFO ozone.OzoneSecurityUtil: Adding ip:172.24.0.10,host:9dd073498a2e
datanode_3  | 2020-04-17 18:23:35,091 [main] INFO ozone.OzoneSecurityUtil: ip:127.0.0.1 not returned.
datanode_3  | 2020-04-17 18:23:35,108 [main] INFO ozone.HddsDatanodeService: Creating csr for DN-> subject:root@9dd073498a2e
datanode_3  | 2020-04-17 18:23:36,985 [main] INFO ipc.Client: Retrying connect to server: scm/172.24.0.6:9961. Already tried 0 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=2147483647, sleepTime=1000 MILLISECONDS)
datanode_3  | 2020-04-17 18:23:37,986 [main] INFO ipc.Client: Retrying connect to server: scm/172.24.0.6:9961. Already tried 1 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=2147483647, sleepTime=1000 MILLISECONDS)
datanode_3  | 2020-04-17 18:23:38,987 [main] INFO ipc.Client: Retrying connect to server: scm/172.24.0.6:9961. Already tried 2 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=2147483647, sleepTime=1000 MILLISECONDS)
datanode_3  | 2020-04-17 18:23:39,989 [main] INFO ipc.Client: Retrying connect to server: scm/172.24.0.6:9961. Already tried 3 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=2147483647, sleepTime=1000 MILLISECONDS)
datanode_3  | 2020-04-17 18:23:40,990 [main] INFO ipc.Client: Retrying connect to server: scm/172.24.0.6:9961. Already tried 4 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=2147483647, sleepTime=1000 MILLISECONDS)
datanode_3  | 2020-04-17 18:23:41,992 [main] INFO ipc.Client: Retrying connect to server: scm/172.24.0.6:9961. Already tried 5 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=2147483647, sleepTime=1000 MILLISECONDS)
datanode_3  | 2020-04-17 18:23:42,993 [main] INFO ipc.Client: Retrying connect to server: scm/172.24.0.6:9961. Already tried 6 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=2147483647, sleepTime=1000 MILLISECONDS)
datanode_3  | 2020-04-17 18:23:45,087 [main] INFO ozone.HddsDatanodeService: Successfully stored SCM signed certificate, case:GETCERT.
datanode_3  | 2020-04-17 18:23:45,253 [main] INFO fs.SaveSpaceUsageToFile: Cached usage info file /data/hdds/scmUsed not found
datanode_3  | 2020-04-17 18:23:45,276 [main] INFO volume.HddsVolume: Creating Volume: /data/hdds/hdds of storage type : DISK and capacity : 89311358976
datanode_3  | 2020-04-17 18:23:45,278 [main] INFO volume.MutableVolumeSet: Added Volume : /data/hdds/hdds to VolumeSet
datanode_3  | 2020-04-17 18:23:45,339 [main] INFO volume.ThrottledAsyncChecker: Scheduling a check for /data/hdds/hdds
datanode_3  | 2020-04-17 18:23:45,435 [main] INFO volume.HddsVolumeChecker: Scheduled health check for volume /data/hdds/hdds
datanode_3  | 2020-04-17 18:23:47,180 [main] WARN server.ServerUtils: Storage directory for Ratis is not configured. It is a good idea to map this to an SSD disk. Falling back to ozone.metadata.dirs
datanode_3  | 2020-04-17 18:23:47,334 [main] INFO impl.RaftServerProxy: raft.rpc.type = GRPC (default)
datanode_3  | 2020-04-17 18:23:47,610 [main] INFO grpc.GrpcConfigKeys: raft.grpc.server.port = 9858 (custom)
datanode_3  | 2020-04-17 18:23:47,611 [main] INFO server.GrpcService: raft.grpc.message.size.max = 32MB (=33554432) (custom)
datanode_3  | 2020-04-17 18:23:47,616 [main] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
datanode_3  | 2020-04-17 18:23:47,616 [main] INFO server.GrpcService: raft.grpc.flow.control.window = 5MB (=5242880) (custom)
datanode_3  | 2020-04-17 18:23:47,618 [main] INFO server.RaftServerConfigKeys: raft.server.rpc.request.timeout = 60s (custom)
datanode_3  | 2020-04-17 18:23:48,204 [main] INFO server.RaftServerConfigKeys: raft.server.storage.dir = [/data/metadata/ratis] (custom)
datanode_3  | 2020-04-17 18:23:48,520 [main] INFO http.BaseHttpServer: Starting Web-server for hddsDatanode at: http://0.0.0.0:9882
datanode_3  | 2020-04-17 18:23:48,668 [main] INFO util.log: Logging initialized @28548ms to org.eclipse.jetty.util.log.Slf4jLog
datanode_3  | 2020-04-17 18:23:49,407 [main] INFO server.AuthenticationFilter: Unable to initialize FileSignerSecretProvider, falling back to use random secrets.
datanode_3  | 2020-04-17 18:23:49,441 [main] INFO http.HttpRequestLog: Http request log for http.requests.hddsDatanode is not defined
datanode_3  | 2020-04-17 18:23:49,465 [main] INFO http.HttpServer2: Added global filter 'safety' (class=org.apache.hadoop.hdds.server.http.HttpServer2$QuotingInputFilter)
datanode_3  | 2020-04-17 18:23:49,468 [main] INFO http.HttpServer2: Added filter static_user_filter (class=org.apache.hadoop.hdds.server.http.StaticUserWebFilter$StaticUserFilter) to context hddsDatanode
datanode_3  | 2020-04-17 18:23:49,469 [main] INFO http.HttpServer2: Added filter static_user_filter (class=org.apache.hadoop.hdds.server.http.StaticUserWebFilter$StaticUserFilter) to context logs
datanode_3  | 2020-04-17 18:23:49,469 [main] INFO http.HttpServer2: Added filter static_user_filter (class=org.apache.hadoop.hdds.server.http.StaticUserWebFilter$StaticUserFilter) to context static
datanode_3  | 2020-04-17 18:23:49,634 [main] INFO http.HttpServer2: Jetty bound to port 9882
datanode_3  | 2020-04-17 18:23:49,637 [main] INFO server.Server: jetty-9.4.26.v20200117; built: 2020-01-17T12:35:33.676Z; git: 7b38981d25d14afb4a12ff1f2596756144edf695; jvm 11.0.6+10-LTS
datanode_3  | 2020-04-17 18:23:49,829 [main] INFO server.session: DefaultSessionIdManager workerName=node0
datanode_3  | 2020-04-17 18:23:49,830 [main] INFO server.session: No SessionScavenger set, using defaults
datanode_3  | 2020-04-17 18:23:49,835 [main] INFO server.session: node0 Scavenging every 660000ms
datanode_3  | 2020-04-17 18:23:49,888 [main] INFO handler.ContextHandler: Started o.e.j.s.ServletContextHandler@79d7035{logs,/logs,file:///var/log/hadoop/,AVAILABLE}
datanode_3  | 2020-04-17 18:23:49,890 [main] INFO handler.ContextHandler: Started o.e.j.s.ServletContextHandler@126f8f24{static,/static,jar:file:/opt/hadoop/share/ozone/lib/hadoop-hdds-container-service-0.6.0-SNAPSHOT.jar!/webapps/static,AVAILABLE}
datanode_3  | 2020-04-17 18:23:50,274 [main] INFO handler.ContextHandler: Started o.e.j.w.WebAppContext@2a8dd942{hddsDatanode,/,file:///tmp/jetty-0_0_0_0-9882-hadoop-hdds-container-service-0_6_0-SNAPSHOT_jar-_-any-8064662739823117946.dir/webapp/,AVAILABLE}{jar:file:/opt/hadoop/share/ozone/lib/hadoop-hdds-container-service-0.6.0-SNAPSHOT.jar!/webapps/hddsDatanode}
datanode_3  | 2020-04-17 18:23:50,340 [main] INFO server.AbstractConnector: Started ServerConnector@4b87760e{HTTP/1.1,[http/1.1]}{0.0.0.0:9882}
datanode_3  | 2020-04-17 18:23:50,344 [main] INFO server.Server: Started @30224ms
datanode_3  | 2020-04-17 18:23:50,358 [main] INFO impl.MetricsSinkAdapter: Sink prometheus started
datanode_3  | 2020-04-17 18:23:50,358 [main] INFO impl.MetricsSystemImpl: Registered sink prometheus
datanode_3  | 2020-04-17 18:23:50,387 [main] INFO http.BaseHttpServer: HTTP server of hddsDatanode listening at http://0.0.0.0:9882
datanode_3  | 2020-04-17 18:23:50,555 [org.apache.hadoop.util.JvmPauseMonitor$Monitor@30f3f8cc] INFO util.JvmPauseMonitor: Starting JVM pause monitor
datanode_1  | 2020-04-17 18:24:03,832 [Thread-27] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
datanode_1  | 2020-04-17 18:24:03,832 [Thread-27] INFO impl.RoleInfo: 0086d012-6f96-4817-8e1b-94f6eaa443bc: start LeaderElection
datanode_1  | 2020-04-17 18:24:03,865 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3-LeaderElection2] INFO impl.LeaderElection: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3-LeaderElection2: begin an election at term 1 for -1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null
datanode_1  | 2020-04-17 18:24:03,919 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-E3A4286DACE8-LeaderElection1] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-E3A4286DACE8: set configuration 0: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858], old=null at 0
datanode_1  | 2020-04-17 18:24:04,042 [grpc-default-executor-0] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3: changes role from CANDIDATE to FOLLOWER at term 1 for appendEntries
datanode_1  | 2020-04-17 18:24:04,042 [grpc-default-executor-0] INFO impl.RoleInfo: 0086d012-6f96-4817-8e1b-94f6eaa443bc: shutdown LeaderElection
datanode_1  | 2020-04-17 18:24:04,049 [grpc-default-executor-0] INFO impl.RoleInfo: 0086d012-6f96-4817-8e1b-94f6eaa443bc: start FollowerState
datanode_1  | 2020-04-17 18:24:04,049 [grpc-default-executor-0] INFO ratis.XceiverServerRatis: Leader change notification received for group: group-2A8041ABD0B3 with new leaderId: 3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_1  | 2020-04-17 18:24:04,055 [grpc-default-executor-0] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3: change Leader from null to 3989634e-60c9-4e5a-8523-9408dc0a802d at term 1 for appendEntries, leader elected after 5322ms
datanode_1  | 2020-04-17 18:24:04,081 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3-LeaderElection2] INFO impl.LeaderElection: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3-LeaderElection2: Election REJECTED; received 2 response(s) [0086d012-6f96-4817-8e1b-94f6eaa443bc<-f2e775cd-89a9-41b5-a9e0-4408e0d60689#0:FAIL-t1, 0086d012-6f96-4817-8e1b-94f6eaa443bc<-3989634e-60c9-4e5a-8523-9408dc0a802d#0:FAIL-t1] and 0 exception(s); 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3:t1, leader=3989634e-60c9-4e5a-8523-9408dc0a802d, voted=0086d012-6f96-4817-8e1b-94f6eaa443bc, raftlog=0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null
datanode_1  | 2020-04-17 18:24:04,128 [grpc-default-executor-0] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3: set configuration 0: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null at 0
datanode_1  | 2020-04-17 18:24:04,131 [grpc-default-executor-0] INFO segmented.SegmentedRaftLogWorker: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3-SegmentedRaftLogWorker: Starting segment from index:0
datanode_1  | 2020-04-17 18:24:04,225 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-E3A4286DACE8-SegmentedRaftLogWorker] INFO segmented.SegmentedRaftLogWorker: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-E3A4286DACE8-SegmentedRaftLogWorker: created new log segment /data/metadata/ratis/ab3c73f0-0ac8-42e4-ab42-e3a4286dace8/current/log_inprogress_0
datanode_1  | 2020-04-17 18:24:04,225 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3-SegmentedRaftLogWorker] INFO segmented.SegmentedRaftLogWorker: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3-SegmentedRaftLogWorker: created new log segment /data/metadata/ratis/c6484984-fa4c-47a5-afdd-2a8041abd0b3/current/log_inprogress_0
datanode_1  | 2020-04-17 18:24:19,158 [ChunkWriter-57-0] INFO client.DNCertificateClient: Getting certificate with certSerialId:6113740691311.
datanode_1  | 2020-04-17 18:24:19,307 [ChunkWriter-57-0] INFO keyvalue.KeyValueHandler: Operation: CreateContainer , Trace ID: aa474c9f812cac7a:c083a61f31ca1fef:aa474c9f812cac7a:0 , Message: Container creation failed, due to disk out of space , Result: DISK_OUT_OF_SPACE , StorageContainerException Occurred.
datanode_1  | org.apache.hadoop.hdds.scm.container.common.helpers.StorageContainerException: Container creation failed, due to disk out of space
datanode_1  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueContainer.create(KeyValueContainer.java:165)
datanode_1  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.handleCreateContainer(KeyValueHandler.java:247)
datanode_1  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.dispatchRequest(KeyValueHandler.java:164)
datanode_1  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.handle(KeyValueHandler.java:152)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.createContainer(HddsDispatcher.java:414)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatchRequest(HddsDispatcher.java:250)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatch(HddsDispatcher.java:162)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.dispatchCommand(ContainerStateMachine.java:402)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.runCommand(ContainerStateMachine.java:412)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.lambda$handleWriteChunk$2(ContainerStateMachine.java:447)
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
datanode_1  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_1  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_1  | Caused by: org.apache.hadoop.util.DiskChecker$DiskOutOfSpaceException: Out of space: The volume with the most available space (=645894144 B) is less than the container size (=1073741824 B).
datanode_1  | 	at org.apache.hadoop.ozone.container.common.volume.RoundRobinVolumeChoosingPolicy.chooseVolume(RoundRobinVolumeChoosingPolicy.java:77)
datanode_1  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueContainer.create(KeyValueContainer.java:124)
datanode_1  | 	... 13 more
datanode_1  | 2020-04-17 18:24:19,437 [ChunkWriter-57-0] INFO impl.HddsDispatcher: Operation: WriteChunk , Trace ID: aa474c9f812cac7a:c083a61f31ca1fef:aa474c9f812cac7a:0 , Message: ContainerID 1 creation failed , Result: DISK_OUT_OF_SPACE , StorageContainerException Occurred.
datanode_1  | org.apache.hadoop.hdds.scm.container.common.helpers.StorageContainerException: ContainerID 1 creation failed
datanode_1  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatchRequest(HddsDispatcher.java:254)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatch(HddsDispatcher.java:162)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.dispatchCommand(ContainerStateMachine.java:402)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.runCommand(ContainerStateMachine.java:412)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.lambda$handleWriteChunk$2(ContainerStateMachine.java:447)
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
datanode_1  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_1  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_1  | 2020-04-17 18:24:19,484 [ChunkWriter-57-0] ERROR ratis.ContainerStateMachine: group-2A8041ABD0B3: writeChunk writeStateMachineData failed: blockIdcontainerID: 1
datanode_1  | localID: 104015321989251072
datanode_1  | blockCommitSequenceId: 0
datanode_1  |  logIndex 1 chunkName 104015321989251072_chunk_1 Error message: ContainerID 1 creation failed Container Result: DISK_OUT_OF_SPACE
datanode_1  | 2020-04-17 18:24:19,525 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3-SegmentedRaftLogWorker] ERROR ratis.XceiverServerRatis: pipeline Action CLOSE on pipeline PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3.Reason : ContainerID 1 creation failed
datanode_1  | 2020-04-17 18:24:19,696 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3-SegmentedRaftLogWorker] ERROR ratis.XceiverServerRatis: pipeline Action CLOSE on pipeline PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3.Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-FAB0287C2AC1, cid=1
datanode_1  | 	 State Machine: cmdType: WriteChunk traceID: "aa474c9f812cac7a:c083a61f31ca1fef:aa474c9f812cac7a:0" containerID: 1 datanodeUuid: "3989634e-60c9-4e5a-8523-9408dc0a802d" pipelineID: "c6484984-fa4c-47a5-afdd-2a8041abd0b3" writeChunk { blockID { containerID: 1 localID: 104015321989251072 blockCommitSequenceId: 0 } chunkData { chunkName: "104015321989251072_chunk_1" offset: 0 len: 10240 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: "\334],\220" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDEgbG9jSUQ6IDEwNDAxNTMyMTk4OTI1MTA3Mhjy9KL0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BAGROR-2m334gPvEwaQK3h4A1G6wpETxvuYeog10z9pNx-0XjzmnkcYO1PHHn0KJP-ce_4ZabjuUOP0KkKvoFojN-YQ9VkdnsyZXjJrZusLxfrdEr22jdEXZraXyVv_36H56sCH5ifpKoDNL_ANPymE3vNNG1g4fEM5jbsHgv01MPGAJm1YZIU1LPVVfjT_6YZR14unkpWq8xk4DBWFIFFzVvp2oMnlMIP-62cShaLzHHB2g6jZxEZRW8zlgHbyEoFVSfOehqlNmhDRriXhbsRSz771sLQDplmlRnkFVYv8kUJI7m_UXBUsA4AMUs9z1o_Kn0VCe5AsqOQERfPiP0hEkQSEREU19CTE9DS19UT0tFTiJjb25JRDogMSBsb2NJRDogMTA0MDE1MzIxOTg5MjUxMDcy", container path=nonexistent
datanode_1  | 2020-04-17 18:24:29,734 [Command processor thread] ERROR commandhandler.CloseContainerCommandHandler: Container #1 does not exist in datanode. Container close failed.
datanode_1  | 2020-04-17 18:25:50,547 [grpc-default-executor-0] INFO server.GrpcServerProtocolService: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Completed APPEND_ENTRIES, lastRequest: 3989634e-60c9-4e5a-8523-9408dc0a802d->0086d012-6f96-4817-8e1b-94f6eaa443bc#8-t1, previous=(t:1, i:1), leaderCommit=0, initializing? false, entries: size=1, first=(t:1, i:2), STATEMACHINELOGENTRY, client-FAB0287C2AC1, cid=2
datanode_1  | 2020-04-17 18:25:50,640 [grpc-default-executor-0] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: addNew group-0181CC1CA0BD:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] returns group-0181CC1CA0BD:java.util.concurrent.CompletableFuture@1f520794[Not completed]
datanode_1  | 2020-04-17 18:25:50,642 [pool-70-thread-1] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc: new RaftServerImpl for group-0181CC1CA0BD:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] with ContainerStateMachine:uninitialized
datanode_1  | 2020-04-17 18:25:50,642 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.min = 5s (custom)
datanode_1  | 2020-04-17 18:25:50,642 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.max = 5200ms (custom)
datanode_1  | 2020-04-17 18:25:50,643 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpcslowness.timeout = 300s (custom)
kdc_1       | Issuer is listening on : 8081krb5kdc: starting...
kdc_1       | kadmind: starting...
kdc_1       | Apr 17 18:19:38 47192313e929 kadmin.local[1](info): No dictionary file specified, continuing without one.
kdc_1       | Apr 17 18:19:39 070454a38b19 kadmin.local[1](info): No dictionary file specified, continuing without one.
kdc_1       | Apr 17 18:23:10 kdc kadmind[13](info): No dictionary file specified, continuing without one.
kdc_1       | Apr 17 18:23:10 kdc kadmind[13](info): setting up network...
kdc_1       | kadmind: setsockopt(9,IPV6_V6ONLY,1) worked
kdc_1       | kadmind: setsockopt(11,IPV6_V6ONLY,1) worked
kdc_1       | kadmind: setsockopt(13,IPV6_V6ONLY,1) worked
kdc_1       | Apr 17 18:23:10 kdc kadmind[13](info): set up 6 sockets
kdc_1       | Apr 17 18:23:10 kdc kadmind[13](info): Seeding random number generator
kdc_1       | Apr 17 18:23:10 kdc kadmind[13](info): starting
kdc_1       | otp: Loaded
kdc_1       | Apr 17 18:23:06 kdc krb5kdc[8](info): setting up network...
kdc_1       | krb5kdc: setsockopt(9,IPV6_V6ONLY,1) worked
kdc_1       | krb5kdc: setsockopt(11,IPV6_V6ONLY,1) worked
kdc_1       | Apr 17 18:23:06 kdc krb5kdc[8](info): set up 4 sockets
kdc_1       | Apr 17 18:23:06 kdc krb5kdc[8](info): commencing operation
kdc_1       | Generiting keytab
kdc_1       | Authenticating as principal admin/admin with keytab /tmp/admin.keytab.
kdc_1       | WARNING: no policy specified for test/test@EXAMPLE.COM; defaulting to no policy
kdc_1       | Principal "test/test@EXAMPLE.COM" created.
kdc_1       | Authenticating as principal admin/admin with keytab /tmp/admin.keytab.
kdc_1       | Entry for principal test/test@EXAMPLE.COM with kvno 2, encryption type aes256-cts-hmac-sha1-96 added to keytab WRFILE:/data/test.test.keytab.
kdc_1       | Entry for principal test/test@EXAMPLE.COM with kvno 2, encryption type aes128-cts-hmac-sha1-96 added to keytab WRFILE:/data/test.test.keytab.
kdc_1       | Generiting keytab
kdc_1       | Authenticating as principal admin/admin with keytab /tmp/admin.keytab.
kdc_1       | Apr 17 18:23:15 kdc kadmind[13](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1, vers=4, flavor=6
kdc_1       | Apr 17 18:23:15 kdc kadmind[13](Notice): Request: kadm5_get_policy, default, Policy does not exist, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
kdc_1       | Apr 17 18:23:15 kdc kadmind[13](Notice): Request: kadm5_create_principal, test/test@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
kdc_1       | Apr 17 18:23:15 kdc kadmind[13](info): closing down fd 18
kdc_1       | Apr 17 18:23:15 kdc kadmind[13](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1, vers=4, flavor=6
kdc_1       | Apr 17 18:23:15 kdc kadmind[13](Notice): Request: kadm5_randkey_principal, test/test@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
kdc_1       | Apr 17 18:23:15 kdc kadmind[13](Notice): Request: kadm5_get_principal, test/test@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
kdc_1       | Apr 17 18:23:15 kdc kadmind[13](info): closing down fd 18
kdc_1       | Apr 17 18:23:15 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: SERVER_NOT_FOUND: admin/admin@EXAMPLE.COM for kadmin/localhost@EXAMPLE.COM, Server not found in Kerberos database
kdc_1       | Apr 17 18:23:15 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: ISSUE: authtime 1587147795, etypes {rep=18 tkt=18 ses=18}, admin/admin@EXAMPLE.COM for kadmin/admin@EXAMPLE.COM
kdc_1       | Apr 17 18:23:15 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: SERVER_NOT_FOUND: admin/admin@EXAMPLE.COM for kadmin/localhost@EXAMPLE.COM, Server not found in Kerberos database
kdc_1       | Apr 17 18:23:15 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: ISSUE: authtime 1587147795, etypes {rep=18 tkt=18 ses=18}, admin/admin@EXAMPLE.COM for kadmin/admin@EXAMPLE.COM
kdc_1       | Apr 17 18:23:15 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: SERVER_NOT_FOUND: admin/admin@EXAMPLE.COM for kadmin/localhost@EXAMPLE.COM, Server not found in Kerberos database
kdc_1       | WARNING: no policy specified for s3g/s3g@EXAMPLE.COM; defaulting to no policy
kdc_1       | Principal "s3g/s3g@EXAMPLE.COM" created.
kdc_1       | Authenticating as principal admin/admin with keytab /tmp/admin.keytab.
kdc_1       | Entry for principal s3g/s3g@EXAMPLE.COM with kvno 2, encryption type aes256-cts-hmac-sha1-96 added to keytab WRFILE:/data/s3g.s3g.keytab.
kdc_1       | Entry for principal s3g/s3g@EXAMPLE.COM with kvno 2, encryption type aes128-cts-hmac-sha1-96 added to keytab WRFILE:/data/s3g.s3g.keytab.
kdc_1       | Generiting keytab
kdc_1       | Authenticating as principal admin/admin with keytab /tmp/admin.keytab.
kdc_1       | WARNING: no policy specified for HTTP/s3g@EXAMPLE.COM; defaulting to no policy
kdc_1       | Principal "HTTP/s3g@EXAMPLE.COM" created.
kdc_1       | Authenticating as principal admin/admin with keytab /tmp/admin.keytab.
kdc_1       | Entry for principal HTTP/s3g@EXAMPLE.COM with kvno 2, encryption type aes256-cts-hmac-sha1-96 added to keytab WRFILE:/data/HTTP.s3g.keytab.
kdc_1       | Entry for principal HTTP/s3g@EXAMPLE.COM with kvno 2, encryption type aes128-cts-hmac-sha1-96 added to keytab WRFILE:/data/HTTP.s3g.keytab.
kdc_1       | Generiting keytab
kdc_1       | Authenticating as principal admin/admin with keytab /tmp/admin.keytab.
kdc_1       | WARNING: no policy specified for testuser/s3g@EXAMPLE.COM; defaulting to no policy
kdc_1       | Principal "testuser/s3g@EXAMPLE.COM" created.
kdc_1       | Authenticating as principal admin/admin with keytab /tmp/admin.keytab.
kdc_1       | Entry for principal testuser/s3g@EXAMPLE.COM with kvno 2, encryption type aes256-cts-hmac-sha1-96 added to keytab WRFILE:/data/testuser.s3g.keytab.
kdc_1       | Entry for principal testuser/s3g@EXAMPLE.COM with kvno 2, encryption type aes128-cts-hmac-sha1-96 added to keytab WRFILE:/data/testuser.s3g.keytab.
kdc_1       | Generiting keytab
kdc_1       | Authenticating as principal admin/admin with keytab /tmp/admin.keytab.
kdc_1       | WARNING: no policy specified for recon/recon@EXAMPLE.COM; defaulting to no policy
kdc_1       | Principal "recon/recon@EXAMPLE.COM" created.
kdc_1       | Authenticating as principal admin/admin with keytab /tmp/admin.keytab.
kdc_1       | Entry for principal recon/recon@EXAMPLE.COM with kvno 2, encryption type aes256-cts-hmac-sha1-96 added to keytab WRFILE:/data/recon.recon.keytab.
kdc_1       | Entry for principal recon/recon@EXAMPLE.COM with kvno 2, encryption type aes128-cts-hmac-sha1-96 added to keytab WRFILE:/data/recon.recon.keytab.
kdc_1       | Generiting keytab
kdc_1       | Authenticating as principal admin/admin with keytab /tmp/admin.keytab.
kdc_1       | WARNING: no policy specified for dn/1e870b3d5d4c@EXAMPLE.COM; defaulting to no policy
kdc_1       | Principal "dn/1e870b3d5d4c@EXAMPLE.COM" created.
kdc_1       | Authenticating as principal admin/admin with keytab /tmp/admin.keytab.
kdc_1       | Entry for principal dn/1e870b3d5d4c@EXAMPLE.COM with kvno 2, encryption type aes256-cts-hmac-sha1-96 added to keytab WRFILE:/data/dn.1e870b3d5d4c.keytab.
kdc_1       | Entry for principal dn/1e870b3d5d4c@EXAMPLE.COM with kvno 2, encryption type aes128-cts-hmac-sha1-96 added to keytab WRFILE:/data/dn.1e870b3d5d4c.keytab.
kdc_1       | Generiting keytab
kdc_1       | Authenticating as principal admin/admin with keytab /tmp/admin.keytab.
kdc_1       | WARNING: no policy specified for HTTP/recon@EXAMPLE.COM; defaulting to no policy
datanode_2  | 2020-04-17 18:24:01,319 [grpc-default-executor-0] WARN impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Failed groupAdd* GroupManagementRequest:client-98DE0492C110->f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-2A8041ABD0B3, cid=1, seq=0, RW, null, Add:group-2A8041ABD0B3:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858]
datanode_2  | java.util.concurrent.CompletionException: org.apache.ratis.protocol.AlreadyExistsException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Failed to add group-2A8041ABD0B3:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyNow(CompletableFuture.java:670)
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyStage(CompletableFuture.java:658)
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.thenApplyAsync(CompletableFuture.java:2104)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:379)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:363)
datanode_2  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.lambda$groupManagement$0(GrpcAdminProtocolService.java:42)
datanode_2  | 	at org.apache.ratis.grpc.GrpcUtil.asyncCall(GrpcUtil.java:160)
datanode_2  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.groupManagement(GrpcAdminProtocolService.java:42)
datanode_2  | 	at org.apache.ratis.proto.grpc.AdminProtocolServiceGrpc$MethodHandlers.invoke(AdminProtocolServiceGrpc.java:358)
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:172)
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:331)
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:814)
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:123)
datanode_2  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_2  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | Caused by: org.apache.ratis.protocol.AlreadyExistsException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Failed to add group-2A8041ABD0B3:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy$ImplMap.addNew(RaftServerProxy.java:83)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:378)
datanode_2  | 	... 13 more
datanode_2  | 2020-04-17 18:24:03,728 [grpc-default-executor-1] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-2A8041ABD0B3: changes role from  FOLLOWER to FOLLOWER at term 1 for recognizeCandidate:3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_2  | 2020-04-17 18:24:03,733 [grpc-default-executor-1] INFO impl.RoleInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689: shutdown FollowerState
datanode_2  | 2020-04-17 18:24:03,734 [Thread-27] INFO impl.FollowerState: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-2A8041ABD0B3-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
datanode_2  | 2020-04-17 18:24:03,734 [grpc-default-executor-1] INFO impl.RoleInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689: start FollowerState
datanode_2  | 2020-04-17 18:24:04,005 [grpc-default-executor-1] INFO ratis.XceiverServerRatis: Leader change notification received for group: group-2A8041ABD0B3 with new leaderId: 3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_2  | 2020-04-17 18:24:04,005 [grpc-default-executor-1] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-2A8041ABD0B3: change Leader from null to 3989634e-60c9-4e5a-8523-9408dc0a802d at term 1 for appendEntries, leader elected after 4767ms
datanode_2  | 2020-04-17 18:24:04,072 [grpc-default-executor-1] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-2A8041ABD0B3: set configuration 0: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null at 0
datanode_2  | 2020-04-17 18:24:04,084 [grpc-default-executor-1] INFO segmented.SegmentedRaftLogWorker: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-2A8041ABD0B3-SegmentedRaftLogWorker: Starting segment from index:0
datanode_2  | 2020-04-17 18:24:04,285 [Thread-25] INFO impl.FollowerState: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-60084463BA1A-FollowerState: change to CANDIDATE, lastRpcTime:5195ms, electionTimeout:5173ms
datanode_2  | 2020-04-17 18:24:04,287 [Thread-25] INFO impl.RoleInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689: shutdown FollowerState
datanode_2  | 2020-04-17 18:24:04,287 [Thread-25] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-60084463BA1A: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
datanode_2  | 2020-04-17 18:24:04,292 [Thread-25] INFO impl.RoleInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689: start LeaderElection
datanode_2  | 2020-04-17 18:24:04,292 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-2A8041ABD0B3-SegmentedRaftLogWorker] INFO segmented.SegmentedRaftLogWorker: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-2A8041ABD0B3-SegmentedRaftLogWorker: created new log segment /data/metadata/ratis/c6484984-fa4c-47a5-afdd-2a8041abd0b3/current/log_inprogress_0
datanode_2  | 2020-04-17 18:24:04,317 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-60084463BA1A-LeaderElection1] INFO impl.LeaderElection: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-60084463BA1A-LeaderElection1: begin an election at term 1 for -1: [f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858], old=null
datanode_2  | 2020-04-17 18:24:04,318 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-60084463BA1A-LeaderElection1] INFO impl.RoleInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689: shutdown LeaderElection
datanode_2  | 2020-04-17 18:24:04,319 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-60084463BA1A-LeaderElection1] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-60084463BA1A: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
datanode_2  | 2020-04-17 18:24:04,319 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-60084463BA1A-LeaderElection1] INFO ratis.XceiverServerRatis: Leader change notification received for group: group-60084463BA1A with new leaderId: f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_2  | 2020-04-17 18:24:04,319 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-60084463BA1A-LeaderElection1] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-60084463BA1A: change Leader from null to f2e775cd-89a9-41b5-a9e0-4408e0d60689 at term 1 for becomeLeader, leader elected after 6060ms
datanode_2  | 2020-04-17 18:24:04,321 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-60084463BA1A-LeaderElection1] INFO server.RaftServerConfigKeys: raft.server.staging.catchup.gap = 1000 (default)
datanode_2  | 2020-04-17 18:24:04,321 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-60084463BA1A-LeaderElection1] INFO server.RaftServerConfigKeys: raft.server.rpc.sleep.time = 25ms (default)
datanode_2  | 2020-04-17 18:24:04,323 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-60084463BA1A-LeaderElection1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.log_appender.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-60084463BA1A
datanode_2  | 2020-04-17 18:24:04,338 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-60084463BA1A-LeaderElection1] INFO server.RaftServerConfigKeys: raft.server.write.element-limit = 1024 (custom)
kms_1       | Sleeping for 5 seconds
kms_1       | Setting up kerberos!!
kms_1       | KDC ISSUER_SERVER => kdc:8081
kms_1       | /opt/starter.sh: line 66: SLEEP_SECONDS: command not found
kms_1       | Sleeping for  seconds
kms_1       | Got 200, KDC service ready!!
kms_1       | # Licensed to the Apache Software Foundation (ASF) under one or more
kms_1       | # contributor license agreements.  See the NOTICE file distributed with
kms_1       | # this work for additional information regarding copyright ownership.
kms_1       | # The ASF licenses this file to You under the Apache License, Version 2.0
kms_1       | # (the "License"); you may not use this file except in compliance with
kms_1       | # the License.  You may obtain a copy of the License at
kms_1       | #
kms_1       | #     http://www.apache.org/licenses/LICENSE-2.0
kms_1       | #
kms_1       | # Unless required by applicable law or agreed to in writing, software
kms_1       | # distributed under the License is distributed on an "AS IS" BASIS,
kms_1       | # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
kms_1       | # See the License for the specific language governing permissions and
kms_1       | # limitations under the License.
kms_1       | 
kms_1       | [logging]
kms_1       |  default = FILE:/var/log/krb5libs.log
kms_1       |  kdc = FILE:/var/log/krb5kdc.log
kms_1       |  admin_server = FILE:/var/log/kadmind.log
kms_1       | 
kms_1       | [libdefaults]
kms_1       |  dns_canonicalize_hostname = false
kms_1       |  dns_lookup_realm = false
kms_1       |  ticket_lifetime = 24h
kms_1       |  renew_lifetime = 7d
kms_1       |  forwardable = true
kms_1       |  rdns = false
kms_1       |  default_realm = EXAMPLE.COM
kms_1       | 
kms_1       | [realms]
kms_1       |  EXAMPLE.COM = {
kms_1       |   kdc = kdc
kms_1       |   admin_server = kdc
kms_1       |  }
kms_1       | 
kms_1       | [domain_realm]
kms_1       |  .example.com = EXAMPLE.COM
kms_1       | WARNING: /opt/hadoop/temp does not exist. Creating.
kms_1       | WARNING: /opt/hadoop/logs does not exist. Creating.
kms_1       | Exception in thread "main" java.io.IOException: Problem starting http server
kms_1       | 	at org.apache.hadoop.http.HttpServer2.start(HttpServer2.java:1171)
kms_1       | 	at org.apache.hadoop.crypto.key.kms.server.KMSWebServer.start(KMSWebServer.java:130)
kms_1       | 	at org.apache.hadoop.crypto.key.kms.server.KMSWebServer.main(KMSWebServer.java:176)
kms_1       | Caused by: javax.servlet.ServletException: javax.servlet.ServletException: Keytab does not exist: /etc/security/keytabs/HTTP.keytab
kms_1       | 	at org.apache.hadoop.security.authentication.server.KerberosAuthenticationHandler.init(KerberosAuthenticationHandler.java:188)
kms_1       | 	at org.apache.hadoop.security.authentication.server.AuthenticationFilter.initializeAuthHandler(AuthenticationFilter.java:194)
kms_1       | 	at org.apache.hadoop.security.authentication.server.AuthenticationFilter.init(AuthenticationFilter.java:180)
kms_1       | 	at org.eclipse.jetty.servlet.FilterHolder.initialize(FilterHolder.java:139)
kms_1       | 	at org.eclipse.jetty.servlet.ServletHandler.initialize(ServletHandler.java:873)
kms_1       | 	at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:349)
kms_1       | 	at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:778)
kms_1       | 	at org.eclipse.jetty.servlet.ServletContextHandler.doStart(ServletContextHandler.java:262)
kms_1       | 	at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)
kms_1       | 	at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:131)
kms_1       | 	at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:113)
kdc_1       | Principal "HTTP/recon@EXAMPLE.COM" created.
kdc_1       | Authenticating as principal admin/admin with keytab /tmp/admin.keytab.
kdc_1       | Entry for principal HTTP/recon@EXAMPLE.COM with kvno 2, encryption type aes256-cts-hmac-sha1-96 added to keytab WRFILE:/data/HTTP.recon.keytab.
kdc_1       | Entry for principal HTTP/recon@EXAMPLE.COM with kvno 2, encryption type aes128-cts-hmac-sha1-96 added to keytab WRFILE:/data/HTTP.recon.keytab.
kdc_1       | Generiting keytab
kdc_1       | Authenticating as principal admin/admin with keytab /tmp/admin.keytab.
kdc_1       | WARNING: no policy specified for HTTP/1e870b3d5d4c@EXAMPLE.COM; defaulting to no policy
kdc_1       | Principal "HTTP/1e870b3d5d4c@EXAMPLE.COM" created.
kdc_1       | Authenticating as principal admin/admin with keytab /tmp/admin.keytab.
kdc_1       | Entry for principal HTTP/1e870b3d5d4c@EXAMPLE.COM with kvno 2, encryption type aes256-cts-hmac-sha1-96 added to keytab WRFILE:/data/HTTP.1e870b3d5d4c.keytab.
kdc_1       | Entry for principal HTTP/1e870b3d5d4c@EXAMPLE.COM with kvno 2, encryption type aes128-cts-hmac-sha1-96 added to keytab WRFILE:/data/HTTP.1e870b3d5d4c.keytab.
kdc_1       | Apr 17 18:23:15 kdc kadmind[13](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1, vers=4, flavor=6
kdc_1       | Apr 17 18:23:15 kdc kadmind[13](Notice): Request: kadm5_get_policy, default, Policy does not exist, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
kdc_1       | Apr 17 18:23:15 kdc kadmind[13](Notice): Request: kadm5_create_principal, s3g/s3g@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
kdc_1       | Apr 17 18:23:15 kdc kadmind[13](info): closing down fd 18
kdc_1       | Apr 17 18:23:15 kdc kadmind[13](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1, vers=4, flavor=6
kdc_1       | Apr 17 18:23:15 kdc kadmind[13](Notice): Request: kadm5_randkey_principal, s3g/s3g@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
kdc_1       | Apr 17 18:23:15 kdc kadmind[13](Notice): Request: kadm5_get_principal, s3g/s3g@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
kdc_1       | Apr 17 18:23:15 kdc kadmind[13](info): closing down fd 18
kdc_1       | Apr 17 18:23:15 kdc kadmind[13](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1, vers=4, flavor=6
kdc_1       | Apr 17 18:23:15 kdc kadmind[13](Notice): Request: kadm5_get_policy, default, Policy does not exist, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
kdc_1       | Apr 17 18:23:15 kdc kadmind[13](Notice): Request: kadm5_create_principal, HTTP/s3g@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
kdc_1       | Apr 17 18:23:15 kdc kadmind[13](info): closing down fd 18
kdc_1       | Apr 17 18:23:15 kdc kadmind[13](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1, vers=4, flavor=6
kdc_1       | Apr 17 18:23:15 kdc kadmind[13](Notice): Request: kadm5_randkey_principal, HTTP/s3g@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
kdc_1       | Apr 17 18:23:15 kdc kadmind[13](Notice): Request: kadm5_get_principal, HTTP/s3g@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
kdc_1       | Apr 17 18:23:15 kdc kadmind[13](info): closing down fd 18
kdc_1       | Apr 17 18:23:15 kdc kadmind[13](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1, vers=4, flavor=6
kdc_1       | Apr 17 18:23:15 kdc kadmind[13](Notice): Request: kadm5_get_policy, default, Policy does not exist, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
kdc_1       | Apr 17 18:23:15 kdc kadmind[13](Notice): Request: kadm5_create_principal, testuser/s3g@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
kdc_1       | Apr 17 18:23:15 kdc kadApr 17 18:23:15 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: ISSUE: authtime 1587147795, etypes {rep=18 tkt=18 ses=18}, admin/admin@EXAMPLE.COM for kadmin/admin@EXAMPLE.COM
kdc_1       | Apr 17 18:23:15 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: SERVER_NOT_FOUND: admin/admin@EXAMPLE.COM for kadmin/localhost@EXAMPLE.COM, Server not found in Kerberos database
kdc_1       | Apr 17 18:23:15 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: ISSUE: authtime 1587147795, etypes {rep=18 tkt=18 ses=18}, admin/admin@EXAMPLE.COM for kadmin/admin@EXAMPLE.COM
kdc_1       | Apr 17 18:23:15 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: SERVER_NOT_FOUND: admin/admin@EXAMPLE.COM for kadmin/localhost@EXAMPLE.COM, Server not found in Kerberos database
kdc_1       | Apr 17 18:23:15 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: ISSUE: authtime 1587147795, etypes {rep=18 tkt=18 ses=18}, admin/admin@EXAMPLE.COM for kadmin/admin@EXAMPLE.COM
kdc_1       | Apr 17 18:23:15 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: SERVER_NOT_FOUND: admin/admin@EXAMPLE.COM for kadmin/localhost@EXAMPLE.COM, Server not found in Kerberos database
kdc_1       | Apr 17 18:23:15 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: ISSUE: authtime 1587147795, etypes {rep=18 tkt=18 ses=18}, admin/admin@EXAMPLE.COM for kadmin/admin@EXAMPLE.COM
kdc_1       | Apr 17 18:23:15 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: SERVER_NOT_FOUND: admin/admin@EXAMPLE.COM for kadmin/localhost@EXAMPLE.COM, Server not found in Kerberos database
kdc_1       | Apr 17 18:23:15 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: ISSUE: authtime 1587147795, etypes {rep=18 tkt=18 ses=18}, admin/admin@EXAMPLE.COM for kadmin/admin@EXAMPLE.COM
kdc_1       | Apr 17 18:23:15 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: SERVER_NOT_FOUND: admin/admin@EXAMPLE.COM for kadmin/localhost@EXAMPLE.COM, Server not found in Kerbermind[13](info): closing down fd 18
kdc_1       | Apr 17 18:23:15 kdc kadmind[13](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1, vers=4, flavor=6
kdc_1       | Apr 17 18:23:15 kdc kadmind[13](Notice): Request: kadm5_randkey_principal, testuser/s3g@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
kdc_1       | Apr 17 18:23:15 kdc kadmind[13](Notice): Request: kadm5_get_principal, testuser/s3g@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
kdc_1       | Apr 17 18:23:15 kdc kadmind[13](info): closing down fd 18
kdc_1       | Apr 17 18:23:16 kdc kadmind[13](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1, vers=4, flavor=6
kdc_1       | Apr 17 18:23:16 kdc kadmind[13](Notice): Request: kadm5_get_policy, default, Policy does not exist, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COos database
kdc_1       | Apr 17 18:23:15 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: ISSUE: authtime 1587147795, etypes {rep=18 tkt=18 ses=18}, admin/admin@EXAMPLE.COM for kadmin/admin@EXAMPLE.COM
datanode_2  | 2020-04-17 18:24:04,339 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-60084463BA1A-LeaderElection1] INFO server.RaftServerConfigKeys: raft.server.write.byte-limit = 1073741824 (custom)
datanode_2  | 2020-04-17 18:24:04,344 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-60084463BA1A-LeaderElection1] INFO server.RaftServerConfigKeys: raft.server.watch.timeout = 180s (custom)
datanode_2  | 2020-04-17 18:24:04,348 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-60084463BA1A-LeaderElection1] INFO server.RaftServerConfigKeys: raft.server.watch.timeout.denomination = 1s (default)
datanode_2  | 2020-04-17 18:24:04,348 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-60084463BA1A-LeaderElection1] INFO server.RaftServerConfigKeys: raft.server.watch.element-limit = 65536 (default)
datanode_2  | 2020-04-17 18:24:04,358 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-60084463BA1A-LeaderElection1] INFO impl.RoleInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689: start LeaderState
datanode_2  | 2020-04-17 18:24:04,366 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-60084463BA1A-LeaderElection1] INFO segmented.SegmentedRaftLogWorker: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-60084463BA1A-SegmentedRaftLogWorker: Starting segment from index:0
datanode_2  | 2020-04-17 18:24:04,383 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-60084463BA1A-LeaderElection1] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-60084463BA1A: set configuration 0: [f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858], old=null at 0
datanode_2  | 2020-04-17 18:24:04,388 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-60084463BA1A-SegmentedRaftLogWorker] INFO segmented.SegmentedRaftLogWorker: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-60084463BA1A-SegmentedRaftLogWorker: created new log segment /data/metadata/ratis/e899e35a-1e99-408d-91af-60084463ba1a/current/log_inprogress_0
datanode_2  | 2020-04-17 18:24:19,238 [ChunkWriter-0-0] INFO client.DNCertificateClient: Getting certificate with certSerialId:6113740691311.
datanode_2  | 2020-04-17 18:24:19,468 [ChunkWriter-0-0] INFO keyvalue.KeyValueHandler: Operation: CreateContainer , Trace ID: aa474c9f812cac7a:c083a61f31ca1fef:aa474c9f812cac7a:0 , Message: Container creation failed, due to disk out of space , Result: DISK_OUT_OF_SPACE , StorageContainerException Occurred.
datanode_2  | org.apache.hadoop.hdds.scm.container.common.helpers.StorageContainerException: Container creation failed, due to disk out of space
datanode_2  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueContainer.create(KeyValueContainer.java:165)
datanode_2  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.handleCreateContainer(KeyValueHandler.java:247)
datanode_2  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.dispatchRequest(KeyValueHandler.java:164)
datanode_2  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.handle(KeyValueHandler.java:152)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.createContainer(HddsDispatcher.java:414)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatchRequest(HddsDispatcher.java:250)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatch(HddsDispatcher.java:162)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.dispatchCommand(ContainerStateMachine.java:402)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.runCommand(ContainerStateMachine.java:412)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.lambda$handleWriteChunk$2(ContainerStateMachine.java:447)
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
datanode_2  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_2  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | Caused by: org.apache.hadoop.util.DiskChecker$DiskOutOfSpaceException: Out of space: The volume with the most available space (=645877760 B) is less than the container size (=1073741824 B).
datanode_2  | 	at org.apache.hadoop.ozone.container.common.volume.RoundRobinVolumeChoosingPolicy.chooseVolume(RoundRobinVolumeChoosingPolicy.java:77)
datanode_2  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueContainer.create(KeyValueContainer.java:124)
datanode_2  | 	... 13 more
datanode_2  | 2020-04-17 18:24:19,562 [ChunkWriter-0-0] INFO impl.HddsDispatcher: Operation: WriteChunk , Trace ID: aa474c9f812cac7a:c083a61f31ca1fef:aa474c9f812cac7a:0 , Message: ContainerID 1 creation failed , Result: DISK_OUT_OF_SPACE , StorageContainerException Occurred.
datanode_2  | org.apache.hadoop.hdds.scm.container.common.helpers.StorageContainerException: ContainerID 1 creation failed
datanode_2  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatchRequest(HddsDispatcher.java:254)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatch(HddsDispatcher.java:162)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.dispatchCommand(ContainerStateMachine.java:402)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.runCommand(ContainerStateMachine.java:412)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.lambda$handleWriteChunk$2(ContainerStateMachine.java:447)
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
datanode_2  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_2  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 2020-04-17 18:24:19,602 [ChunkWriter-0-0] ERROR ratis.ContainerStateMachine: group-2A8041ABD0B3: writeChunk writeStateMachineData failed: blockIdcontainerID: 1
datanode_2  | localID: 104015321989251072
datanode_2  | blockCommitSequenceId: 0
datanode_2  |  logIndex 1 chunkName 104015321989251072_chunk_1 Error message: ContainerID 1 creation failed Container Result: DISK_OUT_OF_SPACE
datanode_2  | 2020-04-17 18:24:19,616 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-2A8041ABD0B3-SegmentedRaftLogWorker] ERROR ratis.XceiverServerRatis: pipeline Action CLOSE on pipeline PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3.Reason : ContainerID 1 creation failed
datanode_2  | 2020-04-17 18:24:19,772 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-2A8041ABD0B3-SegmentedRaftLogWorker] ERROR ratis.XceiverServerRatis: pipeline Action CLOSE on pipeline PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3.Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-FAB0287C2AC1, cid=1
datanode_2  | 	 State Machine: cmdType: WriteChunk traceID: "aa474c9f812cac7a:c083a61f31ca1fef:aa474c9f812cac7a:0" containerID: 1 datanodeUuid: "3989634e-60c9-4e5a-8523-9408dc0a802d" pipelineID: "c6484984-fa4c-47a5-afdd-2a8041abd0b3" writeChunk { blockID { containerID: 1 localID: 104015321989251072 blockCommitSequenceId: 0 } chunkData { chunkName: "104015321989251072_chunk_1" offset: 0 len: 10240 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: "\334],\220" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDEgbG9jSUQ6IDEwNDAxNTMyMTk4OTI1MTA3Mhjy9KL0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BAGROR-2m334gPvEwaQK3h4A1G6wpETxvuYeog10z9pNx-0XjzmnkcYO1PHHn0KJP-ce_4ZabjuUOP0KkKvoFojN-YQ9VkdnsyZXjJrZusLxfrdEr22jdEXZraXyVv_36H56sCH5ifpKoDNL_ANPymE3vNNG1g4fEM5jbsHgv01MPGAJm1YZIU1LPVVfjT_6YZR14unkpWq8xk4DBWFIFFzVvp2oMnlMIP-62cShaLzHHB2g6jZxEZRW8zlgHbyEoFVSfOehqlNmhDRriXhbsRSz771sLQDplmlRnkFVYv8kUJI7m_UXBUsA4AMUs9z1o_Kn0VCe5AsqOQERfPiP0hEkQSEREU19CTE9DS19UT0tFTiJjb25JRDogMSBsb2NJRDogMTA0MDE1MzIxOTg5MjUxMDcy", container path=nonexistent
kdc_1       | Apr 17 18:23:16 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: SERVER_NOT_FOUND: admin/admin@EXAMPLE.COM for kadmin/localhost@EXAMPLE.COM, Server not found in Kerberos database
kdc_1       | Apr 17 18:23:16 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: ISSUE: authtime 1587147796, etypes {rep=18 tkt=18 ses=18}, admin/admin@EXAMPLE.COM for kadmin/admin@EXAMPLE.COM
kdc_1       | Apr 17 18:23:16 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: SERVER_NOT_FOUND: admin/admin@EXAMPLE.COM for kadmin/localhost@EXAMPLE.COM, Server not found in Kerberos database
kdc_1       | Apr 17 18:23:16 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: ISSUE: authtime 1587147796, etypes {rep=18 tkt=18 ses=18}, admin/admin@EXAMPLE.COM for kadmin/aM, addr=127.0.0.1
kdc_1       | Apr 17 18:23:16 kdc kadmind[13](Notice): Request: kadm5_create_principal, recon/recon@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
kdc_1       | Apr 17 18:23:16 kdc kadmind[13](info): closing down fd 18
kdc_1       | Apr 17 18:23:16 kdc kadmind[13](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1, vers=4, flavor=6
kdc_1       | Apr 17 18:23:16 kdc kadmind[13](Notice): Request: kadm5_randkey_principal, recon/recon@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
kdc_1       | Apr 17 18:23:16 kdc kadmind[13](Notice): Request: kadm5_get_principal, recon/recon@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
kdc_1       | Apr 17 18:23:16 kdc kadmind[13](info): closing down fd 18
kdc_1       | Apr 17 18:23:16 kdc kadmind[13](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, sedmin@EXAMPLE.COM
kdc_1       | Apr 17 18:23:16 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: SERVER_NOT_FOUND: admin/admin@EXAMPLE.COM for kadmin/localhost@EXAMPLE.COM, Server not found in Kerberos database
kdc_1       | Apr 17 18:23:16 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: ISSUE: authtime 1587147796, etypes {rep=18 tkt=18 ses=18}, admin/admin@EXAMPLE.COM for kadmin/admin@EXAMPLE.COM
kdc_1       | Apr 17 18:23:16 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: SERVER_NOT_FOUND: admin/admin@EXAMPLE.COM for kadmin/localhost@EXAMPLE.COM, Server not found in Kerberos database
kdc_1       | Apr 17 18:23:16 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: ISSUE: authtime 1587147796, etypes {rep=18 tkt=18 ses=18}, admin/admin@EXAMPLE.COM for kadmin/admin@EXAMPLE.COM
kdc_1       | Apr 17 18:23:16 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: SERVER_NOT_FOUND: admin/admin@EXAMPLE.COM for kadmin/localhost@EXAMPLE.COM, Server not fourvice=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1, vers=4, flavor=6
kdc_1       | Apr 17 18:23:16 kdc kadmind[13](Notice): Request: kadm5_get_policy, default, Policy does not exist, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
kdc_1       | Apr 17 18:23:16 kdc kadmind[13](Notice): Request: kadm5_create_principal, dn/1e870b3d5d4c@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
kdc_1       | Apr 17 18:23:16 kdc kadmind[13](info): closing down fd 18
kdc_1       | Apr 17 18:23:16 kdc kadmind[13](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1, vers=4, flavor=6
kdc_1       | Apr 17 18:23:16 kdc kadmind[13](Notice): Request: kadm5_randkey_principal, dn/1e870b3d5d4c@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
kdc_1       | Apr 17 18:23:16 kdc kadmind[13](Notice): Request: kadm5_get_principal, dn/1e870b3d5d4c@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COnd in Kerberos database
kdc_1       | Apr 17 18:23:16 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: ISSUE: authtime 1587147796, etypes {rep=18 tkt=18 ses=18}, admin/admin@EXAMPLE.COM for kadmin/admin@EXAMPLE.COM
kdc_1       | Apr 17 18:23:16 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: SERVER_NOT_FOUND: admin/admin@EXAMPLE.COM for kadmin/localhost@EXAMPLE.COM, Server not found in Kerberos database
kdc_1       | Apr 17 18:23:16 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: ISSUE: authtime 1587147796, etypes {rep=18 tkt=18 ses=18}, admin/admin@EXAMPLE.COM for kadmin/admin@EXAMPLE.COM
kdc_1       | Apr 17 18:23:16 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: SERVER_NOT_FOUND: admin/admin@EXAMPLE.COM for kadmin/localhost@EXAMPLE.COM, Server not found in Kerberos database
kdc_1       | Apr 17 18:23:16 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: ISSUE: authtime 1587147796, etypes {rep=18 tkt=18 ses=18}, admin/admin@EXAMPLE.COM M, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
kdc_1       | Apr 17 18:23:16 kdc kadmind[13](info): closing down fd 18
kdc_1       | Apr 17 18:23:16 kdc kadmind[13](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1, vers=4, flavor=6
kdc_1       | Apr 17 18:23:16 kdc kadmind[13](Notice): Request: kadm5_get_policy, default, Policy does not exist, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
kdc_1       | Apr 17 18:23:16 kdc kadmind[13](Notice): Request: kadm5_create_principal, HTTP/recon@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
kdc_1       | Apr 17 18:23:16 kdc kadmind[13](info): closing down fd 18
kdc_1       | Apr 17 18:23:16 kdc kadmind[13](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1, vers=4, flavor=6
kdc_1       | Apr 17 18:23:16 kdc kadmind[13](Notice): Request: kadm5_randkey_principal, HTTP/recon@EXAMPLE.COMfor kadmin/admin@EXAMPLE.COM
kdc_1       | Apr 17 18:23:16 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: SERVER_NOT_FOUND: admin/admin@EXAMPLE.COM for kadmin/localhost@EXAMPLE.COM, Server not found in Kerberos database
kdc_1       | Apr 17 18:23:16 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: ISSUE: authtime 1587147796, etypes {rep=18 tkt=18 ses=18}, admin/admin@EXAMPLE.COM for kadmin/admin@EXAMPLE.COM
kdc_1       | , success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
kdc_1       | Apr 17 18:23:16 kdc kadmind[13](Notice): Request: kadm5_get_principal, HTTP/recon@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
kdc_1       | Apr 17 18:23:16 kdc kadmind[13](info): closing down fd 18
kdc_1       | Apr 17 18:23:16 kdc kadmind[13](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1, vers=4, flavor=6
kdc_1       | Apr 17 18:23:16 kdc kadmind[13](Notice): Request: kadm5_get_policy, default, Policy does not exist, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
kdc_1       | Apr 17 18:23:16 kdc kadmind[13](Notice): Request: kadm5_create_principal, HTTP/1e870b3d5d4c@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
kdc_1       | Apr 17 18:23:16 kdc kadmind[13](info): closing down fd 18
kdc_1       | Apr 17 18:23:16 kdc kadmind[13](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1, vers=4, flavor=6
kdc_1       | Apr 17 18:23:16 kdc kadmind[13](Notice): Request: kadm5_randkey_principal, HTTP/1e870b3d5d4c@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
kdc_1       | Apr 17 18:23:16 kdc kadmind[13](Notice): Request: kadm5_get_principal, HTTP/1e870b3d5d4c@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
kdc_1       | Apr 17 18:23:16 kdc kadmind[13](info): closing down fd 18
kdc_1       | Generiting keytab
kdc_1       | Authenticating as principal admin/admin with keytab /tmp/admin.keytab.
kdc_1       | WARNING: no policy specified for om/om@EXAMPLE.COM; defaulting to no policy
kdc_1       | Principal "om/om@EXAMPLE.COM" created.
kdc_1       | Authenticating as principal admin/admin with keytab /tmp/admin.keytab.
kdc_1       | Entry for principal om/om@EXAMPLE.COM with kvno 2, encryption type aes256-cts-hmac-sha1-96 added to keytab WRFILE:/data/om.om.keytab.
kdc_1       | Entry for principal om/om@EXAMPLE.COM with kvno 2, encryption type aes128-cts-hmac-sha1-96 added to keytab WRFILE:/data/om.om.keytab.
kdc_1       | Generiting keytab
kdc_1       | Authenticating as principal admin/admin with keytab /tmp/admin.keytab.
kdc_1       | WARNING: no policy specified for scm/scm@EXAMPLE.COM; defaulting to no policy
kdc_1       | Principal "scm/scm@EXAMPLE.COM" created.
kdc_1       | Authenticating as principal admin/admin with keytab /tmp/admin.keytab.
kdc_1       | Entry for principal scm/scm@EXAMPLE.COM with kvno 2, encryption type aes256-cts-hmac-sha1-96 added to keytab WRFILE:/data/scm.scm.keytab.
kdc_1       | Entry for principal scm/scm@EXAMPLE.COM with kvno 2, encryption type aes128-cts-hmac-sha1-96 added to keytab WRFILE:/data/scm.scm.keytab.
kdc_1       | Generiting keytab
kdc_1       | Authenticating as principal admin/admin with keytab /tmp/admin.keytab.
kdc_1       | WARNING: no policy specified for HTTP/om@EXAMPLE.COM; defaulting to no policy
kdc_1       | Principal "HTTP/om@EXAMPLE.COM" created.
kdc_1       | Authenticating as principal admin/admin with keytab /tmp/admin.keytab.
kdc_1       | Entry for principal HTTP/om@EXAMPLE.COM with kvno 2, encryption type aes256-cts-hmac-sha1-96 added to keytab WRFILE:/data/HTTP.om.keytab.
kdc_1       | Entry for principal HTTP/om@EXAMPLE.COM with kvno 2, encryption type aes128-cts-hmac-sha1-96 added to keytab WRFILE:/data/HTTP.om.keytab.
kdc_1       | Generiting keytab
kdc_1       | Authenticating as principal admin/admin with keytab /tmp/admin.keytab.
kdc_1       | WARNING: no policy specified for HTTP/scm@EXAMPLE.COM; defaulting to no policy
kdc_1       | Principal "HTTP/scm@EXAMPLE.COM" created.
kdc_1       | Authenticating as principal admin/admin with keytab /tmp/admin.keytab.
kdc_1       | Entry for principal HTTP/scm@EXAMPLE.COM with kvno 2, encryption type aes256-cts-hmac-sha1-96 added to keytab WRFILE:/data/HTTP.scm.keytab.
kdc_1       | Entry for principal HTTP/scm@EXAMPLE.COM with kvno 2, encryption type aes128-cts-hmac-sha1-96 added to keytab WRFILE:/data/HTTP.scm.keytab.
kdc_1       | Generiting keytab
kdc_1       | Authenticating as principal admin/admin with keytab /tmp/admin.keytab.
kdc_1       | WARNING: no policy specified for testuser/scm@EXAMPLE.COM; defaulting to no policy
datanode_1  | 2020-04-17 18:25:50,643 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.sleep.deviation.threshold = 300 (default)
datanode_3  | 2020-04-17 18:23:50,740 [Datanode State Machine Thread - 0] INFO statemachine.SCMConnectionManager: Adding Recon Server : recon/172.24.0.3:9891
datanode_2  | 2020-04-17 18:24:30,239 [Command processor thread] ERROR commandhandler.CloseContainerCommandHandler: Container #1 does not exist in datanode. Container close failed.
datanode_2  | 2020-04-17 18:25:50,555 [grpc-default-executor-1] INFO server.GrpcServerProtocolService: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Completed APPEND_ENTRIES, lastRequest: 3989634e-60c9-4e5a-8523-9408dc0a802d->f2e775cd-89a9-41b5-a9e0-4408e0d60689#8-t1, previous=(t:1, i:1), leaderCommit=0, initializing? false, entries: size=1, first=(t:1, i:2), STATEMACHINELOGENTRY, client-FAB0287C2AC1, cid=2
datanode_2  | 2020-04-17 18:25:50,685 [grpc-default-executor-1] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: addNew group-0181CC1CA0BD:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] returns group-0181CC1CA0BD:java.util.concurrent.CompletableFuture@3ff25bbb[Not completed]
datanode_2  | 2020-04-17 18:25:50,687 [pool-70-thread-1] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689: new RaftServerImpl for group-0181CC1CA0BD:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] with ContainerStateMachine:uninitialized
kms_1       | 	at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:61)
kms_1       | 	at org.eclipse.jetty.server.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:161)
datanode_3  | 2020-04-17 18:23:53,211 [Datanode State Machine Thread - 0] INFO ozoneimpl.OzoneContainer: Attempting to start container services.
datanode_3  | 2020-04-17 18:23:53,223 [Datanode State Machine Thread - 0] INFO ozoneimpl.OzoneContainer: Background container scanner has been disabled.
datanode_3  | 2020-04-17 18:23:53,230 [Datanode State Machine Thread - 0] INFO ratis.XceiverServerRatis: Starting XceiverServerRatis 3989634e-60c9-4e5a-8523-9408dc0a802d at port 9858
datanode_3  | 2020-04-17 18:23:53,476 [Datanode State Machine Thread - 0] INFO impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: start RPC server
datanode_3  | 2020-04-17 18:23:53,741 [Datanode State Machine Thread - 0] INFO server.GrpcService: 3989634e-60c9-4e5a-8523-9408dc0a802d: GrpcService started, listening on 0.0.0.0/0.0.0.0:9858
datanode_3  | 2020-04-17 18:23:57,563 [Command processor thread] INFO impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: addNew group-3A862F5E35EB:[3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] returns group-3A862F5E35EB:java.util.concurrent.CompletableFuture@67bb7d58[Not completed]
kms_1       | 	at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)
datanode_1  | 2020-04-17 18:25:50,643 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.install.snapshot.enabled = false (custom)
datanode_1  | 2020-04-17 18:25:50,643 [pool-70-thread-1] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0181CC1CA0BD: ConfigurationManager, init=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null, confs=<EMPTY_MAP>
datanode_1  | 2020-04-17 18:25:50,643 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.storage.dir = [/data/metadata/ratis] (custom)
datanode_1  | 2020-04-17 18:25:50,644 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.corruption.policy = EXCEPTION (default)
datanode_1  | 2020-04-17 18:25:50,644 [pool-70-thread-1] INFO storage.RaftStorageDirectory: The storage directory /data/metadata/ratis/31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd does not exist. Creating ...
datanode_1  | 2020-04-17 18:25:50,648 [pool-70-thread-1] INFO storage.RaftStorageDirectory: Lock on /data/metadata/ratis/31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd/in_use.lock acquired by nodename 6@1e870b3d5d4c
datanode_1  | 2020-04-17 18:25:50,649 [pool-70-thread-1] INFO storage.RaftStorage: Storage directory /data/metadata/ratis/31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd has been successfully formatted.
recon_1     | Sleeping for 5 seconds
kms_1       | 	at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:131)
datanode_1  | 2020-04-17 18:25:50,650 [pool-70-thread-1] INFO ratis.ContainerStateMachine: group-0181CC1CA0BD: The snapshot info is null. Setting the last applied indexto:(t:0, i:~)
datanode_3  | 2020-04-17 18:23:57,707 [pool-70-thread-1] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d: new RaftServerImpl for group-3A862F5E35EB:[3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] with ContainerStateMachine:uninitialized
datanode_3  | 2020-04-17 18:23:57,708 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.min = 5s (custom)
om_1        | Sleeping for 5 seconds
s3g_1       | Sleeping for 5 seconds
s3g_1       | Setting up kerberos!!
recon_1     | Setting up kerberos!!
scm_1       | Sleeping for 5 seconds
kms_1       | 	at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:113)
datanode_1  | 2020-04-17 18:25:50,650 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.notification.no-leader.timeout = 60s (default)
datanode_3  | 2020-04-17 18:23:57,709 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.max = 5200ms (custom)
datanode_2  | 2020-04-17 18:25:50,687 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.min = 5s (custom)
om_1        | Setting up kerberos!!
kdc_1       | Principal "testuser/scm@EXAMPLE.COM" created.
s3g_1       | KDC ISSUER_SERVER => kdc:8081
recon_1     | KDC ISSUER_SERVER => kdc:8081
scm_1       | Setting up kerberos!!
kms_1       | 	at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:61)
datanode_1  | 2020-04-17 18:25:50,657 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.use.memory = false (default)
datanode_3  | 2020-04-17 18:23:57,709 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpcslowness.timeout = 300s (custom)
datanode_2  | 2020-04-17 18:25:50,687 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.max = 5200ms (custom)
om_1        | KDC ISSUER_SERVER => kdc:8081
kdc_1       | Authenticating as principal admin/admin with keytab /tmp/admin.keytab.
s3g_1       | Sleeping for 5 seconds
recon_1     | Sleeping for 5 seconds
scm_1       | KDC ISSUER_SERVER => kdc:8081
kms_1       | 	at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)
datanode_1  | 2020-04-17 18:25:50,658 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.purge.gap = 1000000 (custom)
datanode_3  | 2020-04-17 18:23:57,709 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.sleep.deviation.threshold = 300 (default)
datanode_2  | 2020-04-17 18:25:50,687 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpcslowness.timeout = 300s (custom)
om_1        | Sleeping for 5 seconds
kdc_1       | Entry for principal testuser/scm@EXAMPLE.COM with kvno 2, encryption type aes256-cts-hmac-sha1-96 added to keytab WRFILE:/data/testuser.scm.keytab.
s3g_1       | Got 200, KDC service ready!!
recon_1     | Got 200, KDC service ready!!
scm_1       | Sleeping for 5 seconds
kms_1       | 	at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:131)
datanode_1  | 2020-04-17 18:25:50,658 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
datanode_3  | 2020-04-17 18:23:57,710 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.install.snapshot.enabled = false (custom)
datanode_2  | 2020-04-17 18:25:50,688 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.sleep.deviation.threshold = 300 (default)
om_1        | Got 200, KDC service ready!!
kdc_1       | Entry for principal testuser/scm@EXAMPLE.COM with kvno 2, encryption type aes128-cts-hmac-sha1-96 added to keytab WRFILE:/data/testuser.scm.keytab.
s3g_1       | Download s3g/s3g@EXAMPLE.COM keytab file to /etc/security/keytabs/s3g.keytab
recon_1     | Download recon/recon@EXAMPLE.COM keytab file to /etc/security/keytabs/recon.keytab
scm_1       | Got 200, KDC service ready!!
kms_1       | 	at org.eclipse.jetty.server.Server.start(Server.java:427)
datanode_1  | 2020-04-17 18:25:50,658 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
datanode_3  | 2020-04-17 18:23:57,721 [pool-70-thread-1] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-3A862F5E35EB: ConfigurationManager, init=-1: [3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null, confs=<EMPTY_MAP>
datanode_2  | 2020-04-17 18:25:50,688 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.install.snapshot.enabled = false (custom)
om_1        | Download om/om@EXAMPLE.COM keytab file to /etc/security/keytabs/om.keytab
kdc_1       | Generiting keytab
s3g_1       | --2020-04-17 18:23:15--  http://kdc:8081/keytab/s3g/s3g
recon_1     | --2020-04-17 18:23:16--  http://kdc:8081/keytab/recon/recon
scm_1       | Download scm/scm@EXAMPLE.COM keytab file to /etc/security/keytabs/scm.keytab
kms_1       | 	at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:105)
datanode_1  | 2020-04-17 18:25:50,658 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.cache.num.max = 2 (custom)
datanode_3  | 2020-04-17 18:23:57,723 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.storage.dir = [/data/metadata/ratis] (custom)
datanode_2  | 2020-04-17 18:25:50,691 [pool-70-thread-1] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD: ConfigurationManager, init=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null, confs=<EMPTY_MAP>
om_1        | --2020-04-17 18:23:17--  http://kdc:8081/keytab/om/om
kdc_1       | Authenticating as principal admin/admin with keytab /tmp/admin.keytab.
s3g_1       | Resolving kdc (kdc)... 172.24.0.4
recon_1     | Resolving kdc (kdc)... 172.24.0.4
scm_1       | --2020-04-17 18:23:17--  http://kdc:8081/keytab/scm/scm
kms_1       | 	at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:61)
datanode_1  | 2020-04-17 18:25:50,658 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: new 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0181CC1CA0BD-SegmentedRaftLogWorker for RaftStorage:Storage Directory /data/metadata/ratis/31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd
datanode_3  | 2020-04-17 18:23:57,727 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.corruption.policy = EXCEPTION (default)
datanode_2  | 2020-04-17 18:25:50,691 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.storage.dir = [/data/metadata/ratis] (custom)
om_1        | Resolving kdc (kdc)... 172.24.0.4
kdc_1       | WARNING: no policy specified for testuser2/scm@EXAMPLE.COM; defaulting to no policy
s3g_1       | Connecting to kdc (kdc)|172.24.0.4|:8081... connected.
recon_1     | Connecting to kdc (kdc)|172.24.0.4|:8081... connected.
scm_1       | Resolving kdc (kdc)... 172.24.0.4
kms_1       | 	at org.eclipse.jetty.server.Server.doStart(Server.java:394)
datanode_1  | 2020-04-17 18:25:50,658 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.byte-limit = 2147483647 (custom)
datanode_3  | 2020-04-17 18:23:57,728 [pool-70-thread-1] INFO storage.RaftStorageDirectory: The storage directory /data/metadata/ratis/9160856b-1871-4dde-aa55-3a862f5e35eb does not exist. Creating ...
datanode_2  | 2020-04-17 18:25:50,692 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.corruption.policy = EXCEPTION (default)
om_1        | Connecting to kdc (kdc)|172.24.0.4|:8081... connected.
kdc_1       | Principal "testuser2/scm@EXAMPLE.COM" created.
s3g_1       | HTTP request sent, awaiting response... 200 OK
recon_1     | HTTP request sent, awaiting response... 200 OK
scm_1       | Connecting to kdc (kdc)|172.24.0.4|:8081... connected.
kms_1       | 	at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)
datanode_1  | 2020-04-17 18:25:50,659 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.element-limit = 1024 (custom)
datanode_3  | 2020-04-17 18:23:57,738 [pool-70-thread-1] INFO storage.RaftStorageDirectory: Lock on /data/metadata/ratis/9160856b-1871-4dde-aa55-3a862f5e35eb/in_use.lock acquired by nodename 6@9dd073498a2e
datanode_2  | 2020-04-17 18:25:50,692 [pool-70-thread-1] INFO storage.RaftStorageDirectory: The storage directory /data/metadata/ratis/31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd does not exist. Creating ...
om_1        | HTTP request sent, awaiting response... 200 OK
kdc_1       | Authenticating as principal admin/admin with keytab /tmp/admin.keytab.
s3g_1       | Length: 142 [application/octet-stream]
recon_1     | Length: 150 [application/octet-stream]
scm_1       | HTTP request sent, awaiting response... 200 OK
kms_1       | 	at org.apache.hadoop.http.HttpServer2.start(HttpServer2.java:1140)
datanode_1  | 2020-04-17 18:25:50,659 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
datanode_3  | 2020-04-17 18:23:57,742 [pool-70-thread-1] INFO storage.RaftStorage: Storage directory /data/metadata/ratis/9160856b-1871-4dde-aa55-3a862f5e35eb has been successfully formatted.
datanode_2  | 2020-04-17 18:25:50,693 [pool-70-thread-1] INFO storage.RaftStorageDirectory: Lock on /data/metadata/ratis/31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd/in_use.lock acquired by nodename 6@d4ddc26437df
om_1        | Length: 138 [application/octet-stream]
kdc_1       | Entry for principal testuser2/scm@EXAMPLE.COM with kvno 2, encryption type aes256-cts-hmac-sha1-96 added to keytab WRFILE:/data/testuser2.scm.keytab.
s3g_1       | Saving to: '/etc/security/keytabs/s3g.keytab'
recon_1     | Saving to: '/etc/security/keytabs/recon.keytab'
scm_1       | Length: 142 [application/octet-stream]
kms_1       | 	... 2 more
datanode_1  | 2020-04-17 18:25:50,659 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.preallocated.size = 16384 (custom)
datanode_3  | 2020-04-17 18:23:57,745 [pool-70-thread-1] INFO ratis.ContainerStateMachine: group-3A862F5E35EB: The snapshot info is null. Setting the last applied indexto:(t:0, i:~)
datanode_2  | 2020-04-17 18:25:50,694 [pool-70-thread-1] INFO storage.RaftStorage: Storage directory /data/metadata/ratis/31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd has been successfully formatted.
om_1        | Saving to: '/etc/security/keytabs/om.keytab'
kdc_1       | Entry for principal testuser2/scm@EXAMPLE.COM with kvno 2, encryption type aes128-cts-hmac-sha1-96 added to keytab WRFILE:/data/testuser2.scm.keytab.
s3g_1       | 
recon_1     | 
scm_1       | Saving to: '/etc/security/keytabs/scm.keytab'
kms_1       | Caused by: javax.servlet.ServletException: Keytab does not exist: /etc/security/keytabs/HTTP.keytab
datanode_1  | 2020-04-17 18:25:50,659 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.write.buffer.size = 1048576 (custom)
datanode_3  | 2020-04-17 18:23:57,757 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.notification.no-leader.timeout = 60s (default)
datanode_2  | 2020-04-17 18:25:50,700 [pool-70-thread-1] INFO ratis.ContainerStateMachine: group-0181CC1CA0BD: The snapshot info is null. Setting the last applied indexto:(t:0, i:~)
om_1        | 
kdc_1       | Apr 17 18:23:17 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: SERVER_NOT_FOUND: admin/admin@EXAMPLE.COM for kadmin/localhost@EXAMPLE.COM, Server not found in Kerberos database
s3g_1       |      0K                                                       100% 27.6M=0s
recon_1     |      0K                                                       100% 24.7M=0s
scm_1       | 
kms_1       | 	at org.apache.hadoop.security.authentication.server.KerberosAuthenticationHandler.init(KerberosAuthenticationHandler.java:145)
datanode_1  | 2020-04-17 18:25:50,659 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.force.sync.num = 128 (default)
datanode_3  | 2020-04-17 18:23:57,761 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.use.memory = false (default)
datanode_2  | 2020-04-17 18:25:50,701 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.notification.no-leader.timeout = 60s (default)
datanode_2  | 2020-04-17 18:25:50,701 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.use.memory = false (default)
kdc_1       | Apr 17 18:23:17 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: ISSUE: authtime 1587147797, etypes {rep=18 tkt=18 ses=18}, admin/admin@EXAMPLE.COM for kadmin/admin@EXAMPLE.COM
s3g_1       | 
recon_1     | 
scm_1       |      0K                                                       100% 25.1M=0s
kms_1       | 	... 26 more
datanode_1  | 2020-04-17 18:25:50,659 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync = true (default)
datanode_2  | 2020-04-17 18:25:50,701 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.purge.gap = 1000000 (custom)
om_1        |      0K                                                       100% 19.1M=0s
datanode_3  | 2020-04-17 18:23:57,770 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.purge.gap = 1000000 (custom)
kdc_1       | Apr 17 18:23:17 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: SERVER_NOT_FOUND: admin/admin@EXAMPLE.COM for kadmin/localhost@EXAMPLE.COM, Server not found in Kerberos database
s3g_1       | 2020-04-17 18:23:15 (27.6 MB/s) - '/etc/security/keytabs/s3g.keytab' saved [142/142]
recon_1     | 2020-04-17 18:23:16 (24.7 MB/s) - '/etc/security/keytabs/recon.keytab' saved [150/150]
scm_1       | 
datanode_1  | 2020-04-17 18:25:50,659 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout = 10s (default)
datanode_1  | 2020-04-17 18:25:50,660 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
datanode_1  | 2020-04-17 18:25:50,660 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.caching.enabled = true (custom)
om_1        | 
kdc_1       | Apr 17 18:23:17 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: ISSUE: authtime 1587147797, etypes {rep=18 tkt=18 ses=18}, admin/admin@EXAMPLE.COM for kadmin/admin@EXAMPLE.COM
s3g_1       | 
recon_1     | 
scm_1       | 2020-04-17 18:23:17 (25.1 MB/s) - '/etc/security/keytabs/scm.keytab' saved [142/142]
datanode_1  | 2020-04-17 18:25:50,660 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0181CC1CA0BD-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
datanode_3  | 2020-04-17 18:23:57,771 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
datanode_2  | 2020-04-17 18:25:50,703 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
om_1        | 2020-04-17 18:23:17 (19.1 MB/s) - '/etc/security/keytabs/om.keytab' saved [138/138]
kdc_1       | Apr 17 18:23:17 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: SERVER_NOT_FOUND: admin/admin@EXAMPLE.COM for kadmin/localhost@EXAMPLE.COM, Server not found in Kerberos daApr 17 18:23:17 kdc kadmind[13](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1, vers=4, flavor=6
s3g_1       | Keytab name: FILE:/etc/security/keytabs/s3g.keytab
recon_1     | Keytab name: FILE:/etc/security/keytabs/recon.keytab
scm_1       | 
datanode_1  | 2020-04-17 18:25:50,661 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.enabled = true (custom)
datanode_3  | 2020-04-17 18:23:57,773 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
datanode_2  | 2020-04-17 18:25:50,703 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
om_1        | 
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](Notice): Request: kadm5_get_policy, default, Policy does not exist, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
s3g_1       | KVNO Timestamp         Principal
recon_1     | KVNO Timestamp         Principal
scm_1       | Keytab name: FILE:/etc/security/keytabs/scm.keytab
datanode_1  | 2020-04-17 18:25:50,661 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
datanode_3  | 2020-04-17 18:23:57,796 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.log_worker.3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_2  | 2020-04-17 18:25:50,703 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.cache.num.max = 2 (custom)
om_1        | Keytab name: FILE:/etc/security/keytabs/om.keytab
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](Notice): Request: kadm5_create_principal, om/om@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
s3g_1       | ---- ----------------- --------------------------------------------------------
recon_1     | ---- ----------------- --------------------------------------------------------
scm_1       | KVNO Timestamp         Principal
datanode_1  | 2020-04-17 18:25:50,661 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.retention.file.num = 5 (custom)
datanode_3  | 2020-04-17 18:23:57,824 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.cache.num.max = 2 (custom)
datanode_2  | 2020-04-17 18:25:50,703 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: new f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-SegmentedRaftLogWorker for RaftStorage:Storage Directory /data/metadata/ratis/31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd
om_1        | KVNO Timestamp         Principal
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](info): closing down fd 18
s3g_1       |    2 04/17/20 18:23:15 s3g/s3g@EXAMPLE.COM
recon_1     |    2 04/17/20 18:23:16 recon/recon@EXAMPLE.COM
scm_1       | ---- ----------------- --------------------------------------------------------
datanode_1  | 2020-04-17 18:25:50,661 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.retrycache.expirytime = 600000ms (custom)
datanode_3  | 2020-04-17 18:23:57,836 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: new 3989634e-60c9-4e5a-8523-9408dc0a802d@group-3A862F5E35EB-SegmentedRaftLogWorker for RaftStorage:Storage Directory /data/metadata/ratis/9160856b-1871-4dde-aa55-3a862f5e35eb
datanode_2  | 2020-04-17 18:25:50,706 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.byte-limit = 2147483647 (custom)
om_1        | ---- ----------------- --------------------------------------------------------
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1, vers=4, flavor=6
s3g_1       |    2 04/17/20 18:23:15 s3g/s3g@EXAMPLE.COM
recon_1     |    2 04/17/20 18:23:16 recon/recon@EXAMPLE.COM
scm_1       |    2 04/17/20 18:23:17 scm/scm@EXAMPLE.COM
datanode_1  | 2020-04-17 18:25:50,661 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.leader_election.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0181CC1CA0BD
datanode_3  | 2020-04-17 18:23:57,836 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.byte-limit = 2147483647 (custom)
datanode_2  | 2020-04-17 18:25:50,706 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.element-limit = 1024 (custom)
om_1        |    2 04/17/20 18:23:17 om/om@EXAMPLE.COM
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](Notice): Request: kadm5_randkey_principal, om/om@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
s3g_1       | Download HTTP/s3g@EXAMPLE.COM keytab file to /etc/security/keytabs/HTTP.keytab
recon_1     | Download HTTP/recon@EXAMPLE.COM keytab file to /etc/security/keytabs/HTTP.keytab
scm_1       |    2 04/17/20 18:23:17 scm/scm@EXAMPLE.COM
datanode_1  | 2020-04-17 18:25:50,662 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.server.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0181CC1CA0BD
datanode_3  | 2020-04-17 18:23:57,837 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.element-limit = 1024 (custom)
datanode_2  | 2020-04-17 18:25:50,706 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
om_1        |    2 04/17/20 18:23:17 om/om@EXAMPLE.COM
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](Notice): Request: kadm5_get_principal, om/om@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
s3g_1       | --2020-04-17 18:23:15--  http://kdc:8081/keytab/s3g/HTTP
recon_1     | --2020-04-17 18:23:16--  http://kdc:8081/keytab/recon/HTTP
scm_1       | Download HTTP/scm@EXAMPLE.COM keytab file to /etc/security/keytabs/HTTP.keytab
datanode_1  | 2020-04-17 18:25:50,662 [pool-70-thread-1] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0181CC1CA0BD: start as a follower, conf=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null
datanode_3  | 2020-04-17 18:23:57,840 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
datanode_2  | 2020-04-17 18:25:50,706 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.preallocated.size = 16384 (custom)
om_1        | Download HTTP/om@EXAMPLE.COM keytab file to /etc/security/keytabs/HTTP.keytab
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](info): closing down fd 18
s3g_1       | Resolving kdc (kdc)... 172.24.0.4
recon_1     | Resolving kdc (kdc)... 172.24.0.4
scm_1       | --2020-04-17 18:23:17--  http://kdc:8081/keytab/scm/HTTP
datanode_1  | 2020-04-17 18:25:50,662 [pool-70-thread-1] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0181CC1CA0BD: changes role from      null to FOLLOWER at term 0 for startAsFollower
datanode_3  | 2020-04-17 18:23:57,845 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.preallocated.size = 16384 (custom)
datanode_2  | 2020-04-17 18:25:50,706 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.write.buffer.size = 1048576 (custom)
om_1        | --2020-04-17 18:23:17--  http://kdc:8081/keytab/om/HTTP
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1, vers=4, flavor=6
s3g_1       | Connecting to kdc (kdc)|172.24.0.4|:8081... connected.
recon_1     | Connecting to kdc (kdc)|172.24.0.4|:8081... connected.
scm_1       | Resolving kdc (kdc)... 172.24.0.4
datanode_1  | 2020-04-17 18:25:50,662 [pool-70-thread-1] INFO impl.RoleInfo: 0086d012-6f96-4817-8e1b-94f6eaa443bc: start FollowerState
datanode_3  | 2020-04-17 18:23:57,845 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.write.buffer.size = 1048576 (custom)
datanode_2  | 2020-04-17 18:25:50,706 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.force.sync.num = 128 (default)
om_1        | Resolving kdc (kdc)... 172.24.0.4
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](Notice): Request: kadm5_get_policy, default, Policy does not exist, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
s3g_1       | HTTP request sent, awaiting response... 200 OK
recon_1     | HTTP request sent, awaiting response... 200 OK
scm_1       | Connecting to kdc (kdc)|172.24.0.4|:8081... connected.
datanode_1  | 2020-04-17 18:25:50,664 [pool-70-thread-1] INFO util.JmxRegister: Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-0181CC1CA0BD,id=0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_3  | 2020-04-17 18:23:57,846 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.force.sync.num = 128 (default)
datanode_2  | 2020-04-17 18:25:50,706 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync = true (default)
om_1        | Connecting to kdc (kdc)|172.24.0.4|:8081... connected.
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](Notice): Request: kadm5_create_principal, scm/scm@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
s3g_1       | Length: 144 [application/octet-stream]
recon_1     | Length: 148 [application/octet-stream]
scm_1       | HTTP request sent, awaiting response... 200 OK
datanode_1  | 2020-04-17 18:25:50,664 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.state_machine.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0181CC1CA0BD
datanode_3  | 2020-04-17 18:23:57,857 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync = true (default)
datanode_2  | 2020-04-17 18:25:50,706 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout = 10s (default)
om_1        | HTTP request sent, awaiting response... 200 OK
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](info): closing down fd 18
s3g_1       | Saving to: '/etc/security/keytabs/HTTP.keytab'
recon_1     | Saving to: '/etc/security/keytabs/HTTP.keytab'
scm_1       | Length: 144 [application/octet-stream]
datanode_1  | 2020-04-17 18:25:50,694 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: remove  FOLLOWER 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3:t1, leader=3989634e-60c9-4e5a-8523-9408dc0a802d, voted=0086d012-6f96-4817-8e1b-94f6eaa443bc, raftlog=0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3-SegmentedRaftLog:OPENED:c0,f0,i2, conf=0: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null RUNNING
datanode_2  | 2020-04-17 18:25:50,706 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
om_1        | Length: 142 [application/octet-stream]
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1, vers=4, flavor=6
s3g_1       | 
recon_1     | 
scm_1       | Saving to: '/etc/security/keytabs/HTTP.keytab'
datanode_1  | 2020-04-17 18:25:50,700 [Command processor thread] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3: shutdown
datanode_3  | 2020-04-17 18:23:57,857 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout = 10s (default)
datanode_2  | 2020-04-17 18:25:50,710 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.caching.enabled = true (custom)
om_1        | Saving to: '/etc/security/keytabs/HTTP.keytab'
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](Notice): Request: kadm5_randkey_principal, scm/scm@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
s3g_1       |      0K                                                       100% 23.7M=0s
recon_1     |      0K                                                       100% 23.1M=0s
scm_1       | 
datanode_1  | 2020-04-17 18:25:50,705 [Command processor thread] INFO util.JmxRegister: Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-2A8041ABD0B3,id=0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_3  | 2020-04-17 18:23:57,858 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
datanode_2  | 2020-04-17 18:25:50,710 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
om_1        | 
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](Notice): Request: kadm5_get_principal, scm/scm@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
s3g_1       | 
recon_1     | 
scm_1       |      0K                                                       100% 8.64M=0s
datanode_1  | 2020-04-17 18:25:50,709 [Command processor thread] INFO impl.RoleInfo: 0086d012-6f96-4817-8e1b-94f6eaa443bc: shutdown FollowerState
datanode_3  | 2020-04-17 18:23:57,913 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.caching.enabled = true (custom)
datanode_2  | 2020-04-17 18:25:50,711 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.enabled = true (custom)
om_1        |      0K                                                       100% 20.2M=0s
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](info): closing down fd 18
s3g_1       | 2020-04-17 18:23:15 (23.7 MB/s) - '/etc/security/keytabs/HTTP.keytab' saved [144/144]
s3g_1       | 
scm_1       | 
datanode_1  | 2020-04-17 18:25:50,710 [Thread-35] INFO impl.FollowerState: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
datanode_3  | 2020-04-17 18:23:58,033 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-3A862F5E35EB-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
datanode_2  | 2020-04-17 18:25:50,711 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
om_1        | 
s3g_1       | Keytab name: FILE:/etc/security/keytabs/HTTP.keytab
recon_1     | 2020-04-17 18:23:16 (23.1 MB/s) - '/etc/security/keytabs/HTTP.keytab' saved [148/148]
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1, vers=4, flavor=6
scm_1       | 2020-04-17 18:23:17 (8.64 MB/s) - '/etc/security/keytabs/HTTP.keytab' saved [144/144]
datanode_1  | 2020-04-17 18:25:50,710 [Command processor thread] INFO impl.StateMachineUpdater: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3-StateMachineUpdater: set stopIndex = 0
datanode_3  | 2020-04-17 18:23:58,073 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.enabled = true (custom)
datanode_2  | 2020-04-17 18:25:50,711 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.retention.file.num = 5 (custom)
om_1        | 2020-04-17 18:23:17 (20.2 MB/s) - '/etc/security/keytabs/HTTP.keytab' saved [142/142]
s3g_1       | KVNO Timestamp         Principal
recon_1     | 
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](Notice): Request: kadm5_get_policy, default, Policy does not exist, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
scm_1       | 
datanode_1  | 2020-04-17 18:25:50,718 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3-StateMachineUpdater] ERROR ratis.ContainerStateMachine: Failed to take snapshot  for group-2A8041ABD0B3 as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
datanode_3  | 2020-04-17 18:23:58,074 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
datanode_2  | 2020-04-17 18:25:50,711 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.retrycache.expirytime = 600000ms (custom)
om_1        | 
s3g_1       | ---- ----------------- --------------------------------------------------------
recon_1     | Keytab name: FILE:/etc/security/keytabs/HTTP.keytab
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](Notice): Request: kadm5_create_principal, HTTP/om@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](info)tabase
datanode_1  | 2020-04-17 18:25:50,718 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3-StateMachineUpdater] ERROR impl.StateMachineUpdater: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3-StateMachineUpdater: Failed to take snapshot
datanode_3  | 2020-04-17 18:23:58,093 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.retention.file.num = 5 (custom)
datanode_2  | 2020-04-17 18:25:50,712 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.leader_election.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD
om_1        | Keytab name: FILE:/etc/security/keytabs/HTTP.keytab
s3g_1       |    2 04/17/20 18:23:15 HTTP/s3g@EXAMPLE.COM
recon_1     | KVNO Timestamp         Principal
kdc_1       | Apr 17 18:23:17 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: ISSUE: authtime 1587147797, etypes {rep=18 tkt=18 ses=18}, admin/admin@EXAMPLE.COM for kadmin/admin@EXAMPLE.COM
scm_1       | Keytab name: FILE:/etc/security/keytabs/HTTP.keytab
datanode_1  | org.apache.ratis.protocol.StateMachineException: Failed to take snapshot  for group-2A8041ABD0B3 as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
datanode_3  | 2020-04-17 18:23:58,096 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.retrycache.expirytime = 600000ms (custom)
datanode_2  | 2020-04-17 18:25:50,712 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.server.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD
om_1        | KVNO Timestamp         Principal
s3g_1       |    2 04/17/20 18:23:15 HTTP/s3g@EXAMPLE.COM
recon_1     | ---- ----------------- --------------------------------------------------------
kdc_1       | Apr 17 18:23:17 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: SERVER_NOT_FOUND: admin/admin@EXAMPLE.COM for kadmin/localhost@EXAMPLE.COM, Server not found in Kerberos database
scm_1       | KVNO Timestamp         Principal
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.takeSnapshot(ContainerStateMachine.java:288)
datanode_3  | 2020-04-17 18:23:58,191 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.leader_election.3989634e-60c9-4e5a-8523-9408dc0a802d@group-3A862F5E35EB
datanode_2  | 2020-04-17 18:25:50,713 [pool-70-thread-1] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD: start as a follower, conf=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null
om_1        | ---- ----------------- --------------------------------------------------------
s3g_1       | Download testuser/s3g@EXAMPLE.COM keytab file to /etc/security/keytabs/testuser.keytab
recon_1     |    2 04/17/20 18:23:16 HTTP/recon@EXAMPLE.COM
kdc_1       | Apr 17 18:23:17 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: ISSUE: authtime 1587147797, etypes {rep=18 tkt=18 ses=18}, admin/admin@EXAMPLE.COM for kadmin/admin@EXAMPLE.COM
scm_1       | ---- ----------------- --------------------------------------------------------
datanode_1  | 	at org.apache.ratis.server.impl.StateMachineUpdater.takeSnapshot(StateMachineUpdater.java:258)
datanode_3  | 2020-04-17 18:23:58,209 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.server.3989634e-60c9-4e5a-8523-9408dc0a802d@group-3A862F5E35EB
datanode_2  | 2020-04-17 18:25:50,713 [pool-70-thread-1] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD: changes role from      null to FOLLOWER at term 0 for startAsFollower
om_1        |    2 04/17/20 18:23:17 HTTP/om@EXAMPLE.COM
s3g_1       | --2020-04-17 18:23:15--  http://kdc:8081/keytab/s3g/testuser
recon_1     |    2 04/17/20 18:23:16 HTTP/recon@EXAMPLE.COM
kdc_1       | Apr 17 18:23:17 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: SERVER_NOT_FOUND: admin/admin@EXAMPLE.COM for kadmin/localhost@EXAMPLE.COM, Server not found in Kerberos database
scm_1       |    2 04/17/20 18:23:17 HTTP/scm@EXAMPLE.COM
datanode_1  | 	at org.apache.ratis.server.impl.StateMachineUpdater.checkAndTakeSnapshot(StateMachineUpdater.java:250)
datanode_3  | 2020-04-17 18:23:58,218 [pool-70-thread-1] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-3A862F5E35EB: start as a follower, conf=-1: [3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null
datanode_2  | 2020-04-17 18:25:50,713 [pool-70-thread-1] INFO impl.RoleInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689: start FollowerState
om_1        |    2 04/17/20 18:23:17 HTTP/om@EXAMPLE.COM
s3g_1       | Resolving kdc (kdc)... 172.24.0.4
recon_1     | No '-XX:...' jvm parameters are used. Adding safer GC settings to the HADOOP_OPTS
kdc_1       | Apr 17 18:23:17 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: ISSUE: authtime 1587147797, etypes {rep=18 tkt=18 ses=18}, admin/admin@EXAMPLE.COM for kadmin/admin@EXAMPLE.COM
scm_1       |    2 04/17/20 18:23:17 HTTP/scm@EXAMPLE.COM
datanode_1  | 	at org.apache.ratis.server.impl.StateMachineUpdater.run(StateMachineUpdater.java:169)
datanode_3  | 2020-04-17 18:23:58,226 [pool-70-thread-1] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-3A862F5E35EB: changes role from      null to FOLLOWER at term 0 for startAsFollower
datanode_2  | 2020-04-17 18:25:50,714 [pool-70-thread-1] INFO util.JmxRegister: Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-0181CC1CA0BD,id=f2e775cd-89a9-41b5-a9e0-4408e0d60689
om_1        | No '-XX:...' jvm parameters are used. Adding safer GC settings to the HADOOP_OPTS
om_1        | OpenJDK 64-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated in version 9.0 and will likely be removed in a future release.
recon_1     | OpenJDK 64-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated in version 9.0 and will likely be removed in a future release.
kdc_1       | Apr 17 18:23:17 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: SERVER_NOT_FOUND: admin/admin@EXAMPLE.COM for kadmin/localhost@EXAMPLE.COM, Server not found in Kerberos database
scm_1       | Download testuser/scm@EXAMPLE.COM keytab file to /etc/security/keytabs/testuser.keytab
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 2020-04-17 18:23:58,233 [pool-70-thread-1] INFO impl.RoleInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d: start FollowerState
om_1        | 2020-04-17 18:23:25,068 [main] INFO om.OzoneManagerStarter: STARTUP_MSG: 
s3g_1       | Connecting to kdc (kdc)|172.24.0.4|:8081... connected.
datanode_2  | 2020-04-17 18:25:50,714 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.state_machine.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD
recon_1     | WARNING: An illegal reflective access operation has occurred
kdc_1       | Apr 17 18:23:17 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: ISSUE: authtime 1587147797, etypes {rep=18 tkt=18 ses=18}, admin/admin@EXAMPLE.COM for kadmin/admin@EXAMPLE.COM
scm_1       | --2020-04-17 18:23:17--  http://kdc:8081/keytab/scm/testuser
datanode_1  | 2020-04-17 18:25:50,718 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3-StateMachineUpdater] ERROR ratis.ContainerStateMachine: Failed to take snapshot  for group-2A8041ABD0B3 as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
datanode_3  | 2020-04-17 18:23:58,248 [pool-70-thread-1] INFO util.JmxRegister: Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-3A862F5E35EB,id=3989634e-60c9-4e5a-8523-9408dc0a802d
om_1        | /************************************************************
s3g_1       | HTTP request sent, awaiting response... 200 OK
datanode_2  | 2020-04-17 18:25:50,771 [Command processor thread] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: remove  FOLLOWER f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-2A8041ABD0B3:t1, leader=3989634e-60c9-4e5a-8523-9408dc0a802d, voted=3989634e-60c9-4e5a-8523-9408dc0a802d, raftlog=f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-2A8041ABD0B3-SegmentedRaftLog:OPENED:c0,f0,i2, conf=0: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null RUNNING
recon_1     | WARNING: Illegal reflective access by com.google.inject.internal.cglib.core.$ReflectUtils$2 (file:/opt/hadoop/share/ozone/lib/guice-4.0.jar) to method java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain)
kdc_1       | Apr 17 18:23:17 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: SERVER_NOT_FOUND: admin/admin@EXAMPLE.COM for kadmin/localhost@EXAMPLE.COM, Server not found in Kerberos database
scm_1       | Resolving kdc (kdc)... 172.24.0.4
datanode_1  | 2020-04-17 18:25:50,718 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3-StateMachineUpdater] ERROR impl.StateMachineUpdater: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3-StateMachineUpdater: Failed to take snapshot
datanode_3  | 2020-04-17 18:23:58,275 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.state_machine.3989634e-60c9-4e5a-8523-9408dc0a802d@group-3A862F5E35EB
om_1        | STARTUP_MSG: Starting OzoneManager
s3g_1       | Length: 152 [application/octet-stream]
datanode_2  | 2020-04-17 18:25:50,772 [Command processor thread] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-2A8041ABD0B3: shutdown
recon_1     | WARNING: Please consider reporting this to the maintainers of com.google.inject.internal.cglib.core.$ReflectUtils$2
kdc_1       | Apr 17 18:23:17 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: ISSUE: authtime 1587147797, etypes {rep=18 tkt=18 ses=18}, admin/admin@EXAMPLE.COM for kadmin/admin@EXAMPLE.COM
scm_1       | Connecting to kdc (kdc)|172.24.0.4|:8081... connected.
datanode_1  | org.apache.ratis.protocol.StateMachineException: Failed to take snapshot  for group-2A8041ABD0B3 as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
datanode_3  | 2020-04-17 18:23:58,314 [Command processor thread] INFO commandhandler.CreatePipelineCommandHandler: Created Pipeline RATIS ONE #id: "9160856b-1871-4dde-aa55-3a862f5e35eb"
om_1        | STARTUP_MSG:   host = om/172.24.0.8
s3g_1       | Saving to: '/etc/security/keytabs/testuser.keytab'
datanode_2  | 2020-04-17 18:25:50,772 [Command processor thread] INFO util.JmxRegister: Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-2A8041ABD0B3,id=f2e775cd-89a9-41b5-a9e0-4408e0d60689
recon_1     | WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
kdc_1       | Apr 17 18:23:17 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: SERVER_NOT_FOUND: admin/admin@EXAMPLE.COM for kadmin/localhost@EXAMPLE.COM, Server not found in: closing down fd 18
scm_1       | HTTP request sent, awaiting response... 200 OK
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.takeSnapshot(ContainerStateMachine.java:288)
datanode_3  | .
om_1        | STARTUP_MSG:   args = [--init]
s3g_1       | 
datanode_2  | 2020-04-17 18:25:50,773 [Command processor thread] INFO impl.RoleInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689: shutdown FollowerState
recon_1     | WARNING: All illegal access operations will be denied in a future release
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1, vers=4, flavor=6
scm_1       | Length: 152 [application/octet-stream]
datanode_1  | 	at org.apache.ratis.server.impl.StateMachineUpdater.takeSnapshot(StateMachineUpdater.java:258)
datanode_3  | 2020-04-17 18:23:58,318 [Command processor thread] INFO impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: addNew group-2A8041ABD0B3:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] returns group-2A8041ABD0B3:java.util.concurrent.CompletableFuture@75ff2dff[Not completed]
om_1        | STARTUP_MSG:   version = 3.2.0
s3g_1       |      0K                                                       100% 20.4M=0s
datanode_2  | 2020-04-17 18:25:50,773 [Thread-30] INFO impl.FollowerState: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-2A8041ABD0B3-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
recon_1     | 2020-04-17 18:23:23,189 [main] INFO recon.ReconRestServletModule: rest([/api/v1/*]).packages(org.apache.hadoop.ozone.recon.api)
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](Notice): Request: kadm5_randkey_principal, HTTP/om@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
scm_1       | Saving to: '/etc/security/keytabs/testuser.keytab'
datanode_1  | 	at org.apache.ratis.server.impl.StateMachineUpdater.checkAndTakeSnapshot(StateMachineUpdater.java:250)
datanode_3  | 2020-04-17 18:23:58,356 [pool-70-thread-1] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d: new RaftServerImpl for group-2A8041ABD0B3:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] with ContainerStateMachine:uninitialized
s3g_1       | 
datanode_2  | 2020-04-17 18:25:50,774 [Command processor thread] INFO impl.StateMachineUpdater: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-2A8041ABD0B3-StateMachineUpdater: set stopIndex = 0
om_1        | STARTUP_MSG:   classpath = /etc/hadoop:/opt/hadoop/share/hadoop/common/*:/opt/hadoop/share/ozone/lib/kerb-simplekdc-1.0.1.jar:/opt/hadoop/share/ozone/lib/jackson-databind-2.10.3.jar:/opt/hadoop/share/ozone/lib/protobuf-java-2.5.0.jar:/opt/hadoop/share/ozone/lib/bcpkix-jdk15on-1.60.jar:/opt/hadoop/share/ozone/lib/commons-validator-1.6.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-client-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/ratis-proto-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/netty-3.10.5.Final.jar:/opt/hadoop/share/ozone/lib/jaxb-impl-2.3.0.1.jar:/opt/hadoop/share/ozone/lib/kerb-core-1.0.1.jar:/opt/hadoop/share/ozone/lib/jsr305-3.0.0.jar:/opt/hadoop/share/ozone/lib/leveldbjni-all-1.8.jar:/opt/hadoop/share/ozone/lib/j2objc-annotations-1.3.jar:/opt/hadoop/share/ozone/lib/jetty-io-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/htrace-core4-4.1.0-incubating.jar:/opt/hadoop/share/ozone/lib/hadoop-annotations-3.2.0.jar:/opt/hadoop/share/ozone/lib/jetty-http-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/kerb-util-1.0.1.jar:/opt/hadoop/share/ozone/lib/jetty-xml-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/jackson-jaxrs-1.9.13.jar:/opt/hadoop/share/ozone/lib/ratis-thirdparty-misc-0.3.0.jar:/opt/hadoop/share/ozone/lib/kerby-xdr-1.0.1.jar:/opt/hadoop/share/ozone/lib/jackson-core-asl-1.9.13.jar:/opt/hadoop/share/ozone/lib/jetty-server-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/commons-net-3.6.jar:/opt/hadoop/share/ozone/lib/log4j-api-2.11.0.jar:/opt/hadoop/share/ozone/lib/hadoop-hdfs-3.2.0.jar:/opt/hadoop/share/ozone/lib/opentracing-api-0.31.0.jar:/opt/hadoop/share/ozone/lib/slf4j-log4j12-1.7.25.jar:/opt/hadoop/share/ozone/lib/hadoop-hdfs-client-3.2.0.jar:/opt/hadoop/share/ozone/lib/kerby-config-1.0.1.jar:/opt/hadoop/share/ozone/lib/hadoop-ozone-client-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/libthrift-0.12.0.jar:/opt/hadoop/share/ozone/lib/jetty-util-ajax-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/metrics-core-3.2.4.jar:/opt/hadoop/share/ozone/lib/guava-28.2-jre.jar:/opt/hadoop/share/ozone/lib/kerby-pkix-1.0.1.jar:/opt/hadoop/share/ozone/lib/xz-1.0.jar:/opt/hadoop/share/ozone/lib/jetty-servlet-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/jsr311-api-1.1.1.jar:/opt/hadoop/share/ozone/lib/commons-beanutils-1.9.4.jar:/opt/hadoop/share/ozone/lib/rocksdbjni-6.6.4.jar:/opt/hadoop/share/ozone/lib/jetty-security-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/javax.servlet-api-3.1.0.jar:/opt/hadoop/share/ozone/lib/kerb-server-1.0.1.jar:/opt/hadoop/share/ozone/lib/avro-1.7.7.jar:/opt/hadoop/share/ozone/lib/kerb-client-1.0.1.jar:/opt/hadoop/share/ozone/lib/jackson-xc-1.9.13.jar:/opt/hadoop/share/ozone/lib/disruptor-3.4.2.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-docs-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/simpleclient_common-0.7.0.jar:/opt/hadoop/share/ozone/lib/dnsjava-2.1.7.jar:/opt/hadoop/share/ozone/lib/jackson-annotations-2.10.3.jar:/opt/hadoop/share/ozone/lib/commons-configuration2-2.1.1.jar:/opt/hadoop/share/ozone/lib/json-smart-2.3.jar:/opt/hadoop/share/ozone/lib/token-provider-1.0.1.jar:/opt/hadoop/share/ozone/lib/log4j-1.2.17.jar:/opt/hadoop/share/ozone/lib/commons-daemon-1.0.13.jar:/opt/hadoop/share/ozone/lib/listenablefuture-9999.0-empty-to-avoid-conflict-with-guava.jar:/opt/hadoop/share/ozone/lib/bcprov-jdk15on-1.60.jar:/opt/hadoop/share/ozone/lib/ratis-grpc-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/jetty-webapp-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/commons-lang3-3.7.jar:/opt/hadoop/share/ozone/lib/commons-compress-1.4.1.jar:/opt/hadoop/share/ozone/lib/jaeger-client-0.34.0.jar:/opt/hadoop/share/ozone/lib/accessors-smart-1.2.jar:/opt/hadoop/share/ozone/lib/re2j-1.1.jar:/opt/hadoop/share/ozone/lib/ratis-client-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/commons-math3-3.1.1.jar:/opt/hadoop/share/ozone/lib/simpleclient_dropwizard-0.7.0.jar:/opt/hadoop/share/ozone/lib/opentracing-noop-0.31.0.jar:/opt/hadoop/share/ozone/lib/simpleclient-0.7.0.jar:/opt/hadoop/share/ozone/lib/httpclient-4.5.2.jar:/opt/hadoop/share/ozone/lib/jaeger-core-0.34.0.jar:/opt/hadoop/share/ozone/lib/asm-5.0.4.jar:/opt/hadoop/share/ozone/lib/kerby-util-1.0.1.jar:/opt/hadoop/share/ozone/lib/failureaccess-1.0.1.jar:/opt/hadoop/share/ozone/lib/jackson-mapper-asl-1.9.13.jar:/opt/hadoop/share/ozone/lib/jsp-api-2.1.jar:/opt/hadoop/share/ozone/lib/jsch-0.1.54.jar:/opt/hadoop/share/ozone/lib/opentracing-tracerresolver-0.1.5.jar:/opt/hadoop/share/ozone/lib/ratis-metrics-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/ratis-common-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/paranamer-2.3.jar:/opt/hadoop/share/ozone/lib/log4j-core-2.11.0.jar:/opt/hadoop/share/ozone/lib/nimbus-jose-jwt-7.9.jar:/opt/hadoop/share/ozone/lib/commons-codec-1.11.jar:/opt/hadoop/share/ozone/lib/commons-pool2-2.6.0.jar:/opt/hadoop/share/ozone/lib/jackson-datatype-jsr310-2.10.3.jar:/opt/hadoop/share/ozone/lib/gson-2.2.4.jar:/opt/hadoop/share/ozone/lib/jcip-annotations-1.0-1.jar:/opt/hadoop/share/ozone/lib/kerb-admin-1.0.1.jar:/opt/hadoop/share/ozone/lib/okio-1.13.0.jar:/opt/hadoop/share/ozone/lib/commons-io-2.5.jar:/opt/hadoop/share/ozone/lib/snakeyaml-1.16.jar:/opt/hadoop/share/ozone/lib/jetty-util-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-hadoop-dependency-client-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/jersey-core-1.19.jar:/opt/hadoop/share/ozone/lib/checker-qual-2.10.0.jar:/opt/hadoop/share/ozone/lib/ratis-server-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-server-framework-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/picocli-3.9.6.jar:/opt/hadoop/share/ozone/lib/jaeger-thrift-0.34.0.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-common-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/commons-cli-1.2.jar:/opt/hadoop/share/ozone/lib/woodstox-core-5.0.3.jar:/opt/hadoop/share/ozone/lib/javax.annotation-api-1.2.jar:/opt/hadoop/share/ozone/lib/snappy-java-1.0.5.jar:/opt/hadoop/share/ozone/lib/hadoop-ozone-common-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/jaeger-tracerresolver-0.34.0.jar:/opt/hadoop/share/ozone/lib/netty-all-4.1.48.Final.jar:/opt/hadoop/share/ozone/lib/kerby-asn1-1.0.1.jar:/opt/hadoop/share/ozone/lib/okhttp-3.9.0.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-config-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/stax2-api-3.1.4.jar:/opt/hadoop/share/ozone/lib/commons-digester-1.8.1.jar:/opt/hadoop/share/ozone/lib/commons-collections-3.2.2.jar:/opt/hadoop/share/ozone/lib/jettison-1.1.jar:/opt/hadoop/share/ozone/lib/jackson-core-2.10.3.jar:/opt/hadoop/share/ozone/lib/commons-text-1.4.jar:/opt/hadoop/share/ozone/lib/jersey-servlet-1.19.jar:/opt/hadoop/share/ozone/lib/jersey-json-1.19.jar:/opt/hadoop/share/ozone/lib/slf4j-api-1.7.25.jar:/opt/hadoop/share/ozone/lib/commons-logging-1.1.3.jar:/opt/hadoop/share/ozone/lib/kerb-identity-1.0.1.jar:/opt/hadoop/share/ozone/lib/opentracing-util-0.31.0.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-hadoop-dependency-server-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/hadoop-common-3.2.0.jar:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar:/opt/hadoop/share/ozone/lib/kerb-common-1.0.1.jar:/opt/hadoop/share/ozone/lib/jersey-server-1.19.jar:/opt/hadoop/share/ozone/lib/kerb-crypto-1.0.1.jar:/opt/hadoop/share/ozone/lib/httpcore-4.4.4.jar:/opt/hadoop/share/ozone/lib/ratis-netty-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/web:/opt/hadoop/share/ozone/lib/hadoop-ozone-ozone-manager-0.6.0-SNAPSHOT.jar
recon_1     | 2020-04-17 18:23:25,104 [main] INFO recon.ReconServer: Initializing Recon server...
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](Notice): Request: kadm5_get_principal, HTTP/om@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
scm_1       | 
datanode_1  | 	at org.apache.ratis.server.impl.StateMachineUpdater.run(StateMachineUpdater.java:172)
datanode_3  | 2020-04-17 18:23:58,360 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.min = 5s (custom)
s3g_1       | 2020-04-17 18:23:15 (20.4 MB/s) - '/etc/security/keytabs/testuser.keytab' saved [152/152]
datanode_2  | 2020-04-17 18:25:50,775 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-2A8041ABD0B3-StateMachineUpdater] ERROR ratis.ContainerStateMachine: Failed to take snapshot  for group-2A8041ABD0B3 as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
om_1        | STARTUP_MSG:   build = https://github.com/apache/hadoop.git -r e97acb3bd8f3befd27418996fa5d4b50bf2e17bf; compiled by 'sunilg' on 2019-01-15T17:34Z
recon_1     | 2020-04-17 18:23:26,526 [main] INFO recon.ReconServer: Ozone security is enabled. Attempting login for Recon service. Principal: recon/recon@EXAMPLE.COM, keytab: /etc/security/keytabs/recon.keytab
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](info): closing down fd 18
scm_1       |      0K                                                       100% 19.6M=0s
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 2020-04-17 18:23:58,363 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.max = 5200ms (custom)
s3g_1       | 
datanode_2  | 2020-04-17 18:25:50,775 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-2A8041ABD0B3-StateMachineUpdater] ERROR impl.StateMachineUpdater: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-2A8041ABD0B3-StateMachineUpdater: Failed to take snapshot
om_1        | STARTUP_MSG:   java = 11.0.6
recon_1     | 2020-04-17 18:23:27,977 [main] INFO security.UserGroupInformation: Login successful for user recon/recon@EXAMPLE.COM using keytab file /etc/security/keytabs/recon.keytab
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1, vers=4, flavor=6
scm_1       | 
datanode_1  | 2020-04-17 18:25:50,719 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3-StateMachineUpdater] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.state_machine.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3
datanode_3  | 2020-04-17 18:23:58,378 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpcslowness.timeout = 300s (custom)
s3g_1       | Keytab name: FILE:/etc/security/keytabs/testuser.keytab
datanode_2  | org.apache.ratis.protocol.StateMachineException: Failed to take snapshot  for group-2A8041ABD0B3 as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
om_1        | ************************************************************/
recon_1     | 2020-04-17 18:23:27,979 [main] INFO recon.ReconServer: Recon login successful.
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](Notice): Request: kadm5_get_policy, default, Policy does not exist, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
scm_1       | 2020-04-17 18:23:17 (19.6 MB/s) - '/etc/security/keytabs/testuser.keytab' saved [152/152]
datanode_1  | 2020-04-17 18:25:50,719 [Command processor thread] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3: closes. applyIndex: 0
datanode_3  | 2020-04-17 18:23:58,381 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.sleep.deviation.threshold = 300 (default)
s3g_1       | KVNO Timestamp         Principal
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.takeSnapshot(ContainerStateMachine.java:288)
om_1        | 2020-04-17 18:23:25,088 [main] INFO om.OzoneManagerStarter: registered UNIX signal handlers for [TERM, HUP, INT]
recon_1     | 2020-04-17 18:23:30,646 [main] INFO recon.ReconServer: Creating Recon Schema.
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](Notice): Request: kadm5_create_principal, HTTP/scm@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
scm_1       | 
datanode_1  | 2020-04-17 18:25:50,721 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3-SegmentedRaftLogWorker] INFO segmented.SegmentedRaftLogWorker: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
datanode_3  | 2020-04-17 18:23:58,381 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.install.snapshot.enabled = false (custom)
s3g_1       | ---- ----------------- --------------------------------------------------------
datanode_2  | 	at org.apache.ratis.server.impl.StateMachineUpdater.takeSnapshot(StateMachineUpdater.java:258)
om_1        | 2020-04-17 18:23:29,666 [main] INFO ha.OMHANodeDetails: ozone.om.internal.service.id is not defined, falling back to ozone.om.service.ids to find serviceID for OzoneManager if it is HA enabled cluster
recon_1     | ERROR StatusLogger No Log4j 2 configuration file found. Using default configuration (logging only errors to the console), or user programmatically provided configurations. Set system property 'log4j2.debug' to show Log4j 2 internal initialization logging. See https://logging.apache.org/log4j/2.x/manual/configuration.html for instructions on how to configure Log4j 2
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](info): closing down fd 18
scm_1       | Keytab name: FILE:/etc/security/keytabs/testuser.keytab
datanode_1  | 2020-04-17 18:25:50,722 [Command processor thread] INFO segmented.SegmentedRaftLogWorker: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3-SegmentedRaftLogWorker close()
datanode_3  | 2020-04-17 18:23:58,382 [pool-70-thread-1] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3: ConfigurationManager, init=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null, confs=<EMPTY_MAP>
s3g_1       |    2 04/17/20 18:23:15 testuser/s3g@EXAMPLE.COM
datanode_2  | 	at org.apache.ratis.server.impl.StateMachineUpdater.checkAndTakeSnapshot(StateMachineUpdater.java:250)
om_1        | 2020-04-17 18:23:29,847 [main] INFO ha.OMHANodeDetails: Configuration either no ozone.om.address set. Falling back to the default OM address om/172.24.0.8:9862
recon_1     | 2020-04-17 18:23:34,244 [main] INFO http.BaseHttpServer: Starting Web-server for recon at: http://0.0.0.0:9888
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1, vers=4, flavor=6
scm_1       | KVNO Timestamp         Principal
datanode_1  | 2020-04-17 18:25:50,722 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.log_worker.0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_3  | 2020-04-17 18:23:58,382 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.storage.dir = [/data/metadata/ratis] (custom)
s3g_1       |    2 04/17/20 18:23:15 testuser/s3g@EXAMPLE.COM
datanode_2  | 	at org.apache.ratis.server.impl.StateMachineUpdater.run(StateMachineUpdater.java:169)
om_1        | 2020-04-17 18:23:29,891 [main] INFO ha.OMHANodeDetails: OM Service ID is not set. Setting it to the default ID: omServiceIdDefault
recon_1     | 2020-04-17 18:23:34,465 [main] INFO util.log: Logging initialized @17841ms to org.eclipse.jetty.util.log.Slf4jLog
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](Notice): Request: kadm5_randkey_principal, HTTP/scm@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
scm_1       | ---- ----------------- --------------------------------------------------------
datanode_1  | 2020-04-17 18:25:50,723 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.leader_election.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3
datanode_3  | 2020-04-17 18:23:58,383 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.corruption.policy = EXCEPTION (default)
s3g_1       | No '-XX:...' jvm parameters are used. Adding safer GC settings to the HADOOP_OPTS
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
om_1        | WARNING: An illegal reflective access operation has occurred
recon_1     | 2020-04-17 18:23:34,905 [main] INFO server.AuthenticationFilter: Unable to initialize FileSignerSecretProvider, falling back to use random secrets.
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](Notice): Request: kadm5_get_principal, HTTP/scm@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
scm_1       |    2 04/17/20 18:23:17 testuser/scm@EXAMPLE.COM
datanode_1  | 2020-04-17 18:25:50,723 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.server.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-2A8041ABD0B3
datanode_3  | 2020-04-17 18:23:58,383 [pool-70-thread-1] INFO storage.RaftStorageDirectory: The storage directory /data/metadata/ratis/c6484984-fa4c-47a5-afdd-2a8041abd0b3 does not exist. Creating ...
s3g_1       | OpenJDK 64-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated in version 9.0 and will likely be removed in a future release.
datanode_2  | 2020-04-17 18:25:50,777 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-2A8041ABD0B3-StateMachineUpdater] ERROR ratis.ContainerStateMachine: Failed to take snapshot  for group-2A8041ABD0B3 as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
om_1        | WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
recon_1     | 2020-04-17 18:23:34,948 [main] WARN http.HttpRequestLog: Jetty request log can only be enabled using Log4j
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](info): closing down fd 18
scm_1       |    2 04/17/20 18:23:17 testuser/scm@EXAMPLE.COM
datanode_1  | 2020-04-17 18:25:50,725 [Command processor thread] INFO commandhandler.ClosePipelineCommandHandler: Close Pipeline #id: "c6484984-fa4c-47a5-afdd-2a8041abd0b3"
datanode_3  | 2020-04-17 18:23:58,391 [pool-70-thread-1] INFO storage.RaftStorageDirectory: Lock on /data/metadata/ratis/c6484984-fa4c-47a5-afdd-2a8041abd0b3/in_use.lock acquired by nodename 6@9dd073498a2e
s3g_1       | WARNING: An illegal reflective access operation has occurred
datanode_2  | 2020-04-17 18:25:50,777 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-2A8041ABD0B3-StateMachineUpdater] ERROR impl.StateMachineUpdater: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-2A8041ABD0B3-StateMachineUpdater: Failed to take snapshot
om_1        | WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
recon_1     | 2020-04-17 18:23:34,955 [main] INFO http.HttpServer2: Added global filter 'safety' (class=org.apache.hadoop.hdds.server.http.HttpServer2$QuotingInputFilter)
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, a Kerberos database
scm_1       | Download testuser2/scm@EXAMPLE.COM keytab file to /etc/security/keytabs/testuser2.keytab
datanode_1  |  command on datanode #0086d012-6f96-4817-8e1b-94f6eaa443bc.
datanode_3  | 2020-04-17 18:23:58,399 [pool-70-thread-1] INFO storage.RaftStorage: Storage directory /data/metadata/ratis/c6484984-fa4c-47a5-afdd-2a8041abd0b3 has been successfully formatted.
s3g_1       | WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
datanode_2  | org.apache.ratis.protocol.StateMachineException: Failed to take snapshot  for group-2A8041ABD0B3 as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
om_1        | WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
recon_1     | 2020-04-17 18:23:34,970 [main] INFO http.HttpServer2: Added filter static_user_filter (class=org.apache.hadoop.hdds.server.http.StaticUserWebFilter$StaticUserFilter) to context recon
kdc_1       | Apr 17 18:23:17 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: ISSUE: authtime 1587147797, etypes {rep=18 tkt=18 ses=18}, admin/admin@EXAMPLE.COM for kadmin/admin@EXAMPLE.COM
scm_1       | --2020-04-17 18:23:17--  http://kdc:8081/keytab/scm/testuser2
datanode_1  | 2020-04-17 18:25:50,728 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: remove group-2A8041ABD0B3:null
datanode_3  | 2020-04-17 18:23:58,408 [pool-70-thread-1] INFO ratis.ContainerStateMachine: group-2A8041ABD0B3: The snapshot info is null. Setting the last applied indexto:(t:0, i:~)
s3g_1       | WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.takeSnapshot(ContainerStateMachine.java:288)
om_1        | WARNING: All illegal access operations will be denied in a future release
recon_1     | 2020-04-17 18:23:34,970 [main] INFO http.HttpServer2: Added filter static_user_filter (class=org.apache.hadoop.hdds.server.http.StaticUserWebFilter$StaticUserFilter) to context logs
kdc_1       | Apr 17 18:23:17 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: SERVER_NOT_FOUND: admin/admin@EXAMPLE.COM for kadmin/localhost@EXAMPLE.COM, Server not found in Kerberos database
scm_1       | Resolving kdc (kdc)... 172.24.0.4
datanode_1  | 2020-04-17 18:25:50,736 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "c6484984-fa4c-47a5-afdd-2a8041abd0b3"
datanode_3  | 2020-04-17 18:23:58,413 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.notification.no-leader.timeout = 60s (default)
s3g_1       | WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
datanode_2  | 	at org.apache.ratis.server.impl.StateMachineUpdater.takeSnapshot(StateMachineUpdater.java:258)
om_1        | 2020-04-17 18:23:31,251 [main] INFO security.UserGroupInformation: Login successful for user om/om@EXAMPLE.COM using keytab file /etc/security/keytabs/om.keytab
recon_1     | 2020-04-17 18:23:34,979 [main] INFO http.HttpServer2: Added filter static_user_filter (class=org.apache.hadoop.hdds.server.http.StaticUserWebFilter$StaticUserFilter) to context static
kdc_1       | Apr 17 18:23:17 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: ISSUE: authtime 1587147797, etypes {rep=18 tkt=18 ses=18}, admin/admin@EXAMPLE.COM for kadmin/admin@EXAMPLE.COM
scm_1       | Connecting to kdc (kdc)|172.24.0.4|:8081... connected.
datanode_1  | 
datanode_3  | 2020-04-17 18:23:58,413 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.use.memory = false (default)
s3g_1       | WARNING: All illegal access operations will be denied in a future release
datanode_2  | 	at org.apache.ratis.server.impl.StateMachineUpdater.checkAndTakeSnapshot(StateMachineUpdater.java:250)
om_1        | 2020-04-17 18:23:31,273 [main] INFO om.OzoneManager: Ozone Manager login successful.
recon_1     | 2020-04-17 18:23:35,344 [main] INFO tasks.ReconTaskControllerImpl: Registered task ContainerKeyMapperTask with controller.
kdc_1       | Apr 17 18:23:17 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: SERVER_NOT_FOUND: admin/admin@EXAMPLE.COM for kadmin/localhost@EXAMPLE.COM, Server not found in Kerberos database
scm_1       | HTTP request sent, awaiting response... 200 OK
datanode_1  | java.io.IOException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-2A8041ABD0B3 not found.
datanode_3  | 2020-04-17 18:23:58,423 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.purge.gap = 1000000 (custom)
s3g_1       | 2020-04-17 18:23:22,651 [main] INFO http.BaseHttpServer: Starting Web-server for s3gateway at: http://0.0.0.0:9878
datanode_2  | 	at org.apache.ratis.server.impl.StateMachineUpdater.run(StateMachineUpdater.java:172)
om_1        | 2020-04-17 18:23:31,283 [main] WARN server.ServerUtils: ozone.om.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
recon_1     | 2020-04-17 18:23:36,854 [main] INFO tasks.ReconTaskControllerImpl: Registered task FileSizeCountTask with controller.
kdc_1       | Apr 17 18:23:17 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: ISSUE: authtime 1587147797, etypes {rep=18 tkt=18 ses=18}, admin/admin@EXAMPLE.COM for kddr=127.0.0.1, vers=4, flavor=6
scm_1       | Length: 154 [application/octet-stream]
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
s3g_1       | 2020-04-17 18:23:22,772 [main] INFO util.log: Logging initialized @6596ms to org.eclipse.jetty.util.log.Slf4jLog
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 2020-04-17 18:23:58,423 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
om_1        | 2020-04-17 18:23:32,969 [main] INFO ipc.Client: Retrying connect to server: scm/172.24.0.6:9863. Already tried 0 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=10, sleepTime=1000 MILLISECONDS)
recon_1     | 2020-04-17 18:23:38,255 [main] WARN recon.ReconUtils: ozone.recon.om.db.dir is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](Notice): Request: kadm5_get_policy, default, Policy does not exist, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
scm_1       | Saving to: '/etc/security/keytabs/testuser2.keytab'
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
s3g_1       | 2020-04-17 18:23:23,559 [main] INFO server.AuthenticationFilter: Unable to initialize FileSignerSecretProvider, falling back to use random secrets.
datanode_2  | 2020-04-17 18:25:50,777 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-2A8041ABD0B3-StateMachineUpdater] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.state_machine.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-2A8041ABD0B3
datanode_3  | 2020-04-17 18:23:58,423 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
om_1        | 2020-04-17 18:23:33,971 [main] INFO ipc.Client: Retrying connect to server: scm/172.24.0.6:9863. Already tried 1 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=10, sleepTime=1000 MILLISECONDS)
recon_1     | 2020-04-17 18:23:38,270 [main] INFO Configuration.deprecation: No unit for recon.om.connection.request.timeout(5000) assuming MILLISECONDS
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](Notice): Request: kadm5_create_principal, testuser/scm@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
scm_1       | 
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
s3g_1       | 2020-04-17 18:23:23,696 [main] INFO http.HttpRequestLog: Http request log for http.requests.s3gateway is not defined
datanode_2  | 2020-04-17 18:25:50,778 [Command processor thread] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-2A8041ABD0B3: closes. applyIndex: 0
datanode_3  | 2020-04-17 18:23:58,424 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.cache.num.max = 2 (custom)
om_1        | 2020-04-17 18:23:34,972 [main] INFO ipc.Client: Retrying connect to server: scm/172.24.0.6:9863. Already tried 2 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=10, sleepTime=1000 MILLISECONDS)
recon_1     | 2020-04-17 18:23:38,599 [main] WARN recon.ReconUtils: ozone.recon.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](info): closing down fd 18
scm_1       |      0K                                                       100% 8.54M=0s
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
s3g_1       | 2020-04-17 18:23:23,743 [main] INFO http.HttpServer2: Added global filter 'safety' (class=org.apache.hadoop.hdds.server.http.HttpServer2$QuotingInputFilter)
datanode_2  | 2020-04-17 18:25:50,779 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-2A8041ABD0B3-SegmentedRaftLogWorker] INFO segmented.SegmentedRaftLogWorker: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-2A8041ABD0B3-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
datanode_3  | 2020-04-17 18:23:58,424 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: new 3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-SegmentedRaftLogWorker for RaftStorage:Storage Directory /data/metadata/ratis/c6484984-fa4c-47a5-afdd-2a8041abd0b3
om_1        | 2020-04-17 18:23:35,973 [main] INFO ipc.Client: Retrying connect to server: scm/172.24.0.6:9863. Already tried 3 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=10, sleepTime=1000 MILLISECONDS)
recon_1     | 2020-04-17 18:23:38,621 [main] INFO net.NodeSchemaLoader: Loading file from java.lang.CompoundEnumeration@629a9f26
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1, vers=4, flavor=6
scm_1       | 
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
s3g_1       | 2020-04-17 18:23:23,791 [main] INFO http.HttpServer2: Added filter static_user_filter (class=org.apache.hadoop.hdds.server.http.StaticUserWebFilter$StaticUserFilter) to context s3gateway
datanode_2  | 2020-04-17 18:25:50,780 [Command processor thread] INFO segmented.SegmentedRaftLogWorker: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-2A8041ABD0B3-SegmentedRaftLogWorker close()
datanode_3  | 2020-04-17 18:23:58,424 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.byte-limit = 2147483647 (custom)
om_1        | 2020-04-17 18:23:36,975 [main] INFO ipc.Client: Retrying connect to server: scm/172.24.0.6:9863. Already tried 4 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=10, sleepTime=1000 MILLISECONDS)
recon_1     | 2020-04-17 18:23:38,622 [main] INFO net.NodeSchemaLoader: Loading network topology layer schema file
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](Notice): Request: kadm5_randkey_principal, testuser/scm@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
scm_1       | 2020-04-17 18:23:17 (8.54 MB/s) - '/etc/security/keytabs/testuser2.keytab' saved [154/154]
datanode_1  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-2A8041ABD0B3 not found.
s3g_1       | 2020-04-17 18:23:23,792 [main] INFO http.HttpServer2: Added filter static_user_filter (class=org.apache.hadoop.hdds.server.http.StaticUserWebFilter$StaticUserFilter) to context static
datanode_2  | 2020-04-17 18:25:50,781 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.log_worker.f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_3  | 2020-04-17 18:23:58,424 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.element-limit = 1024 (custom)
om_1        | 2020-04-17 18:23:37,978 [main] INFO ipc.Client: Retrying connect to server: scm/172.24.0.6:9863. Already tried 5 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=10, sleepTime=1000 MILLISECONDS)
recon_1     | 2020-04-17 18:23:38,779 [main] INFO node.SCMNodeManager: Entering startup safe mode.
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](Notice): Request: kadm5_get_principal, testuser/scm@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
scm_1       | 
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
s3g_1       | 2020-04-17 18:23:23,795 [main] INFO http.HttpServer2: Added filter static_user_filter (class=org.apache.hadoop.hdds.server.http.StaticUserWebFilter$StaticUserFilter) to context logs
datanode_2  | 2020-04-17 18:25:50,781 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.leader_election.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-2A8041ABD0B3
datanode_3  | 2020-04-17 18:23:58,425 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
om_1        | 2020-04-17 18:23:38,989 [main] INFO ipc.Client: Retrying connect to server: scm/172.24.0.6:9863. Already tried 6 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=10, sleepTime=1000 MILLISECONDS)
recon_1     | 2020-04-17 18:23:38,799 [main] WARN recon.ReconUtils: ozone.recon.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](info): closing down fd 18
scm_1       | Keytab name: FILE:/etc/security/keytabs/testuser2.keytab
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
s3g_1       | 2020-04-17 18:23:23,938 [main] INFO s3.Gateway: Starting Ozone S3 gateway
datanode_2  | 2020-04-17 18:25:50,781 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.server.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-2A8041ABD0B3
datanode_3  | 2020-04-17 18:23:58,426 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.preallocated.size = 16384 (custom)
om_1        | 2020-04-17 18:23:39,991 [main] INFO ipc.Client: Retrying connect to server: scm/172.24.0.6:9863. Already tried 7 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=10, sleepTime=1000 MILLISECONDS)
recon_1     | 2020-04-17 18:23:38,850 [main] INFO scm.ReconNodeManager: Loaded 0 nodes from node DB.
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1, vers=4, flavor=6
scm_1       | KVNO Timestamp         Principal
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
s3g_1       | 2020-04-17 18:23:23,968 [main] INFO http.HttpServer2: Jetty bound to port 9878
datanode_2  | 2020-04-17 18:25:50,783 [Command processor thread] INFO commandhandler.ClosePipelineCommandHandler: Close Pipeline #id: "c6484984-fa4c-47a5-afdd-2a8041abd0b3"
datanode_3  | 2020-04-17 18:23:58,426 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.write.buffer.size = 1048576 (custom)
om_1        | 2020-04-17 18:23:40,992 [main] INFO ipc.Client: Retrying connect to server: scm/172.24.0.6:9863. Already tried 8 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=10, sleepTime=1000 MILLISECONDS)
recon_1     | 2020-04-17 18:23:38,894 [main] INFO ipc.CallQueueManager: Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](Notice): Request: kadm5_get_policy, default, Policy does not exist, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
scm_1       | ---- ----------------- --------------------------------------------------------
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
s3g_1       | 2020-04-17 18:23:23,972 [main] INFO server.Server: jetty-9.4.26.v20200117; built: 2020-01-17T12:35:33.676Z; git: 7b38981d25d14afb4a12ff1f2596756144edf695; jvm 11.0.6+10-LTS
datanode_2  |  command on datanode #f2e775cd-89a9-41b5-a9e0-4408e0d60689.
datanode_3  | 2020-04-17 18:23:58,427 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.force.sync.num = 128 (default)
om_1        | 2020-04-17 18:23:41,993 [main] INFO ipc.Client: Retrying connect to server: scm/172.24.0.6:9863. Already tried 9 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=10, sleepTime=1000 MILLISECONDS)
recon_1     | 2020-04-17 18:23:38,983 [Socket Reader #1 for port 9891] INFO ipc.Server: Starting Socket Reader #1 for port 9891
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](Notice): Request: kadm5_create_principal, testuser2/scm@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
scm_1       |    2 04/17/20 18:23:17 testuser2/scm@EXAMPLE.COM
datanode_1  | 	... 4 more
s3g_1       | 2020-04-17 18:23:24,121 [main] INFO server.session: DefaultSessionIdManager workerName=node0
datanode_2  | 2020-04-17 18:25:50,784 [Command processor thread] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: remove group-2A8041ABD0B3:null
datanode_3  | 2020-04-17 18:23:58,430 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync = true (default)
om_1        | 2020-04-17 18:23:41,996 [main] INFO utils.RetriableTask: Execution of task OM#getScmInfo failed, will be retried in 5000 ms
recon_1     | 2020-04-17 18:23:39,143 [main] WARN recon.ReconUtils: ozone.recon.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](info): closing down fd 18
scm_1       |    2 04/17/20 18:23:17 testuser2/scm@EXAMPLE.COM
datanode_1  | 2020-04-17 18:25:50,736 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: remove group-2A8041ABD0B3:null
s3g_1       | 2020-04-17 18:23:24,121 [main] INFO server.session: No SessionScavenger set, using defaults
datanode_2  | 2020-04-17 18:25:50,784 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "c6484984-fa4c-47a5-afdd-2a8041abd0b3"
datanode_3  | 2020-04-17 18:23:58,439 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout = 10s (default)
om_1        | 2020-04-17 18:23:47,462 [main] INFO om.OzoneManager: Initializing secure OzoneManager.
recon_1     | 2020-04-17 18:23:39,176 [main] INFO pipeline.SCMPipelineManager: No pipeline exists in current db
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1, vers=4, flavor=6
scm_1       | No '-XX:...' jvm parameters are used. Adding safer GC settings to the HADOOP_OPTS
datanode_1  | 2020-04-17 18:25:50,736 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "c6484984-fa4c-47a5-afdd-2a8041abd0b3"
s3g_1       | 2020-04-17 18:23:24,123 [main] INFO server.session: node0 Scavenging every 660000ms
datanode_2  | 
datanode_3  | 2020-04-17 18:23:58,439 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
om_1        | 2020-04-17 18:23:49,193 [main] ERROR client.OMCertificateClient: Default certificate serial id is not set. Can't locate the default certificate for this client.
recon_1     | 2020-04-17 18:23:39,188 [main] WARN recon.ReconUtils: ozone.recon.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
scm_1       | OpenJDK 64-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated in version 9.0 and will likely be removed in a future release.
scm_1       | 2020-04-17 18:23:28,484 [main] INFO server.StorageContainerManagerStarter: STARTUP_MSG: 
datanode_1  | 
s3g_1       | 2020-04-17 18:23:24,204 [main] INFO handler.ContextHandler: Started o.e.j.s.ServletContextHandler@30c93896{logs,/logs,file:///var/log/hadoop/,AVAILABLE}
datanode_2  | java.io.IOException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-2A8041ABD0B3 not found.
datanode_3  | 2020-04-17 18:23:58,440 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.caching.enabled = true (custom)
om_1        | 2020-04-17 18:23:49,193 [main] INFO client.OMCertificateClient: Certificate client init case: 0
recon_1     | 2020-04-17 18:23:39,288 [main] INFO scm.ReconScmTask: Registered MissingContainerTask task 
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](Notice): Request: kadm5_randkey_principal, testuser2/scm@EXAMPLE.COM, success, client=admin/admin@EXAMPLadmin/admin@EXAMPLE.COM
scm_1       | /************************************************************
datanode_1  | java.io.IOException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-2A8041ABD0B3 not found.
s3g_1       | 2020-04-17 18:23:24,209 [main] INFO handler.ContextHandler: Started o.e.j.s.ServletContextHandler@2796aeae{static,/static,jar:file:/opt/hadoop/share/ozone/lib/hadoop-ozone-s3gateway-0.6.0-SNAPSHOT.jar!/webapps/static,AVAILABLE}
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_3  | 2020-04-17 18:23:58,441 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
om_1        | 2020-04-17 18:23:49,194 [main] INFO client.OMCertificateClient: Creating keypair for client as keypair and certificate not found.
recon_1     | 2020-04-17 18:23:39,312 [main] INFO scm.ReconScmTask: Registered PipelineSyncTask task 
kdc_1       | Apr 17 18:23:17 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: SERVER_NOT_FOUND: admin/admin@EXAMPLE.COM for kadmin/localhost@EXAMPLE.COM, Server not found in Kerberos database
scm_1       | STARTUP_MSG: Starting StorageContainerManager
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
s3g_1       | ERROR StatusLogger No Log4j 2 configuration file found. Using default configuration (logging only errors to the console), or user programmatically provided configurations. Set system property 'log4j2.debug' to show Log4j 2 internal initialization logging. See https://logging.apache.org/log4j/2.x/manual/configuration.html for instructions on how to configure Log4j 2
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_3  | 2020-04-17 18:23:58,462 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.enabled = true (custom)
om_1        | 2020-04-17 18:23:51,743 [main] INFO om.OzoneManager: Init response: GETCERT
recon_1     | 2020-04-17 18:23:39,315 [main] INFO recon.ReconServer: Recon server initialized successfully!
kdc_1       | Apr 17 18:23:17 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: ISSUE: authtime 1587147797, etypes {rep=18 tkt=18 ses=18}, admin/admin@EXAMPLE.COM for kadmin/admin@EXAMPLE.COM
scm_1       | STARTUP_MSG:   host = scm/172.24.0.6
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
s3g_1       | Apr 17, 2020 6:23:38 PM org.glassfish.jersey.internal.Errors logErrors
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_3  | 2020-04-17 18:23:58,467 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
om_1        | 2020-04-17 18:23:51,787 [main] INFO ozone.OzoneSecurityUtil: Adding ip:172.24.0.8,host:om
recon_1     | 2020-04-17 18:23:39,319 [main] INFO recon.ReconServer: Starting Recon server
kdc_1       | Apr 17 18:23:17 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: SERVER_NOT_FOUND: admin/admin@EXAMPLE.COM for kadmin/localhost@EXAMPLE.COM, Server not found in Kerberos database
scm_1       | STARTUP_MSG:   args = [--init]
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
s3g_1       | WARNING: The following warnings have been detected: WARNING: A HTTP GET method, public javax.ws.rs.core.Response org.apache.hadoop.ozone.s3.endpoint.ObjectEndpoint.get(java.lang.String,java.lang.String,java.lang.String,int,java.lang.String,java.io.InputStream) throws java.io.IOException,org.apache.hadoop.ozone.s3.exception.OS3Exception, should not consume any entity.
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_3  | 2020-04-17 18:23:58,467 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.retention.file.num = 5 (custom)
om_1        | 2020-04-17 18:23:51,787 [main] INFO ozone.OzoneSecurityUtil: ip:127.0.0.1 not returned.
recon_1     | 2020-04-17 18:23:39,425 [main] INFO impl.MetricsConfig: Loaded properties from hadoop-metrics2.properties
kdc_1       | Apr 17 18:23:17 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: ISSUE: authtime 1587147797, etypes {rep=18 tkt=18 ses=18}, admin/admin@EXAMPLE.COM for kadmin/admin@EXAMPLE.COM
scm_1       | STARTUP_MSG:   version = 3.2.0
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 2020-04-17 18:23:58,467 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.retrycache.expirytime = 600000ms (custom)
om_1        | 2020-04-17 18:23:51,790 [main] INFO ha.OMHANodeDetails: ozone.om.internal.service.id is not defined, falling back to ozone.om.service.ids to find serviceID for OzoneManager if it is HA enabled cluster
recon_1     | 2020-04-17 18:23:39,518 [main] INFO impl.MetricsSystemImpl: Scheduled Metric snapshot period at 10 second(s).
kdc_1       | E.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
datanode_1  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-2A8041ABD0B3 not found.
s3g_1       | 
scm_1       | STARTUP_MSG:   classpath = /etc/hadoop:/opt/hadoop/share/hadoop/common/*:/opt/hadoop/share/ozone/lib/kerb-simplekdc-1.0.1.jar:/opt/hadoop/share/ozone/lib/jackson-databind-2.10.3.jar:/opt/hadoop/share/ozone/lib/protobuf-java-2.5.0.jar:/opt/hadoop/share/ozone/lib/bcpkix-jdk15on-1.60.jar:/opt/hadoop/share/ozone/lib/ratis-proto-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/commons-validator-1.6.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-client-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/netty-3.10.5.Final.jar:/opt/hadoop/share/ozone/lib/kerb-core-1.0.1.jar:/opt/hadoop/share/ozone/lib/jsr305-3.0.0.jar:/opt/hadoop/share/ozone/lib/j2objc-annotations-1.3.jar:/opt/hadoop/share/ozone/lib/leveldbjni-all-1.8.jar:/opt/hadoop/share/ozone/lib/jetty-io-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/htrace-core4-4.1.0-incubating.jar:/opt/hadoop/share/ozone/lib/hadoop-annotations-3.2.0.jar:/opt/hadoop/share/ozone/lib/jetty-http-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/kerb-util-1.0.1.jar:/opt/hadoop/share/ozone/lib/jetty-xml-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/jackson-jaxrs-1.9.13.jar:/opt/hadoop/share/ozone/lib/ratis-thirdparty-misc-0.3.0.jar:/opt/hadoop/share/ozone/lib/kerby-xdr-1.0.1.jar:/opt/hadoop/share/ozone/lib/jackson-core-asl-1.9.13.jar:/opt/hadoop/share/ozone/lib/jetty-server-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/commons-net-3.6.jar:/opt/hadoop/share/ozone/lib/log4j-api-2.11.0.jar:/opt/hadoop/share/ozone/lib/hadoop-hdfs-3.2.0.jar:/opt/hadoop/share/ozone/lib/opentracing-api-0.31.0.jar:/opt/hadoop/share/ozone/lib/slf4j-log4j12-1.7.25.jar:/opt/hadoop/share/ozone/lib/hadoop-hdfs-client-3.2.0.jar:/opt/hadoop/share/ozone/lib/kerby-config-1.0.1.jar:/opt/hadoop/share/ozone/lib/libthrift-0.12.0.jar:/opt/hadoop/share/ozone/lib/jetty-util-ajax-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/metrics-core-3.2.4.jar:/opt/hadoop/share/ozone/lib/guava-28.2-jre.jar:/opt/hadoop/share/ozone/lib/kerby-pkix-1.0.1.jar:/opt/hadoop/share/ozone/lib/xz-1.0.jar:/opt/hadoop/share/ozone/lib/jetty-servlet-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/jsr311-api-1.1.1.jar:/opt/hadoop/share/ozone/lib/commons-beanutils-1.9.4.jar:/opt/hadoop/share/ozone/lib/rocksdbjni-6.6.4.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-container-service-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/jetty-security-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/javax.servlet-api-3.1.0.jar:/opt/hadoop/share/ozone/lib/kerb-server-1.0.1.jar:/opt/hadoop/share/ozone/lib/avro-1.7.7.jar:/opt/hadoop/share/ozone/lib/kerb-client-1.0.1.jar:/opt/hadoop/share/ozone/lib/jackson-xc-1.9.13.jar:/opt/hadoop/share/ozone/lib/disruptor-3.4.2.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-docs-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/simpleclient_common-0.7.0.jar:/opt/hadoop/share/ozone/lib/dnsjava-2.1.7.jar:/opt/hadoop/share/ozone/lib/jackson-annotations-2.10.3.jar:/opt/hadoop/share/ozone/lib/commons-configuration2-2.1.1.jar:/opt/hadoop/share/ozone/lib/json-smart-2.3.jar:/opt/hadoop/share/ozone/lib/token-provider-1.0.1.jar:/opt/hadoop/share/ozone/lib/log4j-1.2.17.jar:/opt/hadoop/share/ozone/lib/commons-daemon-1.0.13.jar:/opt/hadoop/share/ozone/lib/listenablefuture-9999.0-empty-to-avoid-conflict-with-guava.jar:/opt/hadoop/share/ozone/lib/bcprov-jdk15on-1.60.jar:/opt/hadoop/share/ozone/lib/ratis-grpc-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/jetty-webapp-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/commons-lang3-3.7.jar:/opt/hadoop/share/ozone/lib/jaeger-client-0.34.0.jar:/opt/hadoop/share/ozone/lib/commons-compress-1.4.1.jar:/opt/hadoop/share/ozone/lib/accessors-smart-1.2.jar:/opt/hadoop/share/ozone/lib/re2j-1.1.jar:/opt/hadoop/share/ozone/lib/ratis-client-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/commons-math3-3.1.1.jar:/opt/hadoop/share/ozone/lib/simpleclient_dropwizard-0.7.0.jar:/opt/hadoop/share/ozone/lib/opentracing-noop-0.31.0.jar:/opt/hadoop/share/ozone/lib/simpleclient-0.7.0.jar:/opt/hadoop/share/ozone/lib/httpclient-4.5.2.jar:/opt/hadoop/share/ozone/lib/jaeger-core-0.34.0.jar:/opt/hadoop/share/ozone/lib/asm-5.0.4.jar:/opt/hadoop/share/ozone/lib/kerby-util-1.0.1.jar:/opt/hadoop/share/ozone/lib/failureaccess-1.0.1.jar:/opt/hadoop/share/ozone/lib/jackson-mapper-asl-1.9.13.jar:/opt/hadoop/share/ozone/lib/jsp-api-2.1.jar:/opt/hadoop/share/ozone/lib/jsch-0.1.54.jar:/opt/hadoop/share/ozone/lib/ratis-metrics-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/opentracing-tracerresolver-0.1.5.jar:/opt/hadoop/share/ozone/lib/ratis-common-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/paranamer-2.3.jar:/opt/hadoop/share/ozone/lib/log4j-core-2.11.0.jar:/opt/hadoop/share/ozone/lib/nimbus-jose-jwt-7.9.jar:/opt/hadoop/share/ozone/lib/commons-codec-1.11.jar:/opt/hadoop/share/ozone/lib/commons-pool2-2.6.0.jar:/opt/hadoop/share/ozone/lib/jackson-datatype-jsr310-2.10.3.jar:/opt/hadoop/share/ozone/lib/gson-2.2.4.jar:/opt/hadoop/share/ozone/lib/jcip-annotations-1.0-1.jar:/opt/hadoop/share/ozone/lib/kerb-admin-1.0.1.jar:/opt/hadoop/share/ozone/lib/commons-io-2.5.jar:/opt/hadoop/share/ozone/lib/okio-1.13.0.jar:/opt/hadoop/share/ozone/lib/snakeyaml-1.16.jar:/opt/hadoop/share/ozone/lib/jetty-util-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-hadoop-dependency-client-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/jersey-core-1.19.jar:/opt/hadoop/share/ozone/lib/checker-qual-2.10.0.jar:/opt/hadoop/share/ozone/lib/ratis-server-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-server-framework-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/picocli-3.9.6.jar:/opt/hadoop/share/ozone/lib/jaeger-thrift-0.34.0.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-common-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/commons-cli-1.2.jar:/opt/hadoop/share/ozone/lib/woodstox-core-5.0.3.jar:/opt/hadoop/share/ozone/lib/javax.annotation-api-1.2.jar:/opt/hadoop/share/ozone/lib/snappy-java-1.0.5.jar:/opt/hadoop/share/ozone/lib/jaeger-tracerresolver-0.34.0.jar:/opt/hadoop/share/ozone/lib/netty-all-4.1.48.Final.jar:/opt/hadoop/share/ozone/lib/kerby-asn1-1.0.1.jar:/opt/hadoop/share/ozone/lib/okhttp-3.9.0.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-config-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/stax2-api-3.1.4.jar:/opt/hadoop/share/ozone/lib/commons-digester-1.8.1.jar:/opt/hadoop/share/ozone/lib/commons-collections-3.2.2.jar:/opt/hadoop/share/ozone/lib/jettison-1.1.jar:/opt/hadoop/share/ozone/lib/commons-text-1.4.jar:/opt/hadoop/share/ozone/lib/jackson-core-2.10.3.jar:/opt/hadoop/share/ozone/lib/jersey-servlet-1.19.jar:/opt/hadoop/share/ozone/lib/jersey-json-1.19.jar:/opt/hadoop/share/ozone/lib/slf4j-api-1.7.25.jar:/opt/hadoop/share/ozone/lib/commons-logging-1.1.3.jar:/opt/hadoop/share/ozone/lib/kerb-identity-1.0.1.jar:/opt/hadoop/share/ozone/lib/opentracing-util-0.31.0.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-hadoop-dependency-server-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/hadoop-common-3.2.0.jar:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar:/opt/hadoop/share/ozone/lib/kerb-common-1.0.1.jar:/opt/hadoop/share/ozone/lib/jersey-server-1.19.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-common-0.6.0-SNAPSHOT-tests.jar:/opt/hadoop/share/ozone/lib/kerb-crypto-1.0.1.jar:/opt/hadoop/share/ozone/lib/httpcore-4.4.4.jar:/opt/hadoop/share/ozone/lib/ratis-netty-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/web:/opt/hadoop/share/ozone/lib/hadoop-hdds-server-scm-0.6.0-SNAPSHOT.jar
datanode_2  | Caused by: org.apache.ratis.protocol.GroupMismatchException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-2A8041ABD0B3 not found.
datanode_3  | 2020-04-17 18:23:58,467 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.leader_election.3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3
om_1        | 2020-04-17 18:23:51,790 [main] INFO ha.OMHANodeDetails: Configuration either no ozone.om.address set. Falling back to the default OM address om/172.24.0.8:9862
recon_1     | 2020-04-17 18:23:39,521 [main] INFO impl.MetricsSystemImpl: Recon metrics system started
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](Notice): Request: kadm5_get_principal, testuser2/scm@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
s3g_1       | 2020-04-17 18:23:38,314 [main] INFO handler.ContextHandler: Started o.e.j.w.WebAppContext@6bcae9{s3gateway,/,file:///tmp/jetty-0_0_0_0-9878-hadoop-ozone-s3gateway-0_6_0-SNAPSHOT_jar-_-any-18288824861167313335.dir/webapp/,AVAILABLE}{jar:file:/opt/hadoop/share/ozone/lib/hadoop-ozone-s3gateway-0.6.0-SNAPSHOT.jar!/webapps/s3gateway}
scm_1       | STARTUP_MSG:   build = https://github.com/apache/hadoop.git -r e97acb3bd8f3befd27418996fa5d4b50bf2e17bf; compiled by 'sunilg' on 2019-01-15T17:34Z
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_3  | 2020-04-17 18:23:58,468 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.server.3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3
om_1        | 2020-04-17 18:23:51,790 [main] INFO ha.OMHANodeDetails: OM Service ID is not set. Setting it to the default ID: omServiceIdDefault
recon_1     | 2020-04-17 18:23:39,760 [main] INFO http.HttpServer2: Jetty bound to port 9888
kdc_1       | Apr 17 18:23:17 kdc kadmind[13](info): closing down fd 18
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
s3g_1       | 2020-04-17 18:23:38,329 [main] INFO server.AbstractConnector: Started ServerConnector@7fb95505{HTTP/1.1,[http/1.1]}{0.0.0.0:9878}
scm_1       | STARTUP_MSG:   java = 11.0.6
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_3  | 2020-04-17 18:23:58,479 [pool-70-thread-1] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3: start as a follower, conf=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null
recon_1     | 2020-04-17 18:23:39,761 [main] INFO server.Server: jetty-9.4.26.v20200117; built: 2020-01-17T12:35:33.676Z; git: 7b38981d25d14afb4a12ff1f2596756144edf695; jvm 11.0.6+10-LTS
om_1        | 2020-04-17 18:23:51,793 [main] INFO om.OzoneManager: Creating csr for OM->dns:om,ip:172.24.0.8,scmId:0d11089f-cce2-479c-9f79-2c80e681025c,clusterId:CID-1fc15a70-a248-4f3e-9ffb-0989e16ea5e6,subject:root@om
kdc_1       | Generiting keytab
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
s3g_1       | 2020-04-17 18:23:38,330 [main] INFO server.Server: Started @22154ms
scm_1       | ************************************************************/
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_3  | 2020-04-17 18:23:58,486 [pool-70-thread-1] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3: changes role from      null to FOLLOWER at term 0 for startAsFollower
recon_1     | 2020-04-17 18:23:39,911 [main] INFO server.session: DefaultSessionIdManager workerName=node0
om_1        | 2020-04-17 18:23:52,000 [main] INFO om.OzoneManager: OzoneManager ports added:[name: "RPC"
kdc_1       | Authenticating as principal admin/admin with keytab /tmp/admin.keytab.
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
scm_1       | 2020-04-17 18:23:28,624 [main] INFO server.StorageContainerManagerStarter: registered UNIX signal handlers for [TERM, HUP, INT]
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
s3g_1       | 2020-04-17 18:23:38,343 [main] INFO http.BaseHttpServer: HTTP server of s3gateway listening at http://0.0.0.0:9878
datanode_3  | 2020-04-17 18:23:58,487 [pool-70-thread-1] INFO impl.RoleInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d: start FollowerState
recon_1     | 2020-04-17 18:23:39,911 [main] INFO server.session: No SessionScavenger set, using defaults
om_1        | value: 9862
kdc_1       | WARNING: no policy specified for dn/d4ddc26437df@EXAMPLE.COM; defaulting to no policy
datanode_1  | 	... 4 more
scm_1       | 2020-04-17 18:23:29,157 [main] WARN server.ServerUtils: ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
datanode_2  | 	... 4 more
datanode_3  | 2020-04-17 18:23:58,490 [pool-70-thread-1] INFO util.JmxRegister: Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-2A8041ABD0B3,id=3989634e-60c9-4e5a-8523-9408dc0a802d
recon_1     | 2020-04-17 18:23:39,963 [main] INFO server.session: node0 Scavenging every 600000ms
om_1        | ]
kdc_1       | Principal "dn/d4ddc26437df@EXAMPLE.COM" created.
datanode_1  | 2020-04-17 18:25:50,737 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: remove group-2A8041ABD0B3:null
scm_1       | 2020-04-17 18:23:29,505 [main] INFO server.StorageContainerManager: SCM initialization succeeded. Current cluster id for sd=/data/metadata/scm;cid=CID-1fc15a70-a248-4f3e-9ffb-0989e16ea5e6
datanode_2  | 2020-04-17 18:25:50,784 [Command processor thread] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: remove group-2A8041ABD0B3:null
datanode_3  | 2020-04-17 18:23:58,497 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.state_machine.3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3
recon_1     | 2020-04-17 18:23:40,001 [main] INFO handler.ContextHandler: Started o.e.j.s.ServletContextHandler@481e91b6{logs,/logs,file:///var/log/hadoop/,AVAILABLE}
om_1        | 2020-04-17 18:23:52,135 [main] INFO om.OzoneManager: Successfully stored SCM signed certificate.
kdc_1       | Authenticating as principal admin/admin with keytab /tmp/admin.keytab.
datanode_1  | 2020-04-17 18:25:50,738 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "c6484984-fa4c-47a5-afdd-2a8041abd0b3"
scm_1       | 2020-04-17 18:23:29,629 [shutdown-hook-0] INFO server.StorageContainerManagerStarter: SHUTDOWN_MSG: 
datanode_2  | 2020-04-17 18:25:50,785 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "c6484984-fa4c-47a5-afdd-2a8041abd0b3"
datanode_3  | 2020-04-17 18:24:00,619 [grpc-default-executor-1] WARN impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: Failed groupAdd* GroupManagementRequest:client-0EFFC276DC4A->3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3, cid=0, seq=0, RW, null, Add:group-2A8041ABD0B3:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858]
recon_1     | 2020-04-17 18:23:40,003 [main] INFO handler.ContextHandler: Started o.e.j.s.ServletContextHandler@383864d5{static,/static,jar:file:/opt/hadoop/share/ozone/lib/hadoop-ozone-recon-0.6.0-SNAPSHOT.jar!/webapps/static,AVAILABLE}
om_1        | OM initialization succeeded.Current cluster id for sd=/data/metadata/om;cid=CID-1fc15a70-a248-4f3e-9ffb-0989e16ea5e6
kdc_1       | Entry for principal dn/d4ddc26437df@EXAMPLE.COM with kvno 2, encryption type aes256-cts-hmac-sha1-96 added to keytab WRFILE:/data/dn.d4ddc26437df.keytab.
datanode_1  | 
scm_1       | /************************************************************
datanode_2  | 
datanode_3  | java.util.concurrent.CompletionException: org.apache.ratis.protocol.AlreadyExistsException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Failed to add group-2A8041ABD0B3:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
recon_1     | 2020-04-17 18:23:41,662 [main] INFO handler.ContextHandler: Started o.e.j.w.WebAppContext@75e4fe3c{recon,/,file:///tmp/jetty-0_0_0_0-9888-hadoop-ozone-recon-0_6_0-SNAPSHOT_jar-_-any-12280660807499163742.dir/webapp/,AVAILABLE}{jar:file:/opt/hadoop/share/ozone/lib/hadoop-ozone-recon-0.6.0-SNAPSHOT.jar!/webapps/recon}
om_1        | 2020-04-17 18:23:52,177 [shutdown-hook-0] INFO om.OzoneManagerStarter: SHUTDOWN_MSG: 
kdc_1       | Entry for principal dn/d4ddc26437df@EXAMPLE.COM with kvno 2, encryption type aes128-cts-hmac-sha1-96 added to keytab WRFILE:/data/dn.d4ddc26437df.keytab.
datanode_1  | java.io.IOException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-2A8041ABD0B3 not found.
scm_1       | SHUTDOWN_MSG: Shutting down StorageContainerManager at scm/172.24.0.6
datanode_2  | java.io.IOException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-2A8041ABD0B3 not found.
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
recon_1     | 2020-04-17 18:23:41,678 [main] INFO server.AbstractConnector: Started ServerConnector@a0f53fc{HTTP/1.1,[http/1.1]}{0.0.0.0:9888}
om_1        | /************************************************************
kdc_1       | Generiting keytab
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
scm_1       | ************************************************************/
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
recon_1     | 2020-04-17 18:23:41,687 [main] INFO server.Server: Started @25063ms
om_1        | SHUTDOWN_MSG: Shutting down OzoneManager at om/172.24.0.8
kdc_1       | Authenticating as principal admin/admin with keytab /tmp/admin.keytab.
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
scm_1       | No '-XX:...' jvm parameters are used. Adding safer GC settings to the HADOOP_OPTS
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyNow(CompletableFuture.java:670)
recon_1     | 2020-04-17 18:23:41,691 [main] INFO impl.MetricsSinkAdapter: Sink prometheus started
om_1        | ************************************************************/
kdc_1       | WARNING: no policy specified for HTTP/d4ddc26437df@EXAMPLE.COM; defaulting to no policy
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
scm_1       | OpenJDK 64-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated in version 9.0 and will likely be removed in a future release.
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyStage(CompletableFuture.java:658)
recon_1     | 2020-04-17 18:23:41,691 [main] INFO impl.MetricsSystemImpl: Registered sink prometheus
om_1        | No '-XX:...' jvm parameters are used. Adding safer GC settings to the HADOOP_OPTS
kdc_1       | Principal "HTTP/d4ddc26437df@EXAMPLE.COM" created.
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
scm_1       | 2020-04-17 18:23:39,016 [main] INFO server.StorageContainerManagerStarter: STARTUP_MSG: 
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture.thenApplyAsync(CompletableFuture.java:2104)
recon_1     | 2020-04-17 18:23:41,700 [main] INFO http.BaseHttpServer: HTTP server of recon listening at http://0.0.0.0:9888
om_1        | OpenJDK 64-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated in version 9.0 and will likely be removed in a future release.
kdc_1       | Authenticating as principal admin/admin with keytab /tmp/admin.keytab.
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | /************************************************************
datanode_2  | Caused by: org.apache.ratis.protocol.GroupMismatchException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-2A8041ABD0B3 not found.
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:379)
recon_1     | 2020-04-17 18:23:41,700 [main] INFO impl.OzoneManagerServiceProviderImpl: Starting Ozone Manager Service Provider.
om_1        | 2020-04-17 18:23:54,946 [main] INFO om.OzoneManagerStarter: STARTUP_MSG: 
kdc_1       | Entry for principal HTTP/d4ddc26437df@EXAMPLE.COM with kvno 2, encryption type aes256-cts-hmac-sha1-96 added to keytab WRFILE:/data/HTTP.d4ddc26437df.keytab.
datanode_1  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-2A8041ABD0B3 not found.
scm_1       | STARTUP_MSG: Starting StorageContainerManager
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:363)
recon_1     | 2020-04-17 18:23:41,720 [main] INFO impl.OzoneManagerServiceProviderImpl: Registered OmDeltaRequest task 
om_1        | /************************************************************
kdc_1       | Entry for principal HTTP/d4ddc26437df@EXAMPLE.COM with kvno 2, encryption type aes128-cts-hmac-sha1-96 added to keytab WRFILE:/data/HTTP.d4ddc26437df.keytab.
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
scm_1       | STARTUP_MSG:   host = scm/172.24.0.6
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_3  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.lambda$groupManagement$0(GrpcAdminProtocolService.java:42)
recon_1     | 2020-04-17 18:23:41,752 [main] INFO impl.OzoneManagerServiceProviderImpl: Registered OmSnapshotRequest task 
om_1        | STARTUP_MSG: Starting OzoneManager
kdc_1       | Apr 17 18:23:18 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: SERVER_NOT_FOUND: admin/admin@EXAMPLE.COM for kadmin/localhost@EXAMPLE.COM, Server not found in Kerberos database
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
scm_1       | STARTUP_MSG:   args = []
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_3  | 	at org.apache.ratis.grpc.GrpcUtil.asyncCall(GrpcUtil.java:160)
recon_1     | 2020-04-17 18:23:41,752 [main] INFO recovery.ReconOmMetadataManagerImpl: Starting ReconOMMetadataManagerImpl
om_1        | STARTUP_MSG:   host = om/172.24.0.8
kdc_1       | Apr 17 18:23:18 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: ISSUE: authtime 1587147798, etypes {rep=18 tkt=18 ses=18}, admin/admin@EXAMPLE.COM for kadmin/admin@EXAMPLE.COM
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
scm_1       | STARTUP_MSG:   version = 3.2.0
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_2  | 	... 4 more
recon_1     | 2020-04-17 18:23:41,752 [main] WARN recon.ReconUtils: ozone.recon.om.db.dir is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
om_1        | STARTUP_MSG:   args = []
kdc_1       | Apr 17 18:23:18 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: SERVER_NOT_FOUND: admin/admin@EXAMPLE.COM for kadmin/localhost@EXAMPLE.COM, Server not found in Kerberos database
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_2  | 2020-04-17 18:25:50,785 [Command processor thread] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: remove group-2A8041ABD0B3:null
datanode_3  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.groupManagement(GrpcAdminProtocolService.java:42)
scm_1       | STARTUP_MSG:   classpath = /etc/hadoop:/opt/hadoop/share/hadoop/common/*:/opt/hadoop/share/ozone/lib/kerb-simplekdc-1.0.1.jar:/opt/hadoop/share/ozone/lib/jackson-databind-2.10.3.jar:/opt/hadoop/share/ozone/lib/protobuf-java-2.5.0.jar:/opt/hadoop/share/ozone/lib/bcpkix-jdk15on-1.60.jar:/opt/hadoop/share/ozone/lib/ratis-proto-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/commons-validator-1.6.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-client-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/netty-3.10.5.Final.jar:/opt/hadoop/share/ozone/lib/kerb-core-1.0.1.jar:/opt/hadoop/share/ozone/lib/jsr305-3.0.0.jar:/opt/hadoop/share/ozone/lib/j2objc-annotations-1.3.jar:/opt/hadoop/share/ozone/lib/leveldbjni-all-1.8.jar:/opt/hadoop/share/ozone/lib/jetty-io-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/htrace-core4-4.1.0-incubating.jar:/opt/hadoop/share/ozone/lib/hadoop-annotations-3.2.0.jar:/opt/hadoop/share/ozone/lib/jetty-http-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/kerb-util-1.0.1.jar:/opt/hadoop/share/ozone/lib/jetty-xml-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/jackson-jaxrs-1.9.13.jar:/opt/hadoop/share/ozone/lib/ratis-thirdparty-misc-0.3.0.jar:/opt/hadoop/share/ozone/lib/kerby-xdr-1.0.1.jar:/opt/hadoop/share/ozone/lib/jackson-core-asl-1.9.13.jar:/opt/hadoop/share/ozone/lib/jetty-server-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/commons-net-3.6.jar:/opt/hadoop/share/ozone/lib/log4j-api-2.11.0.jar:/opt/hadoop/share/ozone/lib/hadoop-hdfs-3.2.0.jar:/opt/hadoop/share/ozone/lib/opentracing-api-0.31.0.jar:/opt/hadoop/share/ozone/lib/slf4j-log4j12-1.7.25.jar:/opt/hadoop/share/ozone/lib/hadoop-hdfs-client-3.2.0.jar:/opt/hadoop/share/ozone/lib/kerby-config-1.0.1.jar:/opt/hadoop/share/ozone/lib/libthrift-0.12.0.jar:/opt/hadoop/share/ozone/lib/jetty-util-ajax-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/metrics-core-3.2.4.jar:/opt/hadoop/share/ozone/lib/guava-28.2-jre.jar:/opt/hadoop/share/ozone/lib/kerby-pkix-1.0.1.jar:/opt/hadoop/share/ozone/lib/xz-1.0.jar:/opt/hadoop/share/ozone/lib/jetty-servlet-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/jsr311-api-1.1.1.jar:/opt/hadoop/share/ozone/lib/commons-beanutils-1.9.4.jar:/opt/hadoop/share/ozone/lib/rocksdbjni-6.6.4.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-container-service-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/jetty-security-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/javax.servlet-api-3.1.0.jar:/opt/hadoop/share/ozone/lib/kerb-server-1.0.1.jar:/opt/hadoop/share/ozone/lib/avro-1.7.7.jar:/opt/hadoop/share/ozone/lib/kerb-client-1.0.1.jar:/opt/hadoop/share/ozone/lib/jackson-xc-1.9.13.jar:/opt/hadoop/share/ozone/lib/disruptor-3.4.2.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-docs-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/simpleclient_common-0.7.0.jar:/opt/hadoop/share/ozone/lib/dnsjava-2.1.7.jar:/opt/hadoop/share/ozone/lib/jackson-annotations-2.10.3.jar:/opt/hadoop/share/ozone/lib/commons-configuration2-2.1.1.jar:/opt/hadoop/share/ozone/lib/json-smart-2.3.jar:/opt/hadoop/share/ozone/lib/token-provider-1.0.1.jar:/opt/hadoop/share/ozone/lib/log4j-1.2.17.jar:/opt/hadoop/share/ozone/lib/commons-daemon-1.0.13.jar:/opt/hadoop/share/ozone/lib/listenablefuture-9999.0-empty-to-avoid-conflict-with-guava.jar:/opt/hadoop/share/ozone/lib/bcprov-jdk15on-1.60.jar:/opt/hadoop/share/ozone/lib/ratis-grpc-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/jetty-webapp-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/commons-lang3-3.7.jar:/opt/hadoop/share/ozone/lib/jaeger-client-0.34.0.jar:/opt/hadoop/share/ozone/lib/commons-compress-1.4.1.jar:/opt/hadoop/share/ozone/lib/accessors-smart-1.2.jar:/opt/hadoop/share/ozone/lib/re2j-1.1.jar:/opt/hadoop/share/ozone/lib/ratis-client-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/commons-math3-3.1.1.jar:/opt/hadoop/share/ozone/lib/simpleclient_dropwizard-0.7.0.jar:/opt/hadoop/share/ozone/lib/opentracing-noop-0.31.0.jar:/opt/hadoop/share/ozone/lib/simpleclient-0.7.0.jar:/opt/hadoop/share/ozone/lib/httpclient-4.5.2.jar:/opt/hadoop/share/ozone/lib/jaeger-core-0.34.0.jar:/opt/hadoop/share/ozone/lib/asm-5.0.4.jar:/opt/hadoop/share/ozone/lib/kerby-util-1.0.1.jar:/opt/hadoop/share/ozone/lib/failureaccess-1.0.1.jar:/opt/hadoop/share/ozone/lib/jackson-mapper-asl-1.9.13.jar:/opt/hadoop/share/ozone/lib/jsp-api-2.1.jar:/opt/hadoop/share/ozone/lib/jsch-0.1.54.jar:/opt/hadoop/share/ozone/lib/ratis-metrics-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/opentracing-tracerresolver-0.1.5.jar:/opt/hadoop/share/ozone/lib/ratis-common-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/paranamer-2.3.jar:/opt/hadoop/share/ozone/lib/log4j-core-2.11.0.jar:/opt/hadoop/share/ozone/lib/nimbus-jose-jwt-7.9.jar:/opt/hadoop/share/ozone/lib/commons-codec-1.11.jar:/opt/hadoop/share/ozone/lib/commons-pool2-2.6.0.jar:/opt/hadoop/share/ozone/lib/jackson-datatype-jsr310-2.10.3.jar:/opt/hadoop/share/ozone/lib/gson-2.2.4.jar:/opt/hadoop/share/ozone/lib/jcip-annotations-1.0-1.jar:/opt/hadoop/share/ozone/lib/kerb-admin-1.0.1.jar:/opt/hadoop/share/ozone/lib/commons-io-2.5.jar:/opt/hadoop/share/ozone/lib/okio-1.13.0.jar:/opt/hadoop/share/ozone/lib/snakeyaml-1.16.jar:/opt/hadoop/share/ozone/lib/jetty-util-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-hadoop-dependency-client-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/jersey-core-1.19.jar:/opt/hadoop/share/ozone/lib/checker-qual-2.10.0.jar:/opt/hadoop/share/ozone/lib/ratis-server-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-server-framework-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/picocli-3.9.6.jar:/opt/hadoop/share/ozone/lib/jaeger-thrift-0.34.0.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-common-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/commons-cli-1.2.jar:/opt/hadoop/share/ozone/lib/woodstox-core-5.0.3.jar:/opt/hadoop/share/ozone/lib/javax.annotation-api-1.2.jar:/opt/hadoop/share/ozone/lib/snappy-java-1.0.5.jar:/opt/hadoop/share/ozone/lib/jaeger-tracerresolver-0.34.0.jar:/opt/hadoop/share/ozone/lib/netty-all-4.1.48.Final.jar:/opt/hadoop/share/ozone/lib/kerby-asn1-1.0.1.jar:/opt/hadoop/share/ozone/lib/okhttp-3.9.0.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-config-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/stax2-api-3.1.4.jar:/opt/hadoop/share/ozone/lib/commons-digester-1.8.1.jar:/opt/hadoop/share/ozone/lib/commons-collections-3.2.2.jar:/opt/hadoop/share/ozone/lib/jettison-1.1.jar:/opt/hadoop/share/ozone/lib/commons-text-1.4.jar:/opt/hadoop/share/ozone/lib/jackson-core-2.10.3.jar:/opt/hadoop/share/ozone/lib/jersey-servlet-1.19.jar:/opt/hadoop/share/ozone/lib/jersey-json-1.19.jar:/opt/hadoop/share/ozone/lib/slf4j-api-1.7.25.jar:/opt/hadoop/share/ozone/lib/commons-logging-1.1.3.jar:/opt/hadoop/share/ozone/lib/kerb-identity-1.0.1.jar:/opt/hadoop/share/ozone/lib/opentracing-util-0.31.0.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-hadoop-dependency-server-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/hadoop-common-3.2.0.jar:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar:/opt/hadoop/share/ozone/lib/kerb-common-1.0.1.jar:/opt/hadoop/share/ozone/lib/jersey-server-1.19.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-common-0.6.0-SNAPSHOT-tests.jar:/opt/hadoop/share/ozone/lib/kerb-crypto-1.0.1.jar:/opt/hadoop/share/ozone/lib/httpcore-4.4.4.jar:/opt/hadoop/share/ozone/lib/ratis-netty-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/web:/opt/hadoop/share/ozone/lib/hadoop-hdds-server-scm-0.6.0-SNAPSHOT.jar
recon_1     | 2020-04-17 18:23:41,753 [main] INFO tasks.ReconTaskControllerImpl: Starting Recon Task Controller.
om_1        | STARTUP_MSG:   version = 3.2.0
kdc_1       | Apr 17 18:23:18 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: ISSUE: authtime 1587147798, etypes {rep=18 tkt=18 ses=18}, admin/admin@EXAMPLE.COM for kadmin/admin@EXAMPLE.COM
datanode_1  | 	... 4 more
datanode_2  | 2020-04-17 18:25:50,785 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "c6484984-fa4c-47a5-afdd-2a8041abd0b3"
datanode_3  | 	at org.apache.ratis.proto.grpc.AdminProtocolServiceGrpc$MethodHandlers.invoke(AdminProtocolServiceGrpc.java:358)
scm_1       | STARTUP_MSG:   build = https://github.com/apache/hadoop.git -r e97acb3bd8f3befd27418996fa5d4b50bf2e17bf; compiled by 'sunilg' on 2019-01-15T17:34Z
recon_1     | 2020-04-17 18:23:41,754 [main] INFO scm.ReconStorageContainerManagerFacade: Recon ScmDatanodeProtocol RPC server is listening at /0.0.0.0:9891
kdc_1       | Apr 17 18:23:18 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: SERVER_NOT_FOUND: admin/admin@EXAMPLE.COM for kadmin/localhost@EXAMPLE.COM, Server not found in Kerberos database
datanode_1  | 2020-04-17 18:25:50,738 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: remove group-2A8041ABD0B3:null
om_1        | STARTUP_MSG:   classpath = /etc/hadoop:/opt/hadoop/share/hadoop/common/*:/opt/hadoop/share/ozone/lib/kerb-simplekdc-1.0.1.jar:/opt/hadoop/share/ozone/lib/jackson-databind-2.10.3.jar:/opt/hadoop/share/ozone/lib/protobuf-java-2.5.0.jar:/opt/hadoop/share/ozone/lib/bcpkix-jdk15on-1.60.jar:/opt/hadoop/share/ozone/lib/commons-validator-1.6.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-client-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/ratis-proto-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/netty-3.10.5.Final.jar:/opt/hadoop/share/ozone/lib/jaxb-impl-2.3.0.1.jar:/opt/hadoop/share/ozone/lib/kerb-core-1.0.1.jar:/opt/hadoop/share/ozone/lib/jsr305-3.0.0.jar:/opt/hadoop/share/ozone/lib/leveldbjni-all-1.8.jar:/opt/hadoop/share/ozone/lib/j2objc-annotations-1.3.jar:/opt/hadoop/share/ozone/lib/jetty-io-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/htrace-core4-4.1.0-incubating.jar:/opt/hadoop/share/ozone/lib/hadoop-annotations-3.2.0.jar:/opt/hadoop/share/ozone/lib/jetty-http-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/kerb-util-1.0.1.jar:/opt/hadoop/share/ozone/lib/jetty-xml-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/jackson-jaxrs-1.9.13.jar:/opt/hadoop/share/ozone/lib/ratis-thirdparty-misc-0.3.0.jar:/opt/hadoop/share/ozone/lib/kerby-xdr-1.0.1.jar:/opt/hadoop/share/ozone/lib/jackson-core-asl-1.9.13.jar:/opt/hadoop/share/ozone/lib/jetty-server-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/commons-net-3.6.jar:/opt/hadoop/share/ozone/lib/log4j-api-2.11.0.jar:/opt/hadoop/share/ozone/lib/hadoop-hdfs-3.2.0.jar:/opt/hadoop/share/ozone/lib/opentracing-api-0.31.0.jar:/opt/hadoop/share/ozone/lib/slf4j-log4j12-1.7.25.jar:/opt/hadoop/share/ozone/lib/hadoop-hdfs-client-3.2.0.jar:/opt/hadoop/share/ozone/lib/kerby-config-1.0.1.jar:/opt/hadoop/share/ozone/lib/hadoop-ozone-client-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/libthrift-0.12.0.jar:/opt/hadoop/share/ozone/lib/jetty-util-ajax-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/metrics-core-3.2.4.jar:/opt/hadoop/share/ozone/lib/guava-28.2-jre.jar:/opt/hadoop/share/ozone/lib/kerby-pkix-1.0.1.jar:/opt/hadoop/share/ozone/lib/xz-1.0.jar:/opt/hadoop/share/ozone/lib/jetty-servlet-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/jsr311-api-1.1.1.jar:/opt/hadoop/share/ozone/lib/commons-beanutils-1.9.4.jar:/opt/hadoop/share/ozone/lib/rocksdbjni-6.6.4.jar:/opt/hadoop/share/ozone/lib/jetty-security-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/javax.servlet-api-3.1.0.jar:/opt/hadoop/share/ozone/lib/kerb-server-1.0.1.jar:/opt/hadoop/share/ozone/lib/avro-1.7.7.jar:/opt/hadoop/share/ozone/lib/kerb-client-1.0.1.jar:/opt/hadoop/share/ozone/lib/jackson-xc-1.9.13.jar:/opt/hadoop/share/ozone/lib/disruptor-3.4.2.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-docs-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/simpleclient_common-0.7.0.jar:/opt/hadoop/share/ozone/lib/dnsjava-2.1.7.jar:/opt/hadoop/share/ozone/lib/jackson-annotations-2.10.3.jar:/opt/hadoop/share/ozone/lib/commons-configuration2-2.1.1.jar:/opt/hadoop/share/ozone/lib/json-smart-2.3.jar:/opt/hadoop/share/ozone/lib/token-provider-1.0.1.jar:/opt/hadoop/share/ozone/lib/log4j-1.2.17.jar:/opt/hadoop/share/ozone/lib/commons-daemon-1.0.13.jar:/opt/hadoop/share/ozone/lib/listenablefuture-9999.0-empty-to-avoid-conflict-with-guava.jar:/opt/hadoop/share/ozone/lib/bcprov-jdk15on-1.60.jar:/opt/hadoop/share/ozone/lib/ratis-grpc-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/jetty-webapp-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/commons-lang3-3.7.jar:/opt/hadoop/share/ozone/lib/commons-compress-1.4.1.jar:/opt/hadoop/share/ozone/lib/jaeger-client-0.34.0.jar:/opt/hadoop/share/ozone/lib/accessors-smart-1.2.jar:/opt/hadoop/share/ozone/lib/re2j-1.1.jar:/opt/hadoop/share/ozone/lib/ratis-client-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/commons-math3-3.1.1.jar:/opt/hadoop/share/ozone/lib/simpleclient_dropwizard-0.7.0.jar:/opt/hadoop/share/ozone/lib/opentracing-noop-0.31.0.jar:/opt/hadoop/share/ozone/lib/simpleclient-0.7.0.jar:/opt/hadoop/share/ozone/lib/httpclient-4.5.2.jar:/opt/hadoop/share/ozone/lib/jaeger-core-0.34.0.jar:/opt/hadoop/share/ozone/lib/asm-5.0.4.jar:/opt/hadoop/share/ozone/lib/kerby-util-1.0.1.jar:/opt/hadoop/share/ozone/lib/failureaccess-1.0.1.jar:/opt/hadoop/share/ozone/lib/jackson-mapper-asl-1.9.13.jar:/opt/hadoop/share/ozone/lib/jsp-api-2.1.jar:/opt/hadoop/share/ozone/lib/jsch-0.1.54.jar:/opt/hadoop/share/ozone/lib/opentracing-tracerresolver-0.1.5.jar:/opt/hadoop/share/ozone/lib/ratis-metrics-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/ratis-common-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/paranamer-2.3.jar:/opt/hadoop/share/ozone/lib/log4j-core-2.11.0.jar:/opt/hadoop/share/ozone/lib/nimbus-jose-jwt-7.9.jar:/opt/hadoop/share/ozone/lib/commons-codec-1.11.jar:/opt/hadoop/share/ozone/lib/commons-pool2-2.6.0.jar:/opt/hadoop/share/ozone/lib/jackson-datatype-jsr310-2.10.3.jar:/opt/hadoop/share/ozone/lib/gson-2.2.4.jar:/opt/hadoop/share/ozone/lib/jcip-annotations-1.0-1.jar:/opt/hadoop/share/ozone/lib/kerb-admin-1.0.1.jar:/opt/hadoop/share/ozone/lib/okio-1.13.0.jar:/opt/hadoop/share/ozone/lib/commons-io-2.5.jar:/opt/hadoop/share/ozone/lib/snakeyaml-1.16.jar:/opt/hadoop/share/ozone/lib/jetty-util-9.4.26.v20200117.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-hadoop-dependency-client-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/jersey-core-1.19.jar:/opt/hadoop/share/ozone/lib/checker-qual-2.10.0.jar:/opt/hadoop/share/ozone/lib/ratis-server-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-server-framework-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/picocli-3.9.6.jar:/opt/hadoop/share/ozone/lib/jaeger-thrift-0.34.0.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-common-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/commons-cli-1.2.jar:/opt/hadoop/share/ozone/lib/woodstox-core-5.0.3.jar:/opt/hadoop/share/ozone/lib/javax.annotation-api-1.2.jar:/opt/hadoop/share/ozone/lib/snappy-java-1.0.5.jar:/opt/hadoop/share/ozone/lib/hadoop-ozone-common-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/jaeger-tracerresolver-0.34.0.jar:/opt/hadoop/share/ozone/lib/netty-all-4.1.48.Final.jar:/opt/hadoop/share/ozone/lib/kerby-asn1-1.0.1.jar:/opt/hadoop/share/ozone/lib/okhttp-3.9.0.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-config-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/stax2-api-3.1.4.jar:/opt/hadoop/share/ozone/lib/commons-digester-1.8.1.jar:/opt/hadoop/share/ozone/lib/commons-collections-3.2.2.jar:/opt/hadoop/share/ozone/lib/jettison-1.1.jar:/opt/hadoop/share/ozone/lib/jackson-core-2.10.3.jar:/opt/hadoop/share/ozone/lib/commons-text-1.4.jar:/opt/hadoop/share/ozone/lib/jersey-servlet-1.19.jar:/opt/hadoop/share/ozone/lib/jersey-json-1.19.jar:/opt/hadoop/share/ozone/lib/slf4j-api-1.7.25.jar:/opt/hadoop/share/ozone/lib/commons-logging-1.1.3.jar:/opt/hadoop/share/ozone/lib/kerb-identity-1.0.1.jar:/opt/hadoop/share/ozone/lib/opentracing-util-0.31.0.jar:/opt/hadoop/share/ozone/lib/hadoop-hdds-hadoop-dependency-server-0.6.0-SNAPSHOT.jar:/opt/hadoop/share/ozone/lib/hadoop-common-3.2.0.jar:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar:/opt/hadoop/share/ozone/lib/kerb-common-1.0.1.jar:/opt/hadoop/share/ozone/lib/jersey-server-1.19.jar:/opt/hadoop/share/ozone/lib/kerb-crypto-1.0.1.jar:/opt/hadoop/share/ozone/lib/httpcore-4.4.4.jar:/opt/hadoop/share/ozone/lib/ratis-netty-0.6.0-7c5b30d-SNAPSHOT.jar:/opt/hadoop/share/ozone/web:/opt/hadoop/share/ozone/lib/hadoop-ozone-ozone-manager-0.6.0-SNAPSHOT.jar
datanode_2  | 
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:172)
scm_1       | STARTUP_MSG:   java = 11.0.6
recon_1     | 2020-04-17 18:23:42,841 [main] INFO ipc.Client: Retrying connect to server: scm/172.24.0.6:9860. Already tried 0 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=10, sleepTime=1000 MILLISECONDS)
kdc_1       | Apr 17 18:23:18 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: ISSUE: authtime 1587147798, etypes {rep=18 tkt=18 ses=18}, admin/admin@EXAMPLE.COM for kadmin/admin@EXAMPLE.COM
datanode_1  | 2020-04-17 18:25:50,739 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "c6484984-fa4c-47a5-afdd-2a8041abd0b3"
om_1        | STARTUP_MSG:   build = https://github.com/apache/hadoop.git -r e97acb3bd8f3befd27418996fa5d4b50bf2e17bf; compiled by 'sunilg' on 2019-01-15T17:34Z
datanode_2  | java.io.IOException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-2A8041ABD0B3 not found.
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:331)
scm_1       | ************************************************************/
recon_1     | 2020-04-17 18:23:43,841 [main] INFO ipc.Client: Retrying connect to server: scm/172.24.0.6:9860. Already tried 1 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=10, sleepTime=1000 MILLISECONDS)
kdc_1       | Apr 17 18:23:18 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: SERVER_NOT_FOUND: admin/admin@EXAMPLE.COM for kadmin/localhost@EXAMPLE.COM, Server not found in Kerberos database
datanode_1  | 
om_1        | STARTUP_MSG:   java = 11.0.6
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:814)
scm_1       | 2020-04-17 18:23:39,033 [main] INFO server.StorageContainerManagerStarter: registered UNIX signal handlers for [TERM, HUP, INT]
recon_1     | 2020-04-17 18:23:45,455 [main] INFO scm.ReconStorageContainerManagerFacade: Obtained 0 pipelines from SCM.
kdc_1       | Apr 17 18:23:18 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: ISSUE: authtime 1587147798, etypes {rep=18 tkt=18 ses=18}, admin/admin@EXAMPLE.COM for kadmin/admin@EXAMPLE.COM
datanode_1  | java.io.IOException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-2A8041ABD0B3 not found.
om_1        | ************************************************************/
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
scm_1       | 2020-04-17 18:23:39,236 [main] WARN server.ServerUtils: ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
recon_1     | 2020-04-17 18:23:45,456 [main] INFO scm.ReconPipelineManager: Recon has 0 pipelines in house.
kdc_1       | Apr 17 18:23:18 kdc kadmind[13](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1, vers=4, flavor=6
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
om_1        | 2020-04-17 18:23:54,958 [main] INFO om.OzoneManagerStarter: registered UNIX signal handlers for [TERM, HUP, INT]
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:123)
scm_1       | WARNING: An illegal reflective access operation has occurred
recon_1     | 2020-04-17 18:23:45,458 [main] INFO server.SCMDatanodeProtocolServer: RPC server for DataNodes is listening at /0.0.0.0:9891
kdc_1       | Apr 17 18:23:18 kdc kadmind[13](Notice): Request: kadm5_get_policy, default, Policy does not exist, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
om_1        | 2020-04-17 18:23:56,335 [main] INFO ha.OMHANodeDetails: ozone.om.internal.service.id is not defined, falling back to ozone.om.service.ids to find serviceID for OzoneManager if it is HA enabled cluster
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_3  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
scm_1       | WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
recon_1     | 2020-04-17 18:23:45,491 [IPC Server Responder] INFO ipc.Server: IPC Server Responder: starting
kdc_1       | Apr 17 18:23:18 kdc kadmind[13](Notice): Request: kadm5_create_principal, dn/d4ddc26437df@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
om_1        | 2020-04-17 18:23:56,363 [main] INFO ha.OMHANodeDetails: Configuration either no ozone.om.address set. Falling back to the default OM address om/172.24.0.8:9862
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
scm_1       | WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
recon_1     | 2020-04-17 18:23:45,607 [IPC Server listener on 9891] INFO ipc.Server: IPC Server listener on 9891: starting
kdc_1       | Apr 17 18:23:18 kdc kadmind[13](info): closing down fd 18
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
om_1        | 2020-04-17 18:23:56,363 [main] INFO ha.OMHANodeDetails: OM Service ID is not set. Setting it to the default ID: omServiceIdDefault
datanode_2  | Caused by: org.apache.ratis.protocol.GroupMismatchException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-2A8041ABD0B3 not found.
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
recon_1     | 2020-04-17 18:23:45,787 [main] INFO scm.ReconScmTask: Starting MissingContainerTask Thread.
kdc_1       | Apr 17 18:23:18 kdc kadmind[13](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1, vers=4, flavor=6
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
om_1        | 2020-04-17 18:23:56,367 [main] WARN server.ServerUtils: ozone.om.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_3  | Caused by: org.apache.ratis.protocol.AlreadyExistsException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Failed to add group-2A8041ABD0B3:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
scm_1       | WARNING: All illegal access operations will be denied in a future release
recon_1     | 2020-04-17 18:23:45,788 [main] INFO scm.ReconScmTask: Starting PipelineSyncTask Thread.
kdc_1       | Apr 17 18:23:18 kdc kadmind[13](Notice): Request: kadm5_randkey_principal, dn/d4ddc26437df@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
datanode_1  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-2A8041ABD0B3 not found.
om_1        | WARNING: An illegal reflective access operation has occurred
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy$ImplMap.addNew(RaftServerProxy.java:83)
scm_1       | 2020-04-17 18:23:39,869 [main] INFO security.UserGroupInformation: Login successful for user scm/scm@EXAMPLE.COM using keytab file /etc/security/keytabs/scm.keytab
recon_1     | 2020-04-17 18:23:45,863 [PipelineSyncTask] INFO scm.ReconPipelineManager: Recon has 0 pipelines in house.
kdc_1       | Apr 17 18:23:18 kdc kadmind[13](Notice): Request: kadm5_get_principal, dn/d4ddc26437df@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
om_1        | WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:378)
scm_1       | 2020-04-17 18:23:39,869 [main] INFO server.StorageContainerManager: SCM login successful.
recon_1     | 2020-04-17 18:23:45,863 [PipelineSyncTask] INFO scm.PipelineSyncTask: Pipeline sync Thread took 47 milliseconds.
kdc_1       | Apr 17 18:23:18 kdc kadmind[13](info): closing down fd 18
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
om_1        | WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_3  | 	... 13 more
scm_1       | 2020-04-17 18:23:39,870 [main] WARN server.ServerUtils: ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
scm_1       | 2020-04-17 18:23:42,258 [main] INFO ipc.CallQueueManager: Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 200, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
kdc_1       | Apr 17 18:23:18 kdc kadmind[13](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1, vers=4, flavor=6
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
om_1        | WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
datanode_2  | 	... 4 more
scm_1       | 2020-04-17 18:23:42,281 [Socket Reader #1 for port 9961] INFO ipc.Server: Starting Socket Reader #1 for port 9961
recon_1     | 2020-04-17 18:23:46,887 [MissingContainerTask] INFO fsck.MissingContainerTask: Missing Container task Thread took 1098 milliseconds for processing 0 containers.
datanode_3  | 2020-04-17 18:24:00,619 [grpc-default-executor-0] WARN impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: Failed groupAdd* GroupManagementRequest:client-EEB29AE066FA->3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3, cid=0, seq=0, RW, null, Add:group-2A8041ABD0B3:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858]
kdc_1       | Apr 17 18:23:18 kdc kadmind[13](Notice): Request: kadm5_get_policy, default, Policy does not exist, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
om_1        | WARNING: All illegal access operations will be denied in a future release
datanode_2  | 2020-04-17 18:25:50,786 [Command processor thread] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: remove group-2A8041ABD0B3:null
scm_1       | 2020-04-17 18:23:42,351 [main] INFO net.NodeSchemaLoader: Loading file from java.lang.CompoundEnumeration@35c09b94
recon_1     | 2020-04-17 18:23:52,702 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | java.util.concurrent.CompletionException: org.apache.ratis.protocol.AlreadyExistsException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Failed to add group-2A8041ABD0B3:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
kdc_1       | Apr 17 18:23:18 kdc kadmind[13](Notice): Request: kadm5_create_principal, HTTP/d4ddc26437df@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
datanode_1  | 	... 4 more
om_1        | 2020-04-17 18:23:56,511 [main] INFO security.UserGroupInformation: Login successful for user om/om@EXAMPLE.COM using keytab file /etc/security/keytabs/om.keytab
datanode_2  | 2020-04-17 18:25:50,786 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "c6484984-fa4c-47a5-afdd-2a8041abd0b3"
scm_1       | 2020-04-17 18:23:42,352 [main] INFO net.NodeSchemaLoader: Loading network topology layer schema file
recon_1     | 2020-04-17 18:23:52,720 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
kdc_1       | Apr 17 18:23:18 kdc kadmind[13](info): closing down fd 18
datanode_1  | 2020-04-17 18:25:50,739 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: remove group-2A8041ABD0B3:null
om_1        | 2020-04-17 18:23:56,511 [main] INFO om.OzoneManager: Ozone Manager login successful.
datanode_2  | 
scm_1       | 2020-04-17 18:23:42,411 [main] INFO node.SCMNodeManager: Entering startup safe mode.
recon_1     | 2020-04-17 18:23:52,918 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyNow(CompletableFuture.java:670)
kdc_1       | Apr 17 18:23:18 kdc kadmind[13](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1, vers=4, flavor=6
datanode_1  | 2020-04-17 18:25:50,739 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "c6484984-fa4c-47a5-afdd-2a8041abd0b3"
om_1        | 2020-04-17 18:23:56,512 [main] WARN server.ServerUtils: ozone.om.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
datanode_2  | java.io.IOException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-2A8041ABD0B3 not found.
scm_1       | 2020-04-17 18:23:42,492 [main] INFO algorithms.ContainerPlacementPolicyFactory: Create container placement policy of type org.apache.hadoop.hdds.scm.container.placement.algorithms.SCMContainerPlacementRandom
recon_1     | 2020-04-17 18:23:52,941 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
recon_1     | 2020-04-17 18:23:53,043 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
kdc_1       | Apr 17 18:23:18 kdc kadmind[13](Notice): Request: kadm5_randkey_principal, HTTP/d4ddc26437df@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
datanode_1  | 
om_1        | 2020-04-17 18:23:57,385 [main] INFO client.OMCertificateClient: Loading certificate from location:/data/metadata/om/certs.
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
recon_1     | 2020-04-17 18:23:53,084 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyStage(CompletableFuture.java:658)
scm_1       | 2020-04-17 18:23:42,496 [main] WARN server.ServerUtils: ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
kdc_1       | Apr 17 18:23:18 kdc kadmind[13](Notice): Request: kadm5_get_principal, HTTP/d4ddc26437df@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
datanode_1  | java.io.IOException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-2A8041ABD0B3 not found.
om_1        | 2020-04-17 18:23:57,483 [main] INFO client.OMCertificateClient: Added certificate from file:/data/metadata/om/certs/6113740691311.crt.
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
recon_1     | 2020-04-17 18:23:54,571 [IPC Server handler 12 on 9891] INFO net.NetworkTopology: Added a new node: /default-rack/3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture.thenApplyAsync(CompletableFuture.java:2104)
scm_1       | 2020-04-17 18:23:42,522 [main] INFO pipeline.SCMPipelineManager: No pipeline exists in current db
kdc_1       | Apr 17 18:23:18 kdc kadmind[13](info): closing down fd 18
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
om_1        | 2020-04-17 18:23:57,490 [main] INFO client.OMCertificateClient: Added certificate from file:/data/metadata/om/certs/CA-1.crt.
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
recon_1     | 2020-04-17 18:23:54,572 [IPC Server handler 12 on 9891] INFO node.SCMNodeManager: Registered Data node : 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106587165812}
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:379)
scm_1       | 2020-04-17 18:23:42,523 [main] WARN server.ServerUtils: ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
kdc_1       | Generiting keytab
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
om_1        | 2020-04-17 18:23:57,506 [main] WARN server.ServerUtils: ozone.om.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
recon_1     | 2020-04-17 18:23:54,603 [EventQueue-NewNodeForReconNewNodeHandler] INFO scm.ReconNodeManager: Adding new node 3989634e-60c9-4e5a-8523-9408dc0a802d to Node DB.
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:363)
scm_1       | 2020-04-17 18:23:42,561 [main] INFO safemode.HealthyPipelineSafeModeRule: Total pipeline count is 0, healthy pipeline threshold count is 1
kdc_1       | Authenticating as principal admin/admin with keytab /tmp/admin.keytab.
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
om_1        | 2020-04-17 18:23:57,901 [main] INFO Configuration.deprecation: No unit for ozone.manager.delegation.remover.scan.interval(3600000) assuming MILLISECONDS
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
recon_1     | 2020-04-17 18:23:54,816 [IPC Server handler 5 on 9891] INFO net.NetworkTopology: Added a new node: /default-rack/0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_3  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.lambda$groupManagement$0(GrpcAdminProtocolService.java:42)
scm_1       | 2020-04-17 18:23:42,562 [main] INFO safemode.OneReplicaPipelineSafeModeRule: Total pipeline count is 0, pipeline's with at least one datanode reported threshold count is 0
kdc_1       | WARNING: no policy specified for dn/9dd073498a2e@EXAMPLE.COM; defaulting to no policy
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
om_1        | 2020-04-17 18:23:57,907 [main] INFO security.OzoneSecretStore: Loaded 0 tokens
datanode_2  | Caused by: org.apache.ratis.protocol.GroupMismatchException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-2A8041ABD0B3 not found.
recon_1     | 2020-04-17 18:23:54,817 [IPC Server handler 5 on 9891] INFO node.SCMNodeManager: Registered Data node : 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106649330073}
datanode_3  | 	at org.apache.ratis.grpc.GrpcUtil.asyncCall(GrpcUtil.java:160)
scm_1       | 2020-04-17 18:23:42,600 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Failed to create pipeline of type RATIS and factor ONE. Exception: Cannot create pipeline of factor 1 using 0 nodes. Used 0 nodes. Healthy nodes 0
kdc_1       | Principal "dn/9dd073498a2e@EXAMPLE.COM" created.
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
om_1        | 2020-04-17 18:23:57,907 [main] INFO security.OzoneDelegationTokenSecretManager: Loading token state into token manager.
om_1        | 2020-04-17 18:23:57,967 [main] INFO ipc.CallQueueManager: Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
recon_1     | 2020-04-17 18:23:54,818 [EventQueue-NewNodeForReconNewNodeHandler] INFO scm.ReconNodeManager: Adding new node 0086d012-6f96-4817-8e1b-94f6eaa443bc to Node DB.
datanode_3  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.groupManagement(GrpcAdminProtocolService.java:42)
scm_1       | 2020-04-17 18:23:43,073 [main] INFO ipc.CallQueueManager: Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
kdc_1       | Authenticating as principal admin/admin with keytab /tmp/admin.keytab.
om_1        | 2020-04-17 18:23:57,994 [Socket Reader #1 for port 9862] INFO ipc.Server: Starting Socket Reader #1 for port 9862
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_1  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-2A8041ABD0B3 not found.
recon_1     | 2020-04-17 18:23:54,977 [IPC Server handler 1 on 9891] INFO net.NetworkTopology: Added a new node: /default-rack/f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_3  | 	at org.apache.ratis.proto.grpc.AdminProtocolServiceGrpc$MethodHandlers.invoke(AdminProtocolServiceGrpc.java:358)
scm_1       | 2020-04-17 18:23:43,074 [Socket Reader #1 for port 9861] INFO ipc.Server: Starting Socket Reader #1 for port 9861
kdc_1       | Entry for principal dn/9dd073498a2e@EXAMPLE.COM with kvno 2, encryption type aes256-cts-hmac-sha1-96 added to keytab WRFILE:/data/dn.9dd073498a2e.keytab.
om_1        | 2020-04-17 18:23:59,159 [main] INFO impl.MetricsConfig: Loaded properties from hadoop-metrics2.properties
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
recon_1     | 2020-04-17 18:23:54,977 [IPC Server handler 1 on 9891] INFO node.SCMNodeManager: Registered Data node : f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106586728310}
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:172)
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:331)
kdc_1       | Entry for principal dn/9dd073498a2e@EXAMPLE.COM with kvno 2, encryption type aes128-cts-hmac-sha1-96 added to keytab WRFILE:/data/dn.9dd073498a2e.keytab.
kdc_1       | Generiting keytab
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:814)
scm_1       | 2020-04-17 18:23:43,123 [main] INFO ipc.CallQueueManager: Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
recon_1     | 2020-04-17 18:23:54,979 [EventQueue-NewNodeForReconNewNodeHandler] INFO scm.ReconNodeManager: Adding new node f2e775cd-89a9-41b5-a9e0-4408e0d60689 to Node DB.
kdc_1       | Authenticating as principal admin/admin with keytab /tmp/admin.keytab.
om_1        | 2020-04-17 18:23:59,343 [main] INFO impl.MetricsSystemImpl: Scheduled Metric snapshot period at 10 second(s).
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
scm_1       | 2020-04-17 18:23:43,125 [Socket Reader #1 for port 9863] INFO ipc.Server: Starting Socket Reader #1 for port 9863
recon_1     | 2020-04-17 18:23:58,055 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Unknown pipeline PipelineID=9160856b-1871-4dde-aa55-3a862f5e35eb. Trying to get from SCM.
kdc_1       | WARNING: no policy specified for HTTP/9dd073498a2e@EXAMPLE.COM; defaulting to no policy
om_1        | 2020-04-17 18:23:59,343 [main] INFO impl.MetricsSystemImpl: OzoneManager metrics system started
datanode_2  | 	... 4 more
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:123)
scm_1       | 2020-04-17 18:23:43,161 [main] INFO ipc.CallQueueManager: Using callQueue: class java.util.concurrent.LinkedBlockingQueue, queueCapacity: 10000, scheduler: class org.apache.hadoop.ipc.DefaultRpcScheduler, ipcBackoff: false.
recon_1     | 2020-04-17 18:23:58,158 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Adding new pipeline Pipeline[ Id: 9160856b-1871-4dde-aa55-3a862f5e35eb, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:ONE, State:OPEN, leaderId:3989634e-60c9-4e5a-8523-9408dc0a802d, CreationTimestamp2020-04-17T18:23:54.685Z] to Recon pipeline metadata.
kdc_1       | Principal "HTTP/9dd073498a2e@EXAMPLE.COM" created.
om_1        | 2020-04-17 18:23:59,491 [main] INFO om.OzoneManager: OzoneManager RPC server is listening at om/172.24.0.8:9862
om_1        | 2020-04-17 18:23:59,491 [main] INFO om.OzoneManager: Reading keypair and certificate from file system.
datanode_1  | 	... 4 more
datanode_3  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
scm_1       | 2020-04-17 18:23:43,162 [Socket Reader #1 for port 9860] INFO ipc.Server: Starting Socket Reader #1 for port 9860
recon_1     | 2020-04-17 18:23:58,185 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO pipeline.PipelineStateManager: Created pipeline Pipeline[ Id: 9160856b-1871-4dde-aa55-3a862f5e35eb, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:ONE, State:OPEN, leaderId:3989634e-60c9-4e5a-8523-9408dc0a802d, CreationTimestamp2020-04-17T18:23:54.685Z]
om_1        | 2020-04-17 18:23:59,732 [main] INFO om.OzoneManager: Starting OM block token secret manager
datanode_2  | 2020-04-17 18:25:50,787 [Command processor thread] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: remove group-2A8041ABD0B3:null
kdc_1       | Authenticating as principal admin/admin with keytab /tmp/admin.keytab.
datanode_1  | 2020-04-17 18:25:55,851 [grpc-default-executor-0] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0181CC1CA0BD: changes role from  FOLLOWER to FOLLOWER at term 1 for recognizeCandidate:f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_3  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
scm_1       | 2020-04-17 18:23:43,196 [main] INFO http.BaseHttpServer: Starting Web-server for scm at: http://0.0.0.0:9876
recon_1     | 2020-04-17 18:23:58,373 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Unknown pipeline PipelineID=ab3c73f0-0ac8-42e4-ab42-e3a4286dace8. Trying to get from SCM.
om_1        | 2020-04-17 18:23:59,734 [main] INFO security.OzoneBlockTokenSecretManager: Updating the current master key for generating tokens
datanode_2  | 2020-04-17 18:25:50,787 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "c6484984-fa4c-47a5-afdd-2a8041abd0b3"
kdc_1       | Entry for principal HTTP/9dd073498a2e@EXAMPLE.COM with kvno 2, encryption type aes256-cts-hmac-sha1-96 added to keytab WRFILE:/data/HTTP.9dd073498a2e.keytab.
datanode_1  | 2020-04-17 18:25:55,852 [grpc-default-executor-0] INFO impl.RoleInfo: 0086d012-6f96-4817-8e1b-94f6eaa443bc: shutdown FollowerState
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 2020-04-17 18:23:43,225 [main] INFO util.log: Logging initialized @11887ms to org.eclipse.jetty.util.log.Slf4jLog
recon_1     | 2020-04-17 18:23:58,384 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Adding new pipeline Pipeline[ Id: ab3c73f0-0ac8-42e4-ab42-e3a4286dace8, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:ONE, State:OPEN, leaderId:0086d012-6f96-4817-8e1b-94f6eaa443bc, CreationTimestamp2020-04-17T18:23:54.829Z] to Recon pipeline metadata.
om_1        | 2020-04-17 18:23:59,735 [main] INFO om.OzoneManager: Starting OM delegation token secret manager
datanode_2  | 
kdc_1       | Entry for principal HTTP/9dd073498a2e@EXAMPLE.COM with kvno 2, encryption type aes128-cts-hmac-sha1-96 added to keytab WRFILE:/data/HTTP.9dd073498a2e.keytab.
datanode_1  | 2020-04-17 18:25:55,852 [grpc-default-executor-0] INFO impl.RoleInfo: 0086d012-6f96-4817-8e1b-94f6eaa443bc: start FollowerState
datanode_3  | Caused by: org.apache.ratis.protocol.AlreadyExistsException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Failed to add group-2A8041ABD0B3:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
scm_1       | 2020-04-17 18:23:43,380 [main] INFO server.AuthenticationFilter: Unable to initialize FileSignerSecretProvider, falling back to use random secrets.
recon_1     | 2020-04-17 18:23:58,384 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO pipeline.PipelineStateManager: Created pipeline Pipeline[ Id: ab3c73f0-0ac8-42e4-ab42-e3a4286dace8, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:ONE, State:OPEN, leaderId:0086d012-6f96-4817-8e1b-94f6eaa443bc, CreationTimestamp2020-04-17T18:23:54.829Z]
om_1        | 2020-04-17 18:23:59,735 [main] INFO security.OzoneDelegationTokenSecretManager: Updating the current master key for generating tokens
datanode_2  | java.io.IOException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-2A8041ABD0B3 not found.
kdc_1       | Apr 17 18:23:19 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: SERVER_NOT_FOUND: admin/admin@EXAMPLE.COM for kadmin/localhost@EXAMPLE.COM, Server not found in Kerberos database
datanode_1  | 2020-04-17 18:25:55,852 [Thread-93] INFO impl.FollowerState: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0181CC1CA0BD-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy$ImplMap.addNew(RaftServerProxy.java:83)
scm_1       | 2020-04-17 18:23:43,393 [main] INFO http.HttpRequestLog: Http request log for http.requests.scm is not defined
recon_1     | 2020-04-17 18:23:58,409 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Unknown pipeline PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3. Trying to get from SCM.
om_1        | 2020-04-17 18:23:59,747 [Thread[Thread-11,5,main]] INFO security.OzoneDelegationTokenSecretManager: Starting expired delegation token remover thread, tokenRemoverScanInterval=60 min(s)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
kdc_1       | Apr 17 18:23:19 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: ISSUE: authtime 1587147799, etypes {rep=18 tkt=18 ses=18}, admin/admin@EXAMPLE.COM for kadmin/admin@EXAMPLE.COM
datanode_1  | 2020-04-17 18:25:55,974 [grpc-default-executor-0] INFO ratis.XceiverServerRatis: Leader change notification received for group: group-0181CC1CA0BD with new leaderId: f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:378)
scm_1       | 2020-04-17 18:23:43,398 [main] INFO http.HttpServer2: Added global filter 'safety' (class=org.apache.hadoop.hdds.server.http.HttpServer2$QuotingInputFilter)
recon_1     | 2020-04-17 18:23:58,412 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Adding new pipeline Pipeline[ Id: c6484984-fa4c-47a5-afdd-2a8041abd0b3, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:ALLOCATED, leaderId:null, CreationTimestamp2020-04-17T18:23:54.997Z] to Recon pipeline metadata.
om_1        | 2020-04-17 18:23:59,842 [IPC Server listener on 9862] INFO ipc.Server: IPC Server listener on 9862: starting
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
kdc_1       | Apr 17 18:23:19 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: SERVER_NOT_FOUND: admin/admin@EXAMPLE.COM for kadmin/localhost@EXAMPLE.COM, Server not found in Kerberos database
datanode_1  | 2020-04-17 18:25:55,974 [grpc-default-executor-0] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0181CC1CA0BD: change Leader from null to f2e775cd-89a9-41b5-a9e0-4408e0d60689 at term 1 for appendEntries, leader elected after 5324ms
datanode_3  | 	... 13 more
scm_1       | 2020-04-17 18:23:43,400 [main] INFO http.HttpServer2: Added filter static_user_filter (class=org.apache.hadoop.hdds.server.http.StaticUserWebFilter$StaticUserFilter) to context scm
recon_1     | 2020-04-17 18:23:58,412 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO pipeline.PipelineStateManager: Created pipeline Pipeline[ Id: c6484984-fa4c-47a5-afdd-2a8041abd0b3, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:ALLOCATED, leaderId:null, CreationTimestamp2020-04-17T18:23:54.997Z]
om_1        | 2020-04-17 18:23:59,829 [IPC Server Responder] INFO ipc.Server: IPC Server Responder: starting
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
kdc_1       | Apr 17 18:23:19 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: ISSUE: authtime 1587147799, etypes {rep=18 tkt=18 ses=18}, admin/admin@EXAMPLE.COM for kadmin/admin@EXAMPLE.COM
datanode_1  | 2020-04-17 18:25:55,989 [grpc-default-executor-0] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0181CC1CA0BD: set configuration 0: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null at 0
datanode_3  | 2020-04-17 18:24:01,423 [Command processor thread] INFO commandhandler.CreatePipelineCommandHandler: Created Pipeline RATIS THREE #id: "c6484984-fa4c-47a5-afdd-2a8041abd0b3"
scm_1       | 2020-04-17 18:23:43,400 [main] INFO http.HttpServer2: Added filter static_user_filter (class=org.apache.hadoop.hdds.server.http.StaticUserWebFilter$StaticUserFilter) to context static
recon_1     | 2020-04-17 18:23:58,412 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Pipeline THREE PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 reported by 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106587165812}
om_1        | 2020-04-17 18:24:00,169 [main] INFO http.BaseHttpServer: Starting Web-server for ozoneManager at: http://0.0.0.0:9874
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
kdc_1       | Apr 17 18:23:19 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: SERVER_NOT_FOUND: admin/admin@EXAMPLE.COM for kadmin/localhost@EXAMPLE.COM, Server not found in Kerberos database
datanode_1  | 2020-04-17 18:25:55,990 [grpc-default-executor-0] INFO segmented.SegmentedRaftLogWorker: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0181CC1CA0BD-SegmentedRaftLogWorker: Starting segment from index:0
datanode_3  | .
scm_1       | 2020-04-17 18:23:43,400 [main] INFO http.HttpServer2: Added filter static_user_filter (class=org.apache.hadoop.hdds.server.http.StaticUserWebFilter$StaticUserFilter) to context logs
recon_1     | 2020-04-17 18:23:58,796 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Pipeline THREE PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 reported by 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106649330073}
om_1        | 2020-04-17 18:24:00,268 [main] INFO util.log: Logging initialized @7925ms to org.eclipse.jetty.util.log.Slf4jLog
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
kdc_1       | Apr 17 18:23:19 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: ISSUE: authtime 1587147799, etypes {rep=18 tkt=18 ses=18}, admin/admin@EXAMPLE.COM for kadmin/admin@EXAMPLE.COM
datanode_1  | 2020-04-17 18:25:55,998 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0181CC1CA0BD-SegmentedRaftLogWorker] INFO segmented.SegmentedRaftLogWorker: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0181CC1CA0BD-SegmentedRaftLogWorker: created new log segment /data/metadata/ratis/31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd/current/log_inprogress_0
datanode_3  | 2020-04-17 18:24:03,433 [Thread-25] INFO impl.FollowerState: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-3A862F5E35EB-FollowerState: change to CANDIDATE, lastRpcTime:5206ms, electionTimeout:5175ms
scm_1       | 2020-04-17 18:23:43,433 [main] INFO server.StorageContainerManager: StorageContainerLocationProtocol RPC server is listening at /0.0.0.0:9860
recon_1     | 2020-04-17 18:23:59,005 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Unknown pipeline PipelineID=e899e35a-1e99-408d-91af-60084463ba1a. Trying to get from SCM.
om_1        | 2020-04-17 18:24:00,719 [main] INFO server.AuthenticationFilter: Unable to initialize FileSignerSecretProvider, falling back to use random secrets.
datanode_2  | Caused by: org.apache.ratis.protocol.GroupMismatchException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-2A8041ABD0B3 not found.
kdc_1       | Apr 17 18:23:19 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: SERVER_NOT_FOUND: admin/admin@EXAMPLE.COM for kadmin/localhost@EXAMPLE.COM, Server not found in Kerberos database
datanode_1  | 2020-04-17 18:26:17,913 [ChunkWriter-15-0] INFO keyvalue.KeyValueHandler: Operation: CreateContainer , Trace ID: 1ebccd3f95d7d6a9:57399964959fe306:1ebccd3f95d7d6a9:0 , Message: Container creation failed, due to disk out of space , Result: DISK_OUT_OF_SPACE , StorageContainerException Occurred.
datanode_3  | 2020-04-17 18:24:03,435 [Thread-25] INFO impl.RoleInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d: shutdown FollowerState
scm_1       | 2020-04-17 18:23:43,488 [main] INFO impl.MetricsConfig: Loaded properties from hadoop-metrics2.properties
recon_1     | 2020-04-17 18:23:59,008 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Adding new pipeline Pipeline[ Id: e899e35a-1e99-408d-91af-60084463ba1a, Nodes: f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:ONE, State:ALLOCATED, leaderId:null, CreationTimestamp2020-04-17T18:23:54.985Z] to Recon pipeline metadata.
om_1        | 2020-04-17 18:24:00,740 [main] INFO http.HttpRequestLog: Http request log for http.requests.ozoneManager is not defined
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_1  | org.apache.hadoop.hdds.scm.container.common.helpers.StorageContainerException: Container creation failed, due to disk out of space
datanode_3  | 2020-04-17 18:24:03,437 [Thread-25] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-3A862F5E35EB: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
scm_1       | 2020-04-17 18:23:43,531 [main] INFO impl.MetricsSystemImpl: Scheduled Metric snapshot period at 10 second(s).
recon_1     | 2020-04-17 18:23:59,009 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO pipeline.PipelineStateManager: Created pipeline Pipeline[ Id: e899e35a-1e99-408d-91af-60084463ba1a, Nodes: f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:ONE, State:ALLOCATED, leaderId:null, CreationTimestamp2020-04-17T18:23:54.985Z]
om_1        | 2020-04-17 18:24:00,764 [main] INFO http.HttpServer2: Added global filter 'safety' (class=org.apache.hadoop.hdds.server.http.HttpServer2$QuotingInputFilter)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
kdc_1       | Apr 17 18:23:19 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 127.0.0.1: ISSUE: authtime 1587147799, etypes {rep=18 tkt=18 ses=18}, admin/admin@EXAMPLE.COM for kadmin/admin@EXAMPLE.COM
datanode_1  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueContainer.create(KeyValueContainer.java:165)
datanode_3  | 2020-04-17 18:24:03,439 [Thread-25] INFO impl.RoleInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d: start LeaderElection
scm_1       | 2020-04-17 18:23:43,531 [main] INFO impl.MetricsSystemImpl: StorageContainerManager metrics system started
recon_1     | 2020-04-17 18:23:59,009 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Pipeline ONE PipelineID=e899e35a-1e99-408d-91af-60084463ba1a reported by f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106586728310}
om_1        | 2020-04-17 18:24:00,766 [main] INFO http.HttpServer2: Added filter static_user_filter (class=org.apache.hadoop.hdds.server.http.StaticUserWebFilter$StaticUserFilter) to context ozoneManager
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_2  | 	... 4 more
kdc_1       | Apr 17 18:23:19 kdc kadmind[13](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1, vers=4, flavor=6
datanode_3  | 2020-04-17 18:24:03,454 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-3A862F5E35EB-LeaderElection1] INFO impl.LeaderElection: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-3A862F5E35EB-LeaderElection1: begin an election at term 1 for -1: [3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null
scm_1       | 2020-04-17 18:23:43,716 [main] INFO server.SCMClientProtocolServer: RPC server for Client  is listening at /0.0.0.0:9860
recon_1     | 2020-04-17 18:23:59,009 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO pipeline.PipelineStateManager: Pipeline Pipeline[ Id: e899e35a-1e99-408d-91af-60084463ba1a, Nodes: f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:ONE, State:ALLOCATED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:23:54.985Z] moved to OPEN state
om_1        | 2020-04-17 18:24:00,779 [main] INFO http.HttpServer2: Added filter static_user_filter (class=org.apache.hadoop.hdds.server.http.StaticUserWebFilter$StaticUserFilter) to context static
datanode_2  | 2020-04-17 18:25:50,787 [Command processor thread] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: remove group-2A8041ABD0B3:null
datanode_1  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.handleCreateContainer(KeyValueHandler.java:247)
kdc_1       | Apr 17 18:23:19 kdc kadmind[13](Notice): Request: kadm5_get_policy, default, Policy does not exist, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
datanode_3  | 2020-04-17 18:24:03,455 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-3A862F5E35EB-LeaderElection1] INFO impl.RoleInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d: shutdown LeaderElection
scm_1       | 2020-04-17 18:23:43,717 [IPC Server Responder] INFO ipc.Server: IPC Server Responder: starting
recon_1     | 2020-04-17 18:23:59,257 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Pipeline THREE PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 reported by f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106586728310}
om_1        | 2020-04-17 18:24:00,779 [main] INFO http.HttpServer2: Added filter static_user_filter (class=org.apache.hadoop.hdds.server.http.StaticUserWebFilter$StaticUserFilter) to context logs
datanode_2  | 2020-04-17 18:25:50,787 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "c6484984-fa4c-47a5-afdd-2a8041abd0b3"
datanode_1  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.dispatchRequest(KeyValueHandler.java:164)
kdc_1       | Apr 17 18:23:19 kdc kadmind[13](Notice): Request: kadm5_create_principal, dn/9dd073498a2e@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
datanode_3  | 2020-04-17 18:24:03,457 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-3A862F5E35EB-LeaderElection1] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-3A862F5E35EB: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
scm_1       | 2020-04-17 18:23:43,719 [IPC Server listener on 9860] INFO ipc.Server: IPC Server listener on 9860: starting
recon_1     | 2020-04-17 18:24:01,754 [pool-9-thread-1] INFO impl.OzoneManagerServiceProviderImpl: Syncing data from Ozone Manager.
om_1        | 2020-04-17 18:24:00,892 [main] INFO http.HttpServer2: Jetty bound to port 9874
datanode_2  | 
datanode_1  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.handle(KeyValueHandler.java:152)
kdc_1       | Apr 17 18:23:19 kdc kadmind[13](info): closing down fd 18
datanode_3  | 2020-04-17 18:24:03,457 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-3A862F5E35EB-LeaderElection1] INFO ratis.XceiverServerRatis: Leader change notification received for group: group-3A862F5E35EB with new leaderId: 3989634e-60c9-4e5a-8523-9408dc0a802d
scm_1       | 2020-04-17 18:23:43,756 [main] INFO server.StorageContainerManager: ScmBlockLocationProtocol RPC server is listening at /0.0.0.0:9863
recon_1     | 2020-04-17 18:24:01,754 [pool-9-thread-1] INFO impl.OzoneManagerServiceProviderImpl: Obtaining full snapshot from Ozone Manager
om_1        | 2020-04-17 18:24:00,903 [main] INFO server.Server: jetty-9.4.26.v20200117; built: 2020-01-17T12:35:33.676Z; git: 7b38981d25d14afb4a12ff1f2596756144edf695; jvm 11.0.6+10-LTS
datanode_2  | java.io.IOException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-2A8041ABD0B3 not found.
datanode_1  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.createContainer(HddsDispatcher.java:414)
kdc_1       | Apr 17 18:23:19 kdc kadmind[13](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1, vers=4, flavor=6
datanode_3  | 2020-04-17 18:24:03,457 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-3A862F5E35EB-LeaderElection1] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-3A862F5E35EB: change Leader from null to 3989634e-60c9-4e5a-8523-9408dc0a802d at term 1 for becomeLeader, leader elected after 5712ms
scm_1       | 2020-04-17 18:23:43,757 [main] INFO server.SCMBlockProtocolServer: RPC server for Block Protocol is listening at /0.0.0.0:9863
recon_1     | 2020-04-17 18:24:02,014 [pool-9-thread-1] INFO impl.OzoneManagerServiceProviderImpl: Got new checkpoint from OM : /data/metadata/om.snapshot.db_1587147841755
om_1        | 2020-04-17 18:24:01,023 [main] INFO server.session: DefaultSessionIdManager workerName=node0
om_1        | 2020-04-17 18:24:01,024 [main] INFO server.session: No SessionScavenger set, using defaults
om_1        | 2020-04-17 18:24:01,025 [main] INFO server.session: node0 Scavenging every 660000ms
datanode_1  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatchRequest(HddsDispatcher.java:250)
datanode_3  | 2020-04-17 18:24:03,472 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-3A862F5E35EB-LeaderElection1] INFO server.RaftServerConfigKeys: raft.server.staging.catchup.gap = 1000 (default)
scm_1       | 2020-04-17 18:23:43,759 [IPC Server Responder] INFO ipc.Server: IPC Server Responder: starting
om_1        | 2020-04-17 18:24:01,074 [main] INFO handler.ContextHandler: Started o.e.j.s.ServletContextHandler@5042e3d0{logs,/logs,file:///var/log/hadoop/,AVAILABLE}
kdc_1       | Apr 17 18:23:19 kdc kadmind[13](Notice): Request: kadm5_randkey_principal, dn/9dd073498a2e@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
kdc_1       | Apr 17 18:23:19 kdc kadmind[13](Notice): Request: kadm5_get_principal, dn/9dd073498a2e@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
kdc_1       | Apr 17 18:23:19 kdc kadmind[13](info): closing down fd 18
kdc_1       | Apr 17 18:23:19 kdc kadmind[13](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1, vers=4, flavor=6
kdc_1       | Apr 17 18:23:19 kdc kadmind[13](Notice): Request: kadm5_get_policy, default, Policy does not exist, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
scm_1       | 2020-04-17 18:23:43,764 [IPC Server listener on 9863] INFO ipc.Server: IPC Server listener on 9863: starting
datanode_1  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatch(HddsDispatcher.java:162)
kdc_1       | Apr 17 18:23:19 kdc kadmind[13](Notice): Request: kadm5_create_principal, HTTP/9dd073498a2e@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
datanode_3  | 2020-04-17 18:24:03,472 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-3A862F5E35EB-LeaderElection1] INFO server.RaftServerConfigKeys: raft.server.rpc.sleep.time = 25ms (default)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
recon_1     | 2020-04-17 18:24:02,055 [pool-9-thread-1] INFO recovery.ReconOmMetadataManagerImpl: Created OM DB handle from snapshot at /data/metadata/om.snapshot.db_1587147841755.
scm_1       | 2020-04-17 18:23:43,907 [main] INFO server.StorageContainerManager: ScmDatanodeProtocl RPC server is listening at /0.0.0.0:9861
om_1        | 2020-04-17 18:24:01,075 [main] INFO handler.ContextHandler: Started o.e.j.s.ServletContextHandler@60f77af{static,/static,jar:file:/opt/hadoop/share/ozone/lib/hadoop-ozone-ozone-manager-0.6.0-SNAPSHOT.jar!/webapps/static,AVAILABLE}
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.dispatchCommand(ContainerStateMachine.java:402)
kdc_1       | Apr 17 18:23:19 kdc kadmind[13](info): closing down fd 18
datanode_3  | 2020-04-17 18:24:03,474 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-3A862F5E35EB-LeaderElection1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.log_appender.3989634e-60c9-4e5a-8523-9408dc0a802d@group-3A862F5E35EB
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
recon_1     | 2020-04-17 18:24:02,062 [pool-9-thread-1] INFO impl.OzoneManagerServiceProviderImpl: Calling reprocess on Recon tasks.
scm_1       | 2020-04-17 18:23:43,919 [main] INFO server.SCMDatanodeProtocolServer: RPC server for DataNodes is listening at /0.0.0.0:9861
om_1        | 2020-04-17 18:24:01,677 [main] INFO handler.ContextHandler: Started o.e.j.w.WebAppContext@647b9364{ozoneManager,/,file:///tmp/jetty-0_0_0_0-9874-hadoop-ozone-ozone-manager-0_6_0-SNAPSHOT_jar-_-any-12086402118267813650.dir/webapp/,AVAILABLE}{jar:file:/opt/hadoop/share/ozone/lib/hadoop-ozone-ozone-manager-0.6.0-SNAPSHOT.jar!/webapps/ozoneManager}
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.runCommand(ContainerStateMachine.java:412)
kdc_1       | Apr 17 18:23:19 kdc kadmind[13](Notice): Request: kadm5_init, admin/admin@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1, vers=4, flavor=6
datanode_3  | 2020-04-17 18:24:03,481 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-3A862F5E35EB-LeaderElection1] INFO server.RaftServerConfigKeys: raft.server.write.element-limit = 1024 (custom)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
recon_1     | 2020-04-17 18:24:02,064 [pool-10-thread-1] INFO tasks.ContainerKeyMapperTask: Starting a 'reprocess' run of ContainerKeyMapperTask.
scm_1       | 2020-04-17 18:23:43,922 [IPC Server Responder] INFO ipc.Server: IPC Server Responder: starting
om_1        | 2020-04-17 18:24:01,702 [main] INFO server.AbstractConnector: Started ServerConnector@5c6a5192{HTTP/1.1,[http/1.1]}{0.0.0.0:9874}
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.lambda$handleWriteChunk$2(ContainerStateMachine.java:447)
kdc_1       | Apr 17 18:23:19 kdc kadmind[13](Notice): Request: kadm5_randkey_principal, HTTP/9dd073498a2e@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
datanode_3  | 2020-04-17 18:24:03,482 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-3A862F5E35EB-LeaderElection1] INFO server.RaftServerConfigKeys: raft.server.write.byte-limit = 1073741824 (custom)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
recon_1     | 2020-04-17 18:24:02,108 [pool-10-thread-1] INFO impl.ContainerDBServiceProviderImpl: Creating new Recon Container DB at /data/metadata/recon/recon-container-key.db_1587147842064
scm_1       | 2020-04-17 18:23:43,922 [IPC Server listener on 9861] INFO ipc.Server: IPC Server listener on 9861: starting
om_1        | 2020-04-17 18:24:01,703 [main] INFO server.Server: Started @9358ms
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
kdc_1       | Apr 17 18:23:19 kdc kadmind[13](Notice): Request: kadm5_get_principal, HTTP/9dd073498a2e@EXAMPLE.COM, success, client=admin/admin@EXAMPLE.COM, service=kadmin/admin@EXAMPLE.COM, addr=127.0.0.1
datanode_3  | 2020-04-17 18:24:03,493 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-3A862F5E35EB-LeaderElection1] INFO server.RaftServerConfigKeys: raft.server.watch.timeout = 180s (custom)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
recon_1     | 2020-04-17 18:24:02,109 [pool-10-thread-1] INFO impl.ContainerDBServiceProviderImpl: Cleaning up old Recon Container DB at /data/metadata/recon/recon-container-key.db_1587147808003.
scm_1       | 2020-04-17 18:23:43,965 [main] INFO server.SCMClientProtocolServer: Starting RPC server for SCMSecurityProtocolServer. is listening at /0.0.0.0:9961
om_1        | 2020-04-17 18:24:01,712 [main] INFO impl.MetricsSinkAdapter: Sink prometheus started
datanode_1  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
kdc_1       | Apr 17 18:23:19 kdc kadmind[13](info): closing down fd 18
datanode_3  | 2020-04-17 18:24:03,493 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-3A862F5E35EB-LeaderElection1] INFO server.RaftServerConfigKeys: raft.server.watch.timeout.denomination = 1s (default)
datanode_2  | Caused by: org.apache.ratis.protocol.GroupMismatchException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-2A8041ABD0B3 not found.
recon_1     | 2020-04-17 18:24:02,157 [pool-10-thread-1] INFO tasks.ContainerKeyMapperTask: Completed 'reprocess' of ContainerKeyMapperTask.
scm_1       | 2020-04-17 18:23:43,980 [IPC Server Responder] INFO ipc.Server: IPC Server Responder: starting
om_1        | 2020-04-17 18:24:01,712 [main] INFO impl.MetricsSystemImpl: Registered sink prometheus
datanode_1  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
kdc_1       | Apr 17 18:23:22 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 172.24.0.6: ISSUE: authtime 1587147802, etypes {rep=18 tkt=18 ses=18}, HTTP/scm@EXAMPLE.COM for krbtgt/EXAMPLE.COM@EXAMPLE.COM
datanode_3  | 2020-04-17 18:24:03,494 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-3A862F5E35EB-LeaderElection1] INFO server.RaftServerConfigKeys: raft.server.watch.element-limit = 65536 (default)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
recon_1     | 2020-04-17 18:24:02,157 [pool-10-thread-1] INFO tasks.ContainerKeyMapperTask: It took me 0.093 seconds to process 0 keys.
scm_1       | 2020-04-17 18:23:43,980 [IPC Server listener on 9961] INFO ipc.Server: IPC Server listener on 9961: starting
om_1        | 2020-04-17 18:24:01,717 [main] INFO http.BaseHttpServer: HTTP server of ozoneManager listening at http://0.0.0.0:9874
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
kdc_1       | Apr 17 18:23:27 kdc krb5kdc[8](info): AS_REQ (2 etypes {18 17}) 172.24.0.3: ISSUE: authtime 1587147807, etypes {rep=18 tkt=18 ses=18}, recon/recon@EXAMPLE.COM for krbtgt/EXAMPLE.COM@EXAMPLE.COM
datanode_3  | 2020-04-17 18:24:03,509 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-3A862F5E35EB-LeaderElection1] INFO impl.RoleInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d: start LeaderState
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
recon_1     | 2020-04-17 18:24:02,606 [pool-10-thread-1] INFO tasks.FileSizeCountTask: Completed a 'reprocess' run of FileSizeCountTask.
scm_1       | 2020-04-17 18:23:43,981 [main] INFO http.HttpServer2: Jetty bound to port 9876
om_1        | 2020-04-17 18:24:01,867 [qtp212397882-139] INFO om.OMDBCheckpointServlet: Received request to obtain OM DB checkpoint snapshot
datanode_1  | Caused by: org.apache.hadoop.util.DiskChecker$DiskOutOfSpaceException: Out of space: The volume with the most available space (=497790976 B) is less than the container size (=1073741824 B).
kdc_1       | Apr 17 18:23:29 kdc krb5kdc[8](info): AS_REQ (2 etypes {18 17}) 172.24.0.5: ISSUE: authtime 1587147809, etypes {rep=18 tkt=18 ses=18}, dn/1e870b3d5d4c@EXAMPLE.COM for krbtgt/EXAMPLE.COM@EXAMPLE.COM
datanode_3  | 2020-04-17 18:24:03,564 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-3A862F5E35EB-LeaderElection1] INFO segmented.SegmentedRaftLogWorker: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-3A862F5E35EB-SegmentedRaftLogWorker: Starting segment from index:0
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
recon_1     | 2020-04-17 18:24:03,461 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Pipeline THREE PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 reported by 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106587165812}
recon_1     | 2020-04-17 18:24:03,592 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Pipeline THREE PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 reported by 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106649330073}
om_1        | 2020-04-17 18:24:01,879 [qtp212397882-139] INFO db.RDBCheckpointManager: Created checkpoint at /data/metadata/db.checkpoints/rdb_rdb_checkpoint_1587147841869 in 9 milliseconds
kdc_1       | Apr 17 18:23:30 kdc krb5kdc[8](info): AS_REQ (2 etypes {18 17}) 172.24.0.8: ISSUE: authtime 1587147810, etypes {rep=18 tkt=18 ses=18}, om/om@EXAMPLE.COM for krbtgt/EXAMPLE.COM@EXAMPLE.COM
datanode_3  | 2020-04-17 18:24:03,612 [Thread-27] INFO impl.FollowerState: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-FollowerState: change to CANDIDATE, lastRpcTime:5124ms, electionTimeout:5111ms
recon_1     | 2020-04-17 18:24:03,839 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Pipeline THREE PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 reported by 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106587165812}
scm_1       | 2020-04-17 18:23:43,997 [main] INFO server.Server: jetty-9.4.26.v20200117; built: 2020-01-17T12:35:33.676Z; git: 7b38981d25d14afb4a12ff1f2596756144edf695; jvm 11.0.6+10-LTS
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
om_1        | 2020-04-17 18:24:01,910 [qtp212397882-139] INFO om.OMDBCheckpointServlet: Time taken to write the checkpoint to response output stream: 30 milliseconds
datanode_1  | 	at org.apache.hadoop.ozone.container.common.volume.RoundRobinVolumeChoosingPolicy.chooseVolume(RoundRobinVolumeChoosingPolicy.java:77)
kdc_1       | Apr 17 18:23:31 kdc krb5kdc[8](info): AS_REQ (2 etypes {18 17}) 172.24.0.9: ISSUE: authtime 1587147811, etypes {rep=18 tkt=18 ses=18}, dn/d4ddc26437df@EXAMPLE.COM for krbtgt/EXAMPLE.COM@EXAMPLE.COM
datanode_3  | 2020-04-17 18:24:03,631 [Thread-27] INFO impl.RoleInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d: shutdown FollowerState
recon_1     | 2020-04-17 18:24:03,839 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO pipeline.PipelineStateManager: Pipeline Pipeline[ Id: c6484984-fa4c-47a5-afdd-2a8041abd0b3, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:ALLOCATED, leaderId:3989634e-60c9-4e5a-8523-9408dc0a802d, CreationTimestamp2020-04-17T18:23:54.997Z] moved to OPEN state
scm_1       | 2020-04-17 18:23:44,368 [main] INFO server.session: DefaultSessionIdManager workerName=node0
datanode_2  | 	... 4 more
om_1        | 2020-04-17 18:24:01,910 [qtp212397882-139] INFO db.RocksDBCheckpoint: Cleaning up RocksDB checkpoint at /data/metadata/db.checkpoints/rdb_rdb_checkpoint_1587147841869
datanode_1  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueContainer.create(KeyValueContainer.java:124)
kdc_1       | Apr 17 18:23:32 kdc krb5kdc[8](info): AS_REQ (2 etypes {18 17}) 172.24.0.10: ISSUE: authtime 1587147812, etypes {rep=18 tkt=18 ses=18}, dn/9dd073498a2e@EXAMPLE.COM for krbtgt/EXAMPLE.COM@EXAMPLE.COM
datanode_3  | 2020-04-17 18:24:03,631 [Thread-27] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
recon_1     | 2020-04-17 18:24:19,365 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
scm_1       | 2020-04-17 18:23:44,368 [main] INFO server.session: No SessionScavenger set, using defaults
datanode_2  | 2020-04-17 18:25:55,792 [Thread-89] INFO impl.FollowerState: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-FollowerState: change to CANDIDATE, lastRpcTime:5078ms, electionTimeout:5076ms
om_1        | 2020-04-17 18:24:16,324 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 	... 13 more
kdc_1       | Apr 17 18:23:39 kdc krb5kdc[8](info): AS_REQ (2 etypes {18 17}) 172.24.0.6: ISSUE: authtime 1587147819, etypes {rep=18 tkt=18 ses=18}, scm/scm@EXAMPLE.COM for krbtgt/EXAMPLE.COM@EXAMPLE.COM
datanode_3  | 2020-04-17 18:24:03,632 [Thread-27] INFO impl.RoleInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d: start LeaderElection
recon_1     | 2020-04-17 18:24:19,420 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
scm_1       | 2020-04-17 18:23:44,400 [main] INFO server.session: node0 Scavenging every 660000ms
datanode_2  | 2020-04-17 18:25:55,792 [Thread-89] INFO impl.RoleInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689: shutdown FollowerState
om_1        | 2020-04-17 18:24:16,352 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
datanode_1  | 2020-04-17 18:26:17,914 [ChunkWriter-15-0] INFO impl.HddsDispatcher: Operation: WriteChunk , Trace ID: 1ebccd3f95d7d6a9:57399964959fe306:1ebccd3f95d7d6a9:0 , Message: ContainerID 2 creation failed , Result: DISK_OUT_OF_SPACE , StorageContainerException Occurred.
kdc_1       | Apr 17 18:23:44 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.9: ISSUE: authtime 1587147811, etypes {rep=18 tkt=18 ses=18}, dn/d4ddc26437df@EXAMPLE.COM for scm/scm@EXAMPLE.COM
recon_1     | 2020-04-17 18:24:19,445 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 from datanode 3989634e-60c9-4e5a-8523-9408dc0a802d. Reason : ContainerID 1 creation failed
datanode_3  | 2020-04-17 18:24:03,637 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-3A862F5E35EB-LeaderElection1] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-3A862F5E35EB: set configuration 0: [3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null at 0
scm_1       | 2020-04-17 18:23:44,447 [main] INFO handler.ContextHandler: Started o.e.j.s.ServletContextHandler@2806d6da{logs,/logs,file:///var/log/hadoop/,AVAILABLE}
datanode_2  | 2020-04-17 18:25:55,793 [Thread-89] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
om_1        | 2020-04-17 18:24:17,103 [IPC Server handler 89 on 9862] INFO volume.OMVolumeCreateRequest: created volume:vol-0-89165 for user:testuser/scm@EXAMPLE.COM
datanode_1  | org.apache.hadoop.hdds.scm.container.common.helpers.StorageContainerException: ContainerID 2 creation failed
kdc_1       | Apr 17 18:23:44 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.3: ISSUE: authtime 1587147807, etypes {rep=18 tkt=18 ses=18}, recon/recon@EXAMPLE.COM for scm/scm@EXAMPLE.COM
recon_1     | 2020-04-17 18:24:19,445 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: c6484984-fa4c-47a5-afdd-2a8041abd0b3, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:OPEN, leaderId:3989634e-60c9-4e5a-8523-9408dc0a802d, CreationTimestamp2020-04-17T18:23:54.997Z]
datanode_3  | 2020-04-17 18:24:03,645 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-LeaderElection2] INFO impl.LeaderElection: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-LeaderElection2: begin an election at term 1 for -1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null
scm_1       | 2020-04-17 18:23:44,447 [main] INFO handler.ContextHandler: Started o.e.j.s.ServletContextHandler@cb39552{static,/static,jar:file:/opt/hadoop/share/ozone/lib/hadoop-hdds-server-scm-0.6.0-SNAPSHOT.jar!/webapps/static,AVAILABLE}
datanode_2  | 2020-04-17 18:25:55,793 [Thread-89] INFO impl.RoleInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689: start LeaderElection
om_1        | 2020-04-17 18:24:17,197 [IPC Server handler 2 on 9862] INFO volume.OMVolumeCreateRequest: created volume:vol-1-87228 for user:testuser/scm@EXAMPLE.COM
datanode_1  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatchRequest(HddsDispatcher.java:254)
kdc_1       | Apr 17 18:23:44 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.10: ISSUE: authtime 1587147812, etypes {rep=18 tkt=18 ses=18}, dn/9dd073498a2e@EXAMPLE.COM for scm/scm@EXAMPLE.COM
recon_1     | 2020-04-17 18:24:19,446 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineStateManager: Pipeline Pipeline[ Id: c6484984-fa4c-47a5-afdd-2a8041abd0b3, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:3989634e-60c9-4e5a-8523-9408dc0a802d, CreationTimestamp2020-04-17T18:23:54.997Z] moved to CLOSED state
datanode_3  | 2020-04-17 18:24:03,805 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-LeaderElection2] INFO impl.LeaderElection: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-LeaderElection2: Election PASSED; received 1 response(s) [3989634e-60c9-4e5a-8523-9408dc0a802d<-f2e775cd-89a9-41b5-a9e0-4408e0d60689#0:OK-t1] and 0 exception(s); 3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3:t1, leader=null, voted=3989634e-60c9-4e5a-8523-9408dc0a802d, raftlog=3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null
scm_1       | 2020-04-17 18:23:44,485 [Socket Reader #1 for port 9860] INFO ipc.Server: Auth successful for recon/recon@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | 2020-04-17 18:25:55,803 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-LeaderElection2] INFO impl.LeaderElection: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-LeaderElection2: begin an election at term 1 for -1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null
om_1        | 2020-04-17 18:24:17,210 [IPC Server handler 1 on 9862] INFO volume.OMVolumeCreateRequest: created volume:vol-2-38615 for user:testuser/scm@EXAMPLE.COM
datanode_1  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatch(HddsDispatcher.java:162)
kdc_1       | Apr 17 18:23:44 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.5: ISSUE: authtime 1587147809, etypes {rep=18 tkt=18 ses=18}, dn/1e870b3d5d4c@EXAMPLE.COM for scm/scm@EXAMPLE.COM
recon_1     | 2020-04-17 18:24:19,546 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 from datanode 3989634e-60c9-4e5a-8523-9408dc0a802d. Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-FAB0287C2AC1, cid=1
datanode_3  | 2020-04-17 18:24:03,805 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-LeaderElection2] INFO impl.RoleInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d: shutdown LeaderElection
scm_1       | 2020-04-17 18:23:44,531 [Socket Reader #1 for port 9961] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | 2020-04-17 18:25:55,871 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-LeaderElection2] INFO impl.LeaderElection: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-LeaderElection2: Election PASSED; received 1 response(s) [f2e775cd-89a9-41b5-a9e0-4408e0d60689<-0086d012-6f96-4817-8e1b-94f6eaa443bc#0:OK-t1] and 0 exception(s); f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD:t1, leader=null, voted=f2e775cd-89a9-41b5-a9e0-4408e0d60689, raftlog=f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null
om_1        | 2020-04-17 18:24:17,220 [IPC Server handler 4 on 9862] INFO volume.OMVolumeCreateRequest: created volume:vol-3-76213 for user:testuser/scm@EXAMPLE.COM
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.dispatchCommand(ContainerStateMachine.java:402)
kdc_1       | Apr 17 18:23:44 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587147802, etypes {rep=18 tkt=18 ses=18}, HTTP/scm@EXAMPLE.COM for scm/scm@EXAMPLE.COM
recon_1     | 	 State Machine: cmdType: WriteChunk traceID: "aa474c9f812cac7a:c083a61f31ca1fef:aa474c9f812cac7a:0" containerID: 1 datanodeUuid: "3989634e-60c9-4e5a-8523-9408dc0a802d" pipelineID: "c6484984-fa4c-47a5-afdd-2a8041abd0b3" writeChunk { blockID { containerID: 1 localID: 104015321989251072 blockCommitSequenceId: 0 } chunkData { chunkName: "104015321989251072_chunk_1" offset: 0 len: 10240 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: "\334],\220" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDEgbG9jSUQ6IDEwNDAxNTMyMTk4OTI1MTA3Mhjy9KL0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BAGROR-2m334gPvEwaQK3h4A1G6wpETxvuYeog10z9pNx-0XjzmnkcYO1PHHn0KJP-ce_4ZabjuUOP0KkKvoFojN-YQ9VkdnsyZXjJrZusLxfrdEr22jdEXZraXyVv_36H56sCH5ifpKoDNL_ANPymE3vNNG1g4fEM5jbsHgv01MPGAJm1YZIU1LPVVfjT_6YZR14unkpWq8xk4DBWFIFFzVvp2oMnlMIP-62cShaLzHHB2g6jZxEZRW8zlgHbyEoFVSfOehqlNmhDRriXhbsRSz771sLQDplmlRnkFVYv8kUJI7m_UXBUsA4AMUs9z1o_Kn0VCe5AsqOQERfPiP0hEkQSEREU19CTE9DS19UT0tFTiJjb25JRDogMSBsb2NJRDogMTA0MDE1MzIxOTg5MjUxMDcy", container path=nonexistent
datanode_3  | 2020-04-17 18:24:03,805 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-LeaderElection2] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
scm_1       | 2020-04-17 18:23:44,534 [Socket Reader #1 for port 9860] INFO authorize.ServiceAuthorizationManager: Authorization successful for recon/recon@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocol
datanode_2  | 2020-04-17 18:25:55,871 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-LeaderElection2] INFO impl.RoleInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689: shutdown LeaderElection
om_1        | 2020-04-17 18:24:17,229 [IPC Server handler 6 on 9862] INFO volume.OMVolumeCreateRequest: created volume:vol-4-25558 for user:testuser/scm@EXAMPLE.COM
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.runCommand(ContainerStateMachine.java:412)
kdc_1       | Apr 17 18:23:47 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.8: ISSUE: authtime 1587147810, etypes {rep=18 tkt=18 ses=18}, om/om@EXAMPLE.COM for scm/scm@EXAMPLE.COM
recon_1     | 2020-04-17 18:24:19,547 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: c6484984-fa4c-47a5-afdd-2a8041abd0b3, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:3989634e-60c9-4e5a-8523-9408dc0a802d, CreationTimestamp2020-04-17T18:23:54.997Z]
datanode_3  | 2020-04-17 18:24:03,818 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-LeaderElection2] INFO ratis.XceiverServerRatis: Leader change notification received for group: group-2A8041ABD0B3 with new leaderId: 3989634e-60c9-4e5a-8523-9408dc0a802d
scm_1       | 2020-04-17 18:23:44,543 [Socket Reader #1 for port 9961] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | 2020-04-17 18:25:55,871 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-LeaderElection2] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
om_1        | 2020-04-17 18:25:02,631 [qtp212397882-135] INFO om.OMDBCheckpointServlet: Received request to obtain OM DB checkpoint snapshot
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.lambda$handleWriteChunk$2(ContainerStateMachine.java:447)
kdc_1       | Apr 17 18:23:50 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 172.24.0.6: ISSUE: authtime 1587147830, etypes {rep=18 tkt=18 ses=18}, HTTP/scm@EXAMPLE.COM for krbtgt/EXAMPLE.COM@EXAMPLE.COM
recon_1     | 2020-04-17 18:24:19,599 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 2020-04-17 18:24:03,819 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-LeaderElection2] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3: change Leader from null to 3989634e-60c9-4e5a-8523-9408dc0a802d at term 1 for becomeLeader, leader elected after 5392ms
scm_1       | 2020-04-17 18:23:44,544 [Socket Reader #1 for port 9961] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | 2020-04-17 18:25:55,871 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-LeaderElection2] INFO ratis.XceiverServerRatis: Leader change notification received for group: group-0181CC1CA0BD with new leaderId: f2e775cd-89a9-41b5-a9e0-4408e0d60689
om_1        | 2020-04-17 18:25:02,647 [qtp212397882-135] INFO db.RDBCheckpointManager: Created checkpoint at /data/metadata/db.checkpoints/rdb_rdb_checkpoint_1587147902631 in 16 milliseconds
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
kdc_1       | Apr 17 18:23:52 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.10: ISSUE: authtime 1587147812, etypes {rep=18 tkt=18 ses=18}, dn/9dd073498a2e@EXAMPLE.COM for recon/recon@EXAMPLE.COM
recon_1     | 2020-04-17 18:24:19,607 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_3  | 2020-04-17 18:24:03,820 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-LeaderElection2] INFO server.RaftServerConfigKeys: raft.server.staging.catchup.gap = 1000 (default)
scm_1       | 2020-04-17 18:23:44,571 [Socket Reader #1 for port 9961] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.hdds.protocol.SCMSecurityProtocol
datanode_2  | 2020-04-17 18:25:55,872 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-LeaderElection2] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD: change Leader from null to f2e775cd-89a9-41b5-a9e0-4408e0d60689 at term 1 for becomeLeader, leader elected after 5170ms
om_1        | 2020-04-17 18:25:02,650 [qtp212397882-135] INFO om.OMDBCheckpointServlet: Time taken to write the checkpoint to response output stream: 2 milliseconds
datanode_1  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
kdc_1       | Apr 17 18:23:52 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.5: ISSUE: authtime 1587147809, etypes {rep=18 tkt=18 ses=18}, dn/1e870b3d5d4c@EXAMPLE.COM for recon/recon@EXAMPLE.COM
datanode_3  | 2020-04-17 18:24:03,820 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-LeaderElection2] INFO server.RaftServerConfigKeys: raft.server.rpc.sleep.time = 25ms (default)
recon_1     | 2020-04-17 18:24:19,608 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 from datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc. Reason : ContainerID 1 creation failed
recon_1     | 2020-04-17 18:24:19,609 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: c6484984-fa4c-47a5-afdd-2a8041abd0b3, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:3989634e-60c9-4e5a-8523-9408dc0a802d, CreationTimestamp2020-04-17T18:23:54.997Z]
datanode_2  | 2020-04-17 18:25:55,875 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-LeaderElection2] INFO server.RaftServerConfigKeys: raft.server.staging.catchup.gap = 1000 (default)
om_1        | 2020-04-17 18:25:02,650 [qtp212397882-135] INFO db.RocksDBCheckpoint: Cleaning up RocksDB checkpoint at /data/metadata/db.checkpoints/rdb_rdb_checkpoint_1587147902631
datanode_1  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
kdc_1       | Apr 17 18:23:53 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.9: ISSUE: authtime 1587147811, etypes {rep=18 tkt=18 ses=18}, dn/d4ddc26437df@EXAMPLE.COM for recon/recon@EXAMPLE.COM
datanode_3  | 2020-04-17 18:24:03,820 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-LeaderElection2] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.log_appender.3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3
recon_1     | 2020-04-17 18:24:19,670 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
scm_1       | 2020-04-17 18:23:44,582 [Socket Reader #1 for port 9961] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.hdds.protocol.SCMSecurityProtocol
datanode_2  | 2020-04-17 18:25:55,875 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-LeaderElection2] INFO server.RaftServerConfigKeys: raft.server.rpc.sleep.time = 25ms (default)
datanode_2  | 2020-04-17 18:25:55,875 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-LeaderElection2] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.log_appender.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
kdc_1       | Apr 17 18:23:55 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587147830, etypes {rep=18 tkt=18 ses=18}, HTTP/scm@EXAMPLE.COM for scm/scm@EXAMPLE.COM
datanode_3  | 2020-04-17 18:24:03,821 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-LeaderElection2] INFO server.RaftServerConfigKeys: raft.server.write.element-limit = 1024 (custom)
recon_1     | 2020-04-17 18:24:19,696 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 from datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc. Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-FAB0287C2AC1, cid=1
datanode_2  | 2020-04-17 18:25:55,876 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-LeaderElection2] INFO server.RaftServerConfigKeys: raft.server.write.element-limit = 1024 (custom)
om_1        | 2020-04-17 18:25:51,692 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
scm_1       | 2020-04-17 18:23:44,591 [Socket Reader #1 for port 9961] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.hdds.protocol.SCMSecurityProtocol
datanode_1  | 2020-04-17 18:26:17,919 [ChunkWriter-15-0] ERROR ratis.ContainerStateMachine: group-0181CC1CA0BD: writeChunk writeStateMachineData failed: blockIdcontainerID: 2
kdc_1       | Apr 17 18:23:56 kdc krb5kdc[8](info): AS_REQ (2 etypes {18 17}) 172.24.0.8: ISSUE: authtime 1587147836, etypes {rep=18 tkt=18 ses=18}, om/om@EXAMPLE.COM for krbtgt/EXAMPLE.COM@EXAMPLE.COM
datanode_3  | 2020-04-17 18:24:03,821 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-LeaderElection2] INFO server.RaftServerConfigKeys: raft.server.write.byte-limit = 1073741824 (custom)
recon_1     | 	 State Machine: cmdType: WriteChunk traceID: "aa474c9f812cac7a:c083a61f31ca1fef:aa474c9f812cac7a:0" containerID: 1 datanodeUuid: "3989634e-60c9-4e5a-8523-9408dc0a802d" pipelineID: "c6484984-fa4c-47a5-afdd-2a8041abd0b3" writeChunk { blockID { containerID: 1 localID: 104015321989251072 blockCommitSequenceId: 0 } chunkData { chunkName: "104015321989251072_chunk_1" offset: 0 len: 10240 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: "\334],\220" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDEgbG9jSUQ6IDEwNDAxNTMyMTk4OTI1MTA3Mhjy9KL0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BAGROR-2m334gPvEwaQK3h4A1G6wpETxvuYeog10z9pNx-0XjzmnkcYO1PHHn0KJP-ce_4ZabjuUOP0KkKvoFojN-YQ9VkdnsyZXjJrZusLxfrdEr22jdEXZraXyVv_36H56sCH5ifpKoDNL_ANPymE3vNNG1g4fEM5jbsHgv01MPGAJm1YZIU1LPVVfjT_6YZR14unkpWq8xk4DBWFIFFzVvp2oMnlMIP-62cShaLzHHB2g6jZxEZRW8zlgHbyEoFVSfOehqlNmhDRriXhbsRSz771sLQDplmlRnkFVYv8kUJI7m_UXBUsA4AMUs9z1o_Kn0VCe5AsqOQERfPiP0hEkQSEREU19CTE9DS19UT0tFTiJjb25JRDogMSBsb2NJRDogMTA0MDE1MzIxOTg5MjUxMDcy", container path=nonexistent
recon_1     | 2020-04-17 18:24:19,697 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: c6484984-fa4c-47a5-afdd-2a8041abd0b3, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:3989634e-60c9-4e5a-8523-9408dc0a802d, CreationTimestamp2020-04-17T18:23:54.997Z]
om_1        | 2020-04-17 18:25:51,696 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
scm_1       | 2020-04-17 18:23:44,678 [Socket Reader #1 for port 9961] INFO ipc.Server: Auth successful for HTTP/scm@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | localID: 104015329795637249
kdc_1       | Apr 17 18:23:56 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.8: ISSUE: authtime 1587147836, etypes {rep=18 tkt=18 ses=18}, om/om@EXAMPLE.COM for scm/scm@EXAMPLE.COM
datanode_3  | 2020-04-17 18:24:03,821 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-LeaderElection2] INFO server.RaftServerConfigKeys: raft.server.watch.timeout = 180s (custom)
recon_1     | 2020-04-17 18:24:19,703 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_2  | 2020-04-17 18:25:55,879 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-LeaderElection2] INFO server.RaftServerConfigKeys: raft.server.write.byte-limit = 1073741824 (custom)
om_1        | 2020-04-17 18:25:54,324 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
scm_1       | 2020-04-17 18:23:44,748 [Socket Reader #1 for port 9961] INFO authorize.ServiceAuthorizationManager: Authorization successful for HTTP/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.hdds.protocol.SCMSecurityProtocol
datanode_1  | blockCommitSequenceId: 0
kdc_1       | Apr 17 18:23:59 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 172.24.0.6: ISSUE: authtime 1587147839, etypes {rep=18 tkt=18 ses=18}, HTTP/scm@EXAMPLE.COM for krbtgt/EXAMPLE.COM@EXAMPLE.COM
datanode_3  | 2020-04-17 18:24:03,835 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-LeaderElection2] INFO server.RaftServerConfigKeys: raft.server.watch.timeout.denomination = 1s (default)
recon_1     | 2020-04-17 18:24:19,704 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 from datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689. Reason : ContainerID 1 creation failed
datanode_2  | 2020-04-17 18:25:55,880 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-LeaderElection2] INFO server.RaftServerConfigKeys: raft.server.watch.timeout = 180s (custom)
om_1        | 2020-04-17 18:25:54,333 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
scm_1       | 2020-04-17 18:23:44,776 [IPC Server handler 1 on 9961] INFO server.SCMClientProtocolServer: Processing CSR for dn d4ddc26437df, UUID: f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_1  |  logIndex 1 chunkName 104015329795637249_chunk_1 Error message: ContainerID 2 creation failed Container Result: DISK_OUT_OF_SPACE
kdc_1       | Apr 17 18:24:04 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587147839, etypes {rep=18 tkt=18 ses=18}, HTTP/scm@EXAMPLE.COM for scm/scm@EXAMPLE.COM
datanode_3  | 2020-04-17 18:24:03,835 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-LeaderElection2] INFO server.RaftServerConfigKeys: raft.server.watch.element-limit = 65536 (default)
recon_1     | 2020-04-17 18:24:19,705 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: c6484984-fa4c-47a5-afdd-2a8041abd0b3, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:3989634e-60c9-4e5a-8523-9408dc0a802d, CreationTimestamp2020-04-17T18:23:54.997Z]
datanode_2  | 2020-04-17 18:25:55,882 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-LeaderElection2] INFO server.RaftServerConfigKeys: raft.server.watch.timeout.denomination = 1s (default)
om_1        | 2020-04-17 18:25:56,641 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
scm_1       | 2020-04-17 18:23:44,771 [IPC Server handler 0 on 9961] INFO server.SCMClientProtocolServer: Processing CSR for dn 9dd073498a2e, UUID: 3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_1  | 2020-04-17 18:26:17,919 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0181CC1CA0BD-SegmentedRaftLogWorker] ERROR ratis.XceiverServerRatis: pipeline Action CLOSE on pipeline PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd.Reason : ContainerID 2 creation failed
kdc_1       | Apr 17 18:24:07 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 172.24.0.6: ISSUE: authtime 1587147847, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for krbtgt/EXAMPLE.COM@EXAMPLE.COM
datanode_3  | 2020-04-17 18:24:03,842 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-LeaderElection2] INFO server.RaftServerConfigKeys: raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
recon_1     | 2020-04-17 18:24:19,772 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 from datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689. Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-FAB0287C2AC1, cid=1
datanode_2  | 2020-04-17 18:25:55,882 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-LeaderElection2] INFO server.RaftServerConfigKeys: raft.server.watch.element-limit = 65536 (default)
om_1        | 2020-04-17 18:25:56,654 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
scm_1       | 2020-04-17 18:23:44,991 [IPC Server handler 0 on 9961] INFO server.SCMClientProtocolServer: Processing CSR for dn 1e870b3d5d4c, UUID: 0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_1  | 2020-04-17 18:26:17,975 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0181CC1CA0BD-SegmentedRaftLogWorker] ERROR ratis.XceiverServerRatis: pipeline Action CLOSE on pipeline PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd.Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-C694AA0D4B95, cid=1
kdc_1       | Apr 17 18:24:14 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 172.24.0.6: ISSUE: authtime 1587147854, etypes {rep=18 tkt=18 ses=18}, HTTP/scm@EXAMPLE.COM for krbtgt/EXAMPLE.COM@EXAMPLE.COM
datanode_3  | 2020-04-17 18:24:03,845 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-LeaderElection2] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
recon_1     | 	 State Machine: cmdType: WriteChunk traceID: "aa474c9f812cac7a:c083a61f31ca1fef:aa474c9f812cac7a:0" containerID: 1 datanodeUuid: "3989634e-60c9-4e5a-8523-9408dc0a802d" pipelineID: "c6484984-fa4c-47a5-afdd-2a8041abd0b3" writeChunk { blockID { containerID: 1 localID: 104015321989251072 blockCommitSequenceId: 0 } chunkData { chunkName: "104015321989251072_chunk_1" offset: 0 len: 10240 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: "\334],\220" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDEgbG9jSUQ6IDEwNDAxNTMyMTk4OTI1MTA3Mhjy9KL0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BAGROR-2m334gPvEwaQK3h4A1G6wpETxvuYeog10z9pNx-0XjzmnkcYO1PHHn0KJP-ce_4ZabjuUOP0KkKvoFojN-YQ9VkdnsyZXjJrZusLxfrdEr22jdEXZraXyVv_36H56sCH5ifpKoDNL_ANPymE3vNNG1g4fEM5jbsHgv01MPGAJm1YZIU1LPVVfjT_6YZR14unkpWq8xk4DBWFIFFzVvp2oMnlMIP-62cShaLzHHB2g6jZxEZRW8zlgHbyEoFVSfOehqlNmhDRriXhbsRSz771sLQDplmlRnkFVYv8kUJI7m_UXBUsA4AMUs9z1o_Kn0VCe5AsqOQERfPiP0hEkQSEREU19CTE9DS19UT0tFTiJjb25JRDogMSBsb2NJRDogMTA0MDE1MzIxOTg5MjUxMDcy", container path=nonexistent
datanode_2  | 2020-04-17 18:25:55,893 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-LeaderElection2] INFO server.RaftServerConfigKeys: raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
om_1        | 2020-04-17 18:25:56,987 [IPC Server handler 80 on 9862] INFO volume.OMVolumeCreateRequest: created volume:04711-rpcwoport for user:testuser/scm@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:45,095 [main] INFO handler.ContextHandler: Started o.e.j.w.WebAppContext@7a2fce12{scm,/,file:///tmp/jetty-0_0_0_0-9876-hadoop-hdds-server-scm-0_6_0-SNAPSHOT_jar-_-any-151978515730264191.dir/webapp/,AVAILABLE}{jar:file:/opt/hadoop/share/ozone/lib/hadoop-hdds-server-scm-0.6.0-SNAPSHOT.jar!/webapps/scm}
kdc_1       | Apr 17 18:24:14 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 172.24.0.6: ISSUE: authtime 1587147854, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for krbtgt/EXAMPLE.COM@EXAMPLE.COM
datanode_1  | 	 State Machine: cmdType: WriteChunk traceID: "1ebccd3f95d7d6a9:57399964959fe306:1ebccd3f95d7d6a9:0" containerID: 2 datanodeUuid: "0086d012-6f96-4817-8e1b-94f6eaa443bc" pipelineID: "31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd" writeChunk { blockID { containerID: 2 localID: 104015329795637249 blockCommitSequenceId: 0 } chunkData { chunkName: "104015329795637249_chunk_1" offset: 0 len: 17540 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: " wi\267" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDIgbG9jSUQ6IDEwNDAxNTMyOTc5NTYzNzI0ORisl6r0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BABzNCbq3Zmvfa3yTq6FmM7apbRJBLNj70Fdy71QfyNGPUI_zSHiJgowFwauC0MUx8yhkvrgwvdo-uu1lAA1B0edRqZSMq2oHqNg-tDm0ooQOKsasGPDtYicaGKLPS5N0Rf7ilWHxlql-PDYb1vkrPdV3FFltubzTfhs9bq3mHNm_OCvY13At7kMafgSZCOBh5l2sCCxQ_pB1ODPiIq-HeF0bqFw0FJRTYMKfKKjgOQ7er_5UNoZgfPZHWkNXzMSZ9R8OYzJBH3oGUH7HVQeMH1qy3GeqsB8hpJ3ZJvgQcPeQzDWHJ9N59nIBEqmBn3h_7QDhpNuW60lPC2a0oRfxQtwQSEREU19CTE9DS19UT0tFTiJjb25JRDogMiBsb2NJRDogMTA0MDE1MzI5Nzk1NjM3MjQ5", container path=nonexistent
datanode_3  | 2020-04-17 18:24:03,846 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-LeaderElection2] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.element-limit = 1 (custom)
recon_1     | 2020-04-17 18:24:19,772 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: c6484984-fa4c-47a5-afdd-2a8041abd0b3, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:3989634e-60c9-4e5a-8523-9408dc0a802d, CreationTimestamp2020-04-17T18:23:54.997Z]
datanode_2  | 2020-04-17 18:25:55,894 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-LeaderElection2] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
om_1        | 2020-04-17 18:25:58,902 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
scm_1       | 2020-04-17 18:23:45,208 [main] INFO server.AbstractConnector: Started ServerConnector@56928e17{HTTP/1.1,[http/1.1]}{0.0.0.0:9876}
scm_1       | 2020-04-17 18:23:45,209 [main] INFO server.Server: Started @13870ms
datanode_1  | 2020-04-17 18:26:21,651 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: remove group-2A8041ABD0B3:null
datanode_3  | 2020-04-17 18:24:03,881 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-LeaderElection2] INFO grpc.GrpcConfigKeys: raft.grpc.server.leader.outstanding.appends.max = 128 (default)
recon_1     | 2020-04-17 18:24:49,559 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | 2020-04-17 18:25:55,894 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-LeaderElection2] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.element-limit = 1 (custom)
om_1        | 2020-04-17 18:25:58,928 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
scm_1       | 2020-04-17 18:23:45,228 [main] INFO impl.MetricsSinkAdapter: Sink prometheus started
kdc_1       | Apr 17 18:24:16 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587147854, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
datanode_1  | 2020-04-17 18:26:21,651 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "c6484984-fa4c-47a5-afdd-2a8041abd0b3"
datanode_3  | 2020-04-17 18:24:03,882 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-LeaderElection2] INFO server.RaftServerConfigKeys: raft.server.rpc.request.timeout = 60s (custom)
recon_1     | 2020-04-17 18:24:49,581 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_2  | 2020-04-17 18:25:55,900 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-LeaderElection2] INFO grpc.GrpcConfigKeys: raft.grpc.server.leader.outstanding.appends.max = 128 (default)
om_1        | 2020-04-17 18:26:01,373 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
scm_1       | 2020-04-17 18:23:45,230 [main] INFO impl.MetricsSystemImpl: Registered sink prometheus
kdc_1       | Apr 17 18:25:52 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 172.24.0.6: ISSUE: authtime 1587147952, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for krbtgt/EXAMPLE.COM@EXAMPLE.COM
datanode_1  | 
datanode_3  | 2020-04-17 18:24:03,882 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-LeaderElection2] INFO server.RaftServerConfigKeys: raft.server.log.appender.install.snapshot.enabled = false (custom)
recon_1     | 2020-04-17 18:24:49,719 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | 2020-04-17 18:25:55,902 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-LeaderElection2] INFO server.RaftServerConfigKeys: raft.server.rpc.request.timeout = 60s (custom)
om_1        | 2020-04-17 18:26:01,390 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
scm_1       | 2020-04-17 18:23:45,239 [main] INFO http.BaseHttpServer: HTTP server of scm listening at http://0.0.0.0:9876
kdc_1       | Apr 17 18:25:54 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587147952, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
datanode_1  | java.io.IOException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-2A8041ABD0B3 not found.
datanode_3  | 2020-04-17 18:24:03,905 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-LeaderElection2] INFO server.RaftServerConfigKeys: raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
recon_1     | 2020-04-17 18:24:49,727 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_2  | 2020-04-17 18:25:55,902 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-LeaderElection2] INFO server.RaftServerConfigKeys: raft.server.log.appender.install.snapshot.enabled = false (custom)
om_1        | 2020-04-17 18:26:02,851 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for recon/recon@EXAMPLE.COM (auth:KERBEROS)
scm_1       | 2020-04-17 18:23:45,315 [org.apache.hadoop.util.JvmPauseMonitor$Monitor@f2b90fc] INFO util.JvmPauseMonitor: Starting JVM pause monitor
kdc_1       | Apr 17 18:25:56 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587147952, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_3  | 2020-04-17 18:24:03,905 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-LeaderElection2] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
recon_1     | 2020-04-17 18:24:49,791 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | 2020-04-17 18:25:55,920 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-LeaderElection2] INFO server.RaftServerConfigKeys: raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
om_1        | 2020-04-17 18:26:02,859 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for recon/recon@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
scm_1       | 2020-04-17 18:23:45,745 [Socket Reader #1 for port 9860] INFO ipc.Server: Auth successful for HTTP/scm@EXAMPLE.COM (auth:KERBEROS)
kdc_1       | Apr 17 18:25:58 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587147952, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_3  | 2020-04-17 18:24:03,905 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-LeaderElection2] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.element-limit = 1 (custom)
datanode_2  | 2020-04-17 18:25:55,920 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-LeaderElection2] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
recon_1     | 2020-04-17 18:24:49,800 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
om_1        | 2020-04-17 18:26:03,990 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
scm_1       | 2020-04-17 18:23:45,798 [Socket Reader #1 for port 9860] INFO authorize.ServiceAuthorizationManager: Authorization successful for HTTP/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocol
kdc_1       | Apr 17 18:26:01 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587147952, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_3  | 2020-04-17 18:24:03,905 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-LeaderElection2] INFO grpc.GrpcConfigKeys: raft.grpc.server.leader.outstanding.appends.max = 128 (default)
datanode_2  | 2020-04-17 18:25:55,920 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-LeaderElection2] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.element-limit = 1 (custom)
recon_1     | 2020-04-17 18:25:02,627 [pool-9-thread-1] INFO impl.OzoneManagerServiceProviderImpl: Syncing data from Ozone Manager.
om_1        | 2020-04-17 18:26:03,998 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
scm_1       | 2020-04-17 18:23:47,295 [Socket Reader #1 for port 9863] INFO ipc.Server: Auth successful for om/om@EXAMPLE.COM (auth:KERBEROS)
kdc_1       | Apr 17 18:26:02 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.3: ISSUE: authtime 1587147807, etypes {rep=18 tkt=18 ses=18}, recon/recon@EXAMPLE.COM for om/om@EXAMPLE.COM
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_3  | 2020-04-17 18:24:03,906 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-LeaderElection2] INFO server.RaftServerConfigKeys: raft.server.rpc.request.timeout = 60s (custom)
datanode_2  | 2020-04-17 18:25:55,920 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-LeaderElection2] INFO grpc.GrpcConfigKeys: raft.grpc.server.leader.outstanding.appends.max = 128 (default)
recon_1     | 2020-04-17 18:25:02,628 [pool-9-thread-1] INFO impl.OzoneManagerServiceProviderImpl: Obtaining full snapshot from Ozone Manager
om_1        | 2020-04-17 18:26:06,403 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
scm_1       | 2020-04-17 18:23:47,376 [Socket Reader #1 for port 9863] INFO authorize.ServiceAuthorizationManager: Authorization successful for om/om@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.hdds.scm.protocol.ScmBlockLocationProtocol
kdc_1       | Apr 17 18:26:03 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587147952, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 2020-04-17 18:24:03,906 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-LeaderElection2] INFO server.RaftServerConfigKeys: raft.server.log.appender.install.snapshot.enabled = false (custom)
datanode_2  | 2020-04-17 18:25:55,920 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-LeaderElection2] INFO server.RaftServerConfigKeys: raft.server.rpc.request.timeout = 60s (custom)
recon_1     | 2020-04-17 18:25:02,682 [pool-9-thread-1] INFO impl.OzoneManagerServiceProviderImpl: Got new checkpoint from OM : /data/metadata/om.snapshot.db_1587147902628
om_1        | 2020-04-17 18:26:06,416 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
scm_1       | 2020-04-17 18:23:52,073 [Socket Reader #1 for port 9961] INFO ipc.Server: Auth successful for om/om@EXAMPLE.COM (auth:KERBEROS)
kdc_1       | Apr 17 18:26:06 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587147952, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
datanode_1  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-2A8041ABD0B3 not found.
datanode_3  | 2020-04-17 18:24:03,914 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-LeaderElection2] INFO impl.RoleInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d: start LeaderState
datanode_2  | 2020-04-17 18:25:55,920 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-LeaderElection2] INFO server.RaftServerConfigKeys: raft.server.log.appender.install.snapshot.enabled = false (custom)
recon_1     | 2020-04-17 18:25:02,682 [pool-9-thread-1] INFO recovery.ReconOmMetadataManagerImpl: Cleaning up old OM snapshot db at /data/metadata/om.snapshot.db_1587147841755.
om_1        | 2020-04-17 18:26:08,839 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
scm_1       | 2020-04-17 18:23:52,079 [Socket Reader #1 for port 9961] INFO authorize.ServiceAuthorizationManager: Authorization successful for om/om@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.hdds.protocol.SCMSecurityProtocol
kdc_1       | Apr 17 18:26:08 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587147952, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_3  | 2020-04-17 18:24:03,915 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-LeaderElection2] INFO segmented.SegmentedRaftLogWorker: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-SegmentedRaftLogWorker: Starting segment from index:0
datanode_2  | 2020-04-17 18:25:55,922 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-LeaderElection2] INFO impl.RoleInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689: start LeaderState
recon_1     | 2020-04-17 18:25:02,701 [pool-9-thread-1] INFO recovery.ReconOmMetadataManagerImpl: Created OM DB handle from snapshot at /data/metadata/om.snapshot.db_1587147902628.
om_1        | 2020-04-17 18:26:08,850 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
scm_1       | 2020-04-17 18:23:52,081 [IPC Server handler 0 on 9961] INFO server.SCMClientProtocolServer: Processing CSR for om om, UUID: eb90b570-f544-47e5-afbb-6d67b90a47fc
kdc_1       | Apr 17 18:26:11 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587147952, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_3  | 2020-04-17 18:24:03,948 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-LeaderElection2] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3: set configuration 0: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null at 0
datanode_2  | 2020-04-17 18:25:55,922 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-LeaderElection2] INFO segmented.SegmentedRaftLogWorker: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-SegmentedRaftLogWorker: Starting segment from index:0
recon_1     | 2020-04-17 18:25:02,718 [pool-9-thread-1] INFO impl.OzoneManagerServiceProviderImpl: Calling reprocess on Recon tasks.
om_1        | 2020-04-17 18:26:11,132 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
scm_1       | 2020-04-17 18:23:52,648 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
kdc_1       | Apr 17 18:26:13 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587147952, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_3  | 2020-04-17 18:24:03,985 [grpc-default-executor-0] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-   LEADER: Withhold vote from candidate 0086d012-6f96-4817-8e1b-94f6eaa443bc with term 1. State: leader=3989634e-60c9-4e5a-8523-9408dc0a802d, term=1, lastRpcElapsed=null
datanode_2  | 2020-04-17 18:25:55,934 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-SegmentedRaftLogWorker] INFO segmented.SegmentedRaftLogWorker: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-SegmentedRaftLogWorker: created new log segment /data/metadata/ratis/31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd/current/log_inprogress_0
recon_1     | 2020-04-17 18:25:02,718 [pool-10-thread-1] INFO tasks.ContainerKeyMapperTask: Starting a 'reprocess' run of ContainerKeyMapperTask.
om_1        | 2020-04-17 18:26:11,141 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
scm_1       | 2020-04-17 18:23:52,675 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
scm_1       | 2020-04-17 18:23:53,094 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
scm_1       | 2020-04-17 18:23:53,135 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
kdc_1       | Apr 17 18:26:16 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587147952, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
recon_1     | 2020-04-17 18:25:02,733 [pool-10-thread-1] INFO impl.ContainerDBServiceProviderImpl: Creating new Recon Container DB at /data/metadata/recon/recon-container-key.db_1587147902718
om_1        | 2020-04-17 18:26:13,590 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 2020-04-17 18:24:03,988 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-SegmentedRaftLogWorker] INFO segmented.SegmentedRaftLogWorker: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-SegmentedRaftLogWorker: created new log segment /data/metadata/ratis/c6484984-fa4c-47a5-afdd-2a8041abd0b3/current/log_inprogress_0
om_1        | 2020-04-17 18:26:13,600 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_1  | 	... 4 more
datanode_1  | 2020-04-17 18:26:21,652 [Command processor thread] ERROR commandhandler.CloseContainerCommandHandler: Container #2 does not exist in datanode. Container close failed.
scm_1       | 2020-04-17 18:23:53,156 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
om_1        | 2020-04-17 18:26:16,274 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | 2020-04-17 18:25:55,947 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-LeaderElection2] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD: set configuration 0: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null at 0
recon_1     | 2020-04-17 18:25:02,733 [pool-10-thread-1] INFO impl.ContainerDBServiceProviderImpl: Cleaning up old Recon Container DB at /data/metadata/recon/recon-container-key.db_1587147842064.
datanode_1  | 2020-04-17 18:27:48,948 [grpc-default-executor-0] INFO server.GrpcServerProtocolService: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Completed APPEND_ENTRIES, lastRequest: f2e775cd-89a9-41b5-a9e0-4408e0d60689->0086d012-6f96-4817-8e1b-94f6eaa443bc#11-t1, previous=(t:1, i:1), leaderCommit=0, initializing? false, entries: size=1, first=(t:1, i:2), STATEMACHINELOGENTRY, client-C694AA0D4B95, cid=2
kdc_1       | Apr 17 18:27:50 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 172.24.0.6: ISSUE: authtime 1587148070, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for krbtgt/EXAMPLE.COM@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:53,187 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_3  | 2020-04-17 18:24:04,023 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-3A862F5E35EB-SegmentedRaftLogWorker] INFO segmented.SegmentedRaftLogWorker: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-3A862F5E35EB-SegmentedRaftLogWorker: created new log segment /data/metadata/ratis/9160856b-1871-4dde-aa55-3a862f5e35eb/current/log_inprogress_0
om_1        | 2020-04-17 18:26:16,285 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
datanode_2  | 2020-04-17 18:26:17,901 [ChunkWriter-56-0] INFO keyvalue.KeyValueHandler: Operation: CreateContainer , Trace ID: 1ebccd3f95d7d6a9:57399964959fe306:1ebccd3f95d7d6a9:0 , Message: Container creation failed, due to disk out of space , Result: DISK_OUT_OF_SPACE , StorageContainerException Occurred.
recon_1     | 2020-04-17 18:25:02,737 [pool-10-thread-1] INFO tasks.ContainerKeyMapperTask: Completed 'reprocess' of ContainerKeyMapperTask.
datanode_1  | 2020-04-17 18:27:48,981 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: remove  FOLLOWER 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0181CC1CA0BD:t1, leader=f2e775cd-89a9-41b5-a9e0-4408e0d60689, voted=f2e775cd-89a9-41b5-a9e0-4408e0d60689, raftlog=0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0181CC1CA0BD-SegmentedRaftLog:OPENED:c0,f0,i2, conf=0: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null RUNNING
kdc_1       | Apr 17 18:27:52 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587148070, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:54,594 [IPC Server handler 4 on 9861] INFO net.NetworkTopology: Added a new node: /default-rack/3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_3  | 2020-04-17 18:24:18,873 [ChunkWriter-18-0] INFO client.DNCertificateClient: Getting certificate with certSerialId:6113740691311.
om_1        | 2020-04-17 18:27:03,292 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for recon/recon@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | org.apache.hadoop.hdds.scm.container.common.helpers.StorageContainerException: Container creation failed, due to disk out of space
recon_1     | 2020-04-17 18:25:02,738 [pool-10-thread-1] INFO tasks.ContainerKeyMapperTask: It took me 0.019 seconds to process 0 keys.
datanode_1  | 2020-04-17 18:27:48,982 [Command processor thread] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0181CC1CA0BD: shutdown
kdc_1       | Apr 17 18:27:54 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587148070, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:54,596 [IPC Server handler 4 on 9861] INFO node.SCMNodeManager: Registered Data node : 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106587165812}
datanode_3  | 2020-04-17 18:24:19,149 [ChunkWriter-18-0] INFO keyvalue.KeyValueHandler: Operation: CreateContainer , Trace ID: aa474c9f812cac7a:c083a61f31ca1fef:aa474c9f812cac7a:0 , Message: Container creation failed, due to disk out of space , Result: DISK_OUT_OF_SPACE , StorageContainerException Occurred.
om_1        | 2020-04-17 18:27:03,300 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for recon/recon@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
datanode_2  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueContainer.create(KeyValueContainer.java:165)
recon_1     | 2020-04-17 18:25:02,799 [pool-10-thread-1] INFO tasks.FileSizeCountTask: Completed a 'reprocess' run of FileSizeCountTask.
datanode_1  | 2020-04-17 18:27:48,982 [Command processor thread] INFO util.JmxRegister: Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-0181CC1CA0BD,id=0086d012-6f96-4817-8e1b-94f6eaa443bc
kdc_1       | Apr 17 18:27:56 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587148070, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:54,620 [EventQueue-NodeRegistrationContainerReportForDataNodeSafeModeRule] INFO safemode.SCMSafeModeManager: SCM in safe mode. 1 DataNodes registered, 3 required.
datanode_3  | org.apache.hadoop.hdds.scm.container.common.helpers.StorageContainerException: Container creation failed, due to disk out of space
om_1        | 2020-04-17 18:27:50,086 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.handleCreateContainer(KeyValueHandler.java:247)
recon_1     | 2020-04-17 18:25:19,558 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 2020-04-17 18:27:48,982 [Command processor thread] INFO impl.RoleInfo: 0086d012-6f96-4817-8e1b-94f6eaa443bc: shutdown FollowerState
kdc_1       | Apr 17 18:27:59 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587148070, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:54,667 [EventQueue-NodeRegistrationContainerReportForContainerSafeModeRule] INFO safemode.SCMSafeModeManager: ContainerSafeModeRule rule is successfully validated
datanode_3  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueContainer.create(KeyValueContainer.java:165)
om_1        | 2020-04-17 18:27:50,090 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
datanode_2  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.dispatchRequest(KeyValueHandler.java:164)
recon_1     | 2020-04-17 18:25:19,566 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_1  | 2020-04-17 18:27:48,982 [Command processor thread] INFO impl.StateMachineUpdater: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0181CC1CA0BD-StateMachineUpdater: set stopIndex = 0
kdc_1       | Apr 17 18:28:01 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587148070, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:54,693 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Sending CreatePipelineCommand for pipeline:PipelineID=9160856b-1871-4dde-aa55-3a862f5e35eb to datanode:3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_3  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.handleCreateContainer(KeyValueHandler.java:247)
om_1        | 2020-04-17 18:27:52,296 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.handle(KeyValueHandler.java:152)
recon_1     | 2020-04-17 18:25:19,716 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 2020-04-17 18:27:48,982 [Thread-96] INFO impl.FollowerState: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0181CC1CA0BD-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
kdc_1       | Apr 17 18:28:03 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587148070, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:54,734 [RatisPipelineUtilsThread] INFO pipeline.PipelineStateManager: Created pipeline Pipeline[ Id: 9160856b-1871-4dde-aa55-3a862f5e35eb, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:ONE, State:ALLOCATED, leaderId:null, CreationTimestamp2020-04-17T18:23:54.685879Z]
datanode_3  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.dispatchRequest(KeyValueHandler.java:164)
om_1        | 2020-04-17 18:27:52,307 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
datanode_2  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.createContainer(HddsDispatcher.java:414)
recon_1     | 2020-04-17 18:25:19,729 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_1  | 2020-04-17 18:27:48,984 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0181CC1CA0BD-StateMachineUpdater] ERROR ratis.ContainerStateMachine: Failed to take snapshot  for group-0181CC1CA0BD as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
kdc_1       | Apr 17 18:28:06 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587148070, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:54,740 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Failed to create pipeline of type RATIS and factor ONE. Exception: Cannot create pipeline of factor 1 using 0 nodes. Used 1 nodes. Healthy nodes 1
datanode_3  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.handle(KeyValueHandler.java:152)
om_1        | 2020-04-17 18:27:52,672 [IPC Server handler 67 on 9862] INFO volume.OMVolumeCreateRequest: created volume:04711-rpcwoport2 for user:testuser/scm@EXAMPLE.COM
datanode_2  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatchRequest(HddsDispatcher.java:250)
recon_1     | 2020-04-17 18:25:19,800 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 2020-04-17 18:27:48,984 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0181CC1CA0BD-StateMachineUpdater] ERROR impl.StateMachineUpdater: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0181CC1CA0BD-StateMachineUpdater: Failed to take snapshot
kdc_1       | Apr 17 18:28:08 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587148070, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:54,829 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Sending CreatePipelineCommand for pipeline:PipelineID=ab3c73f0-0ac8-42e4-ab42-e3a4286dace8 to datanode:0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_3  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.createContainer(HddsDispatcher.java:414)
om_1        | 2020-04-17 18:27:54,579 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatch(HddsDispatcher.java:162)
recon_1     | 2020-04-17 18:25:19,815 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_1  | org.apache.ratis.protocol.StateMachineException: Failed to take snapshot  for group-0181CC1CA0BD as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
kdc_1       | Apr 17 18:28:08 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 172.24.0.6: ISSUE: authtime 1587148088, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for krbtgt/EXAMPLE.COM@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:54,830 [RatisPipelineUtilsThread] INFO pipeline.PipelineStateManager: Created pipeline Pipeline[ Id: ab3c73f0-0ac8-42e4-ab42-e3a4286dace8, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:ONE, State:ALLOCATED, leaderId:null, CreationTimestamp2020-04-17T18:23:54.829815Z]
datanode_3  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatchRequest(HddsDispatcher.java:250)
om_1        | 2020-04-17 18:27:54,587 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.dispatchCommand(ContainerStateMachine.java:402)
recon_1     | 2020-04-17 18:25:25,452 [RatisPipelineUtilsThread] INFO pipeline.PipelineStateManager: Pipeline Pipeline[ Id: c6484984-fa4c-47a5-afdd-2a8041abd0b3, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:3989634e-60c9-4e5a-8523-9408dc0a802d, CreationTimestamp2020-04-17T18:23:54.997Z] removed from db
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.takeSnapshot(ContainerStateMachine.java:288)
kdc_1       | Apr 17 18:28:10 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587148088, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:54,830 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Failed to create pipeline of type RATIS and factor ONE. Exception: Cannot create pipeline of factor 1 using 0 nodes. Used 2 nodes. Healthy nodes 2
datanode_3  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatch(HddsDispatcher.java:162)
om_1        | 2020-04-17 18:27:56,914 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.runCommand(ContainerStateMachine.java:412)
recon_1     | 2020-04-17 18:25:25,549 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: c6484984-fa4c-47a5-afdd-2a8041abd0b3, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:3989634e-60c9-4e5a-8523-9408dc0a802d, CreationTimestamp2020-04-17T18:23:54.997Z]
datanode_1  | 	at org.apache.ratis.server.impl.StateMachineUpdater.takeSnapshot(StateMachineUpdater.java:258)
kdc_1       | Apr 17 18:28:12 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587148088, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:54,823 [IPC Server handler 12 on 9861] INFO net.NetworkTopology: Added a new node: /default-rack/0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.dispatchCommand(ContainerStateMachine.java:402)
om_1        | 2020-04-17 18:27:56,928 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.lambda$handleWriteChunk$2(ContainerStateMachine.java:447)
recon_1     | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 not found
datanode_1  | 	at org.apache.ratis.server.impl.StateMachineUpdater.checkAndTakeSnapshot(StateMachineUpdater.java:250)
kdc_1       | Apr 17 18:28:15 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587148088, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:54,832 [IPC Server handler 12 on 9861] INFO node.SCMNodeManager: Registered Data node : 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106649330073}
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.runCommand(ContainerStateMachine.java:412)
om_1        | 2020-04-17 18:27:59,070 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_1  | 	at org.apache.ratis.server.impl.StateMachineUpdater.run(StateMachineUpdater.java:169)
kdc_1       | Apr 17 18:28:17 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587148088, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:54,839 [EventQueue-NodeRegistrationContainerReportForContainerSafeModeRule] INFO safemode.SCMSafeModeManager: ContainerSafeModeRule rule is successfully validated
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.lambda$handleWriteChunk$2(ContainerStateMachine.java:447)
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
om_1        | 2020-04-17 18:27:59,081 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
datanode_3  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
kdc_1       | Apr 17 18:28:19 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587148088, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:54,840 [EventQueue-NodeRegistrationContainerReportForDataNodeSafeModeRule] INFO safemode.SCMSafeModeManager: SCM in safe mode. 2 DataNodes registered, 3 required.
datanode_1  | 2020-04-17 18:27:48,984 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0181CC1CA0BD-StateMachineUpdater] ERROR ratis.ContainerStateMachine: Failed to take snapshot  for group-0181CC1CA0BD as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
datanode_2  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
om_1        | 2020-04-17 18:28:01,500 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
kdc_1       | Apr 17 18:28:22 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587148088, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:54,974 [IPC Server handler 46 on 9861] INFO net.NetworkTopology: Added a new node: /default-rack/f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_1  | 2020-04-17 18:27:48,984 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0181CC1CA0BD-StateMachineUpdater] ERROR impl.StateMachineUpdater: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0181CC1CA0BD-StateMachineUpdater: Failed to take snapshot
datanode_2  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
om_1        | 2020-04-17 18:28:01,516 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
kdc_1       | Apr 17 18:28:24 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587148088, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:54,975 [IPC Server handler 46 on 9861] INFO node.SCMNodeManager: Registered Data node : f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106586728310}
datanode_1  | org.apache.ratis.protocol.StateMachineException: Failed to take snapshot  for group-0181CC1CA0BD as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
recon_1     | 	at org.apache.hadoop.ozone.recon.scm.ReconPipelineManager.destroyPipeline(ReconPipelineManager.java:74)
om_1        | 2020-04-17 18:28:03,414 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for recon/recon@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | Caused by: org.apache.hadoop.util.DiskChecker$DiskOutOfSpaceException: Out of space: The volume with the most available space (=645910528 B) is less than the container size (=1073741824 B).
kdc_1       | Apr 17 18:28:26 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587148088, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:54,975 [EventQueue-NodeRegistrationContainerReportForContainerSafeModeRule] INFO safemode.SCMSafeModeManager: ContainerSafeModeRule rule is successfully validated
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.takeSnapshot(ContainerStateMachine.java:288)
datanode_2  | Caused by: org.apache.hadoop.util.DiskChecker$DiskOutOfSpaceException: Out of space: The volume with the most available space (=497799168 B) is less than the container size (=1073741824 B).
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
om_1        | 2020-04-17 18:28:03,423 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for recon/recon@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
datanode_3  | 	at org.apache.hadoop.ozone.container.common.volume.RoundRobinVolumeChoosingPolicy.chooseVolume(RoundRobinVolumeChoosingPolicy.java:77)
kdc_1       | Apr 17 18:28:27 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 172.24.0.6: ISSUE: authtime 1587148107, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for krbtgt/EXAMPLE.COM@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:54,975 [EventQueue-NodeRegistrationContainerReportForDataNodeSafeModeRule] INFO safemode.SCMSafeModeManager: SCM in safe mode. 3 DataNodes registered, 3 required.
datanode_1  | 	at org.apache.ratis.server.impl.StateMachineUpdater.takeSnapshot(StateMachineUpdater.java:258)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.volume.RoundRobinVolumeChoosingPolicy.chooseVolume(RoundRobinVolumeChoosingPolicy.java:77)
recon_1     | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
om_1        | 2020-04-17 18:28:03,763 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueContainer.create(KeyValueContainer.java:124)
kdc_1       | Apr 17 18:28:29 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587148107, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:54,984 [EventQueue-NodeRegistrationContainerReportForDataNodeSafeModeRule] INFO safemode.SCMSafeModeManager: DataNodeSafeModeRule rule is successfully validated
datanode_1  | 	at org.apache.ratis.server.impl.StateMachineUpdater.checkAndTakeSnapshot(StateMachineUpdater.java:250)
datanode_2  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueContainer.create(KeyValueContainer.java:124)
recon_1     | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
om_1        | 2020-04-17 18:28:03,789 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
datanode_3  | 	... 13 more
kdc_1       | Apr 17 18:30:03 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 172.24.0.6: ISSUE: authtime 1587148203, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for krbtgt/EXAMPLE.COM@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:54,984 [EventQueue-NodeRegistrationContainerReportForDataNodeSafeModeRule] INFO safemode.SCMSafeModeManager: All SCM safe mode pre check rules have passed
datanode_1  | 	at org.apache.ratis.server.impl.StateMachineUpdater.run(StateMachineUpdater.java:172)
datanode_2  | 	... 13 more
recon_1     | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
om_1        | 2020-04-17 18:28:06,076 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 2020-04-17 18:24:19,248 [ChunkWriter-18-0] INFO impl.HddsDispatcher: Operation: WriteChunk , Trace ID: aa474c9f812cac7a:c083a61f31ca1fef:aa474c9f812cac7a:0 , Message: ContainerID 1 creation failed , Result: DISK_OUT_OF_SPACE , StorageContainerException Occurred.
kdc_1       | Apr 17 18:30:05 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587148203, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:54,985 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Sending CreatePipelineCommand for pipeline:PipelineID=e899e35a-1e99-408d-91af-60084463ba1a to datanode:f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 2020-04-17 18:26:17,902 [ChunkWriter-56-0] INFO impl.HddsDispatcher: Operation: WriteChunk , Trace ID: 1ebccd3f95d7d6a9:57399964959fe306:1ebccd3f95d7d6a9:0 , Message: ContainerID 2 creation failed , Result: DISK_OUT_OF_SPACE , StorageContainerException Occurred.
recon_1     | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
om_1        | 2020-04-17 18:28:06,091 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
datanode_3  | org.apache.hadoop.hdds.scm.container.common.helpers.StorageContainerException: ContainerID 1 creation failed
kdc_1       | Apr 17 18:30:07 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587148203, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:54,985 [RatisPipelineUtilsThread] INFO pipeline.PipelineStateManager: Created pipeline Pipeline[ Id: e899e35a-1e99-408d-91af-60084463ba1a, Nodes: f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:ONE, State:ALLOCATED, leaderId:null, CreationTimestamp2020-04-17T18:23:54.985161Z]
datanode_1  | 2020-04-17 18:27:48,985 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0181CC1CA0BD-StateMachineUpdater] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.state_machine.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0181CC1CA0BD
datanode_2  | org.apache.hadoop.hdds.scm.container.common.helpers.StorageContainerException: ContainerID 2 creation failed
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
om_1        | 2020-04-17 18:28:08,198 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatchRequest(HddsDispatcher.java:254)
kdc_1       | Apr 17 18:30:09 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587148203, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:54,986 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Failed to create pipeline of type RATIS and factor ONE. Exception: Cannot create pipeline of factor 1 using 0 nodes. Used 3 nodes. Healthy nodes 3
datanode_1  | 2020-04-17 18:27:48,985 [Command processor thread] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0181CC1CA0BD: closes. applyIndex: 0
datanode_2  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatchRequest(HddsDispatcher.java:254)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
om_1        | 2020-04-17 18:28:08,256 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
datanode_3  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatch(HddsDispatcher.java:162)
kdc_1       | Apr 17 18:30:12 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587148203, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:54,986 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Failed to create pipeline of type RATIS and factor ONE. Exception: Cannot create pipeline of factor 1 using 0 nodes. Used 3 nodes. Healthy nodes 3
datanode_1  | 2020-04-17 18:27:48,985 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0181CC1CA0BD-SegmentedRaftLogWorker] INFO segmented.SegmentedRaftLogWorker: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0181CC1CA0BD-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
datanode_2  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatch(HddsDispatcher.java:162)
recon_1     | 	at java.base/java.lang.Thread.run(Thread.java:834)
om_1        | 2020-04-17 18:28:10,710 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.dispatchCommand(ContainerStateMachine.java:402)
kdc_1       | Apr 17 18:30:14 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587148203, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:54,997 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Sending CreatePipelineCommand for pipeline:PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 to datanode:3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_1  | 2020-04-17 18:27:48,991 [Command processor thread] INFO segmented.SegmentedRaftLogWorker: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0181CC1CA0BD-SegmentedRaftLogWorker close()
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.dispatchCommand(ContainerStateMachine.java:402)
recon_1     | 2020-04-17 18:25:25,609 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: c6484984-fa4c-47a5-afdd-2a8041abd0b3, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:3989634e-60c9-4e5a-8523-9408dc0a802d, CreationTimestamp2020-04-17T18:23:54.997Z]
om_1        | 2020-04-17 18:28:10,723 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.runCommand(ContainerStateMachine.java:412)
kdc_1       | Apr 17 18:30:16 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587148203, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:55,000 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Sending CreatePipelineCommand for pipeline:PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 to datanode:0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_1  | 2020-04-17 18:27:48,994 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.log_worker.0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.runCommand(ContainerStateMachine.java:412)
recon_1     | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 not found
om_1        | 2020-04-17 18:28:12,976 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.lambda$handleWriteChunk$2(ContainerStateMachine.java:447)
kdc_1       | Apr 17 18:30:19 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587148203, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:55,000 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Sending CreatePipelineCommand for pipeline:PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 to datanode:f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.lambda$handleWriteChunk$2(ContainerStateMachine.java:447)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_1  | 2020-04-17 18:27:48,994 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.leader_election.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0181CC1CA0BD
om_1        | 2020-04-17 18:28:12,988 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
kdc_1       | Apr 17 18:30:21 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587148203, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:55,003 [RatisPipelineUtilsThread] INFO pipeline.PipelineStateManager: Created pipeline Pipeline[ Id: c6484984-fa4c-47a5-afdd-2a8041abd0b3, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:ALLOCATED, leaderId:null, CreationTimestamp2020-04-17T18:23:54.997088Z]
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
datanode_1  | 2020-04-17 18:27:48,994 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.server.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0181CC1CA0BD
om_1        | 2020-04-17 18:28:15,273 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
kdc_1       | Apr 17 18:30:23 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587148203, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:55,004 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Failed to create pipeline of type RATIS and factor THREE. Exception: Pipeline creation failed because nodes are engaged in other pipelines and every node can only be engaged in max 2 pipelines. Required 3. Found 0
datanode_2  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
datanode_1  | 2020-04-17 18:27:48,998 [Command processor thread] INFO commandhandler.ClosePipelineCommandHandler: Close Pipeline #id: "31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd"
om_1        | 2020-04-17 18:28:15,290 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
datanode_3  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
kdc_1       | Apr 17 18:30:26 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587148203, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:55,757 [Socket Reader #1 for port 9961] INFO ipc.Server: Auth successful for HTTP/scm@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
datanode_1  |  command on datanode #0086d012-6f96-4817-8e1b-94f6eaa443bc.
om_1        | 2020-04-17 18:28:15,569 [IPC Server handler 48 on 9862] ERROR acl.OMBucketAddAclRequest: Add acl [user:superuser1:rwxy[ACCESS]] to path /04711-rpcwoport2/bb1 failed, because acl already exist
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
kdc_1       | Apr 17 18:32:00 kdc krb5kdc[8](info): AS_REQ (8 etypes {18 17 20 19 16 23 25 26}) 172.24.0.6: ISSUE: authtime 1587148320, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for krbtgt/EXAMPLE.COM@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:55,799 [Socket Reader #1 for port 9961] INFO authorize.ServiceAuthorizationManager: Authorization successful for HTTP/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.hdds.protocol.SCMSecurityProtocol
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
recon_1     | 	at org.apache.hadoop.ozone.recon.scm.ReconPipelineManager.destroyPipeline(ReconPipelineManager.java:74)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
om_1        | 2020-04-17 18:28:17,391 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 2020-04-17 18:24:19,287 [ChunkWriter-18-0] ERROR ratis.ContainerStateMachine: group-2A8041ABD0B3: writeChunk writeStateMachineData failed: blockIdcontainerID: 1
kdc_1       | Apr 17 18:32:02 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587148320, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:56,048 [Socket Reader #1 for port 9860] INFO ipc.Server: Auth successful for HTTP/scm@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | 2020-04-17 18:26:17,904 [ChunkWriter-56-0] ERROR ratis.ContainerStateMachine: group-0181CC1CA0BD: writeChunk writeStateMachineData failed: blockIdcontainerID: 2
recon_1     | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
datanode_1  | 2020-04-17 18:27:48,999 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: addNew group-53471EA74967:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] returns group-53471EA74967:java.util.concurrent.CompletableFuture@17dc3461[Not completed]
om_1        | 2020-04-17 18:28:17,443 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
datanode_3  | localID: 104015321989251072
kdc_1       | Apr 17 18:32:04 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587148320, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:56,052 [Socket Reader #1 for port 9860] INFO authorize.ServiceAuthorizationManager: Authorization successful for HTTP/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocol
datanode_2  | localID: 104015329795637249
recon_1     | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
datanode_1  | 2020-04-17 18:27:49,002 [pool-70-thread-1] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc: new RaftServerImpl for group-53471EA74967:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] with ContainerStateMachine:uninitialized
datanode_1  | 2020-04-17 18:27:49,002 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.min = 5s (custom)
datanode_3  | blockCommitSequenceId: 0
kdc_1       | Apr 17 18:32:06 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587148320, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:56,938 [Socket Reader #1 for port 9863] INFO ipc.Server: Auth successful for om/om@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | blockCommitSequenceId: 0
datanode_1  | 2020-04-17 18:27:49,002 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.max = 5200ms (custom)
om_1        | 2020-04-17 18:28:19,947 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
recon_1     | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_3  |  logIndex 1 chunkName 104015321989251072_chunk_1 Error message: ContainerID 1 creation failed Container Result: DISK_OUT_OF_SPACE
kdc_1       | Apr 17 18:32:09 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587148320, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:56,980 [Socket Reader #1 for port 9863] INFO authorize.ServiceAuthorizationManager: Authorization successful for om/om@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.hdds.scm.protocol.ScmBlockLocationProtocol
datanode_2  |  logIndex 1 chunkName 104015329795637249_chunk_1 Error message: ContainerID 2 creation failed Container Result: DISK_OUT_OF_SPACE
datanode_1  | 2020-04-17 18:27:49,002 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpcslowness.timeout = 300s (custom)
om_1        | 2020-04-17 18:28:19,963 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
recon_1     | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
datanode_3  | 2020-04-17 18:24:19,311 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-SegmentedRaftLogWorker] ERROR ratis.XceiverServerRatis: pipeline Action CLOSE on pipeline PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3.Reason : ContainerID 1 creation failed
kdc_1       | Apr 17 18:32:11 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587148320, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:58,048 [EventQueue-PipelineReportForPipelineReportHandler] INFO pipeline.PipelineStateManager: Pipeline Pipeline[ Id: 9160856b-1871-4dde-aa55-3a862f5e35eb, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:ONE, State:ALLOCATED, leaderId:3989634e-60c9-4e5a-8523-9408dc0a802d, CreationTimestamp2020-04-17T18:23:54.685879Z] moved to OPEN state
datanode_2  | 2020-04-17 18:26:17,907 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-SegmentedRaftLogWorker] ERROR ratis.XceiverServerRatis: pipeline Action CLOSE on pipeline PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd.Reason : ContainerID 2 creation failed
datanode_1  | 2020-04-17 18:27:49,002 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.sleep.deviation.threshold = 300 (default)
om_1        | 2020-04-17 18:28:22,150 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_3  | 2020-04-17 18:24:19,546 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-SegmentedRaftLogWorker] ERROR ratis.XceiverServerRatis: pipeline Action CLOSE on pipeline PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3.Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-FAB0287C2AC1, cid=1
kdc_1       | Apr 17 18:32:14 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587148320, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:58,058 [EventQueue-OpenPipelineForHealthyPipelineSafeModeRule] INFO safemode.SCMSafeModeManager: SCM in safe mode. Healthy pipelines reported count is 0, required healthy pipeline reported count is 1
datanode_2  | 2020-04-17 18:26:17,937 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-SegmentedRaftLogWorker] ERROR ratis.XceiverServerRatis: pipeline Action CLOSE on pipeline PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd.Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-C694AA0D4B95, cid=1
datanode_1  | 2020-04-17 18:27:49,003 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.install.snapshot.enabled = false (custom)
om_1        | 2020-04-17 18:28:22,162 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_3  | 	 State Machine: cmdType: WriteChunk traceID: "aa474c9f812cac7a:c083a61f31ca1fef:aa474c9f812cac7a:0" containerID: 1 datanodeUuid: "3989634e-60c9-4e5a-8523-9408dc0a802d" pipelineID: "c6484984-fa4c-47a5-afdd-2a8041abd0b3" writeChunk { blockID { containerID: 1 localID: 104015321989251072 blockCommitSequenceId: 0 } chunkData { chunkName: "104015321989251072_chunk_1" offset: 0 len: 10240 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: "\334],\220" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDEgbG9jSUQ6IDEwNDAxNTMyMTk4OTI1MTA3Mhjy9KL0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BAGROR-2m334gPvEwaQK3h4A1G6wpETxvuYeog10z9pNx-0XjzmnkcYO1PHHn0KJP-ce_4ZabjuUOP0KkKvoFojN-YQ9VkdnsyZXjJrZusLxfrdEr22jdEXZraXyVv_36H56sCH5ifpKoDNL_ANPymE3vNNG1g4fEM5jbsHgv01MPGAJm1YZIU1LPVVfjT_6YZR14unkpWq8xk4DBWFIFFzVvp2oMnlMIP-62cShaLzHHB2g6jZxEZRW8zlgHbyEoFVSfOehqlNmhDRriXhbsRSz771sLQDplmlRnkFVYv8kUJI7m_UXBUsA4AMUs9z1o_Kn0VCe5AsqOQERfPiP0hEkQSEREU19CTE9DS19UT0tFTiJjb25JRDogMSBsb2NJRDogMTA0MDE1MzIxOTg5MjUxMDcy", container path=nonexistent
kdc_1       | Apr 17 18:32:16 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587148320, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:58,059 [EventQueue-OpenPipelineForOneReplicaPipelineSafeModeRule] INFO safemode.SCMSafeModeManager: AtleastOneDatanodeReportedRule rule is successfully validated
datanode_2  | 	 State Machine: cmdType: WriteChunk traceID: "1ebccd3f95d7d6a9:57399964959fe306:1ebccd3f95d7d6a9:0" containerID: 2 datanodeUuid: "0086d012-6f96-4817-8e1b-94f6eaa443bc" pipelineID: "31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd" writeChunk { blockID { containerID: 2 localID: 104015329795637249 blockCommitSequenceId: 0 } chunkData { chunkName: "104015329795637249_chunk_1" offset: 0 len: 17540 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: " wi\267" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDIgbG9jSUQ6IDEwNDAxNTMyOTc5NTYzNzI0ORisl6r0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BABzNCbq3Zmvfa3yTq6FmM7apbRJBLNj70Fdy71QfyNGPUI_zSHiJgowFwauC0MUx8yhkvrgwvdo-uu1lAA1B0edRqZSMq2oHqNg-tDm0ooQOKsasGPDtYicaGKLPS5N0Rf7ilWHxlql-PDYb1vkrPdV3FFltubzTfhs9bq3mHNm_OCvY13At7kMafgSZCOBh5l2sCCxQ_pB1ODPiIq-HeF0bqFw0FJRTYMKfKKjgOQ7er_5UNoZgfPZHWkNXzMSZ9R8OYzJBH3oGUH7HVQeMH1qy3GeqsB8hpJ3ZJvgQcPeQzDWHJ9N59nIBEqmBn3h_7QDhpNuW60lPC2a0oRfxQtwQSEREU19CTE9DS19UT0tFTiJjb25JRDogMiBsb2NJRDogMTA0MDE1MzI5Nzk1NjM3MjQ5", container path=nonexistent
datanode_1  | 2020-04-17 18:27:49,003 [pool-70-thread-1] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-53471EA74967: ConfigurationManager, init=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null, confs=<EMPTY_MAP>
om_1        | 2020-04-17 18:28:24,548 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
recon_1     | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 2020-04-17 18:24:29,405 [Command processor thread] ERROR commandhandler.CloseContainerCommandHandler: Container #1 does not exist in datanode. Container close failed.
kdc_1       | Apr 17 18:32:18 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587148320, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:58,109 [Socket Reader #1 for port 9860] INFO ipc.Server: Auth successful for recon/recon@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | 2020-04-17 18:26:21,695 [Command processor thread] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: remove group-2A8041ABD0B3:null
datanode_1  | 2020-04-17 18:27:49,003 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.storage.dir = [/data/metadata/ratis] (custom)
om_1        | 2020-04-17 18:28:24,576 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
recon_1     | 2020-04-17 18:25:25,697 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: c6484984-fa4c-47a5-afdd-2a8041abd0b3, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:3989634e-60c9-4e5a-8523-9408dc0a802d, CreationTimestamp2020-04-17T18:23:54.997Z]
datanode_3  | 2020-04-17 18:25:18,783 [java.util.concurrent.ThreadPoolExecutor$Worker@28a2e3bb[State = -1, empty queue]] WARN server.GrpcLogAppender: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3->f2e775cd-89a9-41b5-a9e0-4408e0d60689-GrpcLogAppender:  appendEntries Timeout, request=AppendEntriesRequest:cid=7,entriesCount=1,lastEntry=(t:1, i:1)
kdc_1       | Apr 17 18:32:20 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587148320, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:58,141 [Socket Reader #1 for port 9860] INFO authorize.ServiceAuthorizationManager: Authorization successful for recon/recon@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocol
datanode_2  | 2020-04-17 18:26:21,695 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "c6484984-fa4c-47a5-afdd-2a8041abd0b3"
datanode_1  | 2020-04-17 18:27:49,003 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.corruption.policy = EXCEPTION (default)
om_1        | 2020-04-17 18:28:26,747 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
recon_1     | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 not found
datanode_3  | 2020-04-17 18:25:18,816 [java.util.concurrent.ThreadPoolExecutor$Worker@28a2e3bb[State = -1, empty queue]] WARN server.GrpcLogAppender: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3->0086d012-6f96-4817-8e1b-94f6eaa443bc-GrpcLogAppender:  appendEntries Timeout, request=AppendEntriesRequest:cid=7,entriesCount=1,lastEntry=(t:1, i:1)
kdc_1       | Apr 17 18:32:23 kdc krb5kdc[8](info): TGS_REQ (6 etypes {18 17 20 19 16 23}) 172.24.0.6: ISSUE: authtime 1587148320, etypes {rep=18 tkt=18 ses=18}, testuser/scm@EXAMPLE.COM for om/om@EXAMPLE.COM
scm_1       | 2020-04-17 18:23:58,320 [EventQueue-PipelineReportForPipelineReportHandler] INFO pipeline.PipelineStateManager: Pipeline Pipeline[ Id: ab3c73f0-0ac8-42e4-ab42-e3a4286dace8, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:ONE, State:ALLOCATED, leaderId:0086d012-6f96-4817-8e1b-94f6eaa443bc, CreationTimestamp2020-04-17T18:23:54.829815Z] moved to OPEN state
datanode_2  | 
datanode_1  | 2020-04-17 18:27:49,004 [pool-70-thread-1] INFO storage.RaftStorageDirectory: The storage directory /data/metadata/ratis/33e2f66f-a610-4776-a5ba-53471ea74967 does not exist. Creating ...
om_1        | 2020-04-17 18:28:26,759 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_3  | 2020-04-17 18:25:18,853 [java.util.concurrent.ThreadPoolExecutor$Worker@28a2e3bb[State = -1, empty queue]] WARN server.GrpcLogAppender: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3->f2e775cd-89a9-41b5-a9e0-4408e0d60689-GrpcLogAppender:  appendEntries Timeout, request=AppendEntriesRequest:cid=8,entriesCount=1,lastEntry=(t:1, i:2)
datanode_1  | 2020-04-17 18:27:49,008 [pool-70-thread-1] INFO storage.RaftStorageDirectory: Lock on /data/metadata/ratis/33e2f66f-a610-4776-a5ba-53471ea74967/in_use.lock acquired by nodename 6@1e870b3d5d4c
om_1        | 2020-04-17 18:28:29,161 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
datanode_3  | 2020-04-17 18:25:18,859 [java.util.concurrent.ThreadPoolExecutor$Worker@28a2e3bb[State = -1, empty queue]] WARN server.GrpcLogAppender: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3->0086d012-6f96-4817-8e1b-94f6eaa443bc-GrpcLogAppender:  appendEntries Timeout, request=AppendEntriesRequest:cid=8,entriesCount=1,lastEntry=(t:1, i:2)
datanode_2  | java.io.IOException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-2A8041ABD0B3 not found.
datanode_1  | 2020-04-17 18:27:49,010 [pool-70-thread-1] INFO storage.RaftStorage: Storage directory /data/metadata/ratis/33e2f66f-a610-4776-a5ba-53471ea74967 has been successfully formatted.
om_1        | 2020-04-17 18:28:29,172 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
scm_1       | 2020-04-17 18:23:58,320 [EventQueue-OpenPipelineForHealthyPipelineSafeModeRule] INFO safemode.SCMSafeModeManager: SCM in safe mode. Healthy pipelines reported count is 0, required healthy pipeline reported count is 1
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_3  | 2020-04-17 18:25:50,540 [Command processor thread] INFO impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: remove    LEADER 3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3:t1, leader=3989634e-60c9-4e5a-8523-9408dc0a802d, voted=3989634e-60c9-4e5a-8523-9408dc0a802d, raftlog=3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-SegmentedRaftLog:OPENED:c0,f0,i2, conf=0: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null RUNNING
datanode_1  | 2020-04-17 18:27:49,011 [pool-70-thread-1] INFO ratis.ContainerStateMachine: group-53471EA74967: The snapshot info is null. Setting the last applied indexto:(t:0, i:~)
om_1        | 2020-04-17 18:29:03,575 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for recon/recon@EXAMPLE.COM (auth:KERBEROS)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
scm_1       | 2020-04-17 18:23:58,320 [EventQueue-OpenPipelineForOneReplicaPipelineSafeModeRule] INFO safemode.SCMSafeModeManager: AtleastOneDatanodeReportedRule rule is successfully validated
datanode_3  | 2020-04-17 18:25:50,542 [Command processor thread] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3: shutdown
datanode_1  | 2020-04-17 18:27:49,011 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.notification.no-leader.timeout = 60s (default)
om_1        | 2020-04-17 18:29:03,585 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for recon/recon@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
recon_1     | 	at org.apache.hadoop.ozone.recon.scm.ReconPipelineManager.destroyPipeline(ReconPipelineManager.java:74)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
scm_1       | 2020-04-17 18:23:59,014 [EventQueue-PipelineReportForPipelineReportHandler] INFO pipeline.PipelineStateManager: Pipeline Pipeline[ Id: e899e35a-1e99-408d-91af-60084463ba1a, Nodes: f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:ONE, State:ALLOCATED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:23:54.985161Z] moved to OPEN state
datanode_3  | 2020-04-17 18:25:50,542 [Command processor thread] INFO util.JmxRegister: Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-2A8041ABD0B3,id=3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_1  | 2020-04-17 18:27:49,011 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.use.memory = false (default)
om_1        | 2020-04-17 18:30:02,852 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_3  | 2020-04-17 18:25:50,543 [Command processor thread] INFO impl.RoleInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d: shutdown LeaderState
datanode_1  | 2020-04-17 18:27:49,012 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.purge.gap = 1000000 (custom)
om_1        | 2020-04-17 18:30:02,863 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
recon_1     | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
scm_1       | 2020-04-17 18:23:59,014 [EventQueue-OpenPipelineForHealthyPipelineSafeModeRule] INFO safemode.SCMSafeModeManager: SCM in safe mode. Healthy pipelines reported count is 0, required healthy pipeline reported count is 1
datanode_3  | 2020-04-17 18:25:50,544 [org.apache.ratis.server.impl.LogAppender$AppenderDaemon$$Lambda$464/0x0000000840603040@784b23bb] WARN server.GrpcLogAppender: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3->0086d012-6f96-4817-8e1b-94f6eaa443bc-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
datanode_1  | 2020-04-17 18:27:49,012 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
om_1        | 2020-04-17 18:30:03,711 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for recon/recon@EXAMPLE.COM (auth:KERBEROS)
recon_1     | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 2020-04-17 18:23:59,014 [EventQueue-OpenPipelineForOneReplicaPipelineSafeModeRule] INFO safemode.SCMSafeModeManager: AtleastOneDatanodeReportedRule rule is successfully validated
datanode_3  | 2020-04-17 18:25:50,547 [Command processor thread] INFO impl.PendingRequests: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-PendingRequests: sendNotLeaderResponses
datanode_1  | 2020-04-17 18:27:49,012 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
om_1        | 2020-04-17 18:30:03,717 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for recon/recon@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
recon_1     | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_2  | Caused by: org.apache.ratis.protocol.GroupMismatchException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-2A8041ABD0B3 not found.
scm_1       | 2020-04-17 18:24:03,838 [EventQueue-PipelineReportForPipelineReportHandler] INFO pipeline.PipelineStateManager: Pipeline Pipeline[ Id: c6484984-fa4c-47a5-afdd-2a8041abd0b3, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:ALLOCATED, leaderId:3989634e-60c9-4e5a-8523-9408dc0a802d, CreationTimestamp2020-04-17T18:23:54.997088Z] moved to OPEN state
datanode_3  | 2020-04-17 18:25:50,551 [org.apache.ratis.server.impl.LogAppender$AppenderDaemon$$Lambda$464/0x0000000840603040@62581846] WARN server.GrpcLogAppender: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3->f2e775cd-89a9-41b5-a9e0-4408e0d60689-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
datanode_1  | 2020-04-17 18:27:49,012 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.log_worker.0086d012-6f96-4817-8e1b-94f6eaa443bc
om_1        | 2020-04-17 18:30:05,095 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
recon_1     | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
scm_1       | 2020-04-17 18:24:03,838 [EventQueue-OpenPipelineForOneReplicaPipelineSafeModeRule] INFO safemode.SCMSafeModeManager: AtleastOneDatanodeReportedRule rule is successfully validated
datanode_3  | 2020-04-17 18:25:50,555 [grpc-default-executor-1] INFO server.GrpcLogAppender: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3->0086d012-6f96-4817-8e1b-94f6eaa443bc-AppendLogResponseHandler: follower responses appendEntries COMPLETED
datanode_1  | 2020-04-17 18:27:49,013 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.cache.num.max = 2 (custom)
om_1        | 2020-04-17 18:30:05,103 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
scm_1       | 2020-04-17 18:24:03,839 [EventQueue-OpenPipelineForHealthyPipelineSafeModeRule] INFO safemode.SCMSafeModeManager: SCM in safe mode. Healthy pipelines reported count is 1, required healthy pipeline reported count is 1
datanode_3  | 2020-04-17 18:25:50,562 [grpc-default-executor-0] INFO server.GrpcLogAppender: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3->f2e775cd-89a9-41b5-a9e0-4408e0d60689-AppendLogResponseHandler: follower responses appendEntries COMPLETED
datanode_1  | 2020-04-17 18:27:49,013 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: new 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-53471EA74967-SegmentedRaftLogWorker for RaftStorage:Storage Directory /data/metadata/ratis/33e2f66f-a610-4776-a5ba-53471ea74967
om_1        | 2020-04-17 18:30:07,399 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
scm_1       | 2020-04-17 18:24:03,864 [EventQueue-OpenPipelineForHealthyPipelineSafeModeRule] INFO safemode.SCMSafeModeManager: HealthyPipelineSafeModeRule rule is successfully validated
datanode_3  | 2020-04-17 18:25:50,576 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.log_appender.3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3
datanode_1  | 2020-04-17 18:27:49,013 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.byte-limit = 2147483647 (custom)
om_1        | 2020-04-17 18:30:07,426 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
recon_1     | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
scm_1       | 2020-04-17 18:24:03,864 [EventQueue-OpenPipelineForHealthyPipelineSafeModeRule] INFO safemode.SCMSafeModeManager: ScmSafeModeManager, all rules are successfully validated
datanode_3  | 2020-04-17 18:25:50,576 [Command processor thread] INFO impl.StateMachineUpdater: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-StateMachineUpdater: set stopIndex = 0
datanode_1  | 2020-04-17 18:27:49,013 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.element-limit = 1024 (custom)
om_1        | 2020-04-17 18:30:07,745 [IPC Server handler 61 on 9862] INFO volume.OMVolumeCreateRequest: created volume:04711-rpcwport for user:testuser/scm@EXAMPLE.COM
recon_1     | 2020-04-17 18:25:25,706 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: c6484984-fa4c-47a5-afdd-2a8041abd0b3, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:3989634e-60c9-4e5a-8523-9408dc0a802d, CreationTimestamp2020-04-17T18:23:54.997Z]
datanode_2  | 	... 4 more
scm_1       | 2020-04-17 18:24:03,864 [EventQueue-OpenPipelineForHealthyPipelineSafeModeRule] INFO safemode.SCMSafeModeManager: SCM exiting safe mode.
scm_1       | 2020-04-17 18:24:04,541 [Socket Reader #1 for port 9961] INFO ipc.Server: Auth successful for HTTP/scm@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 2020-04-17 18:27:49,014 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
om_1        | 2020-04-17 18:30:09,658 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
recon_1     | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 not found
scm_1       | 2020-04-17 18:24:04,556 [Socket Reader #1 for port 9961] INFO authorize.ServiceAuthorizationManager: Authorization successful for HTTP/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.hdds.protocol.SCMSecurityProtocol
datanode_3  | 2020-04-17 18:25:50,577 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-StateMachineUpdater] ERROR ratis.ContainerStateMachine: Failed to take snapshot  for group-2A8041ABD0B3 as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
datanode_2  | 2020-04-17 18:26:21,696 [Command processor thread] ERROR commandhandler.CloseContainerCommandHandler: Container #2 does not exist in datanode. Container close failed.
datanode_1  | 2020-04-17 18:27:49,014 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.preallocated.size = 16384 (custom)
om_1        | 2020-04-17 18:30:09,667 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
scm_1       | 2020-04-17 18:24:04,681 [Socket Reader #1 for port 9860] INFO ipc.Server: Auth successful for HTTP/scm@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 2020-04-17 18:25:50,585 [grpc-default-executor-1] INFO impl.FollowerInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3->0086d012-6f96-4817-8e1b-94f6eaa443bc: nextIndex: updateUnconditionally 3 -> 1
datanode_2  | 2020-04-17 18:27:17,907 [java.util.concurrent.ThreadPoolExecutor$Worker@5dabbfc3[State = -1, empty queue]] WARN server.GrpcLogAppender: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD->3989634e-60c9-4e5a-8523-9408dc0a802d-GrpcLogAppender:  appendEntries Timeout, request=AppendEntriesRequest:cid=10,entriesCount=1,lastEntry=(t:1, i:1)
datanode_1  | 2020-04-17 18:27:49,014 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.write.buffer.size = 1048576 (custom)
om_1        | 2020-04-17 18:30:12,184 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
datanode_3  | 2020-04-17 18:25:50,577 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-StateMachineUpdater] ERROR impl.StateMachineUpdater: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-StateMachineUpdater: Failed to take snapshot
datanode_2  | 2020-04-17 18:27:17,975 [java.util.concurrent.ThreadPoolExecutor$Worker@5dabbfc3[State = -1, empty queue]] WARN server.GrpcLogAppender: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD->3989634e-60c9-4e5a-8523-9408dc0a802d-GrpcLogAppender:  appendEntries Timeout, request=AppendEntriesRequest:cid=11,entriesCount=1,lastEntry=(t:1, i:2)
datanode_1  | 2020-04-17 18:27:49,014 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.force.sync.num = 128 (default)
om_1        | 2020-04-17 18:30:12,200 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
scm_1       | 2020-04-17 18:24:04,684 [Socket Reader #1 for port 9860] INFO authorize.ServiceAuthorizationManager: Authorization successful for HTTP/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocol
datanode_3  | org.apache.ratis.protocol.StateMachineException: Failed to take snapshot  for group-2A8041ABD0B3 as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
datanode_2  | 2020-04-17 18:27:17,975 [java.util.concurrent.ThreadPoolExecutor$Worker@5dabbfc3[State = -1, empty queue]] WARN server.GrpcLogAppender: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD->0086d012-6f96-4817-8e1b-94f6eaa443bc-GrpcLogAppender:  appendEntries Timeout, request=AppendEntriesRequest:cid=10,entriesCount=1,lastEntry=(t:1, i:1)
datanode_1  | 2020-04-17 18:27:49,014 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync = true (default)
om_1        | 2020-04-17 18:30:14,508 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
scm_1       | 2020-04-17 18:24:16,624 [Socket Reader #1 for port 9860] INFO ipc.Server: Auth successful for om/om@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.takeSnapshot(ContainerStateMachine.java:288)
datanode_2  | 2020-04-17 18:27:17,976 [java.util.concurrent.ThreadPoolExecutor$Worker@5dabbfc3[State = -1, empty queue]] WARN server.GrpcLogAppender: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD->0086d012-6f96-4817-8e1b-94f6eaa443bc-GrpcLogAppender:  appendEntries Timeout, request=AppendEntriesRequest:cid=11,entriesCount=1,lastEntry=(t:1, i:2)
datanode_1  | 2020-04-17 18:27:49,014 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout = 10s (default)
om_1        | 2020-04-17 18:30:14,523 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
recon_1     | 	at org.apache.hadoop.ozone.recon.scm.ReconPipelineManager.destroyPipeline(ReconPipelineManager.java:74)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
datanode_3  | 	at org.apache.ratis.server.impl.StateMachineUpdater.takeSnapshot(StateMachineUpdater.java:258)
datanode_2  | 2020-04-17 18:27:48,943 [Command processor thread] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: remove    LEADER f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD:t1, leader=f2e775cd-89a9-41b5-a9e0-4408e0d60689, voted=f2e775cd-89a9-41b5-a9e0-4408e0d60689, raftlog=f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-SegmentedRaftLog:OPENED:c0,f0,i2, conf=0: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null RUNNING
datanode_1  | 2020-04-17 18:27:49,015 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
om_1        | 2020-04-17 18:30:16,872 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
recon_1     | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
scm_1       | 2020-04-17 18:24:16,626 [Socket Reader #1 for port 9860] INFO authorize.ServiceAuthorizationManager: Authorization successful for om/om@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocol
datanode_3  | 	at org.apache.ratis.server.impl.StateMachineUpdater.checkAndTakeSnapshot(StateMachineUpdater.java:250)
datanode_2  | 2020-04-17 18:27:48,943 [Command processor thread] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD: shutdown
datanode_1  | 2020-04-17 18:27:49,016 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.caching.enabled = true (custom)
om_1        | 2020-04-17 18:30:16,880 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
recon_1     | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
scm_1       | 2020-04-17 18:24:17,469 [Socket Reader #1 for port 9863] INFO ipc.Server: Auth successful for om/om@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 	at org.apache.ratis.server.impl.StateMachineUpdater.run(StateMachineUpdater.java:169)
datanode_2  | 2020-04-17 18:27:48,943 [Command processor thread] INFO util.JmxRegister: Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-0181CC1CA0BD,id=f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_1  | 2020-04-17 18:27:49,019 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-53471EA74967-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
om_1        | 2020-04-17 18:30:19,369 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
recon_1     | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
scm_1       | 2020-04-17 18:24:17,473 [Socket Reader #1 for port 9863] INFO authorize.ServiceAuthorizationManager: Authorization successful for om/om@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.hdds.scm.protocol.ScmBlockLocationProtocol
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 2020-04-17 18:27:48,943 [Command processor thread] INFO impl.RoleInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689: shutdown LeaderState
datanode_1  | 2020-04-17 18:27:49,029 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.enabled = true (custom)
om_1        | 2020-04-17 18:30:19,383 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
recon_1     | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
scm_1       | 2020-04-17 18:24:18,951 [Socket Reader #1 for port 9961] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 2020-04-17 18:25:50,591 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-StateMachineUpdater] ERROR ratis.ContainerStateMachine: Failed to take snapshot  for group-2A8041ABD0B3 as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
datanode_2  | 2020-04-17 18:27:48,945 [org.apache.ratis.server.impl.LogAppender$AppenderDaemon$$Lambda$546/0x000000084066fc40@145fc48] WARN server.GrpcLogAppender: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD->0086d012-6f96-4817-8e1b-94f6eaa443bc-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
datanode_1  | 2020-04-17 18:27:49,032 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
om_1        | 2020-04-17 18:30:21,581 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
scm_1       | 2020-04-17 18:24:18,976 [Socket Reader #1 for port 9961] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.hdds.protocol.SCMSecurityProtocol
datanode_3  | 2020-04-17 18:25:50,591 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-StateMachineUpdater] ERROR impl.StateMachineUpdater: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-StateMachineUpdater: Failed to take snapshot
datanode_2  | 2020-04-17 18:27:48,947 [org.apache.ratis.server.impl.LogAppender$AppenderDaemon$$Lambda$546/0x000000084066fc40@7c7dfdf] WARN server.GrpcLogAppender: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD->3989634e-60c9-4e5a-8523-9408dc0a802d-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
datanode_1  | 2020-04-17 18:27:49,032 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.retention.file.num = 5 (custom)
om_1        | 2020-04-17 18:30:21,595 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
scm_1       | 2020-04-17 18:24:19,249 [Socket Reader #1 for port 9961] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | org.apache.ratis.protocol.StateMachineException: Failed to take snapshot  for group-2A8041ABD0B3 as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
datanode_2  | 2020-04-17 18:27:48,951 [grpc-default-executor-2] INFO server.GrpcLogAppender: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD->0086d012-6f96-4817-8e1b-94f6eaa443bc-AppendLogResponseHandler: follower responses appendEntries COMPLETED
datanode_1  | 2020-04-17 18:27:49,033 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.retrycache.expirytime = 600000ms (custom)
om_1        | 2020-04-17 18:30:23,859 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
recon_1     | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 2020-04-17 18:24:19,255 [Socket Reader #1 for port 9961] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.hdds.protocol.SCMSecurityProtocol
datanode_2  | 2020-04-17 18:27:48,951 [Command processor thread] INFO impl.PendingRequests: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-PendingRequests: sendNotLeaderResponses
datanode_1  | 2020-04-17 18:27:49,033 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.leader_election.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-53471EA74967
om_1        | 2020-04-17 18:30:23,872 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
recon_1     | 2020-04-17 18:25:25,772 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: c6484984-fa4c-47a5-afdd-2a8041abd0b3, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:3989634e-60c9-4e5a-8523-9408dc0a802d, CreationTimestamp2020-04-17T18:23:54.997Z]
scm_1       | 2020-04-17 18:24:19,366 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.takeSnapshot(ContainerStateMachine.java:288)
datanode_2  | 2020-04-17 18:27:48,957 [grpc-default-executor-2] INFO impl.FollowerInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD->0086d012-6f96-4817-8e1b-94f6eaa443bc: nextIndex: updateUnconditionally 3 -> 1
datanode_1  | 2020-04-17 18:27:49,045 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.server.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-53471EA74967
om_1        | 2020-04-17 18:30:26,209 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
recon_1     | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 not found
scm_1       | 2020-04-17 18:24:19,377 [Socket Reader #1 for port 9961] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 	at org.apache.ratis.server.impl.StateMachineUpdater.takeSnapshot(StateMachineUpdater.java:258)
datanode_2  | 2020-04-17 18:27:48,959 [grpc-default-executor-2] INFO server.GrpcLogAppender: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD->3989634e-60c9-4e5a-8523-9408dc0a802d-AppendLogResponseHandler: follower responses appendEntries COMPLETED
datanode_1  | 2020-04-17 18:27:49,046 [pool-70-thread-1] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-53471EA74967: start as a follower, conf=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null
om_1        | 2020-04-17 18:30:26,223 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
scm_1       | 2020-04-17 18:24:19,392 [Socket Reader #1 for port 9961] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.hdds.protocol.SCMSecurityProtocol
datanode_3  | 	at org.apache.ratis.server.impl.StateMachineUpdater.checkAndTakeSnapshot(StateMachineUpdater.java:250)
datanode_2  | 2020-04-17 18:27:48,960 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.log_appender.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD
datanode_1  | 2020-04-17 18:27:49,046 [pool-70-thread-1] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-53471EA74967: changes role from      null to FOLLOWER at term 0 for startAsFollower
om_1        | 2020-04-17 18:31:03,748 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for recon/recon@EXAMPLE.COM (auth:KERBEROS)
om_1        | 2020-04-17 18:31:03,754 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for recon/recon@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
scm_1       | 2020-04-17 18:24:19,429 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_3  | 	at org.apache.ratis.server.impl.StateMachineUpdater.run(StateMachineUpdater.java:172)
datanode_2  | 2020-04-17 18:27:48,974 [Command processor thread] INFO impl.StateMachineUpdater: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-StateMachineUpdater: set stopIndex = 0
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
datanode_1  | 2020-04-17 18:27:49,047 [pool-70-thread-1] INFO impl.RoleInfo: 0086d012-6f96-4817-8e1b-94f6eaa443bc: start FollowerState
scm_1       | 2020-04-17 18:24:19,480 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 from datanode 3989634e-60c9-4e5a-8523-9408dc0a802d. Reason : ContainerID 1 creation failed
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 2020-04-17 18:27:48,974 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-StateMachineUpdater] ERROR ratis.ContainerStateMachine: Failed to take snapshot  for group-0181CC1CA0BD as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
om_1        | 2020-04-17 18:32:00,119 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
datanode_1  | 2020-04-17 18:27:49,048 [pool-70-thread-1] INFO util.JmxRegister: Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-53471EA74967,id=0086d012-6f96-4817-8e1b-94f6eaa443bc
scm_1       | 2020-04-17 18:24:19,481 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: c6484984-fa4c-47a5-afdd-2a8041abd0b3, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:OPEN, leaderId:3989634e-60c9-4e5a-8523-9408dc0a802d, CreationTimestamp2020-04-17T18:23:54.997088Z]
datanode_3  | 2020-04-17 18:25:50,592 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-StateMachineUpdater] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.state_machine.3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3
datanode_2  | 2020-04-17 18:27:48,975 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-StateMachineUpdater] ERROR impl.StateMachineUpdater: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-StateMachineUpdater: Failed to take snapshot
om_1        | 2020-04-17 18:32:00,124 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
datanode_1  | 2020-04-17 18:27:49,050 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.state_machine.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-53471EA74967
scm_1       | 2020-04-17 18:24:19,482 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineStateManager: Pipeline Pipeline[ Id: c6484984-fa4c-47a5-afdd-2a8041abd0b3, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:3989634e-60c9-4e5a-8523-9408dc0a802d, CreationTimestamp2020-04-17T18:23:54.997088Z] moved to CLOSED state
datanode_3  | 2020-04-17 18:25:50,593 [Command processor thread] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3: closes. applyIndex: 0
datanode_2  | org.apache.ratis.protocol.StateMachineException: Failed to take snapshot  for group-0181CC1CA0BD as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
om_1        | 2020-04-17 18:32:02,359 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
recon_1     | 	at org.apache.hadoop.ozone.recon.scm.ReconPipelineManager.destroyPipeline(ReconPipelineManager.java:74)
datanode_1  | 2020-04-17 18:27:49,088 [grpc-default-executor-0] WARN impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Failed groupAdd* GroupManagementRequest:client-D4A91D6FEF48->0086d012-6f96-4817-8e1b-94f6eaa443bc@group-53471EA74967, cid=2, seq=0, RW, null, Add:group-53471EA74967:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858]
scm_1       | 2020-04-17 18:24:19,488 [EventQueue-CloseContainerForCloseContainerEventHandler] INFO container.CloseContainerEventHandler: Close container Event triggered for container : #1
datanode_3  | 2020-04-17 18:25:50,590 [grpc-default-executor-0] INFO impl.FollowerInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3->f2e775cd-89a9-41b5-a9e0-4408e0d60689: nextIndex: updateUnconditionally 3 -> 1
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.takeSnapshot(ContainerStateMachine.java:288)
om_1        | 2020-04-17 18:32:02,368 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
datanode_1  | java.util.concurrent.CompletionException: org.apache.ratis.protocol.AlreadyExistsException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Failed to add group-53471EA74967:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
scm_1       | 2020-04-17 18:24:19,569 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 from datanode 3989634e-60c9-4e5a-8523-9408dc0a802d. Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-FAB0287C2AC1, cid=1
datanode_2  | 	at org.apache.ratis.server.impl.StateMachineUpdater.takeSnapshot(StateMachineUpdater.java:258)
om_1        | 2020-04-17 18:32:03,855 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for recon/recon@EXAMPLE.COM (auth:KERBEROS)
recon_1     | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
datanode_3  | 2020-04-17 18:25:50,595 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-SegmentedRaftLogWorker] INFO segmented.SegmentedRaftLogWorker: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
datanode_2  | 	at org.apache.ratis.server.impl.StateMachineUpdater.checkAndTakeSnapshot(StateMachineUpdater.java:250)
scm_1       | 	 State Machine: cmdType: WriteChunk traceID: "aa474c9f812cac7a:c083a61f31ca1fef:aa474c9f812cac7a:0" containerID: 1 datanodeUuid: "3989634e-60c9-4e5a-8523-9408dc0a802d" pipelineID: "c6484984-fa4c-47a5-afdd-2a8041abd0b3" writeChunk { blockID { containerID: 1 localID: 104015321989251072 blockCommitSequenceId: 0 } chunkData { chunkName: "104015321989251072_chunk_1" offset: 0 len: 10240 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: "\334],\220" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDEgbG9jSUQ6IDEwNDAxNTMyMTk4OTI1MTA3Mhjy9KL0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BAGROR-2m334gPvEwaQK3h4A1G6wpETxvuYeog10z9pNx-0XjzmnkcYO1PHHn0KJP-ce_4ZabjuUOP0KkKvoFojN-YQ9VkdnsyZXjJrZusLxfrdEr22jdEXZraXyVv_36H56sCH5ifpKoDNL_ANPymE3vNNG1g4fEM5jbsHgv01MPGAJm1YZIU1LPVVfjT_6YZR14unkpWq8xk4DBWFIFFzVvp2oMnlMIP-62cShaLzHHB2g6jZxEZRW8zlgHbyEoFVSfOehqlNmhDRriXhbsRSz771sLQDplmlRnkFVYv8kUJI7m_UXBUsA4AMUs9z1o_Kn0VCe5AsqOQERfPiP0hEkQSEREU19CTE9DS19UT0tFTiJjb25JRDogMSBsb2NJRDogMTA0MDE1MzIxOTg5MjUxMDcy", container path=nonexistent
om_1        | 2020-04-17 18:32:03,861 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for recon/recon@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
recon_1     | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
recon_1     | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_3  | 2020-04-17 18:25:50,597 [Command processor thread] INFO segmented.SegmentedRaftLogWorker: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3-SegmentedRaftLogWorker close()
datanode_2  | 	at org.apache.ratis.server.impl.StateMachineUpdater.run(StateMachineUpdater.java:169)
scm_1       | 2020-04-17 18:24:19,575 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: c6484984-fa4c-47a5-afdd-2a8041abd0b3, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:3989634e-60c9-4e5a-8523-9408dc0a802d, CreationTimestamp2020-04-17T18:23:54.997088Z]
recon_1     | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyNow(CompletableFuture.java:670)
om_1        | 2020-04-17 18:32:04,549 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 2020-04-17 18:25:50,599 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.log_worker.3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 2020-04-17 18:24:19,579 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyStage(CompletableFuture.java:658)
om_1        | 2020-04-17 18:32:04,560 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
datanode_3  | 2020-04-17 18:25:50,599 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.leader_election.3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3
datanode_2  | 2020-04-17 18:27:48,975 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-StateMachineUpdater] ERROR ratis.ContainerStateMachine: Failed to take snapshot  for group-0181CC1CA0BD as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
scm_1       | 2020-04-17 18:24:19,593 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture.thenApplyAsync(CompletableFuture.java:2104)
om_1        | 2020-04-17 18:32:04,899 [IPC Server handler 68 on 9862] INFO volume.OMVolumeCreateRequest: created volume:04711-rpcwoscheme for user:testuser/scm@EXAMPLE.COM
datanode_3  | 2020-04-17 18:25:50,599 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.server.3989634e-60c9-4e5a-8523-9408dc0a802d@group-2A8041ABD0B3
datanode_2  | 2020-04-17 18:27:48,976 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-StateMachineUpdater] ERROR impl.StateMachineUpdater: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-StateMachineUpdater: Failed to take snapshot
scm_1       | 2020-04-17 18:24:19,594 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 from datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc. Reason : ContainerID 1 creation failed
recon_1     | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:379)
om_1        | 2020-04-17 18:32:06,803 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 2020-04-17 18:25:50,603 [Command processor thread] INFO commandhandler.ClosePipelineCommandHandler: Close Pipeline #id: "c6484984-fa4c-47a5-afdd-2a8041abd0b3"
datanode_2  | org.apache.ratis.protocol.StateMachineException: Failed to take snapshot  for group-0181CC1CA0BD as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
scm_1       | 2020-04-17 18:24:19,597 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: c6484984-fa4c-47a5-afdd-2a8041abd0b3, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:3989634e-60c9-4e5a-8523-9408dc0a802d, CreationTimestamp2020-04-17T18:23:54.997088Z]
recon_1     | 2020-04-17 18:25:49,556 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:363)
om_1        | 2020-04-17 18:32:06,818 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
datanode_3  |  command on datanode #3989634e-60c9-4e5a-8523-9408dc0a802d.
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.takeSnapshot(ContainerStateMachine.java:288)
scm_1       | 2020-04-17 18:24:19,663 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
recon_1     | 2020-04-17 18:25:49,565 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_1  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.lambda$groupManagement$0(GrpcAdminProtocolService.java:42)
om_1        | 2020-04-17 18:32:09,209 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 2020-04-17 18:25:50,603 [Command processor thread] INFO impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: addNew group-0181CC1CA0BD:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] returns group-0181CC1CA0BD:java.util.concurrent.CompletableFuture@7f767d7[Not completed]
datanode_2  | 	at org.apache.ratis.server.impl.StateMachineUpdater.takeSnapshot(StateMachineUpdater.java:258)
scm_1       | 2020-04-17 18:24:19,695 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 from datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc. Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-FAB0287C2AC1, cid=1
recon_1     | 2020-04-17 18:25:49,709 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 	at org.apache.ratis.grpc.GrpcUtil.asyncCall(GrpcUtil.java:160)
datanode_1  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.groupManagement(GrpcAdminProtocolService.java:42)
datanode_3  | 2020-04-17 18:25:50,605 [pool-70-thread-1] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d: new RaftServerImpl for group-0181CC1CA0BD:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] with ContainerStateMachine:uninitialized
scm_1       | 	 State Machine: cmdType: WriteChunk traceID: "aa474c9f812cac7a:c083a61f31ca1fef:aa474c9f812cac7a:0" containerID: 1 datanodeUuid: "3989634e-60c9-4e5a-8523-9408dc0a802d" pipelineID: "c6484984-fa4c-47a5-afdd-2a8041abd0b3" writeChunk { blockID { containerID: 1 localID: 104015321989251072 blockCommitSequenceId: 0 } chunkData { chunkName: "104015321989251072_chunk_1" offset: 0 len: 10240 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: "\334],\220" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDEgbG9jSUQ6IDEwNDAxNTMyMTk4OTI1MTA3Mhjy9KL0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BAGROR-2m334gPvEwaQK3h4A1G6wpETxvuYeog10z9pNx-0XjzmnkcYO1PHHn0KJP-ce_4ZabjuUOP0KkKvoFojN-YQ9VkdnsyZXjJrZusLxfrdEr22jdEXZraXyVv_36H56sCH5ifpKoDNL_ANPymE3vNNG1g4fEM5jbsHgv01MPGAJm1YZIU1LPVVfjT_6YZR14unkpWq8xk4DBWFIFFzVvp2oMnlMIP-62cShaLzHHB2g6jZxEZRW8zlgHbyEoFVSfOehqlNmhDRriXhbsRSz771sLQDplmlRnkFVYv8kUJI7m_UXBUsA4AMUs9z1o_Kn0VCe5AsqOQERfPiP0hEkQSEREU19CTE9DS19UT0tFTiJjb25JRDogMSBsb2NJRDogMTA0MDE1MzIxOTg5MjUxMDcy", container path=nonexistent
datanode_2  | 	at org.apache.ratis.server.impl.StateMachineUpdater.checkAndTakeSnapshot(StateMachineUpdater.java:250)
datanode_1  | 	at org.apache.ratis.proto.grpc.AdminProtocolServiceGrpc$MethodHandlers.invoke(AdminProtocolServiceGrpc.java:358)
om_1        | 2020-04-17 18:32:09,224 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
datanode_3  | 2020-04-17 18:25:50,606 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.min = 5s (custom)
recon_1     | 2020-04-17 18:25:49,713 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
scm_1       | 2020-04-17 18:24:19,703 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: c6484984-fa4c-47a5-afdd-2a8041abd0b3, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:3989634e-60c9-4e5a-8523-9408dc0a802d, CreationTimestamp2020-04-17T18:23:54.997088Z]
datanode_2  | 	at org.apache.ratis.server.impl.StateMachineUpdater.run(StateMachineUpdater.java:172)
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:172)
om_1        | 2020-04-17 18:32:11,579 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 2020-04-17 18:25:50,606 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.max = 5200ms (custom)
recon_1     | 2020-04-17 18:25:49,792 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
scm_1       | 2020-04-17 18:24:19,704 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:331)
om_1        | 2020-04-17 18:32:11,606 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
datanode_3  | 2020-04-17 18:25:50,606 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpcslowness.timeout = 300s (custom)
recon_1     | 2020-04-17 18:25:49,813 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
scm_1       | 2020-04-17 18:24:19,708 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 from datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689. Reason : ContainerID 1 creation failed
datanode_2  | 2020-04-17 18:27:48,977 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-StateMachineUpdater] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.state_machine.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:814)
om_1        | 2020-04-17 18:32:14,051 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 2020-04-17 18:25:50,606 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.sleep.deviation.threshold = 300 (default)
recon_1     | 2020-04-17 18:25:49,814 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Unknown pipeline PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3. Trying to get from SCM.
scm_1       | 2020-04-17 18:24:19,708 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: c6484984-fa4c-47a5-afdd-2a8041abd0b3, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:3989634e-60c9-4e5a-8523-9408dc0a802d, CreationTimestamp2020-04-17T18:23:54.997088Z]
datanode_2  | 2020-04-17 18:27:48,978 [Command processor thread] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD: closes. applyIndex: 0
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
om_1        | 2020-04-17 18:32:14,063 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
datanode_3  | 2020-04-17 18:25:50,606 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.install.snapshot.enabled = false (custom)
recon_1     | 2020-04-17 18:25:49,848 [EventQueue-PipelineReportForReconPipelineReportHandler] ERROR pipeline.PipelineReportHandler: Could not process pipeline report=pipelineID {
scm_1       | 2020-04-17 18:24:19,797 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 from datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689. Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-FAB0287C2AC1, cid=1
datanode_2  | 2020-04-17 18:27:48,979 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-SegmentedRaftLogWorker] INFO segmented.SegmentedRaftLogWorker: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:123)
om_1        | 2020-04-17 18:32:16,458 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 2020-04-17 18:25:50,606 [pool-70-thread-1] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD: ConfigurationManager, init=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null, confs=<EMPTY_MAP>
recon_1     |   id: "c6484984-fa4c-47a5-afdd-2a8041abd0b3"
datanode_2  | 2020-04-17 18:27:48,980 [grpc-default-executor-2] INFO impl.FollowerInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD->3989634e-60c9-4e5a-8523-9408dc0a802d: nextIndex: updateUnconditionally 3 -> 1
scm_1       | 	 State Machine: cmdType: WriteChunk traceID: "aa474c9f812cac7a:c083a61f31ca1fef:aa474c9f812cac7a:0" containerID: 1 datanodeUuid: "3989634e-60c9-4e5a-8523-9408dc0a802d" pipelineID: "c6484984-fa4c-47a5-afdd-2a8041abd0b3" writeChunk { blockID { containerID: 1 localID: 104015321989251072 blockCommitSequenceId: 0 } chunkData { chunkName: "104015321989251072_chunk_1" offset: 0 len: 10240 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: "\334],\220" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDEgbG9jSUQ6IDEwNDAxNTMyMTk4OTI1MTA3Mhjy9KL0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BAGROR-2m334gPvEwaQK3h4A1G6wpETxvuYeog10z9pNx-0XjzmnkcYO1PHHn0KJP-ce_4ZabjuUOP0KkKvoFojN-YQ9VkdnsyZXjJrZusLxfrdEr22jdEXZraXyVv_36H56sCH5ifpKoDNL_ANPymE3vNNG1g4fEM5jbsHgv01MPGAJm1YZIU1LPVVfjT_6YZR14unkpWq8xk4DBWFIFFzVvp2oMnlMIP-62cShaLzHHB2g6jZxEZRW8zlgHbyEoFVSfOehqlNmhDRriXhbsRSz771sLQDplmlRnkFVYv8kUJI7m_UXBUsA4AMUs9z1o_Kn0VCe5AsqOQERfPiP0hEkQSEREU19CTE9DS19UT0tFTiJjb25JRDogMSBsb2NJRDogMTA0MDE1MzIxOTg5MjUxMDcy", container path=nonexistent
datanode_1  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
om_1        | 2020-04-17 18:32:16,469 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
datanode_3  | 2020-04-17 18:25:50,606 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.storage.dir = [/data/metadata/ratis] (custom)
recon_1     | }
scm_1       | 2020-04-17 18:24:19,797 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: c6484984-fa4c-47a5-afdd-2a8041abd0b3, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:3989634e-60c9-4e5a-8523-9408dc0a802d, CreationTimestamp2020-04-17T18:23:54.997088Z]
datanode_1  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_2  | 2020-04-17 18:27:48,980 [Command processor thread] INFO segmented.SegmentedRaftLogWorker: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD-SegmentedRaftLogWorker close()
om_1        | 2020-04-17 18:32:18,606 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 2020-04-17 18:25:50,607 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.corruption.policy = EXCEPTION (default)
recon_1     | isLeader: false
scm_1       | 2020-04-17 18:24:49,588 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 2020-04-17 18:27:48,983 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.log_worker.f2e775cd-89a9-41b5-a9e0-4408e0d60689
om_1        | 2020-04-17 18:32:18,628 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
datanode_3  | 2020-04-17 18:25:50,610 [pool-70-thread-1] INFO storage.RaftStorageDirectory: The storage directory /data/metadata/ratis/31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd does not exist. Creating ...
recon_1     | bytesWritten: 0
scm_1       | 2020-04-17 18:24:49,602 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_1  | Caused by: org.apache.ratis.protocol.AlreadyExistsException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Failed to add group-53471EA74967:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
datanode_2  | 2020-04-17 18:27:48,983 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.leader_election.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD
om_1        | 2020-04-17 18:32:20,966 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 2020-04-17 18:25:50,612 [pool-70-thread-1] INFO storage.RaftStorageDirectory: Lock on /data/metadata/ratis/31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd/in_use.lock acquired by nodename 6@9dd073498a2e
recon_1     |  from dn=f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106586728310} {}
scm_1       | 2020-04-17 18:24:49,718 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy$ImplMap.addNew(RaftServerProxy.java:83)
datanode_2  | 2020-04-17 18:27:48,983 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.server.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0181CC1CA0BD
om_1        | 2020-04-17 18:32:20,980 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
datanode_3  | 2020-04-17 18:25:50,613 [pool-70-thread-1] INFO storage.RaftStorage: Storage directory /data/metadata/ratis/31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd has been successfully formatted.
recon_1     | org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException): PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 not found
scm_1       | 2020-04-17 18:24:49,724 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:378)
datanode_2  | 2020-04-17 18:27:48,985 [Command processor thread] INFO commandhandler.ClosePipelineCommandHandler: Close Pipeline #id: "31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd"
om_1        | 2020-04-17 18:32:23,317 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 2020-04-17 18:25:50,613 [pool-70-thread-1] INFO ratis.ContainerStateMachine: group-0181CC1CA0BD: The snapshot info is null. Setting the last applied indexto:(t:0, i:~)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
scm_1       | 2020-04-17 18:24:49,793 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 	... 13 more
datanode_2  |  command on datanode #f2e775cd-89a9-41b5-a9e0-4408e0d60689.
om_1        | 2020-04-17 18:32:23,331 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
datanode_3  | 2020-04-17 18:25:50,613 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.notification.no-leader.timeout = 60s (default)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.getPipeline(PipelineStateManager.java:63)
scm_1       | 2020-04-17 18:24:49,803 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_1  | 2020-04-17 18:27:49,100 [grpc-default-executor-1] WARN impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Failed groupAdd* GroupManagementRequest:client-A6B7DE86AC46->0086d012-6f96-4817-8e1b-94f6eaa443bc@group-53471EA74967, cid=4, seq=0, RW, null, Add:group-53471EA74967:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858]
datanode_2  | 2020-04-17 18:27:48,992 [pool-70-thread-1] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689: new RaftServerImpl for group-53471EA74967:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] with ContainerStateMachine:uninitialized
om_1        | 2020-04-17 18:33:03,892 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for recon/recon@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 2020-04-17 18:25:50,613 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.use.memory = false (default)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.getPipeline(SCMPipelineManager.java:267)
scm_1       | 2020-04-17 18:25:19,576 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | java.util.concurrent.CompletionException: org.apache.ratis.protocol.AlreadyExistsException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Failed to add group-53471EA74967:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
datanode_2  | 2020-04-17 18:27:48,992 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.min = 5s (custom)
om_1        | 2020-04-17 18:33:03,897 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for recon/recon@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
datanode_3  | 2020-04-17 18:25:50,614 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.purge.gap = 1000000 (custom)
recon_1     | 	at org.apache.hadoop.hdds.scm.server.SCMClientProtocolServer.getPipeline(SCMClientProtocolServer.java:409)
scm_1       | 2020-04-17 18:25:19,581 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
datanode_2  | 2020-04-17 18:27:48,992 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.max = 5200ms (custom)
om_1        | 2020-04-17 18:33:57,120 [Socket Reader #1 for port 9862] INFO ipc.Server: Auth successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 2020-04-17 18:25:50,614 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
recon_1     | 	at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.getPipeline(StorageContainerLocationProtocolServerSideTranslatorPB.java:375)
scm_1       | 2020-04-17 18:25:19,728 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyNow(CompletableFuture.java:670)
datanode_2  | 2020-04-17 18:27:48,992 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpcslowness.timeout = 300s (custom)
om_1        | 2020-04-17 18:33:57,123 [Socket Reader #1 for port 9862] INFO authorize.ServiceAuthorizationManager: Authorization successful for testuser/scm@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.om.protocol.OzoneManagerProtocol
datanode_3  | 2020-04-17 18:25:50,614 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
recon_1     | 	at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.processRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:249)
scm_1       | 2020-04-17 18:25:19,732 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyStage(CompletableFuture.java:658)
datanode_2  | 2020-04-17 18:27:48,992 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.sleep.deviation.threshold = 300 (default)
datanode_3  | 2020-04-17 18:25:50,614 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.log_worker.3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_3  | 2020-04-17 18:25:50,615 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.cache.num.max = 2 (custom)
scm_1       | 2020-04-17 18:25:19,821 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture.thenApplyAsync(CompletableFuture.java:2104)
datanode_2  | 2020-04-17 18:27:48,993 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.install.snapshot.enabled = false (custom)
datanode_3  | 2020-04-17 18:25:50,615 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: new 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD-SegmentedRaftLogWorker for RaftStorage:Storage Directory /data/metadata/ratis/31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd
recon_1     | 	at org.apache.hadoop.hdds.server.OzoneProtocolMessageDispatcher.processRequest(OzoneProtocolMessageDispatcher.java:75)
scm_1       | 2020-04-17 18:25:19,825 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:379)
datanode_2  | 2020-04-17 18:27:48,993 [pool-70-thread-1] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967: ConfigurationManager, init=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null, confs=<EMPTY_MAP>
datanode_3  | 2020-04-17 18:25:50,615 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.byte-limit = 2147483647 (custom)
recon_1     | 	at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:120)
scm_1       | 2020-04-17 18:25:25,489 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 close command to datanode 3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:363)
datanode_2  | 2020-04-17 18:27:48,993 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.storage.dir = [/data/metadata/ratis] (custom)
datanode_3  | 2020-04-17 18:25:50,616 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.element-limit = 1024 (custom)
recon_1     | 	at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:31605)
scm_1       | 2020-04-17 18:25:25,490 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 close command to datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_1  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.lambda$groupManagement$0(GrpcAdminProtocolService.java:42)
datanode_2  | 2020-04-17 18:27:48,993 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.corruption.policy = EXCEPTION (default)
datanode_3  | 2020-04-17 18:25:50,616 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
datanode_3  | 2020-04-17 18:25:50,616 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.preallocated.size = 16384 (custom)
datanode_3  | 2020-04-17 18:25:50,616 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.write.buffer.size = 1048576 (custom)
datanode_3  | 2020-04-17 18:25:50,616 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.force.sync.num = 128 (default)
datanode_1  | 	at org.apache.ratis.grpc.GrpcUtil.asyncCall(GrpcUtil.java:160)
datanode_1  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.groupManagement(GrpcAdminProtocolService.java:42)
datanode_1  | 	at org.apache.ratis.proto.grpc.AdminProtocolServiceGrpc$MethodHandlers.invoke(AdminProtocolServiceGrpc.java:358)
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:172)
datanode_2  | 2020-04-17 18:27:48,994 [pool-70-thread-1] INFO storage.RaftStorageDirectory: The storage directory /data/metadata/ratis/33e2f66f-a610-4776-a5ba-53471ea74967 does not exist. Creating ...
recon_1     | 	at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:524)
recon_1     | 	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1025)
recon_1     | 	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:876)
datanode_2  | 2020-04-17 18:27:48,992 [Command processor thread] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: addNew group-53471EA74967:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] returns group-53471EA74967:java.util.concurrent.CompletableFuture@3d4906cc[Not completed]
datanode_2  | 2020-04-17 18:27:48,998 [pool-70-thread-1] INFO storage.RaftStorageDirectory: Lock on /data/metadata/ratis/33e2f66f-a610-4776-a5ba-53471ea74967/in_use.lock acquired by nodename 6@d4ddc26437df
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:331)
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:814)
recon_1     | 	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:822)
datanode_3  | 2020-04-17 18:25:50,616 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync = true (default)
datanode_2  | 2020-04-17 18:27:49,010 [pool-70-thread-1] INFO storage.RaftStorage: Storage directory /data/metadata/ratis/33e2f66f-a610-4776-a5ba-53471ea74967 has been successfully formatted.
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
scm_1       | 2020-04-17 18:25:25,491 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 close command to datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689
recon_1     | 	at java.base/java.security.AccessController.doPrivileged(Native Method)
datanode_3  | 2020-04-17 18:25:50,616 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout = 10s (default)
datanode_2  | 2020-04-17 18:27:49,019 [pool-70-thread-1] INFO ratis.ContainerStateMachine: group-53471EA74967: The snapshot info is null. Setting the last applied indexto:(t:0, i:~)
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:123)
scm_1       | 2020-04-17 18:25:25,491 [RatisPipelineUtilsThread] INFO pipeline.PipelineStateManager: Pipeline Pipeline[ Id: c6484984-fa4c-47a5-afdd-2a8041abd0b3, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:3989634e-60c9-4e5a-8523-9408dc0a802d, CreationTimestamp2020-04-17T18:23:54.997088Z] removed from db
recon_1     | 	at java.base/javax.security.auth.Subject.doAs(Subject.java:423)
datanode_3  | 2020-04-17 18:25:50,616 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
datanode_2  | 2020-04-17 18:27:49,019 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.notification.no-leader.timeout = 60s (default)
datanode_1  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
scm_1       | 2020-04-17 18:25:25,493 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Failed to create pipeline of type RATIS and factor ONE. Exception: Cannot create pipeline of factor 1 using 0 nodes. Used 3 nodes. Healthy nodes 3
recon_1     | 	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1730)
datanode_3  | 2020-04-17 18:25:50,618 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.caching.enabled = true (custom)
datanode_2  | 2020-04-17 18:27:49,019 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.use.memory = false (default)
datanode_1  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
scm_1       | 2020-04-17 18:25:25,493 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Sending CreatePipelineCommand for pipeline:PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd to datanode:0086d012-6f96-4817-8e1b-94f6eaa443bc
recon_1     | 	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2682)
datanode_3  | 2020-04-17 18:25:50,618 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
datanode_2  | 2020-04-17 18:27:49,020 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.purge.gap = 1000000 (custom)
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 2020-04-17 18:25:25,493 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Sending CreatePipelineCommand for pipeline:PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd to datanode:3989634e-60c9-4e5a-8523-9408dc0a802d
scm_1       | 2020-04-17 18:25:25,493 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Sending CreatePipelineCommand for pipeline:PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd to datanode:f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_3  | 2020-04-17 18:25:50,620 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.enabled = true (custom)
datanode_2  | 2020-04-17 18:27:49,020 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
datanode_1  | Caused by: org.apache.ratis.protocol.AlreadyExistsException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Failed to add group-53471EA74967:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
scm_1       | 2020-04-17 18:25:25,494 [RatisPipelineUtilsThread] INFO pipeline.PipelineStateManager: Created pipeline Pipeline[ Id: 31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:ALLOCATED, leaderId:null, CreationTimestamp2020-04-17T18:25:25.493440Z]
recon_1     | 
datanode_3  | 2020-04-17 18:25:50,621 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
datanode_2  | 2020-04-17 18:27:49,020 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy$ImplMap.addNew(RaftServerProxy.java:83)
scm_1       | 2020-04-17 18:25:25,494 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Failed to create pipeline of type RATIS and factor THREE. Exception: Pipeline creation failed because nodes are engaged in other pipelines and every node can only be engaged in max 2 pipelines. Required 3. Found 0
recon_1     | 	at org.apache.hadoop.ipc.Client.getRpcResponse(Client.java:1511)
datanode_3  | 2020-04-17 18:25:50,621 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.retention.file.num = 5 (custom)
datanode_2  | 2020-04-17 18:27:49,020 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.log_worker.f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:378)
scm_1       | 2020-04-17 18:25:25,576 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 close command to datanode 3989634e-60c9-4e5a-8523-9408dc0a802d
recon_1     | 	at org.apache.hadoop.ipc.Client.call(Client.java:1457)
datanode_3  | 2020-04-17 18:25:50,621 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.retrycache.expirytime = 600000ms (custom)
datanode_2  | 2020-04-17 18:27:49,022 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.cache.num.max = 2 (custom)
datanode_1  | 	... 13 more
scm_1       | 2020-04-17 18:25:25,576 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 close command to datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc
recon_1     | 	at org.apache.hadoop.ipc.Client.call(Client.java:1367)
datanode_3  | 2020-04-17 18:25:50,621 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.leader_election.3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD
datanode_2  | 2020-04-17 18:27:49,022 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: new f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-SegmentedRaftLogWorker for RaftStorage:Storage Directory /data/metadata/ratis/33e2f66f-a610-4776-a5ba-53471ea74967
datanode_1  | 2020-04-17 18:27:49,173 [Command processor thread] INFO commandhandler.CreatePipelineCommandHandler: Created Pipeline RATIS THREE #id: "33e2f66f-a610-4776-a5ba-53471ea74967"
scm_1       | 2020-04-17 18:25:25,576 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 close command to datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689
recon_1     | 	at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:228)
recon_1     | 	at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:116)
datanode_2  | 2020-04-17 18:27:49,022 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.byte-limit = 2147483647 (custom)
datanode_1  | .
recon_1     | 	at com.sun.proxy.$Proxy41.submitRequest(Unknown Source)
datanode_3  | 2020-04-17 18:25:50,624 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.server.3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD
scm_1       | 2020-04-17 18:25:25,577 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: c6484984-fa4c-47a5-afdd-2a8041abd0b3, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:3989634e-60c9-4e5a-8523-9408dc0a802d, CreationTimestamp2020-04-17T18:23:54.997088Z]
datanode_2  | 2020-04-17 18:27:49,022 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.element-limit = 1024 (custom)
datanode_1  | 2020-04-17 18:27:49,173 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: remove group-0181CC1CA0BD:null
recon_1     | 	at org.apache.hadoop.hdds.scm.protocolPB.StorageContainerLocationProtocolClientSideTranslatorPB.submitRpcRequest(StorageContainerLocationProtocolClientSideTranslatorPB.java:123)
datanode_3  | 2020-04-17 18:25:50,625 [pool-70-thread-1] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD: start as a follower, conf=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null
scm_1       | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 not found
datanode_2  | 2020-04-17 18:27:49,022 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
datanode_1  | 2020-04-17 18:27:49,173 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd"
recon_1     | 	at org.apache.hadoop.hdds.scm.protocolPB.StorageContainerLocationProtocolClientSideTranslatorPB.submitRequest(StorageContainerLocationProtocolClientSideTranslatorPB.java:114)
datanode_3  | 2020-04-17 18:25:50,625 [pool-70-thread-1] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD: changes role from      null to FOLLOWER at term 0 for startAsFollower
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_2  | 2020-04-17 18:27:49,022 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.preallocated.size = 16384 (custom)
datanode_1  | 
recon_1     | 	at org.apache.hadoop.hdds.scm.protocolPB.StorageContainerLocationProtocolClientSideTranslatorPB.getPipeline(StorageContainerLocationProtocolClientSideTranslatorPB.java:347)
datanode_3  | 2020-04-17 18:25:50,625 [pool-70-thread-1] INFO impl.RoleInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d: start FollowerState
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
datanode_2  | 2020-04-17 18:27:49,023 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.write.buffer.size = 1048576 (custom)
datanode_1  | java.io.IOException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-0181CC1CA0BD not found.
recon_1     | 	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
datanode_3  | 2020-04-17 18:25:50,626 [pool-70-thread-1] INFO util.JmxRegister: Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-0181CC1CA0BD,id=3989634e-60c9-4e5a-8523-9408dc0a802d
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
datanode_2  | 2020-04-17 18:27:49,023 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.force.sync.num = 128 (default)
recon_1     | 	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_3  | 2020-04-17 18:25:50,626 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.state_machine.3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
datanode_2  | 2020-04-17 18:27:49,023 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync = true (default)
recon_1     | 	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_3  | 2020-04-17 18:25:50,732 [Command processor thread] INFO commandhandler.CreatePipelineCommandHandler: Created Pipeline RATIS THREE #id: "31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd"
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.destroyPipeline(SCMPipelineManager.java:579)
datanode_2  | 2020-04-17 18:27:49,023 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout = 10s (default)
recon_1     | 	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_3  | .
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
datanode_2  | 2020-04-17 18:27:49,024 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
recon_1     | 	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:71)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_3  | 2020-04-17 18:25:50,732 [Command processor thread] INFO impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: remove group-2A8041ABD0B3:null
scm_1       | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
datanode_2  | 2020-04-17 18:27:49,049 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.caching.enabled = true (custom)
recon_1     | 	at com.sun.proxy.$Proxy42.getPipeline(Unknown Source)
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 2020-04-17 18:25:50,732 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "c6484984-fa4c-47a5-afdd-2a8041abd0b3"
scm_1       | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
datanode_2  | 2020-04-17 18:27:49,050 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
recon_1     | 	at org.apache.hadoop.ozone.recon.spi.impl.StorageContainerServiceProviderImpl.getPipeline(StorageContainerServiceProviderImpl.java:55)
datanode_1  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-0181CC1CA0BD not found.
datanode_3  | 
scm_1       | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_2  | 2020-04-17 18:27:49,052 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.enabled = true (custom)
recon_1     | 	at org.apache.hadoop.ozone.recon.scm.ReconPipelineReportHandler.processPipelineReport(ReconPipelineReportHandler.java:65)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_3  | java.io.IOException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-2A8041ABD0B3 not found.
scm_1       | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
datanode_2  | 2020-04-17 18:27:49,052 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineReportHandler.onMessage(PipelineReportHandler.java:84)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineReportHandler.onMessage(PipelineReportHandler.java:47)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
scm_1       | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 2020-04-17 18:27:49,054 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.retention.file.num = 5 (custom)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
recon_1     | 	at org.apache.hadoop.hdds.server.events.SingleThreadExecutor.lambda$onMessage$1(SingleThreadExecutor.java:81)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
scm_1       | 2020-04-17 18:25:25,597 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 close command to datanode 3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_2  | 2020-04-17 18:27:49,054 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.retrycache.expirytime = 600000ms (custom)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_1  | 	... 4 more
scm_1       | 2020-04-17 18:25:25,598 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 close command to datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_2  | 2020-04-17 18:27:49,054 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.leader_election.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_1  | 2020-04-17 18:27:49,174 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: remove group-0181CC1CA0BD:null
scm_1       | 2020-04-17 18:25:25,598 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 close command to datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_2  | 2020-04-17 18:27:49,056 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.server.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
recon_1     | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_1  | 2020-04-17 18:27:49,174 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd"
scm_1       | 2020-04-17 18:25:25,598 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: c6484984-fa4c-47a5-afdd-2a8041abd0b3, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:3989634e-60c9-4e5a-8523-9408dc0a802d, CreationTimestamp2020-04-17T18:23:54.997088Z]
datanode_2  | 2020-04-17 18:27:49,057 [pool-70-thread-1] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967: start as a follower, conf=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null
datanode_2  | 2020-04-17 18:27:49,057 [pool-70-thread-1] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967: changes role from      null to FOLLOWER at term 0 for startAsFollower
recon_1     | 2020-04-17 18:25:50,620 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Unknown pipeline PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd. Trying to get from SCM.
datanode_1  | 
scm_1       | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 not found
datanode_2  | 2020-04-17 18:27:49,057 [pool-70-thread-1] INFO impl.RoleInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689: start FollowerState
datanode_3  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-2A8041ABD0B3 not found.
recon_1     | 2020-04-17 18:25:50,622 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Adding new pipeline Pipeline[ Id: 31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:ALLOCATED, leaderId:null, CreationTimestamp2020-04-17T18:25:25.493Z] to Recon pipeline metadata.
datanode_1  | java.io.IOException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-0181CC1CA0BD not found.
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_2  | 2020-04-17 18:27:49,058 [pool-70-thread-1] INFO util.JmxRegister: Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-53471EA74967,id=f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
recon_1     | 2020-04-17 18:25:50,623 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO pipeline.PipelineStateManager: Created pipeline Pipeline[ Id: 31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:ALLOCATED, leaderId:null, CreationTimestamp2020-04-17T18:25:25.493Z]
datanode_2  | 2020-04-17 18:27:49,059 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.state_machine.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
datanode_2  | 2020-04-17 18:27:49,128 [grpc-default-executor-2] WARN impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Failed groupAdd* GroupManagementRequest:client-18AE2E2D3FDB->f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967, cid=3, seq=0, RW, null, Add:group-53471EA74967:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858]
recon_1     | 2020-04-17 18:25:50,623 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Pipeline THREE PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd reported by 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106587165812}
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
datanode_2  | java.util.concurrent.CompletionException: org.apache.ratis.protocol.AlreadyExistsException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Failed to add group-53471EA74967:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
recon_1     | 2020-04-17 18:25:50,652 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Unknown pipeline PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3. Trying to get from SCM.
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
recon_1     | 2020-04-17 18:25:50,657 [EventQueue-PipelineReportForReconPipelineReportHandler] ERROR pipeline.PipelineReportHandler: Could not process pipeline report=pipelineID {
datanode_3  | 	... 4 more
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.destroyPipeline(SCMPipelineManager.java:579)
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyNow(CompletableFuture.java:670)
recon_1     |   id: "c6484984-fa4c-47a5-afdd-2a8041abd0b3"
datanode_3  | 2020-04-17 18:25:50,732 [Command processor thread] INFO impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: remove group-2A8041ABD0B3:null
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyStage(CompletableFuture.java:658)
recon_1     | }
datanode_3  | 2020-04-17 18:25:50,733 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "c6484984-fa4c-47a5-afdd-2a8041abd0b3"
datanode_1  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-0181CC1CA0BD not found.
scm_1       | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.thenApplyAsync(CompletableFuture.java:2104)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:379)
datanode_3  | 
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
scm_1       | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:363)
recon_1     | isLeader: false
datanode_3  | java.io.IOException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-2A8041ABD0B3 not found.
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
scm_1       | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_2  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.lambda$groupManagement$0(GrpcAdminProtocolService.java:42)
recon_1     | bytesWritten: 0
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
scm_1       | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
datanode_2  | 	at org.apache.ratis.grpc.GrpcUtil.asyncCall(GrpcUtil.java:160)
recon_1     |  from dn=0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106649330073} {}
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_2  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.groupManagement(GrpcAdminProtocolService.java:42)
recon_1     | org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException): PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 not found
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_1  | 	... 4 more
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_2  | 	at org.apache.ratis.proto.grpc.AdminProtocolServiceGrpc$MethodHandlers.invoke(AdminProtocolServiceGrpc.java:358)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_1  | 2020-04-17 18:27:49,174 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: remove group-0181CC1CA0BD:null
scm_1       | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:172)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.getPipeline(PipelineStateManager.java:63)
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_1  | 2020-04-17 18:27:49,174 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd"
scm_1       | 2020-04-17 18:25:25,704 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 close command to datanode 3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:331)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.getPipeline(SCMPipelineManager.java:267)
datanode_3  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-2A8041ABD0B3 not found.
datanode_1  | 
scm_1       | 2020-04-17 18:25:25,704 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 close command to datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:814)
recon_1     | 	at org.apache.hadoop.hdds.scm.server.SCMClientProtocolServer.getPipeline(SCMClientProtocolServer.java:409)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_1  | java.io.IOException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-0181CC1CA0BD not found.
scm_1       | 2020-04-17 18:25:25,704 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 close command to datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
recon_1     | 	at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.getPipeline(StorageContainerLocationProtocolServerSideTranslatorPB.java:375)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
scm_1       | 2020-04-17 18:25:25,704 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: c6484984-fa4c-47a5-afdd-2a8041abd0b3, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:3989634e-60c9-4e5a-8523-9408dc0a802d, CreationTimestamp2020-04-17T18:23:54.997088Z]
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:123)
recon_1     | 	at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.processRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:249)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
scm_1       | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 not found
datanode_2  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
recon_1     | 	at org.apache.hadoop.hdds.server.OzoneProtocolMessageDispatcher.processRequest(OzoneProtocolMessageDispatcher.java:75)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_2  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
recon_1     | 	at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:120)
datanode_3  | 	... 4 more
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
recon_1     | 	at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:31605)
datanode_3  | 2020-04-17 18:25:50,733 [Command processor thread] INFO impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: remove group-2A8041ABD0B3:null
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
datanode_2  | Caused by: org.apache.ratis.protocol.AlreadyExistsException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Failed to add group-53471EA74967:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
recon_1     | 	at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:524)
datanode_3  | 2020-04-17 18:25:50,733 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "c6484984-fa4c-47a5-afdd-2a8041abd0b3"
datanode_1  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-0181CC1CA0BD not found.
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy$ImplMap.addNew(RaftServerProxy.java:83)
recon_1     | 	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1025)
datanode_3  | 
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.destroyPipeline(SCMPipelineManager.java:579)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:378)
recon_1     | 	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:876)
datanode_3  | java.io.IOException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-2A8041ABD0B3 not found.
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
datanode_2  | 	... 13 more
recon_1     | 	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:822)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
scm_1       | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
datanode_2  | 2020-04-17 18:27:49,163 [grpc-default-executor-2] WARN impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Failed groupAdd* GroupManagementRequest:client-A6353566070E->f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967, cid=5, seq=0, RW, null, Add:group-53471EA74967:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858]
recon_1     | 	at java.base/java.security.AccessController.doPrivileged(Native Method)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
scm_1       | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
datanode_2  | java.util.concurrent.CompletionException: org.apache.ratis.protocol.AlreadyExistsException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Failed to add group-53471EA74967:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
recon_1     | 	at java.base/javax.security.auth.Subject.doAs(Subject.java:423)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_1  | 	... 4 more
scm_1       | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
recon_1     | 	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1730)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_1  | 2020-04-17 18:27:49,175 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: remove group-0181CC1CA0BD:null
scm_1       | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyNow(CompletableFuture.java:670)
recon_1     | 	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2682)
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_1  | 2020-04-17 18:27:49,175 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd"
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyStage(CompletableFuture.java:658)
recon_1     | 
datanode_3  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-2A8041ABD0B3 not found.
datanode_1  | 
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.thenApplyAsync(CompletableFuture.java:2104)
recon_1     | 	at org.apache.hadoop.ipc.Client.getRpcResponse(Client.java:1511)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_1  | java.io.IOException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-0181CC1CA0BD not found.
scm_1       | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:379)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:363)
recon_1     | 	at org.apache.hadoop.ipc.Client.call(Client.java:1457)
recon_1     | 	at org.apache.hadoop.ipc.Client.call(Client.java:1367)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
recon_1     | 	at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:228)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_2  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.lambda$groupManagement$0(GrpcAdminProtocolService.java:42)
scm_1       | 2020-04-17 18:25:25,709 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 close command to datanode 3989634e-60c9-4e5a-8523-9408dc0a802d
recon_1     | 	at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:116)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_2  | 	at org.apache.ratis.grpc.GrpcUtil.asyncCall(GrpcUtil.java:160)
scm_1       | 2020-04-17 18:25:25,709 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 close command to datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc
recon_1     | 	at com.sun.proxy.$Proxy41.submitRequest(Unknown Source)
recon_1     | 	at org.apache.hadoop.hdds.scm.protocolPB.StorageContainerLocationProtocolClientSideTranslatorPB.submitRpcRequest(StorageContainerLocationProtocolClientSideTranslatorPB.java:123)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_2  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.groupManagement(GrpcAdminProtocolService.java:42)
scm_1       | 2020-04-17 18:25:25,709 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 close command to datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689
recon_1     | 	at org.apache.hadoop.hdds.scm.protocolPB.StorageContainerLocationProtocolClientSideTranslatorPB.submitRequest(StorageContainerLocationProtocolClientSideTranslatorPB.java:114)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 	at org.apache.ratis.proto.grpc.AdminProtocolServiceGrpc$MethodHandlers.invoke(AdminProtocolServiceGrpc.java:358)
scm_1       | 2020-04-17 18:25:25,710 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: c6484984-fa4c-47a5-afdd-2a8041abd0b3, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:3989634e-60c9-4e5a-8523-9408dc0a802d, CreationTimestamp2020-04-17T18:23:54.997088Z]
recon_1     | 	at org.apache.hadoop.hdds.scm.protocolPB.StorageContainerLocationProtocolClientSideTranslatorPB.getPipeline(StorageContainerLocationProtocolClientSideTranslatorPB.java:347)
datanode_3  | 	... 4 more
datanode_1  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-0181CC1CA0BD not found.
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:172)
scm_1       | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 not found
recon_1     | 	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
datanode_3  | 2020-04-17 18:25:50,733 [Command processor thread] INFO impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: remove group-2A8041ABD0B3:null
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:331)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
recon_1     | 	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
datanode_3  | 2020-04-17 18:25:50,733 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "c6484984-fa4c-47a5-afdd-2a8041abd0b3"
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:814)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
recon_1     | 	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
datanode_3  | 
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
recon_1     | 	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
datanode_3  | java.io.IOException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-2A8041ABD0B3 not found.
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:123)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
recon_1     | 	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:71)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_1  | 	... 4 more
datanode_2  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.destroyPipeline(SCMPipelineManager.java:579)
recon_1     | 	at com.sun.proxy.$Proxy42.getPipeline(Unknown Source)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_1  | 2020-04-17 18:27:49,176 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: remove group-0181CC1CA0BD:null
datanode_2  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
recon_1     | 	at org.apache.hadoop.ozone.recon.spi.impl.StorageContainerServiceProviderImpl.getPipeline(StorageContainerServiceProviderImpl.java:55)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_1  | 2020-04-17 18:27:49,177 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd"
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
recon_1     | 	at org.apache.hadoop.ozone.recon.scm.ReconPipelineReportHandler.processPipelineReport(ReconPipelineReportHandler.java:65)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_1  | 
datanode_2  | Caused by: org.apache.ratis.protocol.AlreadyExistsException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Failed to add group-53471EA74967:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
scm_1       | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineReportHandler.onMessage(PipelineReportHandler.java:84)
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_1  | java.io.IOException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-0181CC1CA0BD not found.
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy$ImplMap.addNew(RaftServerProxy.java:83)
scm_1       | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineReportHandler.onMessage(PipelineReportHandler.java:47)
datanode_3  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-2A8041ABD0B3 not found.
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:378)
scm_1       | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
recon_1     | 	at org.apache.hadoop.hdds.server.events.SingleThreadExecutor.lambda$onMessage$1(SingleThreadExecutor.java:81)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_2  | 	... 13 more
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_2  | 2020-04-17 18:27:49,207 [Command processor thread] INFO commandhandler.CreatePipelineCommandHandler: Created Pipeline RATIS THREE #id: "33e2f66f-a610-4776-a5ba-53471ea74967"
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_2  | .
scm_1       | 	at java.base/java.lang.Thread.run(Thread.java:834)
recon_1     | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 2020-04-17 18:27:49,207 [Command processor thread] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: remove group-0181CC1CA0BD:null
scm_1       | 2020-04-17 18:25:25,798 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 close command to datanode 3989634e-60c9-4e5a-8523-9408dc0a802d
recon_1     | 2020-04-17 18:25:50,657 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Pipeline THREE PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd reported by 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106649330073}
datanode_3  | 	... 4 more
datanode_1  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-0181CC1CA0BD not found.
datanode_2  | 2020-04-17 18:27:49,207 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd"
scm_1       | 2020-04-17 18:25:25,801 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 close command to datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc
recon_1     | 2020-04-17 18:25:50,696 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Unknown pipeline PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3. Trying to get from SCM.
datanode_3  | 2020-04-17 18:25:50,734 [Command processor thread] INFO impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: remove group-2A8041ABD0B3:null
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_2  | 
scm_1       | 2020-04-17 18:25:25,801 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 close command to datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689
scm_1       | 2020-04-17 18:25:25,802 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: c6484984-fa4c-47a5-afdd-2a8041abd0b3, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:3989634e-60c9-4e5a-8523-9408dc0a802d, CreationTimestamp2020-04-17T18:23:54.997088Z]
datanode_3  | 2020-04-17 18:25:50,734 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "c6484984-fa4c-47a5-afdd-2a8041abd0b3"
datanode_3  | 
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
recon_1     | 2020-04-17 18:25:50,701 [EventQueue-PipelineReportForReconPipelineReportHandler] ERROR pipeline.PipelineReportHandler: Could not process pipeline report=pipelineID {
scm_1       | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 not found
datanode_3  | java.io.IOException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-2A8041ABD0B3 not found.
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_2  | java.io.IOException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-0181CC1CA0BD not found.
recon_1     |   id: "c6484984-fa4c-47a5-afdd-2a8041abd0b3"
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
recon_1     | }
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_1  | 	... 4 more
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
recon_1     | isLeader: false
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_1  | 2020-04-17 18:27:49,177 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: remove group-0181CC1CA0BD:null
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
recon_1     | bytesWritten: 0
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_1  | 2020-04-17 18:27:49,178 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd"
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
recon_1     |  from dn=f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106586728310} {}
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_1  | 
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
datanode_3  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-2A8041ABD0B3 not found.
recon_1     | org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException): PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 not found
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_1  | java.io.IOException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-0181CC1CA0BD not found.
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.destroyPipeline(SCMPipelineManager.java:579)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.getPipeline(PipelineStateManager.java:63)
datanode_2  | Caused by: org.apache.ratis.protocol.GroupMismatchException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-0181CC1CA0BD not found.
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
scm_1       | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.getPipeline(SCMPipelineManager.java:267)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
scm_1       | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
recon_1     | 	at org.apache.hadoop.hdds.scm.server.SCMClientProtocolServer.getPipeline(SCMClientProtocolServer.java:409)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
scm_1       | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_3  | 	... 4 more
recon_1     | 	at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.getPipeline(StorageContainerLocationProtocolServerSideTranslatorPB.java:375)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
recon_1     | 	at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.processRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:249)
datanode_3  | 2020-04-17 18:25:55,819 [Thread-53] INFO impl.FollowerState: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD-FollowerState: change to CANDIDATE, lastRpcTime:5194ms, electionTimeout:5193ms
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_1  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-0181CC1CA0BD not found.
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
recon_1     | 	at org.apache.hadoop.hdds.server.OzoneProtocolMessageDispatcher.processRequest(OzoneProtocolMessageDispatcher.java:75)
datanode_3  | 2020-04-17 18:25:55,820 [Thread-53] INFO impl.RoleInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d: shutdown FollowerState
datanode_2  | 	... 4 more
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
recon_1     | 	at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:120)
datanode_3  | 2020-04-17 18:25:55,820 [Thread-53] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
datanode_2  | 2020-04-17 18:27:49,208 [Command processor thread] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: remove group-0181CC1CA0BD:null
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
scm_1       | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 2020-04-17 18:25:55,820 [Thread-53] INFO impl.RoleInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d: start LeaderElection
recon_1     | 	at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:31605)
datanode_2  | 2020-04-17 18:27:49,208 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd"
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
scm_1       | 2020-04-17 18:25:42,601 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Failed to create pipeline of type RATIS and factor ONE. Exception: Cannot create pipeline of factor 1 using 0 nodes. Used 3 nodes. Healthy nodes 3
datanode_3  | 2020-04-17 18:25:55,827 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD-LeaderElection3] INFO impl.LeaderElection: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD-LeaderElection3: begin an election at term 1 for -1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null
recon_1     | 	at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:524)
datanode_2  | 
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
scm_1       | 2020-04-17 18:25:42,601 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Failed to create pipeline of type RATIS and factor THREE. Exception: Pipeline creation failed because nodes are engaged in other pipelines and every node can only be engaged in max 2 pipelines. Required 3. Found 0
datanode_3  | 2020-04-17 18:25:55,889 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD-LeaderElection3] INFO impl.LeaderElection: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD-LeaderElection3: Election REJECTED; received 2 response(s) [3989634e-60c9-4e5a-8523-9408dc0a802d<-0086d012-6f96-4817-8e1b-94f6eaa443bc#0:FAIL-t1, 3989634e-60c9-4e5a-8523-9408dc0a802d<-f2e775cd-89a9-41b5-a9e0-4408e0d60689#0:FAIL-t1] and 0 exception(s); 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD:t1, leader=null, voted=3989634e-60c9-4e5a-8523-9408dc0a802d, raftlog=3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null
recon_1     | 	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1025)
datanode_2  | java.io.IOException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-0181CC1CA0BD not found.
datanode_1  | 	... 4 more
scm_1       | 2020-04-17 18:25:49,564 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 2020-04-17 18:25:55,891 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD-LeaderElection3] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD: changes role from CANDIDATE to FOLLOWER at term 1 for DISCOVERED_A_NEW_TERM
recon_1     | 	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:876)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_1  | 2020-04-17 18:27:54,181 [grpc-default-executor-1] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-53471EA74967: changes role from  FOLLOWER to FOLLOWER at term 1 for recognizeCandidate:f2e775cd-89a9-41b5-a9e0-4408e0d60689
scm_1       | 2020-04-17 18:25:49,572 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_3  | 2020-04-17 18:25:55,891 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD-LeaderElection3] INFO impl.RoleInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d: shutdown LeaderElection
recon_1     | 	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:822)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_1  | 2020-04-17 18:27:54,182 [grpc-default-executor-1] INFO impl.RoleInfo: 0086d012-6f96-4817-8e1b-94f6eaa443bc: shutdown FollowerState
scm_1       | 2020-04-17 18:25:49,723 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 2020-04-17 18:25:55,892 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD-LeaderElection3] INFO impl.RoleInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d: start FollowerState
recon_1     | 	at java.base/java.security.AccessController.doPrivileged(Native Method)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_1  | 2020-04-17 18:27:54,182 [Thread-155] INFO impl.FollowerState: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-53471EA74967-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
scm_1       | 2020-04-17 18:25:49,731 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_3  | 2020-04-17 18:25:55,960 [grpc-default-executor-2] INFO ratis.XceiverServerRatis: Leader change notification received for group: group-0181CC1CA0BD with new leaderId: f2e775cd-89a9-41b5-a9e0-4408e0d60689
recon_1     | 	at java.base/javax.security.auth.Subject.doAs(Subject.java:423)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_1  | 2020-04-17 18:27:54,182 [grpc-default-executor-1] INFO impl.RoleInfo: 0086d012-6f96-4817-8e1b-94f6eaa443bc: start FollowerState
scm_1       | 2020-04-17 18:25:49,780 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 2020-04-17 18:25:55,963 [grpc-default-executor-2] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD: change Leader from null to f2e775cd-89a9-41b5-a9e0-4408e0d60689 at term 1 for appendEntries, leader elected after 5347ms
recon_1     | 	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1730)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_1  | 2020-04-17 18:27:54,230 [grpc-default-executor-1] INFO ratis.XceiverServerRatis: Leader change notification received for group: group-53471EA74967 with new leaderId: f2e775cd-89a9-41b5-a9e0-4408e0d60689
scm_1       | 2020-04-17 18:25:49,808 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_3  | 2020-04-17 18:25:56,006 [grpc-default-executor-2] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD: set configuration 0: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null at 0
recon_1     | 	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2682)
datanode_2  | Caused by: org.apache.ratis.protocol.GroupMismatchException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-0181CC1CA0BD not found.
datanode_1  | 2020-04-17 18:27:54,230 [grpc-default-executor-1] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-53471EA74967: change Leader from null to f2e775cd-89a9-41b5-a9e0-4408e0d60689 at term 1 for appendEntries, leader elected after 5219ms
scm_1       | 2020-04-17 18:25:49,831 [Socket Reader #1 for port 9860] INFO ipc.Server: Auth successful for recon/recon@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 2020-04-17 18:25:56,010 [grpc-default-executor-2] INFO segmented.SegmentedRaftLogWorker: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD-SegmentedRaftLogWorker: Starting segment from index:0
datanode_3  | 2020-04-17 18:25:56,015 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD-SegmentedRaftLogWorker] INFO segmented.SegmentedRaftLogWorker: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD-SegmentedRaftLogWorker: created new log segment /data/metadata/ratis/31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd/current/log_inprogress_0
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_1  | 2020-04-17 18:27:54,261 [grpc-default-executor-1] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-53471EA74967: set configuration 0: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null at 0
datanode_3  | 2020-04-17 18:26:17,924 [ChunkWriter-54-0] INFO keyvalue.KeyValueHandler: Operation: CreateContainer , Trace ID: 1ebccd3f95d7d6a9:57399964959fe306:1ebccd3f95d7d6a9:0 , Message: Container creation failed, due to disk out of space , Result: DISK_OUT_OF_SPACE , StorageContainerException Occurred.
recon_1     | 
scm_1       | 2020-04-17 18:25:49,839 [Socket Reader #1 for port 9860] INFO authorize.ServiceAuthorizationManager: Authorization successful for recon/recon@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocol
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_1  | 2020-04-17 18:27:54,261 [grpc-default-executor-1] INFO segmented.SegmentedRaftLogWorker: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-53471EA74967-SegmentedRaftLogWorker: Starting segment from index:0
datanode_3  | org.apache.hadoop.hdds.scm.container.common.helpers.StorageContainerException: Container creation failed, due to disk out of space
recon_1     | 	at org.apache.hadoop.ipc.Client.getRpcResponse(Client.java:1511)
scm_1       | 2020-04-17 18:25:49,840 [IPC Server handler 16 on 9860] INFO ipc.Server: IPC Server handler 16 on 9860, call Call#6 Retry#0 org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocol.submitRequest from 172.24.0.3:37049
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_1  | 2020-04-17 18:27:54,265 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-53471EA74967-SegmentedRaftLogWorker] INFO segmented.SegmentedRaftLogWorker: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-53471EA74967-SegmentedRaftLogWorker: created new log segment /data/metadata/ratis/33e2f66f-a610-4776-a5ba-53471ea74967/current/log_inprogress_0
datanode_3  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueContainer.create(KeyValueContainer.java:165)
recon_1     | 	at org.apache.hadoop.ipc.Client.call(Client.java:1457)
recon_1     | 	at org.apache.hadoop.ipc.Client.call(Client.java:1367)
recon_1     | 	at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:228)
recon_1     | 	at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:116)
recon_1     | 	at com.sun.proxy.$Proxy41.submitRequest(Unknown Source)
recon_1     | 	at org.apache.hadoop.hdds.scm.protocolPB.StorageContainerLocationProtocolClientSideTranslatorPB.submitRpcRequest(StorageContainerLocationProtocolClientSideTranslatorPB.java:123)
recon_1     | 	at org.apache.hadoop.hdds.scm.protocolPB.StorageContainerLocationProtocolClientSideTranslatorPB.submitRequest(StorageContainerLocationProtocolClientSideTranslatorPB.java:114)
datanode_1  | 2020-04-17 18:28:30,710 [ChunkWriter-45-0] INFO keyvalue.KeyValueHandler: Operation: CreateContainer , Trace ID: 16384e45b8dca920:69dadb773b7d9073:16384e45b8dca920:0 , Message: Container creation failed, due to disk out of space , Result: DISK_OUT_OF_SPACE , StorageContainerException Occurred.
datanode_1  | org.apache.hadoop.hdds.scm.container.common.helpers.StorageContainerException: Container creation failed, due to disk out of space
datanode_1  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueContainer.create(KeyValueContainer.java:165)
datanode_1  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.handleCreateContainer(KeyValueHandler.java:247)
datanode_1  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.dispatchRequest(KeyValueHandler.java:164)
datanode_1  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.handle(KeyValueHandler.java:152)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.createContainer(HddsDispatcher.java:414)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatchRequest(HddsDispatcher.java:250)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatch(HddsDispatcher.java:162)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.dispatchCommand(ContainerStateMachine.java:402)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.runCommand(ContainerStateMachine.java:412)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.lambda$handleWriteChunk$2(ContainerStateMachine.java:447)
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
datanode_1  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_1  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_1  | Caused by: org.apache.hadoop.util.DiskChecker$DiskOutOfSpaceException: Out of space: The volume with the most available space (=497381376 B) is less than the container size (=1073741824 B).
datanode_1  | 	at org.apache.hadoop.ozone.container.common.volume.RoundRobinVolumeChoosingPolicy.chooseVolume(RoundRobinVolumeChoosingPolicy.java:77)
datanode_1  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueContainer.create(KeyValueContainer.java:124)
datanode_1  | 	... 13 more
datanode_1  | 2020-04-17 18:28:30,710 [ChunkWriter-45-0] INFO impl.HddsDispatcher: Operation: WriteChunk , Trace ID: 16384e45b8dca920:69dadb773b7d9073:16384e45b8dca920:0 , Message: ContainerID 3 creation failed , Result: DISK_OUT_OF_SPACE , StorageContainerException Occurred.
datanode_1  | org.apache.hadoop.hdds.scm.container.common.helpers.StorageContainerException: ContainerID 3 creation failed
datanode_1  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatchRequest(HddsDispatcher.java:254)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatch(HddsDispatcher.java:162)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.dispatchCommand(ContainerStateMachine.java:402)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.runCommand(ContainerStateMachine.java:412)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.lambda$handleWriteChunk$2(ContainerStateMachine.java:447)
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
datanode_1  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_1  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_1  | 2020-04-17 18:28:30,710 [ChunkWriter-45-0] ERROR ratis.ContainerStateMachine: group-53471EA74967: writeChunk writeStateMachineData failed: blockIdcontainerID: 3
datanode_1  | localID: 104015338506354690
datanode_1  | blockCommitSequenceId: 0
datanode_1  |  logIndex 1 chunkName 104015338506354690_chunk_1 Error message: ContainerID 3 creation failed Container Result: DISK_OUT_OF_SPACE
datanode_1  | 2020-04-17 18:28:30,711 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-53471EA74967-SegmentedRaftLogWorker] ERROR ratis.XceiverServerRatis: pipeline Action CLOSE on pipeline PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967.Reason : ContainerID 3 creation failed
datanode_1  | 2020-04-17 18:28:30,724 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-53471EA74967-SegmentedRaftLogWorker] ERROR ratis.XceiverServerRatis: pipeline Action CLOSE on pipeline PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967.Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-37022F9E2BC6, cid=1
datanode_1  | 	 State Machine: cmdType: WriteChunk traceID: "16384e45b8dca920:69dadb773b7d9073:16384e45b8dca920:0" containerID: 3 datanodeUuid: "0086d012-6f96-4817-8e1b-94f6eaa443bc" pipelineID: "33e2f66f-a610-4776-a5ba-53471ea74967" writeChunk { blockID { containerID: 3 localID: 104015338506354690 blockCommitSequenceId: 0 } chunkData { chunkName: "104015338506354690_chunk_1" offset: 0 len: 17540 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: " wi\267" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDMgbG9jSUQ6IDEwNDAxNTMzODUwNjM1NDY5MBjepbL0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BADeFsLsxxtEPRBZ3zUOXfNa-UUSU6VC8lRNYvp8RgEQbphhrE6N36Gxgiuq4v4KJj818tT6GKzfOFwIUqoJf9tMaZlbDGA3jNEPUAgBUq4C_lwiHxACZgSRSVBlyYv1gk_UZSVoWSL9xzq9d5JDo4gcHB9EJVrtbSuSf3Mr-nKdxEhv3RNwNHoQ9uBxlhmRvHBa6lTTF188w1uI-_tGSL6dW8oTlooMuAZr4x-1ivYJZyAyMZFbj0W5ZFumHHxBm3Qr1BPMy9T9n-bBUo5smAFAWfd39Th_A4G0Yv8kFVGhNpjOI9vXQLhLqEOygMKoZX-rdhT07R3j_A1qyFWpL2mgQSEREU19CTE9DS19UT0tFTiJjb25JRDogMyBsb2NJRDogMTA0MDE1MzM4NTA2MzU0Njkw", container path=nonexistent
scm_1       | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 not found
recon_1     | 	at org.apache.hadoop.hdds.scm.protocolPB.StorageContainerLocationProtocolClientSideTranslatorPB.getPipeline(StorageContainerLocationProtocolClientSideTranslatorPB.java:347)
recon_1     | 	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
recon_1     | 	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
recon_1     | 	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
recon_1     | 	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.getPipeline(PipelineStateManager.java:63)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_1  | 2020-04-17 18:28:50,010 [Command processor thread] ERROR commandhandler.CloseContainerCommandHandler: Container #3 does not exist in datanode. Container close failed.
datanode_3  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.handleCreateContainer(KeyValueHandler.java:247)
recon_1     | 	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:71)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.getPipeline(SCMPipelineManager.java:267)
datanode_2  | 	... 4 more
datanode_1  | 2020-04-17 18:30:01,725 [grpc-default-executor-1] INFO server.GrpcServerProtocolService: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Completed APPEND_ENTRIES, lastRequest: f2e775cd-89a9-41b5-a9e0-4408e0d60689->0086d012-6f96-4817-8e1b-94f6eaa443bc#17-t1, previous=(t:1, i:1), leaderCommit=0, initializing? false, entries: size=1, first=(t:1, i:2), STATEMACHINELOGENTRY, client-37022F9E2BC6, cid=2
datanode_3  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.dispatchRequest(KeyValueHandler.java:164)
recon_1     | 	at com.sun.proxy.$Proxy42.getPipeline(Unknown Source)
scm_1       | 	at org.apache.hadoop.hdds.scm.server.SCMClientProtocolServer.getPipeline(SCMClientProtocolServer.java:409)
datanode_2  | 2020-04-17 18:27:49,209 [Command processor thread] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: remove group-0181CC1CA0BD:null
datanode_1  | 2020-04-17 18:30:01,726 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: remove  FOLLOWER 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-53471EA74967:t1, leader=f2e775cd-89a9-41b5-a9e0-4408e0d60689, voted=f2e775cd-89a9-41b5-a9e0-4408e0d60689, raftlog=0086d012-6f96-4817-8e1b-94f6eaa443bc@group-53471EA74967-SegmentedRaftLog:OPENED:c0,f0,i2, conf=0: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null RUNNING
datanode_3  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.handle(KeyValueHandler.java:152)
recon_1     | 	at org.apache.hadoop.ozone.recon.spi.impl.StorageContainerServiceProviderImpl.getPipeline(StorageContainerServiceProviderImpl.java:55)
scm_1       | 	at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.getPipeline(StorageContainerLocationProtocolServerSideTranslatorPB.java:375)
datanode_2  | 2020-04-17 18:27:49,209 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd"
datanode_1  | 2020-04-17 18:30:01,726 [Command processor thread] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-53471EA74967: shutdown
datanode_3  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.createContainer(HddsDispatcher.java:414)
recon_1     | 	at org.apache.hadoop.ozone.recon.scm.ReconPipelineReportHandler.processPipelineReport(ReconPipelineReportHandler.java:65)
scm_1       | 	at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.processRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:249)
datanode_2  | 
datanode_1  | 2020-04-17 18:30:01,726 [Command processor thread] INFO util.JmxRegister: Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-53471EA74967,id=0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_3  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatchRequest(HddsDispatcher.java:250)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineReportHandler.onMessage(PipelineReportHandler.java:84)
scm_1       | 	at org.apache.hadoop.hdds.server.OzoneProtocolMessageDispatcher.processRequest(OzoneProtocolMessageDispatcher.java:75)
datanode_2  | java.io.IOException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-0181CC1CA0BD not found.
datanode_1  | 2020-04-17 18:30:01,727 [Command processor thread] INFO impl.RoleInfo: 0086d012-6f96-4817-8e1b-94f6eaa443bc: shutdown FollowerState
datanode_3  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatch(HddsDispatcher.java:162)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.dispatchCommand(ContainerStateMachine.java:402)
scm_1       | 	at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:120)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_1  | 2020-04-17 18:30:01,727 [Command processor thread] INFO impl.StateMachineUpdater: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-53471EA74967-StateMachineUpdater: set stopIndex = 0
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.runCommand(ContainerStateMachine.java:412)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineReportHandler.onMessage(PipelineReportHandler.java:47)
scm_1       | 	at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:31605)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_1  | 2020-04-17 18:30:01,727 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-53471EA74967-StateMachineUpdater] ERROR ratis.ContainerStateMachine: Failed to take snapshot  for group-53471EA74967 as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.lambda$handleWriteChunk$2(ContainerStateMachine.java:447)
recon_1     | 	at org.apache.hadoop.hdds.server.events.SingleThreadExecutor.lambda$onMessage$1(SingleThreadExecutor.java:81)
scm_1       | 	at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:524)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_1  | 2020-04-17 18:30:01,728 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-53471EA74967-StateMachineUpdater] ERROR impl.StateMachineUpdater: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-53471EA74967-StateMachineUpdater: Failed to take snapshot
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
scm_1       | 	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1025)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_1  | org.apache.ratis.protocol.StateMachineException: Failed to take snapshot  for group-53471EA74967 as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
datanode_3  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
scm_1       | 	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:876)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.takeSnapshot(ContainerStateMachine.java:288)
datanode_3  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
recon_1     | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:822)
datanode_2  | Caused by: org.apache.ratis.protocol.GroupMismatchException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-0181CC1CA0BD not found.
datanode_1  | 	at org.apache.ratis.server.impl.StateMachineUpdater.takeSnapshot(StateMachineUpdater.java:258)
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
recon_1     | 2020-04-17 18:25:50,702 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Pipeline THREE PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd reported by f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106586728310}
scm_1       | 	at java.base/java.security.AccessController.doPrivileged(Native Method)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_1  | 	at org.apache.ratis.server.impl.StateMachineUpdater.checkAndTakeSnapshot(StateMachineUpdater.java:250)
datanode_3  | Caused by: org.apache.hadoop.util.DiskChecker$DiskOutOfSpaceException: Out of space: The volume with the most available space (=497782784 B) is less than the container size (=1073741824 B).
recon_1     | 2020-04-17 18:25:55,887 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Pipeline THREE PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd reported by f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106586728310}
scm_1       | 	at java.base/javax.security.auth.Subject.doAs(Subject.java:423)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_1  | 	at org.apache.ratis.server.impl.StateMachineUpdater.run(StateMachineUpdater.java:169)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.volume.RoundRobinVolumeChoosingPolicy.chooseVolume(RoundRobinVolumeChoosingPolicy.java:77)
recon_1     | 2020-04-17 18:25:55,889 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO pipeline.PipelineStateManager: Pipeline Pipeline[ Id: 31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:ALLOCATED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:25:25.493Z] moved to OPEN state
scm_1       | 	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1730)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueContainer.create(KeyValueContainer.java:124)
recon_1     | 2020-04-17 18:26:02,803 [pool-9-thread-1] INFO impl.OzoneManagerServiceProviderImpl: Syncing data from Ozone Manager.
scm_1       | 	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2682)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_1  | 2020-04-17 18:30:01,727 [Thread-159] INFO impl.FollowerState: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-53471EA74967-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
datanode_3  | 	... 13 more
recon_1     | 2020-04-17 18:26:02,805 [pool-9-thread-1] INFO impl.OzoneManagerServiceProviderImpl: Obtaining delta updates from Ozone Manager
scm_1       | 2020-04-17 18:25:50,655 [IPC Server handler 11 on 9860] INFO ipc.Server: IPC Server handler 11 on 9860, call Call#8 Retry#0 org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocol.submitRequest from 172.24.0.3:37049
datanode_2  | 	... 4 more
datanode_1  | 2020-04-17 18:30:01,728 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-53471EA74967-StateMachineUpdater] ERROR ratis.ContainerStateMachine: Failed to take snapshot  for group-53471EA74967 as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
datanode_3  | 2020-04-17 18:26:17,925 [ChunkWriter-54-0] INFO impl.HddsDispatcher: Operation: WriteChunk , Trace ID: 1ebccd3f95d7d6a9:57399964959fe306:1ebccd3f95d7d6a9:0 , Message: ContainerID 2 creation failed , Result: DISK_OUT_OF_SPACE , StorageContainerException Occurred.
recon_1     | 2020-04-17 18:26:03,027 [pool-9-thread-1] INFO impl.OzoneManagerServiceProviderImpl: Number of updates received from OM : 1
scm_1       | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 not found
datanode_2  | 2020-04-17 18:27:49,209 [Command processor thread] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: remove group-0181CC1CA0BD:null
datanode_1  | 2020-04-17 18:30:01,729 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-53471EA74967-StateMachineUpdater] ERROR impl.StateMachineUpdater: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-53471EA74967-StateMachineUpdater: Failed to take snapshot
datanode_3  | org.apache.hadoop.hdds.scm.container.common.helpers.StorageContainerException: ContainerID 2 creation failed
recon_1     | 2020-04-17 18:26:03,084 [pool-10-thread-1] INFO tasks.ContainerKeyMapperTask: ContainerKeyMapperTask successfully processed 0 OM DB update event(s).
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_2  | 2020-04-17 18:27:49,210 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd"
datanode_1  | org.apache.ratis.protocol.StateMachineException: Failed to take snapshot  for group-53471EA74967 as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatchRequest(HddsDispatcher.java:254)
recon_1     | 2020-04-17 18:26:03,246 [pool-10-thread-1] INFO tasks.FileSizeCountTask: Completed a 'process' run of FileSizeCountTask.
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.getPipeline(PipelineStateManager.java:63)
datanode_2  | 
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.takeSnapshot(ContainerStateMachine.java:288)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatch(HddsDispatcher.java:162)
recon_1     | 2020-04-17 18:26:17,957 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.getPipeline(SCMPipelineManager.java:267)
datanode_2  | java.io.IOException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-0181CC1CA0BD not found.
datanode_1  | 	at org.apache.ratis.server.impl.StateMachineUpdater.takeSnapshot(StateMachineUpdater.java:258)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.dispatchCommand(ContainerStateMachine.java:402)
recon_1     | 2020-04-17 18:26:17,976 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
scm_1       | 	at org.apache.hadoop.hdds.scm.server.SCMClientProtocolServer.getPipeline(SCMClientProtocolServer.java:409)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_1  | 	at org.apache.ratis.server.impl.StateMachineUpdater.checkAndTakeSnapshot(StateMachineUpdater.java:250)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.runCommand(ContainerStateMachine.java:412)
recon_1     | 2020-04-17 18:26:17,979 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd from datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689. Reason : ContainerID 2 creation failed
scm_1       | 	at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.getPipeline(StorageContainerLocationProtocolServerSideTranslatorPB.java:375)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_1  | 	at org.apache.ratis.server.impl.StateMachineUpdater.run(StateMachineUpdater.java:172)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.lambda$handleWriteChunk$2(ContainerStateMachine.java:447)
recon_1     | 2020-04-17 18:26:17,979 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:OPEN, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:25:25.493Z]
scm_1       | 	at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.processRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:249)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
recon_1     | 2020-04-17 18:26:17,980 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineStateManager: Pipeline Pipeline[ Id: 31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:25:25.493Z] moved to CLOSED state
scm_1       | 	at org.apache.hadoop.hdds.server.OzoneProtocolMessageDispatcher.processRequest(OzoneProtocolMessageDispatcher.java:75)
scm_1       | 	at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:120)
datanode_1  | 2020-04-17 18:30:01,730 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-53471EA74967-StateMachineUpdater] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.state_machine.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-53471EA74967
datanode_3  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
scm_1       | 	at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:31605)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
recon_1     | 2020-04-17 18:26:18,002 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd from datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689. Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-C694AA0D4B95, cid=1
datanode_1  | 2020-04-17 18:30:01,736 [Command processor thread] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-53471EA74967: closes. applyIndex: 0
datanode_3  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
scm_1       | 	at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:524)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
recon_1     | 	 State Machine: cmdType: WriteChunk traceID: "1ebccd3f95d7d6a9:57399964959fe306:1ebccd3f95d7d6a9:0" containerID: 2 datanodeUuid: "0086d012-6f96-4817-8e1b-94f6eaa443bc" pipelineID: "31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd" writeChunk { blockID { containerID: 2 localID: 104015329795637249 blockCommitSequenceId: 0 } chunkData { chunkName: "104015329795637249_chunk_1" offset: 0 len: 17540 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: " wi\267" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDIgbG9jSUQ6IDEwNDAxNTMyOTc5NTYzNzI0ORisl6r0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BABzNCbq3Zmvfa3yTq6FmM7apbRJBLNj70Fdy71QfyNGPUI_zSHiJgowFwauC0MUx8yhkvrgwvdo-uu1lAA1B0edRqZSMq2oHqNg-tDm0ooQOKsasGPDtYicaGKLPS5N0Rf7ilWHxlql-PDYb1vkrPdV3FFltubzTfhs9bq3mHNm_OCvY13At7kMafgSZCOBh5l2sCCxQ_pB1ODPiIq-HeF0bqFw0FJRTYMKfKKjgOQ7er_5UNoZgfPZHWkNXzMSZ9R8OYzJBH3oGUH7HVQeMH1qy3GeqsB8hpJ3ZJvgQcPeQzDWHJ9N59nIBEqmBn3h_7QDhpNuW60lPC2a0oRfxQtwQSEREU19CTE9DS19UT0tFTiJjb25JRDogMiBsb2NJRDogMTA0MDE1MzI5Nzk1NjM3MjQ5", container path=nonexistent
datanode_1  | 2020-04-17 18:30:01,736 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-53471EA74967-SegmentedRaftLogWorker] INFO segmented.SegmentedRaftLogWorker: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-53471EA74967-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1025)
datanode_2  | Caused by: org.apache.ratis.protocol.GroupMismatchException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-0181CC1CA0BD not found.
recon_1     | 2020-04-17 18:26:18,002 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:25:25.493Z]
datanode_1  | 2020-04-17 18:30:01,737 [Command processor thread] INFO segmented.SegmentedRaftLogWorker: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-53471EA74967-SegmentedRaftLogWorker close()
datanode_3  | 2020-04-17 18:26:17,925 [ChunkWriter-54-0] ERROR ratis.ContainerStateMachine: group-0181CC1CA0BD: writeChunk writeStateMachineData failed: blockIdcontainerID: 2
scm_1       | 	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:876)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
recon_1     | 2020-04-17 18:26:18,003 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 2020-04-17 18:30:01,744 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.log_worker.0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_3  | localID: 104015329795637249
scm_1       | 	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:822)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
recon_1     | 2020-04-17 18:26:18,010 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 2020-04-17 18:30:01,744 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.leader_election.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-53471EA74967
datanode_3  | blockCommitSequenceId: 0
scm_1       | 	at java.base/java.security.AccessController.doPrivileged(Native Method)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
recon_1     | 2020-04-17 18:26:18,044 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_1  | 2020-04-17 18:30:01,744 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.server.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-53471EA74967
datanode_3  |  logIndex 1 chunkName 104015329795637249_chunk_1 Error message: ContainerID 2 creation failed Container Result: DISK_OUT_OF_SPACE
scm_1       | 	at java.base/javax.security.auth.Subject.doAs(Subject.java:423)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
recon_1     | 2020-04-17 18:26:18,045 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd from datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc. Reason : ContainerID 2 creation failed
datanode_3  | 2020-04-17 18:26:17,925 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD-SegmentedRaftLogWorker] ERROR ratis.XceiverServerRatis: pipeline Action CLOSE on pipeline PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd.Reason : ContainerID 2 creation failed
datanode_1  | 2020-04-17 18:30:01,746 [Command processor thread] INFO commandhandler.ClosePipelineCommandHandler: Close Pipeline #id: "33e2f66f-a610-4776-a5ba-53471ea74967"
scm_1       | 	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1730)
datanode_2  | 	... 4 more
recon_1     | 2020-04-17 18:26:18,056 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:25:25.493Z]
datanode_3  | 2020-04-17 18:26:17,986 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD-SegmentedRaftLogWorker] ERROR ratis.XceiverServerRatis: pipeline Action CLOSE on pipeline PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd.Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-C694AA0D4B95, cid=1
datanode_1  |  command on datanode #0086d012-6f96-4817-8e1b-94f6eaa443bc.
scm_1       | 	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2682)
datanode_2  | 2020-04-17 18:27:49,210 [Command processor thread] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: remove group-0181CC1CA0BD:null
recon_1     | 2020-04-17 18:26:18,059 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd from datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc. Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-C694AA0D4B95, cid=1
datanode_3  | 	 State Machine: cmdType: WriteChunk traceID: "1ebccd3f95d7d6a9:57399964959fe306:1ebccd3f95d7d6a9:0" containerID: 2 datanodeUuid: "0086d012-6f96-4817-8e1b-94f6eaa443bc" pipelineID: "31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd" writeChunk { blockID { containerID: 2 localID: 104015329795637249 blockCommitSequenceId: 0 } chunkData { chunkName: "104015329795637249_chunk_1" offset: 0 len: 17540 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: " wi\267" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDIgbG9jSUQ6IDEwNDAxNTMyOTc5NTYzNzI0ORisl6r0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BABzNCbq3Zmvfa3yTq6FmM7apbRJBLNj70Fdy71QfyNGPUI_zSHiJgowFwauC0MUx8yhkvrgwvdo-uu1lAA1B0edRqZSMq2oHqNg-tDm0ooQOKsasGPDtYicaGKLPS5N0Rf7ilWHxlql-PDYb1vkrPdV3FFltubzTfhs9bq3mHNm_OCvY13At7kMafgSZCOBh5l2sCCxQ_pB1ODPiIq-HeF0bqFw0FJRTYMKfKKjgOQ7er_5UNoZgfPZHWkNXzMSZ9R8OYzJBH3oGUH7HVQeMH1qy3GeqsB8hpJ3ZJvgQcPeQzDWHJ9N59nIBEqmBn3h_7QDhpNuW60lPC2a0oRfxQtwQSEREU19CTE9DS19UT0tFTiJjb25JRDogMiBsb2NJRDogMTA0MDE1MzI5Nzk1NjM3MjQ5", container path=nonexistent
datanode_1  | 2020-04-17 18:30:01,747 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: addNew group-002956D72CAC:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] returns group-002956D72CAC:java.util.concurrent.CompletableFuture@3a140a17[Not completed]
scm_1       | 2020-04-17 18:25:50,698 [IPC Server handler 2 on 9860] INFO ipc.Server: IPC Server handler 2 on 9860, call Call#9 Retry#0 org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocol.submitRequest from 172.24.0.3:37049
datanode_2  | 2020-04-17 18:27:49,210 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd"
recon_1     | 	 State Machine: cmdType: WriteChunk traceID: "1ebccd3f95d7d6a9:57399964959fe306:1ebccd3f95d7d6a9:0" containerID: 2 datanodeUuid: "0086d012-6f96-4817-8e1b-94f6eaa443bc" pipelineID: "31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd" writeChunk { blockID { containerID: 2 localID: 104015329795637249 blockCommitSequenceId: 0 } chunkData { chunkName: "104015329795637249_chunk_1" offset: 0 len: 17540 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: " wi\267" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDIgbG9jSUQ6IDEwNDAxNTMyOTc5NTYzNzI0ORisl6r0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BABzNCbq3Zmvfa3yTq6FmM7apbRJBLNj70Fdy71QfyNGPUI_zSHiJgowFwauC0MUx8yhkvrgwvdo-uu1lAA1B0edRqZSMq2oHqNg-tDm0ooQOKsasGPDtYicaGKLPS5N0Rf7ilWHxlql-PDYb1vkrPdV3FFltubzTfhs9bq3mHNm_OCvY13At7kMafgSZCOBh5l2sCCxQ_pB1ODPiIq-HeF0bqFw0FJRTYMKfKKjgOQ7er_5UNoZgfPZHWkNXzMSZ9R8OYzJBH3oGUH7HVQeMH1qy3GeqsB8hpJ3ZJvgQcPeQzDWHJ9N59nIBEqmBn3h_7QDhpNuW60lPC2a0oRfxQtwQSEREU19CTE9DS19UT0tFTiJjb25JRDogMiBsb2NJRDogMTA0MDE1MzI5Nzk1NjM3MjQ5", container path=nonexistent
datanode_3  | 2020-04-17 18:26:21,613 [Command processor thread] ERROR commandhandler.CloseContainerCommandHandler: Container #2 does not exist in datanode. Container close failed.
datanode_1  | 2020-04-17 18:30:01,749 [pool-70-thread-1] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc: new RaftServerImpl for group-002956D72CAC:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] with ContainerStateMachine:uninitialized
scm_1       | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=c6484984-fa4c-47a5-afdd-2a8041abd0b3 not found
datanode_2  | 
recon_1     | 2020-04-17 18:26:18,059 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:25:25.493Z]
datanode_3  | 2020-04-17 18:27:48,952 [grpc-default-executor-2] INFO server.GrpcServerProtocolService: 3989634e-60c9-4e5a-8523-9408dc0a802d: Completed APPEND_ENTRIES, lastRequest: f2e775cd-89a9-41b5-a9e0-4408e0d60689->3989634e-60c9-4e5a-8523-9408dc0a802d#11-t1, previous=(t:1, i:1), leaderCommit=0, initializing? false, entries: size=1, first=(t:1, i:2), STATEMACHINELOGENTRY, client-C694AA0D4B95, cid=2
datanode_1  | 2020-04-17 18:30:01,749 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.min = 5s (custom)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_2  | java.io.IOException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-0181CC1CA0BD not found.
recon_1     | 2020-04-17 18:26:18,059 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_3  | 2020-04-17 18:27:48,987 [Command processor thread] INFO impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: remove  FOLLOWER 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD:t1, leader=f2e775cd-89a9-41b5-a9e0-4408e0d60689, voted=3989634e-60c9-4e5a-8523-9408dc0a802d, raftlog=3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD-SegmentedRaftLog:OPENED:c0,f0,i2, conf=0: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null RUNNING
datanode_1  | 2020-04-17 18:30:01,749 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.max = 5200ms (custom)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.getPipeline(PipelineStateManager.java:63)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
recon_1     | 2020-04-17 18:26:18,063 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd from datanode 3989634e-60c9-4e5a-8523-9408dc0a802d. Reason : ContainerID 2 creation failed
datanode_3  | 2020-04-17 18:27:48,987 [Command processor thread] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD: shutdown
datanode_1  | 2020-04-17 18:30:01,749 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpcslowness.timeout = 300s (custom)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.getPipeline(SCMPipelineManager.java:267)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
recon_1     | 2020-04-17 18:26:18,067 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:25:25.493Z]
datanode_3  | 2020-04-17 18:27:48,987 [Command processor thread] INFO util.JmxRegister: Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-0181CC1CA0BD,id=3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_1  | 2020-04-17 18:30:01,749 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.sleep.deviation.threshold = 300 (default)
scm_1       | 	at org.apache.hadoop.hdds.scm.server.SCMClientProtocolServer.getPipeline(SCMClientProtocolServer.java:409)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
recon_1     | 2020-04-17 18:26:18,071 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd from datanode 3989634e-60c9-4e5a-8523-9408dc0a802d. Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-C694AA0D4B95, cid=1
datanode_3  | 2020-04-17 18:27:48,987 [Command processor thread] INFO impl.RoleInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d: shutdown FollowerState
datanode_3  | 2020-04-17 18:27:48,988 [Thread-58] INFO impl.FollowerState: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
scm_1       | 	at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.getPipeline(StorageContainerLocationProtocolServerSideTranslatorPB.java:375)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_3  | 2020-04-17 18:27:48,988 [Command processor thread] INFO impl.StateMachineUpdater: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD-StateMachineUpdater: set stopIndex = 0
datanode_1  | 2020-04-17 18:30:01,749 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.install.snapshot.enabled = false (custom)
recon_1     | 	 State Machine: cmdType: WriteChunk traceID: "1ebccd3f95d7d6a9:57399964959fe306:1ebccd3f95d7d6a9:0" containerID: 2 datanodeUuid: "0086d012-6f96-4817-8e1b-94f6eaa443bc" pipelineID: "31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd" writeChunk { blockID { containerID: 2 localID: 104015329795637249 blockCommitSequenceId: 0 } chunkData { chunkName: "104015329795637249_chunk_1" offset: 0 len: 17540 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: " wi\267" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDIgbG9jSUQ6IDEwNDAxNTMyOTc5NTYzNzI0ORisl6r0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BABzNCbq3Zmvfa3yTq6FmM7apbRJBLNj70Fdy71QfyNGPUI_zSHiJgowFwauC0MUx8yhkvrgwvdo-uu1lAA1B0edRqZSMq2oHqNg-tDm0ooQOKsasGPDtYicaGKLPS5N0Rf7ilWHxlql-PDYb1vkrPdV3FFltubzTfhs9bq3mHNm_OCvY13At7kMafgSZCOBh5l2sCCxQ_pB1ODPiIq-HeF0bqFw0FJRTYMKfKKjgOQ7er_5UNoZgfPZHWkNXzMSZ9R8OYzJBH3oGUH7HVQeMH1qy3GeqsB8hpJ3ZJvgQcPeQzDWHJ9N59nIBEqmBn3h_7QDhpNuW60lPC2a0oRfxQtwQSEREU19CTE9DS19UT0tFTiJjb25JRDogMiBsb2NJRDogMTA0MDE1MzI5Nzk1NjM3MjQ5", container path=nonexistent
scm_1       | 	at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.processRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:249)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 2020-04-17 18:27:48,989 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD-StateMachineUpdater] ERROR ratis.ContainerStateMachine: Failed to take snapshot  for group-0181CC1CA0BD as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
datanode_1  | 2020-04-17 18:30:01,749 [pool-70-thread-1] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC: ConfigurationManager, init=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null, confs=<EMPTY_MAP>
recon_1     | 2020-04-17 18:26:18,071 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:25:25.493Z]
scm_1       | 	at org.apache.hadoop.hdds.server.OzoneProtocolMessageDispatcher.processRequest(OzoneProtocolMessageDispatcher.java:75)
datanode_2  | Caused by: org.apache.ratis.protocol.GroupMismatchException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-0181CC1CA0BD not found.
datanode_3  | 2020-04-17 18:27:48,989 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD-StateMachineUpdater] ERROR impl.StateMachineUpdater: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD-StateMachineUpdater: Failed to take snapshot
datanode_1  | 2020-04-17 18:30:01,749 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.storage.dir = [/data/metadata/ratis] (custom)
recon_1     | 2020-04-17 18:26:47,965 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
scm_1       | 	at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:120)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_3  | org.apache.ratis.protocol.StateMachineException: Failed to take snapshot  for group-0181CC1CA0BD as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
datanode_1  | 2020-04-17 18:30:01,750 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.corruption.policy = EXCEPTION (default)
recon_1     | 2020-04-17 18:26:47,979 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
scm_1       | 	at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:31605)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.takeSnapshot(ContainerStateMachine.java:288)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_1  | 2020-04-17 18:30:01,750 [pool-70-thread-1] INFO storage.RaftStorageDirectory: The storage directory /data/metadata/ratis/1ca28fd5-8074-4f27-a46a-002956d72cac does not exist. Creating ...
recon_1     | 2020-04-17 18:26:48,022 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
scm_1       | 	at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:524)
datanode_3  | 	at org.apache.ratis.server.impl.StateMachineUpdater.takeSnapshot(StateMachineUpdater.java:258)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_1  | 2020-04-17 18:30:01,754 [pool-70-thread-1] INFO storage.RaftStorageDirectory: Lock on /data/metadata/ratis/1ca28fd5-8074-4f27-a46a-002956d72cac/in_use.lock acquired by nodename 6@1e870b3d5d4c
recon_1     | 2020-04-17 18:26:48,024 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
scm_1       | 	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1025)
datanode_3  | 	at org.apache.ratis.server.impl.StateMachineUpdater.checkAndTakeSnapshot(StateMachineUpdater.java:250)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_1  | 2020-04-17 18:30:01,756 [pool-70-thread-1] INFO storage.RaftStorage: Storage directory /data/metadata/ratis/1ca28fd5-8074-4f27-a46a-002956d72cac has been successfully formatted.
recon_1     | 2020-04-17 18:26:48,034 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
scm_1       | 	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:876)
datanode_3  | 	at org.apache.ratis.server.impl.StateMachineUpdater.run(StateMachineUpdater.java:169)
datanode_2  | 	... 4 more
datanode_1  | 2020-04-17 18:30:01,756 [pool-70-thread-1] INFO ratis.ContainerStateMachine: group-002956D72CAC: The snapshot info is null. Setting the last applied indexto:(t:0, i:~)
recon_1     | 2020-04-17 18:26:48,039 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
scm_1       | 	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:822)
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 2020-04-17 18:27:54,162 [Thread-112] INFO impl.FollowerState: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-FollowerState: change to CANDIDATE, lastRpcTime:5105ms, electionTimeout:5099ms
datanode_1  | 2020-04-17 18:30:01,756 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.notification.no-leader.timeout = 60s (default)
recon_1     | 2020-04-17 18:27:03,272 [pool-9-thread-1] INFO impl.OzoneManagerServiceProviderImpl: Syncing data from Ozone Manager.
scm_1       | 	at java.base/java.security.AccessController.doPrivileged(Native Method)
datanode_3  | 2020-04-17 18:27:48,990 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD-StateMachineUpdater] ERROR ratis.ContainerStateMachine: Failed to take snapshot  for group-0181CC1CA0BD as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
datanode_2  | 2020-04-17 18:27:54,163 [Thread-112] INFO impl.RoleInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689: shutdown FollowerState
datanode_1  | 2020-04-17 18:30:01,757 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.use.memory = false (default)
recon_1     | 2020-04-17 18:27:03,274 [pool-9-thread-1] INFO impl.OzoneManagerServiceProviderImpl: Obtaining delta updates from Ozone Manager
scm_1       | 	at java.base/javax.security.auth.Subject.doAs(Subject.java:423)
datanode_3  | 2020-04-17 18:27:48,990 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD-StateMachineUpdater] ERROR impl.StateMachineUpdater: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD-StateMachineUpdater: Failed to take snapshot
datanode_2  | 2020-04-17 18:27:54,163 [Thread-112] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
datanode_1  | 2020-04-17 18:30:01,757 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.purge.gap = 1000000 (custom)
recon_1     | 2020-04-17 18:27:03,303 [pool-9-thread-1] INFO impl.OzoneManagerServiceProviderImpl: Number of updates received from OM : 3
scm_1       | 	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1730)
datanode_3  | org.apache.ratis.protocol.StateMachineException: Failed to take snapshot  for group-0181CC1CA0BD as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
datanode_2  | 2020-04-17 18:27:54,163 [Thread-112] INFO impl.RoleInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689: start LeaderElection
datanode_1  | 2020-04-17 18:30:01,757 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
recon_1     | 2020-04-17 18:27:03,308 [pool-10-thread-1] INFO tasks.ContainerKeyMapperTask: ContainerKeyMapperTask successfully processed 0 OM DB update event(s).
scm_1       | 	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2682)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.takeSnapshot(ContainerStateMachine.java:288)
datanode_2  | 2020-04-17 18:27:54,169 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-LeaderElection3] INFO impl.LeaderElection: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-LeaderElection3: begin an election at term 1 for -1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null
datanode_1  | 2020-04-17 18:30:01,758 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
recon_1     | 2020-04-17 18:27:03,396 [pool-10-thread-1] INFO tasks.FileSizeCountTask: Completed a 'process' run of FileSizeCountTask.
scm_1       | 2020-04-17 18:25:51,716 [Socket Reader #1 for port 9863] INFO ipc.Server: Auth successful for om/om@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 	at org.apache.ratis.server.impl.StateMachineUpdater.takeSnapshot(StateMachineUpdater.java:258)
datanode_2  | 2020-04-17 18:27:54,194 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-LeaderElection3] INFO impl.LeaderElection: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-LeaderElection3: Election PASSED; received 1 response(s) [f2e775cd-89a9-41b5-a9e0-4408e0d60689<-0086d012-6f96-4817-8e1b-94f6eaa443bc#0:OK-t1] and 0 exception(s); f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967:t1, leader=null, voted=f2e775cd-89a9-41b5-a9e0-4408e0d60689, raftlog=f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null
datanode_1  | 2020-04-17 18:30:01,758 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.log_worker.0086d012-6f96-4817-8e1b-94f6eaa443bc
recon_1     | 2020-04-17 18:27:17,964 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
scm_1       | 2020-04-17 18:25:51,729 [Socket Reader #1 for port 9863] INFO authorize.ServiceAuthorizationManager: Authorization successful for om/om@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.hdds.scm.protocol.ScmBlockLocationProtocol
datanode_3  | 	at org.apache.ratis.server.impl.StateMachineUpdater.checkAndTakeSnapshot(StateMachineUpdater.java:250)
datanode_2  | 2020-04-17 18:27:54,194 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-LeaderElection3] INFO impl.RoleInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689: shutdown LeaderElection
datanode_1  | 2020-04-17 18:30:01,758 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.cache.num.max = 2 (custom)
recon_1     | 2020-04-17 18:27:18,012 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
scm_1       | 2020-04-17 18:25:51,730 [IPC Server handler 6 on 9863] ERROR pipeline.SCMPipelineManager: Failed to create pipeline of type RATIS and factor THREE. Exception: Pipeline creation failed because nodes are engaged in other pipelines and every node can only be engaged in max 2 pipelines. Required 3. Found 0
datanode_3  | 	at org.apache.ratis.server.impl.StateMachineUpdater.run(StateMachineUpdater.java:172)
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_1  | 2020-04-17 18:30:01,760 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: new 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-SegmentedRaftLogWorker for RaftStorage:Storage Directory /data/metadata/ratis/1ca28fd5-8074-4f27-a46a-002956d72cac
recon_1     | 2020-04-17 18:27:18,013 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_3  | 2020-04-17 18:27:48,990 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD-StateMachineUpdater] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.state_machine.3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD
datanode_2  | 2020-04-17 18:27:54,195 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-LeaderElection3] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
scm_1       | 2020-04-17 18:25:51,731 [IPC Server handler 6 on 9863] WARN block.BlockManagerImpl: Pipeline creation failed for type:RATIS factor:THREE. Datanodes may be used up.
datanode_2  | 2020-04-17 18:27:54,195 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-LeaderElection3] INFO ratis.XceiverServerRatis: Leader change notification received for group: group-53471EA74967 with new leaderId: f2e775cd-89a9-41b5-a9e0-4408e0d60689
recon_1     | 2020-04-17 18:27:18,027 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 2020-04-17 18:27:48,991 [Command processor thread] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD: closes. applyIndex: 0
scm_1       | org.apache.hadoop.hdds.scm.exceptions.SCMException: Pipeline creation failed because nodes are engaged in other pipelines and every node can only be engaged in max 2 pipelines. Required 3. Found 0
datanode_1  | 2020-04-17 18:30:01,760 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.byte-limit = 2147483647 (custom)
datanode_2  | 2020-04-17 18:27:54,195 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-LeaderElection3] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967: change Leader from null to f2e775cd-89a9-41b5-a9e0-4408e0d60689 at term 1 for becomeLeader, leader elected after 5175ms
recon_1     | 2020-04-17 18:27:18,031 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_3  | 2020-04-17 18:27:48,991 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD-SegmentedRaftLogWorker] INFO segmented.SegmentedRaftLogWorker: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.filterViableNodes(PipelinePlacementPolicy.java:173)
datanode_1  | 2020-04-17 18:30:01,760 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.element-limit = 1024 (custom)
datanode_2  | 2020-04-17 18:27:54,213 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-LeaderElection3] INFO server.RaftServerConfigKeys: raft.server.staging.catchup.gap = 1000 (default)
recon_1     | 2020-04-17 18:27:18,039 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_3  | 2020-04-17 18:27:48,993 [Command processor thread] INFO segmented.SegmentedRaftLogWorker: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD-SegmentedRaftLogWorker close()
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.chooseDatanodes(PipelinePlacementPolicy.java:196)
datanode_1  | 2020-04-17 18:30:01,760 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
datanode_2  | 2020-04-17 18:27:54,213 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-LeaderElection3] INFO server.RaftServerConfigKeys: raft.server.rpc.sleep.time = 25ms (default)
recon_1     | 2020-04-17 18:27:23,983 [RatisPipelineUtilsThread] INFO pipeline.PipelineStateManager: Pipeline Pipeline[ Id: 31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:25:25.493Z] removed from db
datanode_3  | 2020-04-17 18:27:48,996 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.log_worker.3989634e-60c9-4e5a-8523-9408dc0a802d
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.RatisPipelineProvider.create(RatisPipelineProvider.java:116)
datanode_1  | 2020-04-17 18:30:01,760 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.preallocated.size = 16384 (custom)
datanode_2  | 2020-04-17 18:27:54,213 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-LeaderElection3] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.log_appender.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967
recon_1     | 2020-04-17 18:27:24,002 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:25:25.493Z]
datanode_3  | 2020-04-17 18:27:48,996 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.leader_election.3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineFactory.create(PipelineFactory.java:63)
datanode_1  | 2020-04-17 18:30:01,761 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.write.buffer.size = 1048576 (custom)
datanode_2  | 2020-04-17 18:27:54,213 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-LeaderElection3] INFO server.RaftServerConfigKeys: raft.server.write.element-limit = 1024 (custom)
recon_1     | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd not found
datanode_3  | 2020-04-17 18:27:48,996 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.server.3989634e-60c9-4e5a-8523-9408dc0a802d@group-0181CC1CA0BD
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.createPipeline(SCMPipelineManager.java:232)
datanode_1  | 2020-04-17 18:30:01,761 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.force.sync.num = 128 (default)
datanode_2  | 2020-04-17 18:27:54,213 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-LeaderElection3] INFO server.RaftServerConfigKeys: raft.server.write.byte-limit = 1073741824 (custom)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
scm_1       | 	at org.apache.hadoop.hdds.scm.block.BlockManagerImpl.allocateBlock(BlockManagerImpl.java:200)
datanode_3  | 2020-04-17 18:27:48,997 [Command processor thread] INFO commandhandler.ClosePipelineCommandHandler: Close Pipeline #id: "31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd"
datanode_1  | 2020-04-17 18:30:01,762 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync = true (default)
datanode_2  | 2020-04-17 18:27:54,214 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-LeaderElection3] INFO server.RaftServerConfigKeys: raft.server.watch.timeout = 180s (custom)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
scm_1       | 	at org.apache.hadoop.hdds.scm.server.SCMBlockProtocolServer.allocateBlock(SCMBlockProtocolServer.java:190)
datanode_3  |  command on datanode #3989634e-60c9-4e5a-8523-9408dc0a802d.
datanode_1  | 2020-04-17 18:30:01,762 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout = 10s (default)
datanode_2  | 2020-04-17 18:27:54,214 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-LeaderElection3] INFO server.RaftServerConfigKeys: raft.server.watch.timeout.denomination = 1s (default)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
scm_1       | 	at org.apache.hadoop.hdds.scm.protocol.ScmBlockLocationProtocolServerSideTranslatorPB.allocateScmBlock(ScmBlockLocationProtocolServerSideTranslatorPB.java:161)
datanode_3  | 2020-04-17 18:27:48,998 [Command processor thread] INFO impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: addNew group-53471EA74967:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] returns group-53471EA74967:java.util.concurrent.CompletableFuture@721d6605[Not completed]
datanode_1  | 2020-04-17 18:30:01,762 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
datanode_2  | 2020-04-17 18:27:54,214 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-LeaderElection3] INFO server.RaftServerConfigKeys: raft.server.watch.element-limit = 65536 (default)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
scm_1       | 	at org.apache.hadoop.hdds.scm.protocol.ScmBlockLocationProtocolServerSideTranslatorPB.processMessage(ScmBlockLocationProtocolServerSideTranslatorPB.java:119)
datanode_3  | 2020-04-17 18:27:49,009 [pool-70-thread-1] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d: new RaftServerImpl for group-53471EA74967:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] with ContainerStateMachine:uninitialized
datanode_1  | 2020-04-17 18:30:01,765 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.caching.enabled = true (custom)
datanode_2  | 2020-04-17 18:27:54,215 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-LeaderElection3] INFO server.RaftServerConfigKeys: raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
recon_1     | 	at org.apache.hadoop.ozone.recon.scm.ReconPipelineManager.destroyPipeline(ReconPipelineManager.java:74)
scm_1       | 	at org.apache.hadoop.hdds.server.OzoneProtocolMessageDispatcher.processRequest(OzoneProtocolMessageDispatcher.java:75)
datanode_3  | 2020-04-17 18:27:49,011 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.min = 5s (custom)
datanode_1  | 2020-04-17 18:30:01,766 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
datanode_2  | 2020-04-17 18:27:54,217 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-LeaderElection3] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
scm_1       | 	at org.apache.hadoop.hdds.scm.protocol.ScmBlockLocationProtocolServerSideTranslatorPB.send(ScmBlockLocationProtocolServerSideTranslatorPB.java:100)
datanode_3  | 2020-04-17 18:27:49,011 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.max = 5200ms (custom)
datanode_1  | 2020-04-17 18:30:01,778 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.enabled = true (custom)
datanode_2  | 2020-04-17 18:27:54,217 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-LeaderElection3] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.element-limit = 1 (custom)
recon_1     | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
scm_1       | 	at org.apache.hadoop.hdds.protocol.proto.ScmBlockLocationProtocolProtos$ScmBlockLocationProtocolService$2.callBlockingMethod(ScmBlockLocationProtocolProtos.java:13157)
datanode_3  | 2020-04-17 18:27:49,011 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpcslowness.timeout = 300s (custom)
datanode_1  | 2020-04-17 18:30:01,797 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
datanode_2  | 2020-04-17 18:27:54,217 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-LeaderElection3] INFO grpc.GrpcConfigKeys: raft.grpc.server.leader.outstanding.appends.max = 128 (default)
recon_1     | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
scm_1       | 	at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:524)
datanode_3  | 2020-04-17 18:27:49,011 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.sleep.deviation.threshold = 300 (default)
datanode_1  | 2020-04-17 18:30:01,799 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.retention.file.num = 5 (custom)
datanode_2  | 2020-04-17 18:27:54,217 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-LeaderElection3] INFO server.RaftServerConfigKeys: raft.server.rpc.request.timeout = 60s (custom)
recon_1     | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
scm_1       | 	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1025)
datanode_3  | 2020-04-17 18:27:49,012 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.install.snapshot.enabled = false (custom)
datanode_1  | 2020-04-17 18:30:01,799 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.retrycache.expirytime = 600000ms (custom)
datanode_2  | 2020-04-17 18:27:54,217 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-LeaderElection3] INFO server.RaftServerConfigKeys: raft.server.log.appender.install.snapshot.enabled = false (custom)
recon_1     | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
scm_1       | 	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:876)
datanode_3  | 2020-04-17 18:27:49,012 [pool-70-thread-1] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967: ConfigurationManager, init=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null, confs=<EMPTY_MAP>
datanode_1  | 2020-04-17 18:30:01,799 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.leader_election.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC
datanode_2  | 2020-04-17 18:27:54,218 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-LeaderElection3] INFO server.RaftServerConfigKeys: raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
datanode_2  | 2020-04-17 18:27:54,219 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-LeaderElection3] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
scm_1       | 	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:822)
datanode_3  | 2020-04-17 18:27:49,012 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.storage.dir = [/data/metadata/ratis] (custom)
datanode_1  | 2020-04-17 18:30:01,804 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.server.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC
datanode_2  | 2020-04-17 18:27:54,219 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-LeaderElection3] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.element-limit = 1 (custom)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
scm_1       | 	at java.base/java.security.AccessController.doPrivileged(Native Method)
datanode_3  | 2020-04-17 18:27:49,013 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.corruption.policy = EXCEPTION (default)
datanode_1  | 2020-04-17 18:30:01,805 [pool-70-thread-1] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC: start as a follower, conf=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null
datanode_2  | 2020-04-17 18:27:54,219 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-LeaderElection3] INFO grpc.GrpcConfigKeys: raft.grpc.server.leader.outstanding.appends.max = 128 (default)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
scm_1       | 	at java.base/javax.security.auth.Subject.doAs(Subject.java:423)
datanode_3  | 2020-04-17 18:27:49,013 [pool-70-thread-1] INFO storage.RaftStorageDirectory: The storage directory /data/metadata/ratis/33e2f66f-a610-4776-a5ba-53471ea74967 does not exist. Creating ...
datanode_1  | 2020-04-17 18:30:01,806 [pool-70-thread-1] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC: changes role from      null to FOLLOWER at term 0 for startAsFollower
datanode_2  | 2020-04-17 18:27:54,219 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-LeaderElection3] INFO server.RaftServerConfigKeys: raft.server.rpc.request.timeout = 60s (custom)
recon_1     | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1730)
datanode_3  | 2020-04-17 18:27:49,027 [pool-70-thread-1] INFO storage.RaftStorageDirectory: Lock on /data/metadata/ratis/33e2f66f-a610-4776-a5ba-53471ea74967/in_use.lock acquired by nodename 6@9dd073498a2e
datanode_1  | 2020-04-17 18:30:01,807 [pool-70-thread-1] INFO impl.RoleInfo: 0086d012-6f96-4817-8e1b-94f6eaa443bc: start FollowerState
datanode_2  | 2020-04-17 18:27:54,220 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-LeaderElection3] INFO server.RaftServerConfigKeys: raft.server.log.appender.install.snapshot.enabled = false (custom)
recon_1     | 2020-04-17 18:27:24,056 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:25:25.493Z]
scm_1       | 	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2682)
datanode_3  | 2020-04-17 18:27:49,031 [pool-70-thread-1] INFO storage.RaftStorage: Storage directory /data/metadata/ratis/33e2f66f-a610-4776-a5ba-53471ea74967 has been successfully formatted.
datanode_1  | 2020-04-17 18:30:01,808 [pool-70-thread-1] INFO util.JmxRegister: Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-002956D72CAC,id=0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_2  | 2020-04-17 18:27:54,220 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-LeaderElection3] INFO impl.RoleInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689: start LeaderState
recon_1     | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd not found
scm_1       | 2020-04-17 18:25:51,731 [IPC Server handler 6 on 9863] ERROR block.BlockManagerImpl: Unable to allocate a block for the size: 268435456, type: RATIS, factor: THREE
datanode_3  | 2020-04-17 18:27:49,032 [pool-70-thread-1] INFO ratis.ContainerStateMachine: group-53471EA74967: The snapshot info is null. Setting the last applied indexto:(t:0, i:~)
datanode_1  | 2020-04-17 18:30:01,808 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.state_machine.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
datanode_3  | 2020-04-17 18:27:49,034 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.notification.no-leader.timeout = 60s (default)
datanode_2  | 2020-04-17 18:27:54,221 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-LeaderElection3] INFO segmented.SegmentedRaftLogWorker: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-SegmentedRaftLogWorker: Starting segment from index:0
datanode_2  | 2020-04-17 18:27:54,230 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-SegmentedRaftLogWorker] INFO segmented.SegmentedRaftLogWorker: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-SegmentedRaftLogWorker: created new log segment /data/metadata/ratis/33e2f66f-a610-4776-a5ba-53471ea74967/current/log_inprogress_0
scm_1       | 2020-04-17 18:25:54,355 [Socket Reader #1 for port 9860] INFO ipc.Server: Auth successful for om/om@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 2020-04-17 18:30:01,920 [grpc-default-executor-1] WARN impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Failed groupAdd* GroupManagementRequest:client-4AD8B4E7F103->0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC, cid=7, seq=0, RW, null, Add:group-002956D72CAC:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858]
datanode_3  | 2020-04-17 18:27:49,034 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.use.memory = false (default)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
scm_1       | 2020-04-17 18:25:54,357 [Socket Reader #1 for port 9860] INFO authorize.ServiceAuthorizationManager: Authorization successful for om/om@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocol
datanode_2  | 2020-04-17 18:27:54,232 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-LeaderElection3] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967: set configuration 0: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null at 0
datanode_1  | java.util.concurrent.CompletionException: org.apache.ratis.protocol.AlreadyExistsException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Failed to add group-002956D72CAC:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
datanode_3  | 2020-04-17 18:27:49,034 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.purge.gap = 1000000 (custom)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
scm_1       | 2020-04-17 18:25:55,894 [EventQueue-PipelineReportForPipelineReportHandler] INFO pipeline.PipelineStateManager: Pipeline Pipeline[ Id: 31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:ALLOCATED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:25:25.493440Z] moved to OPEN state
datanode_2  | 2020-04-17 18:27:54,245 [grpc-default-executor-3] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-   LEADER: Withhold vote from candidate 3989634e-60c9-4e5a-8523-9408dc0a802d with term 1. State: leader=f2e775cd-89a9-41b5-a9e0-4408e0d60689, term=1, lastRpcElapsed=null
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
datanode_3  | 2020-04-17 18:27:49,034 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
recon_1     | 	at org.apache.hadoop.ozone.recon.scm.ReconPipelineManager.destroyPipeline(ReconPipelineManager.java:74)
scm_1       | 2020-04-17 18:26:16,615 [Socket Reader #1 for port 9863] INFO ipc.Server: Auth successful for om/om@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | 2020-04-17 18:28:30,693 [ChunkWriter-4-0] INFO keyvalue.KeyValueHandler: Operation: CreateContainer , Trace ID: 16384e45b8dca920:69dadb773b7d9073:16384e45b8dca920:0 , Message: Container creation failed, due to disk out of space , Result: DISK_OUT_OF_SPACE , StorageContainerException Occurred.
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyNow(CompletableFuture.java:670)
datanode_3  | 2020-04-17 18:27:49,034 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
scm_1       | 2020-04-17 18:26:16,617 [Socket Reader #1 for port 9863] INFO authorize.ServiceAuthorizationManager: Authorization successful for om/om@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.hdds.scm.protocol.ScmBlockLocationProtocol
datanode_2  | org.apache.hadoop.hdds.scm.container.common.helpers.StorageContainerException: Container creation failed, due to disk out of space
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyStage(CompletableFuture.java:658)
datanode_3  | 2020-04-17 18:27:49,034 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.log_worker.3989634e-60c9-4e5a-8523-9408dc0a802d
recon_1     | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
scm_1       | 2020-04-17 18:26:17,950 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueContainer.create(KeyValueContainer.java:165)
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture.thenApplyAsync(CompletableFuture.java:2104)
datanode_3  | 2020-04-17 18:27:49,037 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.cache.num.max = 2 (custom)
recon_1     | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
scm_1       | 2020-04-17 18:26:18,055 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.handleCreateContainer(KeyValueHandler.java:247)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:379)
datanode_3  | 2020-04-17 18:27:49,037 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: new 3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967-SegmentedRaftLogWorker for RaftStorage:Storage Directory /data/metadata/ratis/33e2f66f-a610-4776-a5ba-53471ea74967
recon_1     | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
scm_1       | 2020-04-17 18:26:18,057 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.dispatchRequest(KeyValueHandler.java:164)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:363)
datanode_3  | 2020-04-17 18:27:49,037 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.byte-limit = 2147483647 (custom)
recon_1     | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
scm_1       | 2020-04-17 18:26:18,059 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_2  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.handle(KeyValueHandler.java:152)
datanode_1  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.lambda$groupManagement$0(GrpcAdminProtocolService.java:42)
datanode_3  | 2020-04-17 18:27:49,037 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.element-limit = 1024 (custom)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
scm_1       | 2020-04-17 18:26:18,060 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd from datanode 3989634e-60c9-4e5a-8523-9408dc0a802d. Reason : ContainerID 2 creation failed
datanode_2  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.createContainer(HddsDispatcher.java:414)
datanode_1  | 	at org.apache.ratis.grpc.GrpcUtil.asyncCall(GrpcUtil.java:160)
datanode_3  | 2020-04-17 18:27:49,037 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
scm_1       | 2020-04-17 18:26:18,063 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:OPEN, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:25:25.493440Z]
datanode_2  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatchRequest(HddsDispatcher.java:250)
datanode_1  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.groupManagement(GrpcAdminProtocolService.java:42)
datanode_3  | 2020-04-17 18:27:49,037 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.preallocated.size = 16384 (custom)
recon_1     | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 2020-04-17 18:26:18,064 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineStateManager: Pipeline Pipeline[ Id: 31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:25:25.493440Z] moved to CLOSED state
datanode_2  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatch(HddsDispatcher.java:162)
datanode_1  | 	at org.apache.ratis.proto.grpc.AdminProtocolServiceGrpc$MethodHandlers.invoke(AdminProtocolServiceGrpc.java:358)
datanode_3  | 2020-04-17 18:27:49,037 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.write.buffer.size = 1048576 (custom)
recon_1     | 2020-04-17 18:27:24,059 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:25:25.493Z]
scm_1       | 2020-04-17 18:26:18,064 [EventQueue-CloseContainerForCloseContainerEventHandler] INFO container.CloseContainerEventHandler: Close container Event triggered for container : #2
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.dispatchCommand(ContainerStateMachine.java:402)
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:172)
datanode_3  | 2020-04-17 18:27:49,038 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.force.sync.num = 128 (default)
recon_1     | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd not found
scm_1       | 2020-04-17 18:26:18,078 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.runCommand(ContainerStateMachine.java:412)
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:331)
datanode_3  | 2020-04-17 18:27:49,038 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync = true (default)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
scm_1       | 2020-04-17 18:26:18,081 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd from datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689. Reason : ContainerID 2 creation failed
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.lambda$handleWriteChunk$2(ContainerStateMachine.java:447)
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
datanode_3  | 2020-04-17 18:27:49,038 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout = 10s (default)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
datanode_2  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:814)
scm_1       | 2020-04-17 18:26:18,087 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:25:25.493440Z]
datanode_3  | 2020-04-17 18:27:49,038 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
datanode_2  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
scm_1       | 2020-04-17 18:26:18,092 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd from datanode 3989634e-60c9-4e5a-8523-9408dc0a802d. Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-C694AA0D4B95, cid=1
datanode_3  | 2020-04-17 18:27:49,039 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.caching.enabled = true (custom)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:123)
scm_1       | 	 State Machine: cmdType: WriteChunk traceID: "1ebccd3f95d7d6a9:57399964959fe306:1ebccd3f95d7d6a9:0" containerID: 2 datanodeUuid: "0086d012-6f96-4817-8e1b-94f6eaa443bc" pipelineID: "31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd" writeChunk { blockID { containerID: 2 localID: 104015329795637249 blockCommitSequenceId: 0 } chunkData { chunkName: "104015329795637249_chunk_1" offset: 0 len: 17540 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: " wi\267" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDIgbG9jSUQ6IDEwNDAxNTMyOTc5NTYzNzI0ORisl6r0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BABzNCbq3Zmvfa3yTq6FmM7apbRJBLNj70Fdy71QfyNGPUI_zSHiJgowFwauC0MUx8yhkvrgwvdo-uu1lAA1B0edRqZSMq2oHqNg-tDm0ooQOKsasGPDtYicaGKLPS5N0Rf7ilWHxlql-PDYb1vkrPdV3FFltubzTfhs9bq3mHNm_OCvY13At7kMafgSZCOBh5l2sCCxQ_pB1ODPiIq-HeF0bqFw0FJRTYMKfKKjgOQ7er_5UNoZgfPZHWkNXzMSZ9R8OYzJBH3oGUH7HVQeMH1qy3GeqsB8hpJ3ZJvgQcPeQzDWHJ9N59nIBEqmBn3h_7QDhpNuW60lPC2a0oRfxQtwQSEREU19CTE9DS19UT0tFTiJjb25JRDogMiBsb2NJRDogMTA0MDE1MzI5Nzk1NjM3MjQ5", container path=nonexistent
datanode_3  | 2020-04-17 18:27:49,040 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
recon_1     | 	at org.apache.hadoop.ozone.recon.scm.ReconPipelineManager.destroyPipeline(ReconPipelineManager.java:74)
datanode_2  | Caused by: org.apache.hadoop.util.DiskChecker$DiskOutOfSpaceException: Out of space: The volume with the most available space (=497393664 B) is less than the container size (=1073741824 B).
datanode_1  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
scm_1       | 2020-04-17 18:26:18,092 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:25:25.493440Z]
datanode_3  | 2020-04-17 18:27:49,046 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.enabled = true (custom)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.volume.RoundRobinVolumeChoosingPolicy.chooseVolume(RoundRobinVolumeChoosingPolicy.java:77)
datanode_1  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
scm_1       | 2020-04-17 18:26:18,093 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_3  | 2020-04-17 18:27:49,053 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
recon_1     | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
datanode_2  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueContainer.create(KeyValueContainer.java:124)
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 2020-04-17 18:26:18,095 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd from datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc. Reason : ContainerID 2 creation failed
datanode_3  | 2020-04-17 18:27:49,053 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.retention.file.num = 5 (custom)
recon_1     | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
datanode_2  | 	... 13 more
datanode_1  | Caused by: org.apache.ratis.protocol.AlreadyExistsException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Failed to add group-002956D72CAC:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
scm_1       | 2020-04-17 18:26:18,095 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:25:25.493440Z]
datanode_3  | 2020-04-17 18:27:49,053 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.retrycache.expirytime = 600000ms (custom)
recon_1     | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_2  | 2020-04-17 18:28:30,694 [ChunkWriter-4-0] INFO impl.HddsDispatcher: Operation: WriteChunk , Trace ID: 16384e45b8dca920:69dadb773b7d9073:16384e45b8dca920:0 , Message: ContainerID 3 creation failed , Result: DISK_OUT_OF_SPACE , StorageContainerException Occurred.
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy$ImplMap.addNew(RaftServerProxy.java:83)
scm_1       | 2020-04-17 18:26:18,097 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd from datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689. Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-C694AA0D4B95, cid=1
datanode_3  | 2020-04-17 18:27:49,053 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.leader_election.3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967
recon_1     | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
datanode_2  | org.apache.hadoop.hdds.scm.container.common.helpers.StorageContainerException: ContainerID 3 creation failed
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:378)
scm_1       | 	 State Machine: cmdType: WriteChunk traceID: "1ebccd3f95d7d6a9:57399964959fe306:1ebccd3f95d7d6a9:0" containerID: 2 datanodeUuid: "0086d012-6f96-4817-8e1b-94f6eaa443bc" pipelineID: "31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd" writeChunk { blockID { containerID: 2 localID: 104015329795637249 blockCommitSequenceId: 0 } chunkData { chunkName: "104015329795637249_chunk_1" offset: 0 len: 17540 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: " wi\267" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDIgbG9jSUQ6IDEwNDAxNTMyOTc5NTYzNzI0ORisl6r0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BABzNCbq3Zmvfa3yTq6FmM7apbRJBLNj70Fdy71QfyNGPUI_zSHiJgowFwauC0MUx8yhkvrgwvdo-uu1lAA1B0edRqZSMq2oHqNg-tDm0ooQOKsasGPDtYicaGKLPS5N0Rf7ilWHxlql-PDYb1vkrPdV3FFltubzTfhs9bq3mHNm_OCvY13At7kMafgSZCOBh5l2sCCxQ_pB1ODPiIq-HeF0bqFw0FJRTYMKfKKjgOQ7er_5UNoZgfPZHWkNXzMSZ9R8OYzJBH3oGUH7HVQeMH1qy3GeqsB8hpJ3ZJvgQcPeQzDWHJ9N59nIBEqmBn3h_7QDhpNuW60lPC2a0oRfxQtwQSEREU19CTE9DS19UT0tFTiJjb25JRDogMiBsb2NJRDogMTA0MDE1MzI5Nzk1NjM3MjQ5", container path=nonexistent
datanode_3  | 2020-04-17 18:27:49,054 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.server.3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatchRequest(HddsDispatcher.java:254)
datanode_1  | 	... 13 more
scm_1       | 2020-04-17 18:26:18,097 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:25:25.493440Z]
datanode_3  | 2020-04-17 18:27:49,054 [pool-70-thread-1] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967: start as a follower, conf=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatch(HddsDispatcher.java:162)
datanode_1  | 2020-04-17 18:30:01,937 [Command processor thread] INFO commandhandler.CreatePipelineCommandHandler: Created Pipeline RATIS THREE #id: "1ca28fd5-8074-4f27-a46a-002956d72cac"
scm_1       | 2020-04-17 18:26:18,107 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd from datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc. Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-C694AA0D4B95, cid=1
datanode_3  | 2020-04-17 18:27:49,054 [pool-70-thread-1] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967: changes role from      null to FOLLOWER at term 0 for startAsFollower
recon_1     | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.dispatchCommand(ContainerStateMachine.java:402)
datanode_1  | .
scm_1       | 	 State Machine: cmdType: WriteChunk traceID: "1ebccd3f95d7d6a9:57399964959fe306:1ebccd3f95d7d6a9:0" containerID: 2 datanodeUuid: "0086d012-6f96-4817-8e1b-94f6eaa443bc" pipelineID: "31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd" writeChunk { blockID { containerID: 2 localID: 104015329795637249 blockCommitSequenceId: 0 } chunkData { chunkName: "104015329795637249_chunk_1" offset: 0 len: 17540 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: " wi\267" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDIgbG9jSUQ6IDEwNDAxNTMyOTc5NTYzNzI0ORisl6r0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BABzNCbq3Zmvfa3yTq6FmM7apbRJBLNj70Fdy71QfyNGPUI_zSHiJgowFwauC0MUx8yhkvrgwvdo-uu1lAA1B0edRqZSMq2oHqNg-tDm0ooQOKsasGPDtYicaGKLPS5N0Rf7ilWHxlql-PDYb1vkrPdV3FFltubzTfhs9bq3mHNm_OCvY13At7kMafgSZCOBh5l2sCCxQ_pB1ODPiIq-HeF0bqFw0FJRTYMKfKKjgOQ7er_5UNoZgfPZHWkNXzMSZ9R8OYzJBH3oGUH7HVQeMH1qy3GeqsB8hpJ3ZJvgQcPeQzDWHJ9N59nIBEqmBn3h_7QDhpNuW60lPC2a0oRfxQtwQSEREU19CTE9DS19UT0tFTiJjb25JRDogMiBsb2NJRDogMTA0MDE1MzI5Nzk1NjM3MjQ5", container path=nonexistent
datanode_3  | 2020-04-17 18:27:49,054 [pool-70-thread-1] INFO impl.RoleInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d: start FollowerState
recon_1     | 2020-04-17 18:27:24,067 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:25:25.493Z]
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.runCommand(ContainerStateMachine.java:412)
datanode_1  | 2020-04-17 18:30:01,937 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: remove group-53471EA74967:null
datanode_3  | 2020-04-17 18:27:49,055 [pool-70-thread-1] INFO util.JmxRegister: Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-53471EA74967,id=3989634e-60c9-4e5a-8523-9408dc0a802d
scm_1       | 2020-04-17 18:26:18,107 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:25:25.493440Z]
recon_1     | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd not found
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.lambda$handleWriteChunk$2(ContainerStateMachine.java:447)
datanode_1  | 2020-04-17 18:30:01,937 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "33e2f66f-a610-4776-a5ba-53471ea74967"
datanode_3  | 2020-04-17 18:27:49,055 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.state_machine.3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967
scm_1       | 2020-04-17 18:26:47,961 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
scm_1       | 2020-04-17 18:26:47,971 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
datanode_1  | 
scm_1       | 2020-04-17 18:26:48,020 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_3  | 2020-04-17 18:27:49,093 [grpc-default-executor-2] WARN impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: Failed groupAdd* GroupManagementRequest:client-53899530D2FB->3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967, cid=2, seq=0, RW, null, Add:group-53471EA74967:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858]
datanode_2  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_1  | java.io.IOException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-53471EA74967 not found.
scm_1       | 2020-04-17 18:26:48,027 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
datanode_3  | java.util.concurrent.CompletionException: org.apache.ratis.protocol.AlreadyExistsException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Failed to add group-53471EA74967:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
datanode_2  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
scm_1       | 2020-04-17 18:26:48,030 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
scm_1       | 2020-04-17 18:26:48,049 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyNow(CompletableFuture.java:670)
datanode_2  | 2020-04-17 18:28:30,695 [ChunkWriter-4-0] ERROR ratis.ContainerStateMachine: group-53471EA74967: writeChunk writeStateMachineData failed: blockIdcontainerID: 3
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
scm_1       | 2020-04-17 18:27:17,955 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
recon_1     | 	at org.apache.hadoop.ozone.recon.scm.ReconPipelineManager.destroyPipeline(ReconPipelineManager.java:74)
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyStage(CompletableFuture.java:658)
datanode_2  | localID: 104015338506354690
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
scm_1       | 2020-04-17 18:27:17,976 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture.thenApplyAsync(CompletableFuture.java:2104)
datanode_2  | blockCommitSequenceId: 0
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 2020-04-17 18:27:17,997 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
recon_1     | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:379)
datanode_2  |  logIndex 1 chunkName 104015338506354690_chunk_1 Error message: ContainerID 3 creation failed Container Result: DISK_OUT_OF_SPACE
datanode_1  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-53471EA74967 not found.
scm_1       | 2020-04-17 18:27:18,007 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
recon_1     | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:363)
datanode_2  | 2020-04-17 18:28:30,695 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-SegmentedRaftLogWorker] ERROR ratis.XceiverServerRatis: pipeline Action CLOSE on pipeline PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967.Reason : ContainerID 3 creation failed
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
scm_1       | 2020-04-17 18:27:18,030 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
recon_1     | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_3  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.lambda$groupManagement$0(GrpcAdminProtocolService.java:42)
datanode_2  | 2020-04-17 18:28:30,715 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-SegmentedRaftLogWorker] ERROR ratis.XceiverServerRatis: pipeline Action CLOSE on pipeline PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967.Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-37022F9E2BC6, cid=1
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
scm_1       | 2020-04-17 18:27:18,041 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
recon_1     | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
datanode_3  | 	at org.apache.ratis.grpc.GrpcUtil.asyncCall(GrpcUtil.java:160)
datanode_2  | 	 State Machine: cmdType: WriteChunk traceID: "16384e45b8dca920:69dadb773b7d9073:16384e45b8dca920:0" containerID: 3 datanodeUuid: "0086d012-6f96-4817-8e1b-94f6eaa443bc" pipelineID: "33e2f66f-a610-4776-a5ba-53471ea74967" writeChunk { blockID { containerID: 3 localID: 104015338506354690 blockCommitSequenceId: 0 } chunkData { chunkName: "104015338506354690_chunk_1" offset: 0 len: 17540 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: " wi\267" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDMgbG9jSUQ6IDEwNDAxNTMzODUwNjM1NDY5MBjepbL0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BADeFsLsxxtEPRBZ3zUOXfNa-UUSU6VC8lRNYvp8RgEQbphhrE6N36Gxgiuq4v4KJj818tT6GKzfOFwIUqoJf9tMaZlbDGA3jNEPUAgBUq4C_lwiHxACZgSRSVBlyYv1gk_UZSVoWSL9xzq9d5JDo4gcHB9EJVrtbSuSf3Mr-nKdxEhv3RNwNHoQ9uBxlhmRvHBa6lTTF188w1uI-_tGSL6dW8oTlooMuAZr4x-1ivYJZyAyMZFbj0W5ZFumHHxBm3Qr1BPMy9T9n-bBUo5smAFAWfd39Th_A4G0Yv8kFVGhNpjOI9vXQLhLqEOygMKoZX-rdhT07R3j_A1qyFWpL2mgQSEREU19CTE9DS19UT0tFTiJjb25JRDogMyBsb2NJRDogMTA0MDE1MzM4NTA2MzU0Njkw", container path=nonexistent
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
scm_1       | 2020-04-17 18:27:24,064 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd close command to datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_3  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.groupManagement(GrpcAdminProtocolService.java:42)
datanode_2  | 2020-04-17 18:28:55,196 [Command processor thread] ERROR commandhandler.CloseContainerCommandHandler: Container #3 does not exist in datanode. Container close failed.
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
scm_1       | 2020-04-17 18:27:24,067 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd close command to datanode 3989634e-60c9-4e5a-8523-9408dc0a802d
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_3  | 	at org.apache.ratis.proto.grpc.AdminProtocolServiceGrpc$MethodHandlers.invoke(AdminProtocolServiceGrpc.java:358)
datanode_2  | 2020-04-17 18:29:30,696 [java.util.concurrent.ThreadPoolExecutor$Worker@177954[State = -1, empty queue]] WARN server.GrpcLogAppender: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967->0086d012-6f96-4817-8e1b-94f6eaa443bc-GrpcLogAppender:  appendEntries Timeout, request=AppendEntriesRequest:cid=16,entriesCount=1,lastEntry=(t:1, i:1)
datanode_1  | 	... 4 more
scm_1       | 2020-04-17 18:27:24,068 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd close command to datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689
recon_1     | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:172)
datanode_2  | 2020-04-17 18:29:30,715 [java.util.concurrent.ThreadPoolExecutor$Worker@177954[State = -1, empty queue]] WARN server.GrpcLogAppender: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967->0086d012-6f96-4817-8e1b-94f6eaa443bc-GrpcLogAppender:  appendEntries Timeout, request=AppendEntriesRequest:cid=17,entriesCount=1,lastEntry=(t:1, i:2)
datanode_1  | 2020-04-17 18:30:01,937 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: remove group-53471EA74967:null
scm_1       | 2020-04-17 18:27:24,069 [RatisPipelineUtilsThread] INFO pipeline.PipelineStateManager: Pipeline Pipeline[ Id: 31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:25:25.493440Z] removed from db
recon_1     | 2020-04-17 18:27:24,072 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:25:25.493Z]
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:331)
datanode_2  | 2020-04-17 18:29:30,722 [java.util.concurrent.ThreadPoolExecutor$Worker@177954[State = -1, empty queue]] WARN server.GrpcLogAppender: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967->3989634e-60c9-4e5a-8523-9408dc0a802d-GrpcLogAppender:  appendEntries Timeout, request=AppendEntriesRequest:cid=16,entriesCount=1,lastEntry=(t:1, i:1)
datanode_1  | 2020-04-17 18:30:01,938 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "33e2f66f-a610-4776-a5ba-53471ea74967"
scm_1       | 2020-04-17 18:27:24,069 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Failed to create pipeline of type RATIS and factor ONE. Exception: Cannot create pipeline of factor 1 using 0 nodes. Used 3 nodes. Healthy nodes 3
recon_1     | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd not found
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:814)
datanode_1  | 
datanode_2  | 2020-04-17 18:29:30,724 [java.util.concurrent.ThreadPoolExecutor$Worker@177954[State = -1, empty queue]] WARN server.GrpcLogAppender: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967->3989634e-60c9-4e5a-8523-9408dc0a802d-GrpcLogAppender:  appendEntries Timeout, request=AppendEntriesRequest:cid=17,entriesCount=1,lastEntry=(t:1, i:2)
scm_1       | 2020-04-17 18:27:24,070 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Sending CreatePipelineCommand for pipeline:PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 to datanode:0086d012-6f96-4817-8e1b-94f6eaa443bc
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
datanode_1  | java.io.IOException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-53471EA74967 not found.
datanode_2  | 2020-04-17 18:30:01,720 [Command processor thread] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: remove    LEADER f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967:t1, leader=f2e775cd-89a9-41b5-a9e0-4408e0d60689, voted=f2e775cd-89a9-41b5-a9e0-4408e0d60689, raftlog=f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-SegmentedRaftLog:OPENED:c0,f0,i2, conf=0: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null RUNNING
scm_1       | 2020-04-17 18:27:24,070 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Sending CreatePipelineCommand for pipeline:PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 to datanode:3989634e-60c9-4e5a-8523-9408dc0a802d
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:123)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_2  | 2020-04-17 18:30:01,720 [Command processor thread] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967: shutdown
scm_1       | 2020-04-17 18:27:24,073 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Sending CreatePipelineCommand for pipeline:PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 to datanode:f2e775cd-89a9-41b5-a9e0-4408e0d60689
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
datanode_3  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_2  | 2020-04-17 18:30:01,721 [Command processor thread] INFO util.JmxRegister: Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-53471EA74967,id=f2e775cd-89a9-41b5-a9e0-4408e0d60689
scm_1       | 2020-04-17 18:27:24,073 [RatisPipelineUtilsThread] INFO pipeline.PipelineStateManager: Created pipeline Pipeline[ Id: 33e2f66f-a610-4776-a5ba-53471ea74967, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:ALLOCATED, leaderId:null, CreationTimestamp2020-04-17T18:27:24.070288Z]
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
datanode_3  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_2  | 2020-04-17 18:30:01,721 [Command processor thread] INFO impl.RoleInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689: shutdown LeaderState
scm_1       | 2020-04-17 18:27:24,074 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Failed to create pipeline of type RATIS and factor THREE. Exception: Pipeline creation failed because nodes are engaged in other pipelines and every node can only be engaged in max 2 pipelines. Required 3. Found 0
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_2  | 2020-04-17 18:30:01,722 [Command processor thread] INFO impl.PendingRequests: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-PendingRequests: sendNotLeaderResponses
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
recon_1     | 	at org.apache.hadoop.ozone.recon.scm.ReconPipelineManager.destroyPipeline(ReconPipelineManager.java:74)
scm_1       | 2020-04-17 18:27:24,087 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd close command to datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 2020-04-17 18:30:01,722 [org.apache.ratis.server.impl.LogAppender$AppenderDaemon$$Lambda$546/0x000000084066fc40@7fe06243] WARN server.GrpcLogAppender: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967->3989634e-60c9-4e5a-8523-9408dc0a802d-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
datanode_3  | Caused by: org.apache.ratis.protocol.AlreadyExistsException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Failed to add group-53471EA74967:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
scm_1       | 2020-04-17 18:27:24,087 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd close command to datanode 3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_1  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-53471EA74967 not found.
datanode_2  | 2020-04-17 18:30:01,722 [org.apache.ratis.server.impl.LogAppender$AppenderDaemon$$Lambda$546/0x000000084066fc40@4e64af90] WARN server.GrpcLogAppender: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967->0086d012-6f96-4817-8e1b-94f6eaa443bc-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy$ImplMap.addNew(RaftServerProxy.java:83)
recon_1     | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
scm_1       | 2020-04-17 18:27:24,088 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd close command to datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_2  | 2020-04-17 18:30:01,733 [grpc-default-executor-3] INFO server.GrpcLogAppender: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967->3989634e-60c9-4e5a-8523-9408dc0a802d-AppendLogResponseHandler: follower responses appendEntries COMPLETED
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:378)
scm_1       | 2020-04-17 18:27:24,088 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:25:25.493440Z]
recon_1     | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_2  | 2020-04-17 18:30:01,738 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.log_appender.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967
datanode_3  | 	... 13 more
scm_1       | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd not found
recon_1     | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_2  | 2020-04-17 18:30:01,740 [Command processor thread] INFO impl.StateMachineUpdater: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-StateMachineUpdater: set stopIndex = 0
datanode_3  | 2020-04-17 18:27:49,187 [Command processor thread] INFO commandhandler.CreatePipelineCommandHandler: Created Pipeline RATIS THREE #id: "33e2f66f-a610-4776-a5ba-53471ea74967"
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
recon_1     | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_2  | 2020-04-17 18:30:01,740 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-StateMachineUpdater] ERROR ratis.ContainerStateMachine: Failed to take snapshot  for group-53471EA74967 as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
datanode_2  | 2020-04-17 18:30:01,759 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-StateMachineUpdater] ERROR impl.StateMachineUpdater: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-StateMachineUpdater: Failed to take snapshot
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_3  | .
datanode_2  | org.apache.ratis.protocol.StateMachineException: Failed to take snapshot  for group-53471EA74967 as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
datanode_1  | 	... 4 more
recon_1     | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 2020-04-17 18:27:49,188 [Command processor thread] INFO impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: remove group-0181CC1CA0BD:null
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.takeSnapshot(ContainerStateMachine.java:288)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
datanode_1  | 2020-04-17 18:30:01,938 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: remove group-53471EA74967:null
recon_1     | 2020-04-17 18:27:47,961 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 2020-04-17 18:27:49,188 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd"
datanode_2  | 	at org.apache.ratis.server.impl.StateMachineUpdater.takeSnapshot(StateMachineUpdater.java:258)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
datanode_1  | 2020-04-17 18:30:01,938 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "33e2f66f-a610-4776-a5ba-53471ea74967"
recon_1     | 2020-04-17 18:27:47,974 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_3  | 
datanode_2  | 	at org.apache.ratis.server.impl.StateMachineUpdater.checkAndTakeSnapshot(StateMachineUpdater.java:250)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.destroyPipeline(SCMPipelineManager.java:579)
datanode_1  | 
recon_1     | 2020-04-17 18:27:48,038 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | java.io.IOException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-0181CC1CA0BD not found.
datanode_2  | 	at org.apache.ratis.server.impl.StateMachineUpdater.run(StateMachineUpdater.java:169)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
datanode_1  | java.io.IOException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-53471EA74967 not found.
recon_1     | 2020-04-17 18:27:48,040 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
recon_1     | 2020-04-17 18:27:48,056 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_2  | 2020-04-17 18:30:01,760 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-StateMachineUpdater] ERROR ratis.ContainerStateMachine: Failed to take snapshot  for group-53471EA74967 as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
scm_1       | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
recon_1     | 2020-04-17 18:27:48,065 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_2  | 2020-04-17 18:30:01,760 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-StateMachineUpdater] ERROR impl.StateMachineUpdater: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-StateMachineUpdater: Failed to take snapshot
scm_1       | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
recon_1     | 2020-04-17 18:27:48,068 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Unknown pipeline PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd. Trying to get from SCM.
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_2  | org.apache.ratis.protocol.StateMachineException: Failed to take snapshot  for group-53471EA74967 as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
scm_1       | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
recon_1     | 2020-04-17 18:27:48,095 [EventQueue-PipelineReportForReconPipelineReportHandler] ERROR pipeline.PipelineReportHandler: Could not process pipeline report=pipelineID {
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-0181CC1CA0BD not found.
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
recon_1     |   id: "31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd"
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.takeSnapshot(ContainerStateMachine.java:288)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
recon_1     | }
datanode_1  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-53471EA74967 not found.
datanode_2  | 	at org.apache.ratis.server.impl.StateMachineUpdater.takeSnapshot(StateMachineUpdater.java:258)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
recon_1     | isLeader: false
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_2  | 	at org.apache.ratis.server.impl.StateMachineUpdater.checkAndTakeSnapshot(StateMachineUpdater.java:250)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
scm_1       | 	at java.base/java.lang.Thread.run(Thread.java:834)
recon_1     | bytesWritten: 0
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_2  | 	at org.apache.ratis.server.impl.StateMachineUpdater.run(StateMachineUpdater.java:172)
datanode_3  | 	... 4 more
scm_1       | 2020-04-17 18:27:24,093 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd close command to datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc
recon_1     |  from dn=0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106649330073} {}
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 2020-04-17 18:27:49,188 [Command processor thread] INFO impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: remove group-0181CC1CA0BD:null
scm_1       | 2020-04-17 18:27:24,093 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd close command to datanode 3989634e-60c9-4e5a-8523-9408dc0a802d
recon_1     | org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException): PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd not found
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_2  | 2020-04-17 18:30:01,763 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-StateMachineUpdater] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.state_machine.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967
datanode_3  | 2020-04-17 18:27:49,188 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd"
scm_1       | 2020-04-17 18:27:24,093 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd close command to datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_1  | 	... 4 more
datanode_2  | 2020-04-17 18:30:01,764 [Command processor thread] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967: closes. applyIndex: 0
datanode_3  | 
scm_1       | 2020-04-17 18:27:24,093 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:25:25.493440Z]
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.getPipeline(PipelineStateManager.java:63)
datanode_1  | 2020-04-17 18:30:01,938 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: remove group-53471EA74967:null
datanode_2  | 2020-04-17 18:30:01,758 [grpc-default-executor-5] INFO server.GrpcLogAppender: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967->0086d012-6f96-4817-8e1b-94f6eaa443bc-AppendLogResponseHandler: follower responses appendEntries COMPLETED
datanode_3  | java.io.IOException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-0181CC1CA0BD not found.
scm_1       | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd not found
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.getPipeline(SCMPipelineManager.java:267)
datanode_1  | 2020-04-17 18:30:01,938 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "33e2f66f-a610-4776-a5ba-53471ea74967"
datanode_2  | 2020-04-17 18:30:01,763 [grpc-default-executor-3] INFO impl.FollowerInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967->3989634e-60c9-4e5a-8523-9408dc0a802d: nextIndex: updateUnconditionally 3 -> 1
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
recon_1     | 	at org.apache.hadoop.hdds.scm.server.SCMClientProtocolServer.getPipeline(SCMClientProtocolServer.java:409)
datanode_1  | 
datanode_2  | 2020-04-17 18:30:01,765 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-SegmentedRaftLogWorker] INFO segmented.SegmentedRaftLogWorker: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
recon_1     | 	at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.getPipeline(StorageContainerLocationProtocolServerSideTranslatorPB.java:375)
datanode_1  | java.io.IOException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-53471EA74967 not found.
datanode_2  | 2020-04-17 18:30:01,768 [Command processor thread] INFO segmented.SegmentedRaftLogWorker: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967-SegmentedRaftLogWorker close()
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
recon_1     | 	at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.processRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:249)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_2  | 2020-04-17 18:30:01,769 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.log_worker.f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
recon_1     | 	at org.apache.hadoop.hdds.server.OzoneProtocolMessageDispatcher.processRequest(OzoneProtocolMessageDispatcher.java:75)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_2  | 2020-04-17 18:30:01,769 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.leader_election.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.destroyPipeline(SCMPipelineManager.java:579)
recon_1     | 	at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:120)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_2  | 2020-04-17 18:30:01,769 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.server.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967
datanode_3  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-0181CC1CA0BD not found.
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
recon_1     | 	at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:31605)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_2  | 2020-04-17 18:30:01,770 [grpc-default-executor-5] INFO impl.FollowerInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-53471EA74967->0086d012-6f96-4817-8e1b-94f6eaa443bc: nextIndex: updateUnconditionally 3 -> 1
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
scm_1       | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
recon_1     | 	at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:524)
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 2020-04-17 18:30:01,796 [Command processor thread] INFO commandhandler.ClosePipelineCommandHandler: Close Pipeline #id: "33e2f66f-a610-4776-a5ba-53471ea74967"
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
scm_1       | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
recon_1     | 	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1025)
datanode_1  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-53471EA74967 not found.
datanode_2  |  command on datanode #f2e775cd-89a9-41b5-a9e0-4408e0d60689.
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
scm_1       | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
recon_1     | 	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:876)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_2  | 2020-04-17 18:30:01,797 [Command processor thread] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: addNew group-002956D72CAC:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] returns group-002956D72CAC:java.util.concurrent.CompletableFuture@25d2e791[Not completed]
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_3  | 	... 4 more
recon_1     | 	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:822)
scm_1       | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_3  | 2020-04-17 18:27:49,189 [Command processor thread] INFO impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: remove group-0181CC1CA0BD:null
recon_1     | 	at java.base/java.security.AccessController.doPrivileged(Native Method)
datanode_2  | 2020-04-17 18:30:01,798 [pool-70-thread-1] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689: new RaftServerImpl for group-002956D72CAC:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] with ContainerStateMachine:uninitialized
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_3  | 2020-04-17 18:27:49,189 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd"
recon_1     | 	at java.base/javax.security.auth.Subject.doAs(Subject.java:423)
datanode_2  | 2020-04-17 18:30:01,805 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.min = 5s (custom)
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_3  | 
recon_1     | 	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1730)
datanode_2  | 2020-04-17 18:30:01,806 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.max = 5200ms (custom)
scm_1       | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_1  | 	... 4 more
datanode_3  | java.io.IOException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-0181CC1CA0BD not found.
recon_1     | 	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2682)
datanode_2  | 2020-04-17 18:30:01,808 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpcslowness.timeout = 300s (custom)
scm_1       | 2020-04-17 18:27:24,096 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd close command to datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_1  | 2020-04-17 18:30:01,939 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: remove group-53471EA74967:null
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
recon_1     | 
datanode_2  | 2020-04-17 18:30:01,809 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.sleep.deviation.threshold = 300 (default)
scm_1       | 2020-04-17 18:27:24,096 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd close command to datanode 3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_1  | 2020-04-17 18:30:01,939 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "33e2f66f-a610-4776-a5ba-53471ea74967"
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
recon_1     | 	at org.apache.hadoop.ipc.Client.getRpcResponse(Client.java:1511)
datanode_2  | 2020-04-17 18:30:01,809 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.install.snapshot.enabled = false (custom)
scm_1       | 2020-04-17 18:27:24,096 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd close command to datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_1  | 
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
recon_1     | 	at org.apache.hadoop.ipc.Client.call(Client.java:1457)
datanode_2  | 2020-04-17 18:30:01,809 [pool-70-thread-1] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-002956D72CAC: ConfigurationManager, init=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null, confs=<EMPTY_MAP>
scm_1       | 2020-04-17 18:27:24,096 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:25:25.493440Z]
datanode_1  | java.io.IOException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-53471EA74967 not found.
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
recon_1     | 	at org.apache.hadoop.ipc.Client.call(Client.java:1367)
recon_1     | 	at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:228)
datanode_2  | 2020-04-17 18:30:01,809 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.storage.dir = [/data/metadata/ratis] (custom)
scm_1       | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd not found
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_2  | 2020-04-17 18:30:01,809 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.corruption.policy = EXCEPTION (default)
recon_1     | 	at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:116)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 2020-04-17 18:30:01,809 [pool-70-thread-1] INFO storage.RaftStorageDirectory: The storage directory /data/metadata/ratis/1ca28fd5-8074-4f27-a46a-002956d72cac does not exist. Creating ...
recon_1     | 	at com.sun.proxy.$Proxy41.submitRequest(Unknown Source)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_3  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-0181CC1CA0BD not found.
datanode_2  | 2020-04-17 18:30:01,817 [pool-70-thread-1] INFO storage.RaftStorageDirectory: Lock on /data/metadata/ratis/1ca28fd5-8074-4f27-a46a-002956d72cac/in_use.lock acquired by nodename 6@d4ddc26437df
recon_1     | 	at org.apache.hadoop.hdds.scm.protocolPB.StorageContainerLocationProtocolClientSideTranslatorPB.submitRpcRequest(StorageContainerLocationProtocolClientSideTranslatorPB.java:123)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_2  | 2020-04-17 18:30:01,818 [pool-70-thread-1] INFO storage.RaftStorage: Storage directory /data/metadata/ratis/1ca28fd5-8074-4f27-a46a-002956d72cac has been successfully formatted.
recon_1     | 	at org.apache.hadoop.hdds.scm.protocolPB.StorageContainerLocationProtocolClientSideTranslatorPB.submitRequest(StorageContainerLocationProtocolClientSideTranslatorPB.java:114)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.destroyPipeline(SCMPipelineManager.java:579)
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_2  | 2020-04-17 18:30:01,819 [pool-70-thread-1] INFO ratis.ContainerStateMachine: group-002956D72CAC: The snapshot info is null. Setting the last applied indexto:(t:0, i:~)
recon_1     | 	at org.apache.hadoop.hdds.scm.protocolPB.StorageContainerLocationProtocolClientSideTranslatorPB.getPipeline(StorageContainerLocationProtocolClientSideTranslatorPB.java:347)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
datanode_1  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-53471EA74967 not found.
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_2  | 2020-04-17 18:30:01,819 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.notification.no-leader.timeout = 60s (default)
recon_1     | 	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
scm_1       | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_2  | 2020-04-17 18:30:01,819 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.use.memory = false (default)
recon_1     | 	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
scm_1       | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
datanode_3  | 	... 4 more
datanode_2  | 2020-04-17 18:30:01,820 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.purge.gap = 1000000 (custom)
recon_1     | 	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
scm_1       | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_3  | 2020-04-17 18:27:49,197 [Command processor thread] INFO impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: remove group-0181CC1CA0BD:null
datanode_2  | 2020-04-17 18:30:01,820 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
recon_1     | 	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
scm_1       | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
datanode_3  | 2020-04-17 18:27:49,197 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd"
datanode_2  | 2020-04-17 18:30:01,820 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
recon_1     | 	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:71)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_3  | 
datanode_2  | 2020-04-17 18:30:01,820 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.log_worker.f2e775cd-89a9-41b5-a9e0-4408e0d60689
recon_1     | 	at com.sun.proxy.$Proxy42.getPipeline(Unknown Source)
datanode_1  | 	... 4 more
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_3  | java.io.IOException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-0181CC1CA0BD not found.
datanode_2  | 2020-04-17 18:30:01,820 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.cache.num.max = 2 (custom)
recon_1     | 	at org.apache.hadoop.ozone.recon.spi.impl.StorageContainerServiceProviderImpl.getPipeline(StorageContainerServiceProviderImpl.java:55)
datanode_1  | 2020-04-17 18:30:01,951 [grpc-default-executor-1] WARN impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Failed groupAdd* GroupManagementRequest:client-B12A0C9E16A5->0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC, cid=5, seq=0, RW, null, Add:group-002956D72CAC:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858]
scm_1       | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_2  | 2020-04-17 18:30:01,823 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: new f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-002956D72CAC-SegmentedRaftLogWorker for RaftStorage:Storage Directory /data/metadata/ratis/1ca28fd5-8074-4f27-a46a-002956d72cac
recon_1     | 	at org.apache.hadoop.ozone.recon.scm.ReconPipelineReportHandler.processPipelineReport(ReconPipelineReportHandler.java:65)
datanode_1  | java.util.concurrent.CompletionException: org.apache.ratis.protocol.AlreadyExistsException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Failed to add group-002956D72CAC:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
scm_1       | 2020-04-17 18:27:24,097 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd close command to datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_2  | 2020-04-17 18:30:01,823 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.byte-limit = 2147483647 (custom)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineReportHandler.onMessage(PipelineReportHandler.java:84)
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
scm_1       | 2020-04-17 18:27:24,097 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd close command to datanode 3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_2  | 2020-04-17 18:30:01,823 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.element-limit = 1024 (custom)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineReportHandler.onMessage(PipelineReportHandler.java:47)
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyNow(CompletableFuture.java:670)
scm_1       | 2020-04-17 18:27:24,098 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd close command to datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_2  | 2020-04-17 18:30:01,824 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
recon_1     | 	at org.apache.hadoop.hdds.server.events.SingleThreadExecutor.lambda$onMessage$1(SingleThreadExecutor.java:81)
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyStage(CompletableFuture.java:658)
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 2020-04-17 18:27:24,098 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:25:25.493440Z]
datanode_2  | 2020-04-17 18:30:01,824 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.preallocated.size = 16384 (custom)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture.thenApplyAsync(CompletableFuture.java:2104)
datanode_3  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-0181CC1CA0BD not found.
scm_1       | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd not found
datanode_2  | 2020-04-17 18:30:01,824 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.write.buffer.size = 1048576 (custom)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:379)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_2  | 2020-04-17 18:30:01,824 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.force.sync.num = 128 (default)
recon_1     | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:363)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
datanode_2  | 2020-04-17 18:30:01,824 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync = true (default)
recon_1     | 2020-04-17 18:27:49,019 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Unknown pipeline PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967. Trying to get from SCM.
datanode_1  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.lambda$groupManagement$0(GrpcAdminProtocolService.java:42)
datanode_1  | 	at org.apache.ratis.grpc.GrpcUtil.asyncCall(GrpcUtil.java:160)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
datanode_2  | 2020-04-17 18:30:01,824 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout = 10s (default)
datanode_1  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.groupManagement(GrpcAdminProtocolService.java:42)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
recon_1     | 2020-04-17 18:27:49,022 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Adding new pipeline Pipeline[ Id: 33e2f66f-a610-4776-a5ba-53471ea74967, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:ALLOCATED, leaderId:null, CreationTimestamp2020-04-17T18:27:24.070Z] to Recon pipeline metadata.
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
datanode_2  | 2020-04-17 18:30:01,824 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
datanode_1  | 	at org.apache.ratis.proto.grpc.AdminProtocolServiceGrpc$MethodHandlers.invoke(AdminProtocolServiceGrpc.java:358)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
recon_1     | 2020-04-17 18:27:49,022 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO pipeline.PipelineStateManager: Created pipeline Pipeline[ Id: 33e2f66f-a610-4776-a5ba-53471ea74967, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:ALLOCATED, leaderId:null, CreationTimestamp2020-04-17T18:27:24.070Z]
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.destroyPipeline(SCMPipelineManager.java:579)
datanode_2  | 2020-04-17 18:30:01,826 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.caching.enabled = true (custom)
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:172)
datanode_3  | 	... 4 more
recon_1     | 2020-04-17 18:27:49,023 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Pipeline THREE PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 reported by 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106649330073}
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
datanode_2  | 2020-04-17 18:30:01,826 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-002956D72CAC-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:331)
datanode_3  | 2020-04-17 18:27:49,197 [Command processor thread] INFO impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: remove group-0181CC1CA0BD:null
recon_1     | 2020-04-17 18:27:49,031 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Pipeline THREE PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 reported by f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106586728310}
scm_1       | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
datanode_2  | 2020-04-17 18:30:01,826 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.enabled = true (custom)
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:814)
datanode_3  | 2020-04-17 18:27:49,198 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd"
recon_1     | 2020-04-17 18:27:49,072 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Pipeline THREE PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 reported by 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106587165812}
scm_1       | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
datanode_2  | 2020-04-17 18:30:01,827 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
datanode_3  | 
recon_1     | 2020-04-17 18:27:54,215 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Pipeline THREE PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 reported by f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106586728310}
scm_1       | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_2  | 2020-04-17 18:30:01,827 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.retention.file.num = 5 (custom)
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:123)
datanode_3  | java.io.IOException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-0181CC1CA0BD not found.
recon_1     | 2020-04-17 18:27:54,215 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO pipeline.PipelineStateManager: Pipeline Pipeline[ Id: 33e2f66f-a610-4776-a5ba-53471ea74967, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:ALLOCATED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:27:24.070Z] moved to OPEN state
scm_1       | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
datanode_2  | 2020-04-17 18:30:01,827 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.retrycache.expirytime = 600000ms (custom)
datanode_1  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
recon_1     | 2020-04-17 18:28:03,404 [pool-9-thread-1] INFO impl.OzoneManagerServiceProviderImpl: Syncing data from Ozone Manager.
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_2  | 2020-04-17 18:30:01,827 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.leader_election.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-002956D72CAC
datanode_1  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
recon_1     | 2020-04-17 18:28:03,405 [pool-9-thread-1] INFO impl.OzoneManagerServiceProviderImpl: Obtaining delta updates from Ozone Manager
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_2  | 2020-04-17 18:30:01,828 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.server.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-002956D72CAC
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
recon_1     | 2020-04-17 18:28:03,425 [pool-9-thread-1] INFO impl.OzoneManagerServiceProviderImpl: Number of updates received from OM : 3
scm_1       | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 2020-04-17 18:30:01,828 [pool-70-thread-1] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-002956D72CAC: start as a follower, conf=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null
datanode_1  | Caused by: org.apache.ratis.protocol.AlreadyExistsException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Failed to add group-002956D72CAC:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
recon_1     | 2020-04-17 18:28:03,443 [pool-10-thread-1] INFO tasks.ContainerKeyMapperTask: ContainerKeyMapperTask successfully processed 0 OM DB update event(s).
scm_1       | 2020-04-17 18:27:24,108 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd close command to datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_2  | 2020-04-17 18:30:01,828 [pool-70-thread-1] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-002956D72CAC: changes role from      null to FOLLOWER at term 0 for startAsFollower
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy$ImplMap.addNew(RaftServerProxy.java:83)
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
recon_1     | 2020-04-17 18:28:03,517 [pool-10-thread-1] INFO tasks.FileSizeCountTask: Completed a 'process' run of FileSizeCountTask.
scm_1       | 2020-04-17 18:27:24,108 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd close command to datanode 3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_2  | 2020-04-17 18:30:01,828 [pool-70-thread-1] INFO impl.RoleInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689: start FollowerState
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:378)
datanode_3  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-0181CC1CA0BD not found.
recon_1     | 2020-04-17 18:28:19,028 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
scm_1       | 2020-04-17 18:27:24,108 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd close command to datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_2  | 2020-04-17 18:30:01,829 [pool-70-thread-1] INFO util.JmxRegister: Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-002956D72CAC,id=f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_1  | 	... 13 more
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
recon_1     | 2020-04-17 18:28:19,032 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
scm_1       | 2020-04-17 18:27:24,108 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:25:25.493440Z]
datanode_2  | 2020-04-17 18:30:01,829 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.state_machine.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-002956D72CAC
datanode_1  | 2020-04-17 18:30:06,838 [Thread-228] INFO impl.FollowerState: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-FollowerState: change to CANDIDATE, lastRpcTime:5031ms, electionTimeout:5027ms
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
recon_1     | 2020-04-17 18:28:19,044 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
scm_1       | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd not found
datanode_2  | 2020-04-17 18:30:01,876 [grpc-default-executor-5] WARN impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Failed groupAdd* GroupManagementRequest:client-B83097D38AF4->f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-002956D72CAC, cid=6, seq=0, RW, null, Add:group-002956D72CAC:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858]
datanode_1  | 2020-04-17 18:30:06,839 [Thread-228] INFO impl.RoleInfo: 0086d012-6f96-4817-8e1b-94f6eaa443bc: shutdown FollowerState
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
recon_1     | 2020-04-17 18:28:19,054 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_2  | java.util.concurrent.CompletionException: org.apache.ratis.protocol.AlreadyExistsException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Failed to add group-002956D72CAC:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
datanode_1  | 2020-04-17 18:30:06,839 [Thread-228] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
recon_1     | 2020-04-17 18:28:24,210 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
datanode_1  | 2020-04-17 18:30:06,839 [Thread-228] INFO impl.RoleInfo: 0086d012-6f96-4817-8e1b-94f6eaa443bc: start LeaderElection
datanode_3  | 	... 4 more
recon_1     | 2020-04-17 18:28:24,221 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyNow(CompletableFuture.java:670)
datanode_1  | 2020-04-17 18:30:06,845 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-LeaderElection3] INFO impl.LeaderElection: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-LeaderElection3: begin an election at term 1 for -1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null
datanode_3  | 2020-04-17 18:27:49,198 [grpc-default-executor-2] WARN impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: Failed groupAdd* GroupManagementRequest:client-F7F6E6842808->3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967, cid=3, seq=0, RW, null, Add:group-53471EA74967:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858]
recon_1     | 2020-04-17 18:28:30,705 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 from datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689. Reason : ContainerID 3 creation failed
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyStage(CompletableFuture.java:658)
datanode_1  | 2020-04-17 18:30:06,859 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-LeaderElection3] INFO impl.LeaderElection: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-LeaderElection3: Election PASSED; received 1 response(s) [0086d012-6f96-4817-8e1b-94f6eaa443bc<-3989634e-60c9-4e5a-8523-9408dc0a802d#0:OK-t1] and 0 exception(s); 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC:t1, leader=null, voted=0086d012-6f96-4817-8e1b-94f6eaa443bc, raftlog=0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null
datanode_3  | java.util.concurrent.CompletionException: org.apache.ratis.protocol.AlreadyExistsException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Failed to add group-53471EA74967:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
recon_1     | 2020-04-17 18:28:30,705 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 33e2f66f-a610-4776-a5ba-53471ea74967, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:OPEN, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:27:24.070Z]
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.destroyPipeline(SCMPipelineManager.java:579)
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.thenApplyAsync(CompletableFuture.java:2104)
datanode_1  | 2020-04-17 18:30:06,859 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-LeaderElection3] INFO impl.RoleInfo: 0086d012-6f96-4817-8e1b-94f6eaa443bc: shutdown LeaderElection
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
recon_1     | 2020-04-17 18:28:30,706 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineStateManager: Pipeline Pipeline[ Id: 33e2f66f-a610-4776-a5ba-53471ea74967, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:27:24.070Z] moved to CLOSED state
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:379)
datanode_1  | 2020-04-17 18:30:06,859 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-LeaderElection3] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyNow(CompletableFuture.java:670)
recon_1     | 2020-04-17 18:28:30,731 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 from datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689. Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-37022F9E2BC6, cid=1
scm_1       | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
scm_1       | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
datanode_1  | 2020-04-17 18:30:06,859 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-LeaderElection3] INFO ratis.XceiverServerRatis: Leader change notification received for group: group-002956D72CAC with new leaderId: 0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyStage(CompletableFuture.java:658)
scm_1       | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:363)
recon_1     | 	 State Machine: cmdType: WriteChunk traceID: "16384e45b8dca920:69dadb773b7d9073:16384e45b8dca920:0" containerID: 3 datanodeUuid: "0086d012-6f96-4817-8e1b-94f6eaa443bc" pipelineID: "33e2f66f-a610-4776-a5ba-53471ea74967" writeChunk { blockID { containerID: 3 localID: 104015338506354690 blockCommitSequenceId: 0 } chunkData { chunkName: "104015338506354690_chunk_1" offset: 0 len: 17540 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: " wi\267" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDMgbG9jSUQ6IDEwNDAxNTMzODUwNjM1NDY5MBjepbL0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BADeFsLsxxtEPRBZ3zUOXfNa-UUSU6VC8lRNYvp8RgEQbphhrE6N36Gxgiuq4v4KJj818tT6GKzfOFwIUqoJf9tMaZlbDGA3jNEPUAgBUq4C_lwiHxACZgSRSVBlyYv1gk_UZSVoWSL9xzq9d5JDo4gcHB9EJVrtbSuSf3Mr-nKdxEhv3RNwNHoQ9uBxlhmRvHBa6lTTF188w1uI-_tGSL6dW8oTlooMuAZr4x-1ivYJZyAyMZFbj0W5ZFumHHxBm3Qr1BPMy9T9n-bBUo5smAFAWfd39Th_A4G0Yv8kFVGhNpjOI9vXQLhLqEOygMKoZX-rdhT07R3j_A1qyFWpL2mgQSEREU19CTE9DS19UT0tFTiJjb25JRDogMyBsb2NJRDogMTA0MDE1MzM4NTA2MzU0Njkw", container path=nonexistent
datanode_1  | 2020-04-17 18:30:06,860 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-LeaderElection3] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC: change Leader from null to 0086d012-6f96-4817-8e1b-94f6eaa443bc at term 1 for becomeLeader, leader elected after 5102ms
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture.thenApplyAsync(CompletableFuture.java:2104)
scm_1       | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
datanode_2  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.lambda$groupManagement$0(GrpcAdminProtocolService.java:42)
recon_1     | 2020-04-17 18:28:30,731 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 33e2f66f-a610-4776-a5ba-53471ea74967, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:27:24.070Z]
datanode_1  | 2020-04-17 18:30:06,860 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-LeaderElection3] INFO server.RaftServerConfigKeys: raft.server.staging.catchup.gap = 1000 (default)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:379)
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_2  | 	at org.apache.ratis.grpc.GrpcUtil.asyncCall(GrpcUtil.java:160)
recon_1     | 2020-04-17 18:28:30,743 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 2020-04-17 18:30:06,860 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-LeaderElection3] INFO server.RaftServerConfigKeys: raft.server.rpc.sleep.time = 25ms (default)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:363)
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_2  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.groupManagement(GrpcAdminProtocolService.java:42)
recon_1     | 2020-04-17 18:28:30,759 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 2020-04-17 18:30:06,861 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-LeaderElection3] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.log_appender.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC
datanode_3  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.lambda$groupManagement$0(GrpcAdminProtocolService.java:42)
scm_1       | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 	at org.apache.ratis.proto.grpc.AdminProtocolServiceGrpc$MethodHandlers.invoke(AdminProtocolServiceGrpc.java:358)
recon_1     | 2020-04-17 18:28:30,768 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_1  | 2020-04-17 18:30:06,864 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-LeaderElection3] INFO server.RaftServerConfigKeys: raft.server.write.element-limit = 1024 (custom)
datanode_3  | 	at org.apache.ratis.grpc.GrpcUtil.asyncCall(GrpcUtil.java:160)
scm_1       | 2020-04-17 18:27:42,603 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Failed to create pipeline of type RATIS and factor ONE. Exception: Cannot create pipeline of factor 1 using 0 nodes. Used 3 nodes. Healthy nodes 3
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:172)
recon_1     | 2020-04-17 18:28:30,769 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 from datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc. Reason : ContainerID 3 creation failed
datanode_1  | 2020-04-17 18:30:06,864 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-LeaderElection3] INFO server.RaftServerConfigKeys: raft.server.write.byte-limit = 1073741824 (custom)
datanode_3  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.groupManagement(GrpcAdminProtocolService.java:42)
scm_1       | 2020-04-17 18:27:42,603 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Failed to create pipeline of type RATIS and factor THREE. Exception: Pipeline creation failed because nodes are engaged in other pipelines and every node can only be engaged in max 2 pipelines. Required 3. Found 0
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:331)
recon_1     | 2020-04-17 18:28:30,770 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 33e2f66f-a610-4776-a5ba-53471ea74967, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:27:24.070Z]
datanode_1  | 2020-04-17 18:30:06,864 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-LeaderElection3] INFO server.RaftServerConfigKeys: raft.server.watch.timeout = 180s (custom)
datanode_3  | 	at org.apache.ratis.proto.grpc.AdminProtocolServiceGrpc$MethodHandlers.invoke(AdminProtocolServiceGrpc.java:358)
scm_1       | 2020-04-17 18:27:47,967 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:814)
recon_1     | 2020-04-17 18:28:30,776 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 from datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc. Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-37022F9E2BC6, cid=1
datanode_1  | 2020-04-17 18:30:06,864 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-LeaderElection3] INFO server.RaftServerConfigKeys: raft.server.watch.timeout.denomination = 1s (default)
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:172)
scm_1       | 2020-04-17 18:27:47,995 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
recon_1     | 	 State Machine: cmdType: WriteChunk traceID: "16384e45b8dca920:69dadb773b7d9073:16384e45b8dca920:0" containerID: 3 datanodeUuid: "0086d012-6f96-4817-8e1b-94f6eaa443bc" pipelineID: "33e2f66f-a610-4776-a5ba-53471ea74967" writeChunk { blockID { containerID: 3 localID: 104015338506354690 blockCommitSequenceId: 0 } chunkData { chunkName: "104015338506354690_chunk_1" offset: 0 len: 17540 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: " wi\267" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDMgbG9jSUQ6IDEwNDAxNTMzODUwNjM1NDY5MBjepbL0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BADeFsLsxxtEPRBZ3zUOXfNa-UUSU6VC8lRNYvp8RgEQbphhrE6N36Gxgiuq4v4KJj818tT6GKzfOFwIUqoJf9tMaZlbDGA3jNEPUAgBUq4C_lwiHxACZgSRSVBlyYv1gk_UZSVoWSL9xzq9d5JDo4gcHB9EJVrtbSuSf3Mr-nKdxEhv3RNwNHoQ9uBxlhmRvHBa6lTTF188w1uI-_tGSL6dW8oTlooMuAZr4x-1ivYJZyAyMZFbj0W5ZFumHHxBm3Qr1BPMy9T9n-bBUo5smAFAWfd39Th_A4G0Yv8kFVGhNpjOI9vXQLhLqEOygMKoZX-rdhT07R3j_A1qyFWpL2mgQSEREU19CTE9DS19UT0tFTiJjb25JRDogMyBsb2NJRDogMTA0MDE1MzM4NTA2MzU0Njkw", container path=nonexistent
datanode_1  | 2020-04-17 18:30:06,864 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-LeaderElection3] INFO server.RaftServerConfigKeys: raft.server.watch.element-limit = 65536 (default)
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:331)
scm_1       | 2020-04-17 18:27:48,034 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:123)
recon_1     | 2020-04-17 18:28:30,776 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 33e2f66f-a610-4776-a5ba-53471ea74967, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:27:24.070Z]
datanode_1  | 2020-04-17 18:30:06,869 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-LeaderElection3] INFO server.RaftServerConfigKeys: raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:814)
scm_1       | 2020-04-17 18:27:48,039 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
recon_1     | 2020-04-17 18:28:30,801 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_1  | 2020-04-17 18:30:06,869 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-LeaderElection3] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
scm_1       | 2020-04-17 18:27:48,041 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_2  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
recon_1     | 2020-04-17 18:28:30,802 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 from datanode 3989634e-60c9-4e5a-8523-9408dc0a802d. Reason : ContainerID 3 creation failed
datanode_1  | 2020-04-17 18:30:06,870 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-LeaderElection3] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.element-limit = 1 (custom)
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:123)
scm_1       | 2020-04-17 18:27:48,069 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
recon_1     | 2020-04-17 18:28:30,802 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 33e2f66f-a610-4776-a5ba-53471ea74967, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:27:24.070Z]
datanode_1  | 2020-04-17 18:30:06,872 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-LeaderElection3] INFO grpc.GrpcConfigKeys: raft.grpc.server.leader.outstanding.appends.max = 128 (default)
datanode_3  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
scm_1       | 2020-04-17 18:27:48,091 [Socket Reader #1 for port 9860] INFO ipc.Server: Auth successful for recon/recon@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | Caused by: org.apache.ratis.protocol.AlreadyExistsException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Failed to add group-002956D72CAC:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
recon_1     | 2020-04-17 18:28:30,807 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 from datanode 3989634e-60c9-4e5a-8523-9408dc0a802d. Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-37022F9E2BC6, cid=1
datanode_1  | 2020-04-17 18:30:06,877 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-LeaderElection3] INFO server.RaftServerConfigKeys: raft.server.rpc.request.timeout = 60s (custom)
datanode_3  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
scm_1       | 2020-04-17 18:27:48,093 [Socket Reader #1 for port 9860] INFO authorize.ServiceAuthorizationManager: Authorization successful for recon/recon@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocol
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy$ImplMap.addNew(RaftServerProxy.java:83)
recon_1     | 	 State Machine: cmdType: WriteChunk traceID: "16384e45b8dca920:69dadb773b7d9073:16384e45b8dca920:0" containerID: 3 datanodeUuid: "0086d012-6f96-4817-8e1b-94f6eaa443bc" pipelineID: "33e2f66f-a610-4776-a5ba-53471ea74967" writeChunk { blockID { containerID: 3 localID: 104015338506354690 blockCommitSequenceId: 0 } chunkData { chunkName: "104015338506354690_chunk_1" offset: 0 len: 17540 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: " wi\267" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDMgbG9jSUQ6IDEwNDAxNTMzODUwNjM1NDY5MBjepbL0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BADeFsLsxxtEPRBZ3zUOXfNa-UUSU6VC8lRNYvp8RgEQbphhrE6N36Gxgiuq4v4KJj818tT6GKzfOFwIUqoJf9tMaZlbDGA3jNEPUAgBUq4C_lwiHxACZgSRSVBlyYv1gk_UZSVoWSL9xzq9d5JDo4gcHB9EJVrtbSuSf3Mr-nKdxEhv3RNwNHoQ9uBxlhmRvHBa6lTTF188w1uI-_tGSL6dW8oTlooMuAZr4x-1ivYJZyAyMZFbj0W5ZFumHHxBm3Qr1BPMy9T9n-bBUo5smAFAWfd39Th_A4G0Yv8kFVGhNpjOI9vXQLhLqEOygMKoZX-rdhT07R3j_A1qyFWpL2mgQSEREU19CTE9DS19UT0tFTiJjb25JRDogMyBsb2NJRDogMTA0MDE1MzM4NTA2MzU0Njkw", container path=nonexistent
datanode_1  | 2020-04-17 18:30:06,877 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-LeaderElection3] INFO server.RaftServerConfigKeys: raft.server.log.appender.install.snapshot.enabled = false (custom)
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 2020-04-17 18:27:48,093 [IPC Server handler 10 on 9860] INFO ipc.Server: IPC Server handler 10 on 9860, call Call#12 Retry#0 org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocol.submitRequest from 172.24.0.3:32985
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:378)
datanode_1  | 2020-04-17 18:30:06,886 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-LeaderElection3] INFO server.RaftServerConfigKeys: raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
recon_1     | 2020-04-17 18:28:30,807 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 33e2f66f-a610-4776-a5ba-53471ea74967, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:27:24.070Z]
datanode_3  | Caused by: org.apache.ratis.protocol.AlreadyExistsException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Failed to add group-53471EA74967:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
scm_1       | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=31a49e07-8b2c-43f8-b3fd-0181cc1ca0bd not found
datanode_2  | 	... 13 more
datanode_1  | 2020-04-17 18:30:06,887 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-LeaderElection3] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
recon_1     | 2020-04-17 18:28:46,892 [MissingContainerTask] INFO fsck.MissingContainerTask: Missing Container task Thread took 5 milliseconds for processing 0 containers.
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy$ImplMap.addNew(RaftServerProxy.java:83)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_2  | 2020-04-17 18:30:01,890 [grpc-default-executor-5] WARN impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Failed groupAdd* GroupManagementRequest:client-7BA1F8B97773->f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-002956D72CAC, cid=5, seq=0, RW, null, Add:group-002956D72CAC:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858]
datanode_1  | 2020-04-17 18:30:06,888 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-LeaderElection3] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.element-limit = 1 (custom)
recon_1     | 2020-04-17 18:29:00,751 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:378)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.getPipeline(PipelineStateManager.java:63)
datanode_2  | java.util.concurrent.CompletionException: org.apache.ratis.protocol.AlreadyExistsException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Failed to add group-002956D72CAC:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
datanode_1  | 2020-04-17 18:30:06,888 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-LeaderElection3] INFO grpc.GrpcConfigKeys: raft.grpc.server.leader.outstanding.appends.max = 128 (default)
recon_1     | 2020-04-17 18:29:00,771 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_3  | 	... 13 more
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.getPipeline(SCMPipelineManager.java:267)
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
datanode_1  | 2020-04-17 18:30:06,888 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-LeaderElection3] INFO server.RaftServerConfigKeys: raft.server.rpc.request.timeout = 60s (custom)
recon_1     | 2020-04-17 18:29:00,790 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 2020-04-17 18:27:54,168 [Thread-119] INFO impl.FollowerState: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967-FollowerState: change to CANDIDATE, lastRpcTime:5113ms, electionTimeout:5113ms
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyNow(CompletableFuture.java:670)
scm_1       | 	at org.apache.hadoop.hdds.scm.server.SCMClientProtocolServer.getPipeline(SCMClientProtocolServer.java:409)
datanode_1  | 2020-04-17 18:30:06,888 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-LeaderElection3] INFO server.RaftServerConfigKeys: raft.server.log.appender.install.snapshot.enabled = false (custom)
recon_1     | 2020-04-17 18:29:00,831 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 2020-04-17 18:27:54,169 [Thread-119] INFO impl.RoleInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d: shutdown FollowerState
scm_1       | 	at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.getPipeline(StorageContainerLocationProtocolServerSideTranslatorPB.java:375)
datanode_1  | 2020-04-17 18:30:06,889 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-LeaderElection3] INFO impl.RoleInfo: 0086d012-6f96-4817-8e1b-94f6eaa443bc: start LeaderState
recon_1     | 2020-04-17 18:29:00,832 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyStage(CompletableFuture.java:658)
scm_1       | 	at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.processRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:249)
datanode_3  | 2020-04-17 18:27:54,169 [Thread-119] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
datanode_1  | 2020-04-17 18:30:06,891 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-LeaderElection3] INFO segmented.SegmentedRaftLogWorker: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-SegmentedRaftLogWorker: Starting segment from index:0
recon_1     | 2020-04-17 18:29:00,860 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.thenApplyAsync(CompletableFuture.java:2104)
scm_1       | 	at org.apache.hadoop.hdds.server.OzoneProtocolMessageDispatcher.processRequest(OzoneProtocolMessageDispatcher.java:75)
datanode_3  | 2020-04-17 18:27:54,169 [Thread-119] INFO impl.RoleInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d: start LeaderElection
datanode_1  | 2020-04-17 18:30:06,893 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-SegmentedRaftLogWorker] INFO segmented.SegmentedRaftLogWorker: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-SegmentedRaftLogWorker: created new log segment /data/metadata/ratis/1ca28fd5-8074-4f27-a46a-002956d72cac/current/log_inprogress_0
recon_1     | 2020-04-17 18:29:03,560 [pool-9-thread-1] INFO impl.OzoneManagerServiceProviderImpl: Syncing data from Ozone Manager.
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:379)
scm_1       | 	at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:120)
datanode_3  | 2020-04-17 18:27:54,191 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967-LeaderElection4] INFO impl.LeaderElection: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967-LeaderElection4: begin an election at term 1 for -1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null
datanode_1  | 2020-04-17 18:30:06,911 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-LeaderElection3] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC: set configuration 0: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null at 0
recon_1     | 2020-04-17 18:29:03,561 [pool-9-thread-1] INFO impl.OzoneManagerServiceProviderImpl: Obtaining delta updates from Ozone Manager
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:363)
scm_1       | 	at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:31605)
datanode_3  | 2020-04-17 18:27:54,247 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967-LeaderElection4] INFO impl.LeaderElection: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967-LeaderElection4: Election REJECTED; received 2 response(s) [3989634e-60c9-4e5a-8523-9408dc0a802d<-0086d012-6f96-4817-8e1b-94f6eaa443bc#0:FAIL-t1, 3989634e-60c9-4e5a-8523-9408dc0a802d<-f2e775cd-89a9-41b5-a9e0-4408e0d60689#0:FAIL-t1] and 0 exception(s); 3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967:t1, leader=null, voted=3989634e-60c9-4e5a-8523-9408dc0a802d, raftlog=3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null
datanode_1  | 2020-04-17 18:30:27,928 [ChunkWriter-15-0] INFO keyvalue.KeyValueHandler: Operation: CreateContainer , Trace ID: 770df85ae4b1898d:22da11a237d5e9bb:770df85ae4b1898d:0 , Message: Container creation failed, due to disk out of space , Result: DISK_OUT_OF_SPACE , StorageContainerException Occurred.
recon_1     | 2020-04-17 18:29:03,595 [pool-9-thread-1] INFO impl.OzoneManagerServiceProviderImpl: Number of updates received from OM : 6
datanode_2  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.lambda$groupManagement$0(GrpcAdminProtocolService.java:42)
scm_1       | 	at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:524)
datanode_3  | 2020-04-17 18:27:54,248 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967-LeaderElection4] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967: changes role from CANDIDATE to FOLLOWER at term 1 for DISCOVERED_A_NEW_TERM
recon_1     | 2020-04-17 18:29:03,602 [pool-10-thread-1] INFO tasks.ContainerKeyMapperTask: ContainerKeyMapperTask successfully processed 0 OM DB update event(s).
datanode_1  | org.apache.hadoop.hdds.scm.container.common.helpers.StorageContainerException: Container creation failed, due to disk out of space
datanode_2  | 	at org.apache.ratis.grpc.GrpcUtil.asyncCall(GrpcUtil.java:160)
scm_1       | 	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1025)
datanode_3  | 2020-04-17 18:27:54,248 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967-LeaderElection4] INFO impl.RoleInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d: shutdown LeaderElection
recon_1     | 2020-04-17 18:29:03,693 [pool-10-thread-1] INFO tasks.FileSizeCountTask: Completed a 'process' run of FileSizeCountTask.
datanode_1  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueContainer.create(KeyValueContainer.java:165)
datanode_2  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.groupManagement(GrpcAdminProtocolService.java:42)
scm_1       | 	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:876)
datanode_3  | 2020-04-17 18:27:54,248 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967-LeaderElection4] INFO impl.RoleInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d: start FollowerState
recon_1     | 2020-04-17 18:29:30,752 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.handleCreateContainer(KeyValueHandler.java:247)
datanode_2  | 	at org.apache.ratis.proto.grpc.AdminProtocolServiceGrpc$MethodHandlers.invoke(AdminProtocolServiceGrpc.java:358)
scm_1       | 	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:822)
datanode_3  | 2020-04-17 18:27:54,268 [grpc-default-executor-2] INFO ratis.XceiverServerRatis: Leader change notification received for group: group-53471EA74967 with new leaderId: f2e775cd-89a9-41b5-a9e0-4408e0d60689
recon_1     | 2020-04-17 18:29:30,754 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_1  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.dispatchRequest(KeyValueHandler.java:164)
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:172)
scm_1       | 	at java.base/java.security.AccessController.doPrivileged(Native Method)
datanode_3  | 2020-04-17 18:27:54,269 [grpc-default-executor-2] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967: change Leader from null to f2e775cd-89a9-41b5-a9e0-4408e0d60689 at term 1 for appendEntries, leader elected after 5236ms
recon_1     | 2020-04-17 18:29:30,755 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.handle(KeyValueHandler.java:152)
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:331)
scm_1       | 	at java.base/javax.security.auth.Subject.doAs(Subject.java:423)
datanode_3  | 2020-04-17 18:27:54,270 [grpc-default-executor-2] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967: set configuration 0: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null at 0
recon_1     | 2020-04-17 18:29:30,793 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.createContainer(HddsDispatcher.java:414)
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:814)
scm_1       | 	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1730)
datanode_3  | 2020-04-17 18:27:54,270 [grpc-default-executor-2] INFO segmented.SegmentedRaftLogWorker: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967-SegmentedRaftLogWorker: Starting segment from index:0
recon_1     | 2020-04-17 18:29:30,800 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_1  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatchRequest(HddsDispatcher.java:250)
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
scm_1       | 	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2682)
datanode_3  | 2020-04-17 18:27:54,275 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967-SegmentedRaftLogWorker] INFO segmented.SegmentedRaftLogWorker: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967-SegmentedRaftLogWorker: created new log segment /data/metadata/ratis/33e2f66f-a610-4776-a5ba-53471ea74967/current/log_inprogress_0
recon_1     | 2020-04-17 18:29:30,804 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_1  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatch(HddsDispatcher.java:162)
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:123)
scm_1       | 2020-04-17 18:27:50,100 [Socket Reader #1 for port 9863] INFO ipc.Server: Auth successful for om/om@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 2020-04-17 18:28:30,741 [ChunkWriter-6-0] INFO keyvalue.KeyValueHandler: Operation: CreateContainer , Trace ID: 16384e45b8dca920:69dadb773b7d9073:16384e45b8dca920:0 , Message: Container creation failed, due to disk out of space , Result: DISK_OUT_OF_SPACE , StorageContainerException Occurred.
recon_1     | 2020-04-17 18:29:36,707 [RatisPipelineUtilsThread] INFO pipeline.PipelineStateManager: Pipeline Pipeline[ Id: 33e2f66f-a610-4776-a5ba-53471ea74967, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:27:24.070Z] removed from db
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.dispatchCommand(ContainerStateMachine.java:402)
datanode_2  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
scm_1       | 2020-04-17 18:27:50,115 [Socket Reader #1 for port 9863] INFO authorize.ServiceAuthorizationManager: Authorization successful for om/om@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.hdds.scm.protocol.ScmBlockLocationProtocol
datanode_3  | org.apache.hadoop.hdds.scm.container.common.helpers.StorageContainerException: Container creation failed, due to disk out of space
recon_1     | 2020-04-17 18:29:36,732 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 33e2f66f-a610-4776-a5ba-53471ea74967, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:27:24.070Z]
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.runCommand(ContainerStateMachine.java:412)
datanode_2  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
scm_1       | 2020-04-17 18:27:50,116 [IPC Server handler 1 on 9863] ERROR pipeline.SCMPipelineManager: Failed to create pipeline of type RATIS and factor THREE. Exception: Pipeline creation failed because nodes are engaged in other pipelines and every node can only be engaged in max 2 pipelines. Required 3. Found 0
datanode_3  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueContainer.create(KeyValueContainer.java:165)
recon_1     | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 not found
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.lambda$handleWriteChunk$2(ContainerStateMachine.java:447)
scm_1       | 2020-04-17 18:27:50,116 [IPC Server handler 1 on 9863] WARN block.BlockManagerImpl: Pipeline creation failed for type:RATIS factor:THREE. Datanodes may be used up.
datanode_3  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.handleCreateContainer(KeyValueHandler.java:247)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | org.apache.hadoop.hdds.scm.exceptions.SCMException: Pipeline creation failed because nodes are engaged in other pipelines and every node can only be engaged in max 2 pipelines. Required 3. Found 0
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
datanode_1  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_2  | Caused by: org.apache.ratis.protocol.AlreadyExistsException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Failed to add group-002956D72CAC:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
datanode_3  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.dispatchRequest(KeyValueHandler.java:164)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.filterViableNodes(PipelinePlacementPolicy.java:173)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
datanode_1  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy$ImplMap.addNew(RaftServerProxy.java:83)
datanode_3  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.handle(KeyValueHandler.java:152)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.chooseDatanodes(PipelinePlacementPolicy.java:196)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:378)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.createContainer(HddsDispatcher.java:414)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.RatisPipelineProvider.create(RatisPipelineProvider.java:116)
recon_1     | 	at org.apache.hadoop.ozone.recon.scm.ReconPipelineManager.destroyPipeline(ReconPipelineManager.java:74)
datanode_1  | Caused by: org.apache.hadoop.util.DiskChecker$DiskOutOfSpaceException: Out of space: The volume with the most available space (=497037312 B) is less than the container size (=1073741824 B).
datanode_2  | 	... 13 more
datanode_3  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatchRequest(HddsDispatcher.java:250)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineFactory.create(PipelineFactory.java:63)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.volume.RoundRobinVolumeChoosingPolicy.chooseVolume(RoundRobinVolumeChoosingPolicy.java:77)
datanode_2  | 2020-04-17 18:30:01,964 [Command processor thread] INFO commandhandler.CreatePipelineCommandHandler: Created Pipeline RATIS THREE #id: "1ca28fd5-8074-4f27-a46a-002956d72cac"
datanode_3  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatch(HddsDispatcher.java:162)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.createPipeline(SCMPipelineManager.java:232)
recon_1     | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
datanode_1  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueContainer.create(KeyValueContainer.java:124)
datanode_2  | .
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.dispatchCommand(ContainerStateMachine.java:402)
scm_1       | 	at org.apache.hadoop.hdds.scm.block.BlockManagerImpl.allocateBlock(BlockManagerImpl.java:200)
recon_1     | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
datanode_1  | 	... 13 more
datanode_2  | 2020-04-17 18:30:01,965 [Command processor thread] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: remove group-53471EA74967:null
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.runCommand(ContainerStateMachine.java:412)
scm_1       | 	at org.apache.hadoop.hdds.scm.server.SCMBlockProtocolServer.allocateBlock(SCMBlockProtocolServer.java:190)
recon_1     | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_1  | 2020-04-17 18:30:27,929 [ChunkWriter-15-0] INFO impl.HddsDispatcher: Operation: WriteChunk , Trace ID: 770df85ae4b1898d:22da11a237d5e9bb:770df85ae4b1898d:0 , Message: ContainerID 4 creation failed , Result: DISK_OUT_OF_SPACE , StorageContainerException Occurred.
datanode_2  | 2020-04-17 18:30:01,965 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "33e2f66f-a610-4776-a5ba-53471ea74967"
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.lambda$handleWriteChunk$2(ContainerStateMachine.java:447)
scm_1       | 	at org.apache.hadoop.hdds.scm.protocol.ScmBlockLocationProtocolServerSideTranslatorPB.allocateScmBlock(ScmBlockLocationProtocolServerSideTranslatorPB.java:161)
recon_1     | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
datanode_1  | org.apache.hadoop.hdds.scm.container.common.helpers.StorageContainerException: ContainerID 4 creation failed
datanode_2  | 
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
scm_1       | 	at org.apache.hadoop.hdds.scm.protocol.ScmBlockLocationProtocolServerSideTranslatorPB.processMessage(ScmBlockLocationProtocolServerSideTranslatorPB.java:119)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatchRequest(HddsDispatcher.java:254)
datanode_2  | java.io.IOException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-53471EA74967 not found.
datanode_3  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
scm_1       | 	at org.apache.hadoop.hdds.server.OzoneProtocolMessageDispatcher.processRequest(OzoneProtocolMessageDispatcher.java:75)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatch(HddsDispatcher.java:162)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_3  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
scm_1       | 	at org.apache.hadoop.hdds.scm.protocol.ScmBlockLocationProtocolServerSideTranslatorPB.send(ScmBlockLocationProtocolServerSideTranslatorPB.java:100)
recon_1     | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.dispatchCommand(ContainerStateMachine.java:402)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 	at org.apache.hadoop.hdds.protocol.proto.ScmBlockLocationProtocolProtos$ScmBlockLocationProtocolService$2.callBlockingMethod(ScmBlockLocationProtocolProtos.java:13157)
recon_1     | 2020-04-17 18:29:36,770 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 33e2f66f-a610-4776-a5ba-53471ea74967, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:27:24.070Z]
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.runCommand(ContainerStateMachine.java:412)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_3  | Caused by: org.apache.hadoop.util.DiskChecker$DiskOutOfSpaceException: Out of space: The volume with the most available space (=497369088 B) is less than the container size (=1073741824 B).
scm_1       | 	at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:524)
recon_1     | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 not found
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.lambda$handleWriteChunk$2(ContainerStateMachine.java:447)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.volume.RoundRobinVolumeChoosingPolicy.chooseVolume(RoundRobinVolumeChoosingPolicy.java:77)
scm_1       | 	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1025)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueContainer.create(KeyValueContainer.java:124)
scm_1       | 	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:876)
datanode_1  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
datanode_2  | Caused by: org.apache.ratis.protocol.GroupMismatchException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-53471EA74967 not found.
datanode_3  | 	... 13 more
scm_1       | 	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:822)
datanode_1  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_3  | 2020-04-17 18:28:30,742 [ChunkWriter-6-0] INFO impl.HddsDispatcher: Operation: WriteChunk , Trace ID: 16384e45b8dca920:69dadb773b7d9073:16384e45b8dca920:0 , Message: ContainerID 3 creation failed , Result: DISK_OUT_OF_SPACE , StorageContainerException Occurred.
scm_1       | 	at java.base/java.security.AccessController.doPrivileged(Native Method)
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_3  | org.apache.hadoop.hdds.scm.container.common.helpers.StorageContainerException: ContainerID 3 creation failed
scm_1       | 	at java.base/javax.security.auth.Subject.doAs(Subject.java:423)
datanode_1  | 2020-04-17 18:30:27,930 [grpc-default-executor-1] ERROR ratis.ContainerStateMachine: group-002956D72CAC: writeChunk writeStateMachineData failed: blockIdcontainerID: 4
recon_1     | 	at org.apache.hadoop.ozone.recon.scm.ReconPipelineManager.destroyPipeline(ReconPipelineManager.java:74)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatchRequest(HddsDispatcher.java:254)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatch(HddsDispatcher.java:162)
datanode_1  | localID: 104015346178850819
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.dispatchCommand(ContainerStateMachine.java:402)
scm_1       | 	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1730)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_1  | blockCommitSequenceId: 0
recon_1     | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.runCommand(ContainerStateMachine.java:412)
scm_1       | 	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2682)
datanode_2  | 	... 4 more
datanode_1  |  logIndex 1 chunkName 104015346178850819_chunk_1 Error message: ContainerID 4 creation failed Container Result: DISK_OUT_OF_SPACE
recon_1     | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.lambda$handleWriteChunk$2(ContainerStateMachine.java:447)
scm_1       | 2020-04-17 18:27:50,117 [IPC Server handler 1 on 9863] ERROR block.BlockManagerImpl: Unable to allocate a block for the size: 268435456, type: RATIS, factor: THREE
datanode_2  | 2020-04-17 18:30:01,965 [Command processor thread] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: remove group-53471EA74967:null
datanode_1  | 2020-04-17 18:30:27,930 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-SegmentedRaftLogWorker] ERROR ratis.XceiverServerRatis: pipeline Action CLOSE on pipeline PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac.Reason : ContainerID 4 creation failed
recon_1     | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
scm_1       | 2020-04-17 18:27:52,331 [Socket Reader #1 for port 9860] INFO ipc.Server: Auth successful for om/om@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | 2020-04-17 18:30:01,966 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "33e2f66f-a610-4776-a5ba-53471ea74967"
datanode_1  | 2020-04-17 18:30:27,966 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-SegmentedRaftLogWorker] ERROR ratis.XceiverServerRatis: pipeline Action CLOSE on pipeline PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac.Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-EF8919F5D3CD, cid=1
recon_1     | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
datanode_3  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
scm_1       | 2020-04-17 18:27:52,342 [Socket Reader #1 for port 9860] INFO authorize.ServiceAuthorizationManager: Authorization successful for om/om@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocol
datanode_2  | 
datanode_1  | 	 State Machine: cmdType: WriteChunk traceID: "770df85ae4b1898d:22da11a237d5e9bb:770df85ae4b1898d:0" containerID: 4 datanodeUuid: "3989634e-60c9-4e5a-8523-9408dc0a802d" pipelineID: "1ca28fd5-8074-4f27-a46a-002956d72cac" writeChunk { blockID { containerID: 4 localID: 104015346178850819 blockCommitSequenceId: 0 } chunkData { chunkName: "104015346178850819_chunk_1" offset: 0 len: 17540 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: " wi\267" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDQgbG9jSUQ6IDEwNDAxNTM0NjE3ODg1MDgxORiwuLn0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BAFDGfwn3uQnZGLuUq70c2-0qpxbvg_0X-6vgiEkhNBT2jw9xVwWPc6w7GAFKfRrUxg46X9PPBab1jiXIYs87FLBZ3IjpBigZJ34LheCuGYCvYYb6rJW3UsEcsqlJ4UjPXZe-IhzhR3QeP8GzfRnooW-tEoUl-MyjEiauwg0aZXIvmJzYi9DlAKQ9OniPdXmjljQEED-gZ06Ib_diSjGd5ST-wudVc0j0hnzTF7zzkw4xRIq3MwnIBCP2227J1kYHwD5HJzA-_Ojvwpsm28oovxOOlkYb0EaNBOrxHoe2onP8zY5QhmaYlbrfGf5zcDWWxwdRJVyt8c9ru7JltLMsKn0QSEREU19CTE9DS19UT0tFTiJjb25JRDogNCBsb2NJRDogMTA0MDE1MzQ2MTc4ODUwODE5", container path=nonexistent
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_3  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
scm_1       | 2020-04-17 18:27:54,252 [EventQueue-PipelineReportForPipelineReportHandler] INFO pipeline.PipelineStateManager: Pipeline Pipeline[ Id: 33e2f66f-a610-4776-a5ba-53471ea74967, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:ALLOCATED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:27:24.070288Z] moved to OPEN state
datanode_2  | java.io.IOException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-53471EA74967 not found.
datanode_1  | 2020-04-17 18:30:32,761 [Command processor thread] ERROR commandhandler.CloseContainerCommandHandler: Container #4 does not exist in datanode. Container close failed.
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 2020-04-17 18:28:19,073 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_1  | 2020-04-17 18:31:27,961 [java.util.concurrent.ThreadPoolExecutor$Worker@295f0839[State = -1, empty queue]] WARN server.GrpcLogAppender: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC->f2e775cd-89a9-41b5-a9e0-4408e0d60689-GrpcLogAppender:  appendEntries Timeout, request=AppendEntriesRequest:cid=10,entriesCount=1,lastEntry=(t:1, i:1)
recon_1     | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 2020-04-17 18:28:30,743 [ChunkWriter-6-0] ERROR ratis.ContainerStateMachine: group-53471EA74967: writeChunk writeStateMachineData failed: blockIdcontainerID: 3
scm_1       | 2020-04-17 18:28:19,079 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_1  | 2020-04-17 18:31:27,964 [java.util.concurrent.ThreadPoolExecutor$Worker@295f0839[State = -1, empty queue]] WARN server.GrpcLogAppender: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC->3989634e-60c9-4e5a-8523-9408dc0a802d-GrpcLogAppender:  appendEntries Timeout, request=AppendEntriesRequest:cid=10,entriesCount=1,lastEntry=(t:1, i:1)
recon_1     | 2020-04-17 18:29:36,776 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 33e2f66f-a610-4776-a5ba-53471ea74967, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:27:24.070Z]
datanode_3  | localID: 104015338506354690
scm_1       | 2020-04-17 18:28:19,083 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_1  | 2020-04-17 18:31:27,967 [java.util.concurrent.ThreadPoolExecutor$Worker@295f0839[State = -1, empty queue]] WARN server.GrpcLogAppender: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC->f2e775cd-89a9-41b5-a9e0-4408e0d60689-GrpcLogAppender:  appendEntries Timeout, request=AppendEntriesRequest:cid=11,entriesCount=1,lastEntry=(t:1, i:2)
recon_1     | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 not found
datanode_3  | blockCommitSequenceId: 0
scm_1       | 2020-04-17 18:28:19,083 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_1  | 2020-04-17 18:31:27,980 [java.util.concurrent.ThreadPoolExecutor$Worker@295f0839[State = -1, empty queue]] WARN server.GrpcLogAppender: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC->3989634e-60c9-4e5a-8523-9408dc0a802d-GrpcLogAppender:  appendEntries Timeout, request=AppendEntriesRequest:cid=11,entriesCount=1,lastEntry=(t:1, i:2)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_3  |  logIndex 1 chunkName 104015338506354690_chunk_1 Error message: ContainerID 3 creation failed Container Result: DISK_OUT_OF_SPACE
scm_1       | 2020-04-17 18:28:24,223 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
scm_1       | 2020-04-17 18:28:24,235 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_1  | 2020-04-17 18:31:58,968 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: remove    LEADER 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC:t1, leader=0086d012-6f96-4817-8e1b-94f6eaa443bc, voted=0086d012-6f96-4817-8e1b-94f6eaa443bc, raftlog=0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-SegmentedRaftLog:OPENED:c0,f0,i2, conf=0: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null RUNNING
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
scm_1       | 2020-04-17 18:28:29,514 [Socket Reader #1 for port 9863] INFO ipc.Server: Auth successful for om/om@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | Caused by: org.apache.ratis.protocol.GroupMismatchException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-53471EA74967 not found.
datanode_1  | 2020-04-17 18:31:58,969 [Command processor thread] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC: shutdown
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
datanode_3  | 2020-04-17 18:28:30,745 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967-SegmentedRaftLogWorker] ERROR ratis.XceiverServerRatis: pipeline Action CLOSE on pipeline PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967.Reason : ContainerID 3 creation failed
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
scm_1       | 2020-04-17 18:28:29,529 [Socket Reader #1 for port 9863] INFO authorize.ServiceAuthorizationManager: Authorization successful for om/om@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.hdds.scm.protocol.ScmBlockLocationProtocol
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
datanode_1  | 2020-04-17 18:31:58,969 [Command processor thread] INFO util.JmxRegister: Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-002956D72CAC,id=0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_3  | 2020-04-17 18:28:30,770 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967-SegmentedRaftLogWorker] ERROR ratis.XceiverServerRatis: pipeline Action CLOSE on pipeline PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967.Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-37022F9E2BC6, cid=1
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
scm_1       | 2020-04-17 18:28:30,702 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 from datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689. Reason : ContainerID 3 creation failed
recon_1     | 	at org.apache.hadoop.ozone.recon.scm.ReconPipelineManager.destroyPipeline(ReconPipelineManager.java:74)
datanode_1  | 2020-04-17 18:31:58,969 [Command processor thread] INFO impl.RoleInfo: 0086d012-6f96-4817-8e1b-94f6eaa443bc: shutdown LeaderState
datanode_3  | 	 State Machine: cmdType: WriteChunk traceID: "16384e45b8dca920:69dadb773b7d9073:16384e45b8dca920:0" containerID: 3 datanodeUuid: "0086d012-6f96-4817-8e1b-94f6eaa443bc" pipelineID: "33e2f66f-a610-4776-a5ba-53471ea74967" writeChunk { blockID { containerID: 3 localID: 104015338506354690 blockCommitSequenceId: 0 } chunkData { chunkName: "104015338506354690_chunk_1" offset: 0 len: 17540 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: " wi\267" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDMgbG9jSUQ6IDEwNDAxNTMzODUwNjM1NDY5MBjepbL0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BADeFsLsxxtEPRBZ3zUOXfNa-UUSU6VC8lRNYvp8RgEQbphhrE6N36Gxgiuq4v4KJj818tT6GKzfOFwIUqoJf9tMaZlbDGA3jNEPUAgBUq4C_lwiHxACZgSRSVBlyYv1gk_UZSVoWSL9xzq9d5JDo4gcHB9EJVrtbSuSf3Mr-nKdxEhv3RNwNHoQ9uBxlhmRvHBa6lTTF188w1uI-_tGSL6dW8oTlooMuAZr4x-1ivYJZyAyMZFbj0W5ZFumHHxBm3Qr1BPMy9T9n-bBUo5smAFAWfd39Th_A4G0Yv8kFVGhNpjOI9vXQLhLqEOygMKoZX-rdhT07R3j_A1qyFWpL2mgQSEREU19CTE9DS19UT0tFTiJjb25JRDogMyBsb2NJRDogMTA0MDE1MzM4NTA2MzU0Njkw", container path=nonexistent
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
scm_1       | 2020-04-17 18:28:30,703 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 33e2f66f-a610-4776-a5ba-53471ea74967, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:OPEN, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:27:24.070288Z]
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
datanode_1  | 2020-04-17 18:31:58,971 [Command processor thread] INFO impl.PendingRequests: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-PendingRequests: sendNotLeaderResponses
datanode_3  | 2020-04-17 18:28:50,033 [Command processor thread] ERROR commandhandler.CloseContainerCommandHandler: Container #3 does not exist in datanode. Container close failed.
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
scm_1       | 2020-04-17 18:28:30,703 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineStateManager: Pipeline Pipeline[ Id: 33e2f66f-a610-4776-a5ba-53471ea74967, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:27:24.070288Z] moved to CLOSED state
recon_1     | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
datanode_1  | 2020-04-17 18:31:58,971 [org.apache.ratis.server.impl.LogAppender$AppenderDaemon$$Lambda$555/0x0000000840673c40@4337d854] WARN server.GrpcLogAppender: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC->f2e775cd-89a9-41b5-a9e0-4408e0d60689-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
datanode_3  | 2020-04-17 18:30:01,730 [grpc-default-executor-2] INFO server.GrpcServerProtocolService: 3989634e-60c9-4e5a-8523-9408dc0a802d: Completed APPEND_ENTRIES, lastRequest: f2e775cd-89a9-41b5-a9e0-4408e0d60689->3989634e-60c9-4e5a-8523-9408dc0a802d#17-t1, previous=(t:1, i:1), leaderCommit=0, initializing? false, entries: size=1, first=(t:1, i:2), STATEMACHINELOGENTRY, client-37022F9E2BC6, cid=2
datanode_2  | 	... 4 more
scm_1       | 2020-04-17 18:28:30,703 [EventQueue-CloseContainerForCloseContainerEventHandler] INFO container.CloseContainerEventHandler: Close container Event triggered for container : #3
recon_1     | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
datanode_1  | 2020-04-17 18:31:58,971 [org.apache.ratis.server.impl.LogAppender$AppenderDaemon$$Lambda$555/0x0000000840673c40@32713439] WARN server.GrpcLogAppender: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC->3989634e-60c9-4e5a-8523-9408dc0a802d-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
datanode_3  | 2020-04-17 18:30:01,771 [Command processor thread] INFO impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: remove  FOLLOWER 3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967:t1, leader=f2e775cd-89a9-41b5-a9e0-4408e0d60689, voted=3989634e-60c9-4e5a-8523-9408dc0a802d, raftlog=3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967-SegmentedRaftLog:OPENED:c0,f0,i2, conf=0: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null RUNNING
datanode_2  | 2020-04-17 18:30:01,966 [Command processor thread] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: remove group-53471EA74967:null
scm_1       | 2020-04-17 18:28:30,725 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 from datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689. Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-37022F9E2BC6, cid=1
recon_1     | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_1  | 2020-04-17 18:31:58,982 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.log_appender.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC
datanode_3  | 2020-04-17 18:30:01,772 [Command processor thread] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967: shutdown
datanode_2  | 2020-04-17 18:30:01,966 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "33e2f66f-a610-4776-a5ba-53471ea74967"
scm_1       | 	 State Machine: cmdType: WriteChunk traceID: "16384e45b8dca920:69dadb773b7d9073:16384e45b8dca920:0" containerID: 3 datanodeUuid: "0086d012-6f96-4817-8e1b-94f6eaa443bc" pipelineID: "33e2f66f-a610-4776-a5ba-53471ea74967" writeChunk { blockID { containerID: 3 localID: 104015338506354690 blockCommitSequenceId: 0 } chunkData { chunkName: "104015338506354690_chunk_1" offset: 0 len: 17540 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: " wi\267" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDMgbG9jSUQ6IDEwNDAxNTMzODUwNjM1NDY5MBjepbL0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BADeFsLsxxtEPRBZ3zUOXfNa-UUSU6VC8lRNYvp8RgEQbphhrE6N36Gxgiuq4v4KJj818tT6GKzfOFwIUqoJf9tMaZlbDGA3jNEPUAgBUq4C_lwiHxACZgSRSVBlyYv1gk_UZSVoWSL9xzq9d5JDo4gcHB9EJVrtbSuSf3Mr-nKdxEhv3RNwNHoQ9uBxlhmRvHBa6lTTF188w1uI-_tGSL6dW8oTlooMuAZr4x-1ivYJZyAyMZFbj0W5ZFumHHxBm3Qr1BPMy9T9n-bBUo5smAFAWfd39Th_A4G0Yv8kFVGhNpjOI9vXQLhLqEOygMKoZX-rdhT07R3j_A1qyFWpL2mgQSEREU19CTE9DS19UT0tFTiJjb25JRDogMyBsb2NJRDogMTA0MDE1MzM4NTA2MzU0Njkw", container path=nonexistent
recon_1     | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
datanode_1  | 2020-04-17 18:31:58,982 [Command processor thread] INFO impl.StateMachineUpdater: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-StateMachineUpdater: set stopIndex = 0
datanode_3  | 2020-04-17 18:30:01,772 [Command processor thread] INFO util.JmxRegister: Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-53471EA74967,id=3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_2  | 
scm_1       | 2020-04-17 18:28:30,727 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 33e2f66f-a610-4776-a5ba-53471ea74967, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:27:24.070288Z]
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_1  | 2020-04-17 18:31:58,983 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-StateMachineUpdater] ERROR ratis.ContainerStateMachine: Failed to take snapshot  for group-002956D72CAC as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
datanode_3  | 2020-04-17 18:30:01,772 [Command processor thread] INFO impl.RoleInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d: shutdown FollowerState
datanode_2  | java.io.IOException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-53471EA74967 not found.
scm_1       | 2020-04-17 18:28:30,775 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_1  | 2020-04-17 18:31:58,986 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-StateMachineUpdater] ERROR impl.StateMachineUpdater: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-StateMachineUpdater: Failed to take snapshot
datanode_3  | 2020-04-17 18:30:01,772 [Command processor thread] INFO impl.StateMachineUpdater: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967-StateMachineUpdater: set stopIndex = 0
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
scm_1       | 2020-04-17 18:28:30,783 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
recon_1     | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_1  | org.apache.ratis.protocol.StateMachineException: Failed to take snapshot  for group-002956D72CAC as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
datanode_3  | 2020-04-17 18:30:01,772 [Thread-126] INFO impl.FollowerState: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
scm_1       | 2020-04-17 18:28:30,783 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
recon_1     | 2020-04-17 18:29:36,803 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 33e2f66f-a610-4776-a5ba-53471ea74967, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:27:24.070Z]
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.takeSnapshot(ContainerStateMachine.java:288)
datanode_3  | 2020-04-17 18:30:01,774 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967-StateMachineUpdater] ERROR ratis.ContainerStateMachine: Failed to take snapshot  for group-53471EA74967 as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
scm_1       | 2020-04-17 18:28:30,785 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 from datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc. Reason : ContainerID 3 creation failed
recon_1     | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 not found
datanode_1  | 	at org.apache.ratis.server.impl.StateMachineUpdater.takeSnapshot(StateMachineUpdater.java:258)
datanode_3  | 2020-04-17 18:30:01,774 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967-StateMachineUpdater] ERROR impl.StateMachineUpdater: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967-StateMachineUpdater: Failed to take snapshot
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
scm_1       | 2020-04-17 18:28:30,787 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 33e2f66f-a610-4776-a5ba-53471ea74967, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:27:24.070288Z]
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_1  | 	at org.apache.ratis.server.impl.StateMachineUpdater.checkAndTakeSnapshot(StateMachineUpdater.java:250)
datanode_3  | org.apache.ratis.protocol.StateMachineException: Failed to take snapshot  for group-53471EA74967 as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 2020-04-17 18:28:30,788 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 from datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc. Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-37022F9E2BC6, cid=1
scm_1       | 	 State Machine: cmdType: WriteChunk traceID: "16384e45b8dca920:69dadb773b7d9073:16384e45b8dca920:0" containerID: 3 datanodeUuid: "0086d012-6f96-4817-8e1b-94f6eaa443bc" pipelineID: "33e2f66f-a610-4776-a5ba-53471ea74967" writeChunk { blockID { containerID: 3 localID: 104015338506354690 blockCommitSequenceId: 0 } chunkData { chunkName: "104015338506354690_chunk_1" offset: 0 len: 17540 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: " wi\267" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDMgbG9jSUQ6IDEwNDAxNTMzODUwNjM1NDY5MBjepbL0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BADeFsLsxxtEPRBZ3zUOXfNa-UUSU6VC8lRNYvp8RgEQbphhrE6N36Gxgiuq4v4KJj818tT6GKzfOFwIUqoJf9tMaZlbDGA3jNEPUAgBUq4C_lwiHxACZgSRSVBlyYv1gk_UZSVoWSL9xzq9d5JDo4gcHB9EJVrtbSuSf3Mr-nKdxEhv3RNwNHoQ9uBxlhmRvHBa6lTTF188w1uI-_tGSL6dW8oTlooMuAZr4x-1ivYJZyAyMZFbj0W5ZFumHHxBm3Qr1BPMy9T9n-bBUo5smAFAWfd39Th_A4G0Yv8kFVGhNpjOI9vXQLhLqEOygMKoZX-rdhT07R3j_A1qyFWpL2mgQSEREU19CTE9DS19UT0tFTiJjb25JRDogMyBsb2NJRDogMTA0MDE1MzM4NTA2MzU0Njkw", container path=nonexistent
datanode_2  | Caused by: org.apache.ratis.protocol.GroupMismatchException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-53471EA74967 not found.
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.takeSnapshot(ContainerStateMachine.java:288)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
datanode_1  | 	at org.apache.ratis.server.impl.StateMachineUpdater.run(StateMachineUpdater.java:169)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
scm_1       | 2020-04-17 18:28:30,788 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 33e2f66f-a610-4776-a5ba-53471ea74967, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:27:24.070288Z]
datanode_3  | 	at org.apache.ratis.server.impl.StateMachineUpdater.takeSnapshot(StateMachineUpdater.java:258)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
scm_1       | 2020-04-17 18:28:30,804 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_3  | 	at org.apache.ratis.server.impl.StateMachineUpdater.checkAndTakeSnapshot(StateMachineUpdater.java:250)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
datanode_1  | 2020-04-17 18:31:58,987 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-StateMachineUpdater] ERROR ratis.ContainerStateMachine: Failed to take snapshot  for group-002956D72CAC as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
scm_1       | 2020-04-17 18:28:30,805 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 from datanode 3989634e-60c9-4e5a-8523-9408dc0a802d. Reason : ContainerID 3 creation failed
datanode_3  | 	at org.apache.ratis.server.impl.StateMachineUpdater.run(StateMachineUpdater.java:169)
recon_1     | 	at org.apache.hadoop.ozone.recon.scm.ReconPipelineManager.destroyPipeline(ReconPipelineManager.java:74)
datanode_1  | 2020-04-17 18:31:58,987 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-StateMachineUpdater] ERROR impl.StateMachineUpdater: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-StateMachineUpdater: Failed to take snapshot
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
scm_1       | 2020-04-17 18:28:30,805 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 33e2f66f-a610-4776-a5ba-53471ea74967, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:27:24.070288Z]
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
datanode_1  | org.apache.ratis.protocol.StateMachineException: Failed to take snapshot  for group-002956D72CAC as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
datanode_2  | 	... 4 more
scm_1       | 2020-04-17 18:28:30,810 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 from datanode 3989634e-60c9-4e5a-8523-9408dc0a802d. Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-37022F9E2BC6, cid=1
datanode_3  | 2020-04-17 18:30:01,775 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967-StateMachineUpdater] ERROR ratis.ContainerStateMachine: Failed to take snapshot  for group-53471EA74967 as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
recon_1     | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.takeSnapshot(ContainerStateMachine.java:288)
datanode_2  | 2020-04-17 18:30:01,972 [Command processor thread] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: remove group-53471EA74967:null
scm_1       | 	 State Machine: cmdType: WriteChunk traceID: "16384e45b8dca920:69dadb773b7d9073:16384e45b8dca920:0" containerID: 3 datanodeUuid: "0086d012-6f96-4817-8e1b-94f6eaa443bc" pipelineID: "33e2f66f-a610-4776-a5ba-53471ea74967" writeChunk { blockID { containerID: 3 localID: 104015338506354690 blockCommitSequenceId: 0 } chunkData { chunkName: "104015338506354690_chunk_1" offset: 0 len: 17540 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: " wi\267" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDMgbG9jSUQ6IDEwNDAxNTMzODUwNjM1NDY5MBjepbL0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BADeFsLsxxtEPRBZ3zUOXfNa-UUSU6VC8lRNYvp8RgEQbphhrE6N36Gxgiuq4v4KJj818tT6GKzfOFwIUqoJf9tMaZlbDGA3jNEPUAgBUq4C_lwiHxACZgSRSVBlyYv1gk_UZSVoWSL9xzq9d5JDo4gcHB9EJVrtbSuSf3Mr-nKdxEhv3RNwNHoQ9uBxlhmRvHBa6lTTF188w1uI-_tGSL6dW8oTlooMuAZr4x-1ivYJZyAyMZFbj0W5ZFumHHxBm3Qr1BPMy9T9n-bBUo5smAFAWfd39Th_A4G0Yv8kFVGhNpjOI9vXQLhLqEOygMKoZX-rdhT07R3j_A1qyFWpL2mgQSEREU19CTE9DS19UT0tFTiJjb25JRDogMyBsb2NJRDogMTA0MDE1MzM4NTA2MzU0Njkw", container path=nonexistent
datanode_3  | 2020-04-17 18:30:01,775 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967-StateMachineUpdater] ERROR impl.StateMachineUpdater: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967-StateMachineUpdater: Failed to take snapshot
recon_1     | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
datanode_1  | 	at org.apache.ratis.server.impl.StateMachineUpdater.takeSnapshot(StateMachineUpdater.java:258)
datanode_2  | 2020-04-17 18:30:01,972 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "33e2f66f-a610-4776-a5ba-53471ea74967"
scm_1       | 2020-04-17 18:28:30,811 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 33e2f66f-a610-4776-a5ba-53471ea74967, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:27:24.070288Z]
datanode_3  | org.apache.ratis.protocol.StateMachineException: Failed to take snapshot  for group-53471EA74967 as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
recon_1     | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_1  | 	at org.apache.ratis.server.impl.StateMachineUpdater.checkAndTakeSnapshot(StateMachineUpdater.java:250)
datanode_2  | 
scm_1       | 2020-04-17 18:29:00,757 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.takeSnapshot(ContainerStateMachine.java:288)
recon_1     | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
datanode_1  | 	at org.apache.ratis.server.impl.StateMachineUpdater.run(StateMachineUpdater.java:172)
datanode_2  | java.io.IOException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-53471EA74967 not found.
scm_1       | 2020-04-17 18:29:00,789 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 	at org.apache.ratis.server.impl.StateMachineUpdater.takeSnapshot(StateMachineUpdater.java:258)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
scm_1       | 2020-04-17 18:29:00,806 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_3  | 	at org.apache.ratis.server.impl.StateMachineUpdater.checkAndTakeSnapshot(StateMachineUpdater.java:250)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_1  | 2020-04-17 18:31:58,986 [grpc-default-executor-1] INFO server.GrpcLogAppender: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC->f2e775cd-89a9-41b5-a9e0-4408e0d60689-AppendLogResponseHandler: follower responses appendEntries COMPLETED
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
scm_1       | 2020-04-17 18:29:00,831 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 	at org.apache.ratis.server.impl.StateMachineUpdater.run(StateMachineUpdater.java:172)
recon_1     | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_1  | 2020-04-17 18:31:58,993 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-StateMachineUpdater] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.state_machine.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
scm_1       | 2020-04-17 18:29:00,832 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
recon_1     | 2020-04-17 18:29:36,809 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 33e2f66f-a610-4776-a5ba-53471ea74967, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:27:24.070Z]
datanode_1  | 2020-04-17 18:31:58,993 [Command processor thread] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC: closes. applyIndex: 0
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
scm_1       | 2020-04-17 18:29:00,852 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_3  | 2020-04-17 18:30:01,775 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967-StateMachineUpdater] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.state_machine.3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967
recon_1     | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 not found
datanode_1  | 2020-04-17 18:31:58,993 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-SegmentedRaftLogWorker] INFO segmented.SegmentedRaftLogWorker: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 2020-04-17 18:29:03,873 [Thread-343] INFO container.ReplicationManager: Starting Replication Monitor Thread.
datanode_3  | 2020-04-17 18:30:01,775 [Command processor thread] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967: closes. applyIndex: 0
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_1  | Apr 17, 2020 6:31:58 PM org.apache.ratis.thirdparty.io.grpc.netty.NettyServerHandler onStreamError
datanode_2  | Caused by: org.apache.ratis.protocol.GroupMismatchException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-53471EA74967 not found.
scm_1       | 2020-04-17 18:29:03,880 [ReplicationMonitor] INFO container.ReplicationManager: Replication Monitor Thread took 4 milliseconds for processing 3 containers.
datanode_3  | 2020-04-17 18:30:01,776 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967-SegmentedRaftLogWorker] INFO segmented.SegmentedRaftLogWorker: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
datanode_1  | WARNING: Stream Error
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
scm_1       | 2020-04-17 18:29:30,802 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 2020-04-17 18:30:01,782 [Command processor thread] INFO segmented.SegmentedRaftLogWorker: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967-SegmentedRaftLogWorker close()
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
datanode_1  | org.apache.ratis.thirdparty.io.netty.handler.codec.http2.Http2Exception$StreamException: Received DATA frame for an unknown stream 3
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
scm_1       | 2020-04-17 18:29:30,809 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 2020-04-17 18:30:01,783 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.log_worker.3989634e-60c9-4e5a-8523-9408dc0a802d
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
datanode_1  | 	at org.apache.ratis.thirdparty.io.netty.handler.codec.http2.Http2Exception.streamError(Http2Exception.java:147)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
scm_1       | 2020-04-17 18:29:30,810 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 2020-04-17 18:30:01,783 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.leader_election.3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967
recon_1     | 	at org.apache.hadoop.ozone.recon.scm.ReconPipelineManager.destroyPipeline(ReconPipelineManager.java:74)
datanode_1  | 	at org.apache.ratis.thirdparty.io.netty.handler.codec.http2.DefaultHttp2ConnectionDecoder$FrameReadListener.shouldIgnoreHeadersOrDataFrame(DefaultHttp2ConnectionDecoder.java:591)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
scm_1       | 2020-04-17 18:29:30,812 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_3  | 2020-04-17 18:30:01,783 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.server.3989634e-60c9-4e5a-8523-9408dc0a802d@group-53471EA74967
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
datanode_1  | 	at org.apache.ratis.thirdparty.io.netty.handler.codec.http2.DefaultHttp2ConnectionDecoder$FrameReadListener.onDataRead(DefaultHttp2ConnectionDecoder.java:239)
datanode_2  | 	... 4 more
scm_1       | 2020-04-17 18:29:30,815 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_3  | 2020-04-17 18:30:01,785 [Command processor thread] INFO commandhandler.ClosePipelineCommandHandler: Close Pipeline #id: "33e2f66f-a610-4776-a5ba-53471ea74967"
recon_1     | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
datanode_1  | 	at org.apache.ratis.thirdparty.io.netty.handler.codec.http2.Http2InboundFrameLogger$1.onDataRead(Http2InboundFrameLogger.java:48)
datanode_2  | 2020-04-17 18:30:01,975 [Command processor thread] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: remove group-53471EA74967:null
scm_1       | 2020-04-17 18:29:30,817 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_3  |  command on datanode #3989634e-60c9-4e5a-8523-9408dc0a802d.
recon_1     | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
datanode_1  | 	at org.apache.ratis.thirdparty.io.netty.handler.codec.http2.DefaultHttp2FrameReader.readDataFrame(DefaultHttp2FrameReader.java:422)
datanode_2  | 2020-04-17 18:30:01,975 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "33e2f66f-a610-4776-a5ba-53471ea74967"
scm_1       | 2020-04-17 18:29:36,704 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 close command to datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc
recon_1     | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_3  | 2020-04-17 18:30:01,785 [Command processor thread] INFO impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: addNew group-002956D72CAC:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] returns group-002956D72CAC:java.util.concurrent.CompletableFuture@285c9e50[Not completed]
datanode_1  | 	at org.apache.ratis.thirdparty.io.netty.handler.codec.http2.DefaultHttp2FrameReader.processPayloadState(DefaultHttp2FrameReader.java:251)
datanode_2  | 
scm_1       | 2020-04-17 18:29:36,704 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 close command to datanode 3989634e-60c9-4e5a-8523-9408dc0a802d
recon_1     | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
datanode_3  | 2020-04-17 18:30:01,790 [pool-70-thread-1] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d: new RaftServerImpl for group-002956D72CAC:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] with ContainerStateMachine:uninitialized
datanode_1  | 	at org.apache.ratis.thirdparty.io.netty.handler.codec.http2.DefaultHttp2FrameReader.readFrame(DefaultHttp2FrameReader.java:160)
datanode_2  | java.io.IOException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-53471EA74967 not found.
scm_1       | 2020-04-17 18:29:36,704 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 close command to datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_3  | 2020-04-17 18:30:01,790 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.min = 5s (custom)
datanode_1  | 	at org.apache.ratis.thirdparty.io.netty.handler.codec.http2.Http2InboundFrameLogger.readFrame(Http2InboundFrameLogger.java:41)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
scm_1       | 2020-04-17 18:29:36,704 [RatisPipelineUtilsThread] INFO pipeline.PipelineStateManager: Pipeline Pipeline[ Id: 33e2f66f-a610-4776-a5ba-53471ea74967, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:27:24.070288Z] removed from db
datanode_3  | 2020-04-17 18:30:01,790 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.max = 5200ms (custom)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
scm_1       | 2020-04-17 18:29:36,705 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Failed to create pipeline of type RATIS and factor ONE. Exception: Cannot create pipeline of factor 1 using 0 nodes. Used 3 nodes. Healthy nodes 3
datanode_1  | 	at org.apache.ratis.thirdparty.io.netty.handler.codec.http2.DefaultHttp2ConnectionDecoder.decodeFrame(DefaultHttp2ConnectionDecoder.java:174)
datanode_3  | 2020-04-17 18:30:01,790 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpcslowness.timeout = 300s (custom)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
scm_1       | 2020-04-17 18:29:36,706 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Sending CreatePipelineCommand for pipeline:PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac to datanode:3989634e-60c9-4e5a-8523-9408dc0a802d
recon_1     | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_1  | 	at org.apache.ratis.thirdparty.io.netty.handler.codec.http2.Http2ConnectionHandler$FrameDecoder.decode(Http2ConnectionHandler.java:378)
datanode_3  | 2020-04-17 18:30:01,790 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.sleep.deviation.threshold = 300 (default)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
scm_1       | 2020-04-17 18:29:36,706 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Sending CreatePipelineCommand for pipeline:PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac to datanode:f2e775cd-89a9-41b5-a9e0-4408e0d60689
recon_1     | 2020-04-17 18:30:00,770 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 	at org.apache.ratis.thirdparty.io.netty.handler.codec.http2.Http2ConnectionHandler.decode(Http2ConnectionHandler.java:438)
datanode_3  | 2020-04-17 18:30:01,790 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.install.snapshot.enabled = false (custom)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 2020-04-17 18:29:36,706 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Sending CreatePipelineCommand for pipeline:PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac to datanode:0086d012-6f96-4817-8e1b-94f6eaa443bc
recon_1     | 2020-04-17 18:30:00,771 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 	at org.apache.ratis.thirdparty.io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:505)
datanode_3  | 2020-04-17 18:30:01,790 [pool-70-thread-1] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-002956D72CAC: ConfigurationManager, init=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null, confs=<EMPTY_MAP>
datanode_2  | Caused by: org.apache.ratis.protocol.GroupMismatchException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-53471EA74967 not found.
scm_1       | 2020-04-17 18:29:36,706 [RatisPipelineUtilsThread] INFO pipeline.PipelineStateManager: Created pipeline Pipeline[ Id: 1ca28fd5-8074-4f27-a46a-002956d72cac, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:ALLOCATED, leaderId:null, CreationTimestamp2020-04-17T18:29:36.706215Z]
recon_1     | 2020-04-17 18:30:00,806 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 	at org.apache.ratis.thirdparty.io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:444)
datanode_3  | 2020-04-17 18:30:01,791 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.storage.dir = [/data/metadata/ratis] (custom)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
scm_1       | 2020-04-17 18:29:36,706 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Failed to create pipeline of type RATIS and factor THREE. Exception: Pipeline creation failed because nodes are engaged in other pipelines and every node can only be engaged in max 2 pipelines. Required 3. Found 0
recon_1     | 2020-04-17 18:30:00,807 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_1  | 	at org.apache.ratis.thirdparty.io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:283)
datanode_3  | 2020-04-17 18:30:01,791 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.corruption.policy = EXCEPTION (default)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
scm_1       | 2020-04-17 18:29:36,727 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 close command to datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc
recon_1     | 2020-04-17 18:30:00,808 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_1  | 	at org.apache.ratis.thirdparty.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374)
datanode_3  | 2020-04-17 18:30:01,791 [pool-70-thread-1] INFO storage.RaftStorageDirectory: The storage directory /data/metadata/ratis/1ca28fd5-8074-4f27-a46a-002956d72cac does not exist. Creating ...
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
scm_1       | 2020-04-17 18:29:36,727 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 close command to datanode 3989634e-60c9-4e5a-8523-9408dc0a802d
recon_1     | 2020-04-17 18:30:00,809 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Unknown pipeline PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967. Trying to get from SCM.
datanode_1  | 	at org.apache.ratis.thirdparty.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360)
datanode_3  | 2020-04-17 18:30:01,796 [pool-70-thread-1] INFO storage.RaftStorageDirectory: Lock on /data/metadata/ratis/1ca28fd5-8074-4f27-a46a-002956d72cac/in_use.lock acquired by nodename 6@9dd073498a2e
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
scm_1       | 2020-04-17 18:29:36,728 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 close command to datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689
recon_1     | 2020-04-17 18:30:00,841 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_1  | 	at org.apache.ratis.thirdparty.io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:352)
datanode_3  | 2020-04-17 18:30:01,800 [pool-70-thread-1] INFO storage.RaftStorage: Storage directory /data/metadata/ratis/1ca28fd5-8074-4f27-a46a-002956d72cac has been successfully formatted.
datanode_2  | 	... 4 more
scm_1       | 2020-04-17 18:29:36,728 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 33e2f66f-a610-4776-a5ba-53471ea74967, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:27:24.070288Z]
recon_1     | 2020-04-17 18:30:00,848 [EventQueue-PipelineReportForReconPipelineReportHandler] ERROR pipeline.PipelineReportHandler: Could not process pipeline report=pipelineID {
datanode_1  | 	at org.apache.ratis.thirdparty.io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1421)
datanode_3  | 2020-04-17 18:30:01,800 [pool-70-thread-1] INFO ratis.ContainerStateMachine: group-002956D72CAC: The snapshot info is null. Setting the last applied indexto:(t:0, i:~)
datanode_2  | 2020-04-17 18:30:01,976 [Command processor thread] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: remove group-53471EA74967:null
scm_1       | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 not found
recon_1     |   id: "33e2f66f-a610-4776-a5ba-53471ea74967"
datanode_1  | 	at org.apache.ratis.thirdparty.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374)
datanode_3  | 2020-04-17 18:30:01,800 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.notification.no-leader.timeout = 60s (default)
datanode_2  | 2020-04-17 18:30:01,976 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "33e2f66f-a610-4776-a5ba-53471ea74967"
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
recon_1     | }
datanode_3  | 2020-04-17 18:30:01,801 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.use.memory = false (default)
datanode_1  | 	at org.apache.ratis.thirdparty.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360)
datanode_2  | 
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
recon_1     | isLeader: true
datanode_3  | 2020-04-17 18:30:01,802 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.purge.gap = 1000000 (custom)
datanode_1  | 	at org.apache.ratis.thirdparty.io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:930)
datanode_2  | java.io.IOException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-53471EA74967 not found.
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
recon_1     | bytesWritten: 0
datanode_3  | 2020-04-17 18:30:01,804 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
datanode_1  | 	at org.apache.ratis.thirdparty.io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:163)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
recon_1     |  from dn=f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106586728310} {}
datanode_3  | 2020-04-17 18:30:01,805 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
datanode_1  | 	at org.apache.ratis.thirdparty.io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:697)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.destroyPipeline(SCMPipelineManager.java:579)
recon_1     | org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException): PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 not found
datanode_3  | 2020-04-17 18:30:01,806 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.log_worker.3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_1  | 	at org.apache.ratis.thirdparty.io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:632)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_3  | 2020-04-17 18:30:01,806 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.cache.num.max = 2 (custom)
datanode_1  | 	at org.apache.ratis.thirdparty.io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:549)
scm_1       | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.getPipeline(PipelineStateManager.java:63)
datanode_3  | 2020-04-17 18:30:01,806 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: new 3989634e-60c9-4e5a-8523-9408dc0a802d@group-002956D72CAC-SegmentedRaftLogWorker for RaftStorage:Storage Directory /data/metadata/ratis/1ca28fd5-8074-4f27-a46a-002956d72cac
datanode_1  | 	at org.apache.ratis.thirdparty.io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:511)
scm_1       | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.getPipeline(SCMPipelineManager.java:267)
datanode_3  | 2020-04-17 18:30:01,806 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.byte-limit = 2147483647 (custom)
datanode_1  | 	at org.apache.ratis.thirdparty.io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:918)
scm_1       | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_2  | Caused by: org.apache.ratis.protocol.GroupMismatchException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-53471EA74967 not found.
recon_1     | 	at org.apache.hadoop.hdds.scm.server.SCMClientProtocolServer.getPipeline(SCMClientProtocolServer.java:409)
datanode_3  | 2020-04-17 18:30:01,807 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.element-limit = 1024 (custom)
datanode_1  | 	at org.apache.ratis.thirdparty.io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
scm_1       | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
recon_1     | 	at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.getPipeline(StorageContainerLocationProtocolServerSideTranslatorPB.java:375)
datanode_3  | 2020-04-17 18:30:01,807 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
datanode_1  | 	at org.apache.ratis.thirdparty.io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
recon_1     | 	at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.processRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:249)
datanode_3  | 2020-04-17 18:30:01,808 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.preallocated.size = 16384 (custom)
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
recon_1     | 	at org.apache.hadoop.hdds.server.OzoneProtocolMessageDispatcher.processRequest(OzoneProtocolMessageDispatcher.java:75)
datanode_3  | 2020-04-17 18:30:01,808 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.write.buffer.size = 1048576 (custom)
datanode_1  | 
scm_1       | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
recon_1     | 	at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:120)
datanode_3  | 2020-04-17 18:30:01,808 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.force.sync.num = 128 (default)
datanode_1  | 2020-04-17 18:31:59,005 [Command processor thread] INFO segmented.SegmentedRaftLogWorker: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC-SegmentedRaftLogWorker close()
scm_1       | 2020-04-17 18:29:36,788 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 close command to datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_2  | 	... 4 more
recon_1     | 	at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:31605)
datanode_3  | 2020-04-17 18:30:01,810 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync = true (default)
datanode_1  | 2020-04-17 18:31:59,006 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.log_worker.0086d012-6f96-4817-8e1b-94f6eaa443bc
scm_1       | 2020-04-17 18:29:36,788 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 close command to datanode 3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_2  | 2020-04-17 18:30:06,856 [grpc-default-executor-5] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-002956D72CAC: changes role from  FOLLOWER to FOLLOWER at term 1 for recognizeCandidate:0086d012-6f96-4817-8e1b-94f6eaa443bc
recon_1     | 	at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:524)
datanode_3  | 2020-04-17 18:30:01,810 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout = 10s (default)
datanode_1  | 2020-04-17 18:31:59,006 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.leader_election.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC
scm_1       | 2020-04-17 18:29:36,788 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 close command to datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_2  | 2020-04-17 18:30:06,856 [grpc-default-executor-5] INFO impl.RoleInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689: shutdown FollowerState
recon_1     | 	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1025)
datanode_3  | 2020-04-17 18:30:01,810 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
datanode_1  | 2020-04-17 18:31:59,006 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.server.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC
scm_1       | 2020-04-17 18:29:36,788 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 33e2f66f-a610-4776-a5ba-53471ea74967, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:27:24.070288Z]
datanode_2  | 2020-04-17 18:30:06,857 [Thread-137] INFO impl.FollowerState: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-002956D72CAC-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
recon_1     | 	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:876)
datanode_3  | 2020-04-17 18:30:01,811 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.caching.enabled = true (custom)
datanode_1  | 2020-04-17 18:31:59,007 [Command processor thread] INFO commandhandler.ClosePipelineCommandHandler: Close Pipeline #id: "1ca28fd5-8074-4f27-a46a-002956d72cac"
scm_1       | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 not found
datanode_2  | 2020-04-17 18:30:06,857 [grpc-default-executor-5] INFO impl.RoleInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689: start FollowerState
recon_1     | 	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:822)
datanode_3  | 2020-04-17 18:30:01,812 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-002956D72CAC-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
datanode_1  |  command on datanode #0086d012-6f96-4817-8e1b-94f6eaa443bc.
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_2  | 2020-04-17 18:30:06,938 [grpc-default-executor-5] INFO ratis.XceiverServerRatis: Leader change notification received for group: group-002956D72CAC with new leaderId: 0086d012-6f96-4817-8e1b-94f6eaa443bc
recon_1     | 	at java.base/java.security.AccessController.doPrivileged(Native Method)
datanode_3  | 2020-04-17 18:30:01,814 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.enabled = true (custom)
datanode_1  | 2020-04-17 18:31:59,008 [grpc-default-executor-1] INFO impl.FollowerInfo: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC->f2e775cd-89a9-41b5-a9e0-4408e0d60689: nextIndex: updateUnconditionally 3 -> 1
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
datanode_2  | 2020-04-17 18:30:06,938 [grpc-default-executor-5] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-002956D72CAC: change Leader from null to 0086d012-6f96-4817-8e1b-94f6eaa443bc at term 1 for appendEntries, leader elected after 5118ms
recon_1     | 	at java.base/javax.security.auth.Subject.doAs(Subject.java:423)
datanode_3  | 2020-04-17 18:30:01,814 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
datanode_1  | 2020-04-17 18:31:59,008 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: addNew group-0B128664579E:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] returns group-0B128664579E:java.util.concurrent.CompletableFuture@22da6536[Not completed]
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
datanode_2  | 2020-04-17 18:30:06,973 [grpc-default-executor-5] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-002956D72CAC: set configuration 0: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null at 0
recon_1     | 	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1730)
datanode_3  | 2020-04-17 18:30:01,814 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.retention.file.num = 5 (custom)
datanode_1  | 2020-04-17 18:31:59,008 [grpc-default-executor-3] INFO server.GrpcLogAppender: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC->3989634e-60c9-4e5a-8523-9408dc0a802d-AppendLogResponseHandler: follower responses appendEntries COMPLETED
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
datanode_2  | 2020-04-17 18:30:06,973 [grpc-default-executor-5] INFO segmented.SegmentedRaftLogWorker: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-002956D72CAC-SegmentedRaftLogWorker: Starting segment from index:0
recon_1     | 	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2682)
datanode_3  | 2020-04-17 18:30:01,815 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.retrycache.expirytime = 600000ms (custom)
datanode_1  | 2020-04-17 18:31:59,010 [pool-70-thread-1] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc: new RaftServerImpl for group-0B128664579E:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] with ContainerStateMachine:uninitialized
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.destroyPipeline(SCMPipelineManager.java:579)
datanode_2  | 2020-04-17 18:30:06,977 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-002956D72CAC-SegmentedRaftLogWorker] INFO segmented.SegmentedRaftLogWorker: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-002956D72CAC-SegmentedRaftLogWorker: created new log segment /data/metadata/ratis/1ca28fd5-8074-4f27-a46a-002956d72cac/current/log_inprogress_0
recon_1     | 
datanode_3  | 2020-04-17 18:30:01,815 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.leader_election.3989634e-60c9-4e5a-8523-9408dc0a802d@group-002956D72CAC
datanode_1  | 2020-04-17 18:31:59,010 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.min = 5s (custom)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
datanode_2  | 2020-04-17 18:30:27,958 [ChunkWriter-56-0] INFO keyvalue.KeyValueHandler: Operation: CreateContainer , Trace ID: 770df85ae4b1898d:22da11a237d5e9bb:770df85ae4b1898d:0 , Message: Container creation failed, due to disk out of space , Result: DISK_OUT_OF_SPACE , StorageContainerException Occurred.
recon_1     | 	at org.apache.hadoop.ipc.Client.getRpcResponse(Client.java:1511)
datanode_3  | 2020-04-17 18:30:01,815 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.server.3989634e-60c9-4e5a-8523-9408dc0a802d@group-002956D72CAC
datanode_1  | 2020-04-17 18:31:59,010 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.max = 5200ms (custom)
scm_1       | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
datanode_2  | org.apache.hadoop.hdds.scm.container.common.helpers.StorageContainerException: Container creation failed, due to disk out of space
recon_1     | 	at org.apache.hadoop.ipc.Client.call(Client.java:1457)
datanode_3  | 2020-04-17 18:30:01,816 [pool-70-thread-1] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-002956D72CAC: start as a follower, conf=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null
datanode_1  | 2020-04-17 18:31:59,011 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpcslowness.timeout = 300s (custom)
scm_1       | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
datanode_2  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueContainer.create(KeyValueContainer.java:165)
recon_1     | 	at org.apache.hadoop.ipc.Client.call(Client.java:1367)
datanode_3  | 2020-04-17 18:30:01,816 [pool-70-thread-1] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-002956D72CAC: changes role from      null to FOLLOWER at term 0 for startAsFollower
datanode_1  | 2020-04-17 18:31:59,011 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.sleep.deviation.threshold = 300 (default)
scm_1       | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_2  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.handleCreateContainer(KeyValueHandler.java:247)
recon_1     | 	at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:228)
datanode_3  | 2020-04-17 18:30:01,816 [pool-70-thread-1] INFO impl.RoleInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d: start FollowerState
datanode_1  | 2020-04-17 18:31:59,011 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.install.snapshot.enabled = false (custom)
scm_1       | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
datanode_2  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.dispatchRequest(KeyValueHandler.java:164)
recon_1     | 	at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:116)
datanode_3  | 2020-04-17 18:30:01,816 [pool-70-thread-1] INFO util.JmxRegister: Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-002956D72CAC,id=3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_1  | 2020-04-17 18:31:59,011 [pool-70-thread-1] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0B128664579E: ConfigurationManager, init=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null, confs=<EMPTY_MAP>
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_2  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.handle(KeyValueHandler.java:152)
recon_1     | 	at com.sun.proxy.$Proxy41.submitRequest(Unknown Source)
datanode_3  | 2020-04-17 18:30:01,817 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.state_machine.3989634e-60c9-4e5a-8523-9408dc0a802d@group-002956D72CAC
datanode_1  | 2020-04-17 18:31:59,011 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.storage.dir = [/data/metadata/ratis] (custom)
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.createContainer(HddsDispatcher.java:414)
recon_1     | 	at org.apache.hadoop.hdds.scm.protocolPB.StorageContainerLocationProtocolClientSideTranslatorPB.submitRpcRequest(StorageContainerLocationProtocolClientSideTranslatorPB.java:123)
datanode_3  | 2020-04-17 18:30:01,842 [grpc-default-executor-2] WARN impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: Failed groupAdd* GroupManagementRequest:client-5B33BC0DD133->3989634e-60c9-4e5a-8523-9408dc0a802d@group-002956D72CAC, cid=4, seq=0, RW, null, Add:group-002956D72CAC:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858]
datanode_1  | 2020-04-17 18:31:59,011 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.corruption.policy = EXCEPTION (default)
datanode_1  | 2020-04-17 18:31:59,011 [pool-70-thread-1] INFO storage.RaftStorageDirectory: The storage directory /data/metadata/ratis/9b787585-8415-4999-b60e-0b128664579e does not exist. Creating ...
datanode_2  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatchRequest(HddsDispatcher.java:250)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatch(HddsDispatcher.java:162)
scm_1       | 	at java.base/java.lang.Thread.run(Thread.java:834)
recon_1     | 	at org.apache.hadoop.hdds.scm.protocolPB.StorageContainerLocationProtocolClientSideTranslatorPB.submitRequest(StorageContainerLocationProtocolClientSideTranslatorPB.java:114)
datanode_1  | 2020-04-17 18:31:59,014 [pool-70-thread-1] INFO storage.RaftStorageDirectory: Lock on /data/metadata/ratis/9b787585-8415-4999-b60e-0b128664579e/in_use.lock acquired by nodename 6@1e870b3d5d4c
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.dispatchCommand(ContainerStateMachine.java:402)
recon_1     | 	at org.apache.hadoop.hdds.scm.protocolPB.StorageContainerLocationProtocolClientSideTranslatorPB.getPipeline(StorageContainerLocationProtocolClientSideTranslatorPB.java:347)
scm_1       | 2020-04-17 18:29:36,788 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 close command to datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_3  | java.util.concurrent.CompletionException: org.apache.ratis.protocol.AlreadyExistsException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Failed to add group-002956D72CAC:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
datanode_1  | 2020-04-17 18:31:59,014 [grpc-default-executor-3] INFO impl.FollowerInfo: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-002956D72CAC->3989634e-60c9-4e5a-8523-9408dc0a802d: nextIndex: updateUnconditionally 3 -> 1
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.runCommand(ContainerStateMachine.java:412)
recon_1     | 	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
scm_1       | 2020-04-17 18:29:36,788 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 close command to datanode 3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
datanode_1  | 2020-04-17 18:31:59,018 [pool-70-thread-1] INFO storage.RaftStorage: Storage directory /data/metadata/ratis/9b787585-8415-4999-b60e-0b128664579e has been successfully formatted.
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.lambda$handleWriteChunk$2(ContainerStateMachine.java:447)
recon_1     | 	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
scm_1       | 2020-04-17 18:29:36,788 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 close command to datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyNow(CompletableFuture.java:670)
datanode_1  | 2020-04-17 18:31:59,018 [pool-70-thread-1] INFO ratis.ContainerStateMachine: group-0B128664579E: The snapshot info is null. Setting the last applied indexto:(t:0, i:~)
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
recon_1     | 	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
scm_1       | 2020-04-17 18:29:36,789 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 33e2f66f-a610-4776-a5ba-53471ea74967, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:27:24.070288Z]
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyStage(CompletableFuture.java:658)
datanode_1  | 2020-04-17 18:31:59,019 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.notification.no-leader.timeout = 60s (default)
datanode_2  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
recon_1     | 	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
scm_1       | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 not found
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture.thenApplyAsync(CompletableFuture.java:2104)
datanode_1  | 2020-04-17 18:31:59,019 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.use.memory = false (default)
datanode_2  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
recon_1     | 	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:71)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:379)
datanode_1  | 2020-04-17 18:31:59,020 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.purge.gap = 1000000 (custom)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
recon_1     | 	at com.sun.proxy.$Proxy42.getPipeline(Unknown Source)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:363)
datanode_1  | 2020-04-17 18:31:59,042 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
datanode_2  | Caused by: org.apache.hadoop.util.DiskChecker$DiskOutOfSpaceException: Out of space: The volume with the most available space (=497029120 B) is less than the container size (=1073741824 B).
recon_1     | 	at org.apache.hadoop.ozone.recon.spi.impl.StorageContainerServiceProviderImpl.getPipeline(StorageContainerServiceProviderImpl.java:55)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
datanode_3  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.lambda$groupManagement$0(GrpcAdminProtocolService.java:42)
datanode_1  | 2020-04-17 18:31:59,043 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.volume.RoundRobinVolumeChoosingPolicy.chooseVolume(RoundRobinVolumeChoosingPolicy.java:77)
recon_1     | 	at org.apache.hadoop.ozone.recon.scm.ReconPipelineReportHandler.processPipelineReport(ReconPipelineReportHandler.java:65)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
datanode_3  | 	at org.apache.ratis.grpc.GrpcUtil.asyncCall(GrpcUtil.java:160)
datanode_1  | 2020-04-17 18:31:59,044 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.log_worker.0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_2  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueContainer.create(KeyValueContainer.java:124)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineReportHandler.onMessage(PipelineReportHandler.java:84)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.destroyPipeline(SCMPipelineManager.java:579)
datanode_3  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.groupManagement(GrpcAdminProtocolService.java:42)
datanode_1  | 2020-04-17 18:31:59,044 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.cache.num.max = 2 (custom)
datanode_2  | 	... 13 more
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineReportHandler.onMessage(PipelineReportHandler.java:47)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
datanode_3  | 	at org.apache.ratis.proto.grpc.AdminProtocolServiceGrpc$MethodHandlers.invoke(AdminProtocolServiceGrpc.java:358)
datanode_1  | 2020-04-17 18:31:59,044 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: new 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0B128664579E-SegmentedRaftLogWorker for RaftStorage:Storage Directory /data/metadata/ratis/9b787585-8415-4999-b60e-0b128664579e
datanode_2  | 2020-04-17 18:30:27,960 [ChunkWriter-56-0] INFO impl.HddsDispatcher: Operation: WriteChunk , Trace ID: 770df85ae4b1898d:22da11a237d5e9bb:770df85ae4b1898d:0 , Message: ContainerID 4 creation failed , Result: DISK_OUT_OF_SPACE , StorageContainerException Occurred.
recon_1     | 	at org.apache.hadoop.hdds.server.events.SingleThreadExecutor.lambda$onMessage$1(SingleThreadExecutor.java:81)
scm_1       | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:172)
datanode_1  | 2020-04-17 18:31:59,044 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.byte-limit = 2147483647 (custom)
datanode_2  | org.apache.hadoop.hdds.scm.container.common.helpers.StorageContainerException: ContainerID 4 creation failed
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
scm_1       | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:331)
datanode_1  | 2020-04-17 18:31:59,045 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.element-limit = 1024 (custom)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatchRequest(HddsDispatcher.java:254)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
recon_1     | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:814)
datanode_1  | 2020-04-17 18:31:59,045 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatch(HddsDispatcher.java:162)
recon_1     | 2020-04-17 18:30:01,789 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Unknown pipeline PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac. Trying to get from SCM.
scm_1       | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
datanode_1  | 2020-04-17 18:31:59,046 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.preallocated.size = 16384 (custom)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.dispatchCommand(ContainerStateMachine.java:402)
recon_1     | 2020-04-17 18:30:01,792 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Adding new pipeline Pipeline[ Id: 1ca28fd5-8074-4f27-a46a-002956d72cac, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:ALLOCATED, leaderId:null, CreationTimestamp2020-04-17T18:29:36.706Z] to Recon pipeline metadata.
scm_1       | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:123)
datanode_1  | 2020-04-17 18:31:59,046 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.write.buffer.size = 1048576 (custom)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.runCommand(ContainerStateMachine.java:412)
recon_1     | 2020-04-17 18:30:01,793 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO pipeline.PipelineStateManager: Created pipeline Pipeline[ Id: 1ca28fd5-8074-4f27-a46a-002956d72cac, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:ALLOCATED, leaderId:null, CreationTimestamp2020-04-17T18:29:36.706Z]
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_3  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_1  | 2020-04-17 18:31:59,046 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.force.sync.num = 128 (default)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.lambda$handleWriteChunk$2(ContainerStateMachine.java:447)
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_3  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_2  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
recon_1     | 2020-04-17 18:30:01,793 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Pipeline THREE PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac reported by 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106649330073}
datanode_1  | 2020-04-17 18:31:59,052 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync = true (default)
scm_1       | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | Caused by: org.apache.ratis.protocol.AlreadyExistsException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Failed to add group-002956D72CAC:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
scm_1       | 2020-04-17 18:29:36,805 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 close command to datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc
recon_1     | 2020-04-17 18:30:01,804 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Pipeline THREE PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac reported by 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106587165812}
recon_1     | 2020-04-17 18:30:01,823 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Pipeline THREE PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac reported by f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106586728310}
datanode_1  | 2020-04-17 18:31:59,053 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout = 10s (default)
datanode_2  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
scm_1       | 2020-04-17 18:29:36,805 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 close command to datanode 3989634e-60c9-4e5a-8523-9408dc0a802d
recon_1     | 2020-04-17 18:30:03,698 [pool-9-thread-1] INFO impl.OzoneManagerServiceProviderImpl: Syncing data from Ozone Manager.
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy$ImplMap.addNew(RaftServerProxy.java:83)
datanode_1  | 2020-04-17 18:31:59,053 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 2020-04-17 18:29:36,806 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 close command to datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689
recon_1     | 2020-04-17 18:30:03,698 [pool-9-thread-1] INFO impl.OzoneManagerServiceProviderImpl: Obtaining delta updates from Ozone Manager
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:378)
datanode_1  | 2020-04-17 18:31:59,055 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.caching.enabled = true (custom)
datanode_2  | 2020-04-17 18:30:27,960 [ChunkWriter-56-0] ERROR ratis.ContainerStateMachine: group-002956D72CAC: writeChunk writeStateMachineData failed: blockIdcontainerID: 4
scm_1       | 2020-04-17 18:29:36,806 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 33e2f66f-a610-4776-a5ba-53471ea74967, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:27:24.070288Z]
recon_1     | 2020-04-17 18:30:03,722 [pool-9-thread-1] INFO impl.OzoneManagerServiceProviderImpl: Number of updates received from OM : 0
datanode_3  | 	... 13 more
datanode_1  | 2020-04-17 18:31:59,059 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0B128664579E-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
datanode_2  | localID: 104015346178850819
scm_1       | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 not found
recon_1     | 2020-04-17 18:30:06,869 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Pipeline THREE PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac reported by 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106649330073}
datanode_3  | 2020-04-17 18:30:01,883 [grpc-default-executor-2] WARN impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: Failed groupAdd* GroupManagementRequest:client-39C77BD1BD19->3989634e-60c9-4e5a-8523-9408dc0a802d@group-002956D72CAC, cid=4, seq=0, RW, null, Add:group-002956D72CAC:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858]
datanode_1  | 2020-04-17 18:31:59,063 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.enabled = true (custom)
datanode_2  | blockCommitSequenceId: 0
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
recon_1     | 2020-04-17 18:30:06,869 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO pipeline.PipelineStateManager: Pipeline Pipeline[ Id: 1ca28fd5-8074-4f27-a46a-002956d72cac, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:ALLOCATED, leaderId:0086d012-6f96-4817-8e1b-94f6eaa443bc, CreationTimestamp2020-04-17T18:29:36.706Z] moved to OPEN state
datanode_3  | java.util.concurrent.CompletionException: org.apache.ratis.protocol.AlreadyExistsException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Failed to add group-002956D72CAC:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
datanode_1  | 2020-04-17 18:31:59,067 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
datanode_2  |  logIndex 1 chunkName 104015346178850819_chunk_1 Error message: ContainerID 4 creation failed Container Result: DISK_OUT_OF_SPACE
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
recon_1     | 2020-04-17 18:30:27,945 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
datanode_1  | 2020-04-17 18:31:59,067 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.retention.file.num = 5 (custom)
datanode_2  | 2020-04-17 18:30:27,961 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-002956D72CAC-SegmentedRaftLogWorker] ERROR ratis.XceiverServerRatis: pipeline Action CLOSE on pipeline PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac.Reason : ContainerID 4 creation failed
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
recon_1     | 2020-04-17 18:30:27,981 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyNow(CompletableFuture.java:670)
datanode_1  | 2020-04-17 18:31:59,068 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.retrycache.expirytime = 600000ms (custom)
datanode_2  | 2020-04-17 18:30:28,015 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-002956D72CAC-SegmentedRaftLogWorker] ERROR ratis.XceiverServerRatis: pipeline Action CLOSE on pipeline PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac.Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-EF8919F5D3CD, cid=1
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.destroyPipeline(SCMPipelineManager.java:579)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
scm_1       | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
scm_1       | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
scm_1       | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
scm_1       | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
scm_1       | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyStage(CompletableFuture.java:658)
scm_1       | 2020-04-17 18:29:36,811 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 close command to datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc
recon_1     | 2020-04-17 18:30:28,006 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_1  | 2020-04-17 18:31:59,068 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.leader_election.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0B128664579E
datanode_2  | 	 State Machine: cmdType: WriteChunk traceID: "770df85ae4b1898d:22da11a237d5e9bb:770df85ae4b1898d:0" containerID: 4 datanodeUuid: "3989634e-60c9-4e5a-8523-9408dc0a802d" pipelineID: "1ca28fd5-8074-4f27-a46a-002956d72cac" writeChunk { blockID { containerID: 4 localID: 104015346178850819 blockCommitSequenceId: 0 } chunkData { chunkName: "104015346178850819_chunk_1" offset: 0 len: 17540 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: " wi\267" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDQgbG9jSUQ6IDEwNDAxNTM0NjE3ODg1MDgxORiwuLn0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BAFDGfwn3uQnZGLuUq70c2-0qpxbvg_0X-6vgiEkhNBT2jw9xVwWPc6w7GAFKfRrUxg46X9PPBab1jiXIYs87FLBZ3IjpBigZJ34LheCuGYCvYYb6rJW3UsEcsqlJ4UjPXZe-IhzhR3QeP8GzfRnooW-tEoUl-MyjEiauwg0aZXIvmJzYi9DlAKQ9OniPdXmjljQEED-gZ06Ib_diSjGd5ST-wudVc0j0hnzTF7zzkw4xRIq3MwnIBCP2227J1kYHwD5HJzA-_Ojvwpsm28oovxOOlkYb0EaNBOrxHoe2onP8zY5QhmaYlbrfGf5zcDWWxwdRJVyt8c9ru7JltLMsKn0QSEREU19CTE9DS19UT0tFTiJjb25JRDogNCBsb2NJRDogMTA0MDE1MzQ2MTc4ODUwODE5", container path=nonexistent
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture.thenApplyAsync(CompletableFuture.java:2104)
scm_1       | 2020-04-17 18:29:36,811 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 close command to datanode 3989634e-60c9-4e5a-8523-9408dc0a802d
recon_1     | 2020-04-17 18:30:28,010 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac from datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc. Reason : ContainerID 4 creation failed
datanode_1  | 2020-04-17 18:31:59,068 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.server.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0B128664579E
datanode_2  | 2020-04-17 18:30:32,819 [Command processor thread] ERROR commandhandler.CloseContainerCommandHandler: Container #4 does not exist in datanode. Container close failed.
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:379)
scm_1       | 2020-04-17 18:29:36,811 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 close command to datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689
recon_1     | 2020-04-17 18:30:28,014 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 1ca28fd5-8074-4f27-a46a-002956d72cac, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:OPEN, leaderId:0086d012-6f96-4817-8e1b-94f6eaa443bc, CreationTimestamp2020-04-17T18:29:36.706Z]
datanode_1  | 2020-04-17 18:31:59,069 [pool-70-thread-1] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0B128664579E: start as a follower, conf=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null
datanode_2  | 2020-04-17 18:31:58,979 [grpc-default-executor-5] INFO server.GrpcServerProtocolService: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Completed APPEND_ENTRIES, lastRequest: 0086d012-6f96-4817-8e1b-94f6eaa443bc->f2e775cd-89a9-41b5-a9e0-4408e0d60689#11-t1, previous=(t:1, i:1), leaderCommit=0, initializing? false, entries: size=1, first=(t:1, i:2), STATEMACHINELOGENTRY, client-EF8919F5D3CD, cid=2
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:363)
scm_1       | 2020-04-17 18:29:36,812 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 33e2f66f-a610-4776-a5ba-53471ea74967, Nodes: 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:27:24.070288Z]
recon_1     | 2020-04-17 18:30:28,014 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineStateManager: Pipeline Pipeline[ Id: 1ca28fd5-8074-4f27-a46a-002956d72cac, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:0086d012-6f96-4817-8e1b-94f6eaa443bc, CreationTimestamp2020-04-17T18:29:36.706Z] moved to CLOSED state
datanode_1  | 2020-04-17 18:31:59,069 [pool-70-thread-1] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0B128664579E: changes role from      null to FOLLOWER at term 0 for startAsFollower
datanode_2  | 2020-04-17 18:31:59,016 [Command processor thread] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: remove  FOLLOWER f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-002956D72CAC:t1, leader=0086d012-6f96-4817-8e1b-94f6eaa443bc, voted=0086d012-6f96-4817-8e1b-94f6eaa443bc, raftlog=f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-002956D72CAC-SegmentedRaftLog:OPENED:c0,f0,i2, conf=0: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null RUNNING
datanode_3  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.lambda$groupManagement$0(GrpcAdminProtocolService.java:42)
scm_1       | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 not found
recon_1     | 2020-04-17 18:30:28,015 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac from datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc. Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-EF8919F5D3CD, cid=1
datanode_1  | 2020-04-17 18:31:59,069 [pool-70-thread-1] INFO impl.RoleInfo: 0086d012-6f96-4817-8e1b-94f6eaa443bc: start FollowerState
datanode_2  | 2020-04-17 18:31:59,016 [Command processor thread] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-002956D72CAC: shutdown
datanode_3  | 	at org.apache.ratis.grpc.GrpcUtil.asyncCall(GrpcUtil.java:160)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
recon_1     | 	 State Machine: cmdType: WriteChunk traceID: "770df85ae4b1898d:22da11a237d5e9bb:770df85ae4b1898d:0" containerID: 4 datanodeUuid: "3989634e-60c9-4e5a-8523-9408dc0a802d" pipelineID: "1ca28fd5-8074-4f27-a46a-002956d72cac" writeChunk { blockID { containerID: 4 localID: 104015346178850819 blockCommitSequenceId: 0 } chunkData { chunkName: "104015346178850819_chunk_1" offset: 0 len: 17540 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: " wi\267" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDQgbG9jSUQ6IDEwNDAxNTM0NjE3ODg1MDgxORiwuLn0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BAFDGfwn3uQnZGLuUq70c2-0qpxbvg_0X-6vgiEkhNBT2jw9xVwWPc6w7GAFKfRrUxg46X9PPBab1jiXIYs87FLBZ3IjpBigZJ34LheCuGYCvYYb6rJW3UsEcsqlJ4UjPXZe-IhzhR3QeP8GzfRnooW-tEoUl-MyjEiauwg0aZXIvmJzYi9DlAKQ9OniPdXmjljQEED-gZ06Ib_diSjGd5ST-wudVc0j0hnzTF7zzkw4xRIq3MwnIBCP2227J1kYHwD5HJzA-_Ojvwpsm28oovxOOlkYb0EaNBOrxHoe2onP8zY5QhmaYlbrfGf5zcDWWxwdRJVyt8c9ru7JltLMsKn0QSEREU19CTE9DS19UT0tFTiJjb25JRDogNCBsb2NJRDogMTA0MDE1MzQ2MTc4ODUwODE5", container path=nonexistent
datanode_1  | 2020-04-17 18:31:59,079 [pool-70-thread-1] INFO util.JmxRegister: Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-0B128664579E,id=0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_2  | 2020-04-17 18:31:59,017 [Command processor thread] INFO util.JmxRegister: Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-002956D72CAC,id=f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_3  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.groupManagement(GrpcAdminProtocolService.java:42)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
recon_1     | 2020-04-17 18:30:28,016 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 2020-04-17 18:31:59,079 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.state_machine.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0B128664579E
datanode_2  | 2020-04-17 18:31:59,017 [Command processor thread] INFO impl.RoleInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689: shutdown FollowerState
datanode_3  | 	at org.apache.ratis.proto.grpc.AdminProtocolServiceGrpc$MethodHandlers.invoke(AdminProtocolServiceGrpc.java:358)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
recon_1     | 2020-04-17 18:30:28,020 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 1ca28fd5-8074-4f27-a46a-002956d72cac, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:0086d012-6f96-4817-8e1b-94f6eaa443bc, CreationTimestamp2020-04-17T18:29:36.706Z]
datanode_1  | 2020-04-17 18:31:59,136 [grpc-default-executor-3] WARN impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Failed groupAdd* GroupManagementRequest:client-3078390CE4DE->0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0B128664579E, cid=7, seq=0, RW, null, Add:group-0B128664579E:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858]
datanode_1  | java.util.concurrent.CompletionException: org.apache.ratis.protocol.AlreadyExistsException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Failed to add group-0B128664579E:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:172)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
datanode_2  | 2020-04-17 18:31:59,017 [Command processor thread] INFO impl.StateMachineUpdater: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-002956D72CAC-StateMachineUpdater: set stopIndex = 0
recon_1     | 2020-04-17 18:30:28,029 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:331)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.destroyPipeline(SCMPipelineManager.java:579)
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyNow(CompletableFuture.java:670)
datanode_2  | 2020-04-17 18:31:59,017 [Thread-140] INFO impl.FollowerState: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-002956D72CAC-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
recon_1     | 2020-04-17 18:30:28,030 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac from datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689. Reason : ContainerID 4 creation failed
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:814)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyStage(CompletableFuture.java:658)
datanode_2  | 2020-04-17 18:31:59,018 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-002956D72CAC-StateMachineUpdater] ERROR ratis.ContainerStateMachine: Failed to take snapshot  for group-002956D72CAC as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
recon_1     | 2020-04-17 18:30:28,032 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 1ca28fd5-8074-4f27-a46a-002956d72cac, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:0086d012-6f96-4817-8e1b-94f6eaa443bc, CreationTimestamp2020-04-17T18:29:36.706Z]
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture.thenApplyAsync(CompletableFuture.java:2104)
datanode_2  | 2020-04-17 18:31:59,018 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-002956D72CAC-StateMachineUpdater] ERROR impl.StateMachineUpdater: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-002956D72CAC-StateMachineUpdater: Failed to take snapshot
recon_1     | 2020-04-17 18:30:28,036 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac from datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689. Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-EF8919F5D3CD, cid=1
scm_1       | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:123)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:379)
datanode_2  | org.apache.ratis.protocol.StateMachineException: Failed to take snapshot  for group-002956D72CAC as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
recon_1     | 	 State Machine: cmdType: WriteChunk traceID: "770df85ae4b1898d:22da11a237d5e9bb:770df85ae4b1898d:0" containerID: 4 datanodeUuid: "3989634e-60c9-4e5a-8523-9408dc0a802d" pipelineID: "1ca28fd5-8074-4f27-a46a-002956d72cac" writeChunk { blockID { containerID: 4 localID: 104015346178850819 blockCommitSequenceId: 0 } chunkData { chunkName: "104015346178850819_chunk_1" offset: 0 len: 17540 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: " wi\267" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDQgbG9jSUQ6IDEwNDAxNTM0NjE3ODg1MDgxORiwuLn0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BAFDGfwn3uQnZGLuUq70c2-0qpxbvg_0X-6vgiEkhNBT2jw9xVwWPc6w7GAFKfRrUxg46X9PPBab1jiXIYs87FLBZ3IjpBigZJ34LheCuGYCvYYb6rJW3UsEcsqlJ4UjPXZe-IhzhR3QeP8GzfRnooW-tEoUl-MyjEiauwg0aZXIvmJzYi9DlAKQ9OniPdXmjljQEED-gZ06Ib_diSjGd5ST-wudVc0j0hnzTF7zzkw4xRIq3MwnIBCP2227J1kYHwD5HJzA-_Ojvwpsm28oovxOOlkYb0EaNBOrxHoe2onP8zY5QhmaYlbrfGf5zcDWWxwdRJVyt8c9ru7JltLMsKn0QSEREU19CTE9DS19UT0tFTiJjb25JRDogNCBsb2NJRDogMTA0MDE1MzQ2MTc4ODUwODE5", container path=nonexistent
scm_1       | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
datanode_3  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:363)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.takeSnapshot(ContainerStateMachine.java:288)
recon_1     | 2020-04-17 18:30:28,037 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 1ca28fd5-8074-4f27-a46a-002956d72cac, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:0086d012-6f96-4817-8e1b-94f6eaa443bc, CreationTimestamp2020-04-17T18:29:36.706Z]
scm_1       | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_3  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_1  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.lambda$groupManagement$0(GrpcAdminProtocolService.java:42)
datanode_2  | 	at org.apache.ratis.server.impl.StateMachineUpdater.takeSnapshot(StateMachineUpdater.java:258)
recon_1     | 2020-04-17 18:30:28,044 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
scm_1       | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_1  | 	at org.apache.ratis.grpc.GrpcUtil.asyncCall(GrpcUtil.java:160)
datanode_2  | 	at org.apache.ratis.server.impl.StateMachineUpdater.checkAndTakeSnapshot(StateMachineUpdater.java:250)
recon_1     | 2020-04-17 18:30:28,045 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac from datanode 3989634e-60c9-4e5a-8523-9408dc0a802d. Reason : ContainerID 4 creation failed
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_3  | Caused by: org.apache.ratis.protocol.AlreadyExistsException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Failed to add group-002956D72CAC:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
datanode_1  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.groupManagement(GrpcAdminProtocolService.java:42)
datanode_2  | 	at org.apache.ratis.server.impl.StateMachineUpdater.run(StateMachineUpdater.java:169)
recon_1     | 2020-04-17 18:30:28,045 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 1ca28fd5-8074-4f27-a46a-002956d72cac, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:0086d012-6f96-4817-8e1b-94f6eaa443bc, CreationTimestamp2020-04-17T18:29:36.706Z]
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy$ImplMap.addNew(RaftServerProxy.java:83)
datanode_1  | 	at org.apache.ratis.proto.grpc.AdminProtocolServiceGrpc$MethodHandlers.invoke(AdminProtocolServiceGrpc.java:358)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
recon_1     | 2020-04-17 18:30:28,047 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac from datanode 3989634e-60c9-4e5a-8523-9408dc0a802d. Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-EF8919F5D3CD, cid=1
scm_1       | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:378)
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:172)
datanode_2  | 2020-04-17 18:31:59,019 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-002956D72CAC-StateMachineUpdater] ERROR ratis.ContainerStateMachine: Failed to take snapshot  for group-002956D72CAC as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
recon_1     | 	 State Machine: cmdType: WriteChunk traceID: "770df85ae4b1898d:22da11a237d5e9bb:770df85ae4b1898d:0" containerID: 4 datanodeUuid: "3989634e-60c9-4e5a-8523-9408dc0a802d" pipelineID: "1ca28fd5-8074-4f27-a46a-002956d72cac" writeChunk { blockID { containerID: 4 localID: 104015346178850819 blockCommitSequenceId: 0 } chunkData { chunkName: "104015346178850819_chunk_1" offset: 0 len: 17540 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: " wi\267" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDQgbG9jSUQ6IDEwNDAxNTM0NjE3ODg1MDgxORiwuLn0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BAFDGfwn3uQnZGLuUq70c2-0qpxbvg_0X-6vgiEkhNBT2jw9xVwWPc6w7GAFKfRrUxg46X9PPBab1jiXIYs87FLBZ3IjpBigZJ34LheCuGYCvYYb6rJW3UsEcsqlJ4UjPXZe-IhzhR3QeP8GzfRnooW-tEoUl-MyjEiauwg0aZXIvmJzYi9DlAKQ9OniPdXmjljQEED-gZ06Ib_diSjGd5ST-wudVc0j0hnzTF7zzkw4xRIq3MwnIBCP2227J1kYHwD5HJzA-_Ojvwpsm28oovxOOlkYb0EaNBOrxHoe2onP8zY5QhmaYlbrfGf5zcDWWxwdRJVyt8c9ru7JltLMsKn0QSEREU19CTE9DS19UT0tFTiJjb25JRDogNCBsb2NJRDogMTA0MDE1MzQ2MTc4ODUwODE5", container path=nonexistent
scm_1       | 2020-04-17 18:29:42,604 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Failed to create pipeline of type RATIS and factor ONE. Exception: Cannot create pipeline of factor 1 using 0 nodes. Used 3 nodes. Healthy nodes 3
scm_1       | 2020-04-17 18:29:42,605 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Failed to create pipeline of type RATIS and factor THREE. Exception: Pipeline creation failed because nodes are engaged in other pipelines and every node can only be engaged in max 2 pipelines. Required 3. Found 0
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:331)
datanode_2  | 2020-04-17 18:31:59,019 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-002956D72CAC-StateMachineUpdater] ERROR impl.StateMachineUpdater: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-002956D72CAC-StateMachineUpdater: Failed to take snapshot
recon_1     | 2020-04-17 18:30:28,047 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 1ca28fd5-8074-4f27-a46a-002956d72cac, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:0086d012-6f96-4817-8e1b-94f6eaa443bc, CreationTimestamp2020-04-17T18:29:36.706Z]
scm_1       | 2020-04-17 18:30:00,743 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 	... 13 more
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:814)
datanode_2  | org.apache.ratis.protocol.StateMachineException: Failed to take snapshot  for group-002956D72CAC as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
recon_1     | 2020-04-17 18:30:57,994 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
scm_1       | 2020-04-17 18:30:00,756 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_3  | 2020-04-17 18:30:01,937 [Command processor thread] INFO commandhandler.CreatePipelineCommandHandler: Created Pipeline RATIS THREE #id: "1ca28fd5-8074-4f27-a46a-002956d72cac"
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.takeSnapshot(ContainerStateMachine.java:288)
recon_1     | 2020-04-17 18:30:58,003 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
scm_1       | 2020-04-17 18:30:00,757 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | .
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:123)
datanode_2  | 	at org.apache.ratis.server.impl.StateMachineUpdater.takeSnapshot(StateMachineUpdater.java:258)
recon_1     | 2020-04-17 18:30:58,049 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
scm_1       | 2020-04-17 18:30:00,770 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_3  | 2020-04-17 18:30:01,940 [Command processor thread] INFO impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: remove group-53471EA74967:null
datanode_1  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_2  | 	at org.apache.ratis.server.impl.StateMachineUpdater.checkAndTakeSnapshot(StateMachineUpdater.java:250)
recon_1     | 2020-04-17 18:30:58,050 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
scm_1       | 2020-04-17 18:30:00,803 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 2020-04-17 18:30:01,941 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "33e2f66f-a610-4776-a5ba-53471ea74967"
datanode_1  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_2  | 	at org.apache.ratis.server.impl.StateMachineUpdater.run(StateMachineUpdater.java:172)
recon_1     | 2020-04-17 18:30:58,065 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
scm_1       | 2020-04-17 18:30:00,834 [Socket Reader #1 for port 9860] INFO ipc.Server: Auth successful for recon/recon@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 2020-04-17 18:30:00,836 [Socket Reader #1 for port 9860] INFO authorize.ServiceAuthorizationManager: Authorization successful for recon/recon@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocol
recon_1     | 2020-04-17 18:30:58,074 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_3  | java.io.IOException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-53471EA74967 not found.
datanode_1  | Caused by: org.apache.ratis.protocol.AlreadyExistsException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Failed to add group-0B128664579E:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
datanode_2  | 2020-04-17 18:31:59,019 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-002956D72CAC-StateMachineUpdater] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.state_machine.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-002956D72CAC
scm_1       | 2020-04-17 18:30:00,837 [IPC Server handler 99 on 9860] INFO ipc.Server: IPC Server handler 99 on 9860, call Call#16 Retry#0 org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocol.submitRequest from 172.24.0.3:40027
recon_1     | 2020-04-17 18:31:03,732 [pool-9-thread-1] INFO impl.OzoneManagerServiceProviderImpl: Syncing data from Ozone Manager.
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy$ImplMap.addNew(RaftServerProxy.java:83)
datanode_2  | 2020-04-17 18:31:59,019 [Command processor thread] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-002956D72CAC: closes. applyIndex: 0
scm_1       | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=33e2f66f-a610-4776-a5ba-53471ea74967 not found
recon_1     | 2020-04-17 18:31:03,732 [pool-9-thread-1] INFO impl.OzoneManagerServiceProviderImpl: Obtaining delta updates from Ozone Manager
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:378)
datanode_2  | 2020-04-17 18:31:59,020 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-002956D72CAC-SegmentedRaftLogWorker] INFO segmented.SegmentedRaftLogWorker: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-002956D72CAC-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
recon_1     | 2020-04-17 18:31:03,756 [pool-9-thread-1] INFO impl.OzoneManagerServiceProviderImpl: Number of updates received from OM : 4
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_1  | 	... 13 more
datanode_2  | 2020-04-17 18:31:59,020 [Command processor thread] INFO segmented.SegmentedRaftLogWorker: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-002956D72CAC-SegmentedRaftLogWorker close()
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.getPipeline(PipelineStateManager.java:63)
recon_1     | 2020-04-17 18:31:03,760 [pool-10-thread-1] INFO tasks.ContainerKeyMapperTask: ContainerKeyMapperTask successfully processed 0 OM DB update event(s).
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_1  | 2020-04-17 18:31:59,174 [grpc-default-executor-3] WARN impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Failed groupAdd* GroupManagementRequest:client-25F658D6ABBA->0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0B128664579E, cid=9, seq=0, RW, null, Add:group-0B128664579E:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858]
datanode_2  | 2020-04-17 18:31:59,021 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.log_worker.f2e775cd-89a9-41b5-a9e0-4408e0d60689
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.getPipeline(SCMPipelineManager.java:267)
recon_1     | 2020-04-17 18:31:03,821 [pool-10-thread-1] INFO tasks.FileSizeCountTask: Completed a 'process' run of FileSizeCountTask.
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_1  | java.util.concurrent.CompletionException: org.apache.ratis.protocol.AlreadyExistsException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Failed to add group-0B128664579E:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
datanode_2  | 2020-04-17 18:31:59,021 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.leader_election.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-002956D72CAC
scm_1       | 	at org.apache.hadoop.hdds.scm.server.SCMClientProtocolServer.getPipeline(SCMClientProtocolServer.java:409)
recon_1     | 2020-04-17 18:31:27,988 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-53471EA74967 not found.
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
datanode_2  | 2020-04-17 18:31:59,021 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.server.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-002956D72CAC
scm_1       | 	at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.getPipeline(StorageContainerLocationProtocolServerSideTranslatorPB.java:375)
recon_1     | 2020-04-17 18:31:27,995 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyNow(CompletableFuture.java:670)
datanode_2  | 2020-04-17 18:31:59,023 [Command processor thread] INFO commandhandler.ClosePipelineCommandHandler: Close Pipeline #id: "1ca28fd5-8074-4f27-a46a-002956d72cac"
scm_1       | 	at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.processRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:249)
recon_1     | 2020-04-17 18:31:28,061 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyStage(CompletableFuture.java:658)
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture.thenApplyAsync(CompletableFuture.java:2104)
scm_1       | 	at org.apache.hadoop.hdds.server.OzoneProtocolMessageDispatcher.processRequest(OzoneProtocolMessageDispatcher.java:75)
recon_1     | 2020-04-17 18:31:28,066 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
datanode_2  |  command on datanode #f2e775cd-89a9-41b5-a9e0-4408e0d60689.
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:379)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
scm_1       | 	at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:120)
recon_1     | 2020-04-17 18:31:28,081 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_2  | 2020-04-17 18:31:59,028 [pool-70-thread-1] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689: new RaftServerImpl for group-0B128664579E:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] with ContainerStateMachine:uninitialized
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:363)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
scm_1       | 	at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:31605)
recon_1     | 2020-04-17 18:31:28,098 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_2  | 2020-04-17 18:31:59,035 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.min = 5s (custom)
datanode_1  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.lambda$groupManagement$0(GrpcAdminProtocolService.java:42)
datanode_3  | 	... 4 more
scm_1       | 	at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:524)
recon_1     | 2020-04-17 18:31:34,016 [RatisPipelineUtilsThread] INFO pipeline.PipelineStateManager: Pipeline Pipeline[ Id: 1ca28fd5-8074-4f27-a46a-002956d72cac, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:0086d012-6f96-4817-8e1b-94f6eaa443bc, CreationTimestamp2020-04-17T18:29:36.706Z] removed from db
datanode_2  | 2020-04-17 18:31:59,035 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.max = 5200ms (custom)
datanode_1  | 	at org.apache.ratis.grpc.GrpcUtil.asyncCall(GrpcUtil.java:160)
datanode_3  | 2020-04-17 18:30:01,941 [Command processor thread] INFO impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: remove group-53471EA74967:null
scm_1       | 	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1025)
recon_1     | 2020-04-17 18:31:34,027 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 1ca28fd5-8074-4f27-a46a-002956d72cac, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:0086d012-6f96-4817-8e1b-94f6eaa443bc, CreationTimestamp2020-04-17T18:29:36.706Z]
datanode_2  | 2020-04-17 18:31:59,035 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpcslowness.timeout = 300s (custom)
datanode_1  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.groupManagement(GrpcAdminProtocolService.java:42)
datanode_3  | 2020-04-17 18:30:01,941 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "33e2f66f-a610-4776-a5ba-53471ea74967"
scm_1       | 	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:876)
recon_1     | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac not found
datanode_2  | 2020-04-17 18:31:59,036 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.sleep.deviation.threshold = 300 (default)
datanode_3  | 
scm_1       | 	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:822)
datanode_1  | 	at org.apache.ratis.proto.grpc.AdminProtocolServiceGrpc$MethodHandlers.invoke(AdminProtocolServiceGrpc.java:358)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_2  | 2020-04-17 18:31:59,037 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.install.snapshot.enabled = false (custom)
datanode_3  | java.io.IOException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-53471EA74967 not found.
scm_1       | 	at java.base/java.security.AccessController.doPrivileged(Native Method)
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:172)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
datanode_2  | 2020-04-17 18:31:59,037 [pool-70-thread-1] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E: ConfigurationManager, init=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null, confs=<EMPTY_MAP>
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
scm_1       | 	at java.base/javax.security.auth.Subject.doAs(Subject.java:423)
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:331)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
datanode_2  | 2020-04-17 18:31:59,038 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.storage.dir = [/data/metadata/ratis] (custom)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
scm_1       | 	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1730)
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:814)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
datanode_2  | 2020-04-17 18:31:59,038 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.corruption.policy = EXCEPTION (default)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
scm_1       | 	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2682)
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
recon_1     | 	at org.apache.hadoop.ozone.recon.scm.ReconPipelineManager.destroyPipeline(ReconPipelineManager.java:74)
datanode_2  | 2020-04-17 18:31:59,039 [pool-70-thread-1] INFO storage.RaftStorageDirectory: The storage directory /data/metadata/ratis/9b787585-8415-4999-b60e-0b128664579e does not exist. Creating ...
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
scm_1       | 2020-04-17 18:30:00,842 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:123)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
datanode_2  | 2020-04-17 18:31:59,040 [Command processor thread] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: addNew group-0B128664579E:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] returns group-0B128664579E:java.util.concurrent.CompletableFuture@7ea7a8e[Not completed]
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 2020-04-17 18:30:02,876 [Socket Reader #1 for port 9863] INFO ipc.Server: Auth successful for om/om@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
recon_1     | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
datanode_2  | 2020-04-17 18:31:59,041 [pool-70-thread-1] INFO storage.RaftStorageDirectory: Lock on /data/metadata/ratis/9b787585-8415-4999-b60e-0b128664579e/in_use.lock acquired by nodename 6@d4ddc26437df
datanode_3  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-53471EA74967 not found.
scm_1       | 2020-04-17 18:30:02,884 [Socket Reader #1 for port 9863] INFO authorize.ServiceAuthorizationManager: Authorization successful for om/om@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.hdds.scm.protocol.ScmBlockLocationProtocol
datanode_1  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
recon_1     | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
datanode_2  | 2020-04-17 18:31:59,049 [pool-70-thread-1] INFO storage.RaftStorage: Storage directory /data/metadata/ratis/9b787585-8415-4999-b60e-0b128664579e has been successfully formatted.
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
scm_1       | 2020-04-17 18:30:02,885 [IPC Server handler 43 on 9863] ERROR pipeline.SCMPipelineManager: Failed to create pipeline of type RATIS and factor THREE. Exception: Pipeline creation failed because nodes are engaged in other pipelines and every node can only be engaged in max 2 pipelines. Required 3. Found 0
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
recon_1     | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_2  | 2020-04-17 18:31:59,050 [pool-70-thread-1] INFO ratis.ContainerStateMachine: group-0B128664579E: The snapshot info is null. Setting the last applied indexto:(t:0, i:~)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
scm_1       | 2020-04-17 18:30:02,885 [IPC Server handler 43 on 9863] WARN block.BlockManagerImpl: Pipeline creation failed for type:RATIS factor:THREE. Datanodes may be used up.
datanode_1  | Caused by: org.apache.ratis.protocol.AlreadyExistsException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Failed to add group-0B128664579E:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
recon_1     | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
datanode_2  | 2020-04-17 18:31:59,051 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.notification.no-leader.timeout = 60s (default)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
scm_1       | org.apache.hadoop.hdds.scm.exceptions.SCMException: Pipeline creation failed because nodes are engaged in other pipelines and every node can only be engaged in max 2 pipelines. Required 3. Found 0
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy$ImplMap.addNew(RaftServerProxy.java:83)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_2  | 2020-04-17 18:31:59,051 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.use.memory = false (default)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.filterViableNodes(PipelinePlacementPolicy.java:173)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:378)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_2  | 2020-04-17 18:31:59,051 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.purge.gap = 1000000 (custom)
datanode_3  | 	... 4 more
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.chooseDatanodes(PipelinePlacementPolicy.java:196)
datanode_1  | 	... 13 more
recon_1     | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 2020-04-17 18:31:59,052 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
datanode_3  | 2020-04-17 18:30:01,941 [Command processor thread] INFO impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: remove group-53471EA74967:null
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.RatisPipelineProvider.create(RatisPipelineProvider.java:116)
datanode_1  | 2020-04-17 18:31:59,176 [Command processor thread] INFO commandhandler.CreatePipelineCommandHandler: Created Pipeline RATIS THREE #id: "9b787585-8415-4999-b60e-0b128664579e"
recon_1     | 2020-04-17 18:31:34,032 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 1ca28fd5-8074-4f27-a46a-002956d72cac, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:0086d012-6f96-4817-8e1b-94f6eaa443bc, CreationTimestamp2020-04-17T18:29:36.706Z]
datanode_2  | 2020-04-17 18:31:59,052 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
datanode_3  | 2020-04-17 18:30:01,942 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "33e2f66f-a610-4776-a5ba-53471ea74967"
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineFactory.create(PipelineFactory.java:63)
datanode_1  | .
recon_1     | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac not found
datanode_2  | 2020-04-17 18:31:59,052 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.log_worker.f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_3  | 
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.createPipeline(SCMPipelineManager.java:232)
datanode_1  | 2020-04-17 18:31:59,177 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: remove group-002956D72CAC:null
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_2  | 2020-04-17 18:31:59,053 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.cache.num.max = 2 (custom)
datanode_3  | java.io.IOException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-53471EA74967 not found.
scm_1       | 	at org.apache.hadoop.hdds.scm.block.BlockManagerImpl.allocateBlock(BlockManagerImpl.java:200)
datanode_1  | 2020-04-17 18:31:59,177 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "1ca28fd5-8074-4f27-a46a-002956d72cac"
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
datanode_2  | 2020-04-17 18:31:59,072 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: new f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-SegmentedRaftLogWorker for RaftStorage:Storage Directory /data/metadata/ratis/9b787585-8415-4999-b60e-0b128664579e
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
scm_1       | 	at org.apache.hadoop.hdds.scm.server.SCMBlockProtocolServer.allocateBlock(SCMBlockProtocolServer.java:190)
datanode_1  | 
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
datanode_2  | 2020-04-17 18:31:59,072 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.byte-limit = 2147483647 (custom)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
scm_1       | 	at org.apache.hadoop.hdds.scm.protocol.ScmBlockLocationProtocolServerSideTranslatorPB.allocateScmBlock(ScmBlockLocationProtocolServerSideTranslatorPB.java:161)
datanode_1  | java.io.IOException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-002956D72CAC not found.
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
datanode_2  | 2020-04-17 18:31:59,073 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.element-limit = 1024 (custom)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
scm_1       | 	at org.apache.hadoop.hdds.scm.protocol.ScmBlockLocationProtocolServerSideTranslatorPB.processMessage(ScmBlockLocationProtocolServerSideTranslatorPB.java:119)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
recon_1     | 	at org.apache.hadoop.ozone.recon.scm.ReconPipelineManager.destroyPipeline(ReconPipelineManager.java:74)
datanode_2  | 2020-04-17 18:31:59,073 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
scm_1       | 	at org.apache.hadoop.hdds.server.OzoneProtocolMessageDispatcher.processRequest(OzoneProtocolMessageDispatcher.java:75)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
datanode_2  | 2020-04-17 18:31:59,073 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.preallocated.size = 16384 (custom)
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 	at org.apache.hadoop.hdds.scm.protocol.ScmBlockLocationProtocolServerSideTranslatorPB.send(ScmBlockLocationProtocolServerSideTranslatorPB.java:100)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
recon_1     | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
datanode_2  | 2020-04-17 18:31:59,073 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.write.buffer.size = 1048576 (custom)
datanode_3  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-53471EA74967 not found.
scm_1       | 	at org.apache.hadoop.hdds.protocol.proto.ScmBlockLocationProtocolProtos$ScmBlockLocationProtocolService$2.callBlockingMethod(ScmBlockLocationProtocolProtos.java:13157)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
recon_1     | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
datanode_2  | 2020-04-17 18:31:59,073 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.force.sync.num = 128 (default)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 	at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:524)
recon_1     | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_2  | 2020-04-17 18:31:59,073 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync = true (default)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_1  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-002956D72CAC not found.
scm_1       | 	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1025)
recon_1     | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
datanode_2  | 2020-04-17 18:31:59,073 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout = 10s (default)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
scm_1       | 	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:876)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_2  | 2020-04-17 18:31:59,073 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
scm_1       | 	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:822)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_2  | 2020-04-17 18:31:59,075 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.caching.enabled = true (custom)
datanode_3  | 	... 4 more
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
scm_1       | 	at java.base/java.security.AccessController.doPrivileged(Native Method)
recon_1     | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 2020-04-17 18:31:59,080 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
datanode_3  | 2020-04-17 18:30:01,942 [Command processor thread] INFO impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: remove group-53471EA74967:null
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
scm_1       | 	at java.base/javax.security.auth.Subject.doAs(Subject.java:423)
datanode_2  | 2020-04-17 18:31:59,092 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.enabled = true (custom)
recon_1     | 2020-04-17 18:31:34,037 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 1ca28fd5-8074-4f27-a46a-002956d72cac, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:0086d012-6f96-4817-8e1b-94f6eaa443bc, CreationTimestamp2020-04-17T18:29:36.706Z]
datanode_3  | 2020-04-17 18:30:01,942 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "33e2f66f-a610-4776-a5ba-53471ea74967"
datanode_1  | 	... 4 more
scm_1       | 	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1730)
datanode_2  | 2020-04-17 18:31:59,092 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
recon_1     | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac not found
datanode_3  | 
datanode_1  | 2020-04-17 18:31:59,177 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: remove group-002956D72CAC:null
scm_1       | 	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2682)
datanode_2  | 2020-04-17 18:31:59,092 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.retention.file.num = 5 (custom)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_3  | java.io.IOException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-53471EA74967 not found.
datanode_1  | 2020-04-17 18:31:59,177 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "1ca28fd5-8074-4f27-a46a-002956d72cac"
scm_1       | 2020-04-17 18:30:02,885 [IPC Server handler 43 on 9863] ERROR block.BlockManagerImpl: Unable to allocate a block for the size: 268435456, type: RATIS, factor: THREE
datanode_2  | 2020-04-17 18:31:59,093 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.retrycache.expirytime = 600000ms (custom)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_1  | 
scm_1       | 2020-04-17 18:30:05,118 [Socket Reader #1 for port 9860] INFO ipc.Server: Auth successful for om/om@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | 2020-04-17 18:31:59,093 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.leader_election.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_1  | java.io.IOException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-002956D72CAC not found.
scm_1       | 2020-04-17 18:30:05,120 [Socket Reader #1 for port 9860] INFO authorize.ServiceAuthorizationManager: Authorization successful for om/om@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocol
datanode_2  | 2020-04-17 18:31:59,094 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.server.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
scm_1       | 2020-04-17 18:30:06,874 [EventQueue-PipelineReportForPipelineReportHandler] INFO pipeline.PipelineStateManager: Pipeline Pipeline[ Id: 1ca28fd5-8074-4f27-a46a-002956d72cac, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:ALLOCATED, leaderId:0086d012-6f96-4817-8e1b-94f6eaa443bc, CreationTimestamp2020-04-17T18:29:36.706215Z] moved to OPEN state
datanode_2  | 2020-04-17 18:31:59,094 [pool-70-thread-1] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E: start as a follower, conf=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null
recon_1     | 	at org.apache.hadoop.ozone.recon.scm.ReconPipelineManager.destroyPipeline(ReconPipelineManager.java:74)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
scm_1       | 2020-04-17 18:30:26,604 [Socket Reader #1 for port 9863] INFO ipc.Server: Auth successful for om/om@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | 2020-04-17 18:31:59,094 [pool-70-thread-1] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E: changes role from      null to FOLLOWER at term 0 for startAsFollower
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
scm_1       | 2020-04-17 18:30:26,605 [Socket Reader #1 for port 9863] INFO authorize.ServiceAuthorizationManager: Authorization successful for om/om@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.hdds.scm.protocol.ScmBlockLocationProtocol
datanode_2  | 2020-04-17 18:31:59,094 [pool-70-thread-1] INFO impl.RoleInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689: start FollowerState
recon_1     | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
datanode_3  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-53471EA74967 not found.
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
scm_1       | 2020-04-17 18:30:27,945 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | 2020-04-17 18:31:59,095 [pool-70-thread-1] INFO util.JmxRegister: Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-0B128664579E,id=f2e775cd-89a9-41b5-a9e0-4408e0d60689
recon_1     | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 2020-04-17 18:30:27,980 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | 2020-04-17 18:31:59,095 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.state_machine.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E
recon_1     | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_1  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-002956D72CAC not found.
scm_1       | 2020-04-17 18:30:28,003 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_2  | 2020-04-17 18:31:59,121 [grpc-default-executor-5] WARN impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Failed groupAdd* GroupManagementRequest:client-BF8CFB92221F->f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E, cid=6, seq=0, RW, null, Add:group-0B128664579E:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858]
recon_1     | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
scm_1       | 2020-04-17 18:30:28,004 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac from datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc. Reason : ContainerID 4 creation failed
datanode_2  | java.util.concurrent.CompletionException: org.apache.ratis.protocol.AlreadyExistsException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Failed to add group-0B128664579E:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
scm_1       | 2020-04-17 18:30:28,006 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 1ca28fd5-8074-4f27-a46a-002956d72cac, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:OPEN, leaderId:0086d012-6f96-4817-8e1b-94f6eaa443bc, CreationTimestamp2020-04-17T18:29:36.706215Z]
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_3  | 	... 4 more
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
scm_1       | 2020-04-17 18:30:28,008 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineStateManager: Pipeline Pipeline[ Id: 1ca28fd5-8074-4f27-a46a-002956d72cac, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:0086d012-6f96-4817-8e1b-94f6eaa443bc, CreationTimestamp2020-04-17T18:29:36.706215Z] moved to CLOSED state
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyNow(CompletableFuture.java:670)
recon_1     | 	at java.base/java.lang.Thread.run(Thread.java:834)
recon_1     | 2020-04-17 18:31:34,046 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 1ca28fd5-8074-4f27-a46a-002956d72cac, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:0086d012-6f96-4817-8e1b-94f6eaa443bc, CreationTimestamp2020-04-17T18:29:36.706Z]
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
scm_1       | 2020-04-17 18:30:28,008 [EventQueue-CloseContainerForCloseContainerEventHandler] INFO container.CloseContainerEventHandler: Close container Event triggered for container : #4
recon_1     | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac not found
datanode_3  | 2020-04-17 18:30:01,942 [Command processor thread] INFO impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: remove group-53471EA74967:null
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyStage(CompletableFuture.java:658)
datanode_1  | 	... 4 more
scm_1       | 2020-04-17 18:30:28,012 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac from datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc. Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-EF8919F5D3CD, cid=1
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_3  | 2020-04-17 18:30:01,943 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "33e2f66f-a610-4776-a5ba-53471ea74967"
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.thenApplyAsync(CompletableFuture.java:2104)
datanode_1  | 2020-04-17 18:31:59,179 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: remove group-002956D72CAC:null
scm_1       | 	 State Machine: cmdType: WriteChunk traceID: "770df85ae4b1898d:22da11a237d5e9bb:770df85ae4b1898d:0" containerID: 4 datanodeUuid: "3989634e-60c9-4e5a-8523-9408dc0a802d" pipelineID: "1ca28fd5-8074-4f27-a46a-002956d72cac" writeChunk { blockID { containerID: 4 localID: 104015346178850819 blockCommitSequenceId: 0 } chunkData { chunkName: "104015346178850819_chunk_1" offset: 0 len: 17540 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: " wi\267" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDQgbG9jSUQ6IDEwNDAxNTM0NjE3ODg1MDgxORiwuLn0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BAFDGfwn3uQnZGLuUq70c2-0qpxbvg_0X-6vgiEkhNBT2jw9xVwWPc6w7GAFKfRrUxg46X9PPBab1jiXIYs87FLBZ3IjpBigZJ34LheCuGYCvYYb6rJW3UsEcsqlJ4UjPXZe-IhzhR3QeP8GzfRnooW-tEoUl-MyjEiauwg0aZXIvmJzYi9DlAKQ9OniPdXmjljQEED-gZ06Ib_diSjGd5ST-wudVc0j0hnzTF7zzkw4xRIq3MwnIBCP2227J1kYHwD5HJzA-_Ojvwpsm28oovxOOlkYb0EaNBOrxHoe2onP8zY5QhmaYlbrfGf5zcDWWxwdRJVyt8c9ru7JltLMsKn0QSEREU19CTE9DS19UT0tFTiJjb25JRDogNCBsb2NJRDogMTA0MDE1MzQ2MTc4ODUwODE5", container path=nonexistent
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
datanode_3  | 
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:379)
datanode_1  | 2020-04-17 18:31:59,179 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "1ca28fd5-8074-4f27-a46a-002956d72cac"
scm_1       | 2020-04-17 18:30:28,014 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 1ca28fd5-8074-4f27-a46a-002956d72cac, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:0086d012-6f96-4817-8e1b-94f6eaa443bc, CreationTimestamp2020-04-17T18:29:36.706215Z]
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
datanode_3  | java.io.IOException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-53471EA74967 not found.
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:363)
datanode_1  | 
scm_1       | 2020-04-17 18:30:28,019 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_2  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.lambda$groupManagement$0(GrpcAdminProtocolService.java:42)
datanode_1  | java.io.IOException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-002956D72CAC not found.
scm_1       | 2020-04-17 18:30:28,029 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
recon_1     | 	at org.apache.hadoop.ozone.recon.scm.ReconPipelineManager.destroyPipeline(ReconPipelineManager.java:74)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_2  | 	at org.apache.ratis.grpc.GrpcUtil.asyncCall(GrpcUtil.java:160)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
scm_1       | 2020-04-17 18:30:28,031 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac from datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689. Reason : ContainerID 4 creation failed
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_2  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.groupManagement(GrpcAdminProtocolService.java:42)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
recon_1     | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
scm_1       | 2020-04-17 18:30:28,031 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 1ca28fd5-8074-4f27-a46a-002956d72cac, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:0086d012-6f96-4817-8e1b-94f6eaa443bc, CreationTimestamp2020-04-17T18:29:36.706215Z]
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_2  | 	at org.apache.ratis.proto.grpc.AdminProtocolServiceGrpc$MethodHandlers.invoke(AdminProtocolServiceGrpc.java:358)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
recon_1     | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
scm_1       | 2020-04-17 18:30:28,035 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac from datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689. Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-EF8919F5D3CD, cid=1
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:172)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
recon_1     | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
scm_1       | 	 State Machine: cmdType: WriteChunk traceID: "770df85ae4b1898d:22da11a237d5e9bb:770df85ae4b1898d:0" containerID: 4 datanodeUuid: "3989634e-60c9-4e5a-8523-9408dc0a802d" pipelineID: "1ca28fd5-8074-4f27-a46a-002956d72cac" writeChunk { blockID { containerID: 4 localID: 104015346178850819 blockCommitSequenceId: 0 } chunkData { chunkName: "104015346178850819_chunk_1" offset: 0 len: 17540 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: " wi\267" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDQgbG9jSUQ6IDEwNDAxNTM0NjE3ODg1MDgxORiwuLn0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BAFDGfwn3uQnZGLuUq70c2-0qpxbvg_0X-6vgiEkhNBT2jw9xVwWPc6w7GAFKfRrUxg46X9PPBab1jiXIYs87FLBZ3IjpBigZJ34LheCuGYCvYYb6rJW3UsEcsqlJ4UjPXZe-IhzhR3QeP8GzfRnooW-tEoUl-MyjEiauwg0aZXIvmJzYi9DlAKQ9OniPdXmjljQEED-gZ06Ib_diSjGd5ST-wudVc0j0hnzTF7zzkw4xRIq3MwnIBCP2227J1kYHwD5HJzA-_Ojvwpsm28oovxOOlkYb0EaNBOrxHoe2onP8zY5QhmaYlbrfGf5zcDWWxwdRJVyt8c9ru7JltLMsKn0QSEREU19CTE9DS19UT0tFTiJjb25JRDogNCBsb2NJRDogMTA0MDE1MzQ2MTc4ODUwODE5", container path=nonexistent
datanode_3  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-53471EA74967 not found.
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:331)
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
recon_1     | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
scm_1       | 2020-04-17 18:30:28,035 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 1ca28fd5-8074-4f27-a46a-002956d72cac, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:0086d012-6f96-4817-8e1b-94f6eaa443bc, CreationTimestamp2020-04-17T18:29:36.706215Z]
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:814)
datanode_1  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-002956D72CAC not found.
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
scm_1       | 2020-04-17 18:30:28,043 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
scm_1       | 2020-04-17 18:30:28,044 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac from datanode 3989634e-60c9-4e5a-8523-9408dc0a802d. Reason : ContainerID 4 creation failed
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:123)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
recon_1     | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 2020-04-17 18:30:28,045 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 1ca28fd5-8074-4f27-a46a-002956d72cac, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:0086d012-6f96-4817-8e1b-94f6eaa443bc, CreationTimestamp2020-04-17T18:29:36.706215Z]
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_2  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
recon_1     | 2020-04-17 18:31:34,047 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 1ca28fd5-8074-4f27-a46a-002956d72cac, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:0086d012-6f96-4817-8e1b-94f6eaa443bc, CreationTimestamp2020-04-17T18:29:36.706Z]
scm_1       | 2020-04-17 18:30:28,052 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac from datanode 3989634e-60c9-4e5a-8523-9408dc0a802d. Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-EF8919F5D3CD, cid=1
datanode_3  | 	... 4 more
datanode_2  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
recon_1     | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac not found
scm_1       | 	 State Machine: cmdType: WriteChunk traceID: "770df85ae4b1898d:22da11a237d5e9bb:770df85ae4b1898d:0" containerID: 4 datanodeUuid: "3989634e-60c9-4e5a-8523-9408dc0a802d" pipelineID: "1ca28fd5-8074-4f27-a46a-002956d72cac" writeChunk { blockID { containerID: 4 localID: 104015346178850819 blockCommitSequenceId: 0 } chunkData { chunkName: "104015346178850819_chunk_1" offset: 0 len: 17540 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: " wi\267" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDQgbG9jSUQ6IDEwNDAxNTM0NjE3ODg1MDgxORiwuLn0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BAFDGfwn3uQnZGLuUq70c2-0qpxbvg_0X-6vgiEkhNBT2jw9xVwWPc6w7GAFKfRrUxg46X9PPBab1jiXIYs87FLBZ3IjpBigZJ34LheCuGYCvYYb6rJW3UsEcsqlJ4UjPXZe-IhzhR3QeP8GzfRnooW-tEoUl-MyjEiauwg0aZXIvmJzYi9DlAKQ9OniPdXmjljQEED-gZ06Ib_diSjGd5ST-wudVc0j0hnzTF7zzkw4xRIq3MwnIBCP2227J1kYHwD5HJzA-_Ojvwpsm28oovxOOlkYb0EaNBOrxHoe2onP8zY5QhmaYlbrfGf5zcDWWxwdRJVyt8c9ru7JltLMsKn0QSEREU19CTE9DS19UT0tFTiJjb25JRDogNCBsb2NJRDogMTA0MDE1MzQ2MTc4ODUwODE5", container path=nonexistent
datanode_3  | 2020-04-17 18:30:06,849 [grpc-default-executor-2] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-002956D72CAC: changes role from  FOLLOWER to FOLLOWER at term 1 for recognizeCandidate:0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_1  | 	... 4 more
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
scm_1       | 2020-04-17 18:30:28,052 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 1ca28fd5-8074-4f27-a46a-002956d72cac, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:0086d012-6f96-4817-8e1b-94f6eaa443bc, CreationTimestamp2020-04-17T18:29:36.706215Z]
datanode_3  | 2020-04-17 18:30:06,850 [grpc-default-executor-2] INFO impl.RoleInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d: shutdown FollowerState
datanode_2  | Caused by: org.apache.ratis.protocol.AlreadyExistsException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Failed to add group-0B128664579E:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
datanode_1  | 2020-04-17 18:31:59,183 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: remove group-002956D72CAC:null
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
scm_1       | 2020-04-17 18:30:57,996 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 2020-04-17 18:30:06,850 [Thread-194] INFO impl.FollowerState: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-002956D72CAC-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy$ImplMap.addNew(RaftServerProxy.java:83)
datanode_1  | 2020-04-17 18:31:59,183 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "1ca28fd5-8074-4f27-a46a-002956d72cac"
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
scm_1       | 2020-04-17 18:30:58,011 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_3  | 2020-04-17 18:30:06,851 [grpc-default-executor-2] INFO impl.RoleInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d: start FollowerState
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:378)
datanode_1  | 
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
scm_1       | 2020-04-17 18:30:58,075 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | 	... 13 more
datanode_3  | 2020-04-17 18:30:06,957 [grpc-default-executor-2] INFO ratis.XceiverServerRatis: Leader change notification received for group: group-002956D72CAC with new leaderId: 0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_1  | java.io.IOException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-002956D72CAC not found.
recon_1     | 	at org.apache.hadoop.ozone.recon.scm.ReconPipelineManager.destroyPipeline(ReconPipelineManager.java:74)
scm_1       | 2020-04-17 18:30:58,078 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_2  | 2020-04-17 18:31:59,124 [grpc-default-executor-8] WARN impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Failed groupAdd* GroupManagementRequest:client-8A521BB33863->f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E, cid=8, seq=0, RW, null, Add:group-0B128664579E:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858]
datanode_3  | 2020-04-17 18:30:06,958 [grpc-default-executor-2] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-002956D72CAC: change Leader from null to 0086d012-6f96-4817-8e1b-94f6eaa443bc at term 1 for appendEntries, leader elected after 5157ms
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
scm_1       | 2020-04-17 18:30:58,103 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | java.util.concurrent.CompletionException: org.apache.ratis.protocol.AlreadyExistsException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Failed to add group-0B128664579E:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
datanode_3  | 2020-04-17 18:30:06,970 [grpc-default-executor-2] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-002956D72CAC: set configuration 0: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null at 0
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
recon_1     | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
scm_1       | 2020-04-17 18:30:58,114 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
datanode_3  | 2020-04-17 18:30:06,971 [grpc-default-executor-2] INFO segmented.SegmentedRaftLogWorker: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-002956D72CAC-SegmentedRaftLogWorker: Starting segment from index:0
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
recon_1     | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
recon_1     | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyNow(CompletableFuture.java:670)
datanode_3  | 2020-04-17 18:30:06,975 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-002956D72CAC-SegmentedRaftLogWorker] INFO segmented.SegmentedRaftLogWorker: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-002956D72CAC-SegmentedRaftLogWorker: created new log segment /data/metadata/ratis/1ca28fd5-8074-4f27-a46a-002956d72cac/current/log_inprogress_0
datanode_3  | 2020-04-17 18:30:27,982 [ChunkWriter-54-0] INFO keyvalue.KeyValueHandler: Operation: CreateContainer , Trace ID: 770df85ae4b1898d:22da11a237d5e9bb:770df85ae4b1898d:0 , Message: Container creation failed, due to disk out of space , Result: DISK_OUT_OF_SPACE , StorageContainerException Occurred.
scm_1       | 2020-04-17 18:31:27,993 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyStage(CompletableFuture.java:658)
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.thenApplyAsync(CompletableFuture.java:2104)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:379)
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
recon_1     | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
datanode_3  | org.apache.hadoop.hdds.scm.container.common.helpers.StorageContainerException: Container creation failed, due to disk out of space
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:363)
scm_1       | 2020-04-17 18:31:27,997 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_1  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-002956D72CAC not found.
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_3  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueContainer.create(KeyValueContainer.java:165)
datanode_2  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.lambda$groupManagement$0(GrpcAdminProtocolService.java:42)
scm_1       | 2020-04-17 18:31:28,054 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_3  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.handleCreateContainer(KeyValueHandler.java:247)
datanode_2  | 	at org.apache.ratis.grpc.GrpcUtil.asyncCall(GrpcUtil.java:160)
scm_1       | 2020-04-17 18:31:28,083 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
recon_1     | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.dispatchRequest(KeyValueHandler.java:164)
datanode_2  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.groupManagement(GrpcAdminProtocolService.java:42)
scm_1       | 2020-04-17 18:31:28,084 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
recon_1     | 2020-04-17 18:31:57,981 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.handle(KeyValueHandler.java:152)
datanode_2  | 	at org.apache.ratis.proto.grpc.AdminProtocolServiceGrpc$MethodHandlers.invoke(AdminProtocolServiceGrpc.java:358)
scm_1       | 2020-04-17 18:31:28,090 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
recon_1     | 2020-04-17 18:31:57,983 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_3  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.createContainer(HddsDispatcher.java:414)
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:172)
scm_1       | 2020-04-17 18:31:34,009 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac close command to datanode 3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_1  | 	... 4 more
recon_1     | 2020-04-17 18:31:57,984 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Unknown pipeline PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac. Trying to get from SCM.
datanode_3  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatchRequest(HddsDispatcher.java:250)
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:331)
scm_1       | 2020-04-17 18:31:34,010 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac close command to datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_1  | 2020-04-17 18:31:59,184 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: remove group-002956D72CAC:null
recon_1     | 2020-04-17 18:31:58,023 [EventQueue-PipelineReportForReconPipelineReportHandler] ERROR pipeline.PipelineReportHandler: Could not process pipeline report=pipelineID {
datanode_3  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatch(HddsDispatcher.java:162)
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:814)
scm_1       | 2020-04-17 18:31:34,011 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac close command to datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_1  | 2020-04-17 18:31:59,185 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "1ca28fd5-8074-4f27-a46a-002956d72cac"
recon_1     |   id: "1ca28fd5-8074-4f27-a46a-002956d72cac"
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.dispatchCommand(ContainerStateMachine.java:402)
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
scm_1       | 2020-04-17 18:31:34,014 [RatisPipelineUtilsThread] INFO pipeline.PipelineStateManager: Pipeline Pipeline[ Id: 1ca28fd5-8074-4f27-a46a-002956d72cac, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:0086d012-6f96-4817-8e1b-94f6eaa443bc, CreationTimestamp2020-04-17T18:29:36.706215Z] removed from db
datanode_1  | 
recon_1     | }
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.runCommand(ContainerStateMachine.java:412)
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:123)
scm_1       | 2020-04-17 18:31:34,014 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Failed to create pipeline of type RATIS and factor ONE. Exception: Cannot create pipeline of factor 1 using 0 nodes. Used 3 nodes. Healthy nodes 3
scm_1       | 2020-04-17 18:31:34,015 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Sending CreatePipelineCommand for pipeline:PipelineID=9b787585-8415-4999-b60e-0b128664579e to datanode:f2e775cd-89a9-41b5-a9e0-4408e0d60689
recon_1     | isLeader: true
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.lambda$handleWriteChunk$2(ContainerStateMachine.java:447)
datanode_2  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
scm_1       | 2020-04-17 18:31:34,015 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Sending CreatePipelineCommand for pipeline:PipelineID=9b787585-8415-4999-b60e-0b128664579e to datanode:3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_1  | java.io.IOException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-002956D72CAC not found.
recon_1     | bytesWritten: 0
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
datanode_2  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
scm_1       | 2020-04-17 18:31:34,015 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Sending CreatePipelineCommand for pipeline:PipelineID=9b787585-8415-4999-b60e-0b128664579e to datanode:0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
recon_1     |  from dn=0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106649330073} {}
datanode_3  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 2020-04-17 18:31:34,023 [RatisPipelineUtilsThread] INFO pipeline.PipelineStateManager: Created pipeline Pipeline[ Id: 9b787585-8415-4999-b60e-0b128664579e, Nodes: f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:ALLOCATED, leaderId:null, CreationTimestamp2020-04-17T18:31:34.015375Z]
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
recon_1     | org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException): PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac not found
datanode_3  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_2  | Caused by: org.apache.ratis.protocol.AlreadyExistsException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Failed to add group-0B128664579E:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
scm_1       | 2020-04-17 18:31:34,024 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Failed to create pipeline of type RATIS and factor THREE. Exception: Pipeline creation failed because nodes are engaged in other pipelines and every node can only be engaged in max 2 pipelines. Required 3. Found 0
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy$ImplMap.addNew(RaftServerProxy.java:83)
scm_1       | 2020-04-17 18:31:34,024 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac close command to datanode 3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.getPipeline(PipelineStateManager.java:63)
datanode_3  | Caused by: org.apache.hadoop.util.DiskChecker$DiskOutOfSpaceException: Out of space: The volume with the most available space (=497020928 B) is less than the container size (=1073741824 B).
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:378)
scm_1       | 2020-04-17 18:31:34,024 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac close command to datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.getPipeline(SCMPipelineManager.java:267)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.volume.RoundRobinVolumeChoosingPolicy.chooseVolume(RoundRobinVolumeChoosingPolicy.java:77)
datanode_2  | 	... 13 more
scm_1       | 2020-04-17 18:31:34,024 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac close command to datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_1  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-002956D72CAC not found.
recon_1     | 	at org.apache.hadoop.hdds.scm.server.SCMClientProtocolServer.getPipeline(SCMClientProtocolServer.java:409)
datanode_3  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueContainer.create(KeyValueContainer.java:124)
datanode_2  | 2020-04-17 18:31:59,144 [Command processor thread] INFO commandhandler.CreatePipelineCommandHandler: Created Pipeline RATIS THREE #id: "9b787585-8415-4999-b60e-0b128664579e"
scm_1       | 2020-04-17 18:31:34,024 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 1ca28fd5-8074-4f27-a46a-002956d72cac, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:0086d012-6f96-4817-8e1b-94f6eaa443bc, CreationTimestamp2020-04-17T18:29:36.706215Z]
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
recon_1     | 	at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.getPipeline(StorageContainerLocationProtocolServerSideTranslatorPB.java:375)
datanode_2  | .
scm_1       | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac not found
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_3  | 	... 13 more
recon_1     | 	at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.processRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:249)
datanode_2  | 2020-04-17 18:31:59,144 [Command processor thread] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: remove group-002956D72CAC:null
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_3  | 2020-04-17 18:30:27,987 [ChunkWriter-54-0] INFO impl.HddsDispatcher: Operation: WriteChunk , Trace ID: 770df85ae4b1898d:22da11a237d5e9bb:770df85ae4b1898d:0 , Message: ContainerID 4 creation failed , Result: DISK_OUT_OF_SPACE , StorageContainerException Occurred.
recon_1     | 	at org.apache.hadoop.hdds.server.OzoneProtocolMessageDispatcher.processRequest(OzoneProtocolMessageDispatcher.java:75)
datanode_2  | 2020-04-17 18:31:59,144 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "1ca28fd5-8074-4f27-a46a-002956d72cac"
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_3  | org.apache.hadoop.hdds.scm.container.common.helpers.StorageContainerException: ContainerID 4 creation failed
recon_1     | 	at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:120)
datanode_2  | 
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
datanode_1  | 	... 4 more
datanode_3  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatchRequest(HddsDispatcher.java:254)
recon_1     | 	at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:31605)
datanode_2  | java.io.IOException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-002956D72CAC not found.
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
datanode_1  | 2020-04-17 18:31:59,185 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: remove group-002956D72CAC:null
datanode_3  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatch(HddsDispatcher.java:162)
recon_1     | 	at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:524)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.destroyPipeline(SCMPipelineManager.java:579)
datanode_1  | 2020-04-17 18:31:59,185 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "1ca28fd5-8074-4f27-a46a-002956d72cac"
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.dispatchCommand(ContainerStateMachine.java:402)
recon_1     | 	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1025)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
datanode_1  | 
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.runCommand(ContainerStateMachine.java:412)
recon_1     | 	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:876)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
scm_1       | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
datanode_1  | java.io.IOException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-002956D72CAC not found.
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.lambda$handleWriteChunk$2(ContainerStateMachine.java:447)
recon_1     | 	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:822)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
scm_1       | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
recon_1     | 	at java.base/java.security.AccessController.doPrivileged(Native Method)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_3  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
recon_1     | 	at java.base/javax.security.auth.Subject.doAs(Subject.java:423)
datanode_2  | Caused by: org.apache.ratis.protocol.GroupMismatchException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-002956D72CAC not found.
scm_1       | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_3  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
recon_1     | 	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1730)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
recon_1     | 	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2682)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 2020-04-17 18:30:27,987 [ChunkWriter-54-0] ERROR ratis.ContainerStateMachine: group-002956D72CAC: writeChunk writeStateMachineData failed: blockIdcontainerID: 4
recon_1     | 
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
scm_1       | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_1  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-002956D72CAC not found.
datanode_3  | localID: 104015346178850819
recon_1     | 	at org.apache.hadoop.ipc.Client.getRpcResponse(Client.java:1511)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
scm_1       | 2020-04-17 18:31:34,032 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac close command to datanode 3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_3  | blockCommitSequenceId: 0
recon_1     | 	at org.apache.hadoop.ipc.Client.call(Client.java:1457)
datanode_2  | 	... 4 more
scm_1       | 2020-04-17 18:31:34,032 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac close command to datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_3  |  logIndex 1 chunkName 104015346178850819_chunk_1 Error message: ContainerID 4 creation failed Container Result: DISK_OUT_OF_SPACE
recon_1     | 	at org.apache.hadoop.ipc.Client.call(Client.java:1367)
datanode_2  | 2020-04-17 18:31:59,146 [Command processor thread] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: remove group-002956D72CAC:null
scm_1       | 2020-04-17 18:31:34,033 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac close command to datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
recon_1     | 	at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:228)
datanode_2  | 2020-04-17 18:31:59,146 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "1ca28fd5-8074-4f27-a46a-002956d72cac"
datanode_1  | 	... 4 more
datanode_3  | 2020-04-17 18:30:27,988 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-002956D72CAC-SegmentedRaftLogWorker] ERROR ratis.XceiverServerRatis: pipeline Action CLOSE on pipeline PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac.Reason : ContainerID 4 creation failed
scm_1       | 2020-04-17 18:31:34,033 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 1ca28fd5-8074-4f27-a46a-002956d72cac, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:0086d012-6f96-4817-8e1b-94f6eaa443bc, CreationTimestamp2020-04-17T18:29:36.706215Z]
recon_1     | 	at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:116)
datanode_2  | 
datanode_1  | 2020-04-17 18:32:04,167 [grpc-default-executor-3] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0B128664579E: changes role from  FOLLOWER to FOLLOWER at term 1 for recognizeCandidate:f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_3  | 2020-04-17 18:30:28,023 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-002956D72CAC-SegmentedRaftLogWorker] ERROR ratis.XceiverServerRatis: pipeline Action CLOSE on pipeline PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac.Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-EF8919F5D3CD, cid=1
scm_1       | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac not found
recon_1     | 	at com.sun.proxy.$Proxy41.submitRequest(Unknown Source)
datanode_2  | java.io.IOException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-002956D72CAC not found.
datanode_1  | 2020-04-17 18:32:04,167 [grpc-default-executor-3] INFO impl.RoleInfo: 0086d012-6f96-4817-8e1b-94f6eaa443bc: shutdown FollowerState
datanode_1  | 2020-04-17 18:32:04,167 [grpc-default-executor-3] INFO impl.RoleInfo: 0086d012-6f96-4817-8e1b-94f6eaa443bc: start FollowerState
datanode_1  | 2020-04-17 18:32:04,167 [Thread-252] INFO impl.FollowerState: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0B128664579E-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
datanode_1  | 2020-04-17 18:32:04,202 [grpc-default-executor-3] INFO ratis.XceiverServerRatis: Leader change notification received for group: group-0B128664579E with new leaderId: f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_3  | 	 State Machine: cmdType: WriteChunk traceID: "770df85ae4b1898d:22da11a237d5e9bb:770df85ae4b1898d:0" containerID: 4 datanodeUuid: "3989634e-60c9-4e5a-8523-9408dc0a802d" pipelineID: "1ca28fd5-8074-4f27-a46a-002956d72cac" writeChunk { blockID { containerID: 4 localID: 104015346178850819 blockCommitSequenceId: 0 } chunkData { chunkName: "104015346178850819_chunk_1" offset: 0 len: 17540 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: " wi\267" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDQgbG9jSUQ6IDEwNDAxNTM0NjE3ODg1MDgxORiwuLn0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BAFDGfwn3uQnZGLuUq70c2-0qpxbvg_0X-6vgiEkhNBT2jw9xVwWPc6w7GAFKfRrUxg46X9PPBab1jiXIYs87FLBZ3IjpBigZJ34LheCuGYCvYYb6rJW3UsEcsqlJ4UjPXZe-IhzhR3QeP8GzfRnooW-tEoUl-MyjEiauwg0aZXIvmJzYi9DlAKQ9OniPdXmjljQEED-gZ06Ib_diSjGd5ST-wudVc0j0hnzTF7zzkw4xRIq3MwnIBCP2227J1kYHwD5HJzA-_Ojvwpsm28oovxOOlkYb0EaNBOrxHoe2onP8zY5QhmaYlbrfGf5zcDWWxwdRJVyt8c9ru7JltLMsKn0QSEREU19CTE9DS19UT0tFTiJjb25JRDogNCBsb2NJRDogMTA0MDE1MzQ2MTc4ODUwODE5", container path=nonexistent
datanode_3  | 2020-04-17 18:30:32,801 [Command processor thread] ERROR commandhandler.CloseContainerCommandHandler: Container #4 does not exist in datanode. Container close failed.
datanode_3  | 2020-04-17 18:31:58,976 [grpc-default-executor-2] INFO server.GrpcServerProtocolService: 3989634e-60c9-4e5a-8523-9408dc0a802d: Completed APPEND_ENTRIES, lastRequest: 0086d012-6f96-4817-8e1b-94f6eaa443bc->3989634e-60c9-4e5a-8523-9408dc0a802d#11-t1, previous=(t:1, i:1), leaderCommit=0, initializing? false, entries: size=1, first=(t:1, i:2), STATEMACHINELOGENTRY, client-EF8919F5D3CD, cid=2
datanode_3  | 2020-04-17 18:31:59,025 [Command processor thread] INFO impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: remove  FOLLOWER 3989634e-60c9-4e5a-8523-9408dc0a802d@group-002956D72CAC:t1, leader=0086d012-6f96-4817-8e1b-94f6eaa443bc, voted=0086d012-6f96-4817-8e1b-94f6eaa443bc, raftlog=3989634e-60c9-4e5a-8523-9408dc0a802d@group-002956D72CAC-SegmentedRaftLog:OPENED:c0,f0,i2, conf=0: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null RUNNING
datanode_3  | 2020-04-17 18:31:59,026 [Command processor thread] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-002956D72CAC: shutdown
datanode_3  | 2020-04-17 18:31:59,026 [Command processor thread] INFO util.JmxRegister: Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-002956D72CAC,id=3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_3  | 2020-04-17 18:31:59,026 [Command processor thread] INFO impl.RoleInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d: shutdown FollowerState
datanode_3  | 2020-04-17 18:31:59,026 [Command processor thread] INFO impl.StateMachineUpdater: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-002956D72CAC-StateMachineUpdater: set stopIndex = 0
recon_1     | 	at org.apache.hadoop.hdds.scm.protocolPB.StorageContainerLocationProtocolClientSideTranslatorPB.submitRpcRequest(StorageContainerLocationProtocolClientSideTranslatorPB.java:123)
recon_1     | 	at org.apache.hadoop.hdds.scm.protocolPB.StorageContainerLocationProtocolClientSideTranslatorPB.submitRequest(StorageContainerLocationProtocolClientSideTranslatorPB.java:114)
recon_1     | 	at org.apache.hadoop.hdds.scm.protocolPB.StorageContainerLocationProtocolClientSideTranslatorPB.getPipeline(StorageContainerLocationProtocolClientSideTranslatorPB.java:347)
recon_1     | 	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
recon_1     | 	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
recon_1     | 	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
recon_1     | 	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
recon_1     | 	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:71)
recon_1     | 	at com.sun.proxy.$Proxy42.getPipeline(Unknown Source)
recon_1     | 	at org.apache.hadoop.ozone.recon.spi.impl.StorageContainerServiceProviderImpl.getPipeline(StorageContainerServiceProviderImpl.java:55)
recon_1     | 	at org.apache.hadoop.ozone.recon.scm.ReconPipelineReportHandler.processPipelineReport(ReconPipelineReportHandler.java:65)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineReportHandler.onMessage(PipelineReportHandler.java:84)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineReportHandler.onMessage(PipelineReportHandler.java:47)
recon_1     | 	at org.apache.hadoop.hdds.server.events.SingleThreadExecutor.lambda$onMessage$1(SingleThreadExecutor.java:81)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
recon_1     | 	at java.base/java.lang.Thread.run(Thread.java:834)
recon_1     | 2020-04-17 18:31:58,050 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
recon_1     | 2020-04-17 18:31:58,059 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
recon_1     | 2020-04-17 18:31:58,070 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
recon_1     | 2020-04-17 18:31:58,074 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_1  | 2020-04-17 18:32:04,202 [grpc-default-executor-3] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0B128664579E: change Leader from null to f2e775cd-89a9-41b5-a9e0-4408e0d60689 at term 1 for appendEntries, leader elected after 5183ms
datanode_1  | 2020-04-17 18:32:04,210 [grpc-default-executor-3] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0B128664579E: set configuration 0: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null at 0
datanode_1  | 2020-04-17 18:32:04,211 [grpc-default-executor-3] INFO segmented.SegmentedRaftLogWorker: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0B128664579E-SegmentedRaftLogWorker: Starting segment from index:0
datanode_1  | 2020-04-17 18:32:04,216 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0B128664579E-SegmentedRaftLogWorker] INFO segmented.SegmentedRaftLogWorker: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0B128664579E-SegmentedRaftLogWorker: created new log segment /data/metadata/ratis/9b787585-8415-4999-b60e-0b128664579e/current/log_inprogress_0
datanode_1  | 2020-04-17 18:32:24,884 [ChunkWriter-12-0] INFO keyvalue.KeyValueHandler: Operation: CreateContainer , Trace ID: fe6f5b05ae33d9ce:a58d8d0f471d9027:fe6f5b05ae33d9ce:0 , Message: Container creation failed, due to disk out of space , Result: DISK_OUT_OF_SPACE , StorageContainerException Occurred.
datanode_3  | 2020-04-17 18:31:59,026 [Thread-197] INFO impl.FollowerState: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-002956D72CAC-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
datanode_3  | 2020-04-17 18:31:59,028 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-002956D72CAC-StateMachineUpdater] ERROR ratis.ContainerStateMachine: Failed to take snapshot  for group-002956D72CAC as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
datanode_3  | 2020-04-17 18:31:59,028 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-002956D72CAC-StateMachineUpdater] ERROR impl.StateMachineUpdater: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-002956D72CAC-StateMachineUpdater: Failed to take snapshot
datanode_3  | org.apache.ratis.protocol.StateMachineException: Failed to take snapshot  for group-002956D72CAC as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
datanode_1  | org.apache.hadoop.hdds.scm.container.common.helpers.StorageContainerException: Container creation failed, due to disk out of space
datanode_1  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueContainer.create(KeyValueContainer.java:165)
datanode_1  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.handleCreateContainer(KeyValueHandler.java:247)
datanode_1  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.dispatchRequest(KeyValueHandler.java:164)
datanode_1  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.handle(KeyValueHandler.java:152)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.createContainer(HddsDispatcher.java:414)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatchRequest(HddsDispatcher.java:250)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.takeSnapshot(ContainerStateMachine.java:288)
datanode_3  | 	at org.apache.ratis.server.impl.StateMachineUpdater.takeSnapshot(StateMachineUpdater.java:258)
datanode_3  | 	at org.apache.ratis.server.impl.StateMachineUpdater.checkAndTakeSnapshot(StateMachineUpdater.java:250)
datanode_3  | 	at org.apache.ratis.server.impl.StateMachineUpdater.run(StateMachineUpdater.java:169)
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 2020-04-17 18:31:59,029 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-002956D72CAC-StateMachineUpdater] ERROR ratis.ContainerStateMachine: Failed to take snapshot  for group-002956D72CAC as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
datanode_3  | 2020-04-17 18:31:59,029 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-002956D72CAC-StateMachineUpdater] ERROR impl.StateMachineUpdater: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-002956D72CAC-StateMachineUpdater: Failed to take snapshot
datanode_3  | org.apache.ratis.protocol.StateMachineException: Failed to take snapshot  for group-002956D72CAC as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.takeSnapshot(ContainerStateMachine.java:288)
datanode_3  | 	at org.apache.ratis.server.impl.StateMachineUpdater.takeSnapshot(StateMachineUpdater.java:258)
datanode_3  | 	at org.apache.ratis.server.impl.StateMachineUpdater.checkAndTakeSnapshot(StateMachineUpdater.java:250)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatch(HddsDispatcher.java:162)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.dispatchCommand(ContainerStateMachine.java:402)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.runCommand(ContainerStateMachine.java:412)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.destroyPipeline(SCMPipelineManager.java:579)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
scm_1       | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
scm_1       | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
scm_1       | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
scm_1       | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
scm_1       | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 2020-04-17 18:31:34,036 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac close command to datanode 3989634e-60c9-4e5a-8523-9408dc0a802d
scm_1       | 2020-04-17 18:31:34,036 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac close command to datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689
scm_1       | 2020-04-17 18:31:34,036 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac close command to datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc
scm_1       | 2020-04-17 18:31:34,036 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 1ca28fd5-8074-4f27-a46a-002956d72cac, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:0086d012-6f96-4817-8e1b-94f6eaa443bc, CreationTimestamp2020-04-17T18:29:36.706215Z]
scm_1       | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac not found
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.destroyPipeline(SCMPipelineManager.java:579)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
scm_1       | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
scm_1       | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
recon_1     | 2020-04-17 18:31:59,043 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Unknown pipeline PipelineID=9b787585-8415-4999-b60e-0b128664579e. Trying to get from SCM.
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.lambda$handleWriteChunk$2(ContainerStateMachine.java:447)
datanode_3  | 	at org.apache.ratis.server.impl.StateMachineUpdater.run(StateMachineUpdater.java:172)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
scm_1       | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
recon_1     | 2020-04-17 18:31:59,047 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Adding new pipeline Pipeline[ Id: 9b787585-8415-4999-b60e-0b128664579e, Nodes: f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:ALLOCATED, leaderId:null, CreationTimestamp2020-04-17T18:31:34.015Z] to Recon pipeline metadata.
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
scm_1       | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
recon_1     | 2020-04-17 18:31:59,047 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO pipeline.PipelineStateManager: Created pipeline Pipeline[ Id: 9b787585-8415-4999-b60e-0b128664579e, Nodes: f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:ALLOCATED, leaderId:null, CreationTimestamp2020-04-17T18:31:34.015Z]
datanode_3  | 2020-04-17 18:31:59,029 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-002956D72CAC-StateMachineUpdater] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.state_machine.3989634e-60c9-4e5a-8523-9408dc0a802d@group-002956D72CAC
datanode_1  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
recon_1     | 2020-04-17 18:31:59,047 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Pipeline THREE PipelineID=9b787585-8415-4999-b60e-0b128664579e reported by 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106649330073}
datanode_1  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
recon_1     | 2020-04-17 18:31:59,077 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Pipeline THREE PipelineID=9b787585-8415-4999-b60e-0b128664579e reported by 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106587165812}
datanode_3  | 2020-04-17 18:31:59,029 [Command processor thread] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-002956D72CAC: closes. applyIndex: 0
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | Caused by: org.apache.ratis.protocol.GroupMismatchException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-002956D72CAC not found.
scm_1       | 	at java.base/java.lang.Thread.run(Thread.java:834)
recon_1     | 2020-04-17 18:31:59,093 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Pipeline THREE PipelineID=9b787585-8415-4999-b60e-0b128664579e reported by f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106586728310}
datanode_3  | 2020-04-17 18:31:59,029 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-002956D72CAC-SegmentedRaftLogWorker] INFO segmented.SegmentedRaftLogWorker: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-002956D72CAC-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
datanode_1  | Caused by: org.apache.hadoop.util.DiskChecker$DiskOutOfSpaceException: Out of space: The volume with the most available space (=496672768 B) is less than the container size (=1073741824 B).
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
scm_1       | 2020-04-17 18:31:34,045 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac close command to datanode 3989634e-60c9-4e5a-8523-9408dc0a802d
recon_1     | 2020-04-17 18:32:03,825 [pool-9-thread-1] INFO impl.OzoneManagerServiceProviderImpl: Syncing data from Ozone Manager.
datanode_3  | 2020-04-17 18:31:59,030 [Command processor thread] INFO segmented.SegmentedRaftLogWorker: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-002956D72CAC-SegmentedRaftLogWorker close()
datanode_3  | 2020-04-17 18:31:59,031 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.log_worker.3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
scm_1       | 2020-04-17 18:31:34,045 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac close command to datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_3  | 2020-04-17 18:31:59,031 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.leader_election.3989634e-60c9-4e5a-8523-9408dc0a802d@group-002956D72CAC
datanode_1  | 	at org.apache.hadoop.ozone.container.common.volume.RoundRobinVolumeChoosingPolicy.chooseVolume(RoundRobinVolumeChoosingPolicy.java:77)
recon_1     | 2020-04-17 18:32:03,826 [pool-9-thread-1] INFO impl.OzoneManagerServiceProviderImpl: Obtaining delta updates from Ozone Manager
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
scm_1       | 2020-04-17 18:31:34,046 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac close command to datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_3  | 2020-04-17 18:31:59,031 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.server.3989634e-60c9-4e5a-8523-9408dc0a802d@group-002956D72CAC
datanode_1  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueContainer.create(KeyValueContainer.java:124)
recon_1     | 2020-04-17 18:32:03,866 [pool-9-thread-1] INFO impl.OzoneManagerServiceProviderImpl: Number of updates received from OM : 0
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
scm_1       | 2020-04-17 18:31:34,046 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 1ca28fd5-8074-4f27-a46a-002956d72cac, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:0086d012-6f96-4817-8e1b-94f6eaa443bc, CreationTimestamp2020-04-17T18:29:36.706215Z]
datanode_3  | 2020-04-17 18:31:59,032 [Command processor thread] INFO commandhandler.ClosePipelineCommandHandler: Close Pipeline #id: "1ca28fd5-8074-4f27-a46a-002956d72cac"
datanode_1  | 	... 13 more
recon_1     | 2020-04-17 18:32:04,187 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Pipeline THREE PipelineID=9b787585-8415-4999-b60e-0b128664579e reported by f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106586728310}
datanode_2  | 	... 4 more
scm_1       | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac not found
datanode_3  |  command on datanode #3989634e-60c9-4e5a-8523-9408dc0a802d.
datanode_1  | 2020-04-17 18:32:24,895 [ChunkWriter-12-0] INFO impl.HddsDispatcher: Operation: WriteChunk , Trace ID: fe6f5b05ae33d9ce:a58d8d0f471d9027:fe6f5b05ae33d9ce:0 , Message: ContainerID 5 creation failed , Result: DISK_OUT_OF_SPACE , StorageContainerException Occurred.
recon_1     | 2020-04-17 18:32:04,188 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO pipeline.PipelineStateManager: Pipeline Pipeline[ Id: 9b787585-8415-4999-b60e-0b128664579e, Nodes: f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:ALLOCATED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:31:34.015Z] moved to OPEN state
datanode_2  | 2020-04-17 18:31:59,147 [Command processor thread] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: remove group-002956D72CAC:null
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_3  | 2020-04-17 18:31:59,034 [pool-70-thread-1] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d: new RaftServerImpl for group-0B128664579E:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] with ContainerStateMachine:uninitialized
datanode_1  | org.apache.hadoop.hdds.scm.container.common.helpers.StorageContainerException: ContainerID 5 creation failed
recon_1     | 2020-04-17 18:32:24,907 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | 2020-04-17 18:31:59,147 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "1ca28fd5-8074-4f27-a46a-002956d72cac"
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
datanode_3  | 2020-04-17 18:31:59,035 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.min = 5s (custom)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatchRequest(HddsDispatcher.java:254)
recon_1     | 2020-04-17 18:32:24,913 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | 
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
datanode_3  | 2020-04-17 18:31:59,035 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.max = 5200ms (custom)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatch(HddsDispatcher.java:162)
recon_1     | 2020-04-17 18:32:24,928 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_2  | java.io.IOException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-002956D72CAC not found.
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
datanode_3  | 2020-04-17 18:31:59,036 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpcslowness.timeout = 300s (custom)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.dispatchCommand(ContainerStateMachine.java:402)
recon_1     | 2020-04-17 18:32:24,928 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=9b787585-8415-4999-b60e-0b128664579e from datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689. Reason : ContainerID 5 creation failed
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.destroyPipeline(SCMPipelineManager.java:579)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
datanode_3  | 2020-04-17 18:31:59,036 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.sleep.deviation.threshold = 300 (default)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.runCommand(ContainerStateMachine.java:412)
recon_1     | 2020-04-17 18:32:24,929 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 9b787585-8415-4999-b60e-0b128664579e, Nodes: f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:OPEN, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:31:34.015Z]
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
scm_1       | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
scm_1       | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
datanode_3  | 2020-04-17 18:31:59,036 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.install.snapshot.enabled = false (custom)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.lambda$handleWriteChunk$2(ContainerStateMachine.java:447)
recon_1     | 2020-04-17 18:32:24,929 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineStateManager: Pipeline Pipeline[ Id: 9b787585-8415-4999-b60e-0b128664579e, Nodes: f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:31:34.015Z] moved to CLOSED state
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
scm_1       | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_3  | 2020-04-17 18:31:59,037 [pool-70-thread-1] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E: ConfigurationManager, init=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null, confs=<EMPTY_MAP>
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
recon_1     | 2020-04-17 18:32:24,942 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
scm_1       | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
datanode_3  | 2020-04-17 18:31:59,037 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.storage.dir = [/data/metadata/ratis] (custom)
recon_1     | 2020-04-17 18:32:24,943 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=9b787585-8415-4999-b60e-0b128664579e from datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc. Reason : ContainerID 5 creation failed
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 2020-04-17 18:31:59,038 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.corruption.policy = EXCEPTION (default)
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_1  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
recon_1     | 2020-04-17 18:32:24,944 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 9b787585-8415-4999-b60e-0b128664579e, Nodes: f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:31:34.015Z]
datanode_2  | Caused by: org.apache.ratis.protocol.GroupMismatchException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-002956D72CAC not found.
datanode_3  | 2020-04-17 18:31:59,039 [pool-70-thread-1] INFO storage.RaftStorageDirectory: The storage directory /data/metadata/ratis/9b787585-8415-4999-b60e-0b128664579e does not exist. Creating ...
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_1  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
recon_1     | 2020-04-17 18:32:24,949 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_3  | 2020-04-17 18:31:59,040 [Command processor thread] INFO impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: addNew group-0B128664579E:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] returns group-0B128664579E:java.util.concurrent.CompletableFuture@45331369[Not completed]
scm_1       | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
recon_1     | 2020-04-17 18:32:24,955 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_3  | 2020-04-17 18:31:59,041 [pool-70-thread-1] INFO storage.RaftStorageDirectory: Lock on /data/metadata/ratis/9b787585-8415-4999-b60e-0b128664579e/in_use.lock acquired by nodename 6@9dd073498a2e
scm_1       | 2020-04-17 18:31:34,052 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac close command to datanode 3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_1  | 2020-04-17 18:32:24,895 [ChunkWriter-12-0] ERROR ratis.ContainerStateMachine: group-0B128664579E: writeChunk writeStateMachineData failed: blockIdcontainerID: 5
datanode_1  | localID: 104015353852657668
datanode_1  | blockCommitSequenceId: 0
datanode_1  |  logIndex 1 chunkName 104015353852657668_chunk_1 Error message: ContainerID 5 creation failed Container Result: DISK_OUT_OF_SPACE
recon_1     | 2020-04-17 18:32:24,963 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=9b787585-8415-4999-b60e-0b128664579e from datanode 3989634e-60c9-4e5a-8523-9408dc0a802d. Reason : ContainerID 5 creation failed
datanode_1  | 2020-04-17 18:32:24,896 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0B128664579E-SegmentedRaftLogWorker] ERROR ratis.XceiverServerRatis: pipeline Action CLOSE on pipeline PipelineID=9b787585-8415-4999-b60e-0b128664579e.Reason : ContainerID 5 creation failed
scm_1       | 2020-04-17 18:31:34,052 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac close command to datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689
recon_1     | 2020-04-17 18:32:24,987 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 9b787585-8415-4999-b60e-0b128664579e, Nodes: f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:31:34.015Z]
datanode_3  | 2020-04-17 18:31:59,049 [pool-70-thread-1] INFO storage.RaftStorage: Storage directory /data/metadata/ratis/9b787585-8415-4999-b60e-0b128664579e has been successfully formatted.
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_1  | 2020-04-17 18:32:24,968 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0B128664579E-SegmentedRaftLogWorker] ERROR ratis.XceiverServerRatis: pipeline Action CLOSE on pipeline PipelineID=9b787585-8415-4999-b60e-0b128664579e.Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-8004DCD339EA, cid=1
scm_1       | 2020-04-17 18:31:34,053 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac close command to datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc
recon_1     | 2020-04-17 18:32:24,987 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=9b787585-8415-4999-b60e-0b128664579e from datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689. Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-8004DCD339EA, cid=1
datanode_3  | 2020-04-17 18:31:59,050 [pool-70-thread-1] INFO ratis.ContainerStateMachine: group-0B128664579E: The snapshot info is null. Setting the last applied indexto:(t:0, i:~)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_1  | 	 State Machine: cmdType: WriteChunk traceID: "fe6f5b05ae33d9ce:a58d8d0f471d9027:fe6f5b05ae33d9ce:0" containerID: 5 datanodeUuid: "f2e775cd-89a9-41b5-a9e0-4408e0d60689" pipelineID: "9b787585-8415-4999-b60e-0b128664579e" writeChunk { blockID { containerID: 5 localID: 104015353852657668 blockCommitSequenceId: 0 } chunkData { chunkName: "104015353852657668_chunk_1" offset: 0 len: 17540 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: " wi\267" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDUgbG9jSUQ6IDEwNDAxNTM1Mzg1MjY1NzY2OBiVy8D0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BAIVrtE3T_uceqiSS6B49Ag_PoU78fSa7F3bkouiLbFZ_HsaMv1fJcvbYg2dqh4bi5zDC6wy-ztgeYRmvj4LQ8zVuN4QiPxMXEXycN2DUxpVyciRh2Jtd1eStrPcgZM8QUqtiwhWm4I-FRQIfv-jpnO43Xxcn9PERqzvMCNg7ejEEOnW9H4ryoH6yXScEWklMBkCUShdkUm_bulspoven7H4fq_PE6e9LZiFR_0uPNxL11HvSQSolBEStiajK2WFnT7hNN_7aaemzdP95JuOKRWqKil1YMZ9U-xZdlZK6CyqZrnZmLMxzsEh2PDYR5OYg9UoKa4xOhUkUdbVc3YzmxOQQSEREU19CTE9DS19UT0tFTiJjb25JRDogNSBsb2NJRDogMTA0MDE1MzUzODUyNjU3NjY4", container path=nonexistent
scm_1       | 2020-04-17 18:31:34,053 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 1ca28fd5-8074-4f27-a46a-002956d72cac, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:0086d012-6f96-4817-8e1b-94f6eaa443bc, CreationTimestamp2020-04-17T18:29:36.706215Z]
recon_1     | 	 State Machine: cmdType: WriteChunk traceID: "fe6f5b05ae33d9ce:a58d8d0f471d9027:fe6f5b05ae33d9ce:0" containerID: 5 datanodeUuid: "f2e775cd-89a9-41b5-a9e0-4408e0d60689" pipelineID: "9b787585-8415-4999-b60e-0b128664579e" writeChunk { blockID { containerID: 5 localID: 104015353852657668 blockCommitSequenceId: 0 } chunkData { chunkName: "104015353852657668_chunk_1" offset: 0 len: 17540 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: " wi\267" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDUgbG9jSUQ6IDEwNDAxNTM1Mzg1MjY1NzY2OBiVy8D0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BAIVrtE3T_uceqiSS6B49Ag_PoU78fSa7F3bkouiLbFZ_HsaMv1fJcvbYg2dqh4bi5zDC6wy-ztgeYRmvj4LQ8zVuN4QiPxMXEXycN2DUxpVyciRh2Jtd1eStrPcgZM8QUqtiwhWm4I-FRQIfv-jpnO43Xxcn9PERqzvMCNg7ejEEOnW9H4ryoH6yXScEWklMBkCUShdkUm_bulspoven7H4fq_PE6e9LZiFR_0uPNxL11HvSQSolBEStiajK2WFnT7hNN_7aaemzdP95JuOKRWqKil1YMZ9U-xZdlZK6CyqZrnZmLMxzsEh2PDYR5OYg9UoKa4xOhUkUdbVc3YzmxOQQSEREU19CTE9DS19UT0tFTiJjb25JRDogNSBsb2NJRDogMTA0MDE1MzUzODUyNjU3NjY4", container path=nonexistent
datanode_2  | 	... 4 more
datanode_1  | 2020-04-17 18:32:30,021 [Command processor thread] ERROR commandhandler.CloseContainerCommandHandler: Container #5 does not exist in datanode. Container close failed.
scm_1       | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac not found
datanode_3  | 2020-04-17 18:31:59,050 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.notification.no-leader.timeout = 60s (default)
datanode_2  | 2020-04-17 18:31:59,147 [Command processor thread] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: remove group-002956D72CAC:null
recon_1     | 2020-04-17 18:32:24,990 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 9b787585-8415-4999-b60e-0b128664579e, Nodes: f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:31:34.015Z]
datanode_1  | 2020-04-17 18:33:55,968 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: remove  FOLLOWER 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0B128664579E:t1, leader=f2e775cd-89a9-41b5-a9e0-4408e0d60689, voted=f2e775cd-89a9-41b5-a9e0-4408e0d60689, raftlog=0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0B128664579E-SegmentedRaftLog:OPENED:c0,f0,i2, conf=0: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null RUNNING
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_3  | 2020-04-17 18:31:59,050 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.use.memory = false (default)
datanode_2  | 2020-04-17 18:31:59,147 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "1ca28fd5-8074-4f27-a46a-002956d72cac"
recon_1     | 2020-04-17 18:32:24,991 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=9b787585-8415-4999-b60e-0b128664579e from datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc. Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-8004DCD339EA, cid=1
datanode_1  | 2020-04-17 18:33:55,969 [Command processor thread] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0B128664579E: shutdown
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
datanode_3  | 2020-04-17 18:31:59,051 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.purge.gap = 1000000 (custom)
datanode_2  | 
recon_1     | 	 State Machine: cmdType: WriteChunk traceID: "fe6f5b05ae33d9ce:a58d8d0f471d9027:fe6f5b05ae33d9ce:0" containerID: 5 datanodeUuid: "f2e775cd-89a9-41b5-a9e0-4408e0d60689" pipelineID: "9b787585-8415-4999-b60e-0b128664579e" writeChunk { blockID { containerID: 5 localID: 104015353852657668 blockCommitSequenceId: 0 } chunkData { chunkName: "104015353852657668_chunk_1" offset: 0 len: 17540 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: " wi\267" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDUgbG9jSUQ6IDEwNDAxNTM1Mzg1MjY1NzY2OBiVy8D0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BAIVrtE3T_uceqiSS6B49Ag_PoU78fSa7F3bkouiLbFZ_HsaMv1fJcvbYg2dqh4bi5zDC6wy-ztgeYRmvj4LQ8zVuN4QiPxMXEXycN2DUxpVyciRh2Jtd1eStrPcgZM8QUqtiwhWm4I-FRQIfv-jpnO43Xxcn9PERqzvMCNg7ejEEOnW9H4ryoH6yXScEWklMBkCUShdkUm_bulspoven7H4fq_PE6e9LZiFR_0uPNxL11HvSQSolBEStiajK2WFnT7hNN_7aaemzdP95JuOKRWqKil1YMZ9U-xZdlZK6CyqZrnZmLMxzsEh2PDYR5OYg9UoKa4xOhUkUdbVc3YzmxOQQSEREU19CTE9DS19UT0tFTiJjb25JRDogNSBsb2NJRDogMTA0MDE1MzUzODUyNjU3NjY4", container path=nonexistent
datanode_1  | 2020-04-17 18:33:55,969 [Command processor thread] INFO util.JmxRegister: Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-0B128664579E,id=0086d012-6f96-4817-8e1b-94f6eaa443bc
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
datanode_3  | 2020-04-17 18:31:59,051 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
datanode_2  | java.io.IOException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-002956D72CAC not found.
recon_1     | 2020-04-17 18:32:24,992 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 9b787585-8415-4999-b60e-0b128664579e, Nodes: f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:31:34.015Z]
datanode_1  | 2020-04-17 18:33:55,969 [Command processor thread] INFO impl.RoleInfo: 0086d012-6f96-4817-8e1b-94f6eaa443bc: shutdown FollowerState
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.destroyPipeline(SCMPipelineManager.java:579)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
recon_1     | 2020-04-17 18:32:24,992 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=9b787585-8415-4999-b60e-0b128664579e from datanode 3989634e-60c9-4e5a-8523-9408dc0a802d. Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-8004DCD339EA, cid=1
recon_1     | 	 State Machine: cmdType: WriteChunk traceID: "fe6f5b05ae33d9ce:a58d8d0f471d9027:fe6f5b05ae33d9ce:0" containerID: 5 datanodeUuid: "f2e775cd-89a9-41b5-a9e0-4408e0d60689" pipelineID: "9b787585-8415-4999-b60e-0b128664579e" writeChunk { blockID { containerID: 5 localID: 104015353852657668 blockCommitSequenceId: 0 } chunkData { chunkName: "104015353852657668_chunk_1" offset: 0 len: 17540 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: " wi\267" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDUgbG9jSUQ6IDEwNDAxNTM1Mzg1MjY1NzY2OBiVy8D0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BAIVrtE3T_uceqiSS6B49Ag_PoU78fSa7F3bkouiLbFZ_HsaMv1fJcvbYg2dqh4bi5zDC6wy-ztgeYRmvj4LQ8zVuN4QiPxMXEXycN2DUxpVyciRh2Jtd1eStrPcgZM8QUqtiwhWm4I-FRQIfv-jpnO43Xxcn9PERqzvMCNg7ejEEOnW9H4ryoH6yXScEWklMBkCUShdkUm_bulspoven7H4fq_PE6e9LZiFR_0uPNxL11HvSQSolBEStiajK2WFnT7hNN_7aaemzdP95JuOKRWqKil1YMZ9U-xZdlZK6CyqZrnZmLMxzsEh2PDYR5OYg9UoKa4xOhUkUdbVc3YzmxOQQSEREU19CTE9DS19UT0tFTiJjb25JRDogNSBsb2NJRDogMTA0MDE1MzUzODUyNjU3NjY4", container path=nonexistent
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
datanode_3  | 2020-04-17 18:31:59,052 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
recon_1     | 2020-04-17 18:32:24,994 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 9b787585-8415-4999-b60e-0b128664579e, Nodes: f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:31:34.015Z]
datanode_1  | 2020-04-17 18:33:55,969 [Command processor thread] INFO impl.StateMachineUpdater: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0B128664579E-StateMachineUpdater: set stopIndex = 0
scm_1       | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
datanode_3  | 2020-04-17 18:31:59,052 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.log_worker.3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
recon_1     | 2020-04-17 18:32:55,027 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 2020-04-17 18:33:55,969 [Thread-255] INFO impl.FollowerState: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0B128664579E-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
scm_1       | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
datanode_3  | 2020-04-17 18:31:59,053 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.cache.num.max = 2 (custom)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
recon_1     | 2020-04-17 18:32:55,037 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 2020-04-17 18:33:55,970 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0B128664579E-StateMachineUpdater] ERROR ratis.ContainerStateMachine: Failed to take snapshot  for group-0B128664579E as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
scm_1       | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_3  | 2020-04-17 18:31:59,071 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: new 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E-SegmentedRaftLogWorker for RaftStorage:Storage Directory /data/metadata/ratis/9b787585-8415-4999-b60e-0b128664579e
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
recon_1     | 2020-04-17 18:32:55,038 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 2020-04-17 18:33:55,970 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0B128664579E-StateMachineUpdater] ERROR impl.StateMachineUpdater: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0B128664579E-StateMachineUpdater: Failed to take snapshot
scm_1       | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
datanode_3  | 2020-04-17 18:31:59,071 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.byte-limit = 2147483647 (custom)
datanode_2  | Caused by: org.apache.ratis.protocol.GroupMismatchException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-002956D72CAC not found.
recon_1     | 2020-04-17 18:32:55,049 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_1  | org.apache.ratis.protocol.StateMachineException: Failed to take snapshot  for group-0B128664579E as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_3  | 2020-04-17 18:31:59,075 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.element-limit = 1024 (custom)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
recon_1     | 2020-04-17 18:32:55,052 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.takeSnapshot(ContainerStateMachine.java:288)
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_3  | 2020-04-17 18:31:59,075 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
recon_1     | 2020-04-17 18:32:55,068 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_1  | 	at org.apache.ratis.server.impl.StateMachineUpdater.takeSnapshot(StateMachineUpdater.java:258)
scm_1       | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 2020-04-17 18:31:59,076 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.preallocated.size = 16384 (custom)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
recon_1     | 2020-04-17 18:33:03,880 [pool-9-thread-1] INFO impl.OzoneManagerServiceProviderImpl: Syncing data from Ozone Manager.
datanode_1  | 	at org.apache.ratis.server.impl.StateMachineUpdater.checkAndTakeSnapshot(StateMachineUpdater.java:250)
scm_1       | 2020-04-17 18:31:42,606 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Failed to create pipeline of type RATIS and factor ONE. Exception: Cannot create pipeline of factor 1 using 0 nodes. Used 3 nodes. Healthy nodes 3
datanode_3  | 2020-04-17 18:31:59,076 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.write.buffer.size = 1048576 (custom)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
recon_1     | 2020-04-17 18:33:03,881 [pool-9-thread-1] INFO impl.OzoneManagerServiceProviderImpl: Obtaining delta updates from Ozone Manager
datanode_1  | 	at org.apache.ratis.server.impl.StateMachineUpdater.run(StateMachineUpdater.java:169)
scm_1       | 2020-04-17 18:31:42,607 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Failed to create pipeline of type RATIS and factor THREE. Exception: Pipeline creation failed because nodes are engaged in other pipelines and every node can only be engaged in max 2 pipelines. Required 3. Found 0
datanode_2  | 	... 4 more
recon_1     | 2020-04-17 18:33:03,899 [pool-9-thread-1] INFO impl.OzoneManagerServiceProviderImpl: Number of updates received from OM : 4
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 2020-04-17 18:31:57,994 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 2020-04-17 18:31:59,076 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.force.sync.num = 128 (default)
datanode_2  | 2020-04-17 18:31:59,147 [Command processor thread] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: remove group-002956D72CAC:null
recon_1     | 2020-04-17 18:33:03,902 [pool-10-thread-1] INFO tasks.ContainerKeyMapperTask: ContainerKeyMapperTask successfully processed 0 OM DB update event(s).
datanode_1  | 2020-04-17 18:33:55,970 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0B128664579E-StateMachineUpdater] ERROR ratis.ContainerStateMachine: Failed to take snapshot  for group-0B128664579E as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
scm_1       | 2020-04-17 18:31:58,001 [Socket Reader #1 for port 9860] INFO ipc.Server: Auth successful for recon/recon@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 2020-04-17 18:31:59,077 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync = true (default)
datanode_2  | 2020-04-17 18:31:59,147 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "1ca28fd5-8074-4f27-a46a-002956d72cac"
recon_1     | 2020-04-17 18:33:03,980 [pool-10-thread-1] INFO tasks.FileSizeCountTask: Completed a 'process' run of FileSizeCountTask.
datanode_1  | 2020-04-17 18:33:55,970 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0B128664579E-StateMachineUpdater] ERROR impl.StateMachineUpdater: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0B128664579E-StateMachineUpdater: Failed to take snapshot
scm_1       | 2020-04-17 18:31:58,006 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_3  | 2020-04-17 18:31:59,078 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout = 10s (default)
datanode_2  | 
recon_1     | 2020-04-17 18:33:25,026 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | org.apache.ratis.protocol.StateMachineException: Failed to take snapshot  for group-0B128664579E as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
scm_1       | 2020-04-17 18:31:58,014 [Socket Reader #1 for port 9860] INFO authorize.ServiceAuthorizationManager: Authorization successful for recon/recon@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocol
datanode_3  | 2020-04-17 18:31:59,078 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
datanode_3  | 2020-04-17 18:31:59,079 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.caching.enabled = true (custom)
recon_1     | 2020-04-17 18:33:25,037 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
scm_1       | 2020-04-17 18:31:58,015 [IPC Server handler 4 on 9860] INFO ipc.Server: IPC Server handler 4 on 9860, call Call#20 Retry#0 org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocol.submitRequest from 172.24.0.3:35035
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.takeSnapshot(ContainerStateMachine.java:288)
datanode_2  | java.io.IOException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-002956D72CAC not found.
datanode_3  | 2020-04-17 18:31:59,080 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
recon_1     | 2020-04-17 18:33:25,041 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
scm_1       | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=1ca28fd5-8074-4f27-a46a-002956d72cac not found
datanode_1  | 	at org.apache.ratis.server.impl.StateMachineUpdater.takeSnapshot(StateMachineUpdater.java:258)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_3  | 2020-04-17 18:31:59,083 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.enabled = true (custom)
recon_1     | 2020-04-17 18:33:25,048 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_1  | 	at org.apache.ratis.server.impl.StateMachineUpdater.checkAndTakeSnapshot(StateMachineUpdater.java:250)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_3  | 2020-04-17 18:31:59,083 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
recon_1     | 2020-04-17 18:33:25,064 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.getPipeline(PipelineStateManager.java:63)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.getPipeline(SCMPipelineManager.java:267)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_3  | 2020-04-17 18:31:59,084 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.retention.file.num = 5 (custom)
scm_1       | 	at org.apache.hadoop.hdds.scm.server.SCMClientProtocolServer.getPipeline(SCMClientProtocolServer.java:409)
datanode_1  | 	at org.apache.ratis.server.impl.StateMachineUpdater.run(StateMachineUpdater.java:172)
recon_1     | 2020-04-17 18:33:25,068 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_3  | 2020-04-17 18:31:59,084 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.retrycache.expirytime = 600000ms (custom)
scm_1       | 	at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.getPipeline(StorageContainerLocationProtocolServerSideTranslatorPB.java:375)
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
recon_1     | 2020-04-17 18:33:30,930 [RatisPipelineUtilsThread] INFO pipeline.PipelineStateManager: Pipeline Pipeline[ Id: 9b787585-8415-4999-b60e-0b128664579e, Nodes: f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:31:34.015Z] removed from db
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 2020-04-17 18:31:59,085 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.leader_election.3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E
scm_1       | 	at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.processRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:249)
datanode_1  | 2020-04-17 18:33:55,970 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0B128664579E-StateMachineUpdater] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.state_machine.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0B128664579E
recon_1     | 2020-04-17 18:33:30,945 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 9b787585-8415-4999-b60e-0b128664579e, Nodes: f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:31:34.015Z]
datanode_2  | Caused by: org.apache.ratis.protocol.GroupMismatchException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-002956D72CAC not found.
datanode_3  | 2020-04-17 18:31:59,086 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.server.3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E
scm_1       | 	at org.apache.hadoop.hdds.server.OzoneProtocolMessageDispatcher.processRequest(OzoneProtocolMessageDispatcher.java:75)
datanode_1  | 2020-04-17 18:33:55,971 [Command processor thread] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0B128664579E: closes. applyIndex: 0
recon_1     | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=9b787585-8415-4999-b60e-0b128664579e not found
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_3  | 2020-04-17 18:31:59,086 [pool-70-thread-1] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E: start as a follower, conf=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null
scm_1       | 	at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:120)
datanode_1  | 2020-04-17 18:33:55,971 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0B128664579E-SegmentedRaftLogWorker] INFO segmented.SegmentedRaftLogWorker: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0B128664579E-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_3  | 2020-04-17 18:31:59,086 [pool-70-thread-1] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E: changes role from      null to FOLLOWER at term 0 for startAsFollower
scm_1       | 	at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:31605)
datanode_1  | 2020-04-17 18:33:55,972 [Command processor thread] INFO segmented.SegmentedRaftLogWorker: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0B128664579E-SegmentedRaftLogWorker close()
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_3  | 2020-04-17 18:31:59,087 [pool-70-thread-1] INFO impl.RoleInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d: start FollowerState
scm_1       | 	at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:524)
datanode_1  | 2020-04-17 18:33:55,972 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.log_worker.0086d012-6f96-4817-8e1b-94f6eaa443bc
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_3  | 2020-04-17 18:31:59,094 [pool-70-thread-1] INFO util.JmxRegister: Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-0B128664579E,id=3989634e-60c9-4e5a-8523-9408dc0a802d
scm_1       | 	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1025)
datanode_1  | 2020-04-17 18:33:55,972 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.leader_election.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0B128664579E
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
datanode_2  | 	... 4 more
datanode_3  | 2020-04-17 18:31:59,094 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.state_machine.3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E
scm_1       | 	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:876)
datanode_1  | 2020-04-17 18:33:55,972 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.server.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-0B128664579E
recon_1     | 	at org.apache.hadoop.ozone.recon.scm.ReconPipelineManager.destroyPipeline(ReconPipelineManager.java:74)
datanode_2  | 2020-04-17 18:32:04,135 [Thread-202] INFO impl.FollowerState: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-FollowerState: change to CANDIDATE, lastRpcTime:5040ms, electionTimeout:5040ms
datanode_3  | 2020-04-17 18:31:59,118 [grpc-default-executor-2] WARN impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: Failed groupAdd* GroupManagementRequest:client-EA2C5CA49474->3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E, cid=6, seq=0, RW, null, Add:group-0B128664579E:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858]
scm_1       | 	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:822)
datanode_1  | 2020-04-17 18:33:55,973 [Command processor thread] INFO commandhandler.ClosePipelineCommandHandler: Close Pipeline #id: "9b787585-8415-4999-b60e-0b128664579e"
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
datanode_2  | 2020-04-17 18:32:04,135 [Thread-202] INFO impl.RoleInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689: shutdown FollowerState
datanode_3  | java.util.concurrent.CompletionException: org.apache.ratis.protocol.AlreadyExistsException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Failed to add group-0B128664579E:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
scm_1       | 	at java.base/java.security.AccessController.doPrivileged(Native Method)
datanode_1  |  command on datanode #0086d012-6f96-4817-8e1b-94f6eaa443bc.
recon_1     | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
datanode_2  | 2020-04-17 18:32:04,135 [Thread-202] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
scm_1       | 	at java.base/javax.security.auth.Subject.doAs(Subject.java:423)
datanode_1  | 2020-04-17 18:33:55,974 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: addNew group-A6E7E3010649:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] returns group-A6E7E3010649:java.util.concurrent.CompletableFuture@686bea45[Not completed]
recon_1     | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
datanode_2  | 2020-04-17 18:32:04,135 [Thread-202] INFO impl.RoleInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689: start LeaderElection
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyNow(CompletableFuture.java:670)
scm_1       | 	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1730)
datanode_1  | 2020-04-17 18:33:55,978 [pool-70-thread-1] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc: new RaftServerImpl for group-A6E7E3010649:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] with ContainerStateMachine:uninitialized
recon_1     | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_2  | 2020-04-17 18:32:04,141 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-LeaderElection4] INFO impl.LeaderElection: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-LeaderElection4: begin an election at term 1 for -1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyStage(CompletableFuture.java:658)
scm_1       | 	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2682)
datanode_1  | 2020-04-17 18:33:55,979 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.min = 5s (custom)
datanode_1  | 2020-04-17 18:33:55,979 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.max = 5200ms (custom)
recon_1     | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
scm_1       | 2020-04-17 18:31:58,055 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 2020-04-17 18:33:55,979 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpcslowness.timeout = 300s (custom)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture.thenApplyAsync(CompletableFuture.java:2104)
datanode_2  | 2020-04-17 18:32:04,181 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-LeaderElection4] INFO impl.LeaderElection: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-LeaderElection4: Election PASSED; received 1 response(s) [f2e775cd-89a9-41b5-a9e0-4408e0d60689<-0086d012-6f96-4817-8e1b-94f6eaa443bc#0:OK-t1] and 0 exception(s); f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E:t1, leader=null, voted=f2e775cd-89a9-41b5-a9e0-4408e0d60689, raftlog=f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null
scm_1       | 2020-04-17 18:31:58,070 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 2020-04-17 18:33:55,979 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.sleep.deviation.threshold = 300 (default)
recon_1     | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:379)
datanode_2  | 2020-04-17 18:32:04,183 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-LeaderElection4] INFO impl.RoleInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689: shutdown LeaderElection
scm_1       | 2020-04-17 18:31:58,073 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_1  | 2020-04-17 18:33:55,979 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.install.snapshot.enabled = false (custom)
recon_1     | 2020-04-17 18:33:30,988 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 9b787585-8415-4999-b60e-0b128664579e, Nodes: f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:31:34.015Z]
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:363)
datanode_2  | 2020-04-17 18:32:04,185 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-LeaderElection4] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
scm_1       | 2020-04-17 18:31:58,079 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_1  | 2020-04-17 18:33:55,979 [pool-70-thread-1] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-A6E7E3010649: ConfigurationManager, init=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null, confs=<EMPTY_MAP>
recon_1     | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=9b787585-8415-4999-b60e-0b128664579e not found
datanode_3  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.lambda$groupManagement$0(GrpcAdminProtocolService.java:42)
datanode_2  | 2020-04-17 18:32:04,185 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-LeaderElection4] INFO ratis.XceiverServerRatis: Leader change notification received for group: group-0B128664579E with new leaderId: f2e775cd-89a9-41b5-a9e0-4408e0d60689
scm_1       | 2020-04-17 18:32:00,133 [Socket Reader #1 for port 9863] INFO ipc.Server: Auth successful for om/om@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 2020-04-17 18:33:55,980 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.storage.dir = [/data/metadata/ratis] (custom)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_3  | 	at org.apache.ratis.grpc.GrpcUtil.asyncCall(GrpcUtil.java:160)
datanode_2  | 2020-04-17 18:32:04,185 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-LeaderElection4] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E: change Leader from null to f2e775cd-89a9-41b5-a9e0-4408e0d60689 at term 1 for becomeLeader, leader elected after 5134ms
datanode_1  | 2020-04-17 18:33:55,980 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.corruption.policy = EXCEPTION (default)
scm_1       | 2020-04-17 18:32:00,147 [Socket Reader #1 for port 9863] INFO authorize.ServiceAuthorizationManager: Authorization successful for om/om@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.hdds.scm.protocol.ScmBlockLocationProtocol
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
datanode_3  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.groupManagement(GrpcAdminProtocolService.java:42)
datanode_2  | 2020-04-17 18:32:04,186 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-LeaderElection4] INFO server.RaftServerConfigKeys: raft.server.staging.catchup.gap = 1000 (default)
datanode_1  | 2020-04-17 18:33:55,980 [pool-70-thread-1] INFO storage.RaftStorageDirectory: The storage directory /data/metadata/ratis/231f977e-34fb-4c22-81db-a6e7e3010649 does not exist. Creating ...
scm_1       | 2020-04-17 18:32:00,148 [IPC Server handler 6 on 9863] ERROR pipeline.SCMPipelineManager: Failed to create pipeline of type RATIS and factor THREE. Exception: Pipeline creation failed because nodes are engaged in other pipelines and every node can only be engaged in max 2 pipelines. Required 3. Found 0
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
datanode_3  | 	at org.apache.ratis.proto.grpc.AdminProtocolServiceGrpc$MethodHandlers.invoke(AdminProtocolServiceGrpc.java:358)
datanode_2  | 2020-04-17 18:32:04,186 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-LeaderElection4] INFO server.RaftServerConfigKeys: raft.server.rpc.sleep.time = 25ms (default)
datanode_1  | 2020-04-17 18:33:55,985 [pool-70-thread-1] INFO storage.RaftStorageDirectory: Lock on /data/metadata/ratis/231f977e-34fb-4c22-81db-a6e7e3010649/in_use.lock acquired by nodename 6@1e870b3d5d4c
scm_1       | 2020-04-17 18:32:00,148 [IPC Server handler 6 on 9863] WARN block.BlockManagerImpl: Pipeline creation failed for type:RATIS factor:THREE. Datanodes may be used up.
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:172)
datanode_2  | 2020-04-17 18:32:04,186 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-LeaderElection4] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.log_appender.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E
datanode_1  | 2020-04-17 18:33:55,987 [grpc-default-executor-3] INFO server.GrpcServerProtocolService: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Completed APPEND_ENTRIES, lastRequest: f2e775cd-89a9-41b5-a9e0-4408e0d60689->0086d012-6f96-4817-8e1b-94f6eaa443bc#11-t1, previous=(t:1, i:1), leaderCommit=0, initializing? false, entries: size=1, first=(t:1, i:2), STATEMACHINELOGENTRY, client-8004DCD339EA, cid=2
scm_1       | org.apache.hadoop.hdds.scm.exceptions.SCMException: Pipeline creation failed because nodes are engaged in other pipelines and every node can only be engaged in max 2 pipelines. Required 3. Found 0
recon_1     | 	at org.apache.hadoop.ozone.recon.scm.ReconPipelineManager.destroyPipeline(ReconPipelineManager.java:74)
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:331)
datanode_2  | 2020-04-17 18:32:04,186 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-LeaderElection4] INFO server.RaftServerConfigKeys: raft.server.write.element-limit = 1024 (custom)
datanode_1  | 2020-04-17 18:33:56,002 [pool-70-thread-1] INFO storage.RaftStorage: Storage directory /data/metadata/ratis/231f977e-34fb-4c22-81db-a6e7e3010649 has been successfully formatted.
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.filterViableNodes(PipelinePlacementPolicy.java:173)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:814)
datanode_2  | 2020-04-17 18:32:04,187 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-LeaderElection4] INFO server.RaftServerConfigKeys: raft.server.write.byte-limit = 1073741824 (custom)
datanode_1  | 2020-04-17 18:33:56,003 [pool-70-thread-1] INFO ratis.ContainerStateMachine: group-A6E7E3010649: The snapshot info is null. Setting the last applied indexto:(t:0, i:~)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.chooseDatanodes(PipelinePlacementPolicy.java:196)
recon_1     | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
datanode_2  | 2020-04-17 18:32:04,191 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-LeaderElection4] INFO server.RaftServerConfigKeys: raft.server.watch.timeout = 180s (custom)
datanode_1  | 2020-04-17 18:33:56,003 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.notification.no-leader.timeout = 60s (default)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.RatisPipelineProvider.create(RatisPipelineProvider.java:116)
recon_1     | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:123)
datanode_2  | 2020-04-17 18:32:04,191 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-LeaderElection4] INFO server.RaftServerConfigKeys: raft.server.watch.timeout.denomination = 1s (default)
datanode_1  | 2020-04-17 18:33:56,003 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.use.memory = false (default)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineFactory.create(PipelineFactory.java:63)
recon_1     | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_3  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_2  | 2020-04-17 18:32:04,191 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-LeaderElection4] INFO server.RaftServerConfigKeys: raft.server.watch.element-limit = 65536 (default)
datanode_2  | 2020-04-17 18:32:04,191 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-LeaderElection4] INFO server.RaftServerConfigKeys: raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.createPipeline(SCMPipelineManager.java:232)
recon_1     | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
datanode_2  | 2020-04-17 18:32:04,191 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-LeaderElection4] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
datanode_1  | 2020-04-17 18:33:56,004 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.purge.gap = 1000000 (custom)
datanode_3  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
scm_1       | 	at org.apache.hadoop.hdds.scm.block.BlockManagerImpl.allocateBlock(BlockManagerImpl.java:200)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_2  | 2020-04-17 18:32:04,192 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-LeaderElection4] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.element-limit = 1 (custom)
datanode_1  | 2020-04-17 18:33:56,005 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 	at org.apache.hadoop.hdds.scm.server.SCMBlockProtocolServer.allocateBlock(SCMBlockProtocolServer.java:190)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_2  | 2020-04-17 18:32:04,192 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-LeaderElection4] INFO grpc.GrpcConfigKeys: raft.grpc.server.leader.outstanding.appends.max = 128 (default)
datanode_1  | 2020-04-17 18:33:56,005 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
datanode_3  | Caused by: org.apache.ratis.protocol.AlreadyExistsException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Failed to add group-0B128664579E:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
scm_1       | 	at org.apache.hadoop.hdds.scm.protocol.ScmBlockLocationProtocolServerSideTranslatorPB.allocateScmBlock(ScmBlockLocationProtocolServerSideTranslatorPB.java:161)
recon_1     | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 2020-04-17 18:32:04,192 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-LeaderElection4] INFO server.RaftServerConfigKeys: raft.server.rpc.request.timeout = 60s (custom)
datanode_1  | 2020-04-17 18:33:56,005 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.log_worker.0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy$ImplMap.addNew(RaftServerProxy.java:83)
scm_1       | 	at org.apache.hadoop.hdds.scm.protocol.ScmBlockLocationProtocolServerSideTranslatorPB.processMessage(ScmBlockLocationProtocolServerSideTranslatorPB.java:119)
recon_1     | 2020-04-17 18:33:30,991 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 9b787585-8415-4999-b60e-0b128664579e, Nodes: f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:31:34.015Z]
datanode_2  | 2020-04-17 18:32:04,192 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-LeaderElection4] INFO server.RaftServerConfigKeys: raft.server.log.appender.install.snapshot.enabled = false (custom)
datanode_1  | 2020-04-17 18:33:56,005 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.cache.num.max = 2 (custom)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:378)
scm_1       | 	at org.apache.hadoop.hdds.server.OzoneProtocolMessageDispatcher.processRequest(OzoneProtocolMessageDispatcher.java:75)
recon_1     | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=9b787585-8415-4999-b60e-0b128664579e not found
datanode_2  | 2020-04-17 18:32:04,193 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-LeaderElection4] INFO server.RaftServerConfigKeys: raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
datanode_1  | 2020-04-17 18:33:56,005 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: new 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-A6E7E3010649-SegmentedRaftLogWorker for RaftStorage:Storage Directory /data/metadata/ratis/231f977e-34fb-4c22-81db-a6e7e3010649
datanode_3  | 	... 13 more
scm_1       | 	at org.apache.hadoop.hdds.scm.protocol.ScmBlockLocationProtocolServerSideTranslatorPB.send(ScmBlockLocationProtocolServerSideTranslatorPB.java:100)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_2  | 2020-04-17 18:32:04,193 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-LeaderElection4] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
datanode_1  | 2020-04-17 18:33:56,005 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.byte-limit = 2147483647 (custom)
datanode_3  | 2020-04-17 18:31:59,171 [grpc-default-executor-2] WARN impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: Failed groupAdd* GroupManagementRequest:client-65426AC864E1->3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E, cid=7, seq=0, RW, null, Add:group-0B128664579E:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858]
scm_1       | 	at org.apache.hadoop.hdds.protocol.proto.ScmBlockLocationProtocolProtos$ScmBlockLocationProtocolService$2.callBlockingMethod(ScmBlockLocationProtocolProtos.java:13157)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
datanode_2  | 2020-04-17 18:32:04,193 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-LeaderElection4] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.element-limit = 1 (custom)
datanode_1  | 2020-04-17 18:33:56,006 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.element-limit = 1024 (custom)
datanode_3  | java.util.concurrent.CompletionException: org.apache.ratis.protocol.AlreadyExistsException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Failed to add group-0B128664579E:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
scm_1       | 	at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:524)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
datanode_2  | 2020-04-17 18:32:04,193 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-LeaderElection4] INFO grpc.GrpcConfigKeys: raft.grpc.server.leader.outstanding.appends.max = 128 (default)
datanode_1  | 2020-04-17 18:33:56,006 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
scm_1       | 	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1025)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
datanode_2  | 2020-04-17 18:32:04,193 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-LeaderElection4] INFO server.RaftServerConfigKeys: raft.server.rpc.request.timeout = 60s (custom)
datanode_1  | 2020-04-17 18:33:56,006 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.preallocated.size = 16384 (custom)
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyNow(CompletableFuture.java:670)
scm_1       | 	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:876)
recon_1     | 	at org.apache.hadoop.ozone.recon.scm.ReconPipelineManager.destroyPipeline(ReconPipelineManager.java:74)
datanode_2  | 2020-04-17 18:32:04,193 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-LeaderElection4] INFO server.RaftServerConfigKeys: raft.server.log.appender.install.snapshot.enabled = false (custom)
datanode_1  | 2020-04-17 18:33:56,006 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.write.buffer.size = 1048576 (custom)
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyStage(CompletableFuture.java:658)
scm_1       | 	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:822)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
datanode_2  | 2020-04-17 18:32:04,194 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-LeaderElection4] INFO impl.RoleInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689: start LeaderState
datanode_1  | 2020-04-17 18:33:56,006 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.force.sync.num = 128 (default)
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture.thenApplyAsync(CompletableFuture.java:2104)
scm_1       | 	at java.base/java.security.AccessController.doPrivileged(Native Method)
recon_1     | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
datanode_2  | 2020-04-17 18:32:04,196 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-LeaderElection4] INFO segmented.SegmentedRaftLogWorker: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-SegmentedRaftLogWorker: Starting segment from index:0
datanode_1  | 2020-04-17 18:33:56,007 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync = true (default)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:379)
scm_1       | 	at java.base/javax.security.auth.Subject.doAs(Subject.java:423)
recon_1     | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
datanode_2  | 2020-04-17 18:32:04,201 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-LeaderElection4] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E: set configuration 0: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null at 0
datanode_1  | 2020-04-17 18:33:56,007 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout = 10s (default)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:363)
scm_1       | 	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1730)
recon_1     | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_2  | 2020-04-17 18:32:04,204 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-SegmentedRaftLogWorker] INFO segmented.SegmentedRaftLogWorker: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-SegmentedRaftLogWorker: created new log segment /data/metadata/ratis/9b787585-8415-4999-b60e-0b128664579e/current/log_inprogress_0
datanode_1  | 2020-04-17 18:33:56,008 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
datanode_3  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.lambda$groupManagement$0(GrpcAdminProtocolService.java:42)
datanode_3  | 	at org.apache.ratis.grpc.GrpcUtil.asyncCall(GrpcUtil.java:160)
recon_1     | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
datanode_2  | 2020-04-17 18:32:24,872 [ChunkWriter-31-0] INFO keyvalue.KeyValueHandler: Operation: CreateContainer , Trace ID: fe6f5b05ae33d9ce:a58d8d0f471d9027:fe6f5b05ae33d9ce:0 , Message: Container creation failed, due to disk out of space , Result: DISK_OUT_OF_SPACE , StorageContainerException Occurred.
datanode_3  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.groupManagement(GrpcAdminProtocolService.java:42)
scm_1       | 	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2682)
datanode_1  | 2020-04-17 18:33:56,009 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.caching.enabled = true (custom)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_2  | org.apache.hadoop.hdds.scm.container.common.helpers.StorageContainerException: Container creation failed, due to disk out of space
datanode_3  | 	at org.apache.ratis.proto.grpc.AdminProtocolServiceGrpc$MethodHandlers.invoke(AdminProtocolServiceGrpc.java:358)
scm_1       | 2020-04-17 18:32:00,149 [IPC Server handler 6 on 9863] ERROR block.BlockManagerImpl: Unable to allocate a block for the size: 268435456, type: RATIS, factor: THREE
datanode_1  | 2020-04-17 18:33:56,010 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-A6E7E3010649-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_2  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueContainer.create(KeyValueContainer.java:165)
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:172)
scm_1       | 2020-04-17 18:32:02,381 [Socket Reader #1 for port 9860] INFO ipc.Server: Auth successful for om/om@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 2020-04-17 18:33:56,012 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.enabled = true (custom)
recon_1     | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.handleCreateContainer(KeyValueHandler.java:247)
datanode_2  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.dispatchRequest(KeyValueHandler.java:164)
scm_1       | 2020-04-17 18:32:02,383 [Socket Reader #1 for port 9860] INFO authorize.ServiceAuthorizationManager: Authorization successful for om/om@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocol
datanode_1  | 2020-04-17 18:33:56,012 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
datanode_2  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.handle(KeyValueHandler.java:152)
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:331)
recon_1     | 2020-04-17 18:33:30,992 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 9b787585-8415-4999-b60e-0b128664579e, Nodes: f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:31:34.015Z]
scm_1       | 2020-04-17 18:32:04,196 [EventQueue-PipelineReportForPipelineReportHandler] INFO pipeline.PipelineStateManager: Pipeline Pipeline[ Id: 9b787585-8415-4999-b60e-0b128664579e, Nodes: f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:ALLOCATED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:31:34.015375Z] moved to OPEN state
datanode_1  | 2020-04-17 18:33:56,013 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.retention.file.num = 5 (custom)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.createContainer(HddsDispatcher.java:414)
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:814)
recon_1     | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=9b787585-8415-4999-b60e-0b128664579e not found
scm_1       | 2020-04-17 18:32:23,697 [Socket Reader #1 for port 9863] INFO ipc.Server: Auth successful for om/om@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 2020-04-17 18:33:56,013 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.retrycache.expirytime = 600000ms (custom)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatchRequest(HddsDispatcher.java:250)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
scm_1       | 2020-04-17 18:32:23,698 [Socket Reader #1 for port 9863] INFO authorize.ServiceAuthorizationManager: Authorization successful for om/om@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.hdds.scm.protocol.ScmBlockLocationProtocol
datanode_1  | 2020-04-17 18:33:56,014 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.leader_election.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-A6E7E3010649
datanode_2  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatch(HddsDispatcher.java:162)
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
scm_1       | 2020-04-17 18:32:24,908 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 2020-04-17 18:33:56,014 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.server.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-A6E7E3010649
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.dispatchCommand(ContainerStateMachine.java:402)
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:123)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
scm_1       | 2020-04-17 18:32:24,942 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_1  | 2020-04-17 18:33:56,014 [pool-70-thread-1] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-A6E7E3010649: start as a follower, conf=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null
datanode_3  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.runCommand(ContainerStateMachine.java:412)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
scm_1       | 2020-04-17 18:32:24,948 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 2020-04-17 18:33:56,018 [pool-70-thread-1] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-A6E7E3010649: changes role from      null to FOLLOWER at term 0 for startAsFollower
datanode_3  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.lambda$handleWriteChunk$2(ContainerStateMachine.java:447)
recon_1     | 	at org.apache.hadoop.ozone.recon.scm.ReconPipelineManager.destroyPipeline(ReconPipelineManager.java:74)
scm_1       | 2020-04-17 18:32:24,962 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_1  | 2020-04-17 18:33:56,019 [pool-70-thread-1] INFO impl.RoleInfo: 0086d012-6f96-4817-8e1b-94f6eaa443bc: start FollowerState
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
scm_1       | 2020-04-17 18:32:24,964 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=9b787585-8415-4999-b60e-0b128664579e from datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689. Reason : ContainerID 5 creation failed
datanode_1  | 2020-04-17 18:33:56,021 [pool-70-thread-1] INFO util.JmxRegister: Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-A6E7E3010649,id=0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_3  | Caused by: org.apache.ratis.protocol.AlreadyExistsException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Failed to add group-0B128664579E:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
datanode_2  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
recon_1     | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
scm_1       | 2020-04-17 18:32:24,975 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 9b787585-8415-4999-b60e-0b128664579e, Nodes: f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:OPEN, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:31:34.015375Z]
datanode_1  | 2020-04-17 18:33:56,022 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.state_machine.0086d012-6f96-4817-8e1b-94f6eaa443bc@group-A6E7E3010649
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy$ImplMap.addNew(RaftServerProxy.java:83)
datanode_2  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
recon_1     | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
scm_1       | 2020-04-17 18:32:24,978 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineStateManager: Pipeline Pipeline[ Id: 9b787585-8415-4999-b60e-0b128664579e, Nodes: f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:31:34.015375Z] moved to CLOSED state
datanode_1  | 2020-04-17 18:33:56,147 [Command processor thread] INFO commandhandler.CreatePipelineCommandHandler: Created Pipeline RATIS THREE #id: "231f977e-34fb-4c22-81db-a6e7e3010649"
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:378)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
recon_1     | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
scm_1       | 2020-04-17 18:32:24,978 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=9b787585-8415-4999-b60e-0b128664579e from datanode 3989634e-60c9-4e5a-8523-9408dc0a802d. Reason : ContainerID 5 creation failed
datanode_1  | .
datanode_3  | 	... 13 more
datanode_2  | Caused by: org.apache.hadoop.util.DiskChecker$DiskOutOfSpaceException: Out of space: The volume with the most available space (=496680960 B) is less than the container size (=1073741824 B).
recon_1     | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
datanode_1  | 2020-04-17 18:33:56,150 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: remove group-0B128664579E:null
scm_1       | 2020-04-17 18:32:24,978 [EventQueue-CloseContainerForCloseContainerEventHandler] INFO container.CloseContainerEventHandler: Close container Event triggered for container : #5
datanode_3  | 2020-04-17 18:31:59,187 [Command processor thread] INFO commandhandler.CreatePipelineCommandHandler: Created Pipeline RATIS THREE #id: "9b787585-8415-4999-b60e-0b128664579e"
datanode_2  | 	at org.apache.hadoop.ozone.container.common.volume.RoundRobinVolumeChoosingPolicy.chooseVolume(RoundRobinVolumeChoosingPolicy.java:77)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_1  | 2020-04-17 18:33:56,151 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "9b787585-8415-4999-b60e-0b128664579e"
scm_1       | 2020-04-17 18:32:24,978 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 9b787585-8415-4999-b60e-0b128664579e, Nodes: f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:31:34.015375Z]
datanode_3  | .
datanode_2  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueContainer.create(KeyValueContainer.java:124)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_1  | 
scm_1       | 2020-04-17 18:32:24,994 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 2020-04-17 18:31:59,187 [Command processor thread] INFO impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: remove group-002956D72CAC:null
datanode_2  | 	... 13 more
recon_1     | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_1  | java.io.IOException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-0B128664579E not found.
scm_1       | 2020-04-17 18:32:24,999 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_3  | 2020-04-17 18:31:59,187 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "1ca28fd5-8074-4f27-a46a-002956d72cac"
datanode_2  | 2020-04-17 18:32:24,873 [ChunkWriter-31-0] INFO impl.HddsDispatcher: Operation: WriteChunk , Trace ID: fe6f5b05ae33d9ce:a58d8d0f471d9027:fe6f5b05ae33d9ce:0 , Message: ContainerID 5 creation failed , Result: DISK_OUT_OF_SPACE , StorageContainerException Occurred.
recon_1     | 2020-04-17 18:33:30,995 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 9b787585-8415-4999-b60e-0b128664579e, Nodes: f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:31:34.015Z]
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
scm_1       | 2020-04-17 18:32:25,000 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=9b787585-8415-4999-b60e-0b128664579e from datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc. Reason : ContainerID 5 creation failed
datanode_3  | 
datanode_2  | org.apache.hadoop.hdds.scm.container.common.helpers.StorageContainerException: ContainerID 5 creation failed
recon_1     | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=9b787585-8415-4999-b60e-0b128664579e not found
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
scm_1       | 2020-04-17 18:32:25,005 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 9b787585-8415-4999-b60e-0b128664579e, Nodes: f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:31:34.015375Z]
datanode_3  | java.io.IOException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-002956D72CAC not found.
datanode_2  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatchRequest(HddsDispatcher.java:254)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
scm_1       | 2020-04-17 18:32:25,005 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=9b787585-8415-4999-b60e-0b128664579e from datanode 3989634e-60c9-4e5a-8523-9408dc0a802d. Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-8004DCD339EA, cid=1
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatch(HddsDispatcher.java:162)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
scm_1       | 	 State Machine: cmdType: WriteChunk traceID: "fe6f5b05ae33d9ce:a58d8d0f471d9027:fe6f5b05ae33d9ce:0" containerID: 5 datanodeUuid: "f2e775cd-89a9-41b5-a9e0-4408e0d60689" pipelineID: "9b787585-8415-4999-b60e-0b128664579e" writeChunk { blockID { containerID: 5 localID: 104015353852657668 blockCommitSequenceId: 0 } chunkData { chunkName: "104015353852657668_chunk_1" offset: 0 len: 17540 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: " wi\267" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDUgbG9jSUQ6IDEwNDAxNTM1Mzg1MjY1NzY2OBiVy8D0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BAIVrtE3T_uceqiSS6B49Ag_PoU78fSa7F3bkouiLbFZ_HsaMv1fJcvbYg2dqh4bi5zDC6wy-ztgeYRmvj4LQ8zVuN4QiPxMXEXycN2DUxpVyciRh2Jtd1eStrPcgZM8QUqtiwhWm4I-FRQIfv-jpnO43Xxcn9PERqzvMCNg7ejEEOnW9H4ryoH6yXScEWklMBkCUShdkUm_bulspoven7H4fq_PE6e9LZiFR_0uPNxL11HvSQSolBEStiajK2WFnT7hNN_7aaemzdP95JuOKRWqKil1YMZ9U-xZdlZK6CyqZrnZmLMxzsEh2PDYR5OYg9UoKa4xOhUkUdbVc3YzmxOQQSEREU19CTE9DS19UT0tFTiJjb25JRDogNSBsb2NJRDogMTA0MDE1MzUzODUyNjU3NjY4", container path=nonexistent
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.dispatchCommand(ContainerStateMachine.java:402)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 2020-04-17 18:32:25,006 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 9b787585-8415-4999-b60e-0b128664579e, Nodes: f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:31:34.015375Z]
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.runCommand(ContainerStateMachine.java:412)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
datanode_1  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-0B128664579E not found.
scm_1       | 2020-04-17 18:32:25,007 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=9b787585-8415-4999-b60e-0b128664579e from datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689. Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-8004DCD339EA, cid=1
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.lambda$handleWriteChunk$2(ContainerStateMachine.java:447)
recon_1     | 	at org.apache.hadoop.ozone.recon.scm.ReconPipelineManager.destroyPipeline(ReconPipelineManager.java:74)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
scm_1       | 	 State Machine: cmdType: WriteChunk traceID: "fe6f5b05ae33d9ce:a58d8d0f471d9027:fe6f5b05ae33d9ce:0" containerID: 5 datanodeUuid: "f2e775cd-89a9-41b5-a9e0-4408e0d60689" pipelineID: "9b787585-8415-4999-b60e-0b128664579e" writeChunk { blockID { containerID: 5 localID: 104015353852657668 blockCommitSequenceId: 0 } chunkData { chunkName: "104015353852657668_chunk_1" offset: 0 len: 17540 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: " wi\267" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDUgbG9jSUQ6IDEwNDAxNTM1Mzg1MjY1NzY2OBiVy8D0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BAIVrtE3T_uceqiSS6B49Ag_PoU78fSa7F3bkouiLbFZ_HsaMv1fJcvbYg2dqh4bi5zDC6wy-ztgeYRmvj4LQ8zVuN4QiPxMXEXycN2DUxpVyciRh2Jtd1eStrPcgZM8QUqtiwhWm4I-FRQIfv-jpnO43Xxcn9PERqzvMCNg7ejEEOnW9H4ryoH6yXScEWklMBkCUShdkUm_bulspoven7H4fq_PE6e9LZiFR_0uPNxL11HvSQSolBEStiajK2WFnT7hNN_7aaemzdP95JuOKRWqKil1YMZ9U-xZdlZK6CyqZrnZmLMxzsEh2PDYR5OYg9UoKa4xOhUkUdbVc3YzmxOQQSEREU19CTE9DS19UT0tFTiJjb25JRDogNSBsb2NJRDogMTA0MDE1MzUzODUyNjU3NjY4", container path=nonexistent
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
recon_1     | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
scm_1       | 2020-04-17 18:32:25,007 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 9b787585-8415-4999-b60e-0b128664579e, Nodes: f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:31:34.015375Z]
datanode_3  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-002956D72CAC not found.
datanode_2  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
recon_1     | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
scm_1       | 2020-04-17 18:32:25,008 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.PipelineActionHandler: Received pipeline action CLOSE for PipelineID=9b787585-8415-4999-b60e-0b128664579e from datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc. Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-8004DCD339EA, cid=1
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_3  | 	... 4 more
datanode_2  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
recon_1     | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_3  | 2020-04-17 18:31:59,187 [Command processor thread] INFO impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: remove group-002956D72CAC:null
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 	 State Machine: cmdType: WriteChunk traceID: "fe6f5b05ae33d9ce:a58d8d0f471d9027:fe6f5b05ae33d9ce:0" containerID: 5 datanodeUuid: "f2e775cd-89a9-41b5-a9e0-4408e0d60689" pipelineID: "9b787585-8415-4999-b60e-0b128664579e" writeChunk { blockID { containerID: 5 localID: 104015353852657668 blockCommitSequenceId: 0 } chunkData { chunkName: "104015353852657668_chunk_1" offset: 0 len: 17540 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: " wi\267" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDUgbG9jSUQ6IDEwNDAxNTM1Mzg1MjY1NzY2OBiVy8D0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BAIVrtE3T_uceqiSS6B49Ag_PoU78fSa7F3bkouiLbFZ_HsaMv1fJcvbYg2dqh4bi5zDC6wy-ztgeYRmvj4LQ8zVuN4QiPxMXEXycN2DUxpVyciRh2Jtd1eStrPcgZM8QUqtiwhWm4I-FRQIfv-jpnO43Xxcn9PERqzvMCNg7ejEEOnW9H4ryoH6yXScEWklMBkCUShdkUm_bulspoven7H4fq_PE6e9LZiFR_0uPNxL11HvSQSolBEStiajK2WFnT7hNN_7aaemzdP95JuOKRWqKil1YMZ9U-xZdlZK6CyqZrnZmLMxzsEh2PDYR5OYg9UoKa4xOhUkUdbVc3YzmxOQQSEREU19CTE9DS19UT0tFTiJjb25JRDogNSBsb2NJRDogMTA0MDE1MzUzODUyNjU3NjY4", container path=nonexistent
recon_1     | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_1  | 	... 4 more
datanode_3  | 2020-04-17 18:31:59,187 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "1ca28fd5-8074-4f27-a46a-002956d72cac"
datanode_2  | 2020-04-17 18:32:24,874 [ChunkWriter-31-0] ERROR ratis.ContainerStateMachine: group-0B128664579E: writeChunk writeStateMachineData failed: blockIdcontainerID: 5
scm_1       | 2020-04-17 18:32:25,008 [EventQueue-PipelineActionsForPipelineActionHandler] INFO pipeline.SCMPipelineManager: Destroying pipeline:Pipeline[ Id: 9b787585-8415-4999-b60e-0b128664579e, Nodes: f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:31:34.015375Z]
recon_1     | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
datanode_1  | 2020-04-17 18:33:56,151 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: remove group-0B128664579E:null
datanode_3  | 
datanode_2  | localID: 104015353852657668
scm_1       | 2020-04-17 18:32:55,051 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_1  | 2020-04-17 18:33:56,151 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "9b787585-8415-4999-b60e-0b128664579e"
datanode_3  | java.io.IOException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-002956D72CAC not found.
datanode_2  | blockCommitSequenceId: 0
scm_1       | 2020-04-17 18:32:55,056 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
recon_1     | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_1  | 
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_2  |  logIndex 1 chunkName 104015353852657668_chunk_1 Error message: ContainerID 5 creation failed Container Result: DISK_OUT_OF_SPACE
scm_1       | 2020-04-17 18:32:55,057 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
recon_1     | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_1  | java.io.IOException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-0B128664579E not found.
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_2  | 2020-04-17 18:32:24,874 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-SegmentedRaftLogWorker] ERROR ratis.XceiverServerRatis: pipeline Action CLOSE on pipeline PipelineID=9b787585-8415-4999-b60e-0b128664579e.Reason : ContainerID 5 creation failed
scm_1       | 2020-04-17 18:32:55,063 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
recon_1     | 2020-04-17 18:33:45,903 [PipelineSyncTask] INFO scm.ReconPipelineManager: Recon has 3 pipelines in house.
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_2  | 2020-04-17 18:32:24,966 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-SegmentedRaftLogWorker] ERROR ratis.XceiverServerRatis: pipeline Action CLOSE on pipeline PipelineID=9b787585-8415-4999-b60e-0b128664579e.Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-8004DCD339EA, cid=1
scm_1       | 2020-04-17 18:32:55,064 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
recon_1     | 2020-04-17 18:33:45,907 [PipelineSyncTask] INFO scm.ReconPipelineManager: Adding new pipeline PipelineID=231f977e-34fb-4c22-81db-a6e7e3010649 from SCM.
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_2  | 	 State Machine: cmdType: WriteChunk traceID: "fe6f5b05ae33d9ce:a58d8d0f471d9027:fe6f5b05ae33d9ce:0" containerID: 5 datanodeUuid: "f2e775cd-89a9-41b5-a9e0-4408e0d60689" pipelineID: "9b787585-8415-4999-b60e-0b128664579e" writeChunk { blockID { containerID: 5 localID: 104015353852657668 blockCommitSequenceId: 0 } chunkData { chunkName: "104015353852657668_chunk_1" offset: 0 len: 17540 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: " wi\267" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDUgbG9jSUQ6IDEwNDAxNTM1Mzg1MjY1NzY2OBiVy8D0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BAIVrtE3T_uceqiSS6B49Ag_PoU78fSa7F3bkouiLbFZ_HsaMv1fJcvbYg2dqh4bi5zDC6wy-ztgeYRmvj4LQ8zVuN4QiPxMXEXycN2DUxpVyciRh2Jtd1eStrPcgZM8QUqtiwhWm4I-FRQIfv-jpnO43Xxcn9PERqzvMCNg7ejEEOnW9H4ryoH6yXScEWklMBkCUShdkUm_bulspoven7H4fq_PE6e9LZiFR_0uPNxL11HvSQSolBEStiajK2WFnT7hNN_7aaemzdP95JuOKRWqKil1YMZ9U-xZdlZK6CyqZrnZmLMxzsEh2PDYR5OYg9UoKa4xOhUkUdbVc3YzmxOQQSEREU19CTE9DS19UT0tFTiJjb25JRDogNSBsb2NJRDogMTA0MDE1MzUzODUyNjU3NjY4", container path=nonexistent
scm_1       | 2020-04-17 18:32:55,077 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
recon_1     | 2020-04-17 18:33:45,907 [PipelineSyncTask] INFO pipeline.PipelineStateManager: Created pipeline Pipeline[ Id: 231f977e-34fb-4c22-81db-a6e7e3010649, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:ALLOCATED, leaderId:null, CreationTimestamp2020-04-17T18:33:30.981Z]
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 2020-04-17 18:32:30,054 [Command processor thread] ERROR commandhandler.CloseContainerCommandHandler: Container #5 does not exist in datanode. Container close failed.
recon_1     | 2020-04-17 18:33:45,907 [PipelineSyncTask] INFO scm.PipelineSyncTask: Pipeline sync Thread took 26 milliseconds.
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_3  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-002956D72CAC not found.
scm_1       | 2020-04-17 18:33:25,039 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | 2020-04-17 18:33:24,872 [java.util.concurrent.ThreadPoolExecutor$Worker@7f16e4e0[State = -1, empty queue]] WARN server.GrpcLogAppender: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E->3989634e-60c9-4e5a-8523-9408dc0a802d-GrpcLogAppender:  appendEntries Timeout, request=AppendEntriesRequest:cid=10,entriesCount=1,lastEntry=(t:1, i:1)
recon_1     | 2020-04-17 18:33:46,896 [MissingContainerTask] INFO fsck.MissingContainerTask: Missing Container task Thread took 4 milliseconds for processing 0 containers.
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
scm_1       | 2020-04-17 18:33:25,043 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | 2020-04-17 18:33:24,879 [java.util.concurrent.ThreadPoolExecutor$Worker@7f16e4e0[State = -1, empty queue]] WARN server.GrpcLogAppender: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E->0086d012-6f96-4817-8e1b-94f6eaa443bc-GrpcLogAppender:  appendEntries Timeout, request=AppendEntriesRequest:cid=10,entriesCount=1,lastEntry=(t:1, i:1)
recon_1     | 2020-04-17 18:33:55,054 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-0B128664579E not found.
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
scm_1       | 2020-04-17 18:33:25,045 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
datanode_2  | 2020-04-17 18:33:24,967 [java.util.concurrent.ThreadPoolExecutor$Worker@7f16e4e0[State = -1, empty queue]] WARN server.GrpcLogAppender: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E->0086d012-6f96-4817-8e1b-94f6eaa443bc-GrpcLogAppender:  appendEntries Timeout, request=AppendEntriesRequest:cid=11,entriesCount=1,lastEntry=(t:1, i:2)
recon_1     | 2020-04-17 18:33:55,059 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
scm_1       | 2020-04-17 18:33:25,050 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_2  | 2020-04-17 18:33:24,967 [java.util.concurrent.ThreadPoolExecutor$Worker@7f16e4e0[State = -1, empty queue]] WARN server.GrpcLogAppender: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E->3989634e-60c9-4e5a-8523-9408dc0a802d-GrpcLogAppender:  appendEntries Timeout, request=AppendEntriesRequest:cid=11,entriesCount=1,lastEntry=(t:1, i:2)
recon_1     | 2020-04-17 18:33:55,073 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
scm_1       | 2020-04-17 18:33:25,074 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_2  | 2020-04-17 18:33:55,983 [Command processor thread] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: remove    LEADER f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E:t1, leader=f2e775cd-89a9-41b5-a9e0-4408e0d60689, voted=f2e775cd-89a9-41b5-a9e0-4408e0d60689, raftlog=f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-SegmentedRaftLog:OPENED:c0,f0,i2, conf=0: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null RUNNING
recon_1     | 2020-04-17 18:33:55,073 [Socket Reader #1 for port 9891] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_3  | 	... 4 more
scm_1       | 2020-04-17 18:33:25,076 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_2  | 2020-04-17 18:33:55,983 [Command processor thread] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E: shutdown
recon_1     | 2020-04-17 18:33:55,085 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_3  | 2020-04-17 18:31:59,188 [Command processor thread] INFO impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: remove group-002956D72CAC:null
scm_1       | 2020-04-17 18:33:30,978 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=9b787585-8415-4999-b60e-0b128664579e close command to datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_2  | 2020-04-17 18:33:55,983 [Command processor thread] INFO util.JmxRegister: Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-0B128664579E,id=f2e775cd-89a9-41b5-a9e0-4408e0d60689
recon_1     | 2020-04-17 18:33:55,101 [Socket Reader #1 for port 9891] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.ReconDatanodeProtocol
recon_1     | 2020-04-17 18:33:56,005 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Pipeline THREE PipelineID=231f977e-34fb-4c22-81db-a6e7e3010649 reported by 0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106649330073}
scm_1       | 2020-04-17 18:33:30,979 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=9b787585-8415-4999-b60e-0b128664579e close command to datanode 3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_3  | 2020-04-17 18:31:59,188 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "1ca28fd5-8074-4f27-a46a-002956d72cac"
datanode_2  | 2020-04-17 18:33:55,983 [Command processor thread] INFO impl.RoleInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689: shutdown LeaderState
recon_1     | 2020-04-17 18:33:56,013 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Pipeline THREE PipelineID=231f977e-34fb-4c22-81db-a6e7e3010649 reported by 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106587165812}
datanode_1  | 	... 4 more
datanode_1  | 2020-04-17 18:33:56,151 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: remove group-0B128664579E:null
datanode_3  | 
datanode_2  | 2020-04-17 18:33:55,984 [org.apache.ratis.server.impl.LogAppender$AppenderDaemon$$Lambda$546/0x000000084066fc40@4d0dc366] WARN server.GrpcLogAppender: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E->0086d012-6f96-4817-8e1b-94f6eaa443bc-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
datanode_1  | 2020-04-17 18:33:56,151 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "9b787585-8415-4999-b60e-0b128664579e"
scm_1       | 2020-04-17 18:33:30,979 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=9b787585-8415-4999-b60e-0b128664579e close command to datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc
recon_1     | 2020-04-17 18:33:56,135 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Pipeline THREE PipelineID=231f977e-34fb-4c22-81db-a6e7e3010649 reported by f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106586728310}
datanode_3  | java.io.IOException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-002956D72CAC not found.
datanode_2  | 2020-04-17 18:33:55,985 [org.apache.ratis.server.impl.LogAppender$AppenderDaemon$$Lambda$546/0x000000084066fc40@7c0aeca8] WARN server.GrpcLogAppender: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E->3989634e-60c9-4e5a-8523-9408dc0a802d-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
datanode_1  | 
datanode_1  | java.io.IOException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-0B128664579E not found.
recon_1     | 2020-04-17 18:34:01,087 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO scm.ReconPipelineReportHandler: Pipeline THREE PipelineID=231f977e-34fb-4c22-81db-a6e7e3010649 reported by 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: 6106587165812}
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
scm_1       | 2020-04-17 18:33:30,980 [RatisPipelineUtilsThread] INFO pipeline.PipelineStateManager: Pipeline Pipeline[ Id: 9b787585-8415-4999-b60e-0b128664579e, Nodes: f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:31:34.015375Z] removed from db
datanode_2  | 2020-04-17 18:33:55,984 [Command processor thread] INFO impl.PendingRequests: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-PendingRequests: sendNotLeaderResponses
recon_1     | 2020-04-17 18:34:01,087 [EventQueue-PipelineReportForReconPipelineReportHandler] INFO pipeline.PipelineStateManager: Pipeline Pipeline[ Id: 231f977e-34fb-4c22-81db-a6e7e3010649, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:ALLOCATED, leaderId:3989634e-60c9-4e5a-8523-9408dc0a802d, CreationTimestamp2020-04-17T18:33:30.981Z] moved to OPEN state
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
scm_1       | 2020-04-17 18:33:30,981 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Failed to create pipeline of type RATIS and factor ONE. Exception: Cannot create pipeline of factor 1 using 0 nodes. Used 3 nodes. Healthy nodes 3
datanode_2  | 2020-04-17 18:33:55,990 [grpc-default-executor-5] INFO server.GrpcLogAppender: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E->0086d012-6f96-4817-8e1b-94f6eaa443bc-AppendLogResponseHandler: follower responses appendEntries COMPLETED
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
scm_1       | 2020-04-17 18:33:30,981 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Sending CreatePipelineCommand for pipeline:PipelineID=231f977e-34fb-4c22-81db-a6e7e3010649 to datanode:3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_2  | 2020-04-17 18:33:55,999 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.log_appender.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
scm_1       | 2020-04-17 18:33:30,981 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Sending CreatePipelineCommand for pipeline:PipelineID=231f977e-34fb-4c22-81db-a6e7e3010649 to datanode:f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_2  | 2020-04-17 18:33:56,012 [Command processor thread] INFO impl.StateMachineUpdater: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-StateMachineUpdater: set stopIndex = 0
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 2020-04-17 18:33:30,981 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Sending CreatePipelineCommand for pipeline:PipelineID=231f977e-34fb-4c22-81db-a6e7e3010649 to datanode:0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_2  | 2020-04-17 18:33:56,014 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-StateMachineUpdater] ERROR ratis.ContainerStateMachine: Failed to take snapshot  for group-0B128664579E as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
datanode_1  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-0B128664579E not found.
datanode_3  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-002956D72CAC not found.
scm_1       | 2020-04-17 18:33:30,981 [RatisPipelineUtilsThread] INFO pipeline.PipelineStateManager: Created pipeline Pipeline[ Id: 231f977e-34fb-4c22-81db-a6e7e3010649, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:ALLOCATED, leaderId:null, CreationTimestamp2020-04-17T18:33:30.981435Z]
datanode_2  | 2020-04-17 18:33:56,016 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-StateMachineUpdater] ERROR impl.StateMachineUpdater: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-StateMachineUpdater: Failed to take snapshot
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
scm_1       | 2020-04-17 18:33:30,982 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Failed to create pipeline of type RATIS and factor THREE. Exception: Pipeline creation failed because nodes are engaged in other pipelines and every node can only be engaged in max 2 pipelines. Required 3. Found 0
datanode_2  | org.apache.ratis.protocol.StateMachineException: Failed to take snapshot  for group-0B128664579E as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
scm_1       | 2020-04-17 18:33:30,985 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=9b787585-8415-4999-b60e-0b128664579e close command to datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.takeSnapshot(ContainerStateMachine.java:288)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
scm_1       | 2020-04-17 18:33:30,985 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=9b787585-8415-4999-b60e-0b128664579e close command to datanode 3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_2  | 	at org.apache.ratis.server.impl.StateMachineUpdater.takeSnapshot(StateMachineUpdater.java:258)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
scm_1       | 2020-04-17 18:33:30,985 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=9b787585-8415-4999-b60e-0b128664579e close command to datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_2  | 	at org.apache.ratis.server.impl.StateMachineUpdater.checkAndTakeSnapshot(StateMachineUpdater.java:250)
datanode_2  | 	at org.apache.ratis.server.impl.StateMachineUpdater.run(StateMachineUpdater.java:169)
datanode_3  | 	... 4 more
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_1  | 	... 4 more
scm_1       | 2020-04-17 18:33:30,985 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 9b787585-8415-4999-b60e-0b128664579e, Nodes: f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:31:34.015375Z]
datanode_3  | 2020-04-17 18:31:59,188 [Command processor thread] INFO impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: remove group-002956D72CAC:null
datanode_2  | 2020-04-17 18:33:56,017 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-StateMachineUpdater] ERROR ratis.ContainerStateMachine: Failed to take snapshot  for group-0B128664579E as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
datanode_1  | 2020-04-17 18:33:56,152 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: remove group-0B128664579E:null
scm_1       | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=9b787585-8415-4999-b60e-0b128664579e not found
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_2  | 2020-04-17 18:33:56,018 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-StateMachineUpdater] ERROR impl.StateMachineUpdater: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-StateMachineUpdater: Failed to take snapshot
datanode_3  | 2020-04-17 18:31:59,188 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "1ca28fd5-8074-4f27-a46a-002956d72cac"
datanode_1  | 2020-04-17 18:33:56,153 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "9b787585-8415-4999-b60e-0b128664579e"
datanode_2  | org.apache.ratis.protocol.StateMachineException: Failed to take snapshot  for group-0B128664579E as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
datanode_3  | 
datanode_1  | 
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.takeSnapshot(ContainerStateMachine.java:288)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
datanode_3  | java.io.IOException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-002956D72CAC not found.
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_1  | java.io.IOException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-0B128664579E not found.
datanode_2  | 	at org.apache.ratis.server.impl.StateMachineUpdater.takeSnapshot(StateMachineUpdater.java:258)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_2  | 	at org.apache.ratis.server.impl.StateMachineUpdater.checkAndTakeSnapshot(StateMachineUpdater.java:250)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.destroyPipeline(SCMPipelineManager.java:579)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_2  | 	at org.apache.ratis.server.impl.StateMachineUpdater.run(StateMachineUpdater.java:172)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_2  | 2020-04-17 18:33:56,021 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-StateMachineUpdater] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.state_machine.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E
scm_1       | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
datanode_3  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-002956D72CAC not found.
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_2  | 2020-04-17 18:33:56,021 [Command processor thread] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E: closes. applyIndex: 0
scm_1       | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 2020-04-17 18:33:56,021 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-SegmentedRaftLogWorker] INFO segmented.SegmentedRaftLogWorker: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
scm_1       | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_1  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-0B128664579E not found.
datanode_2  | 2020-04-17 18:33:56,028 [grpc-default-executor-5] INFO impl.FollowerInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E->0086d012-6f96-4817-8e1b-94f6eaa443bc: nextIndex: updateUnconditionally 3 -> 1
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_2  | 2020-04-17 18:33:56,028 [grpc-default-executor-8] INFO server.GrpcLogAppender: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E->3989634e-60c9-4e5a-8523-9408dc0a802d-AppendLogResponseHandler: follower responses appendEntries COMPLETED
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_3  | 	... 4 more
datanode_3  | 2020-04-17 18:31:59,189 [Command processor thread] INFO impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: remove group-002956D72CAC:null
datanode_2  | 2020-04-17 18:33:56,041 [grpc-default-executor-8] INFO impl.FollowerInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E->3989634e-60c9-4e5a-8523-9408dc0a802d: nextIndex: updateUnconditionally 3 -> 1
scm_1       | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 2020-04-17 18:31:59,189 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "1ca28fd5-8074-4f27-a46a-002956d72cac"
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_2  | 2020-04-17 18:33:56,113 [Command processor thread] INFO segmented.SegmentedRaftLogWorker: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E-SegmentedRaftLogWorker close()
scm_1       | 2020-04-17 18:33:31,005 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=9b787585-8415-4999-b60e-0b128664579e close command to datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_3  | 
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
scm_1       | 2020-04-17 18:33:31,005 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=9b787585-8415-4999-b60e-0b128664579e close command to datanode 3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_3  | java.io.IOException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-002956D72CAC not found.
datanode_1  | 	... 4 more
datanode_2  | Apr 17, 2020 6:33:56 PM org.apache.ratis.thirdparty.io.grpc.netty.NettyServerHandler onStreamError
scm_1       | 2020-04-17 18:33:31,005 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=9b787585-8415-4999-b60e-0b128664579e close command to datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_1  | 2020-04-17 18:33:56,153 [Command processor thread] INFO impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: remove group-0B128664579E:null
datanode_2  | WARNING: Stream Error
scm_1       | 2020-04-17 18:33:31,006 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 9b787585-8415-4999-b60e-0b128664579e, Nodes: f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:31:34.015375Z]
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_1  | 2020-04-17 18:33:56,153 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "9b787585-8415-4999-b60e-0b128664579e"
datanode_2  | org.apache.ratis.thirdparty.io.netty.handler.codec.http2.Http2Exception$StreamException: Received DATA frame for an unknown stream 3
scm_1       | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=9b787585-8415-4999-b60e-0b128664579e not found
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_1  | 
datanode_2  | 	at org.apache.ratis.thirdparty.io.netty.handler.codec.http2.Http2Exception.streamError(Http2Exception.java:147)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_1  | java.io.IOException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-0B128664579E not found.
datanode_2  | 	at org.apache.ratis.thirdparty.io.netty.handler.codec.http2.DefaultHttp2ConnectionDecoder$FrameReadListener.shouldIgnoreHeadersOrDataFrame(DefaultHttp2ConnectionDecoder.java:591)
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_2  | 	at org.apache.ratis.thirdparty.io.netty.handler.codec.http2.DefaultHttp2ConnectionDecoder$FrameReadListener.onDataRead(DefaultHttp2ConnectionDecoder.java:239)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
datanode_3  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-002956D72CAC not found.
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_2  | 	at org.apache.ratis.thirdparty.io.netty.handler.codec.http2.Http2InboundFrameLogger$1.onDataRead(Http2InboundFrameLogger.java:48)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_2  | 	at org.apache.ratis.thirdparty.io.netty.handler.codec.http2.DefaultHttp2FrameReader.readDataFrame(DefaultHttp2FrameReader.java:422)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_1  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_2  | 	at org.apache.ratis.thirdparty.io.netty.handler.codec.http2.DefaultHttp2FrameReader.processPayloadState(DefaultHttp2FrameReader.java:251)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.destroyPipeline(SCMPipelineManager.java:579)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_1  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Group group-0B128664579E not found.
datanode_2  | 	at org.apache.ratis.thirdparty.io.netty.handler.codec.http2.DefaultHttp2FrameReader.readFrame(DefaultHttp2FrameReader.java:160)
scm_1       | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
datanode_3  | 	... 4 more
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_2  | 	at org.apache.ratis.thirdparty.io.netty.handler.codec.http2.Http2InboundFrameLogger.readFrame(Http2InboundFrameLogger.java:41)
scm_1       | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
datanode_3  | 2020-04-17 18:32:04,158 [Thread-257] INFO impl.FollowerState: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E-FollowerState: change to CANDIDATE, lastRpcTime:5071ms, electionTimeout:5064ms
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_2  | 	at org.apache.ratis.thirdparty.io.netty.handler.codec.http2.DefaultHttp2ConnectionDecoder.decodeFrame(DefaultHttp2ConnectionDecoder.java:174)
scm_1       | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_3  | 2020-04-17 18:32:04,161 [Thread-257] INFO impl.RoleInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d: shutdown FollowerState
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_2  | 	at org.apache.ratis.thirdparty.io.netty.handler.codec.http2.Http2ConnectionHandler$FrameDecoder.decode(Http2ConnectionHandler.java:378)
scm_1       | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
datanode_3  | 2020-04-17 18:32:04,163 [Thread-257] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
datanode_1  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_2  | 	at org.apache.ratis.thirdparty.io.netty.handler.codec.http2.Http2ConnectionHandler.decode(Http2ConnectionHandler.java:438)
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_3  | 2020-04-17 18:32:04,163 [Thread-257] INFO impl.RoleInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d: start LeaderElection
datanode_1  | 	... 4 more
datanode_2  | 	at org.apache.ratis.thirdparty.io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:505)
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_3  | 2020-04-17 18:32:04,177 [grpc-default-executor-2] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E: changes role from CANDIDATE to FOLLOWER at term 1 for recognizeCandidate:f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_1  | 2020-04-17 18:33:56,169 [grpc-default-executor-3] WARN impl.RaftServerProxy: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Failed groupAdd* GroupManagementRequest:client-B0B634E47446->0086d012-6f96-4817-8e1b-94f6eaa443bc@group-A6E7E3010649, cid=11, seq=0, RW, null, Add:group-A6E7E3010649:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858]
datanode_2  | 	at org.apache.ratis.thirdparty.io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:444)
scm_1       | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 2020-04-17 18:32:04,178 [grpc-default-executor-2] INFO impl.RoleInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d: shutdown LeaderElection
datanode_1  | java.util.concurrent.CompletionException: org.apache.ratis.protocol.AlreadyExistsException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Failed to add group-A6E7E3010649:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
datanode_2  | 	at org.apache.ratis.thirdparty.io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:283)
scm_1       | 2020-04-17 18:33:31,007 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=9b787585-8415-4999-b60e-0b128664579e close command to datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_3  | 2020-04-17 18:32:04,178 [grpc-default-executor-2] INFO impl.RoleInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d: start FollowerState
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
datanode_2  | 	at org.apache.ratis.thirdparty.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374)
scm_1       | 2020-04-17 18:33:31,007 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=9b787585-8415-4999-b60e-0b128664579e close command to datanode 3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_3  | 2020-04-17 18:32:04,204 [grpc-default-executor-2] INFO ratis.XceiverServerRatis: Leader change notification received for group: group-0B128664579E with new leaderId: f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyNow(CompletableFuture.java:670)
datanode_2  | 	at org.apache.ratis.thirdparty.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360)
scm_1       | 2020-04-17 18:33:31,007 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=9b787585-8415-4999-b60e-0b128664579e close command to datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_3  | 2020-04-17 18:32:04,204 [grpc-default-executor-2] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E: change Leader from null to f2e775cd-89a9-41b5-a9e0-4408e0d60689 at term 1 for appendEntries, leader elected after 5154ms
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyStage(CompletableFuture.java:658)
datanode_2  | 	at org.apache.ratis.thirdparty.io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:352)
scm_1       | 2020-04-17 18:33:31,007 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 9b787585-8415-4999-b60e-0b128664579e, Nodes: f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:31:34.015375Z]
datanode_3  | 2020-04-17 18:32:04,215 [grpc-default-executor-2] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E: set configuration 0: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null at 0
datanode_1  | 	at java.base/java.util.concurrent.CompletableFuture.thenApplyAsync(CompletableFuture.java:2104)
datanode_2  | 	at org.apache.ratis.thirdparty.io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1421)
scm_1       | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=9b787585-8415-4999-b60e-0b128664579e not found
datanode_3  | 2020-04-17 18:32:04,215 [grpc-default-executor-2] INFO segmented.SegmentedRaftLogWorker: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E-SegmentedRaftLogWorker: Starting segment from index:0
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:379)
datanode_2  | 	at org.apache.ratis.thirdparty.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_3  | 2020-04-17 18:32:04,219 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E-SegmentedRaftLogWorker] INFO segmented.SegmentedRaftLogWorker: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E-SegmentedRaftLogWorker: created new log segment /data/metadata/ratis/9b787585-8415-4999-b60e-0b128664579e/current/log_inprogress_0
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:363)
datanode_2  | 	at org.apache.ratis.thirdparty.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
datanode_3  | 2020-04-17 18:32:24,878 [ChunkWriter-33-0] INFO keyvalue.KeyValueHandler: Operation: CreateContainer , Trace ID: fe6f5b05ae33d9ce:a58d8d0f471d9027:fe6f5b05ae33d9ce:0 , Message: Container creation failed, due to disk out of space , Result: DISK_OUT_OF_SPACE , StorageContainerException Occurred.
datanode_1  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.lambda$groupManagement$0(GrpcAdminProtocolService.java:42)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
datanode_2  | 	at org.apache.ratis.thirdparty.io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:930)
datanode_3  | org.apache.hadoop.hdds.scm.container.common.helpers.StorageContainerException: Container creation failed, due to disk out of space
datanode_1  | 	at org.apache.ratis.grpc.GrpcUtil.asyncCall(GrpcUtil.java:160)
datanode_1  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.groupManagement(GrpcAdminProtocolService.java:42)
datanode_2  | 	at org.apache.ratis.thirdparty.io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:163)
datanode_1  | 	at org.apache.ratis.proto.grpc.AdminProtocolServiceGrpc$MethodHandlers.invoke(AdminProtocolServiceGrpc.java:358)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.destroyPipeline(SCMPipelineManager.java:579)
datanode_3  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueContainer.create(KeyValueContainer.java:165)
datanode_2  | 	at org.apache.ratis.thirdparty.io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:697)
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:172)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
datanode_3  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.handleCreateContainer(KeyValueHandler.java:247)
datanode_2  | 	at org.apache.ratis.thirdparty.io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:632)
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:331)
scm_1       | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
datanode_3  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.dispatchRequest(KeyValueHandler.java:164)
datanode_2  | 	at org.apache.ratis.thirdparty.io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:549)
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:814)
scm_1       | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
datanode_3  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueHandler.handle(KeyValueHandler.java:152)
datanode_2  | 	at org.apache.ratis.thirdparty.io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:511)
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
scm_1       | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.createContainer(HddsDispatcher.java:414)
datanode_2  | 	at org.apache.ratis.thirdparty.io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:918)
datanode_1  | 	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:123)
scm_1       | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatchRequest(HddsDispatcher.java:250)
datanode_2  | 	at org.apache.ratis.thirdparty.io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
datanode_1  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatch(HddsDispatcher.java:162)
datanode_2  | 	at org.apache.ratis.thirdparty.io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
datanode_1  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.dispatchCommand(ContainerStateMachine.java:402)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_1  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.runCommand(ContainerStateMachine.java:412)
datanode_2  | 
datanode_1  | Caused by: org.apache.ratis.protocol.AlreadyExistsException: 0086d012-6f96-4817-8e1b-94f6eaa443bc: Failed to add group-A6E7E3010649:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
scm_1       | 2020-04-17 18:33:31,008 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=9b787585-8415-4999-b60e-0b128664579e close command to datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.lambda$handleWriteChunk$2(ContainerStateMachine.java:447)
datanode_2  | 2020-04-17 18:33:56,118 [grpc-default-executor-9] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: addNew group-A6E7E3010649:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] returns group-A6E7E3010649:java.util.concurrent.CompletableFuture@4e34ff01[Not completed]
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy$ImplMap.addNew(RaftServerProxy.java:83)
scm_1       | 2020-04-17 18:33:31,008 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=9b787585-8415-4999-b60e-0b128664579e close command to datanode 3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
datanode_2  | 2020-04-17 18:33:56,120 [pool-70-thread-1] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689: new RaftServerImpl for group-A6E7E3010649:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] with ContainerStateMachine:uninitialized
datanode_1  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:378)
scm_1       | 2020-04-17 18:33:31,008 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=9b787585-8415-4999-b60e-0b128664579e close command to datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_3  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_2  | 2020-04-17 18:33:56,122 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.min = 5s (custom)
datanode_1  | 	... 13 more
scm_1       | 2020-04-17 18:33:31,008 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 9b787585-8415-4999-b60e-0b128664579e, Nodes: f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:31:34.015375Z]
datanode_3  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_2  | 2020-04-17 18:33:56,122 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.max = 5200ms (custom)
datanode_1  | 2020-04-17 18:34:01,069 [grpc-default-executor-3] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-A6E7E3010649: changes role from  FOLLOWER to FOLLOWER at term 1 for recognizeCandidate:3989634e-60c9-4e5a-8523-9408dc0a802d
scm_1       | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=9b787585-8415-4999-b60e-0b128664579e not found
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 2020-04-17 18:33:56,122 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpcslowness.timeout = 300s (custom)
datanode_1  | 2020-04-17 18:34:01,069 [grpc-default-executor-3] INFO impl.RoleInfo: 0086d012-6f96-4817-8e1b-94f6eaa443bc: shutdown FollowerState
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_3  | Caused by: org.apache.hadoop.util.DiskChecker$DiskOutOfSpaceException: Out of space: The volume with the most available space (=496676864 B) is less than the container size (=1073741824 B).
datanode_2  | 2020-04-17 18:33:56,122 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.sleep.deviation.threshold = 300 (default)
datanode_1  | 2020-04-17 18:34:01,069 [grpc-default-executor-3] INFO impl.RoleInfo: 0086d012-6f96-4817-8e1b-94f6eaa443bc: start FollowerState
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.volume.RoundRobinVolumeChoosingPolicy.chooseVolume(RoundRobinVolumeChoosingPolicy.java:77)
datanode_2  | 2020-04-17 18:33:56,122 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.install.snapshot.enabled = false (custom)
datanode_1  | 2020-04-17 18:34:01,069 [Thread-315] INFO impl.FollowerState: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-A6E7E3010649-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
datanode_2  | 2020-04-17 18:33:56,122 [pool-70-thread-1] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-A6E7E3010649: ConfigurationManager, init=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null, confs=<EMPTY_MAP>
datanode_1  | 2020-04-17 18:34:01,093 [grpc-default-executor-3] INFO ratis.XceiverServerRatis: Leader change notification received for group: group-A6E7E3010649 with new leaderId: 3989634e-60c9-4e5a-8523-9408dc0a802d
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.destroyPipeline(SCMPipelineManager.java:579)
datanode_3  | 	at org.apache.hadoop.ozone.container.keyvalue.KeyValueContainer.create(KeyValueContainer.java:124)
datanode_2  | 2020-04-17 18:33:56,123 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.storage.dir = [/data/metadata/ratis] (custom)
datanode_1  | 2020-04-17 18:34:01,099 [grpc-default-executor-3] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-A6E7E3010649: change Leader from null to 3989634e-60c9-4e5a-8523-9408dc0a802d at term 1 for appendEntries, leader elected after 5090ms
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
datanode_3  | 	... 13 more
datanode_2  | 2020-04-17 18:33:56,123 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.corruption.policy = EXCEPTION (default)
scm_1       | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
datanode_1  | 2020-04-17 18:34:01,112 [grpc-default-executor-3] INFO impl.RaftServerImpl: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-A6E7E3010649: set configuration 0: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null at 0
datanode_1  | 2020-04-17 18:34:01,113 [grpc-default-executor-3] INFO segmented.SegmentedRaftLogWorker: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-A6E7E3010649-SegmentedRaftLogWorker: Starting segment from index:0
datanode_2  | 2020-04-17 18:33:56,123 [pool-70-thread-1] INFO storage.RaftStorageDirectory: The storage directory /data/metadata/ratis/231f977e-34fb-4c22-81db-a6e7e3010649 does not exist. Creating ...
scm_1       | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
datanode_1  | 2020-04-17 18:34:01,120 [0086d012-6f96-4817-8e1b-94f6eaa443bc@group-A6E7E3010649-SegmentedRaftLogWorker] INFO segmented.SegmentedRaftLogWorker: 0086d012-6f96-4817-8e1b-94f6eaa443bc@group-A6E7E3010649-SegmentedRaftLogWorker: created new log segment /data/metadata/ratis/231f977e-34fb-4c22-81db-a6e7e3010649/current/log_inprogress_0
datanode_3  | 2020-04-17 18:32:24,885 [ChunkWriter-33-0] INFO impl.HddsDispatcher: Operation: WriteChunk , Trace ID: fe6f5b05ae33d9ce:a58d8d0f471d9027:fe6f5b05ae33d9ce:0 , Message: ContainerID 5 creation failed , Result: DISK_OUT_OF_SPACE , StorageContainerException Occurred.
datanode_2  | 2020-04-17 18:33:56,124 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.log_worker.f2e775cd-89a9-41b5-a9e0-4408e0d60689
scm_1       | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_2  | 2020-04-17 18:33:56,124 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.leader_election.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E
scm_1       | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
datanode_3  | org.apache.hadoop.hdds.scm.container.common.helpers.StorageContainerException: ContainerID 5 creation failed
datanode_2  | 2020-04-17 18:33:56,124 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.server.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-0B128664579E
datanode_2  | 2020-04-17 18:33:56,124 [grpc-default-executor-9] WARN impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Failed groupAdd* GroupManagementRequest:client-F3CE4017EDF9->f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-A6E7E3010649, cid=9, seq=0, RW, null, Add:group-A6E7E3010649:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858]
datanode_3  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatchRequest(HddsDispatcher.java:254)
datanode_2  | java.util.concurrent.CompletionException: org.apache.ratis.protocol.AlreadyExistsException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Failed to add group-A6E7E3010649:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.impl.HddsDispatcher.dispatch(HddsDispatcher.java:162)
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.dispatchCommand(ContainerStateMachine.java:402)
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyNow(CompletableFuture.java:670)
scm_1       | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.runCommand(ContainerStateMachine.java:412)
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyStage(CompletableFuture.java:658)
scm_1       | 2020-04-17 18:33:31,009 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=9b787585-8415-4999-b60e-0b128664579e close command to datanode f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.lambda$handleWriteChunk$2(ContainerStateMachine.java:447)
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.thenApplyAsync(CompletableFuture.java:2104)
scm_1       | 2020-04-17 18:33:31,009 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=9b787585-8415-4999-b60e-0b128664579e close command to datanode 3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:379)
scm_1       | 2020-04-17 18:33:31,009 [RatisPipelineUtilsThread] INFO pipeline.RatisPipelineProvider: Send pipeline:PipelineID=9b787585-8415-4999-b60e-0b128664579e close command to datanode 0086d012-6f96-4817-8e1b-94f6eaa443bc
datanode_3  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:363)
scm_1       | 2020-04-17 18:33:31,009 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Destroy pipeline failed for pipeline:Pipeline[ Id: 9b787585-8415-4999-b60e-0b128664579e, Nodes: f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:CLOSED, leaderId:f2e775cd-89a9-41b5-a9e0-4408e0d60689, CreationTimestamp2020-04-17T18:31:34.015375Z]
datanode_3  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_2  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.lambda$groupManagement$0(GrpcAdminProtocolService.java:42)
scm_1       | org.apache.hadoop.hdds.scm.pipeline.PipelineNotFoundException: PipelineID=9b787585-8415-4999-b60e-0b128664579e not found
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 	at org.apache.ratis.grpc.GrpcUtil.asyncCall(GrpcUtil.java:160)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.getPipeline(PipelineStateMap.java:133)
datanode_3  | 2020-04-17 18:32:24,885 [ChunkWriter-33-0] ERROR ratis.ContainerStateMachine: group-0B128664579E: writeChunk writeStateMachineData failed: blockIdcontainerID: 5
datanode_2  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.groupManagement(GrpcAdminProtocolService.java:42)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateMap.removePipeline(PipelineStateMap.java:323)
datanode_3  | localID: 104015353852657668
datanode_2  | 	at org.apache.ratis.proto.grpc.AdminProtocolServiceGrpc$MethodHandlers.invoke(AdminProtocolServiceGrpc.java:358)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineStateManager.removePipeline(PipelineStateManager.java:104)
datanode_3  | blockCommitSequenceId: 0
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:172)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.removePipeline(SCMPipelineManager.java:595)
datanode_3  |  logIndex 1 chunkName 104015353852657668_chunk_1 Error message: ContainerID 5 creation failed Container Result: DISK_OUT_OF_SPACE
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:331)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.destroyPipeline(SCMPipelineManager.java:579)
datanode_3  | 2020-04-17 18:32:24,886 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E-SegmentedRaftLogWorker] ERROR ratis.XceiverServerRatis: pipeline Action CLOSE on pipeline PipelineID=9b787585-8415-4999-b60e-0b128664579e.Reason : ContainerID 5 creation failed
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:814)
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.lambda$finalizeAndDestroyPipeline$0(SCMPipelineManager.java:422)
datanode_3  | 2020-04-17 18:32:24,973 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E-SegmentedRaftLogWorker] ERROR ratis.XceiverServerRatis: pipeline Action CLOSE on pipeline PipelineID=9b787585-8415-4999-b60e-0b128664579e.Reason : Log already failed at index 1 for task WriteLog:1: (t:1, i:1), STATEMACHINELOGENTRY, client-8004DCD339EA, cid=1
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
scm_1       | 	at org.apache.hadoop.hdds.utils.Scheduler.lambda$schedule$1(Scheduler.java:70)
datanode_3  | 	 State Machine: cmdType: WriteChunk traceID: "fe6f5b05ae33d9ce:a58d8d0f471d9027:fe6f5b05ae33d9ce:0" containerID: 5 datanodeUuid: "f2e775cd-89a9-41b5-a9e0-4408e0d60689" pipelineID: "9b787585-8415-4999-b60e-0b128664579e" writeChunk { blockID { containerID: 5 localID: 104015353852657668 blockCommitSequenceId: 0 } chunkData { chunkName: "104015353852657668_chunk_1" offset: 0 len: 17540 checksumData { type: CRC32 bytesPerChecksum: 1048576 checksums: " wi\267" } } } encodedToken: "TgoEcm9vdBIiY29uSUQ6IDUgbG9jSUQ6IDEwNDAxNTM1Mzg1MjY1NzY2OBiVy8D0mC4iDTYxMTM3NDA2OTEzMTEoASgCKAMoBDCAgICAAY4BAIVrtE3T_uceqiSS6B49Ag_PoU78fSa7F3bkouiLbFZ_HsaMv1fJcvbYg2dqh4bi5zDC6wy-ztgeYRmvj4LQ8zVuN4QiPxMXEXycN2DUxpVyciRh2Jtd1eStrPcgZM8QUqtiwhWm4I-FRQIfv-jpnO43Xxcn9PERqzvMCNg7ejEEOnW9H4ryoH6yXScEWklMBkCUShdkUm_bulspoven7H4fq_PE6e9LZiFR_0uPNxL11HvSQSolBEStiajK2WFnT7hNN_7aaemzdP95JuOKRWqKil1YMZ9U-xZdlZK6CyqZrnZmLMxzsEh2PDYR5OYg9UoKa4xOhUkUdbVc3YzmxOQQSEREU19CTE9DS19UT0tFTiJjb25JRDogNSBsb2NJRDogMTA0MDE1MzUzODUyNjU3NjY4", container path=nonexistent
datanode_2  | 	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:123)
scm_1       | 	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
datanode_3  | 2020-04-17 18:32:30,052 [Command processor thread] ERROR commandhandler.CloseContainerCommandHandler: Container #5 does not exist in datanode. Container close failed.
datanode_2  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
scm_1       | 	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
datanode_3  | 2020-04-17 18:33:55,976 [Command processor thread] INFO impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: remove  FOLLOWER 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E:t1, leader=f2e775cd-89a9-41b5-a9e0-4408e0d60689, voted=null, raftlog=3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E-SegmentedRaftLog:OPENED:c0,f0,i2, conf=0: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null RUNNING
datanode_2  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
scm_1       | 	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
datanode_3  | 2020-04-17 18:33:55,976 [Command processor thread] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E: shutdown
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_3  | 2020-04-17 18:33:55,976 [Command processor thread] INFO util.JmxRegister: Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-0B128664579E,id=3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_2  | Caused by: org.apache.ratis.protocol.AlreadyExistsException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Failed to add group-A6E7E3010649:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
scm_1       | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_3  | 2020-04-17 18:33:55,976 [Command processor thread] INFO impl.RoleInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d: shutdown FollowerState
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy$ImplMap.addNew(RaftServerProxy.java:83)
scm_1       | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 2020-04-17 18:33:55,976 [Command processor thread] INFO impl.StateMachineUpdater: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E-StateMachineUpdater: set stopIndex = 0
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:378)
scm_1       | 2020-04-17 18:33:42,608 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Failed to create pipeline of type RATIS and factor ONE. Exception: Cannot create pipeline of factor 1 using 0 nodes. Used 3 nodes. Healthy nodes 3
datanode_3  | 2020-04-17 18:33:55,977 [Thread-261] INFO impl.FollowerState: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
datanode_2  | 	... 13 more
scm_1       | 2020-04-17 18:33:42,609 [RatisPipelineUtilsThread] ERROR pipeline.SCMPipelineManager: Failed to create pipeline of type RATIS and factor THREE. Exception: Pipeline creation failed because nodes are engaged in other pipelines and every node can only be engaged in max 2 pipelines. Required 3. Found 0
datanode_3  | 2020-04-17 18:33:55,977 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E-StateMachineUpdater] ERROR ratis.ContainerStateMachine: Failed to take snapshot  for group-0B128664579E as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
datanode_2  | 2020-04-17 18:33:56,125 [pool-70-thread-1] INFO storage.RaftStorageDirectory: Lock on /data/metadata/ratis/231f977e-34fb-4c22-81db-a6e7e3010649/in_use.lock acquired by nodename 6@d4ddc26437df
scm_1       | 2020-04-17 18:33:45,893 [Socket Reader #1 for port 9860] INFO ipc.Server: Auth successful for recon/recon@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 2020-04-17 18:33:55,980 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E-StateMachineUpdater] ERROR impl.StateMachineUpdater: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E-StateMachineUpdater: Failed to take snapshot
datanode_2  | 2020-04-17 18:33:56,125 [Command processor thread] INFO commandhandler.ClosePipelineCommandHandler: Close Pipeline #id: "9b787585-8415-4999-b60e-0b128664579e"
scm_1       | 2020-04-17 18:33:45,899 [Socket Reader #1 for port 9860] INFO authorize.ServiceAuthorizationManager: Authorization successful for recon/recon@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocol
datanode_3  | org.apache.ratis.protocol.StateMachineException: Failed to take snapshot  for group-0B128664579E as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.takeSnapshot(ContainerStateMachine.java:288)
datanode_3  | 	at org.apache.ratis.server.impl.StateMachineUpdater.takeSnapshot(StateMachineUpdater.java:258)
datanode_3  | 	at org.apache.ratis.server.impl.StateMachineUpdater.checkAndTakeSnapshot(StateMachineUpdater.java:250)
datanode_3  | 	at org.apache.ratis.server.impl.StateMachineUpdater.run(StateMachineUpdater.java:169)
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 2020-04-17 18:33:55,980 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E-StateMachineUpdater] ERROR ratis.ContainerStateMachine: Failed to take snapshot  for group-0B128664579E as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
scm_1       | 2020-04-17 18:33:54,990 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 2020-04-17 18:33:55,980 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E-StateMachineUpdater] ERROR impl.StateMachineUpdater: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E-StateMachineUpdater: Failed to take snapshot
datanode_2  |  command on datanode #f2e775cd-89a9-41b5-a9e0-4408e0d60689.
datanode_2  | 2020-04-17 18:33:56,126 [Command processor thread] WARN impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Failed groupAdd* GroupManagementRequest:client-7530433113E6->f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-A6E7E3010649, cid=33, seq=0, RW, null, Add:group-A6E7E3010649:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858]
datanode_3  | org.apache.ratis.protocol.StateMachineException: Failed to take snapshot  for group-0B128664579E as the stateMachine is unhealthy. The last applied index is at (t:1, i:0)
datanode_2  | java.util.concurrent.CompletionException: org.apache.ratis.protocol.AlreadyExistsException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Failed to add group-A6E7E3010649:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
scm_1       | 2020-04-17 18:33:54,997 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/9dd073498a2e@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.ContainerStateMachine.takeSnapshot(ContainerStateMachine.java:288)
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
scm_1       | 2020-04-17 18:33:55,028 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 	at org.apache.ratis.server.impl.StateMachineUpdater.takeSnapshot(StateMachineUpdater.java:258)
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyNow(CompletableFuture.java:670)
scm_1       | 2020-04-17 18:33:55,043 [Socket Reader #1 for port 9861] INFO ipc.Server: Auth successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 	at org.apache.ratis.server.impl.StateMachineUpdater.checkAndTakeSnapshot(StateMachineUpdater.java:250)
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyStage(CompletableFuture.java:658)
scm_1       | 2020-04-17 18:33:55,055 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/1e870b3d5d4c@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_3  | 	at org.apache.ratis.server.impl.StateMachineUpdater.run(StateMachineUpdater.java:172)
datanode_2  | 	at java.base/java.util.concurrent.CompletableFuture.thenApplyAsync(CompletableFuture.java:2104)
scm_1       | 2020-04-17 18:33:55,087 [Socket Reader #1 for port 9861] INFO authorize.ServiceAuthorizationManager: Authorization successful for dn/d4ddc26437df@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.ozone.protocol.StorageContainerDatanodeProtocol
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:379)
scm_1       | 2020-04-17 18:33:57,136 [Socket Reader #1 for port 9863] INFO ipc.Server: Auth successful for om/om@EXAMPLE.COM (auth:KERBEROS)
datanode_3  | 2020-04-17 18:33:55,981 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E-StateMachineUpdater] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.state_machine.3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:363)
datanode_3  | 2020-04-17 18:33:55,981 [Command processor thread] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E: closes. applyIndex: 0
scm_1       | 2020-04-17 18:33:57,146 [Socket Reader #1 for port 9863] INFO authorize.ServiceAuthorizationManager: Authorization successful for om/om@EXAMPLE.COM (auth:KERBEROS) for protocol=interface org.apache.hadoop.hdds.scm.protocol.ScmBlockLocationProtocol
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_3  | 2020-04-17 18:33:55,981 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E-SegmentedRaftLogWorker] INFO segmented.SegmentedRaftLogWorker: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
scm_1       | 2020-04-17 18:33:57,146 [IPC Server handler 1 on 9863] ERROR pipeline.SCMPipelineManager: Failed to create pipeline of type RATIS and factor THREE. Exception: Pipeline creation failed because nodes are engaged in other pipelines and every node can only be engaged in max 2 pipelines. Required 3. Found 0
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.addGroup(XceiverServerRatis.java:640)
datanode_3  | 2020-04-17 18:33:55,991 [grpc-default-executor-2] INFO server.GrpcServerProtocolService: 3989634e-60c9-4e5a-8523-9408dc0a802d: Completed APPEND_ENTRIES, lastRequest: f2e775cd-89a9-41b5-a9e0-4408e0d60689->3989634e-60c9-4e5a-8523-9408dc0a802d#11-t1, previous=(t:1, i:1), leaderCommit=0, initializing? false, entries: size=1, first=(t:1, i:2), STATEMACHINELOGENTRY, client-8004DCD339EA, cid=2
scm_1       | 2020-04-17 18:33:57,146 [IPC Server handler 1 on 9863] WARN block.BlockManagerImpl: Pipeline creation failed for type:RATIS factor:THREE. Datanodes may be used up.
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CreatePipelineCommandHandler.handle(CreatePipelineCommandHandler.java:99)
datanode_3  | 2020-04-17 18:33:55,993 [Command processor thread] INFO segmented.SegmentedRaftLogWorker: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E-SegmentedRaftLogWorker close()
scm_1       | org.apache.hadoop.hdds.scm.exceptions.SCMException: Pipeline creation failed because nodes are engaged in other pipelines and every node can only be engaged in max 2 pipelines. Required 3. Found 0
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_3  | 2020-04-17 18:33:55,994 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.log_worker.3989634e-60c9-4e5a-8523-9408dc0a802d
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.filterViableNodes(PipelinePlacementPolicy.java:173)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_3  | 2020-04-17 18:33:55,994 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.leader_election.3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelinePlacementPolicy.chooseDatanodes(PipelinePlacementPolicy.java:196)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 2020-04-17 18:33:55,994 [Command processor thread] INFO metrics.RatisMetrics: Unregistering Metrics Registry : ratis.server.3989634e-60c9-4e5a-8523-9408dc0a802d@group-0B128664579E
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.RatisPipelineProvider.create(RatisPipelineProvider.java:116)
datanode_2  | Caused by: org.apache.ratis.protocol.AlreadyExistsException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Failed to add group-A6E7E3010649:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
datanode_3  | 2020-04-17 18:33:55,995 [Command processor thread] INFO commandhandler.ClosePipelineCommandHandler: Close Pipeline #id: "9b787585-8415-4999-b60e-0b128664579e"
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.PipelineFactory.create(PipelineFactory.java:63)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy$ImplMap.addNew(RaftServerProxy.java:83)
datanode_3  |  command on datanode #3989634e-60c9-4e5a-8523-9408dc0a802d.
scm_1       | 	at org.apache.hadoop.hdds.scm.pipeline.SCMPipelineManager.createPipeline(SCMPipelineManager.java:232)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:378)
datanode_3  | 2020-04-17 18:33:55,996 [Command processor thread] INFO impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: addNew group-A6E7E3010649:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] returns group-A6E7E3010649:java.util.concurrent.CompletableFuture@2d1fede[Not completed]
scm_1       | 	at org.apache.hadoop.hdds.scm.block.BlockManagerImpl.allocateBlock(BlockManagerImpl.java:200)
datanode_2  | 	... 7 more
datanode_3  | 2020-04-17 18:33:55,997 [pool-70-thread-1] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d: new RaftServerImpl for group-A6E7E3010649:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] with ContainerStateMachine:uninitialized
scm_1       | 	at org.apache.hadoop.hdds.scm.server.SCMBlockProtocolServer.allocateBlock(SCMBlockProtocolServer.java:190)
datanode_2  | 2020-04-17 18:33:56,126 [Command processor thread] ERROR commandhandler.CreatePipelineCommandHandler: Can't create pipeline RATIS THREE #id: "231f977e-34fb-4c22-81db-a6e7e3010649"
datanode_3  | 2020-04-17 18:33:55,998 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.min = 5s (custom)
scm_1       | 	at org.apache.hadoop.hdds.scm.protocol.ScmBlockLocationProtocolServerSideTranslatorPB.allocateScmBlock(ScmBlockLocationProtocolServerSideTranslatorPB.java:161)
datanode_2  | 
datanode_3  | 2020-04-17 18:33:55,998 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpc.timeout.max = 5200ms (custom)
scm_1       | 	at org.apache.hadoop.hdds.scm.protocol.ScmBlockLocationProtocolServerSideTranslatorPB.processMessage(ScmBlockLocationProtocolServerSideTranslatorPB.java:119)
datanode_2  | java.io.IOException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Failed to add group-A6E7E3010649:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
datanode_3  | 2020-04-17 18:33:55,998 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.rpcslowness.timeout = 300s (custom)
scm_1       | 	at org.apache.hadoop.hdds.server.OzoneProtocolMessageDispatcher.processRequest(OzoneProtocolMessageDispatcher.java:75)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.addGroup(XceiverServerRatis.java:642)
datanode_3  | 2020-04-17 18:33:55,998 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.sleep.deviation.threshold = 300 (default)
scm_1       | 	at org.apache.hadoop.hdds.scm.protocol.ScmBlockLocationProtocolServerSideTranslatorPB.send(ScmBlockLocationProtocolServerSideTranslatorPB.java:100)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CreatePipelineCommandHandler.handle(CreatePipelineCommandHandler.java:99)
datanode_3  | 2020-04-17 18:33:55,998 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.install.snapshot.enabled = false (custom)
scm_1       | 	at org.apache.hadoop.hdds.protocol.proto.ScmBlockLocationProtocolProtos$ScmBlockLocationProtocolService$2.callBlockingMethod(ScmBlockLocationProtocolProtos.java:13157)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_3  | 2020-04-17 18:33:55,998 [pool-70-thread-1] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649: ConfigurationManager, init=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null, confs=<EMPTY_MAP>
scm_1       | 	at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:524)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_3  | 2020-04-17 18:33:55,998 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.storage.dir = [/data/metadata/ratis] (custom)
scm_1       | 	at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1025)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 2020-04-17 18:33:55,999 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.corruption.policy = EXCEPTION (default)
scm_1       | 	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:876)
datanode_2  | Caused by: org.apache.ratis.protocol.AlreadyExistsException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Failed to add group-A6E7E3010649:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
datanode_3  | 2020-04-17 18:33:55,999 [pool-70-thread-1] INFO storage.RaftStorageDirectory: The storage directory /data/metadata/ratis/231f977e-34fb-4c22-81db-a6e7e3010649 does not exist. Creating ...
scm_1       | 	at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:822)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy$ImplMap.addNew(RaftServerProxy.java:83)
datanode_3  | 2020-04-17 18:33:56,002 [pool-70-thread-1] INFO storage.RaftStorageDirectory: Lock on /data/metadata/ratis/231f977e-34fb-4c22-81db-a6e7e3010649/in_use.lock acquired by nodename 6@9dd073498a2e
scm_1       | 	at java.base/java.security.AccessController.doPrivileged(Native Method)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:378)
datanode_3  | 2020-04-17 18:33:56,009 [pool-70-thread-1] INFO storage.RaftStorage: Storage directory /data/metadata/ratis/231f977e-34fb-4c22-81db-a6e7e3010649 has been successfully formatted.
scm_1       | 	at java.base/javax.security.auth.Subject.doAs(Subject.java:423)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:363)
datanode_3  | 2020-04-17 18:33:56,009 [pool-70-thread-1] INFO ratis.ContainerStateMachine: group-A6E7E3010649: The snapshot info is null. Setting the last applied indexto:(t:0, i:~)
scm_1       | 	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1730)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_3  | 2020-04-17 18:33:56,010 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.notification.no-leader.timeout = 60s (default)
scm_1       | 	at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2682)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.addGroup(XceiverServerRatis.java:640)
datanode_3  | 2020-04-17 18:33:56,012 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.use.memory = false (default)
scm_1       | 2020-04-17 18:33:57,147 [IPC Server handler 1 on 9863] ERROR block.BlockManagerImpl: Unable to allocate a block for the size: 268435456, type: RATIS, factor: THREE
datanode_2  | 	... 4 more
datanode_3  | 2020-04-17 18:33:56,015 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.purge.gap = 1000000 (custom)
scm_1       | 2020-04-17 18:34:01,088 [EventQueue-PipelineReportForPipelineReportHandler] INFO pipeline.PipelineStateManager: Pipeline Pipeline[ Id: 231f977e-34fb-4c22-81db-a6e7e3010649, Nodes: 3989634e-60c9-4e5a-8523-9408dc0a802d{ip: 172.24.0.10, host: ozonesecure_datanode_3.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}f2e775cd-89a9-41b5-a9e0-4408e0d60689{ip: 172.24.0.9, host: ozonesecure_datanode_2.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}0086d012-6f96-4817-8e1b-94f6eaa443bc{ip: 172.24.0.5, host: ozonesecure_datanode_1.ozonesecure_default, networkLocation: /default-rack, certSerialId: null}, Type:RATIS, Factor:THREE, State:ALLOCATED, leaderId:3989634e-60c9-4e5a-8523-9408dc0a802d, CreationTimestamp2020-04-17T18:33:30.981435Z] moved to OPEN state
datanode_2  | 2020-04-17 18:33:56,126 [Command processor thread] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: remove group-0B128664579E:null
datanode_3  | 2020-04-17 18:33:56,015 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
datanode_3  | 2020-04-17 18:33:56,015 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
datanode_2  | 2020-04-17 18:33:56,126 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "9b787585-8415-4999-b60e-0b128664579e"
datanode_2  | 
datanode_3  | 2020-04-17 18:33:56,015 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.log_worker.3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_2  | java.io.IOException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-0B128664579E not found.
datanode_3  | 2020-04-17 18:33:56,016 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.cache.num.max = 2 (custom)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_3  | 2020-04-17 18:33:56,016 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: new 3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649-SegmentedRaftLogWorker for RaftStorage:Storage Directory /data/metadata/ratis/231f977e-34fb-4c22-81db-a6e7e3010649
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_3  | 2020-04-17 18:33:56,016 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.byte-limit = 2147483647 (custom)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_3  | 2020-04-17 18:33:56,016 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.element-limit = 1024 (custom)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_3  | 2020-04-17 18:33:56,017 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 2020-04-17 18:33:56,017 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.preallocated.size = 16384 (custom)
datanode_2  | Caused by: org.apache.ratis.protocol.GroupMismatchException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-0B128664579E not found.
datanode_3  | 2020-04-17 18:33:56,017 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.write.buffer.size = 1048576 (custom)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_3  | 2020-04-17 18:33:56,017 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.force.sync.num = 128 (default)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_3  | 2020-04-17 18:33:56,018 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync = true (default)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_3  | 2020-04-17 18:33:56,018 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout = 10s (default)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_3  | 2020-04-17 18:33:56,018 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
datanode_2  | 	... 4 more
datanode_3  | 2020-04-17 18:33:56,020 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.caching.enabled = true (custom)
datanode_2  | 2020-04-17 18:33:56,126 [Command processor thread] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: remove group-0B128664579E:null
datanode_3  | 2020-04-17 18:33:56,022 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
datanode_2  | 2020-04-17 18:33:56,127 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "9b787585-8415-4999-b60e-0b128664579e"
datanode_3  | 2020-04-17 18:33:56,023 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.enabled = true (custom)
datanode_2  | 
datanode_3  | 2020-04-17 18:33:56,023 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
datanode_2  | java.io.IOException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-0B128664579E not found.
datanode_3  | 2020-04-17 18:33:56,023 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.retention.file.num = 5 (custom)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_3  | 2020-04-17 18:33:56,023 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.retrycache.expirytime = 600000ms (custom)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_3  | 2020-04-17 18:33:56,024 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.leader_election.3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_3  | 2020-04-17 18:33:56,024 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.server.3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_3  | 2020-04-17 18:33:56,025 [pool-70-thread-1] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649: start as a follower, conf=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 2020-04-17 18:33:56,025 [pool-70-thread-1] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649: changes role from      null to FOLLOWER at term 0 for startAsFollower
datanode_2  | Caused by: org.apache.ratis.protocol.GroupMismatchException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-0B128664579E not found.
datanode_3  | 2020-04-17 18:33:56,027 [pool-70-thread-1] INFO impl.RoleInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d: start FollowerState
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_3  | 2020-04-17 18:33:56,034 [pool-70-thread-1] INFO util.JmxRegister: Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-A6E7E3010649,id=3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_3  | 2020-04-17 18:33:56,034 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.state_machine.3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_3  | 2020-04-17 18:33:56,061 [grpc-default-executor-2] WARN impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: Failed groupAdd* GroupManagementRequest:client-1463FC07848F->3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649, cid=8, seq=0, RW, null, Add:group-A6E7E3010649:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858]
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_3  | java.util.concurrent.CompletionException: org.apache.ratis.protocol.AlreadyExistsException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Failed to add group-A6E7E3010649:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
datanode_2  | 	... 4 more
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyNow(CompletableFuture.java:670)
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture.uniApplyStage(CompletableFuture.java:658)
datanode_3  | 	at java.base/java.util.concurrent.CompletableFuture.thenApplyAsync(CompletableFuture.java:2104)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:379)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:363)
datanode_3  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.lambda$groupManagement$0(GrpcAdminProtocolService.java:42)
datanode_3  | 	at org.apache.ratis.grpc.GrpcUtil.asyncCall(GrpcUtil.java:160)
datanode_3  | 	at org.apache.ratis.grpc.server.GrpcAdminProtocolService.groupManagement(GrpcAdminProtocolService.java:42)
datanode_3  | 	at org.apache.ratis.proto.grpc.AdminProtocolServiceGrpc$MethodHandlers.invoke(AdminProtocolServiceGrpc.java:358)
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:172)
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:331)
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:814)
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
datanode_3  | 	at org.apache.ratis.thirdparty.io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:123)
datanode_3  | 	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
datanode_3  | 	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | Caused by: org.apache.ratis.protocol.AlreadyExistsException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Failed to add group-A6E7E3010649:[0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858] since the group already exists in the map.
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy$ImplMap.addNew(RaftServerProxy.java:83)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupAddAsync(RaftServerProxy.java:378)
datanode_3  | 	... 13 more
datanode_3  | 2020-04-17 18:33:56,176 [Command processor thread] INFO commandhandler.CreatePipelineCommandHandler: Created Pipeline RATIS THREE #id: "231f977e-34fb-4c22-81db-a6e7e3010649"
datanode_3  | .
datanode_3  | 2020-04-17 18:33:56,177 [Command processor thread] INFO impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: remove group-0B128664579E:null
datanode_3  | 2020-04-17 18:33:56,177 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "9b787585-8415-4999-b60e-0b128664579e"
datanode_3  | 
datanode_3  | java.io.IOException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-0B128664579E not found.
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_2  | 2020-04-17 18:33:56,127 [Command processor thread] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: remove group-0B128664579E:null
datanode_2  | 2020-04-17 18:33:56,127 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "9b787585-8415-4999-b60e-0b128664579e"
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_2  | 
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_2  | java.io.IOException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-0B128664579E not found.
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_3  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-0B128664579E not found.
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_2  | Caused by: org.apache.ratis.protocol.GroupMismatchException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-0B128664579E not found.
datanode_3  | 	... 4 more
datanode_3  | 2020-04-17 18:33:56,177 [Command processor thread] INFO impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: remove group-0B128664579E:null
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_3  | 2020-04-17 18:33:56,177 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "9b787585-8415-4999-b60e-0b128664579e"
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_3  | 
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_3  | java.io.IOException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-0B128664579E not found.
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_2  | 	... 4 more
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_2  | 2020-04-17 18:33:56,127 [Command processor thread] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: remove group-0B128664579E:null
datanode_2  | 2020-04-17 18:33:56,127 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "9b787585-8415-4999-b60e-0b128664579e"
datanode_2  | 
datanode_2  | java.io.IOException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-0B128664579E not found.
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | Caused by: org.apache.ratis.protocol.GroupMismatchException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-0B128664579E not found.
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_2  | 	... 4 more
datanode_2  | 2020-04-17 18:33:56,128 [Command processor thread] INFO impl.RaftServerProxy: f2e775cd-89a9-41b5-a9e0-4408e0d60689: remove group-0B128664579E:null
datanode_2  | 2020-04-17 18:33:56,128 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "9b787585-8415-4999-b60e-0b128664579e"
datanode_2  | 
datanode_2  | java.io.IOException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-0B128664579E not found.
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_2  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_2  | Caused by: org.apache.ratis.protocol.GroupMismatchException: f2e775cd-89a9-41b5-a9e0-4408e0d60689: Group group-0B128664579E not found.
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_2  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_2  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_2  | 	... 4 more
datanode_2  | 2020-04-17 18:33:56,128 [pool-70-thread-1] INFO storage.RaftStorage: Storage directory /data/metadata/ratis/231f977e-34fb-4c22-81db-a6e7e3010649 has been successfully formatted.
datanode_2  | 2020-04-17 18:33:56,129 [pool-70-thread-1] INFO ratis.ContainerStateMachine: group-A6E7E3010649: The snapshot info is null. Setting the last applied indexto:(t:0, i:~)
datanode_2  | 2020-04-17 18:33:56,129 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.notification.no-leader.timeout = 60s (default)
datanode_2  | 2020-04-17 18:33:56,129 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.use.memory = false (default)
datanode_2  | 2020-04-17 18:33:56,130 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.purge.gap = 1000000 (custom)
datanode_2  | 2020-04-17 18:33:56,130 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
datanode_2  | 2020-04-17 18:33:56,130 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
datanode_2  | 2020-04-17 18:33:56,130 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.log_worker.f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_2  | 2020-04-17 18:33:56,130 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.cache.num.max = 2 (custom)
datanode_2  | 2020-04-17 18:33:56,130 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: new f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-A6E7E3010649-SegmentedRaftLogWorker for RaftStorage:Storage Directory /data/metadata/ratis/231f977e-34fb-4c22-81db-a6e7e3010649
datanode_2  | 2020-04-17 18:33:56,131 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.byte-limit = 2147483647 (custom)
datanode_2  | 2020-04-17 18:33:56,131 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.queue.element-limit = 1024 (custom)
datanode_2  | 2020-04-17 18:33:56,131 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.segment.size.max = 1048576 (custom)
datanode_2  | 2020-04-17 18:33:56,137 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.preallocated.size = 16384 (custom)
datanode_2  | 2020-04-17 18:33:56,137 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.write.buffer.size = 1048576 (custom)
datanode_2  | 2020-04-17 18:33:56,137 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.force.sync.num = 128 (default)
datanode_2  | 2020-04-17 18:33:56,137 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync = true (default)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_2  | 2020-04-17 18:33:56,137 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout = 10s (default)
datanode_2  | 2020-04-17 18:33:56,141 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
datanode_2  | 2020-04-17 18:33:56,142 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.log.statemachine.data.caching.enabled = true (custom)
datanode_2  | 2020-04-17 18:33:56,142 [pool-70-thread-1] INFO segmented.SegmentedRaftLogWorker: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-A6E7E3010649-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
datanode_2  | 2020-04-17 18:33:56,143 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.enabled = true (custom)
datanode_2  | 2020-04-17 18:33:56,143 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.auto.trigger.threshold = 10000 (custom)
datanode_2  | 2020-04-17 18:33:56,143 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.snapshot.retention.file.num = 5 (custom)
datanode_2  | 2020-04-17 18:33:56,143 [pool-70-thread-1] INFO server.RaftServerConfigKeys: raft.server.retrycache.expirytime = 600000ms (custom)
datanode_2  | 2020-04-17 18:33:56,144 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.leader_election.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-A6E7E3010649
datanode_2  | 2020-04-17 18:33:56,145 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.server.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-A6E7E3010649
datanode_2  | 2020-04-17 18:33:56,150 [pool-70-thread-1] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-A6E7E3010649: start as a follower, conf=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null
datanode_2  | 2020-04-17 18:33:56,150 [pool-70-thread-1] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-A6E7E3010649: changes role from      null to FOLLOWER at term 0 for startAsFollower
datanode_2  | 2020-04-17 18:33:56,150 [pool-70-thread-1] INFO impl.RoleInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689: start FollowerState
datanode_2  | 2020-04-17 18:33:56,153 [pool-70-thread-1] INFO util.JmxRegister: Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-A6E7E3010649,id=f2e775cd-89a9-41b5-a9e0-4408e0d60689
datanode_2  | 2020-04-17 18:33:56,153 [pool-70-thread-1] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.state_machine.f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-A6E7E3010649
datanode_2  | 2020-04-17 18:34:01,077 [grpc-default-executor-9] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-A6E7E3010649: changes role from  FOLLOWER to FOLLOWER at term 1 for recognizeCandidate:3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_2  | 2020-04-17 18:34:01,077 [grpc-default-executor-9] INFO impl.RoleInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689: shutdown FollowerState
datanode_2  | 2020-04-17 18:34:01,077 [grpc-default-executor-9] INFO impl.RoleInfo: f2e775cd-89a9-41b5-a9e0-4408e0d60689: start FollowerState
datanode_2  | 2020-04-17 18:34:01,077 [Thread-225] INFO impl.FollowerState: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-A6E7E3010649-FollowerState was interrupted: java.lang.InterruptedException: sleep interrupted
datanode_2  | 2020-04-17 18:34:01,098 [grpc-default-executor-9] INFO ratis.XceiverServerRatis: Leader change notification received for group: group-A6E7E3010649 with new leaderId: 3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_2  | 2020-04-17 18:34:01,098 [grpc-default-executor-9] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-A6E7E3010649: change Leader from null to 3989634e-60c9-4e5a-8523-9408dc0a802d at term 1 for appendEntries, leader elected after 4968ms
datanode_2  | 2020-04-17 18:34:01,101 [grpc-default-executor-9] INFO impl.RaftServerImpl: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-A6E7E3010649: set configuration 0: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null at 0
datanode_2  | 2020-04-17 18:34:01,101 [grpc-default-executor-9] INFO segmented.SegmentedRaftLogWorker: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-A6E7E3010649-SegmentedRaftLogWorker: Starting segment from index:0
datanode_2  | 2020-04-17 18:34:01,111 [f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-A6E7E3010649-SegmentedRaftLogWorker] INFO segmented.SegmentedRaftLogWorker: f2e775cd-89a9-41b5-a9e0-4408e0d60689@group-A6E7E3010649-SegmentedRaftLogWorker: created new log segment /data/metadata/ratis/231f977e-34fb-4c22-81db-a6e7e3010649/current/log_inprogress_0
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-0B128664579E not found.
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_3  | 	... 4 more
datanode_3  | 2020-04-17 18:33:56,177 [Command processor thread] INFO impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: remove group-0B128664579E:null
datanode_3  | 2020-04-17 18:33:56,177 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "9b787585-8415-4999-b60e-0b128664579e"
datanode_3  | 
datanode_3  | java.io.IOException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-0B128664579E not found.
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-0B128664579E not found.
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_3  | 	... 4 more
datanode_3  | 2020-04-17 18:33:56,179 [Command processor thread] INFO impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: remove group-0B128664579E:null
datanode_3  | 2020-04-17 18:33:56,179 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "9b787585-8415-4999-b60e-0b128664579e"
datanode_3  | 
datanode_3  | java.io.IOException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-0B128664579E not found.
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-0B128664579E not found.
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_3  | 	... 4 more
datanode_3  | 2020-04-17 18:33:56,180 [Command processor thread] INFO impl.RaftServerProxy: 3989634e-60c9-4e5a-8523-9408dc0a802d: remove group-0B128664579E:null
datanode_3  | 2020-04-17 18:33:56,180 [Command processor thread] ERROR commandhandler.ClosePipelineCommandHandler: Can't close pipeline #id: "9b787585-8415-4999-b60e-0b128664579e"
datanode_3  | 
datanode_3  | java.io.IOException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-0B128664579E not found.
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:659)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.ClosePipelineCommandHandler.handle(ClosePipelineCommandHandler.java:77)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.commandhandler.CommandDispatcher.handle(CommandDispatcher.java:99)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.statemachine.DatanodeStateMachine.lambda$initCommandHandlerThread$1(DatanodeStateMachine.java:472)
datanode_3  | 	at java.base/java.lang.Thread.run(Thread.java:834)
datanode_3  | Caused by: org.apache.ratis.protocol.GroupMismatchException: 3989634e-60c9-4e5a-8523-9408dc0a802d: Group group-0B128664579E not found.
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupRemoveAsync(RaftServerProxy.java:404)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagementAsync(RaftServerProxy.java:367)
datanode_3  | 	at org.apache.ratis.server.impl.RaftServerProxy.groupManagement(RaftServerProxy.java:350)
datanode_3  | 	at org.apache.hadoop.ozone.container.common.transport.server.ratis.XceiverServerRatis.removeGroup(XceiverServerRatis.java:657)
datanode_3  | 	... 4 more
datanode_3  | 2020-04-17 18:34:01,060 [Thread-319] INFO impl.FollowerState: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649-FollowerState: change to CANDIDATE, lastRpcTime:5032ms, electionTimeout:5024ms
datanode_3  | 2020-04-17 18:34:01,060 [Thread-319] INFO impl.RoleInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d: shutdown FollowerState
datanode_3  | 2020-04-17 18:34:01,060 [Thread-319] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
datanode_3  | 2020-04-17 18:34:01,060 [Thread-319] INFO impl.RoleInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d: start LeaderElection
datanode_3  | 2020-04-17 18:34:01,066 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649-LeaderElection6] INFO impl.LeaderElection: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649-LeaderElection6: begin an election at term 1 for -1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null
datanode_3  | 2020-04-17 18:34:01,082 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649-LeaderElection6] INFO impl.LeaderElection: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649-LeaderElection6: Election PASSED; received 1 response(s) [3989634e-60c9-4e5a-8523-9408dc0a802d<-0086d012-6f96-4817-8e1b-94f6eaa443bc#0:OK-t1] and 0 exception(s); 3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649:t1, leader=null, voted=3989634e-60c9-4e5a-8523-9408dc0a802d, raftlog=3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649-SegmentedRaftLog:OPENED:c-1,f-1,i0, conf=-1: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null
datanode_3  | 2020-04-17 18:34:01,082 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649-LeaderElection6] INFO impl.RoleInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d: shutdown LeaderElection
datanode_3  | 2020-04-17 18:34:01,082 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649-LeaderElection6] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
datanode_3  | 2020-04-17 18:34:01,082 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649-LeaderElection6] INFO ratis.XceiverServerRatis: Leader change notification received for group: group-A6E7E3010649 with new leaderId: 3989634e-60c9-4e5a-8523-9408dc0a802d
datanode_3  | 2020-04-17 18:34:01,082 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649-LeaderElection6] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649: change Leader from null to 3989634e-60c9-4e5a-8523-9408dc0a802d at term 1 for becomeLeader, leader elected after 5072ms
datanode_3  | 2020-04-17 18:34:01,082 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649-LeaderElection6] INFO server.RaftServerConfigKeys: raft.server.staging.catchup.gap = 1000 (default)
datanode_3  | 2020-04-17 18:34:01,082 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649-LeaderElection6] INFO server.RaftServerConfigKeys: raft.server.rpc.sleep.time = 25ms (default)
datanode_3  | 2020-04-17 18:34:01,082 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649-LeaderElection6] INFO metrics.RatisMetrics: Creating Metrics Registry : ratis.log_appender.3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649
datanode_3  | 2020-04-17 18:34:01,083 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649-LeaderElection6] INFO server.RaftServerConfigKeys: raft.server.write.element-limit = 1024 (custom)
datanode_3  | 2020-04-17 18:34:01,086 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649-LeaderElection6] INFO server.RaftServerConfigKeys: raft.server.write.byte-limit = 1073741824 (custom)
datanode_3  | 2020-04-17 18:34:01,087 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649-LeaderElection6] INFO server.RaftServerConfigKeys: raft.server.watch.timeout = 180s (custom)
datanode_3  | 2020-04-17 18:34:01,087 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649-LeaderElection6] INFO server.RaftServerConfigKeys: raft.server.watch.timeout.denomination = 1s (default)
datanode_3  | 2020-04-17 18:34:01,087 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649-LeaderElection6] INFO server.RaftServerConfigKeys: raft.server.watch.element-limit = 65536 (default)
datanode_3  | 2020-04-17 18:34:01,087 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649-LeaderElection6] INFO server.RaftServerConfigKeys: raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
datanode_3  | 2020-04-17 18:34:01,087 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649-LeaderElection6] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
datanode_3  | 2020-04-17 18:34:01,087 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649-LeaderElection6] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.element-limit = 1 (custom)
datanode_3  | 2020-04-17 18:34:01,088 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649-LeaderElection6] INFO grpc.GrpcConfigKeys: raft.grpc.server.leader.outstanding.appends.max = 128 (default)
datanode_3  | 2020-04-17 18:34:01,088 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649-LeaderElection6] INFO server.RaftServerConfigKeys: raft.server.rpc.request.timeout = 60s (custom)
datanode_3  | 2020-04-17 18:34:01,088 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649-LeaderElection6] INFO server.RaftServerConfigKeys: raft.server.log.appender.install.snapshot.enabled = false (custom)
datanode_3  | 2020-04-17 18:34:01,088 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649-LeaderElection6] INFO server.RaftServerConfigKeys: raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
datanode_3  | 2020-04-17 18:34:01,088 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649-LeaderElection6] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
datanode_3  | 2020-04-17 18:34:01,088 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649-LeaderElection6] INFO server.RaftServerConfigKeys: raft.server.log.appender.buffer.element-limit = 1 (custom)
datanode_3  | 2020-04-17 18:34:01,088 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649-LeaderElection6] INFO grpc.GrpcConfigKeys: raft.grpc.server.leader.outstanding.appends.max = 128 (default)
datanode_3  | 2020-04-17 18:34:01,088 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649-LeaderElection6] INFO server.RaftServerConfigKeys: raft.server.rpc.request.timeout = 60s (custom)
datanode_3  | 2020-04-17 18:34:01,088 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649-LeaderElection6] INFO server.RaftServerConfigKeys: raft.server.log.appender.install.snapshot.enabled = false (custom)
datanode_3  | 2020-04-17 18:34:01,089 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649-LeaderElection6] INFO impl.RoleInfo: 3989634e-60c9-4e5a-8523-9408dc0a802d: start LeaderState
datanode_3  | 2020-04-17 18:34:01,089 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649-LeaderElection6] INFO segmented.SegmentedRaftLogWorker: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649-SegmentedRaftLogWorker: Starting segment from index:0
datanode_3  | 2020-04-17 18:34:01,093 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649-LeaderElection6] INFO impl.RaftServerImpl: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649: set configuration 0: [0086d012-6f96-4817-8e1b-94f6eaa443bc:172.24.0.5:9858, f2e775cd-89a9-41b5-a9e0-4408e0d60689:172.24.0.9:9858, 3989634e-60c9-4e5a-8523-9408dc0a802d:172.24.0.10:9858], old=null at 0
datanode_3  | 2020-04-17 18:34:01,093 [3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649-SegmentedRaftLogWorker] INFO segmented.SegmentedRaftLogWorker: 3989634e-60c9-4e5a-8523-9408dc0a802d@group-A6E7E3010649-SegmentedRaftLogWorker: created new log segment /data/metadata/ratis/231f977e-34fb-4c22-81db-a6e7e3010649/current/log_inprogress_0
