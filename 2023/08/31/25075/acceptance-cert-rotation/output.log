rm: cannot remove '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/*': No such file or directory
Executing test ozonesecure-ha/test-root-ca-rotation.sh
Removing network ozonesecure-ha_ozone_net
Network ozonesecure-ha_ozone_net not found.
Creating network "ozonesecure-ha_ozone_net" with the default driver
Pulling datanode3 (apache/ozone-runner:20230615-1)...
20230615-1: Pulling from apache/ozone-runner
Digest: sha256:46c59e4f69c94a8f886d621c9f1898fda8cc4d5de59059c6c74175ffa4718474
Status: Downloaded newer image for apache/ozone-runner:20230615-1
Pulling kdc (apache/ozone-testkrb5:20230318-1)...
20230318-1: Pulling from apache/ozone-testkrb5
Digest: sha256:6a7eeac1ebd12e8968e34ab93fb8d21f2b92ae52bc0a85b662a2d41065f05d3a
Status: Downloaded newer image for apache/ozone-testkrb5:20230318-1
Pulling kms (apache/hadoop:3.3.6)...
3.3.6: Pulling from apache/hadoop
Digest: sha256:62a22627f35a1bbf29c721192c02fe311c93749cc43d51df01792b2ac40ff144
Status: Downloaded newer image for apache/hadoop:3.3.6
Creating ozonesecure-ha_om1_1 ... 
Creating ozonesecure-ha_httpfs_1 ... 
Creating ozonesecure-ha_kdc_1    ... 
Creating ozonesecure-ha_scm3.org_1 ... 
Creating ozonesecure-ha_scm1.org_1 ... 
Creating ozonesecure-ha_datanode2_1 ... 
Creating ozonesecure-ha_datanode3_1 ... 
Creating ozonesecure-ha_datanode1_1 ... 
Creating ozonesecure-ha_om2_1       ... 
Creating ozonesecure-ha_kms_1       ... 
Creating ozonesecure-ha_scm2.org_1  ... 
Creating ozonesecure-ha_om3_1       ... 
Creating ozonesecure-ha_s3g_1       ... 
Creating ozonesecure-ha_recon_1     ... 
Creating ozonesecure-ha_httpfs_1    ... done
Creating ozonesecure-ha_kdc_1       ... done
Creating ozonesecure-ha_datanode2_1 ... done
Creating ozonesecure-ha_om1_1       ... done
Creating ozonesecure-ha_scm3.org_1  ... done
Creating ozonesecure-ha_datanode3_1 ... done
Creating ozonesecure-ha_datanode1_1 ... done
Creating ozonesecure-ha_scm2.org_1  ... done
Creating ozonesecure-ha_s3g_1       ... done
Creating ozonesecure-ha_recon_1     ... done
Creating ozonesecure-ha_scm1.org_1  ... done
Creating ozonesecure-ha_om2_1       ... done
Creating ozonesecure-ha_kms_1       ... done
Creating ozonesecure-ha_om3_1       ... done
Port 88 is available on kdc
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is available on scm1.org
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 234
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 233
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 232
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 231
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 230
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 229
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 228
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 227
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 226
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 225
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 224
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 223
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 222
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 221
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 220
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 219
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 218
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 217
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 216
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 215
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 214
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 213
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 212
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 211
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 210
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 209
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 208
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 207
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 206
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 205
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 204
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 203
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 202
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 201
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 200
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 199
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 198
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 197
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 196
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 195
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 194
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 193
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 192
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 191
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 190
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 189
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 188
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 187
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 186
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 185
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 184
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 183
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 182
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 181
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 180
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 179
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 178
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 177
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 176
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 175
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 174
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 173
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 172
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 171
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 170
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 169
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 168
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 167
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 166
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 165
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 164
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 163
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 162
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 161
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 160
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 159
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 158
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 157
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 156
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 155
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 154
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 153
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 152
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 151
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 150
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 149
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 148
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 147
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 146
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 145
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 144
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 143
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 142
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 141
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 140
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 139
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 138
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 137
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 136
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 135
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 134
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 133
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 132
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 131
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 130
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 129
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 128
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 127
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 126
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 125
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 124
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 123
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 122
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 121
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 119
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 118
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 117
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 116
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 115
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 114
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 113
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 112
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 111
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 110
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 109
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 108
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 107
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 106
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 105
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 104
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 103
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 102
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 101
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 100
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 99
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 98
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 97
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 96
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 95
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 94
SCM is out of safe mode.
Found OM leader for service omservice: om3 : LEADER (om3)
Replaced OM order with om3,om2,om1 in ozonesecure-ha_datanode1_1
Replaced OM order with om3,om2,om1 in ozonesecure-ha_datanode2_1
Replaced OM order with om3,om2,om1 in ozonesecure-ha_datanode3_1
Replaced OM order with om3,om2,om1 in ozonesecure-ha_recon_1
Replaced OM order with om3,om2,om1 in ozonesecure-ha_s3g_1
Replaced OM order with om3,om2,om1 in ozonesecure-ha_scm1.org_1
Replaced OM order with om3,om2,om1 in ozonesecure-ha_scm2.org_1
Replaced OM order with om3,om2,om1 in ozonesecure-ha_scm3.org_1
key1 has been successfully created with options Options{cipher='AES/CTR/NoPadding', bitLength=128, description='null', attributes=null}.
org.apache.hadoop.crypto.key.kms.LoadBalancingKMSClientProvider@662b4c69 has been updated.
==============================================================================
Kinit :: Kinit test user                                                      
==============================================================================
Kinit                                                                 | PASS |
------------------------------------------------------------------------------
Kinit :: Kinit test user                                              | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-ha/result/robot-1.xml
"RootCARotationManager-Active" #271 daemon prio=5 os_prio=0 cpu=878.87ms elapsed=227.84s tid=0x00007fc7bce7e800 nid=0x261 waiting on condition  [0x00007fc77af0a000]
jps | grep StorageContainerManagerStarter | sed 's/StorageContainerManagerStarter//' | xargs  | xargs -I {} jstack {} | grep 'RootCARotationManager-Active' succeed
Certificate id: 2
  [0]         Version: 3
         SerialNumber: 2
             IssuerDN: CN=scm-2@scm1.org,OU=1a33f38a-3df2-4fc1-b446-aee1cac8994d,O=CID-4b6469d8-aeaa-473b-85d3-9f475cf8ad09
           Start Date: Thu Aug 31 10:33:15 UTC 2023
           Final Date: Thu Aug 31 10:37:15 UTC 2023
            SubjectDN: CN=scm-2@scm1.org,OU=1a33f38a-3df2-4fc1-b446-aee1cac8994d,O=CID-4b6469d8-aeaa-473b-85d3-9f475cf8ad09
           Public Key: RSA Public Key [43:41:ee:86:30:06:ad:44:de:1c:57:46:32:60:30:d0:b7:3d:e2:72],[56:66:d1:a4]
        modulus: a2e3482e5a6105cdc72ced215f3fa008fcea1768e18c14443804edacd42f55852fabe0ef2ff4253647ef19bf6eb276428a9b08a10940c2200ef5afab8db11c3dc773b63e0845835aefb61cea0399554f9169d735b31ee2b3307967d8774d971dd77de0d3d44b4e8b9a886747e926ada16bec3d1f9e520a22f88e45a1f34c331406f3a8503a34999025e686e378e01f50a79d319364dbfa01ac84d667312044d24377da72dfe24ee05e72a4a4c2ff2852a38a5c89f8d987d5406e3c8d79fe3b6da517668e5e3536c0fbbf528145c95348f36e942ab3906692eebf22766fa8e509ff82a1f8c13ae643fea780d7fd7ec42404bcbc9bf666871ae3aa302eb6c6c35b
public exponent: 10001

  Signature Algorithm: SHA256withRSA
            Signature: 6256c8cc0181ec4c59e4a503ec555b0cba9ab458
                       699e204b4c30d81b2c8a61a16484d079222f9942
                       55304190f28400c4d0d391b36e518c5ec6f115a2
                       3b5f769be0d382585bf93333cd6b403111124d49
                       9c9a65b6aaf5c7d671b85d4284ba1a0ac63bd3be
                       50cf848ab3391a1bf36748d2faed8b57ac13570e
                       f6d952b052281bd7a8a77a74164ab82f0c0ba2d2
                       ec285e93e54aacd1776e2ed9bd3612fe48a04d5e
                       06336a3952dfedc4b404f1ebaa9cbf0dcb9c0681
                       afdf770a4d19a228547ff41bd8edeaa363738294
                       c44242fda905083c72aec8ce0d7a025f4a28d7bc
                       45b5cd537173f65661fb390d24a58eca684f617e
                       7caa749191529f35d0fb74f462a85365
       Extensions: 
                       critical(true) BasicConstraints: isCa(true)
                       critical(true) KeyUsage: 0x6
                       critical(false) 2.5.29.17 value = Sequence
    Tagged [7] IMPLICIT 
        DER Octet String[4] 
    Tagged [2] IMPLICIT 
        DER Octet String[8] 


ozone admin cert info 2 succeed
==============================================================================
Scm-Leader-Transfer :: Smoketest ozone cluster startup                        
==============================================================================
Transfer Leadership                                                   | PASS |
------------------------------------------------------------------------------
Scm-Leader-Transfer :: Smoketest ozone cluster startup                | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-ha/result/robot-2.xml
"RootCARotationManager-Inactive" #271 daemon prio=5 os_prio=0 cpu=895.03ms elapsed=281.47s tid=0x00007fc7bce7e800 nid=0x261 waiting on condition  [0x00007fc77af0a000]
jps | grep StorageContainerManagerStarter | sed 's/StorageContainerManagerStarter//' | xargs | xargs -I {} jstack {} | grep 'RootCARotationManager-Inactive' succeed
==============================================================================
Root-Ca-Rotation-Client-Checks :: Generate data                               
==============================================================================
Create a volume and bucket                                            | PASS |
------------------------------------------------------------------------------
Create key                                                            | PASS |
------------------------------------------------------------------------------
Read data from previously created key                                 | PASS |
------------------------------------------------------------------------------
Root-Ca-Rotation-Client-Checks :: Generate data                       | PASS |
3 tests, 3 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-ha/result/robot-3.xml
==============================================================================
Pipeline :: Test ozone admin pipeline command                                 
==============================================================================
Create pipeline                                                       | PASS |
------------------------------------------------------------------------------
List pipelines                                                        | PASS |
------------------------------------------------------------------------------
List pipelines with explicit host                                     | PASS |
------------------------------------------------------------------------------
Deactivate pipeline                                                   | PASS |
------------------------------------------------------------------------------
Activate pipeline                                                     | PASS |
------------------------------------------------------------------------------
Close pipeline                                                        | PASS |
------------------------------------------------------------------------------
Incomplete command                                                    | PASS |
------------------------------------------------------------------------------
Pipeline :: Test ozone admin pipeline command                         | PASS |
7 tests, 7 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-ha/result/robot-4.xml
Certificate id: 3
  [0]         Version: 3
         SerialNumber: 3
             IssuerDN: CN=scm-3@scm2.org,OU=28db01b0-a336-444c-814e-9c2cbd378dc2,O=CID-4b6469d8-aeaa-473b-85d3-9f475cf8ad09
           Start Date: Thu Aug 31 10:35:45 UTC 2023
           Final Date: Thu Aug 31 10:39:45 UTC 2023
            SubjectDN: CN=scm-3@scm2.org,OU=28db01b0-a336-444c-814e-9c2cbd378dc2,O=CID-4b6469d8-aeaa-473b-85d3-9f475cf8ad09
           Public Key: RSA Public Key [45:74:70:22:2e:a1:e3:a5:57:92:e9:1a:d0:2a:6e:22:34:b4:27:71],[56:66:d1:a4]
        modulus: cd421ca5a8dca3aebde23810d975760c4c7635774fccf7b943d6855b369b7751f74013898dcb5e557a8b5976604f238a0867700e3a193d413850cbc4ee10dcea3484c2be372b3e50f96174a0db56297aa28ee95eadc2b43d1b0708a9863b6ccfb4e2da2a9adf0d1011910cc65a577c75127415d053df5b955b138565790da8a8075af2c5c347e39a5c13ab8788e73f5815d4758818b131d451ef9fef3ed1da33eb6f882a8c7b27717a7de1773e793804690ac6ce7999d8ab89743f98feda55c2e6f941475b08f8dca9ef055f079a7213b0656440d850ae10d45f10e57487fc00a71e5bb296fcb9da42b31f3fe09c6a80d993f7ac49efc95fb8bd120d024c1b51
public exponent: 10001

  Signature Algorithm: SHA256withRSA
            Signature: 0b8603342099275ddc1c2eb45c5d5ff7ffcd20f5
                       db79e8eb9f8b484199c873dc5a40e0c757e58e1a
                       e3fc89057e44526f122067e04e9b9bffd6f1eada
                       71168638f5c221a116845ebe9ad1a345837f5437
                       4427fe80ed15f6524647d45159b328546890d999
                       b77b8149d1014154ef724df5e85a454a738cebbc
                       86eab8ddfe908e47601b4432f457ddfa274bc61a
                       6522f34df759ade1be2948fd4335052baae886fa
                       0744ac90dbfaa351ef47cb0886ccb3975af5ebc3
                       406aaa845a69d3c2020ab4c6ea67bcd8660c9e66
                       c02d7dde76978c46930535122a28b7642e57278c
                       5431c47e6d477a5f801e0290b5d53823985709e8
                       f7b1fb0a53af7843ded90ea54c2e16ec
       Extensions: 
                       critical(true) BasicConstraints: isCa(true)
                       critical(true) KeyUsage: 0x6
                       critical(false) 2.5.29.17 value = Sequence
    Tagged [7] IMPLICIT 
        DER Octet String[4] 
    Tagged [2] IMPLICIT 
        DER Octet String[8] 


ozone admin cert info 3 succeed
Creating ozonesecure-ha_scm4.org_1 ... 
Creating ozonesecure-ha_scm4.org_1 ... done
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is available on scm4.org
==============================================================================
Kinit :: Kinit test user                                                      
==============================================================================
Kinit                                                                 | PASS |
------------------------------------------------------------------------------
Kinit :: Kinit test user                                              | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-ha/result/robot-5.xml
ozone admin scm roles | grep scm4.org hasn't succeed yet
ozone admin scm roles | grep scm4.org hasn't succeed yet
ozone admin scm roles | grep scm4.org hasn't succeed yet
ozone admin scm roles | grep scm4.org hasn't succeed yet
ozone admin scm roles | grep scm4.org hasn't succeed yet
Timed out waiting on ozone admin scm roles | grep scm4.org to be successful
Stopping ozonesecure-ha_scm4.org_1  ... 
Stopping ozonesecure-ha_om3_1       ... 
Stopping ozonesecure-ha_scm2.org_1  ... 
Stopping ozonesecure-ha_recon_1     ... 
Stopping ozonesecure-ha_s3g_1       ... 
Stopping ozonesecure-ha_kms_1       ... 
Stopping ozonesecure-ha_datanode1_1 ... 
Stopping ozonesecure-ha_datanode3_1 ... 
Stopping ozonesecure-ha_om2_1       ... 
Stopping ozonesecure-ha_scm1.org_1  ... 
Stopping ozonesecure-ha_datanode2_1 ... 
Stopping ozonesecure-ha_scm3.org_1  ... 
Stopping ozonesecure-ha_kdc_1       ... 
Stopping ozonesecure-ha_om1_1       ... 
Stopping ozonesecure-ha_httpfs_1    ... 
Stopping ozonesecure-ha_kdc_1       ... done
Stopping ozonesecure-ha_kms_1       ... done
Stopping ozonesecure-ha_httpfs_1    ... done
Stopping ozonesecure-ha_scm4.org_1  ... done
Stopping ozonesecure-ha_s3g_1       ... done
Stopping ozonesecure-ha_recon_1     ... done
Stopping ozonesecure-ha_datanode1_1 ... done
Stopping ozonesecure-ha_datanode3_1 ... done
Stopping ozonesecure-ha_datanode2_1 ... done
Stopping ozonesecure-ha_om1_1       ... done
Stopping ozonesecure-ha_om2_1       ... done
Stopping ozonesecure-ha_om3_1       ... done
Stopping ozonesecure-ha_scm1.org_1  ... done
Stopping ozonesecure-ha_scm2.org_1  ... done
Stopping ozonesecure-ha_scm3.org_1  ... done
Removing ozonesecure-ha_scm4.org_1  ... 
Removing ozonesecure-ha_om3_1       ... 
Removing ozonesecure-ha_scm2.org_1  ... 
Removing ozonesecure-ha_recon_1     ... 
Removing ozonesecure-ha_s3g_1       ... 
Removing ozonesecure-ha_kms_1       ... 
Removing ozonesecure-ha_datanode1_1 ... 
Removing ozonesecure-ha_datanode3_1 ... 
Removing ozonesecure-ha_om2_1       ... 
Removing ozonesecure-ha_scm1.org_1  ... 
Removing ozonesecure-ha_datanode2_1 ... 
Removing ozonesecure-ha_scm3.org_1  ... 
Removing ozonesecure-ha_kdc_1       ... 
Removing ozonesecure-ha_om1_1       ... 
Removing ozonesecure-ha_httpfs_1    ... 
Removing ozonesecure-ha_recon_1     ... done
Removing ozonesecure-ha_scm2.org_1  ... done
Removing ozonesecure-ha_kdc_1       ... done
Removing ozonesecure-ha_s3g_1       ... done
Removing ozonesecure-ha_scm1.org_1  ... done
Removing ozonesecure-ha_httpfs_1    ... done
Removing ozonesecure-ha_scm4.org_1  ... done
Removing ozonesecure-ha_datanode1_1 ... done
Removing ozonesecure-ha_kms_1       ... done
Removing ozonesecure-ha_om1_1       ... done
Removing ozonesecure-ha_datanode3_1 ... done
Removing ozonesecure-ha_datanode2_1 ... done
Removing ozonesecure-ha_scm3.org_1  ... done
Removing ozonesecure-ha_om2_1       ... done
Removing ozonesecure-ha_om3_1       ... done
Removing network ozonesecure-ha_ozone_net
ERROR: Test execution of ozonesecure-ha/test-root-ca-rotation.sh is FAILED!!!!
Output:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha-root-ca-rotation.xml
removed 'ozonesecure-ha/result/robot-1.xml'
removed 'ozonesecure-ha/result/robot-2.xml'
removed 'ozonesecure-ha/result/robot-3.xml'
removed 'ozonesecure-ha/result/robot-4.xml'
removed 'ozonesecure-ha/result/robot-5.xml'
renamed 'ozonesecure-ha/result/dn-audit-8e4da5c94c84.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/dn-audit-8e4da5c94c84.log'
renamed 'ozonesecure-ha/result/dn-audit-986963b2687b.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/dn-audit-986963b2687b.log'
renamed 'ozonesecure-ha/result/dn-audit-fc0f80347def.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/dn-audit-fc0f80347def.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_datanode1_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_datanode1_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_datanode2_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_datanode2_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_datanode3_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_datanode3_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_httpfs_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_httpfs_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_kdc_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_kdc_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_kms_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_kms_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_om1_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_om1_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_om2_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_om2_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_om3_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_om3_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_recon_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_recon_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_s3g_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_s3g_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_scm1.org_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_scm1.org_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_scm2.org_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_scm2.org_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_scm3.org_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_scm3.org_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_scm4.org_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_scm4.org_1.log'
renamed 'ozonesecure-ha/result/kms-audit.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/kms-audit.log'
renamed 'ozonesecure-ha/result/om-audit-om1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/om-audit-om1.log'
renamed 'ozonesecure-ha/result/om-audit-om2.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/om-audit-om2.log'
renamed 'ozonesecure-ha/result/om-audit-om3.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/om-audit-om3.log'
renamed 'ozonesecure-ha/result/s3g-audit-s3g.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/s3g-audit-s3g.log'
renamed 'ozonesecure-ha/result/scm-audit-scm1.org.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/scm-audit-scm1.org.log'
renamed 'ozonesecure-ha/result/scm-audit-scm2.org.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/scm-audit-scm2.org.log'
renamed 'ozonesecure-ha/result/scm-audit-scm3.org.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/scm-audit-scm3.org.log'
renamed 'ozonesecure-ha/result/scm-audit-scm4.org.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/scm-audit-scm4.org.log'
Executing test ozonesecure/test-certificate-rotation.sh
Removing network ozonesecure_default
Network ozonesecure_default not found.
Creating network "ozonesecure_default" with the default driver
Creating ozonesecure_kdc_1 ... 
Creating ozonesecure_httpfs_1 ... 
Creating ozonesecure_recon_1  ... 
Creating ozonesecure_datanode_1 ... 
Creating ozonesecure_datanode_2 ... 
Creating ozonesecure_datanode_3 ... 
Creating ozonesecure_om_1       ... 
Creating ozonesecure_s3g_1      ... 
Creating ozonesecure_kms_1      ... 
Creating ozonesecure_scm_1      ... 
Creating ozonesecure_kdc_1      ... done
Creating ozonesecure_datanode_1 ... done
Creating ozonesecure_datanode_2 ... done
Creating ozonesecure_om_1       ... done
Creating ozonesecure_httpfs_1   ... done
Creating ozonesecure_s3g_1      ... done
Creating ozonesecure_datanode_3 ... done
Creating ozonesecure_kms_1      ... done
Creating ozonesecure_scm_1      ... done
Creating ozonesecure_recon_1    ... done
Port 88 is available on kdc
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is available on scm
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 227
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 225
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 224
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 223
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 222
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 221
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 220
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 219
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 218
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 217
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 216
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 215
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 214
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 213
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 212
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 211
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 210
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 209
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 208
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 207
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 206
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 205
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 204
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 203
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 202
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 201
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 200
SCM is out of safe mode.
No OM HA service, no need to wait
==============================================================================
Certrotation                                                                  
==============================================================================
Certrotation.Cert-Rotation :: Smoketest ozone cluster startup                 
==============================================================================
Test datanode functions before and after certificate rotation         depth=2 CN = scm-1@scm, OU = 8ef3d545-b7be-4b04-a71f-03222bbdb86d, O = CID-3c3e2f5b-a1e0-48f8-ad37-2d7138701a20
verify error:num=19:self signed certificate in certificate chain
depth=2 CN = scm-1@scm, OU = 8ef3d545-b7be-4b04-a71f-03222bbdb86d, O = CID-3c3e2f5b-a1e0-48f8-ad37-2d7138701a20
verify error:num=19:self signed certificate in certificate chain
| PASS |
------------------------------------------------------------------------------
Certrotation.Cert-Rotation :: Smoketest ozone cluster startup         | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Certrotation.Root-Ca-Rotation-Client-Checks :: Generate data                  
==============================================================================
Create a volume and bucket                                            | PASS |
------------------------------------------------------------------------------
Create key                                                            | PASS |
------------------------------------------------------------------------------
Read data from previously created key                                 | PASS |
------------------------------------------------------------------------------
Certrotation.Root-Ca-Rotation-Client-Checks :: Generate data          | PASS |
3 tests, 3 passed, 0 failed
==============================================================================
Certrotation                                                          | PASS |
4 tests, 4 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure/result/robot-1.xml
Stopping ozonesecure_scm_1      ... 
Stopping ozonesecure_kms_1      ... 
Stopping ozonesecure_recon_1    ... 
Stopping ozonesecure_om_1       ... 
Stopping ozonesecure_datanode_1 ... 
Stopping ozonesecure_s3g_1      ... 
Stopping ozonesecure_datanode_3 ... 
Stopping ozonesecure_datanode_2 ... 
Stopping ozonesecure_httpfs_1   ... 
Stopping ozonesecure_kdc_1      ... 
Stopping ozonesecure_kdc_1      ... done
Stopping ozonesecure_kms_1      ... done
Stopping ozonesecure_httpfs_1   ... done
Stopping ozonesecure_s3g_1      ... done
Stopping ozonesecure_recon_1    ... done
Stopping ozonesecure_datanode_3 ... done
Stopping ozonesecure_datanode_2 ... done
Stopping ozonesecure_datanode_1 ... done
Stopping ozonesecure_om_1       ... done
Stopping ozonesecure_scm_1      ... done
Removing ozonesecure_scm_1      ... 
Removing ozonesecure_kms_1      ... 
Removing ozonesecure_recon_1    ... 
Removing ozonesecure_om_1       ... 
Removing ozonesecure_datanode_1 ... 
Removing ozonesecure_s3g_1      ... 
Removing ozonesecure_datanode_3 ... 
Removing ozonesecure_datanode_2 ... 
Removing ozonesecure_httpfs_1   ... 
Removing ozonesecure_kdc_1      ... 
Removing ozonesecure_s3g_1      ... done
Removing ozonesecure_datanode_2 ... done
Removing ozonesecure_recon_1    ... done
Removing ozonesecure_kms_1      ... done
Removing ozonesecure_datanode_1 ... done
Removing ozonesecure_httpfs_1   ... done
Removing ozonesecure_kdc_1      ... done
Removing ozonesecure_datanode_3 ... done
Removing ozonesecure_om_1       ... done
Removing ozonesecure_scm_1      ... done
Removing network ozonesecure_default
Output:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-certificate-rotation.xml
removed 'ozonesecure/result/robot-1.xml'
renamed 'ozonesecure/result/dn-audit-61ee57802906.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/dn-audit-61ee57802906.log'
renamed 'ozonesecure/result/dn-audit-6c76cd5cfc7f.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/dn-audit-6c76cd5cfc7f.log'
renamed 'ozonesecure/result/dn-audit-e59a0fc8c4f6.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/dn-audit-e59a0fc8c4f6.log'
renamed 'ozonesecure/result/docker-ozonesecure_datanode_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_datanode_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_datanode_2.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_datanode_2.log'
renamed 'ozonesecure/result/docker-ozonesecure_datanode_3.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_datanode_3.log'
renamed 'ozonesecure/result/docker-ozonesecure_httpfs_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_httpfs_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_kdc_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_kdc_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_kms_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_kms_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_om_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_om_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_recon_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_recon_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_s3g_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_s3g_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_scm_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_scm_1.log'
renamed 'ozonesecure/result/kms-audit.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/kms-audit.log'
renamed 'ozonesecure/result/om-audit-om.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/om-audit-om.log'
renamed 'ozonesecure/result/s3g-audit-s3g.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/s3g-audit-s3g.log'
renamed 'ozonesecure/result/scm-audit-scm.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/scm-audit-scm.log'
Executing test ozonesecure/test-root-ca-rotation.sh
Removing network ozonesecure_default
Network ozonesecure_default not found.
Creating network "ozonesecure_default" with the default driver
Creating ozonesecure_datanode_1 ... 
Creating ozonesecure_datanode_2 ... 
Creating ozonesecure_datanode_3 ... 
Creating ozonesecure_kms_1      ... 
Creating ozonesecure_kdc_1      ... 
Creating ozonesecure_s3g_1      ... 
Creating ozonesecure_recon_1    ... 
Creating ozonesecure_scm_1      ... 
Creating ozonesecure_om_1       ... 
Creating ozonesecure_httpfs_1   ... 
Creating ozonesecure_kdc_1      ... done
Creating ozonesecure_kms_1      ... done
Creating ozonesecure_datanode_3 ... done
Creating ozonesecure_recon_1    ... done
Creating ozonesecure_datanode_1 ... done
Creating ozonesecure_s3g_1      ... done
Creating ozonesecure_datanode_2 ... done
Creating ozonesecure_httpfs_1   ... done
Creating ozonesecure_scm_1      ... done
Creating ozonesecure_om_1       ... done
Port 88 is available on kdc
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is available on scm
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 227
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 226
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 224
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 223
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 222
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 221
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 220
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 219
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 218
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 217
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 216
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 215
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 214
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 213
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 212
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 211
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 210
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 209
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 208
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 207
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 206
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 205
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 204
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 203
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 202
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 201
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 200
SCM is out of safe mode.
No OM HA service, no need to wait
key1 has been successfully created with options Options{cipher='AES/CTR/NoPadding', bitLength=128, description='null', attributes=null}.
org.apache.hadoop.crypto.key.kms.LoadBalancingKMSClientProvider@662b4c69 has been updated.
==============================================================================
Kinit :: Kinit test user                                                      
==============================================================================
Kinit                                                                 | PASS |
------------------------------------------------------------------------------
Kinit :: Kinit test user                                              | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure/result/robot-1.xml
"RootCARotationManager-Active" #271 daemon prio=5 os_prio=0 cpu=12.14ms elapsed=63.68s tid=0x00007f1e38db9800 nid=0x2a0 waiting on condition  [0x00007f1df6eba000]
jps | grep StorageContainerManagerStarter |  sed 's/StorageContainerManagerStarter//' | xargs | xargs -I {} jstack {} | grep 'RootCARotationManager-Active' succeed
Certificate id: 2
  [0]         Version: 3
         SerialNumber: 2
             IssuerDN: CN=scm-2@scm,OU=b583867f-b68d-42b2-8835-598adc2ae325,O=CID-a0e8abbb-7d76-4383-a500-bde98b8e4d55
           Start Date: Thu Aug 31 10:47:24 UTC 2023
           Final Date: Thu Aug 31 10:50:24 UTC 2023
            SubjectDN: CN=scm-2@scm,OU=b583867f-b68d-42b2-8835-598adc2ae325,O=CID-a0e8abbb-7d76-4383-a500-bde98b8e4d55
           Public Key: RSA Public Key [a7:fa:86:ba:e1:41:d9:32:d1:3b:ad:40:3c:bd:86:44:34:d8:27:d6],[56:66:d1:a4]
        modulus: e568810c361a87e207b96d3d4761c3861bf45922c9576643ce8778cce3107b2d7ff07415447d8d6aebabb6b8069d6fbc35a9e1471ec3b559c7e99f75f76c3f129c3d2238e9c0be592370a82eebc3845d85a9d0bc40562ae3eb7e0536f2af58eeafb6a987dcbf56b982e5f3eb1153d5dc311255777dadafe68ad46a0b4f43aa239a769813275ca05e73aa77990b31591540873a447b959f22a40178ffd8bd093987196591572eb0db94eaf34aef805c20c0eebfb83f0852590a7d81a5c2ba7ce90b785af4f3340452dcba74b51fdce8fd5398714f810033f1344e79d97bc158ec989dfaf0d6cb2280bf91f3853cf04aa2ab03e6c90f51db8609f98c209224c291
public exponent: 10001

  Signature Algorithm: SHA256withRSA
            Signature: 15b96033773927f7f716d9c158075b424f9f6e28
                       fad8c9d64b09ca73750d2a7a6b24fcb776e89873
                       02f8ab44c9f00f7c528739d11b6ab442487b8f63
                       3c2d0764892059574b06595b69e14c1dbf0fa205
                       59e9a714d221eec8b45ac36378fc7d219d91e722
                       e0dcee92e83aa4678d02fc998343eff844d79228
                       0bf1310e17ff25d14e594077f3cf1cafbaa7ea54
                       84e87e70f3cce397857e9a2e560f1a32580a246a
                       88cdd997e1599ae14853986e42479994290c001a
                       d2a05f4da19f9b5df427a1c77685bab4c7165f73
                       b46d35272e2ffb994b60a26ff00bb60932f54b90
                       dae5f4167dfd57309401f75ddbb1ed08949310b8
                       e7a2814b5059084b0fd3a9ee75d5838b
       Extensions: 
                       critical(true) BasicConstraints: isCa(true)
                       critical(true) KeyUsage: 0x6
                       critical(false) 2.5.29.17 value = Sequence
    Tagged [7] IMPLICIT 
        DER Octet String[4] 


ozone admin cert info 2 succeed
find: '/data/metadata/dn/certs/ROOTCA-2.crt': No such file or directory
find /data/metadata/dn/certs/ROOTCA-2.crt hasn't succeed yet
find: '/data/metadata/dn/certs/ROOTCA-2.crt': No such file or directory
find /data/metadata/dn/certs/ROOTCA-2.crt hasn't succeed yet
/data/metadata/dn/certs/ROOTCA-2.crt
find /data/metadata/dn/certs/ROOTCA-2.crt succeed
/data/metadata/om/certs/ROOTCA-2.crt
find /data/metadata/om/certs/ROOTCA-2.crt succeed
==============================================================================
Root-Ca-Rotation-Client-Checks :: Generate data                               
==============================================================================
Create a volume and bucket                                            | PASS |
------------------------------------------------------------------------------
Create key                                                            | PASS |
------------------------------------------------------------------------------
Read data from previously created key                                 | PASS |
------------------------------------------------------------------------------
Root-Ca-Rotation-Client-Checks :: Generate data                       | PASS |
3 tests, 3 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure/result/robot-2.xml
Certificate not found
ozone admin cert info 3 hasn't succeed yet
Certificate not found
ozone admin cert info 3 hasn't succeed yet
Certificate not found
ozone admin cert info 3 hasn't succeed yet
Certificate id: 3
  [0]         Version: 3
         SerialNumber: 3
             IssuerDN: CN=scm-3@scm,OU=b583867f-b68d-42b2-8835-598adc2ae325,O=CID-a0e8abbb-7d76-4383-a500-bde98b8e4d55
           Start Date: Thu Aug 31 10:48:54 UTC 2023
           Final Date: Thu Aug 31 10:51:54 UTC 2023
            SubjectDN: CN=scm-3@scm,OU=b583867f-b68d-42b2-8835-598adc2ae325,O=CID-a0e8abbb-7d76-4383-a500-bde98b8e4d55
           Public Key: RSA Public Key [9d:02:a9:b5:25:89:03:61:03:f5:cc:97:e5:37:b4:5b:d7:b0:96:72],[56:66:d1:a4]
        modulus: d2452f719f3ded405042f24f8ac09ff1905b585d89bfcb4dc493debda9b275446957401169144737b7f1e8b358d8c2c0e0f3429d9070f9de7a86f4644b72e0375001e5e6424581f0b7804a972ee4bce7536a0267142fac620c4ccd49ad7926335e54cb95711a7d22f2addd2c3f728886697e2a59ccf9d323768411c87d10c1ccb1f895432a9eb102e98daa2e4ffb0079576d48e80ea2db226571c12718cdb14da6dddf7b2c6ca8f181f848435115a1791252fce286b260beb64d5ffb26d346580f5dbd60089a81b1aa6f29d322f23eccb7745185d98b58379e2e92e1e48ad0e0dab0c1245b9dec602b0702b7aea26740b9068c354967bc546df7c2a08c74490f
public exponent: 10001

  Signature Algorithm: SHA256withRSA
            Signature: 5178146bf2b84ebec18092508ea3b0ad9556fd76
                       178b0eb564417fdfb2a4162f940804f6edaa2ebf
                       03325d387a28456d0f5dafbe5c1811d3746eb1f3
                       dfb7feff8ea01bcb9fcd247a1f3682582e2aa870
                       65b5e7608eb3bf9b17337d04fc0a6fc1944eb97f
                       96e9b76e9757b78738004e73f7c1b9a42ef8ceb2
                       f2de051259c6bb242a54f62fd7fef0752cbd5f20
                       373d9a4b21ebf685c7e2773f054522a12ca93e7b
                       baeb367b95dce6b7f9c12fa4f9dc2a173c905c77
                       fbcbd2001788e708103cfcd802027c74578ce35b
                       7fad6598b54b4e790c552f68128dc50d3e59f45d
                       9e878e712fb61cf806f5b1693e22fc1682c572aa
                       d9d260b8afee25a92ef4ba879ab6c67a
       Extensions: 
                       critical(true) BasicConstraints: isCa(true)
                       critical(true) KeyUsage: 0x6
                       critical(false) 2.5.29.17 value = Sequence
    Tagged [7] IMPLICIT 
        DER Octet String[4] 


ozone admin cert info 3 succeed
find: '/data/metadata/om/certs/ROOTCA-3.crt': No such file or directory
find /data/metadata/om/certs/ROOTCA-3.crt hasn't succeed yet
find: '/data/metadata/om/certs/ROOTCA-3.crt': No such file or directory
find /data/metadata/om/certs/ROOTCA-3.crt hasn't succeed yet
find: '/data/metadata/om/certs/ROOTCA-3.crt': No such file or directory
find /data/metadata/om/certs/ROOTCA-3.crt hasn't succeed yet
/data/metadata/om/certs/ROOTCA-3.crt
find /data/metadata/om/certs/ROOTCA-3.crt succeed
Certificate not found
! ozone admin cert info 1 succeed
==============================================================================
Root-Ca-Rotation-Client-Checks :: Generate data                               
==============================================================================
Create a volume and bucket                                            | PASS |
------------------------------------------------------------------------------
Create key                                                            | PASS |
------------------------------------------------------------------------------
Read data from previously created key                                 | PASS |
------------------------------------------------------------------------------
Root-Ca-Rotation-Client-Checks :: Generate data                       | PASS |
3 tests, 3 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure/result/robot-3.xml
==============================================================================
Root-Ca-Rotation :: Smoketest ozone cluster startup                           
==============================================================================
Verify root CA rotation metrics                                       | PASS |
------------------------------------------------------------------------------
Root-Ca-Rotation :: Smoketest ozone cluster startup                   | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure/result/robot-4.xml
Stopping ozonesecure_scm_1      ... 
Stopping ozonesecure_httpfs_1   ... 
Stopping ozonesecure_om_1       ... 
Stopping ozonesecure_datanode_1 ... 
Stopping ozonesecure_s3g_1      ... 
Stopping ozonesecure_recon_1    ... 
Stopping ozonesecure_datanode_2 ... 
Stopping ozonesecure_kms_1      ... 
Stopping ozonesecure_kdc_1      ... 
Stopping ozonesecure_datanode_3 ... 
Stopping ozonesecure_kdc_1      ... done
Stopping ozonesecure_kms_1      ... done
Stopping ozonesecure_httpfs_1   ... done
Stopping ozonesecure_s3g_1      ... done
Stopping ozonesecure_recon_1    ... done
Stopping ozonesecure_datanode_1 ... done
Stopping ozonesecure_datanode_3 ... done
Stopping ozonesecure_datanode_2 ... done
Stopping ozonesecure_om_1       ... done
Stopping ozonesecure_scm_1      ... done
Removing ozonesecure_scm_1      ... 
Removing ozonesecure_httpfs_1   ... 
Removing ozonesecure_om_1       ... 
Removing ozonesecure_datanode_1 ... 
Removing ozonesecure_s3g_1      ... 
Removing ozonesecure_recon_1    ... 
Removing ozonesecure_datanode_2 ... 
Removing ozonesecure_kms_1      ... 
Removing ozonesecure_kdc_1      ... 
Removing ozonesecure_datanode_3 ... 
Removing ozonesecure_datanode_3 ... done
Removing ozonesecure_datanode_1 ... done
Removing ozonesecure_kms_1      ... done
Removing ozonesecure_recon_1    ... done
Removing ozonesecure_httpfs_1   ... done
Removing ozonesecure_om_1       ... done
Removing ozonesecure_kdc_1      ... done
Removing ozonesecure_s3g_1      ... done
Removing ozonesecure_datanode_2 ... done
Removing ozonesecure_scm_1      ... done
Removing network ozonesecure_default
Log:     /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/ozonesecure/result/log.html
Report:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/ozonesecure/result/report.html
Removing network ozonesecure_default
Network ozonesecure_default not found.
Output:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-root-ca-rotation.xml
removed 'ozonesecure/result/robot-1.xml'
removed 'ozonesecure/result/robot-2.xml'
removed 'ozonesecure/result/robot-3.xml'
removed 'ozonesecure/result/robot-4.xml'
removed 'ozonesecure/result/log.html'
removed 'ozonesecure/result/report.html'
renamed 'ozonesecure/result/dn-audit-064ffe67c2c5.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/dn-audit-064ffe67c2c5.log'
renamed 'ozonesecure/result/dn-audit-261d147aa524.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/dn-audit-261d147aa524.log'
renamed 'ozonesecure/result/dn-audit-a76a940892f3.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/dn-audit-a76a940892f3.log'
renamed 'ozonesecure/result/docker-ozonesecure_datanode_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_datanode_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_datanode_2.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_datanode_2.log'
renamed 'ozonesecure/result/docker-ozonesecure_datanode_3.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_datanode_3.log'
renamed 'ozonesecure/result/docker-ozonesecure_httpfs_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_httpfs_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_kdc_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_kdc_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_kms_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_kms_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_om_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_om_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_recon_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_recon_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_s3g_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_s3g_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_scm_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_scm_1.log'
renamed 'ozonesecure/result/kms-audit.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/kms-audit.log'
renamed 'ozonesecure/result/om-audit-om.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/om-audit-om.log'
renamed 'ozonesecure/result/s3g-audit-s3g.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/s3g-audit-s3g.log'
renamed 'ozonesecure/result/scm-audit-scm.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/scm-audit-scm.log'
Exception in thread "main" java.net.SocketException: Socket closed
	at java.base/java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.base/java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:474)
	at java.base/java.net.ServerSocket.implAccept(ServerSocket.java:565)
	at java.base/java.net.ServerSocket.accept(ServerSocket.java:533)
	at org.apache.hadoop.test.JacocoServer.main(JacocoServer.java:60)
Log:     /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/log.html
Report:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/report.html
