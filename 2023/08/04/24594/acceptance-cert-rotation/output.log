rm: cannot remove '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/*': No such file or directory
Executing test ozonesecure-ha/test-root-ca-rotation.sh
Removing network ozonesecure-ha_ozone_net
Network ozonesecure-ha_ozone_net not found.
Creating network "ozonesecure-ha_ozone_net" with the default driver
Pulling datanode1 (apache/ozone-runner:20230615-1)...
20230615-1: Pulling from apache/ozone-runner
Digest: sha256:46c59e4f69c94a8f886d621c9f1898fda8cc4d5de59059c6c74175ffa4718474
Status: Downloaded newer image for apache/ozone-runner:20230615-1
Pulling kdc (apache/ozone-testkrb5:20230318-1)...
20230318-1: Pulling from apache/ozone-testkrb5
Digest: sha256:6a7eeac1ebd12e8968e34ab93fb8d21f2b92ae52bc0a85b662a2d41065f05d3a
Status: Downloaded newer image for apache/ozone-testkrb5:20230318-1
Pulling kms (apache/hadoop:3.3.6)...
3.3.6: Pulling from apache/hadoop
Digest: sha256:62a22627f35a1bbf29c721192c02fe311c93749cc43d51df01792b2ac40ff144
Status: Downloaded newer image for apache/hadoop:3.3.6
Creating ozonesecure-ha_recon_1 ... 
Creating ozonesecure-ha_httpfs_1 ... 
Creating ozonesecure-ha_om2_1    ... 
Creating ozonesecure-ha_datanode2_1 ... 
Creating ozonesecure-ha_datanode1_1 ... 
Creating ozonesecure-ha_kms_1       ... 
Creating ozonesecure-ha_om1_1       ... 
Creating ozonesecure-ha_om3_1       ... 
Creating ozonesecure-ha_scm2.org_1  ... 
Creating ozonesecure-ha_scm3.org_1  ... 
Creating ozonesecure-ha_kdc_1       ... 
Creating ozonesecure-ha_s3g_1       ... 
Creating ozonesecure-ha_datanode3_1 ... 
Creating ozonesecure-ha_scm1.org_1  ... 
Creating ozonesecure-ha_httpfs_1    ... done
Creating ozonesecure-ha_recon_1     ... done
Creating ozonesecure-ha_om2_1       ... done
Creating ozonesecure-ha_kms_1       ... done
Creating ozonesecure-ha_datanode1_1 ... done
Creating ozonesecure-ha_datanode3_1 ... done
Creating ozonesecure-ha_scm2.org_1  ... done
Creating ozonesecure-ha_datanode2_1 ... done
Creating ozonesecure-ha_kdc_1       ... done
Creating ozonesecure-ha_om1_1       ... done
Creating ozonesecure-ha_s3g_1       ... done
Creating ozonesecure-ha_om3_1       ... done
Creating ozonesecure-ha_scm3.org_1  ... done
Creating ozonesecure-ha_scm1.org_1  ... done
Port 88 is available on kdc
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is available on scm1.org
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 235
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 234
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 233
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 232
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 231
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 230
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 229
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 228
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 227
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 226
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 225
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 224
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 223
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 222
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 221
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 220
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 219
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 218
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 217
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 216
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 215
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 214
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 213
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 212
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 211
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 210
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 209
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 208
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 207
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 206
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 205
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 204
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 203
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 202
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 201
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 200
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 199
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 198
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 197
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 196
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 195
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 194
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 193
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 192
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 191
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 190
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 189
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 188
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 187
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 186
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 185
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 184
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 183
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 182
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 181
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 180
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 179
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 178
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 177
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 176
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 175
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 174
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 173
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 172
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 171
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 170
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 169
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 168
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 167
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 166
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 165
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 164
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 163
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 162
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 161
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 160
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 159
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 158
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 157
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 156
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 155
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 154
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 153
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 152
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 151
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 150
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 149
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 147
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 146
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 145
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 144
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 143
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 142
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 141
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 140
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 139
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 138
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 137
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 136
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 135
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 134
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 133
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 132
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 131
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 130
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 129
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 128
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 127
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 126
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 125
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 124
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 123
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 122
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 121
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 120
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 119
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 118
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 117
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 116
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 115
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 114
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 113
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 112
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 111
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 110
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 109
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 108
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 107
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 106
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 105
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 104
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 103
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 102
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 101
SCM is out of safe mode.
Found OM leader for service omservice: om2 : LEADER (om2)
Replaced OM order with om2,om3,om1 in ozonesecure-ha_datanode1_1
Replaced OM order with om2,om3,om1 in ozonesecure-ha_datanode2_1
Replaced OM order with om2,om3,om1 in ozonesecure-ha_datanode3_1
Replaced OM order with om2,om3,om1 in ozonesecure-ha_recon_1
Replaced OM order with om2,om3,om1 in ozonesecure-ha_s3g_1
Replaced OM order with om2,om3,om1 in ozonesecure-ha_scm1.org_1
Replaced OM order with om2,om3,om1 in ozonesecure-ha_scm2.org_1
Replaced OM order with om2,om3,om1 in ozonesecure-ha_scm3.org_1
key1 has been successfully created with options Options{cipher='AES/CTR/NoPadding', bitLength=128, description='null', attributes=null}.
org.apache.hadoop.crypto.key.kms.LoadBalancingKMSClientProvider@662b4c69 has been updated.
==============================================================================
Kinit :: Kinit test user                                                      
==============================================================================
Kinit                                                                 | PASS |
------------------------------------------------------------------------------
Kinit :: Kinit test user                                              | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-ha/result/robot-1.xml
"RootCARotationManager-Active" #271 daemon prio=5 os_prio=0 cpu=1114.78ms elapsed=218.22s tid=0x00007f525e556000 nid=0x25f waiting on condition  [0x00007f5218dec000]
jps | grep StorageContainerManagerStarter | sed 's/StorageContainerManagerStarter//' | xargs  | xargs -I {} jstack {} | grep 'RootCARotationManager-Active' succeed
Certificate id: 2
  [0]         Version: 3
         SerialNumber: 2
             IssuerDN: CN=scm-2@scm1.org,OU=b0476af5-d79d-4a6f-9958-c206cd4716ff,O=CID-32f3348d-5542-4a16-8a4b-02c42e487a5c
           Start Date: Fri Aug 04 02:13:09 UTC 2023
           Final Date: Fri Aug 04 02:17:09 UTC 2023
            SubjectDN: CN=scm-2@scm1.org,OU=b0476af5-d79d-4a6f-9958-c206cd4716ff,O=CID-32f3348d-5542-4a16-8a4b-02c42e487a5c
           Public Key: RSA Public Key [bc:f2:6c:2a:fe:1c:32:af:61:2f:ec:bf:a3:df:04:3e:dc:98:f7:d3],[56:66:d1:a4]
        modulus: d30371cee1ccddc6993602302a83a78d1057600228acc063d71c23131e2d16ccd726a6c887b29040dc7cb50e369df42f220b4a8d0df2c34c62488e39d7d260925a310ff1d1bc4a5b2e78ed5974711b6310c46d87cf7d83ad3799e0e43dd3b8599e9cb6865fa126797624a8a4165722754a8ba1c57feff44fcf0ee796ee88e6b8eb05ecadedebe119122cbcb6d96822d108537daf088879364b31486d859f5250567f23840b6433307e021c6a45a1060da681fa302900536ff4ac034f8a4afe091bdebb0b4e8ae35ad771f02c26676aa61bf1f269dcdfc794997e65e91c13b52c80babdf6004a7323570dc6a4f26bd75caed014132414dffeaab39b4cf0eaea73
public exponent: 10001

  Signature Algorithm: SHA256withRSA
            Signature: 513801280900067b1d4ba91e7b464079dd196bd5
                       ddf132e25b60886d260405c57a603923f90f8e6e
                       c5a81a52ef02bc25d02f1cf44f2df6d1180d165f
                       914a5af78dc0140d433d2e677e120795d9381669
                       89dc1ba22d3f194ac699781ba78caf58e7a27a2b
                       47847d0338c4c197591a823192c34c9839d29f6e
                       917c2c90278e65f32a50845e6c5ab607f220824c
                       ce7760b3fc1536bb8c92f916dcf8a2ad7bdfa601
                       13c57bafa5d05216cc29ddec181837acd90eea7c
                       b6f23e2bb6f58452474c579f5262756027d08f77
                       97e1b2a16f5967cd71e9fbd7d1cfabd42ecc3bbc
                       6638db6bc74fbc2b1c554baa2f2fad3b659cd058
                       977f261342abfcffc8a0e1c7fe735eec
       Extensions: 
                       critical(true) BasicConstraints: isCa(true)
                       critical(true) KeyUsage: 0x6
                       critical(false) 2.5.29.17 value = Sequence
    Tagged [7] IMPLICIT 
        DER Octet String[4] 
    Tagged [2] IMPLICIT 
        DER Octet String[8] 


ozone admin cert info 2 succeed
==============================================================================
Scm-Leader-Transfer :: Smoketest ozone cluster startup                        
==============================================================================
Transfer Leadership                                                   | PASS |
------------------------------------------------------------------------------
Scm-Leader-Transfer :: Smoketest ozone cluster startup                | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-ha/result/robot-2.xml
"RootCARotationManager-Inactive" #271 daemon prio=5 os_prio=0 cpu=1130.90ms elapsed=269.15s tid=0x00007f525e556000 nid=0x25f waiting on condition  [0x00007f5218dec000]
jps | grep StorageContainerManagerStarter | sed 's/StorageContainerManagerStarter//' | xargs | xargs -I {} jstack {} | grep 'RootCARotationManager-Inactive' succeed
==============================================================================
Root-Ca-Rotation-Client-Checks :: Generate data                               
==============================================================================
Create a volume and bucket                                            | PASS |
------------------------------------------------------------------------------
Create key                                                            | PASS |
------------------------------------------------------------------------------
Read data from previously created key                                 | PASS |
------------------------------------------------------------------------------
Root-Ca-Rotation-Client-Checks :: Generate data                       | PASS |
3 tests, 3 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-ha/result/robot-3.xml
==============================================================================
Pipeline :: Test ozone admin pipeline command                                 
==============================================================================
Create pipeline                                                       | PASS |
------------------------------------------------------------------------------
List pipelines                                                        | PASS |
------------------------------------------------------------------------------
List pipelines with explicit host                                     | PASS |
------------------------------------------------------------------------------
Deactivate pipeline                                                   | PASS |
------------------------------------------------------------------------------
Activate pipeline                                                     | PASS |
------------------------------------------------------------------------------
Close pipeline                                                        | PASS |
------------------------------------------------------------------------------
Incomplete command                                                    | PASS |
------------------------------------------------------------------------------
Pipeline :: Test ozone admin pipeline command                         | PASS |
7 tests, 7 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-ha/result/robot-4.xml
Certificate id: 3
  [0]         Version: 3
         SerialNumber: 3
             IssuerDN: CN=scm-3@scm2.org,OU=56f4b2d6-550b-45a0-8a76-f1d658b6dc0f,O=CID-32f3348d-5542-4a16-8a4b-02c42e487a5c
           Start Date: Fri Aug 04 02:15:40 UTC 2023
           Final Date: Fri Aug 04 02:19:40 UTC 2023
            SubjectDN: CN=scm-3@scm2.org,OU=56f4b2d6-550b-45a0-8a76-f1d658b6dc0f,O=CID-32f3348d-5542-4a16-8a4b-02c42e487a5c
           Public Key: RSA Public Key [08:91:a8:e2:00:83:d8:4c:71:2e:78:9e:38:f8:9e:c7:94:00:62:0a],[56:66:d1:a4]
        modulus: ab4a7ffc7277100fdabcb45344aa96e6ab0ec78461698c248efbb3e4b3a664f63b3fe3bbfcaccfedf53ac4f9da4100f929e18dd2a91d54db340a4bf0a4b4cf2687cf233e5f1df79c8a4ca68619b66032f62d714bf1a11128c3c795490e464a9a9232898d97858e4169bdbf6549ea675ccd38f2e649e54efcf3f6417cc5e574256084395a4744a9d2ee7509063541f5ef9be059892836a49eb6d97598429cfd1eaaa1b0c37631a5959acc6a5648d68388f48de7e926250c7c0e25ad94d2e43d2fd464ecc339e918f73412c10a203f16c138605695faf3a6a87edded37b1f3b9112463355881295e6de8e88d7ed6c5d0bab6c8579ac49e076b93c1061183523b7d
public exponent: 10001

  Signature Algorithm: SHA256withRSA
            Signature: 6eca77043012f467c9f5f0e09804352faf9431d7
                       fb79cf12e26ef285b58bbcf431ee676cfe0a20c0
                       0298794d074c96a9412065bb017e898ce586bf4a
                       a5b2eed2fcb7e09e16f396242315fcff497a4cd2
                       9a7d37322bdd17691b166e15f14e494110de872e
                       7d5bc0baded5bbe397679aa782ef81369b0b22ca
                       045b58d9b163a0a2becb6015cc4e8d917d467f96
                       6f841e36191cb67334a3fa78b80fcd67bb5c3a44
                       4f09cd65d4c77fef5d3c68fa2e634029cacece65
                       fe2aba1a00fdfc0ecd14af23bcb102d0f7c858a6
                       36d8329e29793ce4c16110305989b364d7679080
                       d50e369a7d20906312e4808e8cc03630fbd64403
                       da0b40e797bdd37a23df6837d2f12483
       Extensions: 
                       critical(true) BasicConstraints: isCa(true)
                       critical(true) KeyUsage: 0x6
                       critical(false) 2.5.29.17 value = Sequence
    Tagged [7] IMPLICIT 
        DER Octet String[4] 
    Tagged [2] IMPLICIT 
        DER Octet String[8] 


ozone admin cert info 3 succeed
Creating ozonesecure-ha_scm4.org_1 ... 
Creating ozonesecure-ha_scm4.org_1 ... done
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is available on scm4.org
==============================================================================
Kinit :: Kinit test user                                                      
==============================================================================
Kinit                                                                 | PASS |
------------------------------------------------------------------------------
Kinit :: Kinit test user                                              | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-ha/result/robot-5.xml
ozone admin scm roles | grep scm4.org hasn't succeed yet
ozone admin scm roles | grep scm4.org hasn't succeed yet
ozone admin scm roles | grep scm4.org hasn't succeed yet
ozone admin scm roles | grep scm4.org hasn't succeed yet
ozone admin scm roles | grep scm4.org hasn't succeed yet
Timed out waiting on ozone admin scm roles | grep scm4.org to be successful
Stopping ozonesecure-ha_scm4.org_1  ... 
Stopping ozonesecure-ha_datanode3_1 ... 
Stopping ozonesecure-ha_scm1.org_1  ... 
Stopping ozonesecure-ha_s3g_1       ... 
Stopping ozonesecure-ha_om3_1       ... 
Stopping ozonesecure-ha_kdc_1       ... 
Stopping ozonesecure-ha_scm3.org_1  ... 
Stopping ozonesecure-ha_datanode1_1 ... 
Stopping ozonesecure-ha_om1_1       ... 
Stopping ozonesecure-ha_scm2.org_1  ... 
Stopping ozonesecure-ha_kms_1       ... 
Stopping ozonesecure-ha_datanode2_1 ... 
Stopping ozonesecure-ha_httpfs_1    ... 
Stopping ozonesecure-ha_recon_1     ... 
Stopping ozonesecure-ha_om2_1       ... 
Stopping ozonesecure-ha_kdc_1       ... done
Stopping ozonesecure-ha_kms_1       ... done
Stopping ozonesecure-ha_httpfs_1    ... done
Stopping ozonesecure-ha_scm4.org_1  ... done
Stopping ozonesecure-ha_s3g_1       ... done
Stopping ozonesecure-ha_recon_1     ... done
Stopping ozonesecure-ha_datanode3_1 ... done
Stopping ozonesecure-ha_datanode1_1 ... done
Stopping ozonesecure-ha_datanode2_1 ... done
Stopping ozonesecure-ha_om2_1       ... done
Stopping ozonesecure-ha_om3_1       ... done
Stopping ozonesecure-ha_scm3.org_1  ... done
Stopping ozonesecure-ha_om1_1       ... done
Stopping ozonesecure-ha_scm2.org_1  ... done
Stopping ozonesecure-ha_scm1.org_1  ... done
Removing ozonesecure-ha_scm4.org_1  ... 
Removing ozonesecure-ha_datanode3_1 ... 
Removing ozonesecure-ha_scm1.org_1  ... 
Removing ozonesecure-ha_s3g_1       ... 
Removing ozonesecure-ha_om3_1       ... 
Removing ozonesecure-ha_kdc_1       ... 
Removing ozonesecure-ha_scm3.org_1  ... 
Removing ozonesecure-ha_datanode1_1 ... 
Removing ozonesecure-ha_om1_1       ... 
Removing ozonesecure-ha_scm2.org_1  ... 
Removing ozonesecure-ha_kms_1       ... 
Removing ozonesecure-ha_datanode2_1 ... 
Removing ozonesecure-ha_httpfs_1    ... 
Removing ozonesecure-ha_recon_1     ... 
Removing ozonesecure-ha_om2_1       ... 
Removing ozonesecure-ha_kdc_1       ... done
Removing ozonesecure-ha_datanode3_1 ... done
Removing ozonesecure-ha_scm4.org_1  ... done
Removing ozonesecure-ha_kms_1       ... done
Removing ozonesecure-ha_om3_1       ... done
Removing ozonesecure-ha_httpfs_1    ... done
Removing ozonesecure-ha_recon_1     ... done
Removing ozonesecure-ha_scm3.org_1  ... done
Removing ozonesecure-ha_datanode2_1 ... done
Removing ozonesecure-ha_om2_1       ... done
Removing ozonesecure-ha_s3g_1       ... done
Removing ozonesecure-ha_scm1.org_1  ... done
Removing ozonesecure-ha_om1_1       ... done
Removing ozonesecure-ha_datanode1_1 ... done
Removing ozonesecure-ha_scm2.org_1  ... done
Removing network ozonesecure-ha_ozone_net
ERROR: Test execution of ozonesecure-ha/test-root-ca-rotation.sh is FAILED!!!!
Output:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha-root-ca-rotation.xml
removed 'ozonesecure-ha/result/robot-1.xml'
removed 'ozonesecure-ha/result/robot-2.xml'
removed 'ozonesecure-ha/result/robot-3.xml'
removed 'ozonesecure-ha/result/robot-4.xml'
removed 'ozonesecure-ha/result/robot-5.xml'
renamed 'ozonesecure-ha/result/dn-audit-7a2ceaf1d4b5.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/dn-audit-7a2ceaf1d4b5.log'
renamed 'ozonesecure-ha/result/dn-audit-9d11500c114a.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/dn-audit-9d11500c114a.log'
renamed 'ozonesecure-ha/result/dn-audit-b98dc5ed8b54.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/dn-audit-b98dc5ed8b54.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_datanode1_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_datanode1_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_datanode2_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_datanode2_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_datanode3_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_datanode3_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_httpfs_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_httpfs_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_kdc_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_kdc_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_kms_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_kms_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_om1_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_om1_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_om2_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_om2_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_om3_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_om3_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_recon_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_recon_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_s3g_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_s3g_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_scm1.org_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_scm1.org_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_scm2.org_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_scm2.org_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_scm3.org_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_scm3.org_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_scm4.org_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_scm4.org_1.log'
renamed 'ozonesecure-ha/result/kms-audit.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/kms-audit.log'
renamed 'ozonesecure-ha/result/om-audit-om1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/om-audit-om1.log'
renamed 'ozonesecure-ha/result/om-audit-om2.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/om-audit-om2.log'
renamed 'ozonesecure-ha/result/om-audit-om3.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/om-audit-om3.log'
renamed 'ozonesecure-ha/result/s3g-audit-s3g.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/s3g-audit-s3g.log'
renamed 'ozonesecure-ha/result/scm-audit-scm1.org.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/scm-audit-scm1.org.log'
renamed 'ozonesecure-ha/result/scm-audit-scm2.org.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/scm-audit-scm2.org.log'
renamed 'ozonesecure-ha/result/scm-audit-scm3.org.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/scm-audit-scm3.org.log'
renamed 'ozonesecure-ha/result/scm-audit-scm4.org.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/scm-audit-scm4.org.log'
Executing test ozonesecure/test-certificate-rotation.sh
Removing network ozonesecure_default
Network ozonesecure_default not found.
Creating network "ozonesecure_default" with the default driver
Creating ozonesecure_s3g_1 ... 
Creating ozonesecure_httpfs_1 ... 
Creating ozonesecure_om_1     ... 
Creating ozonesecure_datanode_1 ... 
Creating ozonesecure_datanode_2 ... 
Creating ozonesecure_datanode_3 ... 
Creating ozonesecure_recon_1    ... 
Creating ozonesecure_kms_1      ... 
Creating ozonesecure_kdc_1      ... 
Creating ozonesecure_scm_1      ... 
Creating ozonesecure_s3g_1      ... done
Creating ozonesecure_kdc_1      ... done
Creating ozonesecure_recon_1    ... done
Creating ozonesecure_httpfs_1   ... done
Creating ozonesecure_datanode_3 ... done
Creating ozonesecure_datanode_2 ... done
Creating ozonesecure_om_1       ... done
Creating ozonesecure_datanode_1 ... done
Creating ozonesecure_kms_1      ... done
Creating ozonesecure_scm_1      ... done
Port 88 is available on kdc
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is available on scm
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 232
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 231
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 230
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 229
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 228
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 227
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 226
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 225
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 224
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 223
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 222
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 221
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 220
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 219
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 218
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 217
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 216
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 215
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 214
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 213
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 212
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 211
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 210
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 209
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 208
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 207
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 206
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 205
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 204
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 203
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 202
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 201
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 200
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 199
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 198
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 197
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 196
SCM is out of safe mode.
No OM HA service, no need to wait
==============================================================================
Certrotation                                                                  
==============================================================================
Certrotation.Cert-Rotation :: Smoketest ozone cluster startup                 
==============================================================================
Test datanode functions before and after certificate rotation         depth=2 CN = scm-1@scm, OU = fc0e59ca-1de0-46d5-8b84-410e95cc8d83, O = CID-7708337b-7c7b-4790-ba27-3c642775116c
verify error:num=19:self signed certificate in certificate chain
depth=2 CN = scm-1@scm, OU = fc0e59ca-1de0-46d5-8b84-410e95cc8d83, O = CID-7708337b-7c7b-4790-ba27-3c642775116c
verify error:num=19:self signed certificate in certificate chain
| PASS |
------------------------------------------------------------------------------
Certrotation.Cert-Rotation :: Smoketest ozone cluster startup         | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Certrotation.Root-Ca-Rotation-Client-Checks :: Generate data                  
==============================================================================
Create a volume and bucket                                            | PASS |
------------------------------------------------------------------------------
Create key                                                            | PASS |
------------------------------------------------------------------------------
Read data from previously created key                                 | PASS |
------------------------------------------------------------------------------
Certrotation.Root-Ca-Rotation-Client-Checks :: Generate data          | PASS |
3 tests, 3 passed, 0 failed
==============================================================================
Certrotation                                                          | PASS |
4 tests, 4 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure/result/robot-1.xml
Stopping ozonesecure_datanode_1 ... 
Stopping ozonesecure_kms_1      ... 
Stopping ozonesecure_scm_1      ... 
Stopping ozonesecure_kdc_1      ... 
Stopping ozonesecure_datanode_2 ... 
Stopping ozonesecure_recon_1    ... 
Stopping ozonesecure_datanode_3 ... 
Stopping ozonesecure_om_1       ... 
Stopping ozonesecure_httpfs_1   ... 
Stopping ozonesecure_s3g_1      ... 
Stopping ozonesecure_kdc_1      ... done
Stopping ozonesecure_kms_1      ... done
Stopping ozonesecure_httpfs_1   ... done
Stopping ozonesecure_s3g_1      ... done
Stopping ozonesecure_recon_1    ... done
Stopping ozonesecure_datanode_3 ... done
Stopping ozonesecure_datanode_1 ... done
Stopping ozonesecure_datanode_2 ... done
Stopping ozonesecure_om_1       ... done
Stopping ozonesecure_scm_1      ... done
Removing ozonesecure_datanode_1 ... 
Removing ozonesecure_kms_1      ... 
Removing ozonesecure_scm_1      ... 
Removing ozonesecure_kdc_1      ... 
Removing ozonesecure_datanode_2 ... 
Removing ozonesecure_recon_1    ... 
Removing ozonesecure_datanode_3 ... 
Removing ozonesecure_om_1       ... 
Removing ozonesecure_httpfs_1   ... 
Removing ozonesecure_s3g_1      ... 
Removing ozonesecure_s3g_1      ... done
Removing ozonesecure_recon_1    ... done
Removing ozonesecure_httpfs_1   ... done
Removing ozonesecure_datanode_2 ... done
Removing ozonesecure_kms_1      ... done
Removing ozonesecure_datanode_3 ... done
Removing ozonesecure_kdc_1      ... done
Removing ozonesecure_scm_1      ... done
Removing ozonesecure_datanode_1 ... done
Removing ozonesecure_om_1       ... done
Removing network ozonesecure_default
Output:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-certificate-rotation.xml
removed 'ozonesecure/result/robot-1.xml'
renamed 'ozonesecure/result/dn-audit-29c5cfec1f07.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/dn-audit-29c5cfec1f07.log'
renamed 'ozonesecure/result/dn-audit-7b918a3d72c5.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/dn-audit-7b918a3d72c5.log'
renamed 'ozonesecure/result/dn-audit-d05aef497b6b.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/dn-audit-d05aef497b6b.log'
renamed 'ozonesecure/result/docker-ozonesecure_datanode_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_datanode_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_datanode_2.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_datanode_2.log'
renamed 'ozonesecure/result/docker-ozonesecure_datanode_3.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_datanode_3.log'
renamed 'ozonesecure/result/docker-ozonesecure_httpfs_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_httpfs_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_kdc_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_kdc_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_kms_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_kms_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_om_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_om_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_recon_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_recon_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_s3g_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_s3g_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_scm_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_scm_1.log'
renamed 'ozonesecure/result/kms-audit.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/kms-audit.log'
renamed 'ozonesecure/result/om-audit-om.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/om-audit-om.log'
renamed 'ozonesecure/result/s3g-audit-s3g.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/s3g-audit-s3g.log'
renamed 'ozonesecure/result/scm-audit-scm.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/scm-audit-scm.log'
Executing test ozonesecure/test-root-ca-rotation.sh
Removing network ozonesecure_default
Network ozonesecure_default not found.
Creating network "ozonesecure_default" with the default driver
Creating ozonesecure_kms_1 ... 
Creating ozonesecure_kdc_1 ... 
Creating ozonesecure_om_1  ... 
Creating ozonesecure_scm_1 ... 
Creating ozonesecure_datanode_1 ... 
Creating ozonesecure_datanode_2 ... 
Creating ozonesecure_datanode_3 ... 
Creating ozonesecure_s3g_1      ... 
Creating ozonesecure_httpfs_1   ... 
Creating ozonesecure_recon_1    ... 
Creating ozonesecure_kms_1      ... done
Creating ozonesecure_kdc_1      ... done
Creating ozonesecure_datanode_2 ... done
Creating ozonesecure_s3g_1      ... done
Creating ozonesecure_recon_1    ... done
Creating ozonesecure_om_1       ... done
Creating ozonesecure_scm_1      ... done
Creating ozonesecure_httpfs_1   ... done
Creating ozonesecure_datanode_1 ... done
Creating ozonesecure_datanode_3 ... done
Port 88 is available on kdc
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is available on scm
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 226
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 225
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 224
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 223
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 222
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 221
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 220
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 219
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 218
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 217
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 216
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 215
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 214
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 213
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 212
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 211
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 210
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 209
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 208
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 207
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 206
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 205
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 204
SCM is out of safe mode.
No OM HA service, no need to wait
key1 has been successfully created with options Options{cipher='AES/CTR/NoPadding', bitLength=128, description='null', attributes=null}.
org.apache.hadoop.crypto.key.kms.LoadBalancingKMSClientProvider@662b4c69 has been updated.
==============================================================================
Kinit :: Kinit test user                                                      
==============================================================================
Kinit                                                                 | PASS |
------------------------------------------------------------------------------
Kinit :: Kinit test user                                              | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure/result/robot-1.xml
"RootCARotationManager-Active" #271 daemon prio=5 os_prio=0 cpu=11.82ms elapsed=59.93s tid=0x00007f68b27cf800 nid=0x2be waiting on condition  [0x00007f686f7b6000]
jps | grep StorageContainerManagerStarter |  sed 's/StorageContainerManagerStarter//' | xargs | xargs -I {} jstack {} | grep 'RootCARotationManager-Active' succeed
Certificate not found
ozone admin cert info 2 hasn't succeed yet
Certificate id: 2
  [0]         Version: 3
         SerialNumber: 2
             IssuerDN: CN=scm-2@scm,OU=4d99f171-7e60-443d-905b-705cb4d0bd83,O=CID-453498c3-d173-45ee-b4d2-6e7b631c28ff
           Start Date: Fri Aug 04 02:27:21 UTC 2023
           Final Date: Fri Aug 04 02:30:21 UTC 2023
            SubjectDN: CN=scm-2@scm,OU=4d99f171-7e60-443d-905b-705cb4d0bd83,O=CID-453498c3-d173-45ee-b4d2-6e7b631c28ff
           Public Key: RSA Public Key [e8:35:f3:6d:09:41:d9:cf:51:b8:e7:14:c0:76:ad:68:96:c3:dc:f0],[56:66:d1:a4]
        modulus: a18349841eefbc66c4efb4ce99d0980c51b1cd4b4a282b0d53f3d031153abbefda05ec0eebd78083d9b05d0b2d0149c8ae9d09f2169ad80274d1008b6bc976baebc635db50f5ca3c73af1dea71a18f094c8f7b0bba1e0622ab84517ffa1b04b07a7d74bdc088a87d28eb14422858d9422bcf96cdc07d76cafd60db44415adc0805f2735c06b92b77ac1a7010eec0861cbd46ad6d7368cfdf89dc0a2e9012da13ff53189124b7de921ec3cb0fe97d39cfdb3e0d297e0e81c4a4fb7d4f7817f70dda8a6d91652928d57a9689e72368d42fd25b1f9ffd91bb0695c8c52a19cec24fcbf5cd077f7c6f1730020d16ff6520b28ecd255cdf3c2bb36e41c6d28aed123b
public exponent: 10001

  Signature Algorithm: SHA256withRSA
            Signature: 139011c48a79f0369418be496730c5bde2d48e74
                       9f60f332f803700757e1aba875da055d12d82c9d
                       b7ff78b764e943ca9fd3dee070a051c59c8a4506
                       06c2f070e50f68f6200dc4b118f4781114aa746e
                       f7ee8c19e4549f0c4195b250eb506357810e9c01
                       81583bbedbeb53288d4f743f7f0fb290eeec80f3
                       85d6c644213dc4794d0d06caab4428f800f434a5
                       e2bd41b1f74ec28b9b51f0df52f268a9a6dfeb2a
                       b47bdc8717dc34683ae99263c039e9d207c8704b
                       71fb2966297370f052164ad6c7696cb1c65a82c4
                       2ed5c79f2b06422655001238a1b8d9772fe13e6e
                       d6d836ffb86300b5ee4e182a0423eb9609885d78
                       43ccb1feeb10f8873af09a5030c28f89
       Extensions: 
                       critical(true) BasicConstraints: isCa(true)
                       critical(true) KeyUsage: 0x6
                       critical(false) 2.5.29.17 value = Sequence
    Tagged [7] IMPLICIT 
        DER Octet String[4] 


ozone admin cert info 2 succeed
find: '/data/metadata/dn/certs/ROOTCA-2.crt': No such file or directory
find /data/metadata/dn/certs/ROOTCA-2.crt hasn't succeed yet
/data/metadata/dn/certs/ROOTCA-2.crt
find /data/metadata/dn/certs/ROOTCA-2.crt succeed
find: '/data/metadata/om/certs/ROOTCA-2.crt': No such file or directory
find /data/metadata/om/certs/ROOTCA-2.crt hasn't succeed yet
/data/metadata/om/certs/ROOTCA-2.crt
find /data/metadata/om/certs/ROOTCA-2.crt succeed
==============================================================================
Root-Ca-Rotation-Client-Checks :: Generate data                               
==============================================================================
Create a volume and bucket                                            | PASS |
------------------------------------------------------------------------------
Create key                                                            | PASS |
------------------------------------------------------------------------------
Read data from previously created key                                 | PASS |
------------------------------------------------------------------------------
Root-Ca-Rotation-Client-Checks :: Generate data                       | PASS |
3 tests, 3 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure/result/robot-2.xml
Certificate not found
ozone admin cert info 3 hasn't succeed yet
Certificate not found
ozone admin cert info 3 hasn't succeed yet
Certificate not found
ozone admin cert info 3 hasn't succeed yet
Certificate not found
ozone admin cert info 3 hasn't succeed yet
Certificate not found
ozone admin cert info 3 hasn't succeed yet
Certificate id: 3
  [0]         Version: 3
         SerialNumber: 3
             IssuerDN: CN=scm-3@scm,OU=4d99f171-7e60-443d-905b-705cb4d0bd83,O=CID-453498c3-d173-45ee-b4d2-6e7b631c28ff
           Start Date: Fri Aug 04 02:28:52 UTC 2023
           Final Date: Fri Aug 04 02:31:52 UTC 2023
            SubjectDN: CN=scm-3@scm,OU=4d99f171-7e60-443d-905b-705cb4d0bd83,O=CID-453498c3-d173-45ee-b4d2-6e7b631c28ff
           Public Key: RSA Public Key [7a:d7:0d:5d:c7:d0:76:d6:84:01:fe:3f:43:8a:84:3d:2c:40:52:da],[56:66:d1:a4]
        modulus: 9ee885e8de497ecba1ca18989e39426fffb9648f6d6227f956991596061f4c999b9866da7880704af96a604b1eaba1a3459cfec8831a1dcca4050ec7b912cbc7f83a41dc02f890ae336a5ef747ba715f0ca917090103531eec6e57f667e17a3201bde8d052bd0e15169e48570e03e24d4effcb66b072704ce71727aac0818b18059655da99a93ec8f690774e05610ee40bf7f283a65e4e95a90e874c7a241d1d4c84a20b14159e7e310b6519b15aadaedf62c80b138be09b7a60ba7b22e0aa80f82a37cd99d589d8b7a451112eacc3c6d91ff52f9f899db19976b3e6a469b21638103633d052e20866839f85897140bf99b45df2f294b0780e3f5f12e4797189
public exponent: 10001

  Signature Algorithm: SHA256withRSA
            Signature: 3bf7e9f298bebeaf0797f8c555d5589dd10d3978
                       b0fde3a0adacfa082681585c769bb6a35f0aaa6a
                       326c497c2b3c0c9683361a1ca8065a041f1010e7
                       6505ff701940cad70fc42dd84b7f6a1fd204fac9
                       74f9822a12c547ae08d5ff3b891cbfba111e2717
                       97c2687ba57f162fad98c770772727c0967b60f0
                       833b5acf039ca48cfc3812e6912a71a5cbae83a2
                       7c4538fac167c2f622fd862737f43e3c255ee688
                       2b5d5ccb7abb72dbf2b8f7a991e59303ad86e195
                       6da50e111de0e7f67990a876db7645e6adb221c0
                       5c5a8bb92f7a5a9305cb1edb38edc235846d2e83
                       3f74b081bf25ceaf60f61633612d78a18894fca6
                       99422686164e9d7ebc416cfdab0df9f9
       Extensions: 
                       critical(true) BasicConstraints: isCa(true)
                       critical(true) KeyUsage: 0x6
                       critical(false) 2.5.29.17 value = Sequence
    Tagged [7] IMPLICIT 
        DER Octet String[4] 


ozone admin cert info 3 succeed
/data/metadata/om/certs/ROOTCA-3.crt
find /data/metadata/om/certs/ROOTCA-3.crt succeed
==============================================================================
Root-Ca-Rotation-Client-Checks :: Generate data                               
==============================================================================
Create a volume and bucket                                            | PASS |
------------------------------------------------------------------------------
Create key                                                            | PASS |
------------------------------------------------------------------------------
Read data from previously created key                                 | PASS |
------------------------------------------------------------------------------
Root-Ca-Rotation-Client-Checks :: Generate data                       | PASS |
3 tests, 3 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure/result/robot-3.xml
==============================================================================
Root-Ca-Rotation :: Smoketest ozone cluster startup                           
==============================================================================
Verify root CA rotation metrics                                       | PASS |
------------------------------------------------------------------------------
Root-Ca-Rotation :: Smoketest ozone cluster startup                   | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure/result/robot-4.xml
Stopping ozonesecure_httpfs_1   ... 
Stopping ozonesecure_datanode_1 ... 
Stopping ozonesecure_recon_1    ... 
Stopping ozonesecure_datanode_2 ... 
Stopping ozonesecure_datanode_3 ... 
Stopping ozonesecure_s3g_1      ... 
Stopping ozonesecure_scm_1      ... 
Stopping ozonesecure_om_1       ... 
Stopping ozonesecure_kms_1      ... 
Stopping ozonesecure_kdc_1      ... 
Stopping ozonesecure_kms_1      ... done
Stopping ozonesecure_kdc_1      ... done
Stopping ozonesecure_httpfs_1   ... done
Stopping ozonesecure_s3g_1      ... done
Stopping ozonesecure_recon_1    ... done
Stopping ozonesecure_datanode_2 ... done
Stopping ozonesecure_datanode_1 ... done
Stopping ozonesecure_datanode_3 ... done
Stopping ozonesecure_om_1       ... done
Stopping ozonesecure_scm_1      ... done
Removing ozonesecure_httpfs_1   ... 
Removing ozonesecure_datanode_1 ... 
Removing ozonesecure_recon_1    ... 
Removing ozonesecure_datanode_2 ... 
Removing ozonesecure_datanode_3 ... 
Removing ozonesecure_s3g_1      ... 
Removing ozonesecure_scm_1      ... 
Removing ozonesecure_om_1       ... 
Removing ozonesecure_kms_1      ... 
Removing ozonesecure_kdc_1      ... 
Removing ozonesecure_recon_1    ... done
Removing ozonesecure_om_1       ... done
Removing ozonesecure_kms_1      ... done
Removing ozonesecure_kdc_1      ... done
Removing ozonesecure_scm_1      ... done
Removing ozonesecure_datanode_1 ... done
Removing ozonesecure_s3g_1      ... done
Removing ozonesecure_httpfs_1   ... done
Removing ozonesecure_datanode_2 ... done
Removing ozonesecure_datanode_3 ... done
Removing network ozonesecure_default
Log:     /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/ozonesecure/result/log.html
Report:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/ozonesecure/result/report.html
Removing network ozonesecure_default
Network ozonesecure_default not found.
Output:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-root-ca-rotation.xml
removed 'ozonesecure/result/robot-1.xml'
removed 'ozonesecure/result/robot-2.xml'
removed 'ozonesecure/result/robot-3.xml'
removed 'ozonesecure/result/robot-4.xml'
removed 'ozonesecure/result/log.html'
removed 'ozonesecure/result/report.html'
renamed 'ozonesecure/result/dn-audit-0960e2dd30e9.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/dn-audit-0960e2dd30e9.log'
renamed 'ozonesecure/result/dn-audit-dba9fa26afa2.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/dn-audit-dba9fa26afa2.log'
renamed 'ozonesecure/result/dn-audit-ee6963c0a68a.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/dn-audit-ee6963c0a68a.log'
renamed 'ozonesecure/result/docker-ozonesecure_datanode_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_datanode_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_datanode_2.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_datanode_2.log'
renamed 'ozonesecure/result/docker-ozonesecure_datanode_3.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_datanode_3.log'
renamed 'ozonesecure/result/docker-ozonesecure_httpfs_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_httpfs_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_kdc_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_kdc_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_kms_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_kms_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_om_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_om_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_recon_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_recon_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_s3g_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_s3g_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_scm_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_scm_1.log'
renamed 'ozonesecure/result/kms-audit.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/kms-audit.log'
renamed 'ozonesecure/result/om-audit-om.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/om-audit-om.log'
renamed 'ozonesecure/result/s3g-audit-s3g.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/s3g-audit-s3g.log'
renamed 'ozonesecure/result/scm-audit-scm.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/scm-audit-scm.log'
Exception in thread "main" java.net.SocketException: Socket closed
	at java.base/java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.base/java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:474)
	at java.base/java.net.ServerSocket.implAccept(ServerSocket.java:565)
	at java.base/java.net.ServerSocket.accept(ServerSocket.java:533)
	at org.apache.hadoop.test.JacocoServer.main(JacocoServer.java:60)
Log:     /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/log.html
Report:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/report.html
