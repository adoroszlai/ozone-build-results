rm: cannot remove '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/*': No such file or directory
Executing test in ozone-legacy-bucket
Removing network ozone-legacy-bucket_default
Network ozone-legacy-bucket_default not found.
Creating network "ozone-legacy-bucket_default" with the default driver
Pulling datanode (apache/ozone-runner:20220623-1)...
20220623-1: Pulling from apache/ozone-runner
Digest: sha256:ba2ed07322bc8f888150fa2a1ec0523fca85e09c8eb9779445f8bca0d58cff97
Status: Downloaded newer image for apache/ozone-runner:20220623-1
Creating ozone-legacy-bucket_recon_1 ... 
Creating ozone-legacy-bucket_s3g_1   ... 
Creating ozone-legacy-bucket_om_1    ... 
Creating ozone-legacy-bucket_scm_1   ... 
Creating ozone-legacy-bucket_datanode_1 ... 
Creating ozone-legacy-bucket_datanode_2 ... 
Creating ozone-legacy-bucket_datanode_3 ... 
Creating ozone-legacy-bucket_datanode_4 ... 
Creating ozone-legacy-bucket_datanode_5 ... 
Creating ozone-legacy-bucket_recon_1    ... done
Creating ozone-legacy-bucket_s3g_1      ... done
Creating ozone-legacy-bucket_datanode_5 ... done
Creating ozone-legacy-bucket_scm_1      ... done
Creating ozone-legacy-bucket_om_1       ... done
Creating ozone-legacy-bucket_datanode_2 ... done
Creating ozone-legacy-bucket_datanode_1 ... done
Creating ozone-legacy-bucket_datanode_4 ... done
Creating ozone-legacy-bucket_datanode_3 ... done
SECONDS: 88
com.google.protobuf.ServiceException: java.net.ConnectException: Call From 1898d909ae22/172.18.0.5 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.18.0.5:9860 after 1 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From 1898d909ae22/172.18.0.5 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.18.0.5:9860 after 2 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From 1898d909ae22/172.18.0.5 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.18.0.5:9860 after 3 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From 1898d909ae22/172.18.0.5 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.18.0.5:9860 after 4 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From 1898d909ae22/172.18.0.5 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.18.0.5:9860 after 5 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.ratis.ServerNotLeaderException): Server:8036be97-5432-4d54-a213-e0da532bfc11 is not the leader. Could not determine the leader node. at org.apache.hadoop.hdds.ratis.ServerNotLeaderException.convertToNotLeaderException(ServerNotLeaderException.java:109) at org.apache.hadoop.hdds.scm.ha.RatisUtil.checkRatisException(RatisUtil.java:246) at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:193) at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:62741) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:465) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:578) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:556) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1043) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:971) at java.base/java.security.AccessController.doPrivileged(Native Method) at java.base/javax.security.auth.Subject.doAs(Subject.java:423) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2976) , while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.18.0.5:9860 after 6 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.ratis.ServerNotLeaderException): Server:8036be97-5432-4d54-a213-e0da532bfc11 is not the leader. Could not determine the leader node. at org.apache.hadoop.hdds.ratis.ServerNotLeaderException.convertToNotLeaderException(ServerNotLeaderException.java:109) at org.apache.hadoop.hdds.scm.ha.RatisUtil.checkRatisException(RatisUtil.java:246) at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:193) at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:62741) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:465) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:578) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:556) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1043) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:971) at java.base/java.security.AccessController.doPrivileged(Native Method) at java.base/javax.security.auth.Subject.doAs(Subject.java:423) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2976) , while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.18.0.5:9860 after 7 failover attempts. Trying to failover after sleeping for 2000ms. SCM is in safe mode. validated:true, DataNodeSafeModeRule, registered datanodes (=5) >= required datanodes (=5) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:true, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=0)
SECONDS: 113
SCM is in safe mode. validated:true, DataNodeSafeModeRule, registered datanodes (=5) >= required datanodes (=5) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:true, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=0)
SECONDS: 123
SCM is out of safe mode.
Safe mode is off
No OM HA service, no need to wait
==============================================================================
Recon-Nssummary :: Smoke test for Recon Namespace Summary Endpoint for LEGA...
==============================================================================
Check volume creation                                                 | PASS |
------------------------------------------------------------------------------
Check bucket creation                                                 | PASS |
------------------------------------------------------------------------------
Check keys creation                                                   | PASS |
------------------------------------------------------------------------------
Check Summary api access                                              | PASS |
------------------------------------------------------------------------------
Check Disk Usage api access                                           | PASS |
------------------------------------------------------------------------------
Check Quota Usage api access                                          | PASS |
------------------------------------------------------------------------------
Check File Size Distribution api access                               | PASS |
------------------------------------------------------------------------------
Check Recon Namespace Summary Root                                    | PASS |
------------------------------------------------------------------------------
Check Recon Namespace Summary Volume                                  | PASS |
------------------------------------------------------------------------------
Check Recon Namespace Summary Bucket                                  | PASS |
------------------------------------------------------------------------------
Check Recon Namespace Summary Key                                     | PASS |
------------------------------------------------------------------------------
Check Recon Namespace Summary Directory                               | PASS |
------------------------------------------------------------------------------
Check Recon Namespace Disk Usage                                      | PASS |
------------------------------------------------------------------------------
Check Recon Namespace Volume Quota Usage                              | PASS |
------------------------------------------------------------------------------
Check Recon Namespace Bucket Quota Usage                              | PASS |
------------------------------------------------------------------------------
Check Recon Namespace File Size Distribution Root                     | PASS |
------------------------------------------------------------------------------
Recon-Nssummary :: Smoke test for Recon Namespace Summary Endpoint... | PASS |
16 tests, 16 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozone-legacy-bucket/result/robot-ozone-legacy-bucket-ozone-legacy-bucket-recon-nssummary-scm.xml
Stopping ozone-legacy-bucket_datanode_3 ... 
Stopping ozone-legacy-bucket_datanode_4 ... 
Stopping ozone-legacy-bucket_datanode_1 ... 
Stopping ozone-legacy-bucket_datanode_2 ... 
Stopping ozone-legacy-bucket_datanode_5 ... 
Stopping ozone-legacy-bucket_scm_1      ... 
Stopping ozone-legacy-bucket_om_1       ... 
Stopping ozone-legacy-bucket_s3g_1      ... 
Stopping ozone-legacy-bucket_recon_1    ... 
Stopping ozone-legacy-bucket_s3g_1      ... done
Stopping ozone-legacy-bucket_om_1       ... done
Stopping ozone-legacy-bucket_recon_1    ... done
Stopping ozone-legacy-bucket_datanode_3 ... done
Stopping ozone-legacy-bucket_datanode_1 ... done
Stopping ozone-legacy-bucket_datanode_4 ... done
Stopping ozone-legacy-bucket_datanode_5 ... done
Stopping ozone-legacy-bucket_datanode_2 ... done
Stopping ozone-legacy-bucket_scm_1      ... done
Removing ozone-legacy-bucket_datanode_3 ... 
Removing ozone-legacy-bucket_datanode_4 ... 
Removing ozone-legacy-bucket_datanode_1 ... 
Removing ozone-legacy-bucket_datanode_2 ... 
Removing ozone-legacy-bucket_datanode_5 ... 
Removing ozone-legacy-bucket_scm_1      ... 
Removing ozone-legacy-bucket_om_1       ... 
Removing ozone-legacy-bucket_s3g_1      ... 
Removing ozone-legacy-bucket_recon_1    ... 
Removing ozone-legacy-bucket_datanode_2 ... done
Removing ozone-legacy-bucket_om_1       ... done
Removing ozone-legacy-bucket_datanode_1 ... done
Removing ozone-legacy-bucket_datanode_5 ... done
Removing ozone-legacy-bucket_s3g_1      ... done
Removing ozone-legacy-bucket_datanode_3 ... done
Removing ozone-legacy-bucket_scm_1      ... done
Removing ozone-legacy-bucket_recon_1    ... done
Removing ozone-legacy-bucket_datanode_4 ... done
Removing network ozone-legacy-bucket_default
Log:     /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/ozone-legacy-bucket/result/log.html
Report:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/ozone-legacy-bucket/result/report.html
Output:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-legacy-bucket.xml
removed 'ozone-legacy-bucket/result/robot-ozone-legacy-bucket-ozone-legacy-bucket-recon-nssummary-scm.xml'
removed 'ozone-legacy-bucket/result/log.html'
removed 'ozone-legacy-bucket/result/report.html'
renamed 'ozone-legacy-bucket/result/dn-audit-2706491cd5f6.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-legacy-bucket/dn-audit-2706491cd5f6.log'
renamed 'ozone-legacy-bucket/result/dn-audit-88faf1c2abe6.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-legacy-bucket/dn-audit-88faf1c2abe6.log'
renamed 'ozone-legacy-bucket/result/dn-audit-8e31dcea51a8.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-legacy-bucket/dn-audit-8e31dcea51a8.log'
renamed 'ozone-legacy-bucket/result/dn-audit-ad1ff48b9685.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-legacy-bucket/dn-audit-ad1ff48b9685.log'
renamed 'ozone-legacy-bucket/result/dn-audit-eafe2f3b9d53.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-legacy-bucket/dn-audit-eafe2f3b9d53.log'
renamed 'ozone-legacy-bucket/result/docker-ozone-legacy-bucket-ozone-legacy-bucket-recon-nssummary-scm.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-legacy-bucket/docker-ozone-legacy-bucket-ozone-legacy-bucket-recon-nssummary-scm.log'
renamed 'ozone-legacy-bucket/result/om-audit-8d15445c285b.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-legacy-bucket/om-audit-8d15445c285b.log'
renamed 'ozone-legacy-bucket/result/s3g-audit-585031d59482.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-legacy-bucket/s3g-audit-585031d59482.log'
renamed 'ozone-legacy-bucket/result/scm-audit-1898d909ae22.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-legacy-bucket/scm-audit-1898d909ae22.log'
Executing test in ozone
Removing network ozone_default
Network ozone_default not found.
Creating network "ozone_default" with the default driver
Creating ozone_s3g_1 ... 
Creating ozone_om_1  ... 
Creating ozone_recon_1 ... 
Creating ozone_scm_1   ... 
Creating ozone_datanode_1 ... 
Creating ozone_datanode_2 ... 
Creating ozone_datanode_3 ... 
Creating ozone_datanode_4 ... 
Creating ozone_datanode_5 ... 
Creating ozone_s3g_1      ... done
Creating ozone_recon_1    ... done
Creating ozone_om_1       ... done
Creating ozone_datanode_2 ... done
Creating ozone_datanode_1 ... done
Creating ozone_scm_1      ... done
Creating ozone_datanode_5 ... done
Creating ozone_datanode_3 ... done
Creating ozone_datanode_4 ... done
SECONDS: 92
com.google.protobuf.ServiceException: java.net.ConnectException: Call From 626d7e7df3a0/172.19.0.8 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.19.0.8:9860 after 1 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From 626d7e7df3a0/172.19.0.8 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.19.0.8:9860 after 2 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From 626d7e7df3a0/172.19.0.8 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.19.0.8:9860 after 3 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From 626d7e7df3a0/172.19.0.8 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.19.0.8:9860 after 4 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From 626d7e7df3a0/172.19.0.8 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.19.0.8:9860 after 5 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From 626d7e7df3a0/172.19.0.8 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.19.0.8:9860 after 6 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From 626d7e7df3a0/172.19.0.8 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.19.0.8:9860 after 7 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.ratis.ServerNotLeaderException): Server:b6e9598f-7e84-448e-8adc-93ec54f5ece5 is not the leader. Could not determine the leader node. at org.apache.hadoop.hdds.ratis.ServerNotLeaderException.convertToNotLeaderException(ServerNotLeaderException.java:109) at org.apache.hadoop.hdds.scm.ha.RatisUtil.checkRatisException(RatisUtil.java:246) at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:193) at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:62741) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:465) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:578) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:556) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1043) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:971) at java.base/java.security.AccessController.doPrivileged(Native Method) at java.base/javax.security.auth.Subject.doAs(Subject.java:423) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2976) , while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.19.0.8:9860 after 8 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.ratis.ServerNotLeaderException): Server:b6e9598f-7e84-448e-8adc-93ec54f5ece5 is not the leader. Could not determine the leader node. at org.apache.hadoop.hdds.ratis.ServerNotLeaderException.convertToNotLeaderException(ServerNotLeaderException.java:109) at org.apache.hadoop.hdds.scm.ha.RatisUtil.checkRatisException(RatisUtil.java:246) at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:193) at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:62741) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:465) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:578) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:556) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1043) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:971) at java.base/java.security.AccessController.doPrivileged(Native Method) at java.base/javax.security.auth.Subject.doAs(Subject.java:423) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2976) , while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.19.0.8:9860 after 9 failover attempts. Trying to failover after sleeping for 2000ms. SCM is in safe mode. validated:true, DataNodeSafeModeRule, registered datanodes (=5) >= required datanodes (=5) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:true, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=0)
SECONDS: 119
SCM is out of safe mode.
Safe mode is off
No OM HA service, no need to wait
==============================================================================
Lib                                                                           
==============================================================================
Lib.Fs Tests                                                                  
==============================================================================
Format o3fs URL without path                                          | PASS |
------------------------------------------------------------------------------
Format o3fs URL with path                                             | PASS |
------------------------------------------------------------------------------
Format o3fs URL with OM                                               | PASS |
------------------------------------------------------------------------------
Format ofs URL without path                                           | PASS |
------------------------------------------------------------------------------
Format ofs URL with path                                              | PASS |
------------------------------------------------------------------------------
Format ofs URL with OM                                                | PASS |
------------------------------------------------------------------------------
Format FS URL with ofs scheme                                         | PASS |
------------------------------------------------------------------------------
Format FS URL with o3fs scheme                                        | PASS |
------------------------------------------------------------------------------
Format FS URL with unsupported scheme                                 | PASS |
------------------------------------------------------------------------------
Lib.Fs Tests                                                          | PASS |
9 tests, 9 passed, 0 failed
==============================================================================
Lib.Os Tests                                                                  
==============================================================================
Execute                                                               | PASS |
------------------------------------------------------------------------------
Execute failing command                                               | PASS |
------------------------------------------------------------------------------
Execute And Ignore Error                                              | PASS |
------------------------------------------------------------------------------
Execute and checkrc                                                   | PASS |
------------------------------------------------------------------------------
Execute and checkrc RC mismatch                                       | PASS |
------------------------------------------------------------------------------
Lib.Os Tests                                                          | PASS |
5 tests, 5 passed, 0 failed
==============================================================================
Lib.String Tests                                                              
==============================================================================
Ensure Leading without Leading                                        | PASS |
------------------------------------------------------------------------------
Ensure Leading with Leading                                           | PASS |
------------------------------------------------------------------------------
Ensure Leading for empty                                              | PASS |
------------------------------------------------------------------------------
Ensure Trailing without Trailing                                      | PASS |
------------------------------------------------------------------------------
Ensure Trailing with Trailing                                         | PASS |
------------------------------------------------------------------------------
Ensure Trailing for empty                                             | PASS |
------------------------------------------------------------------------------
Lib.String Tests                                                      | PASS |
6 tests, 6 passed, 0 failed
==============================================================================
Lib                                                                   | PASS |
20 tests, 20 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozone/result/robot-ozone-ozone-lib-scm.xml
==============================================================================
Ozone-Lib                                                                     
==============================================================================
Ozone-Lib.Shell Tests                                                         
==============================================================================
Bucket Exists should not if No Such Volume                            | PASS |
------------------------------------------------------------------------------
Bucket Exists should not if No Such Bucket                            | PASS |
------------------------------------------------------------------------------
Bucket Exists                                                         | PASS |
------------------------------------------------------------------------------
Bucket Exists should not if No Such OM service                        | PASS |
------------------------------------------------------------------------------
Key Should Match Local File                                           | PASS |
------------------------------------------------------------------------------
Compare Key With Local File with Different File                       | PASS |
------------------------------------------------------------------------------
Compare Key With Local File if File Does Not Exist                    | PASS |
------------------------------------------------------------------------------
Ozone-Lib.Shell Tests                                                 | PASS |
7 tests, 7 passed, 0 failed
==============================================================================
Ozone-Lib                                                             | PASS |
7 tests, 7 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozone/result/robot-ozone-ozone-lib-scm-1.xml
==============================================================================
Auditparser                                                                   
==============================================================================
Auditparser.Auditparser :: Smoketest ozone cluster startup                    
==============================================================================
Testing audit parser                                                  | PASS |
------------------------------------------------------------------------------
Auditparser.Auditparser :: Smoketest ozone cluster startup            | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Auditparser                                                           | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozone/result/robot-ozone-ozone-lib-scm-2.xml
==============================================================================
Basic                                                                         
==============================================================================
Basic.Basic :: Smoketest ozone cluster startup                                
==============================================================================
Check webui static resources                                          | PASS |
------------------------------------------------------------------------------
Basic Freon smoketest                                                 | PASS |
------------------------------------------------------------------------------
Basic.Basic :: Smoketest ozone cluster startup                        | PASS |
2 tests, 2 passed, 0 failed
==============================================================================
Basic.Getconf :: Test 'ozone getconf' command                                 
==============================================================================
Get OM                                                                | PASS |
------------------------------------------------------------------------------
Get SCM                                                               | PASS |
------------------------------------------------------------------------------
Get existing config key                                               | PASS |
------------------------------------------------------------------------------
Get undefined config key                                              | PASS |
------------------------------------------------------------------------------
Basic.Getconf :: Test 'ozone getconf' command                         | PASS |
4 tests, 4 passed, 0 failed
==============================================================================
Basic.Links :: Test bucket links via Ozone CLI                                
==============================================================================
Link to non-existent bucket                                           | PASS |
------------------------------------------------------------------------------
Key create passthrough                                                | PASS |
------------------------------------------------------------------------------
Key read passthrough                                                  | PASS |
------------------------------------------------------------------------------
Key list passthrough                                                  | PASS |
------------------------------------------------------------------------------
Key delete passthrough                                                | PASS |
------------------------------------------------------------------------------
Bucket list contains links                                            | PASS |
------------------------------------------------------------------------------
Bucket info shows source                                              | PASS |
------------------------------------------------------------------------------
Source and target have separate ACLs                                  | PASS |
------------------------------------------------------------------------------
Buckets and links share namespace                                     | PASS |
------------------------------------------------------------------------------
Can follow link with read access                                      | PASS |
------------------------------------------------------------------------------
Cannot follow link without read access                                | PASS |
------------------------------------------------------------------------------
ACL verified on source bucket                                         | PASS |
------------------------------------------------------------------------------
Loop in link chain is detected                                        | PASS |
------------------------------------------------------------------------------
Multiple links to same bucket are allowed                             | PASS |
------------------------------------------------------------------------------
Source bucket not affected by deleting link                           | PASS |
------------------------------------------------------------------------------
Setting bucket property on link not allowed                           | PASS |
------------------------------------------------------------------------------
Basic.Links :: Test bucket links via Ozone CLI                        | PASS |
16 tests, 16 passed, 0 failed
==============================================================================
Basic.Ozone-Shell-Single :: Test ozone shell CLI usage                        
==============================================================================
Test ozone shell                                                      | FAIL |
Test timeout 5 minutes exceeded.
------------------------------------------------------------------------------
Basic.Ozone-Shell-Single :: Test ozone shell CLI usage                | FAIL |
1 test, 0 passed, 1 failed
==============================================================================
Basic.Ozone-Shell :: Test ozone shell CLI usage                               
==============================================================================
RpcClient with port                                                   | PASS |
------------------------------------------------------------------------------
RpcClient with execution errors                                       | PASS |
------------------------------------------------------------------------------
RpcClient volume acls                                                 | PASS |
------------------------------------------------------------------------------
RpcClient bucket acls                                                 | PASS |
------------------------------------------------------------------------------
RpcClient key acls                                                    | PASS |
------------------------------------------------------------------------------
RpcClient prefix acls                                                 | PASS |
------------------------------------------------------------------------------
RpcClient without host                                                | FAIL |
Test timeout 5 minutes exceeded.
------------------------------------------------------------------------------
Basic.Ozone-Shell :: Test ozone shell CLI usage                       | FAIL |
7 tests, 6 passed, 1 failed
==============================================================================
Basic.Single Node :: Smoketest for one datanode                               
==============================================================================
Basic Freon smoketest for one datanode                                | PASS |
------------------------------------------------------------------------------
Basic.Single Node :: Smoketest for one datanode                       | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Basic                                                                 | FAIL |
31 tests, 29 passed, 2 failed
==============================================================================
Output:  /tmp/smoketest/ozone/result/robot-ozone-ozone-lib-scm-3.xml
jstack 8 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/ozone/result/ozone_datanode_1_HddsDatanodeService.stack
jstack 6 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/ozone/result/ozone_datanode_2_HddsDatanodeService.stack
jstack 7 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/ozone/result/ozone_datanode_3_HddsDatanodeService.stack
jstack 7 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/ozone/result/ozone_datanode_4_HddsDatanodeService.stack
jstack 7 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/ozone/result/ozone_datanode_5_HddsDatanodeService.stack
jstack 7 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/ozone/result/ozone_om_1_OzoneManagerStarter.stack
jstack 7 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/ozone/result/ozone_recon_1_ReconServer.stack
jstack 7 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/ozone/result/ozone_s3g_1_Gateway.stack
jstack 7 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/ozone/result/ozone_scm_1_StorageContainerManagerStarter.stack
Stopping ozone_datanode_4 ... 
Stopping ozone_datanode_1 ... 
Stopping ozone_datanode_5 ... 
Stopping ozone_datanode_3 ... 
Stopping ozone_scm_1      ... 
Stopping ozone_datanode_2 ... 
Stopping ozone_recon_1    ... 
Stopping ozone_om_1       ... 
Stopping ozone_s3g_1      ... 
Stopping ozone_s3g_1      ... done
Stopping ozone_om_1       ... done
Stopping ozone_recon_1    ... done
Stopping ozone_datanode_5 ... done
Stopping ozone_datanode_4 ... done
Stopping ozone_datanode_3 ... done
Stopping ozone_datanode_1 ... done
Stopping ozone_datanode_2 ... done
Stopping ozone_scm_1      ... done
Removing ozone_datanode_4 ... 
Removing ozone_datanode_1 ... 
Removing ozone_datanode_5 ... 
Removing ozone_datanode_3 ... 
Removing ozone_scm_1      ... 
Removing ozone_datanode_2 ... 
Removing ozone_recon_1    ... 
Removing ozone_om_1       ... 
Removing ozone_s3g_1      ... 
Removing ozone_datanode_4 ... done
Removing ozone_om_1       ... done
Removing ozone_datanode_2 ... done
Removing ozone_datanode_5 ... done
Removing ozone_s3g_1      ... done
Removing ozone_scm_1      ... done
Removing ozone_recon_1    ... done
Removing ozone_datanode_3 ... done
Removing ozone_datanode_1 ... done
Removing network ozone_default
ERROR: Test execution of ozone is FAILED!!!!
Output:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone.xml
removed 'ozone/result/robot-ozone-ozone-lib-scm-1.xml'
removed 'ozone/result/robot-ozone-ozone-lib-scm-2.xml'
removed 'ozone/result/robot-ozone-ozone-lib-scm-3.xml'
removed 'ozone/result/robot-ozone-ozone-lib-scm.xml'
renamed 'ozone/result/dn-audit-78e970b267af.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone/dn-audit-78e970b267af.log'
renamed 'ozone/result/dn-audit-7b43d2524daf.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone/dn-audit-7b43d2524daf.log'
renamed 'ozone/result/dn-audit-b4eb83f109d3.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone/dn-audit-b4eb83f109d3.log'
renamed 'ozone/result/dn-audit-dcc9e7b7535b.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone/dn-audit-dcc9e7b7535b.log'
renamed 'ozone/result/dn-audit-e45241c3ac06.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone/dn-audit-e45241c3ac06.log'
renamed 'ozone/result/docker-ozone-ozone-lib-scm.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone/docker-ozone-ozone-lib-scm.log'
renamed 'ozone/result/om-audit-4be0a785e203.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone/om-audit-4be0a785e203.log'
renamed 'ozone/result/ozone_datanode_1_HddsDatanodeService.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone/ozone_datanode_1_HddsDatanodeService.stack'
renamed 'ozone/result/ozone_datanode_2_HddsDatanodeService.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone/ozone_datanode_2_HddsDatanodeService.stack'
renamed 'ozone/result/ozone_datanode_3_HddsDatanodeService.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone/ozone_datanode_3_HddsDatanodeService.stack'
renamed 'ozone/result/ozone_datanode_4_HddsDatanodeService.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone/ozone_datanode_4_HddsDatanodeService.stack'
renamed 'ozone/result/ozone_datanode_5_HddsDatanodeService.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone/ozone_datanode_5_HddsDatanodeService.stack'
renamed 'ozone/result/ozone_om_1_OzoneManagerStarter.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone/ozone_om_1_OzoneManagerStarter.stack'
renamed 'ozone/result/ozone_recon_1_ReconServer.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone/ozone_recon_1_ReconServer.stack'
renamed 'ozone/result/ozone_s3g_1_Gateway.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone/ozone_s3g_1_Gateway.stack'
renamed 'ozone/result/ozone_scm_1_StorageContainerManagerStarter.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone/ozone_scm_1_StorageContainerManagerStarter.stack'
renamed 'ozone/result/s3g-audit-2e610f9c0e2f.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone/s3g-audit-2e610f9c0e2f.log'
renamed 'ozone/result/scm-audit-626d7e7df3a0.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone/scm-audit-626d7e7df3a0.log'
Exception in thread "main" Log:     /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/log.html
Report:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/report.html
