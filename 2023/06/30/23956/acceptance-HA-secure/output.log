rm: cannot remove '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/*': No such file or directory
Executing test ozonesecure-ha/test.sh
Removing network ozonesecure-ha_ozone_net
Network ozonesecure-ha_ozone_net not found.
Creating network "ozonesecure-ha_ozone_net" with the default driver
Pulling kdc (apache/ozone-testkrb5:20230318-1)...
20230318-1: Pulling from apache/ozone-testkrb5
Digest: sha256:6a7eeac1ebd12e8968e34ab93fb8d21f2b92ae52bc0a85b662a2d41065f05d3a
Status: Downloaded newer image for apache/ozone-testkrb5:20230318-1
Pulling kms (apache/hadoop:3.3.6)...
3.3.6: Pulling from apache/hadoop
Digest: sha256:62a22627f35a1bbf29c721192c02fe311c93749cc43d51df01792b2ac40ff144
Status: Downloaded newer image for apache/hadoop:3.3.6
Pulling datanode1 (apache/ozone-runner:20230503-1)...
20230503-1: Pulling from apache/ozone-runner
Digest: sha256:9c224951bb5655c8b5a0c58a72478a17dc594a75a5e4acb89c93bf0885c3fe73
Status: Downloaded newer image for apache/ozone-runner:20230503-1
Creating ozonesecure-ha_httpfs_1 ... 
Creating ozonesecure-ha_recon_1  ... 
Creating ozonesecure-ha_scm2.org_1 ... 
Creating ozonesecure-ha_scm3.org_1 ... 
Creating ozonesecure-ha_om2_1      ... 
Creating ozonesecure-ha_om1_1      ... 
Creating ozonesecure-ha_s3g_1      ... 
Creating ozonesecure-ha_datanode3_1 ... 
Creating ozonesecure-ha_scm1.org_1  ... 
Creating ozonesecure-ha_om3_1       ... 
Creating ozonesecure-ha_kms_1       ... 
Creating ozonesecure-ha_kdc_1       ... 
Creating ozonesecure-ha_datanode2_1 ... 
Creating ozonesecure-ha_datanode1_1 ... 
Creating ozonesecure-ha_recon_1     ... done
Creating ozonesecure-ha_scm2.org_1  ... done
Creating ozonesecure-ha_httpfs_1    ... done
Creating ozonesecure-ha_scm3.org_1  ... done
Creating ozonesecure-ha_kdc_1       ... done
Creating ozonesecure-ha_s3g_1       ... done
Creating ozonesecure-ha_om1_1       ... done
Creating ozonesecure-ha_datanode3_1 ... done
Creating ozonesecure-ha_scm1.org_1  ... done
Creating ozonesecure-ha_kms_1       ... done
Creating ozonesecure-ha_om2_1       ... done
Creating ozonesecure-ha_datanode2_1 ... done
Creating ozonesecure-ha_datanode1_1 ... done
Creating ozonesecure-ha_om3_1       ... done
SECONDS: 55
com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm1.org/172.25.0.116 to scm1.org:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy21.submitRequest over nodeId=scm1,nodeAddress=scm1.org/172.25.0.116:9860 after 3 failover attempts. Trying to failover after sleeping for 2000ms. Current retry count: 3. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm1.org/172.25.0.116 to scm2.org:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy21.submitRequest over nodeId=scm2,nodeAddress=scm2.org/172.25.0.117:9860 after 4 failover attempts. Trying to failover after sleeping for 2000ms. Current retry count: 4. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm1.org/172.25.0.116 to scm3.org:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy21.submitRequest over nodeId=scm3,nodeAddress=scm3.org/172.25.0.118:9860 after 5 failover attempts. Trying to failover after sleeping for 2000ms. Current retry count: 5. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm1.org/172.25.0.116 to scm1.org:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy21.submitRequest over nodeId=scm1,nodeAddress=scm1.org/172.25.0.116:9860 after 6 failover attempts. Trying to failover after sleeping for 2000ms. Current retry count: 6. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm1.org/172.25.0.116 to scm2.org:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy21.submitRequest over nodeId=scm2,nodeAddress=scm2.org/172.25.0.117:9860 after 7 failover attempts. Trying to failover after sleeping for 2000ms. Current retry count: 7. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm1.org/172.25.0.116 to scm3.org:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy21.submitRequest over nodeId=scm3,nodeAddress=scm3.org/172.25.0.118:9860 after 8 failover attempts. Trying to failover after sleeping for 2000ms. Current retry count: 8. com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.ratis.ServerNotLeaderException): Server:02b7c0b0-aa69-44ec-aef0-c56929ad0a12 is not the leader. Could not determine the leader node. at org.apache.hadoop.hdds.ratis.ServerNotLeaderException.convertToNotLeaderException(ServerNotLeaderException.java:109) at org.apache.hadoop.hdds.scm.ha.RatisUtil.checkRatisException(RatisUtil.java:249) at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:199) at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:484) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:595) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:573) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1227) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1094) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1017) at java.base/java.security.AccessController.doPrivileged(Native Method) at java.base/javax.security.auth.Subject.doAs(Subject.java:423) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1899) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:3048) , while invoking $Proxy21.submitRequest over nodeId=scm1,nodeAddress=scm1.org/172.25.0.116:9860 after 9 failover attempts. Trying to failover after sleeping for 2000ms. Current retry count: 9. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm1.org/172.25.0.116 to scm2.org:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy21.submitRequest over nodeId=scm2,nodeAddress=scm2.org/172.25.0.117:9860 after 10 failover attempts. Trying to failover after sleeping for 2000ms. Current retry count: 10. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm1.org/172.25.0.116 to scm3.org:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy21.submitRequest over nodeId=scm3,nodeAddress=scm3.org/172.25.0.118:9860 after 11 failover attempts. Trying to failover after sleeping for 2000ms. Current retry count: 11. SCM is in safe mode. validated:false, DataNodeSafeModeRule, registered datanodes (=0) >= required datanodes (=3) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:true, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=0)
SECONDS: 79
SCM is in safe mode. validated:false, DataNodeSafeModeRule, registered datanodes (=0) >= required datanodes (=3) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:true, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=0)
SECONDS: 100
SCM is in safe mode. validated:false, DataNodeSafeModeRule, registered datanodes (=0) >= required datanodes (=3) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:true, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=0)
SECONDS: 132
SCM is in safe mode. validated:false, DataNodeSafeModeRule, registered datanodes (=0) >= required datanodes (=3) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:true, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=0)
SECONDS: 240
SCM is in safe mode. validated:true, DataNodeSafeModeRule, registered datanodes (=3) >= required datanodes (=3) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:true, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=0)
WARNING! Safemode is still on. Please check the docker-compose files
Stopping ozonesecure-ha_datanode1_1 ... 
Stopping ozonesecure-ha_datanode2_1 ... 
Stopping ozonesecure-ha_kdc_1       ... 
Stopping ozonesecure-ha_kms_1       ... 
Stopping ozonesecure-ha_om3_1       ... 
Stopping ozonesecure-ha_datanode3_1 ... 
Stopping ozonesecure-ha_scm1.org_1  ... 
Stopping ozonesecure-ha_s3g_1       ... 
Stopping ozonesecure-ha_om1_1       ... 
Stopping ozonesecure-ha_om2_1       ... 
Stopping ozonesecure-ha_scm3.org_1  ... 
Stopping ozonesecure-ha_scm2.org_1  ... 
Stopping ozonesecure-ha_recon_1     ... 
Stopping ozonesecure-ha_httpfs_1    ... 
Stopping ozonesecure-ha_kdc_1       ... done
Stopping ozonesecure-ha_kms_1       ... done
Stopping ozonesecure-ha_httpfs_1    ... done
Stopping ozonesecure-ha_om3_1       ... done
Stopping ozonesecure-ha_om2_1       ... done
Stopping ozonesecure-ha_s3g_1       ... done
Stopping ozonesecure-ha_recon_1     ... done
Stopping ozonesecure-ha_om1_1       ... done
Stopping ozonesecure-ha_datanode3_1 ... done
Stopping ozonesecure-ha_datanode1_1 ... done
Stopping ozonesecure-ha_datanode2_1 ... done
Stopping ozonesecure-ha_scm2.org_1  ... done
Stopping ozonesecure-ha_scm3.org_1  ... done
Stopping ozonesecure-ha_scm1.org_1  ... done
Removing ozonesecure-ha_datanode1_1 ... 
Removing ozonesecure-ha_datanode2_1 ... 
Removing ozonesecure-ha_kdc_1       ... 
Removing ozonesecure-ha_kms_1       ... 
Removing ozonesecure-ha_om3_1       ... 
Removing ozonesecure-ha_datanode3_1 ... 
Removing ozonesecure-ha_scm1.org_1  ... 
Removing ozonesecure-ha_s3g_1       ... 
Removing ozonesecure-ha_om1_1       ... 
Removing ozonesecure-ha_om2_1       ... 
Removing ozonesecure-ha_scm3.org_1  ... 
Removing ozonesecure-ha_scm2.org_1  ... 
Removing ozonesecure-ha_recon_1     ... 
Removing ozonesecure-ha_httpfs_1    ... 
Removing ozonesecure-ha_kms_1       ... done
Removing ozonesecure-ha_om1_1       ... done
Removing ozonesecure-ha_datanode3_1 ... done
Removing ozonesecure-ha_datanode1_1 ... done
Removing ozonesecure-ha_scm2.org_1  ... done
Removing ozonesecure-ha_httpfs_1    ... done
Removing ozonesecure-ha_kdc_1       ... done
Removing ozonesecure-ha_scm3.org_1  ... done
Removing ozonesecure-ha_s3g_1       ... done
Removing ozonesecure-ha_om2_1       ... done
Removing ozonesecure-ha_datanode2_1 ... done
Removing ozonesecure-ha_om3_1       ... done
Removing ozonesecure-ha_scm1.org_1  ... done
Removing ozonesecure-ha_recon_1     ... done
Removing network ozonesecure-ha_ozone_net
ERROR: Test execution of ozonesecure-ha/test.sh is FAILED!!!!
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/docker-ozonesecure-ha.log'
Exception in thread "main" java.net.SocketException: Socket closed
	at java.base/java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.base/java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:474)
	at java.base/java.net.ServerSocket.implAccept(ServerSocket.java:565)
	at java.base/java.net.ServerSocket.accept(ServerSocket.java:533)
	at org.apache.hadoop.test.JacocoServer.main(JacocoServer.java:60)
[ ERROR ] Reading XML source '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/*.xml' failed: No such file or directory

Try --help for usage information.
