2023-09-06 17:45:43,975 [main] INFO  client.SCMCertificateClient (DefaultCertificateClient.java:updateCertSerialId(1244)) - Certificate serial ID set to 1
2023-09-06 17:45:43,977 [main] WARN  client.SCMCertificateClient (DefaultCertificateClient.java:loadAllCertificates(173)) - Certificates could not be loaded.
java.nio.file.NoSuchFileException: /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestRootCARotationManagera2c1e953-05e8-4af1-8b61-1c285e5582c7/scm/sub-ca/certs
	at sun.nio.fs.UnixException.translateToIOException(UnixException.java:86)
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102)
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107)
	at sun.nio.fs.UnixFileSystemProvider.newDirectoryStream(UnixFileSystemProvider.java:427)
	at java.nio.file.Files.newDirectoryStream(Files.java:457)
	at java.nio.file.Files.list(Files.java:3451)
	at org.apache.hadoop.hdds.security.x509.certificate.client.DefaultCertificateClient.loadAllCertificates(DefaultCertificateClient.java:168)
	at org.apache.hadoop.hdds.security.x509.certificate.client.DefaultCertificateClient.updateCertSerialId(DefaultCertificateClient.java:1245)
	at org.apache.hadoop.hdds.security.x509.certificate.client.DefaultCertificateClient.<init>(DefaultCertificateClient.java:157)
	at org.apache.hadoop.hdds.security.x509.certificate.client.SCMCertificateClient.<init>(SCMCertificateClient.java:74)
	at org.apache.hadoop.hdds.scm.security.TestRootCARotationManager.init(TestRootCARotationManager.java:113)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptLifecycleMethod(TimeoutExtension.java:126)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptBeforeEachMethod(TimeoutExtension.java:76)
	at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeMethodInExtensionContext(ClassBasedTestDescriptor.java:506)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$synthesizeBeforeEachMethodAdapter$21(ClassBasedTestDescriptor.java:491)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachMethods$3(TestMethodTestDescriptor.java:171)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$6(TestMethodTestDescriptor.java:199)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:199)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachMethods(TestMethodTestDescriptor.java:168)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:131)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.util.ArrayList.forEach(ArrayList.java:1259)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.util.ArrayList.forEach(ArrayList.java:1259)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:188)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:154)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:428)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:562)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:548)
2023-09-06 17:45:44,271 [main] WARN  server.ServerUtils (ServerUtils.java:getScmDbDir(155)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2023-09-06 17:45:44,481 [main] INFO  reflections.Reflections (Reflections.java:scan(232)) - Reflections took 165 ms to scan 6 urls, producing 158 keys and 369 values 
2023-09-06 17:45:44,962 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service RootCARotationManager.
2023-09-06 17:45:44,969 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service RootCARotationManager.
2023-09-06 17:45:45,056 [main] INFO  client.SCMCertificateClient (DefaultCertificateClient.java:updateCertSerialId(1244)) - Certificate serial ID set to 1
2023-09-06 17:45:45,057 [main] WARN  client.SCMCertificateClient (DefaultCertificateClient.java:loadAllCertificates(173)) - Certificates could not be loaded.
java.nio.file.NoSuchFileException: /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestRootCARotationManager7da01cb8-51f2-477b-b1e3-e17fb570946a/scm/sub-ca/certs
	at sun.nio.fs.UnixException.translateToIOException(UnixException.java:86)
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102)
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107)
	at sun.nio.fs.UnixFileSystemProvider.newDirectoryStream(UnixFileSystemProvider.java:427)
	at java.nio.file.Files.newDirectoryStream(Files.java:457)
	at java.nio.file.Files.list(Files.java:3451)
	at org.apache.hadoop.hdds.security.x509.certificate.client.DefaultCertificateClient.loadAllCertificates(DefaultCertificateClient.java:168)
	at org.apache.hadoop.hdds.security.x509.certificate.client.DefaultCertificateClient.updateCertSerialId(DefaultCertificateClient.java:1245)
	at org.apache.hadoop.hdds.security.x509.certificate.client.DefaultCertificateClient.<init>(DefaultCertificateClient.java:157)
	at org.apache.hadoop.hdds.security.x509.certificate.client.SCMCertificateClient.<init>(SCMCertificateClient.java:74)
	at org.apache.hadoop.hdds.scm.security.TestRootCARotationManager.init(TestRootCARotationManager.java:113)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptLifecycleMethod(TimeoutExtension.java:126)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptBeforeEachMethod(TimeoutExtension.java:76)
	at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeMethodInExtensionContext(ClassBasedTestDescriptor.java:506)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$synthesizeBeforeEachMethodAdapter$21(ClassBasedTestDescriptor.java:491)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachMethods$3(TestMethodTestDescriptor.java:171)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$6(TestMethodTestDescriptor.java:199)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:199)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachMethods(TestMethodTestDescriptor.java:168)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:131)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.util.ArrayList.forEach(ArrayList.java:1259)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.util.ArrayList.forEach(ArrayList.java:1259)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:188)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:154)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:428)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:562)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:548)
2023-09-06 17:45:45,060 [main] WARN  server.ServerUtils (ServerUtils.java:getScmDbDir(155)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2023-09-06 17:45:45,281 [main] INFO  utils.SelfSignedCertificate (SelfSignedCertificate.java:generateCertificate(157)) - Certificate 1 is issued by CN=localhost,OU=c16a6287-79fa-4d41-89f9-aa750900e014,O=158f82c1-6ee3-4bec-9f24-736f3d90b59b to CN=localhost,OU=c16a6287-79fa-4d41-89f9-aa750900e014,O=158f82c1-6ee3-4bec-9f24-736f3d90b59b, valid from Wed Sep 06 17:45:45 UTC 2023 to Wed Sep 06 17:46:20 UTC 2023
2023-09-06 17:45:45,302 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service RootCARotationManager.
2023-09-06 17:45:45,305 [main] INFO  security.RootCARotationManager (RootCARotationManager.java:start(238)) - Monitor task for root certificate 1 is started with interval PT2S.
2023-09-06 17:45:45,306 [main] INFO  security.RootCARotationManager (RootCARotationManager.java:start(244)) - Scheduling expired certificate removal with interval 15s
2023-09-06 17:45:45,306 [main] INFO  security.RootCARotationManager (RootCARotationManager.java:notifyStatusChanged(200)) - notifyStatusChanged: enable monitor task
2023-09-06 17:45:45,309 [main] INFO  security.RootCARotationManager (RootCARotationManager.java:checkAndHandlePostProcessing(787)) - No RootCARotationManager configuration found in stateful storage
2023-09-06 17:45:51,305 [RootCARotationManager-Active] INFO  security.RootCARotationManager (RootCARotationManager.java:run(309)) - Root certificate 1 has entered the 2 * expiry grace period(PT15S).
2023-09-06 17:45:51,307 [RootCARotationManager-Active] INFO  security.RootCARotationManager (RootCARotationManager.java:run(337)) - Root certificate 1 rotation task is scheduled with 3694 ms delay
2023-09-06 17:45:53,305 [RootCARotationManager-Active] INFO  security.RootCARotationManager (RootCARotationManager.java:run(302)) - Root certificate rotation task is already running.
2023-09-06 17:45:55,002 [RootCARotationManager-Active] INFO  security.RootCARotationManager (RootCARotationManager.java:run(381)) - Root certificate 1 rotation is started.
2023-09-06 17:45:55,058 [main] INFO  client.SCMCertificateClient (DefaultCertificateClient.java:updateCertSerialId(1244)) - Certificate serial ID set to 1
2023-09-06 17:45:55,058 [main] WARN  client.SCMCertificateClient (DefaultCertificateClient.java:loadAllCertificates(173)) - Certificates could not be loaded.
java.nio.file.NoSuchFileException: /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestRootCARotationManager9bc476ec-3246-427d-8eb0-3c3c84ffeb15/scm/sub-ca/certs
	at sun.nio.fs.UnixException.translateToIOException(UnixException.java:86)
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102)
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107)
	at sun.nio.fs.UnixFileSystemProvider.newDirectoryStream(UnixFileSystemProvider.java:427)
	at java.nio.file.Files.newDirectoryStream(Files.java:457)
	at java.nio.file.Files.list(Files.java:3451)
	at org.apache.hadoop.hdds.security.x509.certificate.client.DefaultCertificateClient.loadAllCertificates(DefaultCertificateClient.java:168)
	at org.apache.hadoop.hdds.security.x509.certificate.client.DefaultCertificateClient.updateCertSerialId(DefaultCertificateClient.java:1245)
	at org.apache.hadoop.hdds.security.x509.certificate.client.DefaultCertificateClient.<init>(DefaultCertificateClient.java:157)
	at org.apache.hadoop.hdds.security.x509.certificate.client.SCMCertificateClient.<init>(SCMCertificateClient.java:74)
	at org.apache.hadoop.hdds.scm.security.TestRootCARotationManager.init(TestRootCARotationManager.java:113)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptLifecycleMethod(TimeoutExtension.java:126)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptBeforeEachMethod(TimeoutExtension.java:76)
	at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeMethodInExtensionContext(ClassBasedTestDescriptor.java:506)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$synthesizeBeforeEachMethodAdapter$21(ClassBasedTestDescriptor.java:491)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachMethods$3(TestMethodTestDescriptor.java:171)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$6(TestMethodTestDescriptor.java:199)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:199)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachMethods(TestMethodTestDescriptor.java:168)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:131)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.util.ArrayList.forEach(ArrayList.java:1259)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.util.ArrayList.forEach(ArrayList.java:1259)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:188)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:154)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:428)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:562)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:548)
2023-09-06 17:45:55,068 [main] WARN  server.ServerUtils (ServerUtils.java:getScmDbDir(155)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2023-09-06 17:45:55,167 [main] INFO  utils.SelfSignedCertificate (SelfSignedCertificate.java:generateCertificate(157)) - Certificate 1 is issued by CN=localhost,OU=6e1b5910-8e5f-4133-b99d-60c3413ab765,O=e258ded2-6e0d-485a-bb56-fb620cab9dd4 to CN=localhost,OU=6e1b5910-8e5f-4133-b99d-60c3413ab765,O=e258ded2-6e0d-485a-bb56-fb620cab9dd4, valid from Wed Sep 06 17:45:55 UTC 2023 to Wed Sep 06 17:46:55 UTC 2023
2023-09-06 17:45:55,176 [main] INFO  utils.CertificateCodec (CertificateCodec.java:writeCertificate(299)) - Save certificate to /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestRootCARotationManager9bc476ec-3246-427d-8eb0-3c3c84ffeb15/scm/sub-ca/certs/certificate.crt
2023-09-06 17:45:55,178 [main] INFO  utils.CertificateCodec (CertificateCodec.java:writeCertificate(300)) - Certificate -----BEGIN CERTIFICATE-----
MIICfTCCAeagAwIBAgIBATANBgkqhkiG9w0BAQsFADByMRIwEAYDVQQDDAlsb2Nh
bGhvc3QxLTArBgNVBAsMJDZlMWI1OTEwLThlNWYtNDEzMy1iOTlkLTYwYzM0MTNh
Yjc2NTEtMCsGA1UECgwkZTI1OGRlZDItNmUwZC00ODVhLWJiNTYtZmI2MjBjYWI5
ZGQ0MB4XDTIzMDkwNjE3NDU1NVoXDTIzMDkwNjE3NDY1NVowcjESMBAGA1UEAwwJ
bG9jYWxob3N0MS0wKwYDVQQLDCQ2ZTFiNTkxMC04ZTVmLTQxMzMtYjk5ZC02MGMz
NDEzYWI3NjUxLTArBgNVBAoMJGUyNThkZWQyLTZlMGQtNDg1YS1iYjU2LWZiNjIw
Y2FiOWRkNDCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAj+BslKMMeJkdogqw
zMWg8FCD1rlMybMkCtppbmUErtFkfxMVWp6O6tdqKQ05T+WqFQV+s99dpo3Gk4B9
mgtRI1jGPWe28zuk5eUoDMyUtl9YO1b+CrLGjeGONCZiEy8PHBUoo6pVVfv/6rQJ
81bgHgON7Wfm5Q3YwpjGd2PBLV8CAwEAAaMjMCEwDwYDVR0TAQH/BAUwAwEB/zAO
BgNVHQ8BAf8EBAMCAQYwDQYJKoZIhvcNAQELBQADgYEAHFdK2s3nTuIszF3ybejo
zXdRh9D/UtNYWT+iW6G8A3ZLrh6tqKbdcIm+gtRzUePwo5NRKLfU+SeV5bxPS5Ve
10OBFeE9cJMXRAtWx68+IU41kV/w0bfAzlrGN+HWfXcMjcMnPWCqs+ajKQ7bsgbr
l5POykR637GNH4a3I0Hud9o=
-----END CERTIFICATE-----

2023-09-06 17:45:55,181 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service RootCARotationManager.
2023-09-06 17:45:55,182 [main] INFO  security.RootCARotationManager (RootCARotationManager.java:start(238)) - Monitor task for root certificate 1 is started with interval PT2S.
2023-09-06 17:45:55,182 [main] INFO  security.RootCARotationManager (RootCARotationManager.java:start(244)) - Scheduling expired certificate removal with interval 86400s
2023-09-06 17:45:55,183 [main] INFO  security.RootCARotationManager (RootCARotationManager.java:notifyStatusChanged(200)) - notifyStatusChanged: enable monitor task
2023-09-06 17:45:55,183 [main] INFO  security.RootCARotationManager (RootCARotationManager.java:checkAndHandlePostProcessing(787)) - No RootCARotationManager configuration found in stateful storage
2023-09-06 17:45:55,227 [main] INFO  security.RootCARotationManager (RootCARotationManager.java:notifyStatusChanged(179)) - notifyStatusChanged: disable monitor task.
2023-09-06 17:45:55,227 [main] INFO  security.RootCARotationManager (RootCARotationManager.java:notifyStatusChanged(200)) - notifyStatusChanged: enable monitor task
2023-09-06 17:45:55,275 [main] INFO  client.SCMCertificateClient (DefaultCertificateClient.java:readCertificateFile(237)) - Added certificate   [0]         Version: 3
         SerialNumber: 1
             IssuerDN: CN=localhost,OU=6e1b5910-8e5f-4133-b99d-60c3413ab765,O=e258ded2-6e0d-485a-bb56-fb620cab9dd4
           Start Date: Wed Sep 06 17:45:55 UTC 2023
           Final Date: Wed Sep 06 17:46:55 UTC 2023
            SubjectDN: CN=localhost,OU=6e1b5910-8e5f-4133-b99d-60c3413ab765,O=e258ded2-6e0d-485a-bb56-fb620cab9dd4
           Public Key: RSA Public Key [f3:28:c7:21:10:39:2c:ff:5d:ab:6f:5f:17:3e:0d:c1:1c:15:77:7c],[56:66:d1:a4]
        modulus: 8fe06c94a30c78991da20ab0ccc5a0f05083d6b94cc9b3240ada696e6504aed1647f13155a9e8eead76a290d394fe5aa15057eb3df5da68dc693807d9a0b512358c63d67b6f33ba4e5e5280ccc94b65f583b56fe0ab2c68de18e342662132f0f1c1528a3aa5555fbffeab409f356e01e038ded67e6e50dd8c298c67763c12d5f
public exponent: 10001

  Signature Algorithm: SHA256WITHRSA
            Signature: 1c574adacde74ee22ccc5df26de8e8cd775187d0
                       ff52d358593fa25ba1bc03764bae1eada8a6dd70
                       89be82d47351e3f0a3935128b7d4f92795e5bc4f
                       4b955ed7438115e13d709317440b56c7af3e214e
                       35915ff0d1b7c0ce5ac637e1d67d770c8dc3273d
                       60aab3e6a3290edbb206eb9793ceca447adfb18d
                       1f86b72341ee77da
       Extensions: 
                       critical(true) BasicConstraints: isCa(true)
                       critical(true) KeyUsage: 0x6
 from file: /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestRootCARotationManager9bc476ec-3246-427d-8eb0-3c3c84ffeb15/scm/sub-ca/certs/certificate.crt.
2023-09-06 17:45:55,276 [main] INFO  client.SCMCertificateClient (DefaultCertificateClient.java:loadAllCertificates(191)) - CertificateRenewerService and root ca rotation polling is disabled for scm/sub-ca
2023-09-06 17:45:55,279 [main] INFO  client.SCMCertificateClient (DefaultCertificateClient.java:getAllRootCaCerts(901)) - scm/sub-ca has 0 Root CA certificates
2023-09-06 17:45:55,280 [main] INFO  security.RootCARotationManager (RootCARotationManager.java:enterPostProcessing(736)) - isPostProcessing is true for 9720 ms
2023-09-06 17:45:55,282 [main] INFO  security.RootCARotationManager (RootCARotationManager.java:notifyStatusChanged(179)) - notifyStatusChanged: disable monitor task.
2023-09-06 17:45:55,283 [main] INFO  security.RootCARotationManager (RootCARotationManager.java:notifyStatusChanged(200)) - notifyStatusChanged: enable monitor task
2023-09-06 17:45:55,287 [main] INFO  client.SCMCertificateClient (DefaultCertificateClient.java:getAllRootCaCerts(901)) - scm/sub-ca has 0 Root CA certificates
2023-09-06 17:45:55,288 [main] INFO  security.RootCARotationManager (RootCARotationManager.java:enterPostProcessing(736)) - isPostProcessing is true for 9712 ms
2023-09-06 17:45:55,502 [RootCARotationManager-Active] ERROR authority.DefaultCAServer (DefaultCAServer.java:initRootCa(525)) - Unable to initialize CertificateServer.
java.nio.channels.ClosedByInterruptException
	at java.nio.channels.spi.AbstractInterruptibleChannel.end(AbstractInterruptibleChannel.java:202)
	at sun.nio.ch.FileChannelImpl.write(FileChannelImpl.java:216)
	at java.nio.channels.Channels.writeFullyImpl(Channels.java:78)
	at java.nio.channels.Channels.writeFully(Channels.java:101)
	at java.nio.channels.Channels.access$000(Channels.java:61)
	at java.nio.channels.Channels$1.write(Channels.java:174)
	at sun.nio.cs.StreamEncoder.writeBytes(StreamEncoder.java:221)
	at sun.nio.cs.StreamEncoder.implClose(StreamEncoder.java:316)
	at sun.nio.cs.StreamEncoder.close(StreamEncoder.java:149)
	at java.io.OutputStreamWriter.close(OutputStreamWriter.java:233)
	at org.apache.commons.io.output.FileWriterWithEncoding.close(FileWriterWithEncoding.java:320)
	at java.io.BufferedWriter.close(BufferedWriter.java:266)
	at org.apache.hadoop.hdds.security.x509.keys.KeyCodec.writeKey(KeyCodec.java:351)
	at org.apache.hadoop.hdds.security.x509.keys.KeyCodec.writeKey(KeyCodec.java:163)
	at org.apache.hadoop.hdds.security.x509.certificate.authority.DefaultCAServer.generateKeys(DefaultCAServer.java:555)
	at org.apache.hadoop.hdds.security.x509.certificate.authority.DefaultCAServer.generateSelfSignedCA(DefaultCAServer.java:385)
	at org.apache.hadoop.hdds.security.x509.certificate.authority.DefaultCAServer.initRootCa(DefaultCAServer.java:522)
	at org.apache.hadoop.hdds.security.x509.certificate.authority.DefaultCAServer.init(DefaultCAServer.java:179)
	at org.apache.hadoop.hdds.scm.ha.HASecurityUtils.initializeRootCertificateServer(HASecurityUtils.java:266)
	at org.apache.hadoop.hdds.scm.security.RootCARotationManager$RotationTask.run(RootCARotationManager.java:391)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2023-09-06 17:45:55,504 [RootCARotationManager-Active] ERROR authority.DefaultCAServer (DefaultCAServer.java:initRootCa(530)) - Unable to initialize CertificateServer, failed in verification.
2023-09-06 17:45:55,509 [RootCARotationManager-Active] ERROR security.RootCARotationManager (RootCARotationManager.java:run(395)) - Error while generating new root CA certificate under scm/ca-next-progress
java.io.FileNotFoundException: /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestRootCARotationManager7da01cb8-51f2-477b-b1e3-e17fb570946a/scm/ca-next-progress/keys/public.pem (No such file or directory)
	at java.io.FileInputStream.open0(Native Method)
	at java.io.FileInputStream.open(FileInputStream.java:195)
	at java.io.FileInputStream.<init>(FileInputStream.java:138)
	at org.apache.commons.io.FileUtils.openInputStream(FileUtils.java:2388)
	at org.apache.commons.io.FileUtils.readFileToString(FileUtils.java:2506)
	at org.apache.hadoop.hdds.security.x509.keys.KeyCodec.readKey(KeyCodec.java:249)
	at org.apache.hadoop.hdds.security.x509.keys.KeyCodec.readPublicKey(KeyCodec.java:302)
	at org.apache.hadoop.hdds.security.x509.keys.KeyCodec.readPublicKey(KeyCodec.java:286)
	at org.apache.hadoop.hdds.security.x509.certificate.authority.DefaultCAServer.getCAKeys(DefaultCAServer.java:222)
	at org.apache.hadoop.hdds.security.x509.certificate.authority.DefaultCAServer.init(DefaultCAServer.java:181)
	at org.apache.hadoop.hdds.scm.ha.HASecurityUtils.initializeRootCertificateServer(HASecurityUtils.java:266)
	at org.apache.hadoop.hdds.scm.security.RootCARotationManager$RotationTask.run(RootCARotationManager.java:391)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2023-09-06 17:45:55,523 [RootCARotationManager-Active] INFO  security.RootCARotationManager (RootCARotationManager.java:cleanupAndStop(476)) - In-progress root CA directory /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestRootCARotationManager7da01cb8-51f2-477b-b1e3-e17fb570946a/scm/ca-next-progress is deleted for 'Terminate SCM, encounter exception(/home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestRootCARotationManager7da01cb8-51f2-477b-b1e3-e17fb570946a/scm/ca-next-progress/keys/public.pem (No such file or directory)) when generating new root CA certificate under scm/ca-next-progress'
2023-09-06 17:45:55,525 [RootCARotationManager-Active] ERROR security.RootCARotationManager (RootCARotationManager.java:run(432)) - Error while sending rotation prepare request
java.lang.Exception: New root CA server should not be null
	at org.apache.hadoop.hdds.scm.security.RootCARotationManager$RotationTask.run(RootCARotationManager.java:409)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
2023-09-06 17:45:55,525 [RootCARotationManager-Active] INFO  security.RootCARotationManager (RootCARotationManager.java:cleanupAndStop(476)) - In-progress root CA directory /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestRootCARotationManager7da01cb8-51f2-477b-b1e3-e17fb570946a/scm/ca-next-progress is deleted for 'Error while sending rotation prepare request'
2023-09-06 17:46:05,000 [RootCARotationManager-Active] INFO  security.RootCARotationManager (RootCARotationManager.java:lambda$enterPostProcessing$0(739)) - isPostProcessing is false
2023-09-06 17:46:05,001 [RootCARotationManager-Active] INFO  security.RootCARotationManager (RootCARotationManager.java:lambda$enterPostProcessing$0(742)) - Stateful configuration is deleted
2023-09-06 17:46:05,058 [main] INFO  client.SCMCertificateClient (DefaultCertificateClient.java:updateCertSerialId(1244)) - Certificate serial ID set to 1
2023-09-06 17:46:05,058 [main] WARN  client.SCMCertificateClient (DefaultCertificateClient.java:loadAllCertificates(173)) - Certificates could not be loaded.
java.nio.file.NoSuchFileException: /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestRootCARotationManager3032c100-e125-499f-834f-aad8aca4a50d/scm/sub-ca/certs
	at sun.nio.fs.UnixException.translateToIOException(UnixException.java:86)
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102)
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107)
	at sun.nio.fs.UnixFileSystemProvider.newDirectoryStream(UnixFileSystemProvider.java:427)
	at java.nio.file.Files.newDirectoryStream(Files.java:457)
	at java.nio.file.Files.list(Files.java:3451)
	at org.apache.hadoop.hdds.security.x509.certificate.client.DefaultCertificateClient.loadAllCertificates(DefaultCertificateClient.java:168)
	at org.apache.hadoop.hdds.security.x509.certificate.client.DefaultCertificateClient.updateCertSerialId(DefaultCertificateClient.java:1245)
	at org.apache.hadoop.hdds.security.x509.certificate.client.DefaultCertificateClient.<init>(DefaultCertificateClient.java:157)
	at org.apache.hadoop.hdds.security.x509.certificate.client.SCMCertificateClient.<init>(SCMCertificateClient.java:74)
	at org.apache.hadoop.hdds.scm.security.TestRootCARotationManager.init(TestRootCARotationManager.java:113)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptLifecycleMethod(TimeoutExtension.java:126)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptBeforeEachMethod(TimeoutExtension.java:76)
	at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeMethodInExtensionContext(ClassBasedTestDescriptor.java:506)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$synthesizeBeforeEachMethodAdapter$21(ClassBasedTestDescriptor.java:491)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachMethods$3(TestMethodTestDescriptor.java:171)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$6(TestMethodTestDescriptor.java:199)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:199)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachMethods(TestMethodTestDescriptor.java:168)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:131)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.util.ArrayList.forEach(ArrayList.java:1259)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.util.ArrayList.forEach(ArrayList.java:1259)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:188)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:154)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:428)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:562)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:548)
2023-09-06 17:46:05,059 [main] WARN  server.ServerUtils (ServerUtils.java:getScmDbDir(155)) - ozone.scm.db.dirs is not configured. We recommend adding this setting. Falling back to ozone.metadata.dirs instead.
2023-09-06 17:46:05,085 [main] INFO  utils.SelfSignedCertificate (SelfSignedCertificate.java:generateCertificate(157)) - Certificate 1 is issued by CN=localhost,OU=b6bdc083-bd38-4cb0-92f3-76a9177ac1b4,O=d2dac9c7-0480-41e7-ab86-27baf0b1c815 to CN=localhost,OU=b6bdc083-bd38-4cb0-92f3-76a9177ac1b4,O=d2dac9c7-0480-41e7-ab86-27baf0b1c815, valid from Wed Sep 06 17:46:05 UTC 2023 to Wed Sep 06 17:46:40 UTC 2023
2023-09-06 17:46:05,089 [main] INFO  ha.SCMServiceManager (SCMServiceManager.java:register(42)) - Registering service RootCARotationManager.
2023-09-06 17:46:05,090 [main] INFO  security.RootCARotationManager (RootCARotationManager.java:start(238)) - Monitor task for root certificate 1 is started with interval PT2S.
2023-09-06 17:46:05,090 [main] INFO  security.RootCARotationManager (RootCARotationManager.java:start(244)) - Scheduling expired certificate removal with interval 86400s
2023-09-06 17:46:05,091 [main] INFO  security.RootCARotationManager (RootCARotationManager.java:notifyStatusChanged(200)) - notifyStatusChanged: enable monitor task
2023-09-06 17:46:05,091 [main] INFO  security.RootCARotationManager (RootCARotationManager.java:checkAndHandlePostProcessing(787)) - No RootCARotationManager configuration found in stateful storage
2023-09-06 17:46:11,091 [RootCARotationManager-Active] INFO  security.RootCARotationManager (RootCARotationManager.java:run(309)) - Root certificate 1 has entered the 2 * expiry grace period(PT15S).
2023-09-06 17:46:11,092 [RootCARotationManager-Active] INFO  security.RootCARotationManager (RootCARotationManager.java:run(324)) - Configured rotation time 2023-09-06T17:51:05 is after root certificate 1 end time Wed Sep 06 17:46:40 UTC 2023. Start the rotation immediately.
2023-09-06 17:46:11,092 [RootCARotationManager-Active] INFO  security.RootCARotationManager (RootCARotationManager.java:run(337)) - Root certificate 1 rotation task is scheduled with 0 ms delay
2023-09-06 17:46:11,092 [RootCARotationManager-Active] INFO  security.RootCARotationManager (RootCARotationManager.java:run(381)) - Root certificate 1 rotation is started.
