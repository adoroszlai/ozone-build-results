rm: cannot remove '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/*': No such file or directory
Executing test ozonesecure-ha/test-root-ca-rotation.sh
Removing network ozonesecure-ha_ozone_net
Network ozonesecure-ha_ozone_net not found.
Creating network "ozonesecure-ha_ozone_net" with the default driver
Pulling datanode3 (apache/ozone-runner:20230615-1)...
20230615-1: Pulling from apache/ozone-runner
Digest: sha256:46c59e4f69c94a8f886d621c9f1898fda8cc4d5de59059c6c74175ffa4718474
Status: Downloaded newer image for apache/ozone-runner:20230615-1
Pulling kdc (apache/ozone-testkrb5:20230318-1)...
20230318-1: Pulling from apache/ozone-testkrb5
Digest: sha256:6a7eeac1ebd12e8968e34ab93fb8d21f2b92ae52bc0a85b662a2d41065f05d3a
Status: Downloaded newer image for apache/ozone-testkrb5:20230318-1
Pulling kms (apache/hadoop:3.3.6)...
3.3.6: Pulling from apache/hadoop
Digest: sha256:62a22627f35a1bbf29c721192c02fe311c93749cc43d51df01792b2ac40ff144
Status: Downloaded newer image for apache/hadoop:3.3.6
Creating ozonesecure-ha_datanode2_1 ... 
Creating ozonesecure-ha_om3_1       ... 
Creating ozonesecure-ha_scm3.org_1  ... 
Creating ozonesecure-ha_datanode3_1 ... 
Creating ozonesecure-ha_datanode1_1 ... 
Creating ozonesecure-ha_s3g_1       ... 
Creating ozonesecure-ha_om2_1       ... 
Creating ozonesecure-ha_scm1.org_1  ... 
Creating ozonesecure-ha_recon_1     ... 
Creating ozonesecure-ha_om1_1       ... 
Creating ozonesecure-ha_httpfs_1    ... 
Creating ozonesecure-ha_kms_1       ... 
Creating ozonesecure-ha_kdc_1       ... 
Creating ozonesecure-ha_scm2.org_1  ... 
Creating ozonesecure-ha_datanode3_1 ... done
Creating ozonesecure-ha_datanode2_1 ... done
Creating ozonesecure-ha_datanode1_1 ... done
Creating ozonesecure-ha_kdc_1       ... done
Creating ozonesecure-ha_s3g_1       ... done
Creating ozonesecure-ha_recon_1     ... done
Creating ozonesecure-ha_om3_1       ... done
Creating ozonesecure-ha_scm3.org_1  ... done
Creating ozonesecure-ha_kms_1       ... done
Creating ozonesecure-ha_om2_1       ... done
Creating ozonesecure-ha_httpfs_1    ... done
Creating ozonesecure-ha_om1_1       ... done
Creating ozonesecure-ha_scm2.org_1  ... done
Creating ozonesecure-ha_scm1.org_1  ... done
Port 88 is available on kdc
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is available on scm1.org
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 237
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 236
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 235
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 234
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 233
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 232
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 231
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 230
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 229
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 228
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 227
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 226
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 225
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 224
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 223
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 222
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 221
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 220
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 219
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 218
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 217
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 216
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 215
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 214
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 213
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 212
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 211
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 210
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 209
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 208
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 207
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 206
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 205
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 204
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 203
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 202
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 201
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 200
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 199
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 198
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 197
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 196
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 195
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 194
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 193
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 192
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 191
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 190
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 189
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 188
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 187
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 186
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 185
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 184
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 183
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 182
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 181
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 180
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 179
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 178
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 177
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 176
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 175
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 174
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 173
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 172
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 171
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 170
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 169
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 168
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 167
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 166
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 165
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 163
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 162
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 161
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 160
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 159
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 158
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 157
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 156
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 155
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 154
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 153
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 152
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 151
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 150
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 149
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 148
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 147
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 146
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 145
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 144
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 143
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 142
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 141
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 140
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 139
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 138
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 137
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 136
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 135
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 134
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 133
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 132
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 131
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 130
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 129
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 128
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 127
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 126
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 125
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 124
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 123
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 122
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 121
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 120
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 119
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 118
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 117
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 116
SCM is out of safe mode.
Found OM leader for service omservice: om2 : LEADER (om2)
Replaced OM order with om2,om3,om1 in ozonesecure-ha_datanode1_1
Replaced OM order with om2,om3,om1 in ozonesecure-ha_datanode2_1
Replaced OM order with om2,om3,om1 in ozonesecure-ha_datanode3_1
Replaced OM order with om2,om3,om1 in ozonesecure-ha_recon_1
Replaced OM order with om2,om3,om1 in ozonesecure-ha_s3g_1
Replaced OM order with om2,om3,om1 in ozonesecure-ha_scm1.org_1
Replaced OM order with om2,om3,om1 in ozonesecure-ha_scm2.org_1
Replaced OM order with om2,om3,om1 in ozonesecure-ha_scm3.org_1
key1 has been successfully created with options Options{cipher='AES/CTR/NoPadding', bitLength=128, description='null', attributes=null}.
org.apache.hadoop.crypto.key.kms.LoadBalancingKMSClientProvider@662b4c69 has been updated.
==============================================================================
Kinit :: Kinit test user                                                      
==============================================================================
Kinit                                                                 | PASS |
------------------------------------------------------------------------------
Kinit :: Kinit test user                                              | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-ha/result/robot-1.xml
"RootCARotationManager-Active" #271 daemon prio=5 os_prio=0 cpu=787.68ms elapsed=204.85s tid=0x00007fefde99a800 nid=0x269 waiting on condition  [0x00007fef9b53d000]
jps | grep StorageContainerManagerStarter | sed 's/StorageContainerManagerStarter//' | xargs  | xargs -I {} jstack {} | grep 'RootCARotationManager-Active' succeed
Certificate id: 2
  [0]         Version: 3
         SerialNumber: 2
             IssuerDN: CN=scm-2@scm1.org,OU=ce1ac8c0-15f2-40fc-97dd-6efda5154b21,O=CID-08d95028-adac-4042-86f6-e56bbce1c82e
           Start Date: Mon Sep 18 17:00:18 UTC 2023
           Final Date: Mon Sep 18 17:04:18 UTC 2023
            SubjectDN: CN=scm-2@scm1.org,OU=ce1ac8c0-15f2-40fc-97dd-6efda5154b21,O=CID-08d95028-adac-4042-86f6-e56bbce1c82e
           Public Key: RSA Public Key [72:02:b8:9d:46:d5:17:63:68:f8:c9:d1:8c:5b:a5:0e:cd:2d:78:be],[56:66:d1:a4]
        modulus: b933461ead7dff6ac25273a598a1a41e38be23bcccf9d3b2e91a8409de59a18711c48d431179330f1b045913d993da7b6ae695e93dcdffc5e47ed5ad0327043c7a858f0640c8cd053d90f56f3ecee302f3be12bf3fd0e481ccd8903a3519dd356e0ef34f4c3f2be69290552dab7aecb7a794ac11674d2d716b6daa6501e1597012a6df5db672a5342bad0029f357fe19b708037a999ce07bbba03fc8848022a346984854a278e5a147c8d412c0b9bdf289d23622a70a1886e2893fca1c31297930820dce55477e98cdf7264f0febc9932fceab26ad3e91ff194ae8da120902d09adb6fd6b21232dcdbfa4195639b18a73b8a3521687dbc6200dea7aa22f2c03d
public exponent: 10001

  Signature Algorithm: SHA256withRSA
            Signature: 0c52cab5c2b90e56f991058fc4d14d08b09e3fe0
                       0aba0bdf7effdf62e7b099e52d5e1cbb5ca0c984
                       8e228cd8ff2de37bf488538a9bf3c7b9d9c8a74d
                       e0434e204c84fab9b8ed287e4f507e4e3a51a926
                       6505f69a80e01b98ecdedae032fbbad392508448
                       ab86fafdc87207434f2345044b5e5ff12c4ecd91
                       b74c628153a1386d6fcd2e028de2e0b6c3a9af70
                       e685f9c978b4360f1452d912d155b5c0ea330149
                       6db1a78f07ffca713fef4eefddcdaa754b02e555
                       934124ede6788aaf82f85102f2fb5f4b74b7e71b
                       54c57c88a644de93aa6d09c3cd5cee9da483e93f
                       44c5f2ee5090c60281b281cac6e9e5b76b99bd8b
                       49c925318ab16aa79bb40ce1e2ccb0c3
       Extensions: 
                       critical(true) BasicConstraints: isCa(true)
                       critical(true) KeyUsage: 0x6
                       critical(false) 2.5.29.17 value = Sequence
    Tagged [7] IMPLICIT 
        DER Octet String[4] 
    Tagged [2] IMPLICIT 
        DER Octet String[8] 


ozone admin cert info 2 succeed
==============================================================================
Scm-Leader-Transfer :: Smoketest ozone cluster startup                        
==============================================================================
Transfer Leadership                                                   | PASS |
------------------------------------------------------------------------------
Scm-Leader-Transfer :: Smoketest ozone cluster startup                | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-ha/result/robot-2.xml
"RootCARotationManager-Inactive" #271 daemon prio=5 os_prio=0 cpu=801.91ms elapsed=252.80s tid=0x00007fefde99a800 nid=0x269 waiting on condition  [0x00007fef9b53d000]
jps | grep StorageContainerManagerStarter | sed 's/StorageContainerManagerStarter//' | xargs | xargs -I {} jstack {} | grep 'RootCARotationManager-Inactive' succeed
==============================================================================
Root-Ca-Rotation-Client-Checks :: Generate data                               
==============================================================================
Create a volume and bucket                                            | PASS |
------------------------------------------------------------------------------
Create key                                                            | PASS |
------------------------------------------------------------------------------
Read data from previously created key                                 | PASS |
------------------------------------------------------------------------------
Root-Ca-Rotation-Client-Checks :: Generate data                       | PASS |
3 tests, 3 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-ha/result/robot-3.xml
==============================================================================
Pipeline :: Test ozone admin pipeline command                                 
==============================================================================
Create pipeline                                                       | PASS |
------------------------------------------------------------------------------
List pipelines                                                        | PASS |
------------------------------------------------------------------------------
List pipelines with explicit host                                     | PASS |
------------------------------------------------------------------------------
Deactivate pipeline                                                   | PASS |
------------------------------------------------------------------------------
Activate pipeline                                                     | PASS |
------------------------------------------------------------------------------
Close pipeline                                                        | PASS |
------------------------------------------------------------------------------
Incomplete command                                                    | PASS |
------------------------------------------------------------------------------
Pipeline :: Test ozone admin pipeline command                         | PASS |
7 tests, 7 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-ha/result/robot-4.xml
Certificate id: 3
  [0]         Version: 3
         SerialNumber: 3
             IssuerDN: CN=scm-3@scm2.org,OU=5bccb1ec-f7c8-4054-b082-656c06626910,O=CID-08d95028-adac-4042-86f6-e56bbce1c82e
           Start Date: Mon Sep 18 17:02:49 UTC 2023
           Final Date: Mon Sep 18 17:06:49 UTC 2023
            SubjectDN: CN=scm-3@scm2.org,OU=5bccb1ec-f7c8-4054-b082-656c06626910,O=CID-08d95028-adac-4042-86f6-e56bbce1c82e
           Public Key: RSA Public Key [e9:14:f8:82:7c:45:a5:1a:e0:0b:b1:3a:88:dc:2f:6e:67:00:1f:2c],[56:66:d1:a4]
        modulus: df12e9d05548f381aa9e2ea4f7575461da0f9d88f3ecfaebd78b0ed8bae859618fa9fd362515ef8e3dfa93580df898c43e387ac412de29f80249d5e2245b56c415a8139ca8870d2600e5b8a7fddcde4466b630a99af3e450b509d4863e70328308558ff0d4b07540facc6280bd5491412558f9f19e3efd14dffdb7f532ef2337d07a8dfea864310a02646a8a7abc964442baa46981fa4041bb962750eecaff6c1fd1c520c3af12de45cf2d57a2abe0567e12b7c24dc6f232e33c6253674002ccb180a229c95b7bef70132cf5175af8e1ae3dfec4dfe485dc43558dfb5bae1250a9ef61490c7ec5fe06cc9fee0dc1f6e393b6dfce0671b86be84a0c62918ef857
public exponent: 10001

  Signature Algorithm: SHA256withRSA
            Signature: a74d92cf4d271e90ef2b6e36dba0bb31b8b2b45a
                       c6a494a598a59110e51505720bdd9b2c3b0032f5
                       6fb085cf49c6b9389c647bfdb197f43e6d55b164
                       d96d47b82ccdd04bb84f2056781a368bffe116b0
                       c9579796b6b928101dfbafe309827cb3a7bfa10d
                       c9645db285e0a1c28e5902f1b9d6ba229df3e792
                       d4bf2baf7421bb2c6cf16fdee743041161b8a46f
                       9db65af7eab49ffb100171bd644c1ebf9bc5c3c7
                       3f041578b5b521a9b799fc2f34db19b7d4af4b94
                       9e9187651a071f1c73704172e8ea7dc6185629e1
                       30d55a7811993e30c275dbdd8d1008bd914436c3
                       adca5aa5548f35bdd7bcc77bcf80746d74e0400b
                       1fb2a23702efaea3e1761b86c29d6854
       Extensions: 
                       critical(true) BasicConstraints: isCa(true)
                       critical(true) KeyUsage: 0x6
                       critical(false) 2.5.29.17 value = Sequence
    Tagged [7] IMPLICIT 
        DER Octet String[4] 
    Tagged [2] IMPLICIT 
        DER Octet String[8] 


ozone admin cert info 3 succeed
Creating ozonesecure-ha_scm4.org_1 ... 
Creating ozonesecure-ha_scm4.org_1 ... done
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is available on scm4.org
==============================================================================
Kinit :: Kinit test user                                                      
==============================================================================
Kinit                                                                 | PASS |
------------------------------------------------------------------------------
Kinit :: Kinit test user                                              | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-ha/result/robot-5.xml
ozone admin scm roles | grep scm4.org hasn't succeed yet
ozone admin scm roles | grep scm4.org hasn't succeed yet
ozone admin scm roles | grep scm4.org hasn't succeed yet
ozone admin scm roles | grep scm4.org hasn't succeed yet
ozone admin scm roles | grep scm4.org hasn't succeed yet
ozone admin scm roles | grep scm4.org hasn't succeed yet
Timed out waiting on ozone admin scm roles | grep scm4.org to be successful
Stopping ozonesecure-ha_scm4.org_1  ... 
Stopping ozonesecure-ha_scm2.org_1  ... 
Stopping ozonesecure-ha_kms_1       ... 
Stopping ozonesecure-ha_kdc_1       ... 
Stopping ozonesecure-ha_httpfs_1    ... 
Stopping ozonesecure-ha_om1_1       ... 
Stopping ozonesecure-ha_om2_1       ... 
Stopping ozonesecure-ha_scm1.org_1  ... 
Stopping ozonesecure-ha_recon_1     ... 
Stopping ozonesecure-ha_s3g_1       ... 
Stopping ozonesecure-ha_datanode1_1 ... 
Stopping ozonesecure-ha_datanode3_1 ... 
Stopping ozonesecure-ha_scm3.org_1  ... 
Stopping ozonesecure-ha_om3_1       ... 
Stopping ozonesecure-ha_datanode2_1 ... 
Stopping ozonesecure-ha_kdc_1       ... done
Stopping ozonesecure-ha_kms_1       ... done
Stopping ozonesecure-ha_httpfs_1    ... done
Stopping ozonesecure-ha_scm4.org_1  ... done
Stopping ozonesecure-ha_s3g_1       ... done
Stopping ozonesecure-ha_datanode3_1 ... done
Stopping ozonesecure-ha_datanode2_1 ... done
Stopping ozonesecure-ha_datanode1_1 ... done
Stopping ozonesecure-ha_recon_1     ... done
Stopping ozonesecure-ha_scm3.org_1  ... done
Stopping ozonesecure-ha_om1_1       ... done
Stopping ozonesecure-ha_scm2.org_1  ... done
Stopping ozonesecure-ha_scm1.org_1  ... done
Stopping ozonesecure-ha_om3_1       ... done
Stopping ozonesecure-ha_om2_1       ... done
Removing ozonesecure-ha_scm4.org_1  ... 
Removing ozonesecure-ha_scm2.org_1  ... 
Removing ozonesecure-ha_kms_1       ... 
Removing ozonesecure-ha_kdc_1       ... 
Removing ozonesecure-ha_httpfs_1    ... 
Removing ozonesecure-ha_om1_1       ... 
Removing ozonesecure-ha_om2_1       ... 
Removing ozonesecure-ha_scm1.org_1  ... 
Removing ozonesecure-ha_recon_1     ... 
Removing ozonesecure-ha_s3g_1       ... 
Removing ozonesecure-ha_datanode1_1 ... 
Removing ozonesecure-ha_datanode3_1 ... 
Removing ozonesecure-ha_scm3.org_1  ... 
Removing ozonesecure-ha_om3_1       ... 
Removing ozonesecure-ha_datanode2_1 ... 
Removing ozonesecure-ha_om1_1       ... done
Removing ozonesecure-ha_datanode1_1 ... done
Removing ozonesecure-ha_scm3.org_1  ... done
Removing ozonesecure-ha_kms_1       ... done
Removing ozonesecure-ha_scm1.org_1  ... done
Removing ozonesecure-ha_om2_1       ... done
Removing ozonesecure-ha_scm4.org_1  ... done
Removing ozonesecure-ha_kdc_1       ... done
Removing ozonesecure-ha_httpfs_1    ... done
Removing ozonesecure-ha_s3g_1       ... done
Removing ozonesecure-ha_recon_1     ... done
Removing ozonesecure-ha_datanode2_1 ... done
Removing ozonesecure-ha_datanode3_1 ... done
Removing ozonesecure-ha_scm2.org_1  ... done
Removing ozonesecure-ha_om3_1       ... done
Removing network ozonesecure-ha_ozone_net
ERROR: Test execution of ozonesecure-ha/test-root-ca-rotation.sh is FAILED!!!!
Output:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha-root-ca-rotation.xml
removed 'ozonesecure-ha/result/robot-1.xml'
removed 'ozonesecure-ha/result/robot-2.xml'
removed 'ozonesecure-ha/result/robot-3.xml'
removed 'ozonesecure-ha/result/robot-4.xml'
removed 'ozonesecure-ha/result/robot-5.xml'
renamed 'ozonesecure-ha/result/dn-audit-2028b608affb.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/dn-audit-2028b608affb.log'
renamed 'ozonesecure-ha/result/dn-audit-52278e9569cf.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/dn-audit-52278e9569cf.log'
renamed 'ozonesecure-ha/result/dn-audit-f35d27e6a975.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/dn-audit-f35d27e6a975.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_datanode1_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_datanode1_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_datanode2_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_datanode2_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_datanode3_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_datanode3_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_httpfs_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_httpfs_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_kdc_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_kdc_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_kms_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_kms_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_om1_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_om1_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_om2_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_om2_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_om3_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_om3_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_recon_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_recon_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_s3g_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_s3g_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_scm1.org_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_scm1.org_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_scm2.org_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_scm2.org_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_scm3.org_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_scm3.org_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_scm4.org_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_scm4.org_1.log'
renamed 'ozonesecure-ha/result/kms-audit.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/kms-audit.log'
renamed 'ozonesecure-ha/result/om-audit-om1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/om-audit-om1.log'
renamed 'ozonesecure-ha/result/om-audit-om2.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/om-audit-om2.log'
renamed 'ozonesecure-ha/result/om-audit-om3.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/om-audit-om3.log'
renamed 'ozonesecure-ha/result/s3g-audit-s3g.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/s3g-audit-s3g.log'
renamed 'ozonesecure-ha/result/scm-audit-scm1.org.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/scm-audit-scm1.org.log'
renamed 'ozonesecure-ha/result/scm-audit-scm2.org.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/scm-audit-scm2.org.log'
renamed 'ozonesecure-ha/result/scm-audit-scm3.org.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/scm-audit-scm3.org.log'
renamed 'ozonesecure-ha/result/scm-audit-scm4.org.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/scm-audit-scm4.org.log'
Executing test ozonesecure/test-certificate-rotation.sh
Removing network ozonesecure_default
Network ozonesecure_default not found.
Creating network "ozonesecure_default" with the default driver
Creating ozonesecure_om_1 ... 
Creating ozonesecure_httpfs_1 ... 
Creating ozonesecure_kms_1    ... 
Creating ozonesecure_s3g_1    ... 
Creating ozonesecure_datanode_1 ... 
Creating ozonesecure_datanode_2 ... 
Creating ozonesecure_datanode_3 ... 
Creating ozonesecure_recon_1    ... 
Creating ozonesecure_scm_1      ... 
Creating ozonesecure_kdc_1      ... 
Creating ozonesecure_httpfs_1   ... done
Creating ozonesecure_datanode_1 ... done
Creating ozonesecure_datanode_2 ... done
Creating ozonesecure_kdc_1      ... done
Creating ozonesecure_kms_1      ... done
Creating ozonesecure_om_1       ... done
Creating ozonesecure_s3g_1      ... done
Creating ozonesecure_datanode_3 ... done
Creating ozonesecure_scm_1      ... done
Creating ozonesecure_recon_1    ... done
Port 88 is available on kdc
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is available on scm
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 233
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 232
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 231
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 230
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 229
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 228
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 227
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 226
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 225
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 224
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 223
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 222
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 221
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 220
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 218
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 217
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 216
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 215
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 214
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 213
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 212
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 211
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 210
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 209
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 208
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 207
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 206
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 205
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 204
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 203
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 202
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 201
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 200
SCM is out of safe mode.
No OM HA service, no need to wait
==============================================================================
Certrotation                                                                  
==============================================================================
Certrotation.Cert-Rotation :: Smoketest ozone cluster startup                 
==============================================================================
Test datanode functions before and after certificate rotation         depth=2 CN = scm-1@scm, OU = 9190218e-6006-41f5-9cc3-347a61277981, O = CID-1fc2593f-23fc-4424-bc48-01c480900535
verify error:num=19:self signed certificate in certificate chain
depth=2 CN = scm-1@scm, OU = 9190218e-6006-41f5-9cc3-347a61277981, O = CID-1fc2593f-23fc-4424-bc48-01c480900535
verify error:num=19:self signed certificate in certificate chain
| PASS |
------------------------------------------------------------------------------
Certrotation.Cert-Rotation :: Smoketest ozone cluster startup         | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Certrotation.Root-Ca-Rotation-Client-Checks :: Generate data                  
==============================================================================
Create a volume and bucket                                            | PASS |
------------------------------------------------------------------------------
Create key                                                            | PASS |
------------------------------------------------------------------------------
Read data from previously created key                                 | PASS |
------------------------------------------------------------------------------
Certrotation.Root-Ca-Rotation-Client-Checks :: Generate data          | PASS |
3 tests, 3 passed, 0 failed
==============================================================================
Certrotation                                                          | PASS |
4 tests, 4 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure/result/robot-1.xml
Stopping ozonesecure_kdc_1      ... 
Stopping ozonesecure_scm_1      ... 
Stopping ozonesecure_recon_1    ... 
Stopping ozonesecure_s3g_1      ... 
Stopping ozonesecure_datanode_2 ... 
Stopping ozonesecure_datanode_3 ... 
Stopping ozonesecure_datanode_1 ... 
Stopping ozonesecure_om_1       ... 
Stopping ozonesecure_httpfs_1   ... 
Stopping ozonesecure_kms_1      ... 
Stopping ozonesecure_kdc_1      ... done
Stopping ozonesecure_kms_1      ... done
Stopping ozonesecure_httpfs_1   ... done
Stopping ozonesecure_s3g_1      ... done
Stopping ozonesecure_datanode_3 ... done
Stopping ozonesecure_datanode_2 ... done
Stopping ozonesecure_recon_1    ... done
Stopping ozonesecure_datanode_1 ... done
Stopping ozonesecure_om_1       ... done
Stopping ozonesecure_scm_1      ... done
Removing ozonesecure_kdc_1      ... 
Removing ozonesecure_scm_1      ... 
Removing ozonesecure_recon_1    ... 
Removing ozonesecure_s3g_1      ... 
Removing ozonesecure_datanode_2 ... 
Removing ozonesecure_datanode_3 ... 
Removing ozonesecure_datanode_1 ... 
Removing ozonesecure_om_1       ... 
Removing ozonesecure_httpfs_1   ... 
Removing ozonesecure_kms_1      ... 
Removing ozonesecure_datanode_3 ... done
Removing ozonesecure_om_1       ... done
Removing ozonesecure_recon_1    ... done
Removing ozonesecure_kdc_1      ... done
Removing ozonesecure_kms_1      ... done
Removing ozonesecure_s3g_1      ... done
Removing ozonesecure_httpfs_1   ... done
Removing ozonesecure_datanode_2 ... done
Removing ozonesecure_scm_1      ... done
Removing ozonesecure_datanode_1 ... done
Removing network ozonesecure_default
Output:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-certificate-rotation.xml
removed 'ozonesecure/result/robot-1.xml'
renamed 'ozonesecure/result/dn-audit-8b3d074ae513.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/dn-audit-8b3d074ae513.log'
renamed 'ozonesecure/result/dn-audit-a21fcc7368c0.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/dn-audit-a21fcc7368c0.log'
renamed 'ozonesecure/result/dn-audit-d6e56d6cf52c.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/dn-audit-d6e56d6cf52c.log'
renamed 'ozonesecure/result/docker-ozonesecure_datanode_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_datanode_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_datanode_2.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_datanode_2.log'
renamed 'ozonesecure/result/docker-ozonesecure_datanode_3.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_datanode_3.log'
renamed 'ozonesecure/result/docker-ozonesecure_httpfs_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_httpfs_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_kdc_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_kdc_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_kms_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_kms_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_om_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_om_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_recon_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_recon_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_s3g_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_s3g_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_scm_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_scm_1.log'
renamed 'ozonesecure/result/kms-audit.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/kms-audit.log'
renamed 'ozonesecure/result/om-audit-om.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/om-audit-om.log'
renamed 'ozonesecure/result/s3g-audit-s3g.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/s3g-audit-s3g.log'
renamed 'ozonesecure/result/scm-audit-scm.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/scm-audit-scm.log'
Executing test ozonesecure/test-root-ca-rotation.sh
Removing network ozonesecure_default
Network ozonesecure_default not found.
Creating network "ozonesecure_default" with the default driver
Creating ozonesecure_kdc_1 ... 
Creating ozonesecure_recon_1 ... 
Creating ozonesecure_kms_1   ... 
Creating ozonesecure_httpfs_1 ... 
Creating ozonesecure_datanode_1 ... 
Creating ozonesecure_datanode_2 ... 
Creating ozonesecure_datanode_3 ... 
Creating ozonesecure_om_1       ... 
Creating ozonesecure_s3g_1      ... 
Creating ozonesecure_scm_1      ... 
Creating ozonesecure_kdc_1      ... done
Creating ozonesecure_kms_1      ... done
Creating ozonesecure_httpfs_1   ... done
Creating ozonesecure_s3g_1      ... done
Creating ozonesecure_datanode_3 ... done
Creating ozonesecure_recon_1    ... done
Creating ozonesecure_datanode_2 ... done
Creating ozonesecure_datanode_1 ... done
Creating ozonesecure_scm_1      ... done
Creating ozonesecure_om_1       ... done
Port 88 is available on kdc
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is available on scm
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 231
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 230
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 229
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 228
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 227
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 226
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 225
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 224
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 223
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 222
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 221
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 220
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 219
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 218
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 217
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 216
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 215
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 214
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 213
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 212
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 211
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 210
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 209
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 208
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 207
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 206
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 205
SCM is out of safe mode.
No OM HA service, no need to wait
key1 has been successfully created with options Options{cipher='AES/CTR/NoPadding', bitLength=128, description='null', attributes=null}.
org.apache.hadoop.crypto.key.kms.LoadBalancingKMSClientProvider@662b4c69 has been updated.
==============================================================================
Kinit :: Kinit test user                                                      
==============================================================================
Kinit                                                                 | PASS |
------------------------------------------------------------------------------
Kinit :: Kinit test user                                              | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure/result/robot-1.xml
"RootCARotationManager-Active" #271 daemon prio=5 os_prio=0 cpu=10.23ms elapsed=54.80s tid=0x00007f3a3267b800 nid=0x299 waiting on condition  [0x00007f39ed9e7000]
jps | grep StorageContainerManagerStarter |  sed 's/StorageContainerManagerStarter//' | xargs | xargs -I {} jstack {} | grep 'RootCARotationManager-Active' succeed
Certificate not found
ozone admin cert info 2 hasn't succeed yet
Certificate not found
ozone admin cert info 2 hasn't succeed yet
Certificate id: 2
  [0]         Version: 3
         SerialNumber: 2
             IssuerDN: CN=scm-2@scm,OU=16a1e3ce-533e-4dca-bdfd-81f5b0d2e177,O=CID-3a99518c-4eea-418e-bde5-2c0c803cb001
           Start Date: Mon Sep 18 17:13:51 UTC 2023
           Final Date: Mon Sep 18 17:16:51 UTC 2023
            SubjectDN: CN=scm-2@scm,OU=16a1e3ce-533e-4dca-bdfd-81f5b0d2e177,O=CID-3a99518c-4eea-418e-bde5-2c0c803cb001
           Public Key: RSA Public Key [ce:38:4d:80:e6:d6:9d:15:c6:96:49:4a:c9:b2:72:81:52:6d:d2:75],[56:66:d1:a4]
        modulus: 8fe6e55006739d40fdb942cc067391ff59d454778b7d94f0f67e8c8fc80da3abdbfdffb4d00d7da6d9a0a49d55e1eafb059b8a790b523e6548d8d1c384539a6ddd3deaf4e1cc41ff3a4eae774fbbf9d8f0a6b201f3d0b9317089baebca88c81b256635af20b52bd879af5a507994e3b62299821f770b1f45e49570224d1807b5a3ceda9d8e08158b13c562a365e2b70331ab2a677e451ac4024709734a9dc7909612bb973ae1c7d82e088b00c876d05743bee7e1ca15ac38933478575f9f96cc9ec7d23300c90014f6e67fb6bc1323fe14039166d21107bae814a1cd62dafe43a5235a032d10f92b8fa1338a6417fdf0c6d4684563be7bcedc03341227c628eb
public exponent: 10001

  Signature Algorithm: SHA256withRSA
            Signature: 8e51cbd98194d57e8e3ee9991faa894a30aee122
                       ae8d070c9fd526c32222864d67fdbd3bf120a6c2
                       cb70fd9f2c1ed37d235159bc62d7c8e2ca920eec
                       056f35deddc1150e0cf0ebed6f46769515642eca
                       87574ea40be4f7ecbf33df9490831caeaac7b4cd
                       7cadd3ed4ccbbbf2d6fca7fda0d31b94de859535
                       d81d2d4584f35dd7362bedc19714852a66112c19
                       e1dc60023b2bc3cb4ed28d553dad4e32f998e62f
                       3b505760ae190912e5c70ec8357ee211660b1f8c
                       b263be26422ec571966979e65efc43c2d38e347d
                       ac16601705aa6a95855a35dbf40917b85b27236f
                       c82daaf71db306d889984e598415b48c7c9bddd7
                       9b4cd0be367e5d95ff0fe7451a6a21a7
       Extensions: 
                       critical(true) BasicConstraints: isCa(true)
                       critical(true) KeyUsage: 0x6
                       critical(false) 2.5.29.17 value = Sequence
    Tagged [7] IMPLICIT 
        DER Octet String[4] 


ozone admin cert info 2 succeed
/data/metadata/dn/certs/ROOTCA-2.crt
find /data/metadata/dn/certs/ROOTCA-2.crt succeed
/data/metadata/om/certs/ROOTCA-2.crt
find /data/metadata/om/certs/ROOTCA-2.crt succeed
==============================================================================
Root-Ca-Rotation-Client-Checks :: Generate data                               
==============================================================================
Create a volume and bucket                                            | PASS |
------------------------------------------------------------------------------
Create key                                                            | PASS |
------------------------------------------------------------------------------
Read data from previously created key                                 | PASS |
------------------------------------------------------------------------------
Root-Ca-Rotation-Client-Checks :: Generate data                       | PASS |
3 tests, 3 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure/result/robot-2.xml
Certificate not found
ozone admin cert info 3 hasn't succeed yet
Certificate not found
ozone admin cert info 3 hasn't succeed yet
Certificate not found
ozone admin cert info 3 hasn't succeed yet
Certificate not found
ozone admin cert info 3 hasn't succeed yet
Certificate not found
ozone admin cert info 3 hasn't succeed yet
Certificate id: 3
  [0]         Version: 3
         SerialNumber: 3
             IssuerDN: CN=scm-3@scm,OU=16a1e3ce-533e-4dca-bdfd-81f5b0d2e177,O=CID-3a99518c-4eea-418e-bde5-2c0c803cb001
           Start Date: Mon Sep 18 17:15:22 UTC 2023
           Final Date: Mon Sep 18 17:18:22 UTC 2023
            SubjectDN: CN=scm-3@scm,OU=16a1e3ce-533e-4dca-bdfd-81f5b0d2e177,O=CID-3a99518c-4eea-418e-bde5-2c0c803cb001
           Public Key: RSA Public Key [d3:a6:1a:0c:df:9a:e9:2f:b5:96:99:84:43:eb:54:d7:4f:8d:08:b0],[56:66:d1:a4]
        modulus: b6073475726faaefd7cf01de25446b8f0b3d0d0ad922f8b717b3be68db6077c31ecb828bf3544ba7989127bef4510722c5eaf916d59b2c1e276bc18731d499622d0078970a6d2c9a46b9868cc32ffc1f9258add594a33ee4ef824de5e57a868444e54d56d0a968c530728d16e451bb943d54051de00abaa5a0ca5f29e509d83d0d0c988f8a193eef5106b0b05249ad9d8b7017f43cbaf5d835030b7ee5a5f5b6aa1e5814b522c9f9cf89986d42789ba917feeb22e805b65c02327a417199750c8ad6df0e5679033d63358ee979a446a848cdfda09773d87cc9925ea7272c1d20f10ddc81fffe63ce5d711037261e4b57c082284d6c57fa1d1e1165d443fc948b
public exponent: 10001

  Signature Algorithm: SHA256withRSA
            Signature: 559222ce89bfdf427d71ea026b0679311b2a5421
                       93d7469c2ace633f63265232452d729d4bf06663
                       dfeb1be0075e8a46d385da39f4484b36b64597a5
                       0a2d5b0179604d1271bb16e14d69c3f05be0766d
                       6554f4af245e83649fa63bbc68c11adf285ccab6
                       7ef35655d294f47c7d570c6531a296a1a4800181
                       96e3dbd1c4639074bc63f077bf015b9a7a99e07b
                       a92e7656d37fb964f3eb812f5e1d332df2deb4dd
                       85d3b7d28f897812e029703d0b08aeb69eb6772f
                       30c99d2a2117312f82ed9a50bbefd77ec8e772be
                       1b42b8347e78e8612c498fb19bc80199aca842a1
                       9f96024e8bb3d0818bbb593ec96ee10caea6bd59
                       4862c9490a6d75d1d139272d71623816
       Extensions: 
                       critical(true) BasicConstraints: isCa(true)
                       critical(true) KeyUsage: 0x6
                       critical(false) 2.5.29.17 value = Sequence
    Tagged [7] IMPLICIT 
        DER Octet String[4] 


ozone admin cert info 3 succeed
/data/metadata/om/certs/ROOTCA-3.crt
find /data/metadata/om/certs/ROOTCA-3.crt succeed
Certificate not found
! ozone admin cert info 1 succeed
==============================================================================
Root-Ca-Rotation-Client-Checks :: Generate data                               
==============================================================================
Create a volume and bucket                                            | PASS |
------------------------------------------------------------------------------
Create key                                                            | PASS |
------------------------------------------------------------------------------
Read data from previously created key                                 | PASS |
------------------------------------------------------------------------------
Root-Ca-Rotation-Client-Checks :: Generate data                       | PASS |
3 tests, 3 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure/result/robot-3.xml
==============================================================================
Root-Ca-Rotation :: Smoketest ozone cluster startup                           
==============================================================================
Verify root CA rotation metrics                                       | PASS |
------------------------------------------------------------------------------
Root-Ca-Rotation :: Smoketest ozone cluster startup                   | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure/result/robot-4.xml
Stopping ozonesecure_datanode_1 ... 
Stopping ozonesecure_scm_1      ... 
Stopping ozonesecure_s3g_1      ... 
Stopping ozonesecure_datanode_2 ... 
Stopping ozonesecure_datanode_3 ... 
Stopping ozonesecure_om_1       ... 
Stopping ozonesecure_httpfs_1   ... 
Stopping ozonesecure_kms_1      ... 
Stopping ozonesecure_recon_1    ... 
Stopping ozonesecure_kdc_1      ... 
Stopping ozonesecure_kdc_1      ... done
Stopping ozonesecure_kms_1      ... done
Stopping ozonesecure_httpfs_1   ... done
Stopping ozonesecure_s3g_1      ... done
Stopping ozonesecure_recon_1    ... done
Stopping ozonesecure_datanode_2 ... done
Stopping ozonesecure_datanode_1 ... done
Stopping ozonesecure_datanode_3 ... done
Stopping ozonesecure_om_1       ... done
Stopping ozonesecure_scm_1      ... done
Removing ozonesecure_datanode_1 ... 
Removing ozonesecure_scm_1      ... 
Removing ozonesecure_s3g_1      ... 
Removing ozonesecure_datanode_2 ... 
Removing ozonesecure_datanode_3 ... 
Removing ozonesecure_om_1       ... 
Removing ozonesecure_httpfs_1   ... 
Removing ozonesecure_kms_1      ... 
Removing ozonesecure_recon_1    ... 
Removing ozonesecure_kdc_1      ... 
Removing ozonesecure_datanode_2 ... done
Removing ozonesecure_httpfs_1   ... done
Removing ozonesecure_datanode_1 ... done
Removing ozonesecure_s3g_1      ... done
Removing ozonesecure_recon_1    ... done
Removing ozonesecure_om_1       ... done
Removing ozonesecure_kdc_1      ... done
Removing ozonesecure_datanode_3 ... done
Removing ozonesecure_kms_1      ... done
Removing ozonesecure_scm_1      ... done
Removing network ozonesecure_default
Log:     /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/ozonesecure/result/log.html
Report:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/ozonesecure/result/report.html
Removing network ozonesecure_default
Network ozonesecure_default not found.
Output:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-root-ca-rotation.xml
removed 'ozonesecure/result/robot-1.xml'
removed 'ozonesecure/result/robot-2.xml'
removed 'ozonesecure/result/robot-3.xml'
removed 'ozonesecure/result/robot-4.xml'
removed 'ozonesecure/result/log.html'
removed 'ozonesecure/result/report.html'
renamed 'ozonesecure/result/dn-audit-1dc349de6d6f.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/dn-audit-1dc349de6d6f.log'
renamed 'ozonesecure/result/dn-audit-5bf6f32860fa.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/dn-audit-5bf6f32860fa.log'
renamed 'ozonesecure/result/dn-audit-bb75c4fea83c.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/dn-audit-bb75c4fea83c.log'
renamed 'ozonesecure/result/docker-ozonesecure_datanode_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_datanode_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_datanode_2.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_datanode_2.log'
renamed 'ozonesecure/result/docker-ozonesecure_datanode_3.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_datanode_3.log'
renamed 'ozonesecure/result/docker-ozonesecure_httpfs_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_httpfs_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_kdc_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_kdc_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_kms_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_kms_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_om_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_om_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_recon_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_recon_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_s3g_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_s3g_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_scm_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_scm_1.log'
renamed 'ozonesecure/result/kms-audit.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/kms-audit.log'
renamed 'ozonesecure/result/om-audit-om.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/om-audit-om.log'
renamed 'ozonesecure/result/s3g-audit-s3g.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/s3g-audit-s3g.log'
renamed 'ozonesecure/result/scm-audit-scm.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/scm-audit-scm.log'
Exception in thread "main" java.net.SocketException: Socket closed
	at java.base/java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.base/java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:474)
	at java.base/java.net.ServerSocket.implAccept(ServerSocket.java:565)
	at java.base/java.net.ServerSocket.accept(ServerSocket.java:533)
	at org.apache.hadoop.test.JacocoServer.main(JacocoServer.java:60)
Log:     /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/log.html
Report:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/report.html
