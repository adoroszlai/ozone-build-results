rm: cannot remove '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/*': No such file or directory
Executing test ozonesecure-ha/test-root-ca-rotation.sh
Removing network ozonesecure-ha_ozone_net
Network ozonesecure-ha_ozone_net not found.
Creating network "ozonesecure-ha_ozone_net" with the default driver
Pulling kms (apache/hadoop:3.3.6)...
3.3.6: Pulling from apache/hadoop
Digest: sha256:62a22627f35a1bbf29c721192c02fe311c93749cc43d51df01792b2ac40ff144
Status: Downloaded newer image for apache/hadoop:3.3.6
Pulling s3g (apache/ozone-runner:20230615-1)...
20230615-1: Pulling from apache/ozone-runner
Digest: sha256:46c59e4f69c94a8f886d621c9f1898fda8cc4d5de59059c6c74175ffa4718474
Status: Downloaded newer image for apache/ozone-runner:20230615-1
Pulling kdc (apache/ozone-testkrb5:20230318-1)...
20230318-1: Pulling from apache/ozone-testkrb5
Digest: sha256:6a7eeac1ebd12e8968e34ab93fb8d21f2b92ae52bc0a85b662a2d41065f05d3a
Status: Downloaded newer image for apache/ozone-testkrb5:20230318-1
Creating ozonesecure-ha_scm2.org_1 ... 
Creating ozonesecure-ha_datanode1_1 ... 
Creating ozonesecure-ha_recon_1     ... 
Creating ozonesecure-ha_s3g_1       ... 
Creating ozonesecure-ha_om2_1       ... 
Creating ozonesecure-ha_scm1.org_1  ... 
Creating ozonesecure-ha_datanode2_1 ... 
Creating ozonesecure-ha_om1_1       ... 
Creating ozonesecure-ha_kdc_1       ... 
Creating ozonesecure-ha_datanode3_1 ... 
Creating ozonesecure-ha_om3_1       ... 
Creating ozonesecure-ha_httpfs_1    ... 
Creating ozonesecure-ha_kms_1       ... 
Creating ozonesecure-ha_scm3.org_1  ... 
Creating ozonesecure-ha_recon_1     ... done
Creating ozonesecure-ha_s3g_1       ... done
Creating ozonesecure-ha_datanode1_1 ... done
Creating ozonesecure-ha_datanode2_1 ... done
Creating ozonesecure-ha_scm2.org_1  ... done
Creating ozonesecure-ha_kdc_1       ... done
Creating ozonesecure-ha_httpfs_1    ... done
Creating ozonesecure-ha_kms_1       ... done
Creating ozonesecure-ha_datanode3_1 ... done
Creating ozonesecure-ha_om2_1       ... done
Creating ozonesecure-ha_scm1.org_1  ... done
Creating ozonesecure-ha_om3_1       ... done
Creating ozonesecure-ha_om1_1       ... done
Creating ozonesecure-ha_scm3.org_1  ... done
Port 88 is available on kdc
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is not available on scm1.org yet
Port 9860 is available on scm1.org
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 236
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 235
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 234
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 233
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 232
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 231
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 230
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 229
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 228
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 227
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 226
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 225
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 224
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 223
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 222
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 221
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 220
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 219
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 218
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 217
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 216
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 215
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 214
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 213
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 212
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 211
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 210
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 209
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 208
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 207
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 206
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 205
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 204
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 203
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 202
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 201
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 200
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 199
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 198
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 197
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 196
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 195
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 194
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 193
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 192
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 191
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 190
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 189
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 188
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 187
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 186
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 185
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 184
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 183
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 182
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 181
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 180
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 179
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 178
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 177
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 176
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 175
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 174
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 173
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 172
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 171
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 170
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 169
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 168
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 167
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 166
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 165
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 164
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 163
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 162
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 161
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 160
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 159
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 158
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 156
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 155
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 154
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 153
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 152
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 151
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 150
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 149
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 148
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 147
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 146
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 145
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 144
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 143
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 142
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 141
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 140
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 139
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 138
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 137
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 136
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 135
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 134
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 133
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 132
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 131
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 130
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 129
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 128
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 127
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 126
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 125
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 124
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 123
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 122
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 121
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 120
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 119
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 118
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 117
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 116
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 115
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 114
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 113
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 112
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 111
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 110
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 109
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 108
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 107
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 106
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 105
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 104
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 103
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 102
SCM is out of safe mode.
Found OM leader for service omservice: om1 : LEADER (om1)
Replaced OM order with om1,om3,om2 in ozonesecure-ha_datanode1_1
Replaced OM order with om1,om3,om2 in ozonesecure-ha_datanode2_1
Replaced OM order with om1,om3,om2 in ozonesecure-ha_datanode3_1
Replaced OM order with om1,om3,om2 in ozonesecure-ha_recon_1
Replaced OM order with om1,om3,om2 in ozonesecure-ha_s3g_1
Replaced OM order with om1,om3,om2 in ozonesecure-ha_scm1.org_1
Replaced OM order with om1,om3,om2 in ozonesecure-ha_scm2.org_1
Replaced OM order with om1,om3,om2 in ozonesecure-ha_scm3.org_1
key1 has been successfully created with options Options{cipher='AES/CTR/NoPadding', bitLength=128, description='null', attributes=null}.
org.apache.hadoop.crypto.key.kms.LoadBalancingKMSClientProvider@662b4c69 has been updated.
==============================================================================
Kinit :: Kinit test user                                                      
==============================================================================
Kinit                                                                 | PASS |
------------------------------------------------------------------------------
Kinit :: Kinit test user                                              | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-ha/result/robot-1.xml
"RootCARotationManager-Active" #271 daemon prio=5 os_prio=0 cpu=852.67ms elapsed=221.93s tid=0x00007f63467b4800 nid=0x262 waiting on condition  [0x00007f630177f000]
jps | grep StorageContainerManagerStarter | sed 's/StorageContainerManagerStarter//' | xargs  | xargs -I {} jstack {} | grep 'RootCARotationManager-Active' succeed
Certificate id: 2
  [0]         Version: 3
         SerialNumber: 2
             IssuerDN: CN=scm-2@scm1.org,OU=9d932951-e5db-4c6c-bbd2-a0ac573da7fc,O=CID-51708a41-4b23-4136-9451-ee9346d69339
           Start Date: Tue Sep 12 09:59:45 UTC 2023
           Final Date: Tue Sep 12 10:03:45 UTC 2023
            SubjectDN: CN=scm-2@scm1.org,OU=9d932951-e5db-4c6c-bbd2-a0ac573da7fc,O=CID-51708a41-4b23-4136-9451-ee9346d69339
           Public Key: RSA Public Key [7d:15:90:63:ab:64:a1:fe:4e:d2:44:10:d6:29:40:d5:8c:0e:95:7a],[56:66:d1:a4]
        modulus: 9a6daf4776322773f6e5b722cb549dc1c52f8d801431254061133d1f8c3ffef1d41a8a152e29ebcbef6c8d29c20cdc0d0f443aca116a8f9f92a0103868c235f98dadb05cf42d276eaa1cf1679780fcb7a16f1fe4436780ab3524fd064230e28f2a1202215c722b0d43bf974cb494753ae7e7918d142e714a4a7e6311e7de71535472e1d24728d6445616edd005194b3917a6168c40f225cfb530125f6f86714b1bb3e4103810476c6727f094b9cfbdbf8f3137c700d375f4a41249ddf837c2830f8a3e54af034d6b5c27b9669fd56dd91758395518f21532e8282ea799b5a852975cbba547b2ed5078804eaea206152e050b9500bcbe620573000f759e453af1
public exponent: 10001

  Signature Algorithm: SHA256withRSA
            Signature: 0babc94223428819743896e812da691bc5267cf2
                       5391ce8bd36fc192d5240717dd659490ac9b4080
                       9edb82622b1b377b38d494caf73aa3f2c16ef4b8
                       f039c854fb1960e3ffb1e1becbe8c1d1b1e4438b
                       f6449b718331045c9b5ff6c3d426728ec603886d
                       5223fb12d6f3fad42188cbaf796d05e9980547c1
                       f64569be4a7bf22f87c174bfd19ea3983ff17e00
                       25870c0fa14fb686604582c347b7f40558e8a256
                       1c54a98558844bbe6a81ac58cd7cd7eaaa4dcaa1
                       c2a2c40ba33f1f9558f3d5210664ec6e78ddb6b5
                       d90b920853d23f1722090505b0cad66736df536a
                       85a6e80254bf8af411d88d75f37dc574ab878007
                       3c8e8cad17bf0bee97eb9bb341f20db5
       Extensions: 
                       critical(true) BasicConstraints: isCa(true)
                       critical(true) KeyUsage: 0x6
                       critical(false) 2.5.29.17 value = Sequence
    Tagged [7] IMPLICIT 
        DER Octet String[4] 
    Tagged [2] IMPLICIT 
        DER Octet String[8] 


ozone admin cert info 2 succeed
==============================================================================
Scm-Leader-Transfer :: Smoketest ozone cluster startup                        
==============================================================================
Transfer Leadership                                                   | PASS |
------------------------------------------------------------------------------
Scm-Leader-Transfer :: Smoketest ozone cluster startup                | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-ha/result/robot-2.xml
"RootCARotationManager-Inactive" #271 daemon prio=5 os_prio=0 cpu=863.76ms elapsed=265.70s tid=0x00007f63467b4800 nid=0x262 waiting on condition  [0x00007f630177f000]
jps | grep StorageContainerManagerStarter | sed 's/StorageContainerManagerStarter//' | xargs | xargs -I {} jstack {} | grep 'RootCARotationManager-Inactive' succeed
==============================================================================
Root-Ca-Rotation-Client-Checks :: Generate data                               
==============================================================================
Create a volume and bucket                                            | PASS |
------------------------------------------------------------------------------
Create key                                                            | PASS |
------------------------------------------------------------------------------
Read data from previously created key                                 | PASS |
------------------------------------------------------------------------------
Root-Ca-Rotation-Client-Checks :: Generate data                       | PASS |
3 tests, 3 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-ha/result/robot-3.xml
==============================================================================
Pipeline :: Test ozone admin pipeline command                                 
==============================================================================
Create pipeline                                                       | PASS |
------------------------------------------------------------------------------
List pipelines                                                        | PASS |
------------------------------------------------------------------------------
List pipelines with explicit host                                     | PASS |
------------------------------------------------------------------------------
Deactivate pipeline                                                   | PASS |
------------------------------------------------------------------------------
Activate pipeline                                                     | PASS |
------------------------------------------------------------------------------
Close pipeline                                                        | PASS |
------------------------------------------------------------------------------
Incomplete command                                                    | PASS |
------------------------------------------------------------------------------
Pipeline :: Test ozone admin pipeline command                         | PASS |
7 tests, 7 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-ha/result/robot-4.xml
Certificate id: 3
  [0]         Version: 3
         SerialNumber: 3
             IssuerDN: CN=scm-3@scm2.org,OU=b0755fab-d19e-42d3-8f36-04859eea643a,O=CID-51708a41-4b23-4136-9451-ee9346d69339
           Start Date: Tue Sep 12 10:02:16 UTC 2023
           Final Date: Tue Sep 12 10:06:16 UTC 2023
            SubjectDN: CN=scm-3@scm2.org,OU=b0755fab-d19e-42d3-8f36-04859eea643a,O=CID-51708a41-4b23-4136-9451-ee9346d69339
           Public Key: RSA Public Key [5e:b6:15:ea:e2:50:4b:96:e2:a5:f5:c2:75:90:6a:09:48:cb:50:b1],[56:66:d1:a4]
        modulus: ab2b4888993e5b06528f29e44192e416faca7d6608565d725e1080201763a61e0d3d22e0e580e95eb3045f838846583f218b793bf0768a39c6b63ea705215aad861571217e2657c858e3a3e4cf1a2a0b344ac94d709628b2c4ea911919d73344cc5db422825c72b7671394a81f72582ab9ceae4cb49932207c19b551f8c1a1fdf200f5ed5123fa0a317e49def65f56c80cf57b1859db15cb3bbe2d73e2bea865d52af734351c6b69ba068905b806c4c2044969d55da39959b5fe6b9e22f1739f9c770b14260b1ae60d04b9057245553230bbcef1b783c4da896fa45573d7508f396dd66803dca8856efe1284fde0a9c5641f2043d2295acae8a1bf50d69b4213
public exponent: 10001

  Signature Algorithm: SHA256withRSA
            Signature: 5737c80e50df6e90cca8f7dc74d5dc3b48d2cf68
                       c766a20467d036c7abbe771789bac80822f7b754
                       c11249c3d1d41dcdd59bb295443daf925b0e0d12
                       bf6cbb1f8877674b5fc5ac14f0d6c8cfe84422c5
                       e8713220744aa9098c846ea07ca7dbf45a33609b
                       3f230ad320b6de5dfc3fd92faa2511540044067d
                       7a7caffba6d5cf1413170b1e2940ac76205d6322
                       a71f055b6b29a1a73fac93c5a6883a39b6f33c6d
                       bd168450a388d70ebf3f61cd12c0aee1d997143e
                       dbc18f6d6bc1157ce02d499fb70c76d8c9857d3d
                       af7ed80e01b972ebbbc64aa9d693a39576f3a8b0
                       d7c473f8443ef9b14eaf69b33f8c2fd5a3816f47
                       810ee58737403f6a345bf69801d7a791
       Extensions: 
                       critical(true) BasicConstraints: isCa(true)
                       critical(true) KeyUsage: 0x6
                       critical(false) 2.5.29.17 value = Sequence
    Tagged [7] IMPLICIT 
        DER Octet String[4] 
    Tagged [2] IMPLICIT 
        DER Octet String[8] 


ozone admin cert info 3 succeed
Creating ozonesecure-ha_scm4.org_1 ... 
Creating ozonesecure-ha_scm4.org_1 ... done
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is not available on scm4.org yet
Port 9894 is available on scm4.org
==============================================================================
Kinit :: Kinit test user                                                      
==============================================================================
Kinit                                                                 | PASS |
------------------------------------------------------------------------------
Kinit :: Kinit test user                                              | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-ha/result/robot-5.xml
ozone admin scm roles | grep scm4.org hasn't succeed yet
ozone admin scm roles | grep scm4.org hasn't succeed yet
ozone admin scm roles | grep scm4.org hasn't succeed yet
ozone admin scm roles | grep scm4.org hasn't succeed yet
ozone admin scm roles | grep scm4.org hasn't succeed yet
ozone admin scm roles | grep scm4.org hasn't succeed yet
Timed out waiting on ozone admin scm roles | grep scm4.org to be successful
Stopping ozonesecure-ha_scm4.org_1  ... 
Stopping ozonesecure-ha_scm3.org_1  ... 
Stopping ozonesecure-ha_kms_1       ... 
Stopping ozonesecure-ha_om3_1       ... 
Stopping ozonesecure-ha_httpfs_1    ... 
Stopping ozonesecure-ha_datanode3_1 ... 
Stopping ozonesecure-ha_kdc_1       ... 
Stopping ozonesecure-ha_datanode2_1 ... 
Stopping ozonesecure-ha_om1_1       ... 
Stopping ozonesecure-ha_scm1.org_1  ... 
Stopping ozonesecure-ha_om2_1       ... 
Stopping ozonesecure-ha_s3g_1       ... 
Stopping ozonesecure-ha_recon_1     ... 
Stopping ozonesecure-ha_datanode1_1 ... 
Stopping ozonesecure-ha_scm2.org_1  ... 
Stopping ozonesecure-ha_kdc_1       ... done
Stopping ozonesecure-ha_kms_1       ... done
Stopping ozonesecure-ha_httpfs_1    ... done
Stopping ozonesecure-ha_scm4.org_1  ... done
Stopping ozonesecure-ha_s3g_1       ... done
Stopping ozonesecure-ha_datanode3_1 ... done
Stopping ozonesecure-ha_datanode2_1 ... done
Stopping ozonesecure-ha_datanode1_1 ... done
Stopping ozonesecure-ha_om1_1       ... done
Stopping ozonesecure-ha_scm1.org_1  ... done
Stopping ozonesecure-ha_om3_1       ... done
Stopping ozonesecure-ha_scm2.org_1  ... done
Stopping ozonesecure-ha_recon_1     ... done
Stopping ozonesecure-ha_om2_1       ... done
Stopping ozonesecure-ha_scm3.org_1  ... done
Removing ozonesecure-ha_scm4.org_1  ... 
Removing ozonesecure-ha_scm3.org_1  ... 
Removing ozonesecure-ha_kms_1       ... 
Removing ozonesecure-ha_om3_1       ... 
Removing ozonesecure-ha_httpfs_1    ... 
Removing ozonesecure-ha_datanode3_1 ... 
Removing ozonesecure-ha_kdc_1       ... 
Removing ozonesecure-ha_datanode2_1 ... 
Removing ozonesecure-ha_om1_1       ... 
Removing ozonesecure-ha_scm1.org_1  ... 
Removing ozonesecure-ha_om2_1       ... 
Removing ozonesecure-ha_s3g_1       ... 
Removing ozonesecure-ha_recon_1     ... 
Removing ozonesecure-ha_datanode1_1 ... 
Removing ozonesecure-ha_scm2.org_1  ... 
Removing ozonesecure-ha_datanode1_1 ... done
Removing ozonesecure-ha_datanode2_1 ... done
Removing ozonesecure-ha_datanode3_1 ... done
Removing ozonesecure-ha_s3g_1       ... done
Removing ozonesecure-ha_kdc_1       ... done
Removing ozonesecure-ha_om3_1       ... done
Removing ozonesecure-ha_kms_1       ... done
Removing ozonesecure-ha_httpfs_1    ... done
Removing ozonesecure-ha_scm4.org_1  ... done
Removing ozonesecure-ha_scm1.org_1  ... done
Removing ozonesecure-ha_scm3.org_1  ... done
Removing ozonesecure-ha_om1_1       ... done
Removing ozonesecure-ha_scm2.org_1  ... done
Removing ozonesecure-ha_om2_1       ... done
Removing ozonesecure-ha_recon_1     ... done
Removing network ozonesecure-ha_ozone_net
ERROR: Test execution of ozonesecure-ha/test-root-ca-rotation.sh is FAILED!!!!
Output:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha-root-ca-rotation.xml
removed 'ozonesecure-ha/result/robot-1.xml'
removed 'ozonesecure-ha/result/robot-2.xml'
removed 'ozonesecure-ha/result/robot-3.xml'
removed 'ozonesecure-ha/result/robot-4.xml'
removed 'ozonesecure-ha/result/robot-5.xml'
renamed 'ozonesecure-ha/result/dn-audit-2b9bcbc27453.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/dn-audit-2b9bcbc27453.log'
renamed 'ozonesecure-ha/result/dn-audit-642b02a914ff.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/dn-audit-642b02a914ff.log'
renamed 'ozonesecure-ha/result/dn-audit-efe2699453aa.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/dn-audit-efe2699453aa.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_datanode1_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_datanode1_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_datanode2_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_datanode2_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_datanode3_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_datanode3_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_httpfs_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_httpfs_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_kdc_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_kdc_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_kms_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_kms_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_om1_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_om1_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_om2_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_om2_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_om3_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_om3_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_recon_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_recon_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_s3g_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_s3g_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_scm1.org_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_scm1.org_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_scm2.org_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_scm2.org_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_scm3.org_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_scm3.org_1.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha_scm4.org_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/docker-ozonesecure-ha_scm4.org_1.log'
renamed 'ozonesecure-ha/result/kms-audit.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/kms-audit.log'
renamed 'ozonesecure-ha/result/om-audit-om1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/om-audit-om1.log'
renamed 'ozonesecure-ha/result/om-audit-om2.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/om-audit-om2.log'
renamed 'ozonesecure-ha/result/om-audit-om3.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/om-audit-om3.log'
renamed 'ozonesecure-ha/result/s3g-audit-s3g.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/s3g-audit-s3g.log'
renamed 'ozonesecure-ha/result/scm-audit-scm1.org.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/scm-audit-scm1.org.log'
renamed 'ozonesecure-ha/result/scm-audit-scm2.org.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/scm-audit-scm2.org.log'
renamed 'ozonesecure-ha/result/scm-audit-scm3.org.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/scm-audit-scm3.org.log'
renamed 'ozonesecure-ha/result/scm-audit-scm4.org.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-ha/root-ca-rotation/scm-audit-scm4.org.log'
Executing test ozonesecure/test-certificate-rotation.sh
Removing network ozonesecure_default
Network ozonesecure_default not found.
Creating network "ozonesecure_default" with the default driver
Creating ozonesecure_s3g_1 ... 
Creating ozonesecure_httpfs_1 ... 
Creating ozonesecure_datanode_1 ... 
Creating ozonesecure_datanode_2 ... 
Creating ozonesecure_datanode_3 ... 
Creating ozonesecure_om_1       ... 
Creating ozonesecure_kdc_1      ... 
Creating ozonesecure_kms_1      ... 
Creating ozonesecure_scm_1      ... 
Creating ozonesecure_recon_1    ... 
Creating ozonesecure_s3g_1      ... done
Creating ozonesecure_kdc_1      ... done
Creating ozonesecure_datanode_1 ... done
Creating ozonesecure_datanode_3 ... done
Creating ozonesecure_datanode_2 ... done
Creating ozonesecure_httpfs_1   ... done
Creating ozonesecure_recon_1    ... done
Creating ozonesecure_kms_1      ... done
Creating ozonesecure_om_1       ... done
Creating ozonesecure_scm_1      ... done
Port 88 is available on kdc
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is available on scm
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 229
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 228
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 227
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 226
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 225
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 224
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 223
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 222
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 221
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 220
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 219
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 218
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 217
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 216
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 215
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 214
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 213
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 212
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 211
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 210
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 209
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 208
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 207
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 206
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 205
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 204
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 203
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 202
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 201
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 200
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 199
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 198
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 197
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 196
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 195
SCM is out of safe mode.
No OM HA service, no need to wait
==============================================================================
Certrotation                                                                  
==============================================================================
Certrotation.Cert-Rotation :: Smoketest ozone cluster startup                 
==============================================================================
Test datanode functions before and after certificate rotation         depth=2 CN = scm-1@scm, OU = f2ca77a3-07e6-4b09-b01f-8ddffd1ac193, O = CID-03e717c1-ccad-4544-ad2a-371271a0fde4
verify error:num=19:self signed certificate in certificate chain
depth=2 CN = scm-1@scm, OU = f2ca77a3-07e6-4b09-b01f-8ddffd1ac193, O = CID-03e717c1-ccad-4544-ad2a-371271a0fde4
verify error:num=19:self signed certificate in certificate chain
depth=2 CN = scm-1@scm, OU = f2ca77a3-07e6-4b09-b01f-8ddffd1ac193, O = CID-03e717c1-ccad-4544-ad2a-371271a0fde4
verify error:num=19:self signed certificate in certificate chain
depth=2 CN = scm-1@scm, OU = f2ca77a3-07e6-4b09-b01f-8ddffd1ac193, O = CID-03e717c1-ccad-4544-ad2a-371271a0fde4
verify error:num=19:self signed certificate in certificate chain
| PASS |
------------------------------------------------------------------------------
Certrotation.Cert-Rotation :: Smoketest ozone cluster startup         | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Certrotation.Root-Ca-Rotation-Client-Checks :: Generate data                  
==============================================================================
Create a volume and bucket                                            | PASS |
------------------------------------------------------------------------------
Create key                                                            | PASS |
------------------------------------------------------------------------------
Read data from previously created key                                 | PASS |
------------------------------------------------------------------------------
Certrotation.Root-Ca-Rotation-Client-Checks :: Generate data          | PASS |
3 tests, 3 passed, 0 failed
==============================================================================
Certrotation                                                          | PASS |
4 tests, 4 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure/result/robot-1.xml
Stopping ozonesecure_scm_1      ... 
Stopping ozonesecure_om_1       ... 
Stopping ozonesecure_recon_1    ... 
Stopping ozonesecure_kms_1      ... 
Stopping ozonesecure_kdc_1      ... 
Stopping ozonesecure_datanode_1 ... 
Stopping ozonesecure_datanode_2 ... 
Stopping ozonesecure_datanode_3 ... 
Stopping ozonesecure_httpfs_1   ... 
Stopping ozonesecure_s3g_1      ... 
Stopping ozonesecure_kdc_1      ... done
Stopping ozonesecure_kms_1      ... done
Stopping ozonesecure_httpfs_1   ... done
Stopping ozonesecure_s3g_1      ... done
Stopping ozonesecure_recon_1    ... done
Stopping ozonesecure_datanode_1 ... done
Stopping ozonesecure_datanode_3 ... done
Stopping ozonesecure_datanode_2 ... done
Stopping ozonesecure_om_1       ... done
Stopping ozonesecure_scm_1      ... done
Removing ozonesecure_scm_1      ... 
Removing ozonesecure_om_1       ... 
Removing ozonesecure_recon_1    ... 
Removing ozonesecure_kms_1      ... 
Removing ozonesecure_kdc_1      ... 
Removing ozonesecure_datanode_1 ... 
Removing ozonesecure_datanode_2 ... 
Removing ozonesecure_datanode_3 ... 
Removing ozonesecure_httpfs_1   ... 
Removing ozonesecure_s3g_1      ... 
Removing ozonesecure_httpfs_1   ... done
Removing ozonesecure_kdc_1      ... done
Removing ozonesecure_s3g_1      ... done
Removing ozonesecure_datanode_3 ... done
Removing ozonesecure_scm_1      ... done
Removing ozonesecure_recon_1    ... done
Removing ozonesecure_datanode_1 ... done
Removing ozonesecure_om_1       ... done
Removing ozonesecure_kms_1      ... done
Removing ozonesecure_datanode_2 ... done
Removing network ozonesecure_default
Output:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-certificate-rotation.xml
removed 'ozonesecure/result/robot-1.xml'
renamed 'ozonesecure/result/dn-audit-36ae37ba6e2f.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/dn-audit-36ae37ba6e2f.log'
renamed 'ozonesecure/result/dn-audit-424415e1b36d.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/dn-audit-424415e1b36d.log'
renamed 'ozonesecure/result/dn-audit-fdfab55b119f.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/dn-audit-fdfab55b119f.log'
renamed 'ozonesecure/result/docker-ozonesecure_datanode_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_datanode_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_datanode_2.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_datanode_2.log'
renamed 'ozonesecure/result/docker-ozonesecure_datanode_3.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_datanode_3.log'
renamed 'ozonesecure/result/docker-ozonesecure_httpfs_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_httpfs_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_kdc_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_kdc_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_kms_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_kms_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_om_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_om_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_recon_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_recon_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_s3g_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_s3g_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_scm_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/docker-ozonesecure_scm_1.log'
renamed 'ozonesecure/result/kms-audit.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/kms-audit.log'
renamed 'ozonesecure/result/om-audit-om.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/om-audit-om.log'
renamed 'ozonesecure/result/s3g-audit-s3g.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/s3g-audit-s3g.log'
renamed 'ozonesecure/result/scm-audit-scm.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/certificate-rotation/scm-audit-scm.log'
Executing test ozonesecure/test-root-ca-rotation.sh
Removing network ozonesecure_default
Network ozonesecure_default not found.
Creating network "ozonesecure_default" with the default driver
Creating ozonesecure_kms_1 ... 
Creating ozonesecure_kdc_1 ... 
Creating ozonesecure_httpfs_1 ... 
Creating ozonesecure_om_1     ... 
Creating ozonesecure_recon_1  ... 
Creating ozonesecure_datanode_1 ... 
Creating ozonesecure_datanode_2 ... 
Creating ozonesecure_datanode_3 ... 
Creating ozonesecure_scm_1      ... 
Creating ozonesecure_s3g_1      ... 
Creating ozonesecure_kdc_1      ... done
Creating ozonesecure_httpfs_1   ... done
Creating ozonesecure_kms_1      ... done
Creating ozonesecure_recon_1    ... done
Creating ozonesecure_datanode_2 ... done
Creating ozonesecure_om_1       ... done
Creating ozonesecure_datanode_3 ... done
Creating ozonesecure_s3g_1      ... done
Creating ozonesecure_datanode_1 ... done
Creating ozonesecure_scm_1      ... done
Port 88 is available on kdc
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is not available on scm yet
Port 9860 is available on scm
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 228
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 227
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 226
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 225
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 224
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 223
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 222
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 221
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 220
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 219
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 218
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 217
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 216
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 215
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 214
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 213
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 212
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 211
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 210
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 209
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 208
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 207
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 206
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 205
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 204
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 203
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 202
SCM is in safe mode. Will retry in 1 sec. Remaining time (sec): 201
SCM is out of safe mode.
No OM HA service, no need to wait
key1 has been successfully created with options Options{cipher='AES/CTR/NoPadding', bitLength=128, description='null', attributes=null}.
org.apache.hadoop.crypto.key.kms.LoadBalancingKMSClientProvider@662b4c69 has been updated.
==============================================================================
Kinit :: Kinit test user                                                      
==============================================================================
Kinit                                                                 | PASS |
------------------------------------------------------------------------------
Kinit :: Kinit test user                                              | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure/result/robot-1.xml
"RootCARotationManager-Active" #271 daemon prio=5 os_prio=0 cpu=9.67ms elapsed=56.99s tid=0x00007fa3da8ad000 nid=0x2a9 waiting on condition  [0x00007fa395230000]
jps | grep StorageContainerManagerStarter |  sed 's/StorageContainerManagerStarter//' | xargs | xargs -I {} jstack {} | grep 'RootCARotationManager-Active' succeed
Certificate not found
ozone admin cert info 2 hasn't succeed yet
Certificate not found
ozone admin cert info 2 hasn't succeed yet
Certificate id: 2
  [0]         Version: 3
         SerialNumber: 2
             IssuerDN: CN=scm-2@scm,OU=8a7ccbf0-261d-4c08-b3d1-17258cad420c,O=CID-5e14aed4-d25c-4a2d-8ab4-9108363c073c
           Start Date: Tue Sep 12 10:13:42 UTC 2023
           Final Date: Tue Sep 12 10:16:42 UTC 2023
            SubjectDN: CN=scm-2@scm,OU=8a7ccbf0-261d-4c08-b3d1-17258cad420c,O=CID-5e14aed4-d25c-4a2d-8ab4-9108363c073c
           Public Key: RSA Public Key [7c:d3:50:f7:14:8c:58:a7:b0:22:02:b2:8c:0c:5c:ca:b2:47:1f:5e],[56:66:d1:a4]
        modulus: d6e81bfffede489fbfdd081b6ad4c64ce359cb25240509d61ba2b990833991c2dcba8be75681d2d83ecdc9572816bbf13ef6ae08cf00b55a07c5bfe686f7736a72bd6076488fe40fbddfcb888abe0cde5b18e79fa0f013fd88025a0ff929d3b9de6fc73c0d9474520d72d2ae86b8b3fe89761ac607a398f8a7887026eee8dbc14d168d1457e034498f5178edf94e5992d2d89d022bb1c07250aa7d33378002582dbeb8cf76c88fdd5fd57656c14034eb812bc5b068f58a7ffbd53c9396b0f04dcea0355baca241631fe5b342e1629f905f1503606bafdc69cfcb61608fb6482514d898a43f4781eb051e30315c9d51ec14f0c85176550cf96ccc534e6020d993
public exponent: 10001

  Signature Algorithm: SHA256withRSA
            Signature: 863cfe0f0b64f92f35b06f8041747dc8ce8bc264
                       579fff7150258c2ffadff655ae1c04ef2ac2e2bf
                       9cbcdb3c0ca81eded612710e47a004fbbf24df2f
                       3f6e3439d9b09ccb9a6486a1e5391a30bff1ba5a
                       f55e36b287e3e2de16c296dcf7bad6011806585e
                       46d9c0fa0e4f11f5a82dd305a408cf4b63a09ea5
                       91c11f70c3f858be62f37d11e84610c49e0a9aef
                       2a46c2be191fcd53b3928c7d2cd88b8953f5b79f
                       8a288567ca34f96c7fd0a874cbac41a41b785d84
                       1f1cd1c458a6afa53d7066d223bb120219906e6c
                       1be6cb9d9f895ed44ea5318f0563afaf9f623350
                       394652f591f5e91908fff7d855d0b264a4937a0a
                       e5a57de589c22afa76c814ffa7394c8c
       Extensions: 
                       critical(true) BasicConstraints: isCa(true)
                       critical(true) KeyUsage: 0x6
                       critical(false) 2.5.29.17 value = Sequence
    Tagged [7] IMPLICIT 
        DER Octet String[4] 


ozone admin cert info 2 succeed
/data/metadata/dn/certs/ROOTCA-2.crt
find /data/metadata/dn/certs/ROOTCA-2.crt succeed
/data/metadata/om/certs/ROOTCA-2.crt
find /data/metadata/om/certs/ROOTCA-2.crt succeed
==============================================================================
Root-Ca-Rotation-Client-Checks :: Generate data                               
==============================================================================
Create a volume and bucket                                            | PASS |
------------------------------------------------------------------------------
Create key                                                            | PASS |
------------------------------------------------------------------------------
Read data from previously created key                                 | PASS |
------------------------------------------------------------------------------
Root-Ca-Rotation-Client-Checks :: Generate data                       | PASS |
3 tests, 3 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure/result/robot-2.xml
Certificate not found
ozone admin cert info 3 hasn't succeed yet
Certificate not found
ozone admin cert info 3 hasn't succeed yet
Certificate not found
ozone admin cert info 3 hasn't succeed yet
Certificate not found
ozone admin cert info 3 hasn't succeed yet
Certificate id: 3
  [0]         Version: 3
         SerialNumber: 3
             IssuerDN: CN=scm-3@scm,OU=8a7ccbf0-261d-4c08-b3d1-17258cad420c,O=CID-5e14aed4-d25c-4a2d-8ab4-9108363c073c
           Start Date: Tue Sep 12 10:15:12 UTC 2023
           Final Date: Tue Sep 12 10:18:12 UTC 2023
            SubjectDN: CN=scm-3@scm,OU=8a7ccbf0-261d-4c08-b3d1-17258cad420c,O=CID-5e14aed4-d25c-4a2d-8ab4-9108363c073c
           Public Key: RSA Public Key [46:23:84:07:4a:5e:18:6c:e3:9b:a3:2c:82:74:ad:88:4f:75:bd:e3],[56:66:d1:a4]
        modulus: bc0af131c55eb732b15d77e6f8de783a7f8a2b02551a2786799a9161dbd503b72f4f3a445033a1f0f8174c5681c99924d05eda316ac831ad0767fee9a3d3d494ad0bd3bd45f0c746f12fcd408e3a0798028febc06a357dda546857acbefbdb15756989974a0dd8e648bed2ac3922e149d53228f284b171d57ee64d17248a9743dbee586ff2c95afad11ca64eb0b3b990795e1a9a93dcb7f0a53e9b99a0ec6c415f3309c19e09878facc0ed2e7b1cdde75a0676dde98adcf1ac26de6e721fba6967f40fc26849f9f114a387ed7c2a487b424b5c63e451dc6ee31c8eabf74658ebda1bbd09fe01766d6ff28d5916dcf5257c23765ea885f69c2fb12b8798460075
public exponent: 10001

  Signature Algorithm: SHA256withRSA
            Signature: 7064b9c5f50b7a2dfcc98da8e5785099243fe414
                       9d04d75e68fa84927f1ed7447a09be9eb2c0f51b
                       541c6c85f18ef294d7cbbe2ea171dbd94826258d
                       27f676c4284ddd62db25fbd7af22f49b9c1e7fc0
                       15772907e2b7de710e0edc9c541ecb9469b3dbc8
                       1a7142daaad40699b261105538f0c71747e7f5fa
                       8b75786ab1c3bcbb9621faca2f87ce0e448c36af
                       d34f6de3a56d459441e8fcd90361b06a80d06aaf
                       87642c76ea5aeba0f52ba00f34da50cf537d1c9e
                       7d554221dc8e469a65334b65b3ece746b06995ae
                       ee514b5cb6e3c028ec494d72bfd37ef2d44504dc
                       ce1430b5f27ec65e8a26b53a6ad503086039742a
                       53481f07e898907d723cff265767fa61
       Extensions: 
                       critical(true) BasicConstraints: isCa(true)
                       critical(true) KeyUsage: 0x6
                       critical(false) 2.5.29.17 value = Sequence
    Tagged [7] IMPLICIT 
        DER Octet String[4] 


ozone admin cert info 3 succeed
/data/metadata/om/certs/ROOTCA-3.crt
find /data/metadata/om/certs/ROOTCA-3.crt succeed
Certificate not found
! ozone admin cert info 1 succeed
==============================================================================
Root-Ca-Rotation-Client-Checks :: Generate data                               
==============================================================================
Create a volume and bucket                                            | PASS |
------------------------------------------------------------------------------
Create key                                                            | PASS |
------------------------------------------------------------------------------
Read data from previously created key                                 | PASS |
------------------------------------------------------------------------------
Root-Ca-Rotation-Client-Checks :: Generate data                       | PASS |
3 tests, 3 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure/result/robot-3.xml
==============================================================================
Root-Ca-Rotation :: Smoketest ozone cluster startup                           
==============================================================================
Verify root CA rotation metrics                                       | PASS |
------------------------------------------------------------------------------
Root-Ca-Rotation :: Smoketest ozone cluster startup                   | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure/result/robot-4.xml
Stopping ozonesecure_s3g_1      ... 
Stopping ozonesecure_datanode_1 ... 
Stopping ozonesecure_scm_1      ... 
Stopping ozonesecure_datanode_3 ... 
Stopping ozonesecure_datanode_2 ... 
Stopping ozonesecure_httpfs_1   ... 
Stopping ozonesecure_om_1       ... 
Stopping ozonesecure_recon_1    ... 
Stopping ozonesecure_kms_1      ... 
Stopping ozonesecure_kdc_1      ... 
Stopping ozonesecure_kdc_1      ... done
Stopping ozonesecure_kms_1      ... done
Stopping ozonesecure_httpfs_1   ... done
Stopping ozonesecure_s3g_1      ... done
Stopping ozonesecure_datanode_3 ... done
Stopping ozonesecure_datanode_1 ... done
Stopping ozonesecure_datanode_2 ... done
Stopping ozonesecure_recon_1    ... done
Stopping ozonesecure_scm_1      ... done
Stopping ozonesecure_om_1       ... done
Removing ozonesecure_s3g_1      ... 
Removing ozonesecure_datanode_1 ... 
Removing ozonesecure_scm_1      ... 
Removing ozonesecure_datanode_3 ... 
Removing ozonesecure_datanode_2 ... 
Removing ozonesecure_httpfs_1   ... 
Removing ozonesecure_om_1       ... 
Removing ozonesecure_recon_1    ... 
Removing ozonesecure_kms_1      ... 
Removing ozonesecure_kdc_1      ... 
Removing ozonesecure_s3g_1      ... done
Removing ozonesecure_kms_1      ... done
Removing ozonesecure_recon_1    ... done
Removing ozonesecure_datanode_2 ... done
Removing ozonesecure_om_1       ... done
Removing ozonesecure_kdc_1      ... done
Removing ozonesecure_datanode_3 ... done
Removing ozonesecure_httpfs_1   ... done
Removing ozonesecure_datanode_1 ... done
Removing ozonesecure_scm_1      ... done
Removing network ozonesecure_default
Log:     /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/ozonesecure/result/log.html
Report:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/ozonesecure/result/report.html
Removing network ozonesecure_default
Network ozonesecure_default not found.
Output:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure-root-ca-rotation.xml
removed 'ozonesecure/result/robot-1.xml'
removed 'ozonesecure/result/robot-2.xml'
removed 'ozonesecure/result/robot-3.xml'
removed 'ozonesecure/result/robot-4.xml'
removed 'ozonesecure/result/log.html'
removed 'ozonesecure/result/report.html'
renamed 'ozonesecure/result/dn-audit-5080d7186bef.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/dn-audit-5080d7186bef.log'
renamed 'ozonesecure/result/dn-audit-88387ecb27c9.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/dn-audit-88387ecb27c9.log'
renamed 'ozonesecure/result/dn-audit-d7cea277cb82.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/dn-audit-d7cea277cb82.log'
renamed 'ozonesecure/result/docker-ozonesecure_datanode_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_datanode_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_datanode_2.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_datanode_2.log'
renamed 'ozonesecure/result/docker-ozonesecure_datanode_3.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_datanode_3.log'
renamed 'ozonesecure/result/docker-ozonesecure_httpfs_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_httpfs_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_kdc_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_kdc_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_kms_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_kms_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_om_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_om_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_recon_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_recon_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_s3g_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_s3g_1.log'
renamed 'ozonesecure/result/docker-ozonesecure_scm_1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/docker-ozonesecure_scm_1.log'
renamed 'ozonesecure/result/kms-audit.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/kms-audit.log'
renamed 'ozonesecure/result/om-audit-om.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/om-audit-om.log'
renamed 'ozonesecure/result/s3g-audit-s3g.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/s3g-audit-s3g.log'
renamed 'ozonesecure/result/scm-audit-scm.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonesecure/root-ca-rotation/scm-audit-scm.log'
Exception in thread "main" java.net.SocketException: Socket closed
	at java.base/java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.base/java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:474)
	at java.base/java.net.ServerSocket.implAccept(ServerSocket.java:565)
	at java.base/java.net.ServerSocket.accept(ServerSocket.java:533)
	at org.apache.hadoop.test.JacocoServer.main(JacocoServer.java:60)
Log:     /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/log.html
Report:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/report.html
