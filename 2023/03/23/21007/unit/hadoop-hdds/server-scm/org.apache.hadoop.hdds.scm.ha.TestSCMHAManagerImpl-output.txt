2023-03-23 15:03:22,733 [main] INFO  audit.AuditLogger (AuditLogger.java:refreshDebugCmdSet(126)) - Refresh DebugCmdSet for SCMAudit to [].
2023-03-23 15:03:22,812 [main] INFO  ha.SCMRatisServerImpl (SCMRatisServerImpl.java:<init>(88)) - starting Raft server for scm:d921930f-d542-40eb-8def-dc15158156ad
2023-03-23 15:03:23,151 [main] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-03-23 15:03:23,205 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-23 15:03:23,207 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.port = 9894 (fallback to raft.grpc.server.port)
2023-03-23 15:03:23,207 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-23 15:03:23,208 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.port = 9894 (fallback to raft.grpc.server.port)
2023-03-23 15:03:23,208 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-23 15:03:23,209 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 9894 (custom)
2023-03-23 15:03:23,209 [main] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 32m (=33554432) (custom)
2023-03-23 15:03:23,211 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2023-03-23 15:03:23,211 [main] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-23 15:03:23,212 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 30000ms (custom)
2023-03-23 15:03:23,221 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-03-23 15:03:23,224 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-23 15:03:23,224 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-23 15:03:23,468 [main] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-03-23 15:03:23,470 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-03-23 15:03:23,471 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-03-23 15:03:23,471 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 120000ms (custom)
2023-03-23 15:03:23,471 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-23 15:03:23,474 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-b946a180-bb8b-46a5-83bb-826cd7ce8166/scm1/ratis] (custom)
2023-03-23 15:03:23,482 [main] INFO  server.RaftServer (RaftServerProxy.java:addNew(96)) - d921930f-d542-40eb-8def-dc15158156ad: addNew group-EF3379747B75:[] returns group-EF3379747B75:java.util.concurrent.CompletableFuture@23e9dd78[Not completed]
2023-03-23 15:03:23,502 [pool-3-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(195)) - d921930f-d542-40eb-8def-dc15158156ad: new RaftServerImpl for group-EF3379747B75:[] with SCMStateMachine:uninitialized
2023-03-23 15:03:23,504 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 5000ms (custom)
2023-03-23 15:03:23,504 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 5200ms (custom)
2023-03-23 15:03:23,504 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-03-23 15:03:23,504 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 120000ms (custom)
2023-03-23 15:03:23,505 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-23 15:03:23,505 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-03-23 15:03:23,512 [pool-3-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(118)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75: ConfigurationManager, init=-1: peers:[]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-03-23 15:03:23,514 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-b946a180-bb8b-46a5-83bb-826cd7ce8166/scm1/ratis] (custom)
2023-03-23 15:03:23,519 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-03-23 15:03:23,520 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-03-23 15:03:23,529 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-03-23 15:03:23,534 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60000ms (default)
2023-03-23 15:03:23,535 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-03-23 15:03:23,564 [pool-3-thread-1] INFO  metrics.MetricRegistries (MetricRegistriesLoader.java:load(64)) - Loaded MetricRegistries class org.apache.ratis.metrics.impl.MetricRegistriesImpl
2023-03-23 15:03:23,594 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = false (custom)
2023-03-23 15:03:23,595 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-03-23 15:03:23,595 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-03-23 15:03:23,596 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-03-23 15:03:23,598 [pool-3-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-03-23 15:03:23,600 [main] INFO  ha.SCMSnapshotProvider (SCMSnapshotProvider.java:<init>(66)) - Initializing SCM Snapshot Provider
2023-03-23 15:03:23,603 [main] WARN  ha.SCMHAUtils (SCMHAUtils.java:getSCMRatisSnapshotDirectory(153)) - SCM snapshot dir is not configured. Falling back to ozone.metadata.dirs config
2023-03-23 15:03:23,623 [main] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-03-23 15:03:23,623 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-23 15:03:23,623 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.port = 9894 (fallback to raft.grpc.server.port)
2023-03-23 15:03:23,623 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-23 15:03:23,624 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.port = 9894 (fallback to raft.grpc.server.port)
2023-03-23 15:03:23,624 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-23 15:03:23,624 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 9894 (custom)
2023-03-23 15:03:23,624 [main] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 32m (=33554432) (custom)
2023-03-23 15:03:23,624 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2023-03-23 15:03:23,633 [main] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-23 15:03:23,633 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 30000ms (custom)
2023-03-23 15:03:23,634 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-03-23 15:03:23,634 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-23 15:03:23,634 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-23 15:03:23,635 [main] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-03-23 15:03:23,635 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-03-23 15:03:23,636 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-03-23 15:03:23,636 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 120000ms (custom)
2023-03-23 15:03:23,636 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-23 15:03:23,636 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-b946a180-bb8b-46a5-83bb-826cd7ce8166/scm1/ratis] (custom)
2023-03-23 15:03:23,639 [main] INFO  server.RaftServer (RaftServerProxy.java:addNew(96)) - d921930f-d542-40eb-8def-dc15158156ad: addNew group-EF3379747B75:[d921930f-d542-40eb-8def-dc15158156ad|rpc:localhost:9894|priority:0|startupRole:FOLLOWER] returns group-EF3379747B75:java.util.concurrent.CompletableFuture@27dc81be[Not completed]
2023-03-23 15:03:23,641 [pool-5-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(195)) - d921930f-d542-40eb-8def-dc15158156ad: new RaftServerImpl for group-EF3379747B75:[d921930f-d542-40eb-8def-dc15158156ad|rpc:localhost:9894|priority:0|startupRole:FOLLOWER] with SCMStateMachine:uninitialized
2023-03-23 15:03:23,644 [pool-5-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 5000ms (custom)
2023-03-23 15:03:23,644 [pool-5-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 5200ms (custom)
2023-03-23 15:03:23,645 [pool-5-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-03-23 15:03:23,645 [pool-5-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 120000ms (custom)
2023-03-23 15:03:23,645 [pool-5-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-23 15:03:23,645 [pool-5-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-03-23 15:03:23,645 [pool-5-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(118)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75: ConfigurationManager, init=-1: peers:[d921930f-d542-40eb-8def-dc15158156ad|rpc:localhost:9894|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-03-23 15:03:23,648 [pool-5-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-b946a180-bb8b-46a5-83bb-826cd7ce8166/scm1/ratis] (custom)
2023-03-23 15:03:23,648 [pool-5-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-03-23 15:03:23,648 [pool-5-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-03-23 15:03:23,649 [pool-5-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-03-23 15:03:23,649 [pool-5-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60000ms (default)
2023-03-23 15:03:23,649 [pool-5-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-03-23 15:03:23,649 [pool-5-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = false (custom)
2023-03-23 15:03:23,649 [pool-5-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-03-23 15:03:23,650 [pool-5-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-03-23 15:03:23,650 [pool-5-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-03-23 15:03:23,650 [pool-5-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-03-23 15:03:23,651 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(137)) - The storage directory /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-b946a180-bb8b-46a5-83bb-826cd7ce8166/scm1/ratis/72b11b74-7879-4a58-a873-ef3379747b75 does not exist. Creating ...
2023-03-23 15:03:23,655 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(231)) - Lock on /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-b946a180-bb8b-46a5-83bb-826cd7ce8166/scm1/ratis/72b11b74-7879-4a58-a873-ef3379747b75/in_use.lock acquired by nodename 97173@fv-az459-573
2023-03-23 15:03:23,662 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-b946a180-bb8b-46a5-83bb-826cd7ce8166/scm1/ratis/72b11b74-7879-4a58-a873-ef3379747b75 has been successfully formatted.
2023-03-23 15:03:23,664 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-03-23 15:03:23,670 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1000000 (custom)
2023-03-23 15:03:23,671 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2023-03-23 15:03:23,674 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-03-23 15:03:23,675 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-03-23 15:03:23,677 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 4194304 (custom)
2023-03-23 15:03:23,682 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 2 (custom)
2023-03-23 15:03:23,683 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-03-23 15:03:23,688 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(189)) - new d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-b946a180-bb8b-46a5-83bb-826cd7ce8166/scm1/ratis/72b11b74-7879-4a58-a873-ef3379747b75
2023-03-23 15:03:23,688 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-03-23 15:03:23,689 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-03-23 15:03:23,690 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 4194304 (custom)
2023-03-23 15:03:23,690 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4194304 (custom)
2023-03-23 15:03:23,691 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-03-23 15:03:23,691 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-03-23 15:03:23,692 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-03-23 15:03:23,692 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-03-23 15:03:23,701 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-23 15:03:23,701 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2023-03-23 15:03:23,704 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-03-23 15:03:23,704 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-03-23 15:03:23,705 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-03-23 15:03:23,710 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(135)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-03-23 15:03:23,710 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(135)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-03-23 15:03:23,711 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(334)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75: start as a follower, conf=-1: peers:[d921930f-d542-40eb-8def-dc15158156ad|rpc:localhost:9894|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-23 15:03:23,711 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(321)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-03-23 15:03:23,713 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - d921930f-d542-40eb-8def-dc15158156ad: start d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-FollowerState
2023-03-23 15:03:23,713 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 5000ms (fallback to raft.server.rpc.timeout.min)
2023-03-23 15:03:23,714 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-EF3379747B75,id=d921930f-d542-40eb-8def-dc15158156ad
2023-03-23 15:03:23,718 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 5200ms (fallback to raft.server.rpc.timeout.max)
2023-03-23 15:03:23,719 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2023-03-23 15:03:23,719 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.threshold = 1000 (custom)
2023-03-23 15:03:23,719 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-03-23 15:03:23,720 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-03-23 15:03:23,723 [main] INFO  server.RaftServer (RaftServerProxy.java:startImpl(393)) - d921930f-d542-40eb-8def-dc15158156ad: start RPC server
2023-03-23 15:03:23,774 [main] INFO  server.GrpcService (GrpcService.java:startImpl(262)) - d921930f-d542-40eb-8def-dc15158156ad: GrpcService started, listening on 9894
2023-03-23 15:03:23,777 [JvmPauseMonitor0] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-d921930f-d542-40eb-8def-dc15158156ad: Started
2023-03-23 15:03:28,882 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-FollowerState: change to CANDIDATE, lastRpcElapsedTime:5169325784ns, electionTimeout:5163ms
2023-03-23 15:03:28,883 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - d921930f-d542-40eb-8def-dc15158156ad: shutdown d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-FollowerState
2023-03-23 15:03:28,884 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(321)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-03-23 15:03:28,886 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-03-23 15:03:28,886 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - d921930f-d542-40eb-8def-dc15158156ad: start d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection1
2023-03-23 15:03:28,888 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(312)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection1 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[d921930f-d542-40eb-8def-dc15158156ad|rpc:localhost:9894|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-23 15:03:28,889 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(314)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection1 PRE_VOTE round 0: result PASSED (term=0)
2023-03-23 15:03:28,891 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(312)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection1 ELECTION round 0: submit vote requests at term 1 for -1: peers:[d921930f-d542-40eb-8def-dc15158156ad|rpc:localhost:9894|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-23 15:03:28,891 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection1] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(314)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection1 ELECTION round 0: result PASSED (term=1)
2023-03-23 15:03:28,891 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - d921930f-d542-40eb-8def-dc15158156ad: shutdown d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection1
2023-03-23 15:03:28,891 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(321)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2023-03-23 15:03:28,891 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection1] INFO  server.RaftServer$Division (ServerState.java:setLeader(313)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75: change Leader from null to d921930f-d542-40eb-8def-dc15158156ad at term 1 for becomeLeader, leader elected after 5242ms
2023-03-23 15:03:28,896 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2023-03-23 15:03:28,900 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-03-23 15:03:28,900 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (default)
2023-03-23 15:03:28,905 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2023-03-23 15:03:28,905 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2023-03-23 15:03:28,906 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2023-03-23 15:03:28,910 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-03-23 15:03:28,911 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2023-03-23 15:03:28,913 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - d921930f-d542-40eb-8def-dc15158156ad: start d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderStateImpl
2023-03-23 15:03:28,931 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(452)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-SegmentedRaftLogWorker: Starting segment from index:0
2023-03-23 15:03:28,974 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(430)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75: set configuration 0: peers:[d921930f-d542-40eb-8def-dc15158156ad|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-23 15:03:29,018 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(656)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-SegmentedRaftLogWorker: created new log segment /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-b946a180-bb8b-46a5-83bb-826cd7ce8166/scm1/ratis/72b11b74-7879-4a58-a873-ef3379747b75/current/log_inprogress_0
2023-03-23 15:03:29,778 [main] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$6(409)) - d921930f-d542-40eb-8def-dc15158156ad: close
2023-03-23 15:03:29,779 [main] INFO  server.GrpcService (GrpcService.java:closeImpl(271)) - d921930f-d542-40eb-8def-dc15158156ad: shutdown server GrpcServerProtocolService now
2023-03-23 15:03:29,779 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(458)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75: shutdown
2023-03-23 15:03:29,780 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-EF3379747B75,id=d921930f-d542-40eb-8def-dc15158156ad
2023-03-23 15:03:29,780 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - d921930f-d542-40eb-8def-dc15158156ad: shutdown d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderStateImpl
2023-03-23 15:03:29,788 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-PendingRequests: sendNotLeaderResponses
2023-03-23 15:03:29,790 [main] INFO  server.GrpcService (GrpcService.java:closeImpl(280)) - d921930f-d542-40eb-8def-dc15158156ad: shutdown server GrpcServerProtocolService successfully
2023-03-23 15:03:29,791 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(287)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-StateMachineUpdater: Took a snapshot at index 0
2023-03-23 15:03:29,791 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(92)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-StateMachineUpdater: snapshotIndex: updateIncreasingly -1 -> 0
2023-03-23 15:03:29,793 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(153)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-StateMachineUpdater: set stopIndex = 0
2023-03-23 15:03:29,793 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(466)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75: closes. applyIndex: 0
2023-03-23 15:03:29,796 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(347)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2023-03-23 15:03:29,797 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(257)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-SegmentedRaftLogWorker close()
2023-03-23 15:03:29,799 [JvmPauseMonitor0] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-d921930f-d542-40eb-8def-dc15158156ad: Stopped
2023-03-23 15:03:29,800 [main] INFO  ha.SCMRatisServerImpl (SCMRatisServerImpl.java:start(179)) - starting ratis server 0.0.0.0:9894
2023-03-23 15:03:29,801 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(231)) - Lock on /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-b946a180-bb8b-46a5-83bb-826cd7ce8166/scm1/ratis/72b11b74-7879-4a58-a873-ef3379747b75/in_use.lock acquired by nodename 97173@fv-az459-573
2023-03-23 15:03:29,802 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:analyzeAndRecoverStorage(117)) - Read RaftStorageMetadata{term=1, votedFor=d921930f-d542-40eb-8def-dc15158156ad} from /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-b946a180-bb8b-46a5-83bb-826cd7ce8166/scm1/ratis/72b11b74-7879-4a58-a873-ef3379747b75/current/raft-meta
2023-03-23 15:03:29,804 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(430)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75: set configuration 0: peers:[d921930f-d542-40eb-8def-dc15158156ad|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-23 15:03:29,804 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-03-23 15:03:29,804 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1000000 (custom)
2023-03-23 15:03:29,804 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2023-03-23 15:03:29,805 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-03-23 15:03:29,805 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-03-23 15:03:29,805 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 4194304 (custom)
2023-03-23 15:03:29,806 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 2 (custom)
2023-03-23 15:03:29,806 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-03-23 15:03:29,806 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(189)) - new d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-b946a180-bb8b-46a5-83bb-826cd7ce8166/scm1/ratis/72b11b74-7879-4a58-a873-ef3379747b75
2023-03-23 15:03:29,806 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-03-23 15:03:29,806 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-03-23 15:03:29,806 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 4194304 (custom)
2023-03-23 15:03:29,806 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4194304 (custom)
2023-03-23 15:03:29,806 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-03-23 15:03:29,807 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-03-23 15:03:29,807 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-03-23 15:03:29,807 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-03-23 15:03:29,807 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-23 15:03:29,807 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2023-03-23 15:03:29,810 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-03-23 15:03:29,810 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-03-23 15:03:29,810 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-03-23 15:03:29,819 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(430)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75: set configuration 0: peers:[d921930f-d542-40eb-8def-dc15158156ad|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-23 15:03:29,820 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  segmented.LogSegment (LogSegment.java:loadSegment(173)) - Successfully read 1 entries from segment file /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-b946a180-bb8b-46a5-83bb-826cd7ce8166/scm1/ratis/72b11b74-7879-4a58-a873-ef3379747b75/current/log_inprogress_0
2023-03-23 15:03:29,820 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(135)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> 0
2023-03-23 15:03:29,821 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(135)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-03-23 15:03:29,823 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(334)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75: start as a follower, conf=0: peers:[d921930f-d542-40eb-8def-dc15158156ad|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-23 15:03:29,823 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(321)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75: changes role from      null to FOLLOWER at term 1 for startAsFollower
2023-03-23 15:03:29,823 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - d921930f-d542-40eb-8def-dc15158156ad: start d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-FollowerState
2023-03-23 15:03:29,823 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-EF3379747B75,id=d921930f-d542-40eb-8def-dc15158156ad
2023-03-23 15:03:29,824 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 5000ms (fallback to raft.server.rpc.timeout.min)
2023-03-23 15:03:29,824 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2023-03-23 15:03:29,824 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 5200ms (fallback to raft.server.rpc.timeout.max)
2023-03-23 15:03:29,824 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.threshold = 1000 (custom)
2023-03-23 15:03:29,825 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-03-23 15:03:29,825 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-03-23 15:03:29,825 [main] INFO  server.RaftServer (RaftServerProxy.java:startImpl(393)) - d921930f-d542-40eb-8def-dc15158156ad: start RPC server
2023-03-23 15:03:29,826 [main] INFO  server.GrpcService (GrpcService.java:startImpl(262)) - d921930f-d542-40eb-8def-dc15158156ad: GrpcService started, listening on 9894
2023-03-23 15:03:29,827 [JvmPauseMonitor1] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-d921930f-d542-40eb-8def-dc15158156ad: Started
2023-03-23 15:03:29,833 [main] INFO  ha.SCMHAManagerImpl (SCMHAManagerImpl.java:start(122)) -  scm role is FOLLOWER peers [d921930f-d542-40eb-8def-dc15158156ad|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]
2023-03-23 15:03:29,834 [main] INFO  ha.InterSCMGrpcService (InterSCMGrpcProtocolService.java:start(94)) - Starting SCM Grpc Service at port 9895
2023-03-23 15:03:34,883 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-FollowerState: change to CANDIDATE, lastRpcElapsedTime:5059771375ns, electionTimeout:5058ms
2023-03-23 15:03:34,883 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - d921930f-d542-40eb-8def-dc15158156ad: shutdown d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-FollowerState
2023-03-23 15:03:34,883 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(321)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75: changes role from  FOLLOWER to CANDIDATE at term 1 for changeToCandidate
2023-03-23 15:03:34,884 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-03-23 15:03:34,884 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - d921930f-d542-40eb-8def-dc15158156ad: start d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection2
2023-03-23 15:03:34,885 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(312)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection2 PRE_VOTE round 0: submit vote requests at term 1 for 0: peers:[d921930f-d542-40eb-8def-dc15158156ad|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-23 15:03:34,885 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(314)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection2 PRE_VOTE round 0: result PASSED (term=1)
2023-03-23 15:03:34,890 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(312)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection2 ELECTION round 0: submit vote requests at term 2 for 0: peers:[d921930f-d542-40eb-8def-dc15158156ad|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-23 15:03:34,890 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection2] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(314)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection2 ELECTION round 0: result PASSED (term=2)
2023-03-23 15:03:34,890 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection2] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - d921930f-d542-40eb-8def-dc15158156ad: shutdown d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection2
2023-03-23 15:03:34,890 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection2] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(321)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75: changes role from CANDIDATE to LEADER at term 2 for changeToLeader
2023-03-23 15:03:34,891 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection2] INFO  ha.SCMStateMachine (SCMStateMachine.java:notifyLeaderChanged(274)) - current SCM becomes leader of term 2.
2023-03-23 15:03:34,897 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection2] INFO  server.RaftServer$Division (ServerState.java:setLeader(313)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75: change Leader from null to d921930f-d542-40eb-8def-dc15158156ad at term 2 for becomeLeader, leader elected after 11361ms
2023-03-23 15:03:34,897 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2023-03-23 15:03:34,897 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-03-23 15:03:34,898 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (default)
2023-03-23 15:03:34,898 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2023-03-23 15:03:34,898 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2023-03-23 15:03:34,898 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2023-03-23 15:03:34,898 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-03-23 15:03:34,898 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection2] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2023-03-23 15:03:34,898 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection2] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - d921930f-d542-40eb-8def-dc15158156ad: start d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderStateImpl
2023-03-23 15:03:34,899 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:rollLogSegment(457)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-SegmentedRaftLogWorker: Rolling segment log-0_0 to index:0
2023-03-23 15:03:34,901 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(613)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-SegmentedRaftLogWorker: Rolled log segment from /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-b946a180-bb8b-46a5-83bb-826cd7ce8166/scm1/ratis/72b11b74-7879-4a58-a873-ef3379747b75/current/log_inprogress_0 to /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-b946a180-bb8b-46a5-83bb-826cd7ce8166/scm1/ratis/72b11b74-7879-4a58-a873-ef3379747b75/current/log_0-0
2023-03-23 15:03:34,907 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderElection2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(430)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75: set configuration 1: peers:[d921930f-d542-40eb-8def-dc15158156ad|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-23 15:03:34,911 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(656)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-SegmentedRaftLogWorker: created new log segment /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-b946a180-bb8b-46a5-83bb-826cd7ce8166/scm1/ratis/72b11b74-7879-4a58-a873-ef3379747b75/current/log_inprogress_1
2023-03-23 15:03:35,885 [main] INFO  ha.SCMRatisServerImpl (SCMRatisServerImpl.java:<init>(88)) - starting Raft server for scm:5aa61b91-c64a-4038-a553-6925ba4cd416
2023-03-23 15:03:35,886 [main] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-03-23 15:03:35,886 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-23 15:03:35,887 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.port = 9898 (fallback to raft.grpc.server.port)
2023-03-23 15:03:35,887 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-23 15:03:35,888 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.port = 9898 (fallback to raft.grpc.server.port)
2023-03-23 15:03:35,888 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-23 15:03:35,889 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 9898 (custom)
2023-03-23 15:03:35,889 [main] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 32m (=33554432) (custom)
2023-03-23 15:03:35,889 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2023-03-23 15:03:35,890 [main] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-23 15:03:35,890 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 30000ms (custom)
2023-03-23 15:03:35,891 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-03-23 15:03:35,892 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-23 15:03:35,895 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-23 15:03:35,897 [main] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-03-23 15:03:35,897 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-03-23 15:03:35,899 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-03-23 15:03:35,899 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 120000ms (custom)
2023-03-23 15:03:35,900 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-23 15:03:35,901 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-b946a180-bb8b-46a5-83bb-826cd7ce8166/scm2/ratis] (custom)
2023-03-23 15:03:35,903 [main] INFO  server.RaftServer (RaftServerProxy.java:addNew(96)) - 5aa61b91-c64a-4038-a553-6925ba4cd416: addNew group-EF3379747B75:[] returns group-EF3379747B75:java.util.concurrent.CompletableFuture@2aa0feb2[Not completed]
2023-03-23 15:03:35,903 [pool-8-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(195)) - 5aa61b91-c64a-4038-a553-6925ba4cd416: new RaftServerImpl for group-EF3379747B75:[] with SCMStateMachine:uninitialized
2023-03-23 15:03:35,903 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 5000ms (custom)
2023-03-23 15:03:35,903 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 5200ms (custom)
2023-03-23 15:03:35,903 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-03-23 15:03:35,903 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 120000ms (custom)
2023-03-23 15:03:35,904 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-23 15:03:35,904 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-03-23 15:03:35,904 [pool-8-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(118)) - 5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75: ConfigurationManager, init=-1: peers:[]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-03-23 15:03:35,904 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-b946a180-bb8b-46a5-83bb-826cd7ce8166/scm2/ratis] (custom)
2023-03-23 15:03:35,904 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-03-23 15:03:35,904 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-03-23 15:03:35,904 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-03-23 15:03:35,904 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60000ms (default)
2023-03-23 15:03:35,904 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-03-23 15:03:35,905 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = false (custom)
2023-03-23 15:03:35,905 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-03-23 15:03:35,905 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-03-23 15:03:35,905 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-03-23 15:03:35,905 [pool-8-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-03-23 15:03:35,906 [main] INFO  ha.SCMSnapshotProvider (SCMSnapshotProvider.java:<init>(66)) - Initializing SCM Snapshot Provider
2023-03-23 15:03:35,906 [main] WARN  ha.SCMHAUtils (SCMHAUtils.java:getSCMRatisSnapshotDirectory(153)) - SCM snapshot dir is not configured. Falling back to ozone.metadata.dirs config
2023-03-23 15:03:35,907 [main] INFO  ha.SCMRatisServerImpl (SCMRatisServerImpl.java:start(179)) - starting ratis server 0.0.0.0:9898
2023-03-23 15:03:35,908 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(137)) - The storage directory /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-b946a180-bb8b-46a5-83bb-826cd7ce8166/scm2/ratis/72b11b74-7879-4a58-a873-ef3379747b75 does not exist. Creating ...
2023-03-23 15:03:35,909 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(231)) - Lock on /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-b946a180-bb8b-46a5-83bb-826cd7ce8166/scm2/ratis/72b11b74-7879-4a58-a873-ef3379747b75/in_use.lock acquired by nodename 97173@fv-az459-573
2023-03-23 15:03:35,910 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-b946a180-bb8b-46a5-83bb-826cd7ce8166/scm2/ratis/72b11b74-7879-4a58-a873-ef3379747b75 has been successfully formatted.
2023-03-23 15:03:35,910 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-03-23 15:03:35,910 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1000000 (custom)
2023-03-23 15:03:35,910 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2023-03-23 15:03:35,911 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-03-23 15:03:35,911 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-03-23 15:03:35,911 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 4194304 (custom)
2023-03-23 15:03:35,911 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 2 (custom)
2023-03-23 15:03:35,911 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-03-23 15:03:35,911 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(189)) - new 5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-b946a180-bb8b-46a5-83bb-826cd7ce8166/scm2/ratis/72b11b74-7879-4a58-a873-ef3379747b75
2023-03-23 15:03:35,911 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-03-23 15:03:35,911 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-03-23 15:03:35,911 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 4194304 (custom)
2023-03-23 15:03:35,911 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4194304 (custom)
2023-03-23 15:03:35,912 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-03-23 15:03:35,912 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-03-23 15:03:35,912 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-03-23 15:03:35,912 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-03-23 15:03:35,912 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-23 15:03:35,912 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2023-03-23 15:03:35,916 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-03-23 15:03:35,916 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-03-23 15:03:35,917 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-03-23 15:03:35,917 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(135)) - 5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-03-23 15:03:35,917 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(135)) - 5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-03-23 15:03:35,917 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(340)) - 5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75: start with initializing state, conf=-1: peers:[]|listeners:[], old=null
2023-03-23 15:03:35,917 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(321)) - 5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75: changes role from      null to FOLLOWER at term 0 for startInitializing
2023-03-23 15:03:35,917 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-EF3379747B75,id=5aa61b91-c64a-4038-a553-6925ba4cd416
2023-03-23 15:03:35,917 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2023-03-23 15:03:35,918 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.threshold = 1000 (custom)
2023-03-23 15:03:35,918 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-03-23 15:03:35,918 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-03-23 15:03:35,919 [main] INFO  server.RaftServer (RaftServerProxy.java:startImpl(393)) - 5aa61b91-c64a-4038-a553-6925ba4cd416: start RPC server
2023-03-23 15:03:35,921 [main] INFO  server.GrpcService (GrpcService.java:startImpl(262)) - 5aa61b91-c64a-4038-a553-6925ba4cd416: GrpcService started, listening on 9898
2023-03-23 15:03:35,924 [main] INFO  ha.SCMRatisServerImpl (SCMRatisServerImpl.java:addSCM(299)) - d921930f-d542-40eb-8def-dc15158156ad: Submitting SetConfiguration request to Ratis server with new SCM peers list: [d921930f-d542-40eb-8def-dc15158156ad|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER, 5aa61b91-c64a-4038-a553-6925ba4cd416|rpc:localhost:9898|priority:0|startupRole:FOLLOWER]
2023-03-23 15:03:35,933 [JvmPauseMonitor2] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-5aa61b91-c64a-4038-a553-6925ba4cd416: Started
2023-03-23 15:03:35,937 [main] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1112)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75: receive setConfiguration SetConfigurationRequest:client-CED578E30C9B->d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75, cid=0, seq=0, RW, null, SET_UNCONDITIONALLY, servers:[d921930f-d542-40eb-8def-dc15158156ad|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER, 5aa61b91-c64a-4038-a553-6925ba4cd416|rpc:localhost:9898|priority:0|startupRole:FOLLOWER], listeners:[]
2023-03-23 15:03:35,937 [main] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(368)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-CED578E30C9B->d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75, cid=0, seq=0, RW, null, SET_UNCONDITIONALLY, servers:[d921930f-d542-40eb-8def-dc15158156ad|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER, 5aa61b91-c64a-4038-a553-6925ba4cd416|rpc:localhost:9898|priority:0|startupRole:FOLLOWER], listeners:[]
2023-03-23 15:03:35,944 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-03-23 15:03:35,945 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2023-03-23 15:03:35,945 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 1024 (custom)
2023-03-23 15:03:35,950 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-03-23 15:03:35,950 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 30000ms (custom)
2023-03-23 15:03:35,950 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = false (custom)
2023-03-23 15:03:35,950 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-03-23 15:03:35,950 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-03-23 15:03:35,954 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75->5aa61b91-c64a-4038-a553-6925ba4cd416-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(635)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75->5aa61b91-c64a-4038-a553-6925ba4cd416-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, notify follower to install snapshot-(t:1, i:0)
2023-03-23 15:03:35,971 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75->5aa61b91-c64a-4038-a553-6925ba4cd416-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(643)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75->5aa61b91-c64a-4038-a553-6925ba4cd416-GrpcLogAppender: send d921930f-d542-40eb-8def-dc15158156ad->5aa61b91-c64a-4038-a553-6925ba4cd416#0-t2,notify:(t:1, i:0)
2023-03-23 15:03:35,973 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75->5aa61b91-c64a-4038-a553-6925ba4cd416-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for 5aa61b91-c64a-4038-a553-6925ba4cd416
2023-03-23 15:03:36,255 [grpc-default-executor-0] INFO  impl.SnapshotInstallationHandler (SnapshotInstallationHandler.java:installSnapshot(89)) - 5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75: receive installSnapshot: d921930f-d542-40eb-8def-dc15158156ad->5aa61b91-c64a-4038-a553-6925ba4cd416#0-t2,notify:(t:1, i:0)
2023-03-23 15:03:36,257 [grpc-default-executor-0] INFO  ha.SCMStateMachine (SCMStateMachine.java:notifyLeaderChanged(270)) - leader changed, yet current SCM is still follower.
2023-03-23 15:03:36,257 [grpc-default-executor-0] INFO  server.RaftServer$Division (ServerState.java:setLeader(313)) - 5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75: change Leader from null to d921930f-d542-40eb-8def-dc15158156ad at term 2 for installSnapshot, leader elected after 352ms
2023-03-23 15:03:36,259 [grpc-default-executor-0] INFO  impl.SnapshotInstallationHandler (SnapshotInstallationHandler.java:notifyStateMachineToInstallSnapshot(220)) - 5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75: Received notification to install snapshot at index 0
2023-03-23 15:03:36,259 [grpc-default-executor-0] INFO  impl.SnapshotInstallationHandler (SnapshotInstallationHandler.java:notifyStateMachineToInstallSnapshot(229)) - 5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75: InstallSnapshot notification result: ALREADY_INSTALLED, current snapshot index: -1
2023-03-23 15:03:36,334 [grpc-default-executor-0] INFO  impl.SnapshotInstallationHandler (SnapshotInstallationHandler.java:installSnapshotImpl(134)) - 5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75: set new configuration index: 1
configurationEntry {
  peers {
    id: "d921930f-d542-40eb-8def-dc15158156ad"
    address: "localhost:9894"
    startupRole: FOLLOWER
  }
}
 from snapshot
2023-03-23 15:03:36,334 [grpc-default-executor-0] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(430)) - 5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75: set configuration 1: peers:[d921930f-d542-40eb-8def-dc15158156ad|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-23 15:03:36,335 [grpc-default-executor-0] INFO  impl.SnapshotInstallationHandler (SnapshotInstallationHandler.java:installSnapshot(100)) - 5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75: reply installSnapshot: d921930f-d542-40eb-8def-dc15158156ad<-5aa61b91-c64a-4038-a553-6925ba4cd416#0:OK-t0,ALREADY_INSTALLED
2023-03-23 15:03:36,340 [grpc-default-executor-2] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onNext(494)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75->5aa61b91-c64a-4038-a553-6925ba4cd416-InstallSnapshotResponseHandler: received the first reply d921930f-d542-40eb-8def-dc15158156ad<-5aa61b91-c64a-4038-a553-6925ba4cd416#0:OK-t0,ALREADY_INSTALLED
2023-03-23 15:03:36,342 [grpc-default-executor-2] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onNext(517)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75->5aa61b91-c64a-4038-a553-6925ba4cd416-InstallSnapshotResponseHandler: Follower snapshot is already at index 0.
2023-03-23 15:03:36,342 [grpc-default-executor-2] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75->5aa61b91-c64a-4038-a553-6925ba4cd416: snapshotIndex: setUnconditionally 0 -> 0
2023-03-23 15:03:36,342 [grpc-default-executor-2] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75->5aa61b91-c64a-4038-a553-6925ba4cd416: matchIndex: setUnconditionally 0 -> 0
2023-03-23 15:03:36,342 [grpc-default-executor-2] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75->5aa61b91-c64a-4038-a553-6925ba4cd416: nextIndex: setUnconditionally 0 -> 1
2023-03-23 15:03:36,342 [grpc-default-executor-2] INFO  leader.FollowerInfo (FollowerInfoImpl.java:setAttemptedToInstallSnapshot(118)) - Follower d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75->5aa61b91-c64a-4038-a553-6925ba4cd416 acknowledged installing snapshot
2023-03-23 15:03:36,342 [grpc-default-executor-2] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75->5aa61b91-c64a-4038-a553-6925ba4cd416: nextIndex: updateToMax old=1, new=1, updated? false
2023-03-23 15:03:36,343 [grpc-default-executor-0] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - 5aa61b91-c64a-4038-a553-6925ba4cd416: Completed INSTALL_SNAPSHOT, lastRequest: d921930f-d542-40eb-8def-dc15158156ad->5aa61b91-c64a-4038-a553-6925ba4cd416#0-t2,notify:(t:1, i:0)
2023-03-23 15:03:36,381 [5aa61b91-c64a-4038-a553-6925ba4cd416-server-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - 5aa61b91-c64a-4038-a553-6925ba4cd416: start 5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75-FollowerState
2023-03-23 15:03:36,383 [5aa61b91-c64a-4038-a553-6925ba4cd416-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:checkInconsistentAppendEntries(1508)) - 5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75: Failed appendEntries as previous log entry ((t:1, i:0)) is not found
2023-03-23 15:03:36,384 [5aa61b91-c64a-4038-a553-6925ba4cd416-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:checkInconsistentAppendEntries(1478)) - 5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75: inconsistency entries. Reply:d921930f-d542-40eb-8def-dc15158156ad<-5aa61b91-c64a-4038-a553-6925ba4cd416#0:FAIL-t2,INCONSISTENCY,nextIndex=0,followerCommit=-1,matchIndex=-1
2023-03-23 15:03:36,385 [5aa61b91-c64a-4038-a553-6925ba4cd416-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:checkInconsistentAppendEntries(1508)) - 5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75: Failed appendEntries as previous log entry ((t:1, i:0)) is not found
2023-03-23 15:03:36,385 [5aa61b91-c64a-4038-a553-6925ba4cd416-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:checkInconsistentAppendEntries(1478)) - 5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75: inconsistency entries. Reply:d921930f-d542-40eb-8def-dc15158156ad<-5aa61b91-c64a-4038-a553-6925ba4cd416#1:FAIL-t2,INCONSISTENCY,nextIndex=0,followerCommit=-1,matchIndex=-1
2023-03-23 15:03:36,389 [grpc-default-executor-0] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75->5aa61b91-c64a-4038-a553-6925ba4cd416: nextIndex: updateUnconditionally 3 -> 0
2023-03-23 15:03:36,391 [grpc-default-executor-0] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75->5aa61b91-c64a-4038-a553-6925ba4cd416: nextIndex: updateUnconditionally 3 -> 0
2023-03-23 15:03:36,394 [5aa61b91-c64a-4038-a553-6925ba4cd416-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(430)) - 5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75: set configuration 0: peers:[d921930f-d542-40eb-8def-dc15158156ad|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-23 15:03:36,394 [5aa61b91-c64a-4038-a553-6925ba4cd416-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(430)) - 5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75: set configuration 1: peers:[d921930f-d542-40eb-8def-dc15158156ad|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-23 15:03:36,395 [5aa61b91-c64a-4038-a553-6925ba4cd416-server-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(452)) - 5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75-SegmentedRaftLogWorker: Starting segment from index:0
2023-03-23 15:03:36,398 [5aa61b91-c64a-4038-a553-6925ba4cd416-server-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:rollLogSegment(457)) - 5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75-SegmentedRaftLogWorker: Rolling segment log-0_0 to index:0
2023-03-23 15:03:36,402 [5aa61b91-c64a-4038-a553-6925ba4cd416-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(430)) - 5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75: set configuration 0: peers:[d921930f-d542-40eb-8def-dc15158156ad|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-23 15:03:36,402 [5aa61b91-c64a-4038-a553-6925ba4cd416-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(430)) - 5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75: set configuration 1: peers:[d921930f-d542-40eb-8def-dc15158156ad|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-23 15:03:36,403 [5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(656)) - 5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75-SegmentedRaftLogWorker: created new log segment /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-b946a180-bb8b-46a5-83bb-826cd7ce8166/scm2/ratis/72b11b74-7879-4a58-a873-ef3379747b75/current/log_inprogress_0
2023-03-23 15:03:36,404 [5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(613)) - 5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75-SegmentedRaftLogWorker: Rolled log segment from /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-b946a180-bb8b-46a5-83bb-826cd7ce8166/scm2/ratis/72b11b74-7879-4a58-a873-ef3379747b75/current/log_inprogress_0 to /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-b946a180-bb8b-46a5-83bb-826cd7ce8166/scm2/ratis/72b11b74-7879-4a58-a873-ef3379747b75/current/log_0-0
2023-03-23 15:03:36,413 [5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(656)) - 5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75-SegmentedRaftLogWorker: created new log segment /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-b946a180-bb8b-46a5-83bb-826cd7ce8166/scm2/ratis/72b11b74-7879-4a58-a873-ef3379747b75/current/log_inprogress_1
2023-03-23 15:03:36,419 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderStateImpl] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(430)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75: set configuration 3: peers:[d921930f-d542-40eb-8def-dc15158156ad|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER, 5aa61b91-c64a-4038-a553-6925ba4cd416|rpc:localhost:9898|priority:0|startupRole:FOLLOWER]|listeners:[], old=peers:[d921930f-d542-40eb-8def-dc15158156ad|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[]
2023-03-23 15:03:36,422 [5aa61b91-c64a-4038-a553-6925ba4cd416-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(430)) - 5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75: set configuration 3: peers:[d921930f-d542-40eb-8def-dc15158156ad|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER, 5aa61b91-c64a-4038-a553-6925ba4cd416|rpc:localhost:9898|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[], old=peers:[d921930f-d542-40eb-8def-dc15158156ad|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[]
2023-03-23 15:03:36,436 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderStateImpl] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(430)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75: set configuration 5: peers:[d921930f-d542-40eb-8def-dc15158156ad|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER, 5aa61b91-c64a-4038-a553-6925ba4cd416|rpc:localhost:9898|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-23 15:03:36,442 [5aa61b91-c64a-4038-a553-6925ba4cd416-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(430)) - 5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75: set configuration 5: peers:[d921930f-d542-40eb-8def-dc15158156ad|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER, 5aa61b91-c64a-4038-a553-6925ba4cd416|rpc:localhost:9898|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-23 15:03:36,448 [main] INFO  ha.SCMRatisServerImpl (SCMRatisServerImpl.java:addSCM(310)) - Successfully added new SCM: 5aa61b91-c64a-4038-a553-6925ba4cd416.
2023-03-23 15:03:36,449 [main] INFO  ha.SCMRatisServerImpl (SCMRatisServerImpl.java:stop(238)) - stopping ratis server 0.0.0.0:9898
2023-03-23 15:03:36,449 [main] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$6(409)) - 5aa61b91-c64a-4038-a553-6925ba4cd416: close
2023-03-23 15:03:36,449 [main] INFO  server.GrpcService (GrpcService.java:closeImpl(271)) - 5aa61b91-c64a-4038-a553-6925ba4cd416: shutdown server GrpcServerProtocolService now
2023-03-23 15:03:36,450 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(458)) - 5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75: shutdown
2023-03-23 15:03:36,451 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-EF3379747B75,id=5aa61b91-c64a-4038-a553-6925ba4cd416
2023-03-23 15:03:36,451 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - 5aa61b91-c64a-4038-a553-6925ba4cd416: shutdown 5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75-FollowerState
2023-03-23 15:03:36,451 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(153)) - 5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75-StateMachineUpdater: set stopIndex = 3
2023-03-23 15:03:36,451 [5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - 5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75-FollowerState was interrupted
2023-03-23 15:03:36,457 [5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75-StateMachineUpdater] INFO  ha.SCMStateMachine (SCMStateMachine.java:takeSnapshot(312)) - Current Snapshot Index 3, takeSnapshot took 6 ms
2023-03-23 15:03:36,457 [5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(287)) - 5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75-StateMachineUpdater: Took a snapshot at index 3
2023-03-23 15:03:36,457 [5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(92)) - 5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75-StateMachineUpdater: snapshotIndex: updateIncreasingly -1 -> 3
2023-03-23 15:03:36,459 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(466)) - 5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75: closes. applyIndex: 3
2023-03-23 15:03:36,459 [5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(347)) - 5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2023-03-23 15:03:36,462 [grpc-default-executor-1] WARN  server.GrpcServerProtocolService (LogUtils.java:warn(122)) - 5aa61b91-c64a-4038-a553-6925ba4cd416: installSnapshot onError, lastRequest: d921930f-d542-40eb-8def-dc15158156ad->5aa61b91-c64a-4038-a553-6925ba4cd416#7-t2,previous=(t:2, i:5),leaderCommit=5,initializing? true,entries: size=1, first=(t:2, i:6), METADATAENTRY(c:5): org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: client cancelled
2023-03-23 15:03:36,470 [main] INFO  server.GrpcService (GrpcService.java:closeImpl(280)) - 5aa61b91-c64a-4038-a553-6925ba4cd416: shutdown server GrpcServerProtocolService successfully
2023-03-23 15:03:36,470 [grpc-default-executor-4] WARN  server.GrpcLogAppender (LogUtils.java:warn(122)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75->5aa61b91-c64a-4038-a553-6925ba4cd416-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: RST_STREAM closed stream. HTTP/2 error code: CANCEL
2023-03-23 15:03:36,470 [grpc-default-executor-2] WARN  server.GrpcLogAppender (LogUtils.java:warn(122)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75->5aa61b91-c64a-4038-a553-6925ba4cd416-AppendLogResponseHandler: Failed appendEntries: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: RST_STREAM closed stream. HTTP/2 error code: CANCEL
2023-03-23 15:03:36,472 [grpc-default-executor-2] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75->5aa61b91-c64a-4038-a553-6925ba4cd416: nextIndex: updateUnconditionally 7 -> 6
2023-03-23 15:03:36,467 [grpc-default-executor-3] WARN  server.GrpcServerProtocolService (LogUtils.java:warn(122)) - 5aa61b91-c64a-4038-a553-6925ba4cd416: installSnapshot onError, lastRequest: null: org.apache.ratis.thirdparty.io.grpc.StatusRuntimeException: CANCELLED: client cancelled
2023-03-23 15:03:36,472 [5aa61b91-c64a-4038-a553-6925ba4cd416-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(257)) - 5aa61b91-c64a-4038-a553-6925ba4cd416@group-EF3379747B75-SegmentedRaftLogWorker close()
2023-03-23 15:03:36,473 [JvmPauseMonitor2] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-5aa61b91-c64a-4038-a553-6925ba4cd416: Stopped
2023-03-23 15:03:36,477 [main] INFO  ha.SCMRatisServerImpl (SCMRatisServerImpl.java:stop(238)) - stopping ratis server 0.0.0.0:9894
2023-03-23 15:03:36,480 [main] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$6(409)) - d921930f-d542-40eb-8def-dc15158156ad: close
2023-03-23 15:03:36,480 [main] INFO  server.GrpcService (GrpcService.java:closeImpl(271)) - d921930f-d542-40eb-8def-dc15158156ad: shutdown server GrpcServerProtocolService now
2023-03-23 15:03:36,480 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(458)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75: shutdown
2023-03-23 15:03:36,480 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-EF3379747B75,id=d921930f-d542-40eb-8def-dc15158156ad
2023-03-23 15:03:36,481 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - d921930f-d542-40eb-8def-dc15158156ad: shutdown d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-LeaderStateImpl
2023-03-23 15:03:36,481 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75->5aa61b91-c64a-4038-a553-6925ba4cd416-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(200)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75->5aa61b91-c64a-4038-a553-6925ba4cd416-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-03-23 15:03:36,483 [grpc-default-executor-4] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75->5aa61b91-c64a-4038-a553-6925ba4cd416: nextIndex: updateUnconditionally 7 -> 6
2023-03-23 15:03:36,481 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-PendingRequests: sendNotLeaderResponses
2023-03-23 15:03:36,485 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  ha.SCMStateMachine (SCMStateMachine.java:notifyNotLeader(205)) - current leader SCM steps down.
2023-03-23 15:03:36,487 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(153)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-StateMachineUpdater: set stopIndex = 6
2023-03-23 15:03:36,487 [main] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:close(101)) - 5aa61b91-c64a-4038-a553-6925ba4cd416 Close channels
2023-03-23 15:03:36,489 [grpc-default-executor-3] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onError(404)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75->5aa61b91-c64a-4038-a553-6925ba4cd416-GrpcLogAppender is already stopped
2023-03-23 15:03:36,491 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-StateMachineUpdater] INFO  ha.SCMStateMachine (SCMStateMachine.java:takeSnapshot(312)) - Current Snapshot Index 6, takeSnapshot took 5 ms
2023-03-23 15:03:36,491 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(287)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-StateMachineUpdater: Took a snapshot at index 6
2023-03-23 15:03:36,491 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(92)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-StateMachineUpdater: snapshotIndex: updateIncreasingly -1 -> 6
2023-03-23 15:03:36,492 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(466)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75: closes. applyIndex: 6
2023-03-23 15:03:36,492 [d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(347)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2023-03-23 15:03:36,493 [d921930f-d542-40eb-8def-dc15158156ad-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(257)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75-SegmentedRaftLogWorker close()
2023-03-23 15:03:36,494 [grpc-default-executor-4] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onError(404)) - d921930f-d542-40eb-8def-dc15158156ad@group-EF3379747B75->5aa61b91-c64a-4038-a553-6925ba4cd416-GrpcLogAppender is already stopped
2023-03-23 15:03:36,499 [main] INFO  server.GrpcService (GrpcService.java:closeImpl(280)) - d921930f-d542-40eb-8def-dc15158156ad: shutdown server GrpcServerProtocolService successfully
2023-03-23 15:03:36,499 [JvmPauseMonitor1] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-d921930f-d542-40eb-8def-dc15158156ad: Stopped
2023-03-23 15:03:36,540 [main] INFO  ha.SCMRatisServerImpl (SCMRatisServerImpl.java:<init>(88)) - starting Raft server for scm:eda69b29-2396-4f62-87d0-f6656618b9eb
2023-03-23 15:03:36,541 [main] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-03-23 15:03:36,541 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-23 15:03:36,541 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.port = 9894 (fallback to raft.grpc.server.port)
2023-03-23 15:03:36,541 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-23 15:03:36,541 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.port = 9894 (fallback to raft.grpc.server.port)
2023-03-23 15:03:36,541 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-23 15:03:36,542 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 9894 (custom)
2023-03-23 15:03:36,542 [main] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 32m (=33554432) (custom)
2023-03-23 15:03:36,542 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2023-03-23 15:03:36,542 [main] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-23 15:03:36,542 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 30000ms (custom)
2023-03-23 15:03:36,542 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-03-23 15:03:36,542 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-23 15:03:36,543 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-23 15:03:36,543 [main] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-03-23 15:03:36,544 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-03-23 15:03:36,544 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-03-23 15:03:36,544 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 120000ms (custom)
2023-03-23 15:03:36,544 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-23 15:03:36,544 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-0df00ea4-adcf-4144-a5d3-225f93fb990b/scm1/ratis] (custom)
2023-03-23 15:03:36,546 [main] INFO  server.RaftServer (RaftServerProxy.java:addNew(96)) - eda69b29-2396-4f62-87d0-f6656618b9eb: addNew group-17C8346BA9C9:[] returns group-17C8346BA9C9:java.util.concurrent.CompletableFuture@5831989d[Not completed]
2023-03-23 15:03:36,546 [pool-10-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(195)) - eda69b29-2396-4f62-87d0-f6656618b9eb: new RaftServerImpl for group-17C8346BA9C9:[] with SCMStateMachine:uninitialized
2023-03-23 15:03:36,546 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 5000ms (custom)
2023-03-23 15:03:36,546 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 5200ms (custom)
2023-03-23 15:03:36,546 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-03-23 15:03:36,546 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 120000ms (custom)
2023-03-23 15:03:36,546 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-23 15:03:36,546 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-03-23 15:03:36,548 [pool-10-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(118)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9: ConfigurationManager, init=-1: peers:[]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-03-23 15:03:36,548 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-0df00ea4-adcf-4144-a5d3-225f93fb990b/scm1/ratis] (custom)
2023-03-23 15:03:36,548 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-03-23 15:03:36,548 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-03-23 15:03:36,548 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-03-23 15:03:36,548 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60000ms (default)
2023-03-23 15:03:36,548 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-03-23 15:03:36,553 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = false (custom)
2023-03-23 15:03:36,553 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-03-23 15:03:36,553 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-03-23 15:03:36,553 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-03-23 15:03:36,553 [pool-10-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-03-23 15:03:36,553 [main] INFO  ha.SCMSnapshotProvider (SCMSnapshotProvider.java:<init>(66)) - Initializing SCM Snapshot Provider
2023-03-23 15:03:36,554 [main] WARN  ha.SCMHAUtils (SCMHAUtils.java:getSCMRatisSnapshotDirectory(153)) - SCM snapshot dir is not configured. Falling back to ozone.metadata.dirs config
2023-03-23 15:03:36,556 [main] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-03-23 15:03:36,556 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-23 15:03:36,556 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.port = 9894 (fallback to raft.grpc.server.port)
2023-03-23 15:03:36,556 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-23 15:03:36,556 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.port = 9894 (fallback to raft.grpc.server.port)
2023-03-23 15:03:36,556 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-23 15:03:36,557 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 9894 (custom)
2023-03-23 15:03:36,557 [main] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 32m (=33554432) (custom)
2023-03-23 15:03:36,557 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2023-03-23 15:03:36,557 [main] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-23 15:03:36,557 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 30000ms (custom)
2023-03-23 15:03:36,557 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-03-23 15:03:36,557 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-23 15:03:36,557 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-23 15:03:36,558 [main] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-03-23 15:03:36,559 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-03-23 15:03:36,559 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-03-23 15:03:36,559 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 120000ms (custom)
2023-03-23 15:03:36,559 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-23 15:03:36,559 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-0df00ea4-adcf-4144-a5d3-225f93fb990b/scm1/ratis] (custom)
2023-03-23 15:03:36,560 [main] INFO  server.RaftServer (RaftServerProxy.java:addNew(96)) - eda69b29-2396-4f62-87d0-f6656618b9eb: addNew group-17C8346BA9C9:[eda69b29-2396-4f62-87d0-f6656618b9eb|rpc:localhost:9894|priority:0|startupRole:FOLLOWER] returns group-17C8346BA9C9:java.util.concurrent.CompletableFuture@1ce6a9bd[Not completed]
2023-03-23 15:03:36,560 [pool-12-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(195)) - eda69b29-2396-4f62-87d0-f6656618b9eb: new RaftServerImpl for group-17C8346BA9C9:[eda69b29-2396-4f62-87d0-f6656618b9eb|rpc:localhost:9894|priority:0|startupRole:FOLLOWER] with SCMStateMachine:uninitialized
2023-03-23 15:03:36,560 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 5000ms (custom)
2023-03-23 15:03:36,560 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 5200ms (custom)
2023-03-23 15:03:36,560 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-03-23 15:03:36,560 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 120000ms (custom)
2023-03-23 15:03:36,560 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-23 15:03:36,560 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-03-23 15:03:36,561 [pool-12-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(118)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9: ConfigurationManager, init=-1: peers:[eda69b29-2396-4f62-87d0-f6656618b9eb|rpc:localhost:9894|priority:0|startupRole:FOLLOWER]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-03-23 15:03:36,561 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-0df00ea4-adcf-4144-a5d3-225f93fb990b/scm1/ratis] (custom)
2023-03-23 15:03:36,561 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-03-23 15:03:36,561 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-03-23 15:03:36,561 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-03-23 15:03:36,561 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60000ms (default)
2023-03-23 15:03:36,561 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-03-23 15:03:36,561 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = false (custom)
2023-03-23 15:03:36,561 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-03-23 15:03:36,561 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-03-23 15:03:36,561 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-03-23 15:03:36,562 [pool-12-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-03-23 15:03:36,562 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(137)) - The storage directory /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-0df00ea4-adcf-4144-a5d3-225f93fb990b/scm1/ratis/558d0dda-6661-44d8-a6e0-17c8346ba9c9 does not exist. Creating ...
2023-03-23 15:03:36,563 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(231)) - Lock on /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-0df00ea4-adcf-4144-a5d3-225f93fb990b/scm1/ratis/558d0dda-6661-44d8-a6e0-17c8346ba9c9/in_use.lock acquired by nodename 97173@fv-az459-573
2023-03-23 15:03:36,564 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-0df00ea4-adcf-4144-a5d3-225f93fb990b/scm1/ratis/558d0dda-6661-44d8-a6e0-17c8346ba9c9 has been successfully formatted.
2023-03-23 15:03:36,564 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-03-23 15:03:36,564 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1000000 (custom)
2023-03-23 15:03:36,564 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2023-03-23 15:03:36,565 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-03-23 15:03:36,565 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-03-23 15:03:36,565 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 4194304 (custom)
2023-03-23 15:03:36,565 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 2 (custom)
2023-03-23 15:03:36,565 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-03-23 15:03:36,565 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(189)) - new eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-0df00ea4-adcf-4144-a5d3-225f93fb990b/scm1/ratis/558d0dda-6661-44d8-a6e0-17c8346ba9c9
2023-03-23 15:03:36,565 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-03-23 15:03:36,565 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-03-23 15:03:36,565 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 4194304 (custom)
2023-03-23 15:03:36,565 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4194304 (custom)
2023-03-23 15:03:36,565 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-03-23 15:03:36,565 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-03-23 15:03:36,565 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-03-23 15:03:36,566 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-03-23 15:03:36,566 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-23 15:03:36,566 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2023-03-23 15:03:36,569 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-03-23 15:03:36,569 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-03-23 15:03:36,569 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-03-23 15:03:36,570 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(135)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-03-23 15:03:36,570 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(135)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-03-23 15:03:36,570 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(334)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9: start as a follower, conf=-1: peers:[eda69b29-2396-4f62-87d0-f6656618b9eb|rpc:localhost:9894|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-23 15:03:36,570 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(321)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9: changes role from      null to FOLLOWER at term 0 for startAsFollower
2023-03-23 15:03:36,570 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - eda69b29-2396-4f62-87d0-f6656618b9eb: start eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-FollowerState
2023-03-23 15:03:36,573 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-17C8346BA9C9,id=eda69b29-2396-4f62-87d0-f6656618b9eb
2023-03-23 15:03:36,573 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2023-03-23 15:03:36,573 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.threshold = 1000 (custom)
2023-03-23 15:03:36,573 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-03-23 15:03:36,573 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-03-23 15:03:36,574 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 5000ms (fallback to raft.server.rpc.timeout.min)
2023-03-23 15:03:36,574 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 5200ms (fallback to raft.server.rpc.timeout.max)
2023-03-23 15:03:36,574 [main] INFO  server.RaftServer (RaftServerProxy.java:startImpl(393)) - eda69b29-2396-4f62-87d0-f6656618b9eb: start RPC server
2023-03-23 15:03:36,575 [main] INFO  server.GrpcService (GrpcService.java:startImpl(262)) - eda69b29-2396-4f62-87d0-f6656618b9eb: GrpcService started, listening on 9894
2023-03-23 15:03:36,576 [JvmPauseMonitor3] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-eda69b29-2396-4f62-87d0-f6656618b9eb: Started
2023-03-23 15:03:41,597 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-FollowerState: change to CANDIDATE, lastRpcElapsedTime:5027164257ns, electionTimeout:5023ms
2023-03-23 15:03:41,597 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - eda69b29-2396-4f62-87d0-f6656618b9eb: shutdown eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-FollowerState
2023-03-23 15:03:41,597 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(321)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9: changes role from  FOLLOWER to CANDIDATE at term 0 for changeToCandidate
2023-03-23 15:03:41,598 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-03-23 15:03:41,598 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - eda69b29-2396-4f62-87d0-f6656618b9eb: start eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection3
2023-03-23 15:03:41,602 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(312)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection3 PRE_VOTE round 0: submit vote requests at term 0 for -1: peers:[eda69b29-2396-4f62-87d0-f6656618b9eb|rpc:localhost:9894|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-23 15:03:41,602 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(314)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection3 PRE_VOTE round 0: result PASSED (term=0)
2023-03-23 15:03:41,604 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(312)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection3 ELECTION round 0: submit vote requests at term 1 for -1: peers:[eda69b29-2396-4f62-87d0-f6656618b9eb|rpc:localhost:9894|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-23 15:03:41,604 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection3] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(314)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection3 ELECTION round 0: result PASSED (term=1)
2023-03-23 15:03:41,604 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection3] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - eda69b29-2396-4f62-87d0-f6656618b9eb: shutdown eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection3
2023-03-23 15:03:41,604 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection3] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(321)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9: changes role from CANDIDATE to LEADER at term 1 for changeToLeader
2023-03-23 15:03:41,604 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection3] INFO  server.RaftServer$Division (ServerState.java:setLeader(313)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9: change Leader from null to eda69b29-2396-4f62-87d0-f6656618b9eb at term 1 for becomeLeader, leader elected after 5043ms
2023-03-23 15:03:41,604 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2023-03-23 15:03:41,604 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-03-23 15:03:41,604 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (default)
2023-03-23 15:03:41,605 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2023-03-23 15:03:41,605 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2023-03-23 15:03:41,605 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2023-03-23 15:03:41,605 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-03-23 15:03:41,606 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection3] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2023-03-23 15:03:41,606 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection3] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - eda69b29-2396-4f62-87d0-f6656618b9eb: start eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderStateImpl
2023-03-23 15:03:41,606 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection3] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(452)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-SegmentedRaftLogWorker: Starting segment from index:0
2023-03-23 15:03:41,609 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection3] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(430)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9: set configuration 0: peers:[eda69b29-2396-4f62-87d0-f6656618b9eb|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-23 15:03:41,617 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(656)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-SegmentedRaftLogWorker: created new log segment /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-0df00ea4-adcf-4144-a5d3-225f93fb990b/scm1/ratis/558d0dda-6661-44d8-a6e0-17c8346ba9c9/current/log_inprogress_0
2023-03-23 15:03:42,577 [main] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$6(409)) - eda69b29-2396-4f62-87d0-f6656618b9eb: close
2023-03-23 15:03:42,577 [main] INFO  server.GrpcService (GrpcService.java:closeImpl(271)) - eda69b29-2396-4f62-87d0-f6656618b9eb: shutdown server GrpcServerProtocolService now
2023-03-23 15:03:42,577 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(458)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9: shutdown
2023-03-23 15:03:42,578 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-17C8346BA9C9,id=eda69b29-2396-4f62-87d0-f6656618b9eb
2023-03-23 15:03:42,578 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderState(93)) - eda69b29-2396-4f62-87d0-f6656618b9eb: shutdown eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderStateImpl
2023-03-23 15:03:42,578 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  impl.PendingRequests (PendingRequests.java:sendNotLeaderResponses(282)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-PendingRequests: sendNotLeaderResponses
2023-03-23 15:03:42,578 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(153)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-StateMachineUpdater: set stopIndex = 0
2023-03-23 15:03:42,578 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(287)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-StateMachineUpdater: Took a snapshot at index 0
2023-03-23 15:03:42,578 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(92)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-StateMachineUpdater: snapshotIndex: updateIncreasingly -1 -> 0
2023-03-23 15:03:42,579 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(466)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9: closes. applyIndex: 0
2023-03-23 15:03:42,579 [main] INFO  server.GrpcService (GrpcService.java:closeImpl(280)) - eda69b29-2396-4f62-87d0-f6656618b9eb: shutdown server GrpcServerProtocolService successfully
2023-03-23 15:03:42,579 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:run(347)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-SegmentedRaftLogWorker was interrupted, exiting. There are 0 tasks remaining in the queue.
2023-03-23 15:03:42,580 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:close(257)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-SegmentedRaftLogWorker close()
2023-03-23 15:03:42,581 [JvmPauseMonitor3] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(111)) - JvmPauseMonitor-eda69b29-2396-4f62-87d0-f6656618b9eb: Stopped
2023-03-23 15:03:42,581 [main] INFO  ha.SCMRatisServerImpl (SCMRatisServerImpl.java:start(179)) - starting ratis server 0.0.0.0:9894
2023-03-23 15:03:42,582 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(231)) - Lock on /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-0df00ea4-adcf-4144-a5d3-225f93fb990b/scm1/ratis/558d0dda-6661-44d8-a6e0-17c8346ba9c9/in_use.lock acquired by nodename 97173@fv-az459-573
2023-03-23 15:03:42,583 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:analyzeAndRecoverStorage(117)) - Read RaftStorageMetadata{term=1, votedFor=eda69b29-2396-4f62-87d0-f6656618b9eb} from /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-0df00ea4-adcf-4144-a5d3-225f93fb990b/scm1/ratis/558d0dda-6661-44d8-a6e0-17c8346ba9c9/current/raft-meta
2023-03-23 15:03:42,583 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(430)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9: set configuration 0: peers:[eda69b29-2396-4f62-87d0-f6656618b9eb|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-23 15:03:42,583 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-03-23 15:03:42,583 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1000000 (custom)
2023-03-23 15:03:42,583 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2023-03-23 15:03:42,584 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-03-23 15:03:42,584 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-03-23 15:03:42,584 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 4194304 (custom)
2023-03-23 15:03:42,584 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 2 (custom)
2023-03-23 15:03:42,584 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-03-23 15:03:42,584 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(189)) - new eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-0df00ea4-adcf-4144-a5d3-225f93fb990b/scm1/ratis/558d0dda-6661-44d8-a6e0-17c8346ba9c9
2023-03-23 15:03:42,584 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-03-23 15:03:42,584 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-03-23 15:03:42,584 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 4194304 (custom)
2023-03-23 15:03:42,584 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4194304 (custom)
2023-03-23 15:03:42,584 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-03-23 15:03:42,584 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-03-23 15:03:42,584 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-03-23 15:03:42,584 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-03-23 15:03:42,585 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-23 15:03:42,585 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2023-03-23 15:03:42,588 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-03-23 15:03:42,588 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-03-23 15:03:42,588 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-03-23 15:03:42,589 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(430)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9: set configuration 0: peers:[eda69b29-2396-4f62-87d0-f6656618b9eb|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-23 15:03:42,589 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  segmented.LogSegment (LogSegment.java:loadSegment(173)) - Successfully read 1 entries from segment file /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-0df00ea4-adcf-4144-a5d3-225f93fb990b/scm1/ratis/558d0dda-6661-44d8-a6e0-17c8346ba9c9/current/log_inprogress_0
2023-03-23 15:03:42,589 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(135)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> 0
2023-03-23 15:03:42,589 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(135)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-03-23 15:03:42,590 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(334)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9: start as a follower, conf=0: peers:[eda69b29-2396-4f62-87d0-f6656618b9eb|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-23 15:03:42,590 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(321)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9: changes role from      null to FOLLOWER at term 1 for startAsFollower
2023-03-23 15:03:42,590 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - eda69b29-2396-4f62-87d0-f6656618b9eb: start eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-FollowerState
2023-03-23 15:03:42,590 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-17C8346BA9C9,id=eda69b29-2396-4f62-87d0-f6656618b9eb
2023-03-23 15:03:42,590 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2023-03-23 15:03:42,590 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.threshold = 1000 (custom)
2023-03-23 15:03:42,590 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-03-23 15:03:42,590 [eda69b29-2396-4f62-87d0-f6656618b9eb-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-03-23 15:03:42,591 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.min = 5000ms (fallback to raft.server.rpc.timeout.min)
2023-03-23 15:03:42,592 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logFallback(53)) - raft.server.rpc.first-election.timeout.max = 5200ms (fallback to raft.server.rpc.timeout.max)
2023-03-23 15:03:42,592 [main] INFO  server.RaftServer (RaftServerProxy.java:startImpl(393)) - eda69b29-2396-4f62-87d0-f6656618b9eb: start RPC server
2023-03-23 15:03:42,593 [main] INFO  server.GrpcService (GrpcService.java:startImpl(262)) - eda69b29-2396-4f62-87d0-f6656618b9eb: GrpcService started, listening on 9894
2023-03-23 15:03:42,593 [main] INFO  ha.SCMHAManagerImpl (SCMHAManagerImpl.java:start(122)) -  scm role is FOLLOWER peers [eda69b29-2396-4f62-87d0-f6656618b9eb|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]
2023-03-23 15:03:42,594 [main] INFO  ha.InterSCMGrpcService (InterSCMGrpcProtocolService.java:start(94)) - Starting SCM Grpc Service at port 9895
2023-03-23 15:03:42,594 [JvmPauseMonitor4] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-eda69b29-2396-4f62-87d0-f6656618b9eb: Started
2023-03-23 15:03:47,749 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(143)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-FollowerState: change to CANDIDATE, lastRpcElapsedTime:5159172319ns, electionTimeout:5157ms
2023-03-23 15:03:47,749 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - eda69b29-2396-4f62-87d0-f6656618b9eb: shutdown eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-FollowerState
2023-03-23 15:03:47,749 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-FollowerState] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(321)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9: changes role from  FOLLOWER to CANDIDATE at term 1 for changeToCandidate
2023-03-23 15:03:47,750 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-FollowerState] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.pre-vote = true (default)
2023-03-23 15:03:47,750 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-FollowerState] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - eda69b29-2396-4f62-87d0-f6656618b9eb: start eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection4
2023-03-23 15:03:47,750 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection4] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(312)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection4 PRE_VOTE round 0: submit vote requests at term 1 for 0: peers:[eda69b29-2396-4f62-87d0-f6656618b9eb|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-23 15:03:47,750 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection4] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(314)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection4 PRE_VOTE round 0: result PASSED (term=1)
2023-03-23 15:03:47,752 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection4] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(312)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection4 ELECTION round 0: submit vote requests at term 2 for 0: peers:[eda69b29-2396-4f62-87d0-f6656618b9eb|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-23 15:03:47,752 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection4] INFO  impl.LeaderElection (LeaderElection.java:askForVotes(314)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection4 ELECTION round 0: result PASSED (term=2)
2023-03-23 15:03:47,752 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection4] INFO  impl.RoleInfo (RoleInfo.java:shutdownLeaderElection(130)) - eda69b29-2396-4f62-87d0-f6656618b9eb: shutdown eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection4
2023-03-23 15:03:47,752 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection4] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(321)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9: changes role from CANDIDATE to LEADER at term 2 for changeToLeader
2023-03-23 15:03:47,753 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection4] INFO  ha.SCMStateMachine (SCMStateMachine.java:notifyLeaderChanged(274)) - current SCM becomes leader of term 2.
2023-03-23 15:03:47,754 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection4] INFO  server.RaftServer$Division (ServerState.java:setLeader(313)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9: change Leader from null to eda69b29-2396-4f62-87d0-f6656618b9eb at term 2 for becomeLeader, leader elected after 11203ms
2023-03-23 15:03:47,754 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.staging.catchup.gap = 1000 (default)
2023-03-23 15:03:47,754 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-03-23 15:03:47,754 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.byte-limit = 64MB (=67108864) (default)
2023-03-23 15:03:47,754 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout = 10s (default)
2023-03-23 15:03:47,754 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.timeout.denomination = 1s (default)
2023-03-23 15:03:47,754 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.watch.element-limit = 65536 (default)
2023-03-23 15:03:47,754 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.element-limit = 4096 (default)
2023-03-23 15:03:47,754 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection4] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.write.follower.gap.ratio.max = -1.0 (default)
2023-03-23 15:03:47,754 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection4] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - eda69b29-2396-4f62-87d0-f6656618b9eb: start eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderStateImpl
2023-03-23 15:03:47,755 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection4] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:rollLogSegment(457)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-SegmentedRaftLogWorker: Rolling segment log-0_0 to index:0
2023-03-23 15:03:47,755 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderElection4] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(430)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9: set configuration 1: peers:[eda69b29-2396-4f62-87d0-f6656618b9eb|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-23 15:03:47,756 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(613)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-SegmentedRaftLogWorker: Rolled log segment from /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-0df00ea4-adcf-4144-a5d3-225f93fb990b/scm1/ratis/558d0dda-6661-44d8-a6e0-17c8346ba9c9/current/log_inprogress_0 to /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-0df00ea4-adcf-4144-a5d3-225f93fb990b/scm1/ratis/558d0dda-6661-44d8-a6e0-17c8346ba9c9/current/log_0-0
2023-03-23 15:03:47,764 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(656)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-SegmentedRaftLogWorker: created new log segment /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-0df00ea4-adcf-4144-a5d3-225f93fb990b/scm1/ratis/558d0dda-6661-44d8-a6e0-17c8346ba9c9/current/log_inprogress_1
2023-03-23 15:03:48,612 [main] INFO  ha.SCMRatisServerImpl (SCMRatisServerImpl.java:<init>(88)) - starting Raft server for scm:a938bc93-5c2d-4eb7-9208-74f089b38740
2023-03-23 15:03:48,614 [main] INFO  server.RaftServer (ConfUtils.java:logGet(46)) - raft.rpc.type = GRPC (default)
2023-03-23 15:03:48,614 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.host = null (fallback to raft.grpc.server.host)
2023-03-23 15:03:48,614 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.admin.port = 9898 (fallback to raft.grpc.server.port)
2023-03-23 15:03:48,614 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.host = null (fallback to raft.grpc.server.host)
2023-03-23 15:03:48,615 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logFallback(53)) - raft.grpc.client.port = 9898 (fallback to raft.grpc.server.port)
2023-03-23 15:03:48,615 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.host = null (default)
2023-03-23 15:03:48,615 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.port = 9898 (custom)
2023-03-23 15:03:48,615 [main] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.message.size.max = 32m (=33554432) (custom)
2023-03-23 15:03:48,615 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2023-03-23 15:03:48,615 [main] INFO  server.GrpcService (ConfUtils.java:logGet(46)) - raft.grpc.flow.control.window = 1MB (=1048576) (default)
2023-03-23 15:03:48,615 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 30000ms (custom)
2023-03-23 15:03:48,615 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-03-23 15:03:48,615 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.cached = true (default)
2023-03-23 15:03:48,616 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.async.request.thread.pool.size = 32 (default)
2023-03-23 15:03:48,617 [main] INFO  impl.DataStreamServerImpl (ConfUtils.java:logGet(46)) - raft.datastream.type = DISABLED (default)
2023-03-23 15:03:48,617 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.cached = true (default)
2023-03-23 15:03:48,617 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.proxy.size = 0 (default)
2023-03-23 15:03:48,617 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 120000ms (custom)
2023-03-23 15:03:48,617 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-23 15:03:48,617 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-0df00ea4-adcf-4144-a5d3-225f93fb990b/scm2/ratis] (custom)
2023-03-23 15:03:48,618 [main] INFO  server.RaftServer (RaftServerProxy.java:addNew(96)) - a938bc93-5c2d-4eb7-9208-74f089b38740: addNew group-17C8346BA9C9:[] returns group-17C8346BA9C9:java.util.concurrent.CompletableFuture@5abb7a8f[Not completed]
2023-03-23 15:03:48,618 [pool-13-thread-1] INFO  server.RaftServer$Division (RaftServerImpl.java:<init>(195)) - a938bc93-5c2d-4eb7-9208-74f089b38740: new RaftServerImpl for group-17C8346BA9C9:[] with SCMStateMachine:uninitialized
2023-03-23 15:03:48,618 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.min = 5000ms (custom)
2023-03-23 15:03:48,618 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.timeout.max = 5200ms (custom)
2023-03-23 15:03:48,618 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.sleep.time = 25ms (default)
2023-03-23 15:03:48,618 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.slowness.timeout = 120000ms (custom)
2023-03-23 15:03:48,618 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.leaderelection.leader.step-down.wait-time = 10s (default)
2023-03-23 15:03:48,619 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.sleep.deviation.threshold = 300ms (default)
2023-03-23 15:03:48,619 [pool-13-thread-1] INFO  server.RaftServer$Division (ServerState.java:<init>(118)) - a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9: ConfigurationManager, init=-1: peers:[]|listeners:[], old=null, confs=<EMPTY_MAP>
2023-03-23 15:03:48,619 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.dir = [/home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-0df00ea4-adcf-4144-a5d3-225f93fb990b/scm2/ratis] (custom)
2023-03-23 15:03:48,619 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.corruption.policy = EXCEPTION (default)
2023-03-23 15:03:48,619 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.storage.free-space.min = 0MB (=0) (default)
2023-03-23 15:03:48,619 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.notification.no-leader.timeout = 60s (default)
2023-03-23 15:03:48,619 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.expirytime = 60000ms (default)
2023-03-23 15:03:48,619 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.retrycache.statistics.expirytime = 100μs (default)
2023-03-23 15:03:48,620 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = false (custom)
2023-03-23 15:03:48,620 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.cached = true (default)
2023-03-23 15:03:48,620 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.server.size = 0 (default)
2023-03-23 15:03:48,620 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.cached = true (default)
2023-03-23 15:03:48,620 [pool-13-thread-1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.threadpool.client.size = 0 (default)
2023-03-23 15:03:48,620 [main] INFO  ha.SCMSnapshotProvider (SCMSnapshotProvider.java:<init>(66)) - Initializing SCM Snapshot Provider
2023-03-23 15:03:48,621 [main] WARN  ha.SCMHAUtils (SCMHAUtils.java:getSCMRatisSnapshotDirectory(153)) - SCM snapshot dir is not configured. Falling back to ozone.metadata.dirs config
2023-03-23 15:03:48,622 [main] INFO  ha.SCMRatisServerImpl (SCMRatisServerImpl.java:start(179)) - starting ratis server 0.0.0.0:9898
2023-03-23 15:03:48,622 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:analyzeStorage(137)) - The storage directory /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-0df00ea4-adcf-4144-a5d3-225f93fb990b/scm2/ratis/558d0dda-6661-44d8-a6e0-17c8346ba9c9 does not exist. Creating ...
2023-03-23 15:03:48,624 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  storage.RaftStorageDirectory (RaftStorageDirectoryImpl.java:tryLock(231)) - Lock on /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-0df00ea4-adcf-4144-a5d3-225f93fb990b/scm2/ratis/558d0dda-6661-44d8-a6e0-17c8346ba9c9/in_use.lock acquired by nodename 97173@fv-az459-573
2023-03-23 15:03:48,625 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  storage.RaftStorage (RaftStorageImpl.java:format(96)) - Storage directory /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-0df00ea4-adcf-4144-a5d3-225f93fb990b/scm2/ratis/558d0dda-6661-44d8-a6e0-17c8346ba9c9 has been successfully formatted.
2023-03-23 15:03:48,626 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.use.memory = false (default)
2023-03-23 15:03:48,626 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.gap = 1000000 (custom)
2023-03-23 15:03:48,626 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2023-03-23 15:03:48,626 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.read.timeout = 1000ms (default)
2023-03-23 15:03:48,626 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.preservation.log.num = 0 (default)
2023-03-23 15:03:48,626 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 4194304 (custom)
2023-03-23 15:03:48,626 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.num.max = 2 (custom)
2023-03-23 15:03:48,626 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.cache.size.max = 200MB (=209715200) (default)
2023-03-23 15:03:48,626 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:<init>(189)) - new a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9-SegmentedRaftLogWorker for RaftStorageImpl:Storage Directory /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-0df00ea4-adcf-4144-a5d3-225f93fb990b/scm2/ratis/558d0dda-6661-44d8-a6e0-17c8346ba9c9
2023-03-23 15:03:48,627 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.byte-limit = 64MB (=67108864) (default)
2023-03-23 15:03:48,627 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.queue.element-limit = 4096 (default)
2023-03-23 15:03:48,627 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.segment.size.max = 4194304 (custom)
2023-03-23 15:03:48,627 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.preallocated.size = 4194304 (custom)
2023-03-23 15:03:48,627 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.force.sync.num = 128 (default)
2023-03-23 15:03:48,627 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync = true (default)
2023-03-23 15:03:48,627 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout = 10s (default)
2023-03-23 15:03:48,627 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.sync.timeout.retry = -1 (default)
2023-03-23 15:03:48,627 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.write.buffer.size = 64KB (=65536) (default)
2023-03-23 15:03:48,627 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2023-03-23 15:03:48,631 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.unsafe-flush.enabled = false (default)
2023-03-23 15:03:48,631 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.async-flush.enabled = false (default)
2023-03-23 15:03:48,631 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.statemachine.data.caching.enabled = false (default)
2023-03-23 15:03:48,632 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(135)) - a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9-SegmentedRaftLogWorker: flushIndex: setUnconditionally 0 -> -1
2023-03-23 15:03:48,632 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:lambda$new$0(135)) - a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9-SegmentedRaftLogWorker: safeCacheEvictIndex: setUnconditionally 0 -> -1
2023-03-23 15:03:48,632 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:start(340)) - a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9: start with initializing state, conf=-1: peers:[]|listeners:[], old=null
2023-03-23 15:03:48,632 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:setRole(321)) - a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9: changes role from      null to FOLLOWER at term 0 for startInitializing
2023-03-23 15:03:48,633 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:tryRegister(44)) - Successfully registered JMX Bean with object name Ratis:service=RaftServer,group=group-17C8346BA9C9,id=a938bc93-5c2d-4eb7-9208-74f089b38740
2023-03-23 15:03:48,633 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.enabled = true (custom)
2023-03-23 15:03:48,633 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.auto.trigger.threshold = 1000 (custom)
2023-03-23 15:03:48,633 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.snapshot.retention.file.num = -1 (default)
2023-03-23 15:03:48,633 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.purge.upto.snapshot.index = false (default)
2023-03-23 15:03:48,633 [main] INFO  server.RaftServer (RaftServerProxy.java:startImpl(393)) - a938bc93-5c2d-4eb7-9208-74f089b38740: start RPC server
2023-03-23 15:03:48,634 [main] INFO  server.GrpcService (GrpcService.java:startImpl(262)) - a938bc93-5c2d-4eb7-9208-74f089b38740: GrpcService started, listening on 9898
2023-03-23 15:03:48,635 [main] INFO  ha.SCMRatisServerImpl (SCMRatisServerImpl.java:addSCM(299)) - eda69b29-2396-4f62-87d0-f6656618b9eb: Submitting SetConfiguration request to Ratis server with new SCM peers list: [eda69b29-2396-4f62-87d0-f6656618b9eb|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER, a938bc93-5c2d-4eb7-9208-74f089b38740|rpc:localhost:9898|priority:0|startupRole:FOLLOWER]
2023-03-23 15:03:48,636 [main] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1112)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9: receive setConfiguration SetConfigurationRequest:client-1BCEA42C888D->eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9, cid=0, seq=0, RW, null, SET_UNCONDITIONALLY, servers:[eda69b29-2396-4f62-87d0-f6656618b9eb|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER, a938bc93-5c2d-4eb7-9208-74f089b38740|rpc:localhost:9898|priority:0|startupRole:FOLLOWER], listeners:[]
2023-03-23 15:03:48,636 [main] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(368)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-1BCEA42C888D->eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9, cid=0, seq=0, RW, null, SET_UNCONDITIONALLY, servers:[eda69b29-2396-4f62-87d0-f6656618b9eb|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER, a938bc93-5c2d-4eb7-9208-74f089b38740|rpc:localhost:9898|priority:0|startupRole:FOLLOWER], listeners:[]
2023-03-23 15:03:48,637 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.snapshot.chunk.size.max = 16MB (=16777216) (default)
2023-03-23 15:03:48,637 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.byte-limit = 33554432 (custom)
2023-03-23 15:03:48,637 [JvmPauseMonitor5] INFO  util.JvmPauseMonitor (JvmPauseMonitor.java:run(105)) - JvmPauseMonitor-a938bc93-5c2d-4eb7-9208-74f089b38740: Started
2023-03-23 15:03:48,637 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.buffer.element-limit = 1024 (custom)
2023-03-23 15:03:48,638 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.leader.outstanding.appends.max = 128 (default)
2023-03-23 15:03:48,638 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.rpc.request.timeout = 30000ms (custom)
2023-03-23 15:03:48,638 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.install.snapshot.enabled = false (custom)
2023-03-23 15:03:48,638 [main] INFO  grpc.GrpcConfigKeys (ConfUtils.java:logGet(46)) - raft.grpc.server.heartbeat.channel = true (default)
2023-03-23 15:03:48,639 [main] INFO  server.RaftServerConfigKeys (ConfUtils.java:logGet(46)) - raft.server.log.appender.wait-time.min = 10ms (default)
2023-03-23 15:03:48,639 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9->a938bc93-5c2d-4eb7-9208-74f089b38740-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(635)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9->a938bc93-5c2d-4eb7-9208-74f089b38740-GrpcLogAppender: followerNextIndex = 0 but logStartIndex = 0, notify follower to install snapshot-(t:1, i:0)
2023-03-23 15:03:48,639 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9->a938bc93-5c2d-4eb7-9208-74f089b38740-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcLogAppender (GrpcLogAppender.java:installSnapshot(643)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9->a938bc93-5c2d-4eb7-9208-74f089b38740-GrpcLogAppender: send eda69b29-2396-4f62-87d0-f6656618b9eb->a938bc93-5c2d-4eb7-9208-74f089b38740#0-t2,notify:(t:1, i:0)
2023-03-23 15:03:48,640 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9->a938bc93-5c2d-4eb7-9208-74f089b38740-GrpcLogAppender-LogAppenderDaemon] INFO  server.GrpcServerProtocolClient (GrpcServerProtocolClient.java:<init>(63)) - Build channel for a938bc93-5c2d-4eb7-9208-74f089b38740
2023-03-23 15:03:48,653 [grpc-default-executor-4] INFO  impl.SnapshotInstallationHandler (SnapshotInstallationHandler.java:installSnapshot(89)) - a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9: receive installSnapshot: eda69b29-2396-4f62-87d0-f6656618b9eb->a938bc93-5c2d-4eb7-9208-74f089b38740#0-t2,notify:(t:1, i:0)
2023-03-23 15:03:48,655 [grpc-default-executor-4] INFO  ha.SCMStateMachine (SCMStateMachine.java:notifyLeaderChanged(270)) - leader changed, yet current SCM is still follower.
2023-03-23 15:03:48,656 [grpc-default-executor-4] INFO  server.RaftServer$Division (ServerState.java:setLeader(313)) - a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9: change Leader from null to eda69b29-2396-4f62-87d0-f6656618b9eb at term 2 for installSnapshot, leader elected after 35ms
2023-03-23 15:03:48,656 [grpc-default-executor-4] INFO  impl.SnapshotInstallationHandler (SnapshotInstallationHandler.java:notifyStateMachineToInstallSnapshot(220)) - a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9: Received notification to install snapshot at index 0
2023-03-23 15:03:48,656 [grpc-default-executor-4] INFO  impl.SnapshotInstallationHandler (SnapshotInstallationHandler.java:notifyStateMachineToInstallSnapshot(229)) - a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9: InstallSnapshot notification result: ALREADY_INSTALLED, current snapshot index: -1
2023-03-23 15:03:48,656 [grpc-default-executor-4] INFO  impl.SnapshotInstallationHandler (SnapshotInstallationHandler.java:installSnapshotImpl(134)) - a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9: set new configuration index: 1
configurationEntry {
  peers {
    id: "eda69b29-2396-4f62-87d0-f6656618b9eb"
    address: "localhost:9894"
    startupRole: FOLLOWER
  }
}
 from snapshot
2023-03-23 15:03:48,656 [grpc-default-executor-4] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(430)) - a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9: set configuration 1: peers:[eda69b29-2396-4f62-87d0-f6656618b9eb|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-23 15:03:48,657 [grpc-default-executor-4] INFO  impl.SnapshotInstallationHandler (SnapshotInstallationHandler.java:installSnapshot(100)) - a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9: reply installSnapshot: eda69b29-2396-4f62-87d0-f6656618b9eb<-a938bc93-5c2d-4eb7-9208-74f089b38740#0:OK-t0,ALREADY_INSTALLED
2023-03-23 15:03:48,657 [grpc-default-executor-4] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - a938bc93-5c2d-4eb7-9208-74f089b38740: Completed INSTALL_SNAPSHOT, lastRequest: eda69b29-2396-4f62-87d0-f6656618b9eb->a938bc93-5c2d-4eb7-9208-74f089b38740#0-t2,notify:(t:1, i:0)
2023-03-23 15:03:48,659 [grpc-default-executor-4] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onNext(494)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9->a938bc93-5c2d-4eb7-9208-74f089b38740-InstallSnapshotResponseHandler: received the first reply eda69b29-2396-4f62-87d0-f6656618b9eb<-a938bc93-5c2d-4eb7-9208-74f089b38740#0:OK-t0,ALREADY_INSTALLED
2023-03-23 15:03:48,659 [grpc-default-executor-4] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onNext(517)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9->a938bc93-5c2d-4eb7-9208-74f089b38740-InstallSnapshotResponseHandler: Follower snapshot is already at index 0.
2023-03-23 15:03:48,660 [grpc-default-executor-4] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9->a938bc93-5c2d-4eb7-9208-74f089b38740: snapshotIndex: setUnconditionally 0 -> 0
2023-03-23 15:03:48,660 [grpc-default-executor-4] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9->a938bc93-5c2d-4eb7-9208-74f089b38740: matchIndex: setUnconditionally 0 -> 0
2023-03-23 15:03:48,660 [grpc-default-executor-4] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9->a938bc93-5c2d-4eb7-9208-74f089b38740: nextIndex: setUnconditionally 0 -> 1
2023-03-23 15:03:48,660 [grpc-default-executor-4] INFO  leader.FollowerInfo (FollowerInfoImpl.java:setAttemptedToInstallSnapshot(118)) - Follower eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9->a938bc93-5c2d-4eb7-9208-74f089b38740 acknowledged installing snapshot
2023-03-23 15:03:48,660 [grpc-default-executor-4] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9->a938bc93-5c2d-4eb7-9208-74f089b38740: nextIndex: updateToMax old=1, new=1, updated? false
2023-03-23 15:03:48,675 [a938bc93-5c2d-4eb7-9208-74f089b38740-server-thread1] INFO  impl.RoleInfo (RoleInfo.java:updateAndGet(139)) - a938bc93-5c2d-4eb7-9208-74f089b38740: start a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9-FollowerState
2023-03-23 15:03:48,677 [a938bc93-5c2d-4eb7-9208-74f089b38740-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:checkInconsistentAppendEntries(1508)) - a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9: Failed appendEntries as previous log entry ((t:1, i:0)) is not found
2023-03-23 15:03:48,677 [a938bc93-5c2d-4eb7-9208-74f089b38740-server-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:checkInconsistentAppendEntries(1478)) - a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9: inconsistency entries. Reply:eda69b29-2396-4f62-87d0-f6656618b9eb<-a938bc93-5c2d-4eb7-9208-74f089b38740#0:FAIL-t2,INCONSISTENCY,nextIndex=0,followerCommit=-1,matchIndex=-1
2023-03-23 15:03:48,677 [a938bc93-5c2d-4eb7-9208-74f089b38740-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:checkInconsistentAppendEntries(1508)) - a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9: Failed appendEntries as previous log entry ((t:1, i:0)) is not found
2023-03-23 15:03:48,677 [a938bc93-5c2d-4eb7-9208-74f089b38740-server-thread2] INFO  server.RaftServer$Division (RaftServerImpl.java:checkInconsistentAppendEntries(1478)) - a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9: inconsistency entries. Reply:eda69b29-2396-4f62-87d0-f6656618b9eb<-a938bc93-5c2d-4eb7-9208-74f089b38740#1:FAIL-t2,INCONSISTENCY,nextIndex=0,followerCommit=-1,matchIndex=-1
2023-03-23 15:03:48,680 [grpc-default-executor-3] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9->a938bc93-5c2d-4eb7-9208-74f089b38740: nextIndex: updateUnconditionally 3 -> 0
2023-03-23 15:03:48,681 [grpc-default-executor-3] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9->a938bc93-5c2d-4eb7-9208-74f089b38740: nextIndex: updateUnconditionally 3 -> 0
2023-03-23 15:03:48,684 [a938bc93-5c2d-4eb7-9208-74f089b38740-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(430)) - a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9: set configuration 0: peers:[eda69b29-2396-4f62-87d0-f6656618b9eb|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-23 15:03:48,684 [a938bc93-5c2d-4eb7-9208-74f089b38740-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(430)) - a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9: set configuration 1: peers:[eda69b29-2396-4f62-87d0-f6656618b9eb|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-23 15:03:48,685 [a938bc93-5c2d-4eb7-9208-74f089b38740-server-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:startLogSegment(452)) - a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9-SegmentedRaftLogWorker: Starting segment from index:0
2023-03-23 15:03:48,685 [a938bc93-5c2d-4eb7-9208-74f089b38740-server-thread2] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:rollLogSegment(457)) - a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9-SegmentedRaftLogWorker: Rolling segment log-0_0 to index:0
2023-03-23 15:03:48,690 [a938bc93-5c2d-4eb7-9208-74f089b38740-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(430)) - a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9: set configuration 0: peers:[eda69b29-2396-4f62-87d0-f6656618b9eb|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-23 15:03:48,690 [a938bc93-5c2d-4eb7-9208-74f089b38740-server-thread2] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(430)) - a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9: set configuration 1: peers:[eda69b29-2396-4f62-87d0-f6656618b9eb|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-23 15:03:48,694 [a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(656)) - a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9-SegmentedRaftLogWorker: created new log segment /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-0df00ea4-adcf-4144-a5d3-225f93fb990b/scm2/ratis/558d0dda-6661-44d8-a6e0-17c8346ba9c9/current/log_inprogress_0
2023-03-23 15:03:48,695 [a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(613)) - a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9-SegmentedRaftLogWorker: Rolled log segment from /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-0df00ea4-adcf-4144-a5d3-225f93fb990b/scm2/ratis/558d0dda-6661-44d8-a6e0-17c8346ba9c9/current/log_inprogress_0 to /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-0df00ea4-adcf-4144-a5d3-225f93fb990b/scm2/ratis/558d0dda-6661-44d8-a6e0-17c8346ba9c9/current/log_0-0
2023-03-23 15:03:48,704 [a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9-SegmentedRaftLogWorker] INFO  segmented.SegmentedRaftLogWorker (SegmentedRaftLogWorker.java:execute(656)) - a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9-SegmentedRaftLogWorker: created new log segment /home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-0df00ea4-adcf-4144-a5d3-225f93fb990b/scm2/ratis/558d0dda-6661-44d8-a6e0-17c8346ba9c9/current/log_inprogress_1
2023-03-23 15:03:48,710 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderStateImpl] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(430)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9: set configuration 3: peers:[a938bc93-5c2d-4eb7-9208-74f089b38740|rpc:localhost:9898|priority:0|startupRole:FOLLOWER, eda69b29-2396-4f62-87d0-f6656618b9eb|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[], old=peers:[eda69b29-2396-4f62-87d0-f6656618b9eb|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[]
2023-03-23 15:03:48,714 [a938bc93-5c2d-4eb7-9208-74f089b38740-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(430)) - a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9: set configuration 3: peers:[a938bc93-5c2d-4eb7-9208-74f089b38740|rpc:localhost:9898|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER, eda69b29-2396-4f62-87d0-f6656618b9eb|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[], old=peers:[eda69b29-2396-4f62-87d0-f6656618b9eb|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[]
2023-03-23 15:03:48,717 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderStateImpl] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(430)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9: set configuration 5: peers:[a938bc93-5c2d-4eb7-9208-74f089b38740|rpc:localhost:9898|priority:0|startupRole:FOLLOWER, eda69b29-2396-4f62-87d0-f6656618b9eb|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-23 15:03:48,720 [a938bc93-5c2d-4eb7-9208-74f089b38740-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(430)) - a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9: set configuration 5: peers:[a938bc93-5c2d-4eb7-9208-74f089b38740|rpc:localhost:9898|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER, eda69b29-2396-4f62-87d0-f6656618b9eb|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-23 15:03:48,723 [main] INFO  ha.SCMRatisServerImpl (SCMRatisServerImpl.java:addSCM(310)) - Successfully added new SCM: a938bc93-5c2d-4eb7-9208-74f089b38740.
2023-03-23 15:03:48,724 [main] INFO  ha.SCMRatisServerImpl (SCMRatisServerImpl.java:removeSCM(335)) - a938bc93-5c2d-4eb7-9208-74f089b38740: Submitting SetConfiguration request to Ratis server with updated SCM peers list: [eda69b29-2396-4f62-87d0-f6656618b9eb|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]
2023-03-23 15:03:48,724 [main] INFO  server.RaftServer$Division (RaftServerImpl.java:setConfigurationAsync(1112)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9: receive setConfiguration SetConfigurationRequest:client-1BCEA42C888D->eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9, cid=1, seq=0, RW, null, SET_UNCONDITIONALLY, servers:[eda69b29-2396-4f62-87d0-f6656618b9eb|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER], listeners:[]
2023-03-23 15:03:48,724 [main] INFO  server.RaftServer$Division (LeaderStateImpl.java:startSetConfiguration(368)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderStateImpl: startSetConfiguration SetConfigurationRequest:client-1BCEA42C888D->eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9, cid=1, seq=0, RW, null, SET_UNCONDITIONALLY, servers:[eda69b29-2396-4f62-87d0-f6656618b9eb|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER], listeners:[]
2023-03-23 15:03:48,724 [main] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(430)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9: set configuration 7: peers:[eda69b29-2396-4f62-87d0-f6656618b9eb|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[], old=peers:[a938bc93-5c2d-4eb7-9208-74f089b38740|rpc:localhost:9898|priority:0|startupRole:FOLLOWER, eda69b29-2396-4f62-87d0-f6656618b9eb|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[]
2023-03-23 15:03:48,729 [a938bc93-5c2d-4eb7-9208-74f089b38740-server-thread1] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(430)) - a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9: set configuration 7: peers:[eda69b29-2396-4f62-87d0-f6656618b9eb|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[], old=peers:[a938bc93-5c2d-4eb7-9208-74f089b38740|rpc:localhost:9898|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER, eda69b29-2396-4f62-87d0-f6656618b9eb|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[]
2023-03-23 15:03:48,735 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9-LeaderStateImpl] INFO  server.RaftServer$Division (ServerState.java:setRaftConf(430)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9: set configuration 9: peers:[eda69b29-2396-4f62-87d0-f6656618b9eb|rpc:localhost:9894|admin:|client:|dataStream:|priority:0|startupRole:FOLLOWER]|listeners:[], old=null
2023-03-23 15:03:48,735 [eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9->a938bc93-5c2d-4eb7-9208-74f089b38740-GrpcLogAppender-LogAppenderDaemon] WARN  server.GrpcLogAppender (GrpcLogAppender.java:mayWait(200)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9->a938bc93-5c2d-4eb7-9208-74f089b38740-GrpcLogAppender: Wait interrupted by java.lang.InterruptedException
2023-03-23 15:03:48,737 [main] INFO  ha.SCMRatisServerImpl (SCMRatisServerImpl.java:removeSCM(345)) - Successfully removed SCM: a938bc93-5c2d-4eb7-9208-74f089b38740.
2023-03-23 15:03:48,737 [grpc-default-executor-4] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - a938bc93-5c2d-4eb7-9208-74f089b38740: Completed APPEND_ENTRIES, lastRequest: null
2023-03-23 15:03:48,737 [main] INFO  ha.SCMRatisServerImpl (SCMRatisServerImpl.java:stop(238)) - stopping ratis server 0.0.0.0:9898
2023-03-23 15:03:48,738 [main] INFO  server.RaftServer (RaftServerProxy.java:lambda$close$6(409)) - a938bc93-5c2d-4eb7-9208-74f089b38740: close
2023-03-23 15:03:48,738 [main] INFO  server.GrpcService (GrpcService.java:closeImpl(271)) - a938bc93-5c2d-4eb7-9208-74f089b38740: shutdown server GrpcServerProtocolService now
2023-03-23 15:03:48,738 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  server.RaftServer$Division (RaftServerImpl.java:lambda$close$4(458)) - a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9: shutdown
2023-03-23 15:03:48,738 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  util.JmxRegister (JmxRegister.java:unregister(73)) - Successfully un-registered JMX Bean with object name Ratis:service=RaftServer,group=group-17C8346BA9C9,id=a938bc93-5c2d-4eb7-9208-74f089b38740
2023-03-23 15:03:48,738 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  impl.RoleInfo (RoleInfo.java:shutdownFollowerState(110)) - a938bc93-5c2d-4eb7-9208-74f089b38740: shutdown a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9-FollowerState
2023-03-23 15:03:48,738 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:stopAndJoin(153)) - a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9-StateMachineUpdater: set stopIndex = 5
2023-03-23 15:03:48,739 [a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9-FollowerState] INFO  impl.FollowerState (FollowerState.java:run(152)) - a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9-FollowerState was interrupted
2023-03-23 15:03:48,739 [grpc-default-executor-3] INFO  server.GrpcServerProtocolService (GrpcServerProtocolService.java:onCompleted(143)) - a938bc93-5c2d-4eb7-9208-74f089b38740: Completed APPEND_ENTRIES, lastRequest: eda69b29-2396-4f62-87d0-f6656618b9eb->a938bc93-5c2d-4eb7-9208-74f089b38740#10-t2,previous=(t:2, i:7),leaderCommit=7,initializing? true,entries: size=1, first=(t:2, i:8), METADATAENTRY(c:7)
2023-03-23 15:03:48,741 [grpc-default-executor-1] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onError(404)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9->a938bc93-5c2d-4eb7-9208-74f089b38740-GrpcLogAppender is already stopped
2023-03-23 15:03:48,741 [grpc-default-executor-4] INFO  server.GrpcLogAppender (GrpcLogAppender.java:onCompleted(415)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9->a938bc93-5c2d-4eb7-9208-74f089b38740-AppendLogResponseHandler: follower responses appendEntries COMPLETED
2023-03-23 15:03:48,742 [main] INFO  server.GrpcService (GrpcService.java:closeImpl(280)) - a938bc93-5c2d-4eb7-9208-74f089b38740: shutdown server GrpcServerProtocolService successfully
2023-03-23 15:03:48,742 [grpc-default-executor-4] INFO  leader.FollowerInfo (FollowerInfoImpl.java:lambda$new$0(48)) - eda69b29-2396-4f62-87d0-f6656618b9eb@group-17C8346BA9C9->a938bc93-5c2d-4eb7-9208-74f089b38740: nextIndex: updateUnconditionally 9 -> 8
2023-03-23 15:03:48,743 [a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9-StateMachineUpdater] INFO  ha.SCMStateMachine (SCMStateMachine.java:takeSnapshot(312)) - Current Snapshot Index 5, takeSnapshot took 1 ms
2023-03-23 15:03:48,743 [a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:takeSnapshot(287)) - a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9-StateMachineUpdater: Took a snapshot at index 5
2023-03-23 15:03:48,743 [a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9-StateMachineUpdater] INFO  impl.StateMachineUpdater (StateMachineUpdater.java:lambda$new$0(92)) - a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9-StateMachineUpdater: snapshotIndex: updateIncreasingly -1 -> 5
2023-03-23 15:03:48,743 [a938bc93-5c2d-4eb7-9208-74f089b38740-impl-thread1] INFO  server.RaftServer$Division (ServerState.java:close(466)) - a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9: closes. applyIndex: 5
2023-03-23 15:03:48,744 [a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9-SegmentedRaftLogWorker] ERROR segmented.SegmentedRaftLogOutputStream (SegmentedRaftLogOutputStream.java:flush(134)) - Failed to flush SegmentedRaftLogOutputStream(/home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-0df00ea4-adcf-4144-a5d3-225f93fb990b/scm2/ratis/558d0dda-6661-44d8-a6e0-17c8346ba9c9/current/log_inprogress_1)
java.nio.channels.ClosedByInterruptException
	at java.nio.channels.spi.AbstractInterruptibleChannel.end(AbstractInterruptibleChannel.java:202)
	at sun.nio.ch.FileChannelImpl.force(FileChannelImpl.java:392)
	at org.apache.ratis.server.raftlog.segmented.BufferedWriteChannel.flush(BufferedWriteChannel.java:97)
	at org.apache.ratis.server.raftlog.segmented.SegmentedRaftLogOutputStream.flush(SegmentedRaftLogOutputStream.java:131)
	at org.apache.ratis.server.raftlog.segmented.SegmentedRaftLogWorker.flushOutStream(SegmentedRaftLogWorker.java:422)
	at org.apache.ratis.server.raftlog.segmented.SegmentedRaftLogWorker.flushIfNecessary(SegmentedRaftLogWorker.java:392)
	at org.apache.ratis.server.raftlog.segmented.SegmentedRaftLogWorker.access$1200(SegmentedRaftLogWorker.java:61)
	at org.apache.ratis.server.raftlog.segmented.SegmentedRaftLogWorker$WriteLog.execute(SegmentedRaftLogWorker.java:571)
	at org.apache.ratis.server.raftlog.segmented.SegmentedRaftLogWorker.run(SegmentedRaftLogWorker.java:321)
	at java.lang.Thread.run(Thread.java:750)
2023-03-23 15:03:48,746 [a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9-SegmentedRaftLogWorker] ERROR ha.SCMStateMachine (SCMStateMachine.java:notifyLogFailed(196)) - SCM statemachine appendLog failed, entry: term: 2
index: 8
metadataEntry {
  commitIndex: 7
}

2023-03-23 15:03:48,747 [a938bc93-5c2d-4eb7-9208-74f089b38740@group-17C8346BA9C9-SegmentedRaftLogWorker] ERROR statemachine.StateMachine (ExitUtils.java:terminate(133)) - Terminating with exit status 1: Failed to flush SegmentedRaftLogOutputStream(/home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-0df00ea4-adcf-4144-a5d3-225f93fb990b/scm2/ratis/558d0dda-6661-44d8-a6e0-17c8346ba9c9/current/log_inprogress_1)
java.io.IOException: Failed to flush SegmentedRaftLogOutputStream(/home/runner/work/ozone/ozone/hadoop-hdds/server-scm/target/test-dir/TestSCMHAManagerImpl-0df00ea4-adcf-4144-a5d3-225f93fb990b/scm2/ratis/558d0dda-6661-44d8-a6e0-17c8346ba9c9/current/log_inprogress_1)
	at org.apache.ratis.server.raftlog.segmented.SegmentedRaftLogOutputStream.flush(SegmentedRaftLogOutputStream.java:135)
	at org.apache.ratis.server.raftlog.segmented.SegmentedRaftLogWorker.flushOutStream(SegmentedRaftLogWorker.java:422)
	at org.apache.ratis.server.raftlog.segmented.SegmentedRaftLogWorker.flushIfNecessary(SegmentedRaftLogWorker.java:392)
	at org.apache.ratis.server.raftlog.segmented.SegmentedRaftLogWorker.access$1200(SegmentedRaftLogWorker.java:61)
	at org.apache.ratis.server.raftlog.segmented.SegmentedRaftLogWorker$WriteLog.execute(SegmentedRaftLogWorker.java:571)
	at org.apache.ratis.server.raftlog.segmented.SegmentedRaftLogWorker.run(SegmentedRaftLogWorker.java:321)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.nio.channels.ClosedByInterruptException
	at java.nio.channels.spi.AbstractInterruptibleChannel.end(AbstractInterruptibleChannel.java:202)
	at sun.nio.ch.FileChannelImpl.force(FileChannelImpl.java:392)
	at org.apache.ratis.server.raftlog.segmented.BufferedWriteChannel.flush(BufferedWriteChannel.java:97)
	at org.apache.ratis.server.raftlog.segmented.SegmentedRaftLogOutputStream.flush(SegmentedRaftLogOutputStream.java:131)
	... 6 more
