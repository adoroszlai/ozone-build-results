rm: cannot remove '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/*': No such file or directory
Executing test in ozone-csi
Removing network ozone-csi_default
Network ozone-csi_default not found.
Creating network "ozone-csi_default" with the default driver
Pulling datanode (apache/ozone-runner:20230104-1)...
20230104-1: Pulling from apache/ozone-runner
Digest: sha256:bc4c3ecdf9e653e2287e8b99449222807ee6011b520beae9a8874d9b8fc037f3
Status: Downloaded newer image for apache/ozone-runner:20230104-1
Creating ozone-csi_scm_1 ... 
Creating ozone-csi_om_1  ... 
Creating ozone-csi_datanode_1 ... 
Creating ozone-csi_datanode_2 ... 
Creating ozone-csi_datanode_3 ... 
Creating ozone-csi_csi_1      ... 
Creating ozone-csi_csi_1      ... done
Creating ozone-csi_datanode_3 ... done
Creating ozone-csi_scm_1      ... done
Creating ozone-csi_datanode_1 ... done
Creating ozone-csi_datanode_2 ... done
Creating ozone-csi_om_1       ... done
SECONDS: 54
com.google.protobuf.ServiceException: java.net.ConnectException: Call From c899b3616da9/172.18.0.3 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy21.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.18.0.3:9860 after 1 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From c899b3616da9/172.18.0.3 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy21.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.18.0.3:9860 after 2 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From c899b3616da9/172.18.0.3 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy21.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.18.0.3:9860 after 3 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From c899b3616da9/172.18.0.3 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy21.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.18.0.3:9860 after 4 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.ratis.ServerNotLeaderException): Server:e6774720-89cb-47a4-b15f-ca058c4c39ae is not the leader. Could not determine the leader node. at org.apache.hadoop.hdds.ratis.ServerNotLeaderException.convertToNotLeaderException(ServerNotLeaderException.java:109) at org.apache.hadoop.hdds.scm.ha.RatisUtil.checkRatisException(RatisUtil.java:246) at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:197) at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:64993) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:465) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:578) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:556) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1043) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:971) at java.base/java.security.AccessController.doPrivileged(Native Method) at java.base/javax.security.auth.Subject.doAs(Subject.java:423) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2976) , while invoking $Proxy21.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.18.0.3:9860 after 5 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.ratis.ServerNotLeaderException): Server:e6774720-89cb-47a4-b15f-ca058c4c39ae is not the leader. Could not determine the leader node. at org.apache.hadoop.hdds.ratis.ServerNotLeaderException.convertToNotLeaderException(ServerNotLeaderException.java:109) at org.apache.hadoop.hdds.scm.ha.RatisUtil.checkRatisException(RatisUtil.java:246) at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:197) at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:64993) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:465) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:578) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:556) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1043) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:971) at java.base/java.security.AccessController.doPrivileged(Native Method) at java.base/javax.security.auth.Subject.doAs(Subject.java:423) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2976) , while invoking $Proxy21.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.18.0.3:9860 after 6 failover attempts. Trying to failover after sleeping for 2000ms. SCM is in safe mode. validated:false, DataNodeSafeModeRule, registered datanodes (=0) >= required datanodes (=1) validated:true, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=0) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:true, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=0)
SECONDS: 78
SCM is out of safe mode.
Safe mode is off
No OM HA service, no need to wait
==============================================================================
Csi :: Smoketest Ozone CSI service                                            
==============================================================================
Check if CSI server is started                                        | PASS |
------------------------------------------------------------------------------
Test CSI identity service                                             | PASS |
------------------------------------------------------------------------------
Csi :: Smoketest Ozone CSI service                                    | PASS |
2 tests, 2 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozone-csi/result/robot-ozone-csi-ozone-csi-csi-csi.xml
Stopping ozone-csi_datanode_2 ... 
Stopping ozone-csi_csi_1      ... 
Stopping ozone-csi_datanode_1 ... 
Stopping ozone-csi_datanode_3 ... 
Stopping ozone-csi_scm_1      ... 
Stopping ozone-csi_om_1       ... 
Stopping ozone-csi_csi_1      ... done
Stopping ozone-csi_om_1       ... done
Stopping ozone-csi_datanode_3 ... done
Stopping ozone-csi_datanode_2 ... done
Stopping ozone-csi_datanode_1 ... done
Stopping ozone-csi_scm_1      ... done
Removing ozone-csi_datanode_2 ... 
Removing ozone-csi_csi_1      ... 
Removing ozone-csi_datanode_1 ... 
Removing ozone-csi_datanode_3 ... 
Removing ozone-csi_scm_1      ... 
Removing ozone-csi_om_1       ... 
Removing ozone-csi_datanode_3 ... done
Removing ozone-csi_datanode_2 ... done
Removing ozone-csi_csi_1      ... done
Removing ozone-csi_scm_1      ... done
Removing ozone-csi_datanode_1 ... done
Removing ozone-csi_om_1       ... done
Removing network ozone-csi_default
Log:     /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/ozone-csi/result/log.html
Report:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/ozone-csi/result/report.html
Output:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-csi.xml
removed 'ozone-csi/result/robot-ozone-csi-ozone-csi-csi-csi.xml'
removed 'ozone-csi/result/log.html'
removed 'ozone-csi/result/report.html'
renamed 'ozone-csi/result/dn-audit-057dfaf7686a.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-csi/dn-audit-057dfaf7686a.log'
renamed 'ozone-csi/result/dn-audit-bb9672d1c9db.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-csi/dn-audit-bb9672d1c9db.log'
renamed 'ozone-csi/result/dn-audit-c6cf61823833.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-csi/dn-audit-c6cf61823833.log'
renamed 'ozone-csi/result/docker-ozone-csi-ozone-csi-csi-csi.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-csi/docker-ozone-csi-ozone-csi-csi-csi.log'
renamed 'ozone-csi/result/om-audit-3b12adafd8e3.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-csi/om-audit-3b12adafd8e3.log'
renamed 'ozone-csi/result/scm-audit-c899b3616da9.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-csi/scm-audit-c899b3616da9.log'
Executing test in ozone-om-prepare
chown: changing ownership of '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/ozone-om-prepare/data/dn2': Operation not permitted
chown: changing ownership of '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/ozone-om-prepare/data/scm': Operation not permitted
chown: changing ownership of '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/ozone-om-prepare/data/om2': Operation not permitted
chown: changing ownership of '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/ozone-om-prepare/data/dn3': Operation not permitted
chown: changing ownership of '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/ozone-om-prepare/data/om3': Operation not permitted
chown: changing ownership of '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/ozone-om-prepare/data/dn1': Operation not permitted
chown: changing ownership of '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/ozone-om-prepare/data/om1': Operation not permitted
chown: changing ownership of '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/ozone-om-prepare/data': Operation not permitted
Removing network ozone-om-prepare_net
Network ozone-om-prepare_net not found.
Creating network "ozone-om-prepare_net" with driver "bridge"
Creating ozone-om-prepare_dn3_1 ... 
Creating ozone-om-prepare_dn1_1 ... 
Creating ozone-om-prepare_dn2_1 ... 
Creating ozone-om-prepare_om1_1 ... 
Creating ozone-om-prepare_scm_1 ... 
Creating ozone-om-prepare_om3_1 ... 
Creating ozone-om-prepare_om2_1 ... 
Creating ozone-om-prepare_scm_1 ... done
Creating ozone-om-prepare_dn2_1 ... done
Creating ozone-om-prepare_dn1_1 ... done
Creating ozone-om-prepare_om1_1 ... done
Creating ozone-om-prepare_om2_1 ... done
Creating ozone-om-prepare_dn3_1 ... done
Creating ozone-om-prepare_om3_1 ... done
SECONDS: 53
com.google.protobuf.ServiceException: java.net.ConnectException: Call From fbba21fc0621/10.9.0.17 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/10.9.0.17:9860 after 1 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From fbba21fc0621/10.9.0.17 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/10.9.0.17:9860 after 2 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From fbba21fc0621/10.9.0.17 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/10.9.0.17:9860 after 3 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.ratis.ServerNotLeaderException): Server:a8055cdf-896d-4297-ad53-4452bde47cff is not the leader. Could not determine the leader node. at org.apache.hadoop.hdds.ratis.ServerNotLeaderException.convertToNotLeaderException(ServerNotLeaderException.java:109) at org.apache.hadoop.hdds.scm.ha.RatisUtil.checkRatisException(RatisUtil.java:246) at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:197) at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:64993) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:465) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:578) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:556) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1043) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:971) at java.base/java.security.AccessController.doPrivileged(Native Method) at java.base/javax.security.auth.Subject.doAs(Subject.java:423) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2976) , while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/10.9.0.17:9860 after 4 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.ratis.ServerNotLeaderException): Server:a8055cdf-896d-4297-ad53-4452bde47cff is not the leader. Could not determine the leader node. at org.apache.hadoop.hdds.ratis.ServerNotLeaderException.convertToNotLeaderException(ServerNotLeaderException.java:109) at org.apache.hadoop.hdds.scm.ha.RatisUtil.checkRatisException(RatisUtil.java:246) at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:197) at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:64993) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:465) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:578) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:556) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1043) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:971) at java.base/java.security.AccessController.doPrivileged(Native Method) at java.base/javax.security.auth.Subject.doAs(Subject.java:423) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2976) , while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/10.9.0.17:9860 after 5 failover attempts. Trying to failover after sleeping for 2000ms. SCM is in safe mode. validated:false, DataNodeSafeModeRule, registered datanodes (=0) >= required datanodes (=3) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:true, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=0)
SECONDS: 85
SCM is out of safe mode.
Safe mode is off
Found OM leader for service omservice: om3 : LEADER (om3)
Replaced OM order with om3,om2,om1 in ozone-om-prepare_scm_1
==============================================================================
Om-Prepare :: Smoke test to test preparing OMs in an OM HA cluster.           
==============================================================================
Prepare Ozone Manager                                                 | PASS |
------------------------------------------------------------------------------
Checks if the expected data is present in OM                          | PASS |
------------------------------------------------------------------------------
Test write operation fails                                            | PASS |
------------------------------------------------------------------------------
Om-Prepare :: Smoke test to test preparing OMs in an OM HA cluster.   | PASS |
3 tests, 3 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozone-om-prepare/result/robot-ozone-om-prepare-ozone-om-prepare-om-prepare-scm.xml
==============================================================================
Om-Cancel-Prepare :: Smoke test for ozone manager cancel prepare              
==============================================================================
Cancel Ozone Manager Prepare                                          | PASS |
------------------------------------------------------------------------------
Test write operations                                                 | PASS |
------------------------------------------------------------------------------
Om-Cancel-Prepare :: Smoke test for ozone manager cancel prepare      | PASS |
2 tests, 2 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozone-om-prepare/result/robot-ozone-om-prepare-ozone-om-prepare-om-prepare-scm-1.xml
==============================================================================
Om-Prepare :: Smoke test to test preparing OMs in an OM HA cluster.           
==============================================================================
Prepare Ozone Manager                                                 | PASS |
------------------------------------------------------------------------------
Checks if the expected data is present in OM                          | PASS |
------------------------------------------------------------------------------
Test write operation fails                                            | PASS |
------------------------------------------------------------------------------
Om-Prepare :: Smoke test to test preparing OMs in an OM HA cluster.   | PASS |
3 tests, 3 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozone-om-prepare/result/robot-ozone-om-prepare-ozone-om-prepare-om-prepare-scm-2.xml
==============================================================================
Om-Prepared :: Smoke test to test that OMs are prepared in an OM HA cluster.  
==============================================================================
Test create volume fails                                              | PASS |
------------------------------------------------------------------------------
Test list volumes succeeds                                            | PASS |
------------------------------------------------------------------------------
Om-Prepared :: Smoke test to test that OMs are prepared in an OM H... | PASS |
2 tests, 2 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozone-om-prepare/result/robot-ozone-om-prepare-ozone-om-prepare-om-prepare-scm-3.xml
Stopping ozone-om-prepare_om2_1 ... 
Stopping ozone-om-prepare_om3_1 ... 
Stopping ozone-om-prepare_scm_1 ... 
Stopping ozone-om-prepare_om1_1 ... 
Stopping ozone-om-prepare_dn2_1 ... 
Stopping ozone-om-prepare_dn1_1 ... 
Stopping ozone-om-prepare_dn3_1 ... 
Stopping ozone-om-prepare_om2_1 ... done
Stopping ozone-om-prepare_om3_1 ... done
Stopping ozone-om-prepare_om1_1 ... done
Stopping ozone-om-prepare_dn2_1 ... done
Stopping ozone-om-prepare_dn3_1 ... done
Stopping ozone-om-prepare_dn1_1 ... done
Stopping ozone-om-prepare_scm_1 ... done
Removing ozone-om-prepare_om2_1 ... 
Removing ozone-om-prepare_om3_1 ... 
Removing ozone-om-prepare_scm_1 ... 
Removing ozone-om-prepare_om1_1 ... 
Removing ozone-om-prepare_dn2_1 ... 
Removing ozone-om-prepare_dn1_1 ... 
Removing ozone-om-prepare_dn3_1 ... 
Removing ozone-om-prepare_dn3_1 ... done
Removing ozone-om-prepare_om2_1 ... done
Removing ozone-om-prepare_om3_1 ... done
Removing ozone-om-prepare_om1_1 ... done
Removing ozone-om-prepare_scm_1 ... done
Removing ozone-om-prepare_dn2_1 ... done
Removing ozone-om-prepare_dn1_1 ... done
Removing network ozone-om-prepare_net
Removing network ozone-om-prepare_net
Network ozone-om-prepare_net not found.
Creating network "ozone-om-prepare_net" with driver "bridge"
Creating ozone-om-prepare_om3_1 ... 
Creating ozone-om-prepare_om1_1 ... 
Creating ozone-om-prepare_om2_1 ... 
Creating ozone-om-prepare_dn1_1 ... 
Creating ozone-om-prepare_scm_1 ... 
Creating ozone-om-prepare_dn3_1 ... 
Creating ozone-om-prepare_dn2_1 ... 
Creating ozone-om-prepare_dn1_1 ... done
Creating ozone-om-prepare_om3_1 ... done
Creating ozone-om-prepare_dn2_1 ... done
Creating ozone-om-prepare_om2_1 ... done
Creating ozone-om-prepare_om1_1 ... done
Creating ozone-om-prepare_scm_1 ... done
Creating ozone-om-prepare_dn3_1 ... done
SECONDS: 52
com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.ratis.ServerNotLeaderException): Server:a8055cdf-896d-4297-ad53-4452bde47cff is not the leader. Could not determine the leader node. at org.apache.hadoop.hdds.ratis.ServerNotLeaderException.convertToNotLeaderException(ServerNotLeaderException.java:109) at org.apache.hadoop.hdds.scm.ha.RatisUtil.checkRatisException(RatisUtil.java:246) at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:197) at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:64993) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:465) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:578) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:556) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1043) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:971) at java.base/java.security.AccessController.doPrivileged(Native Method) at java.base/javax.security.auth.Subject.doAs(Subject.java:423) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2976) , while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/10.9.0.17:9860 after 1 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.ratis.ServerNotLeaderException): Server:a8055cdf-896d-4297-ad53-4452bde47cff is not the leader. Could not determine the leader node. at org.apache.hadoop.hdds.ratis.ServerNotLeaderException.convertToNotLeaderException(ServerNotLeaderException.java:109) at org.apache.hadoop.hdds.scm.ha.RatisUtil.checkRatisException(RatisUtil.java:246) at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:197) at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:64993) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:465) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:578) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:556) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1043) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:971) at java.base/java.security.AccessController.doPrivileged(Native Method) at java.base/javax.security.auth.Subject.doAs(Subject.java:423) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2976) , while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/10.9.0.17:9860 after 2 failover attempts. Trying to failover after sleeping for 2000ms. SCM is in safe mode. validated:false, DataNodeSafeModeRule, registered datanodes (=0) >= required datanodes (=3) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:false, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=2)
SECONDS: 82
SCM is out of safe mode.
Safe mode is off
Found OM leader for service omservice: om3 : LEADER (om3)
Replaced OM order with om3,om2,om1 in ozone-om-prepare_scm_1
==============================================================================
Om-Prepared :: Smoke test to test that OMs are prepared in an OM HA cluster.  
==============================================================================
Test create volume fails                                              | PASS |
------------------------------------------------------------------------------
Test list volumes succeeds                                            | PASS |
------------------------------------------------------------------------------
Om-Prepared :: Smoke test to test that OMs are prepared in an OM H... | PASS |
2 tests, 2 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozone-om-prepare/result/robot-ozone-om-prepare-ozone-om-prepare-om-prepare-scm-4.xml
Stopping ozone-om-prepare_dn2_1 ... 
Stopping ozone-om-prepare_scm_1 ... 
Stopping ozone-om-prepare_dn3_1 ... 
Stopping ozone-om-prepare_dn1_1 ... 
Stopping ozone-om-prepare_om3_1 ... 
Stopping ozone-om-prepare_om1_1 ... 
Stopping ozone-om-prepare_om2_1 ... 
Stopping ozone-om-prepare_om2_1 ... done
Stopping ozone-om-prepare_om1_1 ... done
Stopping ozone-om-prepare_om3_1 ... done
Stopping ozone-om-prepare_dn2_1 ... done
Stopping ozone-om-prepare_dn3_1 ... done
Stopping ozone-om-prepare_dn1_1 ... done
Stopping ozone-om-prepare_scm_1 ... done
Removing ozone-om-prepare_dn2_1 ... 
Removing ozone-om-prepare_scm_1 ... 
Removing ozone-om-prepare_dn3_1 ... 
Removing ozone-om-prepare_dn1_1 ... 
Removing ozone-om-prepare_om3_1 ... 
Removing ozone-om-prepare_om1_1 ... 
Removing ozone-om-prepare_om2_1 ... 
Removing ozone-om-prepare_dn2_1 ... done
Removing ozone-om-prepare_om3_1 ... done
Removing ozone-om-prepare_dn3_1 ... done
Removing ozone-om-prepare_om1_1 ... done
Removing ozone-om-prepare_scm_1 ... done
Removing ozone-om-prepare_dn1_1 ... done
Removing ozone-om-prepare_om2_1 ... done
Removing network ozone-om-prepare_net
Removing network ozone-om-prepare_net
Network ozone-om-prepare_net not found.
Creating network "ozone-om-prepare_net" with driver "bridge"
Creating ozone-om-prepare_dn3_1 ... 
Creating ozone-om-prepare_om2_1 ... 
Creating ozone-om-prepare_om3_1 ... 
Creating ozone-om-prepare_dn2_1 ... 
Creating ozone-om-prepare_scm_1 ... 
Creating ozone-om-prepare_om1_1 ... 
Creating ozone-om-prepare_dn1_1 ... 
Creating ozone-om-prepare_dn3_1 ... done
Creating ozone-om-prepare_om2_1 ... done
Creating ozone-om-prepare_scm_1 ... done
Creating ozone-om-prepare_om3_1 ... done
Creating ozone-om-prepare_dn1_1 ... done
Creating ozone-om-prepare_om1_1 ... done
Creating ozone-om-prepare_dn2_1 ... done
SECONDS: 50
com.google.protobuf.ServiceException: java.net.ConnectException: Call From adb8effc479d/10.9.0.17 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/10.9.0.17:9860 after 1 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.ratis.ServerNotLeaderException): Server:a8055cdf-896d-4297-ad53-4452bde47cff is not the leader. Could not determine the leader node. at org.apache.hadoop.hdds.ratis.ServerNotLeaderException.convertToNotLeaderException(ServerNotLeaderException.java:109) at org.apache.hadoop.hdds.scm.ha.RatisUtil.checkRatisException(RatisUtil.java:246) at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:197) at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:64993) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:465) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:578) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:556) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1043) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:971) at java.base/java.security.AccessController.doPrivileged(Native Method) at java.base/javax.security.auth.Subject.doAs(Subject.java:423) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2976) , while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/10.9.0.17:9860 after 2 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.ratis.ServerNotLeaderException): Server:a8055cdf-896d-4297-ad53-4452bde47cff is not the leader. Could not determine the leader node. at org.apache.hadoop.hdds.ratis.ServerNotLeaderException.convertToNotLeaderException(ServerNotLeaderException.java:109) at org.apache.hadoop.hdds.scm.ha.RatisUtil.checkRatisException(RatisUtil.java:246) at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:197) at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:64993) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:465) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:578) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:556) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1043) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:971) at java.base/java.security.AccessController.doPrivileged(Native Method) at java.base/javax.security.auth.Subject.doAs(Subject.java:423) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2976) , while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/10.9.0.17:9860 after 3 failover attempts. Trying to failover after sleeping for 2000ms. SCM is in safe mode. validated:false, DataNodeSafeModeRule, registered datanodes (=0) >= required datanodes (=3) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:false, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=2)
SECONDS: 77
SCM is out of safe mode.
Safe mode is off
Found OM leader for service omservice: om1 : LEADER (om1)
Replaced OM order with om1,om3,om2 in ozone-om-prepare_scm_1
==============================================================================
Loaddata :: Smoketest ozone cluster startup                                   
==============================================================================
Create a volume, bucket and key                                       | PASS |
------------------------------------------------------------------------------
Loaddata :: Smoketest ozone cluster startup                           | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozone-om-prepare/result/robot-ozone-om-prepare-ozone-om-prepare-om-prepare-scm-5.xml
==============================================================================
Readdata :: Smoketest ozone cluster startup                                   
==============================================================================
Read data from previously created key                                 | PASS |
------------------------------------------------------------------------------
Readdata :: Smoketest ozone cluster startup                           | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozone-om-prepare/result/robot-ozone-om-prepare-ozone-om-prepare-om-prepare-scm-6.xml
Stopping ozone-om-prepare_dn1_1 ... 
Stopping ozone-om-prepare_om1_1 ... 
Stopping ozone-om-prepare_dn2_1 ... 
Stopping ozone-om-prepare_scm_1 ... 
Stopping ozone-om-prepare_om3_1 ... 
Stopping ozone-om-prepare_dn3_1 ... 
Stopping ozone-om-prepare_om2_1 ... 
Stopping ozone-om-prepare_om3_1 ... done
Stopping ozone-om-prepare_om2_1 ... done
Stopping ozone-om-prepare_om1_1 ... done
Stopping ozone-om-prepare_dn3_1 ... done
Stopping ozone-om-prepare_dn1_1 ... done
Stopping ozone-om-prepare_dn2_1 ... done
Stopping ozone-om-prepare_scm_1 ... done
Removing ozone-om-prepare_dn1_1 ... 
Removing ozone-om-prepare_om1_1 ... 
Removing ozone-om-prepare_dn2_1 ... 
Removing ozone-om-prepare_scm_1 ... 
Removing ozone-om-prepare_om3_1 ... 
Removing ozone-om-prepare_dn3_1 ... 
Removing ozone-om-prepare_om2_1 ... 
Removing ozone-om-prepare_om2_1 ... done
Removing ozone-om-prepare_scm_1 ... done
Removing ozone-om-prepare_om3_1 ... done
Removing ozone-om-prepare_dn3_1 ... done
Removing ozone-om-prepare_dn2_1 ... done
Removing ozone-om-prepare_om1_1 ... done
Removing ozone-om-prepare_dn1_1 ... done
Removing network ozone-om-prepare_net
Log:     /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/ozone-om-prepare/result/log.html
Report:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/ozone-om-prepare/result/report.html
Output:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-om-prepare.xml
removed 'ozone-om-prepare/result/robot-ozone-om-prepare-ozone-om-prepare-om-prepare-scm-1.xml'
removed 'ozone-om-prepare/result/robot-ozone-om-prepare-ozone-om-prepare-om-prepare-scm-2.xml'
removed 'ozone-om-prepare/result/robot-ozone-om-prepare-ozone-om-prepare-om-prepare-scm-3.xml'
removed 'ozone-om-prepare/result/robot-ozone-om-prepare-ozone-om-prepare-om-prepare-scm-4.xml'
removed 'ozone-om-prepare/result/robot-ozone-om-prepare-ozone-om-prepare-om-prepare-scm-5.xml'
removed 'ozone-om-prepare/result/robot-ozone-om-prepare-ozone-om-prepare-om-prepare-scm-6.xml'
removed 'ozone-om-prepare/result/robot-ozone-om-prepare-ozone-om-prepare-om-prepare-scm.xml'
removed 'ozone-om-prepare/result/log.html'
removed 'ozone-om-prepare/result/report.html'
renamed 'ozone-om-prepare/result/dn-audit-01062cc89f69.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-om-prepare/dn-audit-01062cc89f69.log'
renamed 'ozone-om-prepare/result/dn-audit-07235d0979ed.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-om-prepare/dn-audit-07235d0979ed.log'
renamed 'ozone-om-prepare/result/dn-audit-181532b2c743.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-om-prepare/dn-audit-181532b2c743.log'
renamed 'ozone-om-prepare/result/dn-audit-308b6ef6b6b8.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-om-prepare/dn-audit-308b6ef6b6b8.log'
renamed 'ozone-om-prepare/result/dn-audit-399c4348f24a.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-om-prepare/dn-audit-399c4348f24a.log'
renamed 'ozone-om-prepare/result/dn-audit-4911f9d37110.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-om-prepare/dn-audit-4911f9d37110.log'
renamed 'ozone-om-prepare/result/dn-audit-5268e73b0396.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-om-prepare/dn-audit-5268e73b0396.log'
renamed 'ozone-om-prepare/result/dn-audit-c7680476c610.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-om-prepare/dn-audit-c7680476c610.log'
renamed 'ozone-om-prepare/result/dn-audit-fcf6c2cfda6e.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-om-prepare/dn-audit-fcf6c2cfda6e.log'
renamed 'ozone-om-prepare/result/docker-ozone-om-prepare-ozone-om-prepare-om-prepare-scm.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-om-prepare/docker-ozone-om-prepare-ozone-om-prepare-om-prepare-scm.log'
renamed 'ozone-om-prepare/result/om-audit-3a15550eeba9.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-om-prepare/om-audit-3a15550eeba9.log'
renamed 'ozone-om-prepare/result/om-audit-4cd114531a3a.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-om-prepare/om-audit-4cd114531a3a.log'
renamed 'ozone-om-prepare/result/om-audit-4e53990f2b35.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-om-prepare/om-audit-4e53990f2b35.log'
renamed 'ozone-om-prepare/result/om-audit-550aa7939565.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-om-prepare/om-audit-550aa7939565.log'
renamed 'ozone-om-prepare/result/om-audit-698e4c18adbb.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-om-prepare/om-audit-698e4c18adbb.log'
renamed 'ozone-om-prepare/result/om-audit-75db6968c223.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-om-prepare/om-audit-75db6968c223.log'
renamed 'ozone-om-prepare/result/om-audit-cd481d05083a.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-om-prepare/om-audit-cd481d05083a.log'
renamed 'ozone-om-prepare/result/om-audit-ec7fe6acaff0.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-om-prepare/om-audit-ec7fe6acaff0.log'
renamed 'ozone-om-prepare/result/om-audit-f5b140b3debf.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-om-prepare/om-audit-f5b140b3debf.log'
renamed 'ozone-om-prepare/result/scm-audit-adb8effc479d.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-om-prepare/scm-audit-adb8effc479d.log'
renamed 'ozone-om-prepare/result/scm-audit-fbba21fc0621.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-om-prepare/scm-audit-fbba21fc0621.log'
renamed 'ozone-om-prepare/result/scm-audit-ff02a4819863.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-om-prepare/scm-audit-ff02a4819863.log'
Executing test in ozone-topology
Removing network ozone-topology_net
Network ozone-topology_net not found.
Creating network "ozone-topology_net" with driver "bridge"
Creating ozone-topology_om_1 ... 
Creating ozone-topology_scm_1 ... 
Creating ozone-topology_datanode_3_1 ... 
Creating ozone-topology_datanode_1_1 ... 
Creating ozone-topology_datanode_2_1 ... 
Creating ozone-topology_datanode_4_1 ... 
Creating ozone-topology_recon_1      ... 
Creating ozone-topology_datanode_6_1 ... 
Creating ozone-topology_datanode_5_1 ... 
Creating ozone-topology_recon_1      ... done
Creating ozone-topology_datanode_3_1 ... done
Creating ozone-topology_scm_1        ... done
Creating ozone-topology_om_1         ... done
Creating ozone-topology_datanode_1_1 ... done
Creating ozone-topology_datanode_2_1 ... done
Creating ozone-topology_datanode_6_1 ... done
Creating ozone-topology_datanode_4_1 ... done
Creating ozone-topology_datanode_5_1 ... done
SECONDS: 96
com.google.protobuf.ServiceException: java.net.ConnectException: Call From d73cb88f96f5/10.5.0.71 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy21.submitRequest over nodeId=scmNodeId,nodeAddress=scm/10.5.0.71:9860 after 1 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From d73cb88f96f5/10.5.0.71 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy21.submitRequest over nodeId=scmNodeId,nodeAddress=scm/10.5.0.71:9860 after 2 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From d73cb88f96f5/10.5.0.71 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy21.submitRequest over nodeId=scmNodeId,nodeAddress=scm/10.5.0.71:9860 after 3 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From d73cb88f96f5/10.5.0.71 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy21.submitRequest over nodeId=scmNodeId,nodeAddress=scm/10.5.0.71:9860 after 4 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From d73cb88f96f5/10.5.0.71 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy21.submitRequest over nodeId=scmNodeId,nodeAddress=scm/10.5.0.71:9860 after 5 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.ratis.ServerNotLeaderException): Server:29053abd-a90b-4657-a38b-11c405ed80ec is not the leader. Could not determine the leader node. at org.apache.hadoop.hdds.ratis.ServerNotLeaderException.convertToNotLeaderException(ServerNotLeaderException.java:109) at org.apache.hadoop.hdds.scm.ha.RatisUtil.checkRatisException(RatisUtil.java:246) at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:197) at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:64993) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:465) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:578) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:556) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1043) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:971) at java.base/java.security.AccessController.doPrivileged(Native Method) at java.base/javax.security.auth.Subject.doAs(Subject.java:423) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2976) , while invoking $Proxy21.submitRequest over nodeId=scmNodeId,nodeAddress=scm/10.5.0.71:9860 after 6 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.ratis.ServerNotLeaderException): Server:29053abd-a90b-4657-a38b-11c405ed80ec is not the leader. Could not determine the leader node. at org.apache.hadoop.hdds.ratis.ServerNotLeaderException.convertToNotLeaderException(ServerNotLeaderException.java:109) at org.apache.hadoop.hdds.scm.ha.RatisUtil.checkRatisException(RatisUtil.java:246) at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:197) at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:64993) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:465) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:578) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:556) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1043) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:971) at java.base/java.security.AccessController.doPrivileged(Native Method) at java.base/javax.security.auth.Subject.doAs(Subject.java:423) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2976) , while invoking $Proxy21.submitRequest over nodeId=scmNodeId,nodeAddress=scm/10.5.0.71:9860 after 7 failover attempts. Trying to failover after sleeping for 2000ms. SCM is in safe mode. validated:true, DataNodeSafeModeRule, registered datanodes (=4) >= required datanodes (=4) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:true, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=0)
SECONDS: 112
SCM is in safe mode. validated:true, DataNodeSafeModeRule, registered datanodes (=4) >= required datanodes (=4) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:true, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=0)
SECONDS: 122
SCM is in safe mode. validated:true, DataNodeSafeModeRule, registered datanodes (=4) >= required datanodes (=4) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:true, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=0)
SECONDS: 154
SCM is out of safe mode.
Safe mode is off
No OM HA service, no need to wait
==============================================================================
Basic :: Smoketest ozone cluster startup                                      
==============================================================================
Check webui static resources                                          | PASS |
------------------------------------------------------------------------------
Basic Freon smoketest                                                 | PASS |
------------------------------------------------------------------------------
Basic :: Smoketest ozone cluster startup                              | PASS |
2 tests, 2 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozone-topology/result/robot-ozone-topology-ozone-topology-basic-scm.xml
==============================================================================
Cli :: Smoketest ozone cluster startup                                        
==============================================================================
Run printTopology                                                     | PASS |
------------------------------------------------------------------------------
Run printTopology -o                                                  | PASS |
------------------------------------------------------------------------------
Run printTopology --operational-state IN_SERVICE                      | PASS |
------------------------------------------------------------------------------
Run printTopology --node-state HEALTHY                                | PASS |
------------------------------------------------------------------------------
Cli :: Smoketest ozone cluster startup                                | PASS |
4 tests, 4 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozone-topology/result/robot-ozone-topology-ozone-topology-basic-scm-1.xml
==============================================================================
Recon                                                                         
==============================================================================
Recon.Recon-Api :: Smoke test to start cluster with docker-compose environm...
==============================================================================
Check if Recon picks up OM data                                       | PASS |
------------------------------------------------------------------------------
Check if Recon picks up DN heartbeats                                 | PASS |
------------------------------------------------------------------------------
Check if Recon Web UI is up                                           | PASS |
------------------------------------------------------------------------------
Check web UI access                                                   | PASS |
------------------------------------------------------------------------------
Check admin only api access                                           | PASS |
------------------------------------------------------------------------------
Check unhealthy, (admin) api access                                   | PASS |
------------------------------------------------------------------------------
Check normal api access                                               | PASS |
------------------------------------------------------------------------------
Recon.Recon-Api :: Smoke test to start cluster with docker-compose... | PASS |
7 tests, 7 passed, 0 failed
==============================================================================
Recon.Recon-Nssummary :: Smoke test for Recon Namespace Summary Endpoint fo...
==============================================================================
Check volume creation                                                 | PASS |
------------------------------------------------------------------------------
Check bucket creation                                                 | PASS |
------------------------------------------------------------------------------
Check keys creation                                                   | PASS |
------------------------------------------------------------------------------
Check Summary api access                                              | PASS |
------------------------------------------------------------------------------
Check Disk Usage api access                                           | PASS |
------------------------------------------------------------------------------
Check Quota Usage api access                                          | PASS |
------------------------------------------------------------------------------
Check File Size Distribution api access                               | PASS |
------------------------------------------------------------------------------
Check Recon Namespace Summary Root                                    | PASS |
------------------------------------------------------------------------------
Check Recon Namespace Summary Volume                                  | PASS |
------------------------------------------------------------------------------
Check Recon Namespace Summary Bucket                                  | PASS |
------------------------------------------------------------------------------
Check Recon Namespace Summary Key                                     | PASS |
------------------------------------------------------------------------------
Check Recon Namespace Summary Directory                               | PASS |
------------------------------------------------------------------------------
Check Recon Namespace Disk Usage                                      | PASS |
------------------------------------------------------------------------------
Check Recon Namespace Volume Quota Usage                              | PASS |
------------------------------------------------------------------------------
Check Recon Namespace Bucket Quota Usage                              | PASS |
------------------------------------------------------------------------------
Check Recon Namespace File Size Distribution Root                     | PASS |
------------------------------------------------------------------------------
Recon.Recon-Nssummary :: Smoke test for Recon Namespace Summary En... | PASS |
16 tests, 16 passed, 0 failed
==============================================================================
Recon                                                                 | PASS |
23 tests, 23 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozone-topology/result/robot-ozone-topology-ozone-topology-basic-scm-2.xml
==============================================================================
Loaddata :: Smoketest ozone cluster startup                                   
==============================================================================
Create a volume, bucket and key                                       | PASS |
------------------------------------------------------------------------------
Loaddata :: Smoketest ozone cluster startup                           | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozone-topology/result/robot-ozone-topology-ozone-topology-basic-scm-3.xml
Stopping ozone-topology_datanode_2_1 ... 
Stopping ozone-topology_datanode_1_1 ... 
Stopping ozone-topology_datanode_3_1 ... 
Stopping ozone-topology_datanode_3_1 ... done
Stopping ozone-topology_datanode_2_1 ... done
Stopping ozone-topology_datanode_1_1 ... done
==============================================================================
readdata-first-half :: Smoketest ozone cluster startup                        
==============================================================================
Read data from previously created key                                 | PASS |
------------------------------------------------------------------------------
readdata-first-half :: Smoketest ozone cluster startup                | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozone-topology/result/robot-ozone-topology-ozone-topology-basic-scm-4.xml
Starting datanode_1 ... 
Starting datanode_2 ... 
Starting datanode_3 ... 
Starting datanode_2 ... done
Starting datanode_1 ... done
Starting datanode_3 ... done
Port 9858 is not available on datanode_1 yet
Port 9858 is not available on datanode_1 yet
Port 9858 is not available on datanode_1 yet
Port 9858 is not available on datanode_1 yet
Port 9858 is not available on datanode_1 yet
Port 9858 is not available on datanode_1 yet
Port 9858 is not available on datanode_1 yet
Port 9858 is not available on datanode_1 yet
Port 9858 is not available on datanode_1 yet
Port 9858 is not available on datanode_1 yet
Port 9858 is not available on datanode_1 yet
Port 9858 is not available on datanode_1 yet
Port 9858 is not available on datanode_1 yet
Port 9858 is not available on datanode_1 yet
Port 9858 is not available on datanode_1 yet
Port 9858 is not available on datanode_1 yet
Port 9858 is not available on datanode_1 yet
Port 9858 is not available on datanode_1 yet
Port 9858 is not available on datanode_1 yet
Port 9858 is not available on datanode_1 yet
Port 9858 is not available on datanode_1 yet
Port 9858 is not available on datanode_1 yet
Port 9858 is not available on datanode_1 yet
Port 9858 is not available on datanode_1 yet
Port 9858 is not available on datanode_1 yet
Port 9858 is not available on datanode_1 yet
Timed out waiting on datanode_1 9858 to become available
ERROR: Test execution of ozone-topology is FAILED!!!!
Output:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-topology.xml
removed 'ozone-topology/result/robot-ozone-topology-ozone-topology-basic-scm-1.xml'
removed 'ozone-topology/result/robot-ozone-topology-ozone-topology-basic-scm-2.xml'
removed 'ozone-topology/result/robot-ozone-topology-ozone-topology-basic-scm-3.xml'
removed 'ozone-topology/result/robot-ozone-topology-ozone-topology-basic-scm-4.xml'
removed 'ozone-topology/result/robot-ozone-topology-ozone-topology-basic-scm.xml'
renamed 'ozone-topology/result/dn-audit-592f50ecde67.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-topology/dn-audit-592f50ecde67.log'
renamed 'ozone-topology/result/dn-audit-5be6d64cb4e7.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-topology/dn-audit-5be6d64cb4e7.log'
renamed 'ozone-topology/result/dn-audit-982487c343ff.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-topology/dn-audit-982487c343ff.log'
renamed 'ozone-topology/result/dn-audit-a4b16b8cccd6.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-topology/dn-audit-a4b16b8cccd6.log'
renamed 'ozone-topology/result/dn-audit-d5d6ab7e1ba5.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-topology/dn-audit-d5d6ab7e1ba5.log'
renamed 'ozone-topology/result/dn-audit-f189d298918e.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-topology/dn-audit-f189d298918e.log'
renamed 'ozone-topology/result/om-audit-4d39a6cb21a1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-topology/om-audit-4d39a6cb21a1.log'
renamed 'ozone-topology/result/scm-audit-d73cb88f96f5.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozone-topology/scm-audit-d73cb88f96f5.log'
Executing test in ozones3-haproxy
Removing network ozones3-haproxy_default
Network ozones3-haproxy_default not found.
Creating network "ozones3-haproxy_default" with the default driver
Pulling s3g (haproxy:latest)...
latest: Pulling from library/haproxy
Digest: sha256:1c16bba6f13033ac6704fd89a91ca18db3d6306a31afdfdcf5890b2dae2b99bb
Status: Downloaded newer image for haproxy:latest
Creating ozones3-haproxy_s3g2_1 ... 
Creating ozones3-haproxy_s3g1_1 ... 
Creating ozones3-haproxy_datanode_1 ... 
Creating ozones3-haproxy_datanode_2 ... 
Creating ozones3-haproxy_datanode_3 ... 
Creating ozones3-haproxy_om_1       ... 
Creating ozones3-haproxy_s3g3_1     ... 
Creating ozones3-haproxy_scm_1      ... 
Creating ozones3-haproxy_s3g_1      ... 
Host is already in use by another container
Creating ozones3-haproxy_scm_1      ... error

ERROR: for ozones3-haproxy_scm_1  Cannot start service scm: driver failed programming external connectivity on endpoint ozones3-haproxy_scm_1 (18776620251f56bd2c15dc7cd902ad41cc3add587730f6a45649fd27b7e53450): Bind for 0.0.0.0:9876 failed: port is already allocated
Host is already in use by another container
Creating ozones3-haproxy_om_1       ... error

ERROR: for ozones3-haproxy_om_1  Cannot start service om: driver failed programming external connectivity on endpoint ozones3-haproxy_om_1 (952be0fd2b1e6d9264e263e4feff321f4977309220899005beb44ec7704c68e4): Bind for 0.0.0.0:9874 failed: port is already allocated
Creating ozones3-haproxy_s3g2_1     ... done
Creating ozones3-haproxy_s3g1_1     ... done
Creating ozones3-haproxy_datanode_2 ... done
Creating ozones3-haproxy_datanode_3 ... done
Creating ozones3-haproxy_datanode_1 ... done
Creating ozones3-haproxy_s3g_1      ... done
Creating ozones3-haproxy_s3g3_1     ... done

ERROR: for scm  Cannot start service scm: driver failed programming external connectivity on endpoint ozones3-haproxy_scm_1 (18776620251f56bd2c15dc7cd902ad41cc3add587730f6a45649fd27b7e53450): Bind for 0.0.0.0:9876 failed: port is already allocated

ERROR: for om  Cannot start service om: driver failed programming external connectivity on endpoint ozones3-haproxy_om_1 (952be0fd2b1e6d9264e263e4feff321f4977309220899005beb44ec7704c68e4): Bind for 0.0.0.0:9874 failed: port is already allocated
Encountered errors while bringing up the project.
Stopping ozones3-haproxy_datanode_3 ... 
Stopping ozones3-haproxy_s3g_1      ... 
Stopping ozones3-haproxy_datanode_1 ... 
Stopping ozones3-haproxy_s3g3_1     ... 
Stopping ozones3-haproxy_datanode_2 ... 
Stopping ozones3-haproxy_s3g1_1     ... 
Stopping ozones3-haproxy_s3g2_1     ... 
Stopping ozones3-haproxy_s3g1_1     ... done
Stopping ozones3-haproxy_s3g_1      ... done
Stopping ozones3-haproxy_s3g3_1     ... done
Stopping ozones3-haproxy_datanode_1 ... done
Stopping ozones3-haproxy_s3g2_1     ... done
Stopping ozones3-haproxy_datanode_2 ... done
Stopping ozones3-haproxy_datanode_3 ... done
Removing ozones3-haproxy_datanode_3 ... 
Removing ozones3-haproxy_scm_1      ... 
Removing ozones3-haproxy_s3g_1      ... 
Removing ozones3-haproxy_datanode_1 ... 
Removing ozones3-haproxy_s3g3_1     ... 
Removing ozones3-haproxy_om_1       ... 
Removing ozones3-haproxy_datanode_2 ... 
Removing ozones3-haproxy_s3g1_1     ... 
Removing ozones3-haproxy_s3g2_1     ... 
Removing ozones3-haproxy_om_1       ... done
Removing ozones3-haproxy_s3g1_1     ... done
Removing ozones3-haproxy_s3g2_1     ... done
Removing ozones3-haproxy_s3g3_1     ... done
Removing ozones3-haproxy_scm_1      ... done
Removing ozones3-haproxy_datanode_2 ... done
Removing ozones3-haproxy_s3g_1      ... done
Removing ozones3-haproxy_datanode_1 ... done
Removing ozones3-haproxy_datanode_3 ... done
Removing network ozones3-haproxy_default
ERROR: Test execution of ozones3-haproxy is FAILED!!!!
renamed 'ozones3-haproxy/result/docker-ozones3-haproxy.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozones3-haproxy/docker-ozones3-haproxy.log'
Executing test in ozonescripts
Removing network ozonescripts_default
Network ozonescripts_default not found.
Creating network "ozonescripts_default" with the default driver
Building datanode
Sending build context to Docker daemon  30.21kB
Step 1/17 : ARG OZONE_RUNNER_IMAGE
Step 2/17 : ARG OZONE_RUNNER_VERSION
Step 3/17 : FROM ${OZONE_RUNNER_IMAGE}:${OZONE_RUNNER_VERSION}
 ---> 34ffed355199
Step 4/17 : RUN sudo yum install -y openssh-clients openssh-server
 ---> Running in 767b27fd5640
Loaded plugins: fastestmirror, ovl
Determining fastest mirrors
 * base: repos.lax.layerhost.com
 * epel: mirrors.sonic.net
 * extras: mirrors.ocf.berkeley.edu
 * updates: opencolo.mm.fcix.net
Resolving Dependencies
--> Running transaction check
---> Package openssh-clients.x86_64 0:7.4p1-22.el7_9 will be installed
--> Processing Dependency: openssh = 7.4p1-22.el7_9 for package: openssh-clients-7.4p1-22.el7_9.x86_64
--> Processing Dependency: fipscheck-lib(x86-64) >= 1.3.0 for package: openssh-clients-7.4p1-22.el7_9.x86_64
--> Processing Dependency: libfipscheck.so.1()(64bit) for package: openssh-clients-7.4p1-22.el7_9.x86_64
--> Processing Dependency: libedit.so.0()(64bit) for package: openssh-clients-7.4p1-22.el7_9.x86_64
---> Package openssh-server.x86_64 0:7.4p1-22.el7_9 will be installed
--> Processing Dependency: libwrap.so.0()(64bit) for package: openssh-server-7.4p1-22.el7_9.x86_64
--> Running transaction check
---> Package fipscheck-lib.x86_64 0:1.4.1-6.el7 will be installed
--> Processing Dependency: /usr/bin/fipscheck for package: fipscheck-lib-1.4.1-6.el7.x86_64
---> Package libedit.x86_64 0:3.0-12.20121213cvs.el7 will be installed
---> Package openssh.x86_64 0:7.4p1-22.el7_9 will be installed
---> Package tcp_wrappers-libs.x86_64 0:7.6-77.el7 will be installed
--> Running transaction check
---> Package fipscheck.x86_64 0:1.4.1-6.el7 will be installed
--> Finished Dependency Resolution

Dependencies Resolved

================================================================================
 Package               Arch       Version                     Repository   Size
================================================================================
Installing:
 openssh-clients       x86_64     7.4p1-22.el7_9              updates     655 k
 openssh-server        x86_64     7.4p1-22.el7_9              updates     459 k
Installing for dependencies:
 fipscheck             x86_64     1.4.1-6.el7                 base         21 k
 fipscheck-lib         x86_64     1.4.1-6.el7                 base         11 k
 libedit               x86_64     3.0-12.20121213cvs.el7      base         92 k
 openssh               x86_64     7.4p1-22.el7_9              updates     510 k
 tcp_wrappers-libs     x86_64     7.6-77.el7                  base         66 k

Transaction Summary
================================================================================
Install  2 Packages (+5 Dependent packages)

Total download size: 1.8 M
Installed size: 5.8 M
Downloading packages:
--------------------------------------------------------------------------------
Total                                              3.9 MB/s | 1.8 MB  00:00     
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
  Installing : fipscheck-1.4.1-6.el7.x86_64                                 1/7 
  Installing : fipscheck-lib-1.4.1-6.el7.x86_64                             2/7 
  Installing : openssh-7.4p1-22.el7_9.x86_64                                3/7 
  Installing : tcp_wrappers-libs-7.6-77.el7.x86_64                          4/7 
  Installing : libedit-3.0-12.20121213cvs.el7.x86_64                        5/7 
  Installing : openssh-clients-7.4p1-22.el7_9.x86_64                        6/7 
  Installing : openssh-server-7.4p1-22.el7_9.x86_64                         7/7 
  Verifying  : fipscheck-lib-1.4.1-6.el7.x86_64                             1/7 
  Verifying  : openssh-server-7.4p1-22.el7_9.x86_64                         2/7 
  Verifying  : fipscheck-1.4.1-6.el7.x86_64                                 3/7 
  Verifying  : libedit-3.0-12.20121213cvs.el7.x86_64                        4/7 
  Verifying  : openssh-clients-7.4p1-22.el7_9.x86_64                        5/7 
  Verifying  : tcp_wrappers-libs-7.6-77.el7.x86_64                          6/7 
  Verifying  : openssh-7.4p1-22.el7_9.x86_64                                7/7 

Installed:
  openssh-clients.x86_64 0:7.4p1-22.el7_9                                       
  openssh-server.x86_64 0:7.4p1-22.el7_9                                        

Dependency Installed:
  fipscheck.x86_64 0:1.4.1-6.el7            fipscheck-lib.x86_64 0:1.4.1-6.el7  
  libedit.x86_64 0:3.0-12.20121213cvs.el7   openssh.x86_64 0:7.4p1-22.el7_9     
  tcp_wrappers-libs.x86_64 0:7.6-77.el7    

Complete!
Removing intermediate container 767b27fd5640
 ---> 99651b80fa14
Step 5/17 : RUN sudo ssh-keygen -A
 ---> Running in 5a67d0ccda4c
ssh-keygen: generating new host keys: RSA1 RSA DSA ECDSA ED25519 
Removing intermediate container 5a67d0ccda4c
 ---> 7e114d6004ae
Step 6/17 : RUN sudo mkdir -p /run/sshd
 ---> Running in 180667fedf98
Removing intermediate container 180667fedf98
 ---> 7088f9a2f83b
Step 7/17 : RUN sudo sed -i "s/.*UsePrivilegeSeparation.*/UsePrivilegeSeparation no/g" /etc/ssh/sshd_config
 ---> Running in 5b42f24acd54
Removing intermediate container 5b42f24acd54
 ---> dd03e9cf3c87
Step 8/17 : RUN sudo sed -i "s/.*PermitUserEnvironment.*/PermitUserEnvironment yes/g" /etc/ssh/sshd_config
 ---> Running in 9ccbcc4e86d4
Removing intermediate container 9ccbcc4e86d4
 ---> 688aa0529f01
Step 9/17 : RUN sudo sed 's@session\s*required\s*pam_loginuid.so@session optional pam_loginuid.so@g' -i /etc/pam.d/sshd
 ---> Running in e1922d2dc64f
Removing intermediate container e1922d2dc64f
 ---> e63115280ffa
Step 10/17 : RUN sudo usermod -d /opt hadoop
 ---> Running in c6ed2cec0b14
Removing intermediate container c6ed2cec0b14
 ---> 718c7b08a14d
Step 11/17 : ADD .ssh /opt/.ssh
 ---> e121c51c12df
Step 12/17 : RUN sudo chown -R hadoop /opt/.ssh
 ---> Running in 9d565e861202
Removing intermediate container 9d565e861202
 ---> e91915e2230e
Step 13/17 : RUN sudo chown hadoop /opt
 ---> Running in 9eab7e3a1b04
Removing intermediate container 9eab7e3a1b04
 ---> baaa9eb4ec23
Step 14/17 : RUN sudo chmod 600 /opt/.ssh/*
 ---> Running in 986d2078c6c7
Removing intermediate container 986d2078c6c7
 ---> 2d60d9c0aac1
Step 15/17 : RUN sudo chmod 700 /opt/.ssh
 ---> Running in 984866f02df9
Removing intermediate container 984866f02df9
 ---> 2b7a5f383053
Step 16/17 : RUN sudo sh -c 'echo "export JAVA_HOME=/usr/lib/jvm/jre/" >> /etc/profile'
 ---> Running in 994422336c3a
Removing intermediate container 994422336c3a
 ---> fbc0ff169192
Step 17/17 : CMD ["sudo","/usr/sbin/sshd","-D"]
 ---> Running in e974a4bf199f
Removing intermediate container e974a4bf199f
 ---> 221b829cfa4e
Successfully built 221b829cfa4e
Successfully tagged ozone-runner-scripts:20230104-1
Image for service datanode was built because it did not already exist. To rebuild this image you must use `docker-compose build` or `docker-compose up --build`.
Creating ozonescripts_datanode_1 ... 
Creating ozonescripts_om_1       ... 
Creating ozonescripts_scm_1      ... 
Host is already in use by another container
Creating ozonescripts_scm_1      ... error

ERROR: for ozonescripts_scm_1  Cannot start service scm: driver failed programming external connectivity on endpoint ozonescripts_scm_1 (b522b0f9ec49cc0567952a1a567d55f8b136f6a759fcc4092cd39e68818bb3b4): Bind for 0.0.0.0:9876 failed: port is already allocated
Host is already in use by another container
Creating ozonescripts_om_1       ... error

ERROR: for ozonescripts_om_1  Cannot start service om: driver failed programming external connectivity on endpoint ozonescripts_om_1 (908dae01f091d00f561cace1d19b8ed72ff70bed5211cbfef781d427feda6695): Bind for 0.0.0.0:9874 failed: port is already allocated
Creating ozonescripts_datanode_1 ... done

ERROR: for scm  Cannot start service scm: driver failed programming external connectivity on endpoint ozonescripts_scm_1 (b522b0f9ec49cc0567952a1a567d55f8b136f6a759fcc4092cd39e68818bb3b4): Bind for 0.0.0.0:9876 failed: port is already allocated

ERROR: for om  Cannot start service om: driver failed programming external connectivity on endpoint ozonescripts_om_1 (908dae01f091d00f561cace1d19b8ed72ff70bed5211cbfef781d427feda6695): Bind for 0.0.0.0:9874 failed: port is already allocated
Encountered errors while bringing up the project.
Stopping ozonescripts_datanode_1 ... 
Stopping ozonescripts_datanode_1 ... done
Removing ozonescripts_scm_1      ... 
Removing ozonescripts_om_1       ... 
Removing ozonescripts_datanode_1 ... 
Removing ozonescripts_scm_1      ... done
Removing ozonescripts_datanode_1 ... done
Removing ozonescripts_om_1       ... done
Removing network ozonescripts_default
ERROR: Test execution of ozonescripts is FAILED!!!!
renamed 'ozonescripts/result/docker-ozonescripts.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/ozonescripts/docker-ozonescripts.log'
Executing test in restart
chown: changing ownership of '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/restart/data/dn2': Operation not permitted
chown: changing ownership of '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/restart/data/s3g': Operation not permitted
chown: changing ownership of '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/restart/data/scm': Operation not permitted
chown: changing ownership of '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/restart/data/dn3': Operation not permitted
chown: changing ownership of '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/restart/data/recon': Operation not permitted
chown: changing ownership of '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/restart/data/dn1': Operation not permitted
chown: changing ownership of '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/restart/data/om': Operation not permitted
chown: changing ownership of '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/restart/data': Operation not permitted
Removing network restart_net
Network restart_net not found.
Creating network "restart_net" with driver "bridge"
Creating restart_om_1 ... 
Creating restart_s3g_1 ... 
Creating restart_recon_1 ... 
Creating restart_scm_1   ... 
Creating restart_dn1_1   ... 
Creating restart_dn3_1   ... 
Creating restart_dn2_1   ... 
Host is already in use by another container
Creating restart_om_1    ... error

ERROR: for restart_om_1  Cannot start service om: driver failed programming external connectivity on endpoint restart_om_1 (8521e968fbf3ac765299e3f01e457d9654e4248798160fc8dcb74ba93432f63c): Bind for 0.0.0.0:9874 failed: port is already allocated
Host is already in use by another container
Creating restart_scm_1   ... error

ERROR: for restart_scm_1  Cannot start service scm: driver failed programming external connectivity on endpoint restart_scm_1 (3af48c53eccc24568b656b8d7458c46e409c76c89e6d5518861e663347dd52e6): Bind for 0.0.0.0:9876 failed: port is already allocated
Host is already in use by another container
Creating restart_recon_1 ... error

ERROR: for restart_recon_1  Cannot start service recon: driver failed programming external connectivity on endpoint restart_recon_1 (bc169b3bc5b7be08eca4f0a23bf73619fa9b1431c68ffe918f093cc9a018e2f1): Bind for 0.0.0.0:9888 failed: port is already allocated
Creating restart_s3g_1   ... done
Creating restart_dn2_1   ... done
Creating restart_dn3_1   ... done
Creating restart_dn1_1   ... done

ERROR: for om  Cannot start service om: driver failed programming external connectivity on endpoint restart_om_1 (8521e968fbf3ac765299e3f01e457d9654e4248798160fc8dcb74ba93432f63c): Bind for 0.0.0.0:9874 failed: port is already allocated

ERROR: for scm  Cannot start service scm: driver failed programming external connectivity on endpoint restart_scm_1 (3af48c53eccc24568b656b8d7458c46e409c76c89e6d5518861e663347dd52e6): Bind for 0.0.0.0:9876 failed: port is already allocated

ERROR: for recon  Cannot start service recon: driver failed programming external connectivity on endpoint restart_recon_1 (bc169b3bc5b7be08eca4f0a23bf73619fa9b1431c68ffe918f093cc9a018e2f1): Bind for 0.0.0.0:9888 failed: port is already allocated
Encountered errors while bringing up the project.
Stopping restart_dn3_1 ... 
Stopping restart_dn2_1 ... 
Stopping restart_dn1_1 ... 
Stopping restart_s3g_1 ... 
Stopping restart_s3g_1 ... done
Stopping restart_dn1_1 ... done
Stopping restart_dn3_1 ... done
Stopping restart_dn2_1 ... done
Removing restart_dn3_1   ... 
Removing restart_recon_1 ... 
Removing restart_dn2_1   ... 
Removing restart_scm_1   ... 
Removing restart_dn1_1   ... 
Removing restart_s3g_1   ... 
Removing restart_om_1    ... 
Removing restart_om_1    ... done
Removing restart_scm_1   ... done
Removing restart_recon_1 ... done
Removing restart_dn3_1   ... done
Removing restart_dn1_1   ... done
Removing restart_s3g_1   ... done
Removing restart_dn2_1   ... done
Removing network restart_net
ERROR: Test execution of restart is FAILED!!!!
renamed 'restart/result/docker-restart.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/restart/docker-restart.log'
Exception in thread "main" java.net.SocketException: Socket closed
	at java.base/java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.base/java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:474)
	at java.base/java.net.ServerSocket.implAccept(ServerSocket.java:565)
	at java.base/java.net.ServerSocket.accept(ServerSocket.java:533)
	at org.apache.hadoop.test.JacocoServer.main(JacocoServer.java:60)
Log:     /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/log.html
Report:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.4.0-SNAPSHOT/compose/result/report.html
