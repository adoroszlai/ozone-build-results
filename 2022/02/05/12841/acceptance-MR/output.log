rm: cannot remove '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/*': No such file or directory
Executing test in ozone-mr
rm: cannot remove '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/*': No such file or directory
Executing test in hadoop27
--no-ansi option is deprecated and will be removed in future versions. Use `--ansi never` instead.
Removing network hadoop27_default
Network hadoop27_default not found.
--no-ansi option is deprecated and will be removed in future versions. Use `--ansi never` instead.
Creating network "hadoop27_default" with the default driver
Pulling datanode (apache/ozone-runner:20211202-1)...
20211202-1: Pulling from apache/ozone-runner
Digest: sha256:5f9d1c2f3efa9b73e5a1549c90cb4b3f9a5229b8712084ac50af6af61c3331a1
Status: Downloaded newer image for apache/ozone-runner:20211202-1
Pulling rm (flokkr/hadoop:2.7.3)...
2.7.3: Pulling from flokkr/hadoop
Digest: sha256:e791dc9bfa858e24443e1f1d70bfacf8382e0b8b9c4063fee38a460c26967b8e
Status: Downloaded newer image for flokkr/hadoop:2.7.3
Creating hadoop27_s3g_1 ... 
Creating hadoop27_nm_1  ... 
Creating hadoop27_scm_1 ... 
Creating hadoop27_om_1  ... 
Creating hadoop27_datanode_1 ... 
Creating hadoop27_datanode_2 ... 
Creating hadoop27_datanode_3 ... 
Creating hadoop27_rm_1       ... 
Creating hadoop27_nm_1       ... done
Creating hadoop27_s3g_1      ... done
Creating hadoop27_scm_1      ... done
Creating hadoop27_datanode_3 ... done
Creating hadoop27_datanode_2 ... done
Creating hadoop27_om_1       ... done
Creating hadoop27_datanode_1 ... done
Creating hadoop27_rm_1       ... done
SECONDS: 43
com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.18.0.5 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy19.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.18.0.5:9860 after 1 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.18.0.5 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy19.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.18.0.5:9860 after 2 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.18.0.5 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy19.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.18.0.5:9860 after 3 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.ratis.ServerNotLeaderException): Server:665ace37-903f-43b5-a76e-c7273914d560 is not the leader. Could not determine the leader node. at org.apache.hadoop.hdds.ratis.ServerNotLeaderException.convertToNotLeaderException(ServerNotLeaderException.java:109) at org.apache.hadoop.hdds.scm.ha.RatisUtil.checkRatisException(RatisUtil.java:245) at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:169) at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:60718) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:466) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:574) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:552) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1035) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:963) at java.base/java.security.AccessController.doPrivileged(Native Method) at java.base/javax.security.auth.Subject.doAs(Subject.java:423) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2966) , while invoking $Proxy19.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.18.0.5:9860 after 4 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.ratis.ServerNotLeaderException): Server:665ace37-903f-43b5-a76e-c7273914d560 is not the leader. Could not determine the leader node. at org.apache.hadoop.hdds.ratis.ServerNotLeaderException.convertToNotLeaderException(ServerNotLeaderException.java:109) at org.apache.hadoop.hdds.scm.ha.RatisUtil.checkRatisException(RatisUtil.java:245) at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:169) at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:60718) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:466) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:574) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:552) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1035) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:963) at java.base/java.security.AccessController.doPrivileged(Native Method) at java.base/javax.security.auth.Subject.doAs(Subject.java:423) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2966) , while invoking $Proxy19.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.18.0.5:9860 after 5 failover attempts. Trying to failover after sleeping for 2000ms. SCM is in safe mode. validated:false, DataNodeSafeModeRule, registered datanodes (=0) >= required datanodes (=3) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:true, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=0)
SECONDS: 57
SCM is in safe mode. validated:true, DataNodeSafeModeRule, registered datanodes (=3) >= required datanodes (=3) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:true, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=0)
SECONDS: 63
SCM is out of safe mode.
Safe mode is off
No OM HA service, no need to wait
==============================================================================
Createmrenv :: Create directories required for MR test                        
==============================================================================
Create test volume, bucket and key                                    | PASS |
------------------------------------------------------------------------------
Create user dir for hadoop                                            | PASS |
------------------------------------------------------------------------------
Createmrenv :: Create directories required for MR test                | PASS |
2 tests, 2 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop27/result/robot-hadoop27-hadoop27-createmrenv-scm.xml
ls: cannot access '/var/log/hadoop': No such file or directory
ls: cannot access '/var/log/hadoop': No such file or directory
==============================================================================
hadoopfs-o3fs :: Test ozone fs with hadoopfs                                  
==============================================================================
Test hadoop dfs                                                       | PASS |
------------------------------------------------------------------------------
hadoopfs-o3fs :: Test ozone fs with hadoopfs                          | PASS |
1 critical test, 1 passed, 0 failed
1 test total, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop27/result/robot-hadoop27-hadoop27-createmrenv-scm-1.xml
ls: cannot access '/var/log/hadoop': No such file or directory
ls: cannot access '/var/log/hadoop': No such file or directory
==============================================================================
mapreduce-o3fs :: Execute MR jobs                                             
==============================================================================
Execute PI calculation                                                | PASS |
------------------------------------------------------------------------------
Execute WordCount                                                     | PASS |
------------------------------------------------------------------------------
mapreduce-o3fs :: Execute MR jobs                                     | PASS |
2 critical tests, 2 passed, 0 failed
2 tests total, 2 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop27/result/robot-hadoop27-hadoop27-createmrenv-scm-2.xml
ls: cannot access '/var/log/hadoop': No such file or directory
ls: cannot access '/var/log/hadoop': No such file or directory
==============================================================================
hadoopfs-ofs :: Test ozone fs with hadoopfs                                   
==============================================================================
Test hadoop dfs                                                       | PASS |
------------------------------------------------------------------------------
hadoopfs-ofs :: Test ozone fs with hadoopfs                           | PASS |
1 critical test, 1 passed, 0 failed
1 test total, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop27/result/robot-hadoop27-hadoop27-createmrenv-scm-3.xml
ls: cannot access '/var/log/hadoop': No such file or directory
ls: cannot access '/var/log/hadoop': No such file or directory
==============================================================================
mapreduce-ofs :: Execute MR jobs                                              
==============================================================================
Execute PI calculation                                                | PASS |
------------------------------------------------------------------------------
Execute WordCount                                                     | PASS |
------------------------------------------------------------------------------
mapreduce-ofs :: Execute MR jobs                                      | PASS |
2 critical tests, 2 passed, 0 failed
2 tests total, 2 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop27/result/robot-hadoop27-hadoop27-createmrenv-scm-4.xml
ls: cannot access '/var/log/hadoop': No such file or directory
ls: cannot access '/var/log/hadoop': No such file or directory
--no-ansi option is deprecated and will be removed in future versions. Use `--ansi never` instead.
--no-ansi option is deprecated and will be removed in future versions. Use `--ansi never` instead.
Stopping hadoop27_datanode_2 ... 
Stopping hadoop27_rm_1       ... 
Stopping hadoop27_datanode_3 ... 
Stopping hadoop27_datanode_1 ... 
Stopping hadoop27_om_1       ... 
Stopping hadoop27_scm_1      ... 
Stopping hadoop27_s3g_1      ... 
Stopping hadoop27_nm_1       ... 
Stopping hadoop27_rm_1       ... done
Stopping hadoop27_nm_1       ... done
Stopping hadoop27_s3g_1      ... done
Stopping hadoop27_om_1       ... done
Stopping hadoop27_scm_1      ... done
Stopping hadoop27_datanode_3 ... done
Stopping hadoop27_datanode_1 ... done
Stopping hadoop27_datanode_2 ... done
Removing hadoop27_datanode_2 ... 
Removing hadoop27_rm_1       ... 
Removing hadoop27_datanode_3 ... 
Removing hadoop27_datanode_1 ... 
Removing hadoop27_om_1       ... 
Removing hadoop27_scm_1      ... 
Removing hadoop27_s3g_1      ... 
Removing hadoop27_nm_1       ... 
Removing hadoop27_datanode_3 ... done
Removing hadoop27_datanode_2 ... done
Removing hadoop27_datanode_1 ... done
Removing hadoop27_om_1       ... done
Removing hadoop27_rm_1       ... done
Removing hadoop27_scm_1      ... done
Removing hadoop27_s3g_1      ... done
Removing hadoop27_nm_1       ... done
Removing network hadoop27_default
Log:     /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/hadoop27/result/log.html
Report:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/hadoop27/result/report.html
Output:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/hadoop27.xml
Executing test in hadoop31
--no-ansi option is deprecated and will be removed in future versions. Use `--ansi never` instead.
Removing network hadoop31_default
Network hadoop31_default not found.
--no-ansi option is deprecated and will be removed in future versions. Use `--ansi never` instead.
Creating network "hadoop31_default" with the default driver
Pulling rm (flokkr/hadoop:3.1.2)...
3.1.2: Pulling from flokkr/hadoop
Digest: sha256:1a24784735a3f243d7c0b2d1f49e74c42bb2ae8d7fc0f24aca2c740875f379f5
Status: Downloaded newer image for flokkr/hadoop:3.1.2
Creating hadoop31_datanode_1 ... 
Creating hadoop31_datanode_2 ... 
Creating hadoop31_datanode_3 ... 
Creating hadoop31_om_1       ... 
Creating hadoop31_nm_1       ... 
Creating hadoop31_rm_1       ... 
Creating hadoop31_scm_1      ... 
Creating hadoop31_s3g_1      ... 
Creating hadoop31_datanode_3 ... done
Creating hadoop31_datanode_1 ... done
Creating hadoop31_rm_1       ... done
Creating hadoop31_om_1       ... done
Creating hadoop31_s3g_1      ... done
Creating hadoop31_nm_1       ... done
Creating hadoop31_scm_1      ... done
Creating hadoop31_datanode_2 ... done
SECONDS: 46
com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.19.0.6 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy19.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.19.0.6:9860 after 1 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.19.0.6 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy19.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.19.0.6:9860 after 2 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.19.0.6 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy19.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.19.0.6:9860 after 3 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.19.0.6 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy19.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.19.0.6:9860 after 4 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.ratis.ServerNotLeaderException): Server:d96d6f9a-4839-4afc-8143-f20fd20500e1 is not the leader. Could not determine the leader node. at org.apache.hadoop.hdds.ratis.ServerNotLeaderException.convertToNotLeaderException(ServerNotLeaderException.java:109) at org.apache.hadoop.hdds.scm.ha.RatisUtil.checkRatisException(RatisUtil.java:245) at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:169) at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:60718) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:466) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:574) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:552) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1035) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:963) at java.base/java.security.AccessController.doPrivileged(Native Method) at java.base/javax.security.auth.Subject.doAs(Subject.java:423) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2966) , while invoking $Proxy19.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.19.0.6:9860 after 5 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.ratis.ServerNotLeaderException): Server:d96d6f9a-4839-4afc-8143-f20fd20500e1 is not the leader. Could not determine the leader node. at org.apache.hadoop.hdds.ratis.ServerNotLeaderException.convertToNotLeaderException(ServerNotLeaderException.java:109) at org.apache.hadoop.hdds.scm.ha.RatisUtil.checkRatisException(RatisUtil.java:245) at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:169) at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:60718) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:466) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:574) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:552) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1035) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:963) at java.base/java.security.AccessController.doPrivileged(Native Method) at java.base/javax.security.auth.Subject.doAs(Subject.java:423) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2966) , while invoking $Proxy19.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.19.0.6:9860 after 6 failover attempts. Trying to failover after sleeping for 2000ms. SCM is in safe mode. validated:false, DataNodeSafeModeRule, registered datanodes (=0) >= required datanodes (=3) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:true, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=0)
SECONDS: 58
SCM is in safe mode. validated:true, DataNodeSafeModeRule, registered datanodes (=3) >= required datanodes (=3) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:true, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=0)
SECONDS: 65
SCM is out of safe mode.
Safe mode is off
No OM HA service, no need to wait
==============================================================================
Createmrenv :: Create directories required for MR test                        
==============================================================================
Create test volume, bucket and key                                    | PASS |
------------------------------------------------------------------------------
Create user dir for hadoop                                            | PASS |
------------------------------------------------------------------------------
Createmrenv :: Create directories required for MR test                | PASS |
2 tests, 2 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop31/result/robot-hadoop31-hadoop31-createmrenv-scm.xml
ls: cannot access '/var/log/hadoop': No such file or directory
ls: cannot access '/var/log/hadoop': No such file or directory
==============================================================================
hadoopfs-o3fs :: Test ozone fs with hadoopfs                                  
==============================================================================
Test hadoop dfs                                                       | PASS |
------------------------------------------------------------------------------
hadoopfs-o3fs :: Test ozone fs with hadoopfs                          | PASS |
1 critical test, 1 passed, 0 failed
1 test total, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop31/result/robot-hadoop31-hadoop31-createmrenv-scm-1.xml
ls: cannot access '/var/log/hadoop': No such file or directory
ls: cannot access '/var/log/hadoop': No such file or directory
==============================================================================
mapreduce-o3fs :: Execute MR jobs                                             
==============================================================================
Execute PI calculation                                                | PASS |
------------------------------------------------------------------------------
Execute WordCount                                                     | PASS |
------------------------------------------------------------------------------
mapreduce-o3fs :: Execute MR jobs                                     | PASS |
2 critical tests, 2 passed, 0 failed
2 tests total, 2 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop31/result/robot-hadoop31-hadoop31-createmrenv-scm-2.xml
ls: cannot access '/var/log/hadoop': No such file or directory
ls: cannot access '/var/log/hadoop': No such file or directory
==============================================================================
hadoopfs-ofs :: Test ozone fs with hadoopfs                                   
==============================================================================
Test hadoop dfs                                                       | PASS |
------------------------------------------------------------------------------
hadoopfs-ofs :: Test ozone fs with hadoopfs                           | PASS |
1 critical test, 1 passed, 0 failed
1 test total, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop31/result/robot-hadoop31-hadoop31-createmrenv-scm-3.xml
ls: cannot access '/var/log/hadoop': No such file or directory
ls: cannot access '/var/log/hadoop': No such file or directory
==============================================================================
mapreduce-ofs :: Execute MR jobs                                              
==============================================================================
Execute PI calculation                                                | PASS |
------------------------------------------------------------------------------
Execute WordCount                                                     | PASS |
------------------------------------------------------------------------------
mapreduce-ofs :: Execute MR jobs                                      | PASS |
2 critical tests, 2 passed, 0 failed
2 tests total, 2 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop31/result/robot-hadoop31-hadoop31-createmrenv-scm-4.xml
ls: cannot access '/var/log/hadoop': No such file or directory
ls: cannot access '/var/log/hadoop': No such file or directory
--no-ansi option is deprecated and will be removed in future versions. Use `--ansi never` instead.
--no-ansi option is deprecated and will be removed in future versions. Use `--ansi never` instead.
Stopping hadoop31_s3g_1      ... 
Stopping hadoop31_rm_1       ... 
Stopping hadoop31_nm_1       ... 
Stopping hadoop31_scm_1      ... 
Stopping hadoop31_datanode_2 ... 
Stopping hadoop31_datanode_1 ... 
Stopping hadoop31_om_1       ... 
Stopping hadoop31_datanode_3 ... 
Stopping hadoop31_rm_1       ... done
Stopping hadoop31_nm_1       ... done
Stopping hadoop31_s3g_1      ... done
Stopping hadoop31_om_1       ... done
Stopping hadoop31_scm_1      ... done
Stopping hadoop31_datanode_1 ... done
Stopping hadoop31_datanode_2 ... done
Stopping hadoop31_datanode_3 ... done
Removing hadoop31_s3g_1      ... 
Removing hadoop31_rm_1       ... 
Removing hadoop31_nm_1       ... 
Removing hadoop31_scm_1      ... 
Removing hadoop31_datanode_2 ... 
Removing hadoop31_datanode_1 ... 
Removing hadoop31_om_1       ... 
Removing hadoop31_datanode_3 ... 
Removing hadoop31_rm_1       ... done
Removing hadoop31_s3g_1      ... done
Removing hadoop31_datanode_2 ... done
Removing hadoop31_datanode_1 ... done
Removing hadoop31_scm_1      ... done
Removing hadoop31_datanode_3 ... done
Removing hadoop31_om_1       ... done
Removing hadoop31_nm_1       ... done
Removing network hadoop31_default
Log:     /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/hadoop31/result/log.html
Report:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/hadoop31/result/report.html
Untagged: flokkr/hadoop:3.1.2
Untagged: flokkr/hadoop@sha256:1a24784735a3f243d7c0b2d1f49e74c42bb2ae8d7fc0f24aca2c740875f379f5
Deleted: sha256:16c3587f922f8fb5e1b0ac05de821efd30d04d85836aaa10a2df79dd1f92f615
Deleted: sha256:010620410c1e290373202ccc6f4442d3354cef0923d714584b73d0e736f2c205
Deleted: sha256:58dbdfa32985cd3e46f4e5850b907165cce65888d72bdfb664296c1f522323f6
Deleted: sha256:6b56022c9f422dc0caf5f6f96ae46bcf482a8d5447868cf8dee4d40dc87c965c
Deleted: sha256:26cbf04863ce6238d4bd93150f7072cd4c4d1a1914970abd8ba9fc2ea2b3a947
Deleted: sha256:ac193886605465fa3803c944393eb4d1717cca0dffd84a3dc692b1871974f205
Deleted: sha256:6b9224926483f93910c167e35e2cf0a186c2203cff0a71fc19986a6db3033750
Output:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/hadoop31.xml
Executing test in hadoop32
--no-ansi option is deprecated and will be removed in future versions. Use `--ansi never` instead.
Removing network hadoop32_default
Network hadoop32_default not found.
--no-ansi option is deprecated and will be removed in future versions. Use `--ansi never` instead.
Creating network "hadoop32_default" with the default driver
Pulling rm (flokkr/hadoop:3.2.2)...
3.2.2: Pulling from flokkr/hadoop
Digest: sha256:958a6c5a3af4a01b3347ccc57052df78033e401fd9dff965148b0939782e2c9e
Status: Downloaded newer image for flokkr/hadoop:3.2.2
Creating hadoop32_om_1 ... 
Creating hadoop32_nm_1 ... 
Creating hadoop32_rm_1 ... 
Creating hadoop32_datanode_1 ... 
Creating hadoop32_s3g_1      ... 
Creating hadoop32_datanode_2 ... 
Creating hadoop32_datanode_3 ... 
Creating hadoop32_scm_1      ... 
Creating hadoop32_om_1       ... done
Creating hadoop32_s3g_1      ... done
Creating hadoop32_datanode_2 ... done
Creating hadoop32_nm_1       ... done
Creating hadoop32_rm_1       ... done
Creating hadoop32_datanode_1 ... done
Creating hadoop32_datanode_3 ... done
Creating hadoop32_scm_1      ... done
SECONDS: 52
com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.20.0.7 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.20.0.7:9860 after 1 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.20.0.7 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.20.0.7:9860 after 2 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.20.0.7 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.20.0.7:9860 after 3 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.20.0.7 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.20.0.7:9860 after 4 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.ratis.ServerNotLeaderException): Server:f4368589-ed65-4935-a1c9-990c22f2b547 is not the leader. Could not determine the leader node. at org.apache.hadoop.hdds.ratis.ServerNotLeaderException.convertToNotLeaderException(ServerNotLeaderException.java:109) at org.apache.hadoop.hdds.scm.ha.RatisUtil.checkRatisException(RatisUtil.java:245) at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:169) at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:60718) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:466) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:574) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:552) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1035) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:963) at java.base/java.security.AccessController.doPrivileged(Native Method) at java.base/javax.security.auth.Subject.doAs(Subject.java:423) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2966) , while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.20.0.7:9860 after 5 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.ratis.ServerNotLeaderException): Server:f4368589-ed65-4935-a1c9-990c22f2b547 is not the leader. Could not determine the leader node. at org.apache.hadoop.hdds.ratis.ServerNotLeaderException.convertToNotLeaderException(ServerNotLeaderException.java:109) at org.apache.hadoop.hdds.scm.ha.RatisUtil.checkRatisException(RatisUtil.java:245) at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:169) at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:60718) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:466) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:574) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:552) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1035) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:963) at java.base/java.security.AccessController.doPrivileged(Native Method) at java.base/javax.security.auth.Subject.doAs(Subject.java:423) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2966) , while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.20.0.7:9860 after 6 failover attempts. Trying to failover after sleeping for 2000ms. SCM is in safe mode. validated:true, DataNodeSafeModeRule, registered datanodes (=3) >= required datanodes (=3) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:true, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=0)
SECONDS: 65
SCM is in safe mode. validated:true, DataNodeSafeModeRule, registered datanodes (=3) >= required datanodes (=3) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:true, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=0)
SECONDS: 73
SCM is out of safe mode.
Safe mode is off
No OM HA service, no need to wait
==============================================================================
Createmrenv :: Create directories required for MR test                        
==============================================================================
Create test volume, bucket and key                                    | PASS |
------------------------------------------------------------------------------
Create user dir for hadoop                                            | PASS |
------------------------------------------------------------------------------
Createmrenv :: Create directories required for MR test                | PASS |
2 tests, 2 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop32/result/robot-hadoop32-hadoop32-createmrenv-scm.xml
ls: cannot access '/var/log/hadoop': No such file or directory
ls: cannot access '/var/log/hadoop': No such file or directory
==============================================================================
hadoopfs-o3fs :: Test ozone fs with hadoopfs                                  
==============================================================================
Test hadoop dfs                                                       | PASS |
------------------------------------------------------------------------------
hadoopfs-o3fs :: Test ozone fs with hadoopfs                          | PASS |
1 critical test, 1 passed, 0 failed
1 test total, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop32/result/robot-hadoop32-hadoop32-createmrenv-scm-1.xml
ls: cannot access '/var/log/hadoop': No such file or directory
ls: cannot access '/var/log/hadoop': No such file or directory
==============================================================================
mapreduce-o3fs :: Execute MR jobs                                             
==============================================================================
Execute PI calculation                                                | PASS |
------------------------------------------------------------------------------
Execute WordCount                                                     | PASS |
------------------------------------------------------------------------------
mapreduce-o3fs :: Execute MR jobs                                     | PASS |
2 critical tests, 2 passed, 0 failed
2 tests total, 2 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop32/result/robot-hadoop32-hadoop32-createmrenv-scm-2.xml
ls: cannot access '/var/log/hadoop': No such file or directory
ls: cannot access '/var/log/hadoop': No such file or directory
==============================================================================
hadoopfs-ofs :: Test ozone fs with hadoopfs                                   
==============================================================================
Test hadoop dfs                                                       | PASS |
------------------------------------------------------------------------------
hadoopfs-ofs :: Test ozone fs with hadoopfs                           | PASS |
1 critical test, 1 passed, 0 failed
1 test total, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop32/result/robot-hadoop32-hadoop32-createmrenv-scm-3.xml
ls: cannot access '/var/log/hadoop': No such file or directory
ls: cannot access '/var/log/hadoop': No such file or directory
==============================================================================
mapreduce-ofs :: Execute MR jobs                                              
==============================================================================
Execute PI calculation                                                | PASS |
------------------------------------------------------------------------------
Execute WordCount                                                     | PASS |
------------------------------------------------------------------------------
mapreduce-ofs :: Execute MR jobs                                      | PASS |
2 critical tests, 2 passed, 0 failed
2 tests total, 2 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop32/result/robot-hadoop32-hadoop32-createmrenv-scm-4.xml
ls: cannot access '/var/log/hadoop': No such file or directory
ls: cannot access '/var/log/hadoop': No such file or directory
--no-ansi option is deprecated and will be removed in future versions. Use `--ansi never` instead.
--no-ansi option is deprecated and will be removed in future versions. Use `--ansi never` instead.
Stopping hadoop32_datanode_3 ... 
Stopping hadoop32_datanode_2 ... 
Stopping hadoop32_scm_1      ... 
Stopping hadoop32_s3g_1      ... 
Stopping hadoop32_datanode_1 ... 
Stopping hadoop32_nm_1       ... 
Stopping hadoop32_rm_1       ... 
Stopping hadoop32_om_1       ... 
Stopping hadoop32_rm_1       ... done
Stopping hadoop32_nm_1       ... done
Stopping hadoop32_s3g_1      ... done
Stopping hadoop32_om_1       ... done
Stopping hadoop32_scm_1      ... done
Stopping hadoop32_datanode_2 ... done
Stopping hadoop32_datanode_1 ... done
Stopping hadoop32_datanode_3 ... done
Removing hadoop32_datanode_3 ... 
Removing hadoop32_datanode_2 ... 
Removing hadoop32_scm_1      ... 
Removing hadoop32_s3g_1      ... 
Removing hadoop32_datanode_1 ... 
Removing hadoop32_nm_1       ... 
Removing hadoop32_rm_1       ... 
Removing hadoop32_om_1       ... 
Removing hadoop32_rm_1       ... done
Removing hadoop32_om_1       ... done
Removing hadoop32_scm_1      ... done
Removing hadoop32_datanode_2 ... done
Removing hadoop32_s3g_1      ... done
Removing hadoop32_datanode_3 ... done
Removing hadoop32_nm_1       ... done
Removing hadoop32_datanode_1 ... done
Removing network hadoop32_default
Log:     /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/hadoop32/result/log.html
Report:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/hadoop32/result/report.html
Output:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/hadoop32.xml
Executing test in hadoop33
--no-ansi option is deprecated and will be removed in future versions. Use `--ansi never` instead.
Removing network hadoop33_default
Network hadoop33_default not found.
--no-ansi option is deprecated and will be removed in future versions. Use `--ansi never` instead.
Creating network "hadoop33_default" with the default driver
Pulling rm (flokkr/hadoop:3.3.1)...
3.3.1: Pulling from flokkr/hadoop
Digest: sha256:2dd21ee3789687f6c297b43d618a0ff2b7ffd9e8a97a77b08643603ab8c3556d
Status: Downloaded newer image for flokkr/hadoop:3.3.1
Creating hadoop33_om_1 ... 
Creating hadoop33_datanode_1 ... 
Creating hadoop33_datanode_2 ... 
Creating hadoop33_datanode_3 ... 
Creating hadoop33_s3g_1      ... 
Creating hadoop33_scm_1      ... 
Creating hadoop33_rm_1       ... 
Creating hadoop33_nm_1       ... 
Creating hadoop33_datanode_1 ... done
Creating hadoop33_om_1       ... done
Creating hadoop33_datanode_3 ... done
Creating hadoop33_datanode_2 ... done
Creating hadoop33_scm_1      ... done
Creating hadoop33_nm_1       ... done
Creating hadoop33_s3g_1      ... done
Creating hadoop33_rm_1       ... done
SECONDS: 51
com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.21.0.3 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.21.0.3:9860 after 1 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.21.0.3 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.21.0.3:9860 after 2 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.21.0.3 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.21.0.3:9860 after 3 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.21.0.3 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.21.0.3:9860 after 4 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.ratis.ServerNotLeaderException): Server:39287365-e035-4892-9f7f-2ff93a2831f1 is not the leader. Could not determine the leader node. at org.apache.hadoop.hdds.ratis.ServerNotLeaderException.convertToNotLeaderException(ServerNotLeaderException.java:109) at org.apache.hadoop.hdds.scm.ha.RatisUtil.checkRatisException(RatisUtil.java:245) at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:169) at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:60718) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:466) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:574) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:552) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1035) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:963) at java.base/java.security.AccessController.doPrivileged(Native Method) at java.base/javax.security.auth.Subject.doAs(Subject.java:423) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2966) , while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.21.0.3:9860 after 5 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.ratis.ServerNotLeaderException): Server:39287365-e035-4892-9f7f-2ff93a2831f1 is not the leader. Could not determine the leader node. at org.apache.hadoop.hdds.ratis.ServerNotLeaderException.convertToNotLeaderException(ServerNotLeaderException.java:109) at org.apache.hadoop.hdds.scm.ha.RatisUtil.checkRatisException(RatisUtil.java:245) at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:169) at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:60718) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:466) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:574) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:552) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1035) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:963) at java.base/java.security.AccessController.doPrivileged(Native Method) at java.base/javax.security.auth.Subject.doAs(Subject.java:423) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2966) , while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.21.0.3:9860 after 6 failover attempts. Trying to failover after sleeping for 2000ms. SCM is in safe mode. validated:true, DataNodeSafeModeRule, registered datanodes (=3) >= required datanodes (=3) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:true, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=0)
SECONDS: 65
SCM is out of safe mode.
Safe mode is off
No OM HA service, no need to wait
==============================================================================
Createmrenv :: Create directories required for MR test                        
==============================================================================
Create test volume, bucket and key                                    | PASS |
------------------------------------------------------------------------------
Create user dir for hadoop                                            | PASS |
------------------------------------------------------------------------------
Createmrenv :: Create directories required for MR test                | PASS |
2 tests, 2 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop33/result/robot-hadoop33-hadoop33-createmrenv-scm.xml
ls: cannot access '/var/log/hadoop': No such file or directory
ls: cannot access '/var/log/hadoop': No such file or directory
==============================================================================
hadoopfs-o3fs :: Test ozone fs with hadoopfs                                  
==============================================================================
Test hadoop dfs                                                       | PASS |
------------------------------------------------------------------------------
hadoopfs-o3fs :: Test ozone fs with hadoopfs                          | PASS |
1 critical test, 1 passed, 0 failed
1 test total, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop33/result/robot-hadoop33-hadoop33-createmrenv-scm-1.xml
ls: cannot access '/var/log/hadoop': No such file or directory
ls: cannot access '/var/log/hadoop': No such file or directory
==============================================================================
mapreduce-o3fs :: Execute MR jobs                                             
==============================================================================
Execute PI calculation                                                | PASS |
------------------------------------------------------------------------------
Execute WordCount                                                     | PASS |
------------------------------------------------------------------------------
mapreduce-o3fs :: Execute MR jobs                                     | PASS |
2 critical tests, 2 passed, 0 failed
2 tests total, 2 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop33/result/robot-hadoop33-hadoop33-createmrenv-scm-2.xml
ls: cannot access '/var/log/hadoop': No such file or directory
ls: cannot access '/var/log/hadoop': No such file or directory
==============================================================================
hadoopfs-ofs :: Test ozone fs with hadoopfs                                   
==============================================================================
Test hadoop dfs                                                       | PASS |
------------------------------------------------------------------------------
hadoopfs-ofs :: Test ozone fs with hadoopfs                           | PASS |
1 critical test, 1 passed, 0 failed
1 test total, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop33/result/robot-hadoop33-hadoop33-createmrenv-scm-3.xml
ls: cannot access '/var/log/hadoop': No such file or directory
ls: cannot access '/var/log/hadoop': No such file or directory
==============================================================================
mapreduce-ofs :: Execute MR jobs                                              
==============================================================================
Execute PI calculation                                                | PASS |
------------------------------------------------------------------------------
Execute WordCount                                                     | PASS |
------------------------------------------------------------------------------
mapreduce-ofs :: Execute MR jobs                                      | PASS |
2 critical tests, 2 passed, 0 failed
2 tests total, 2 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop33/result/robot-hadoop33-hadoop33-createmrenv-scm-4.xml
ls: cannot access '/var/log/hadoop': No such file or directory
ls: cannot access '/var/log/hadoop': No such file or directory
--no-ansi option is deprecated and will be removed in future versions. Use `--ansi never` instead.
--no-ansi option is deprecated and will be removed in future versions. Use `--ansi never` instead.
Stopping hadoop33_nm_1       ... 
Stopping hadoop33_datanode_3 ... 
Stopping hadoop33_s3g_1      ... 
Stopping hadoop33_rm_1       ... 
Stopping hadoop33_datanode_1 ... 
Stopping hadoop33_datanode_2 ... 
Stopping hadoop33_scm_1      ... 
Stopping hadoop33_om_1       ... 
Stopping hadoop33_nm_1       ... done
Stopping hadoop33_rm_1       ... done
Stopping hadoop33_s3g_1      ... done
Stopping hadoop33_om_1       ... done
Stopping hadoop33_scm_1      ... done
Stopping hadoop33_datanode_3 ... done
Stopping hadoop33_datanode_2 ... done
Stopping hadoop33_datanode_1 ... done
Removing hadoop33_nm_1       ... 
Removing hadoop33_datanode_3 ... 
Removing hadoop33_s3g_1      ... 
Removing hadoop33_rm_1       ... 
Removing hadoop33_datanode_1 ... 
Removing hadoop33_datanode_2 ... 
Removing hadoop33_scm_1      ... 
Removing hadoop33_om_1       ... 
Removing hadoop33_s3g_1      ... done
Removing hadoop33_om_1       ... done
Removing hadoop33_rm_1       ... done
Removing hadoop33_datanode_1 ... done
Removing hadoop33_scm_1      ... done
Removing hadoop33_datanode_2 ... done
Removing hadoop33_datanode_3 ... done
Removing hadoop33_nm_1       ... done
Removing network hadoop33_default
Log:     /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/hadoop33/result/log.html
Report:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/hadoop33/result/report.html
Output:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/hadoop33.xml
Log:     /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/log.html
Report:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/report.html
Output:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozone-mr.xml
Executing test in ozonesecure-mr
--no-ansi option is deprecated and will be removed in future versions. Use `--ansi never` instead.
Removing network ozone
Network ozone not found.
--no-ansi option is deprecated and will be removed in future versions. Use `--ansi never` instead.
Creating network "ozone" with the default driver
Pulling kdc (apache/ozone-testkrb5:20210419-1)...
20210419-1: Pulling from apache/ozone-testkrb5
Digest: sha256:ba7a04b9f7605b9ac64f34400f426f1e9938ad2b5be93365685097ba962ed19a
Status: Downloaded newer image for apache/ozone-testkrb5:20210419-1
Creating ozonesecure-mr_datanode_1 ... 
Creating ozonesecure-mr_datanode_2 ... 
Creating ozonesecure-mr_datanode_3 ... 
Creating ozonesecure-mr_om_1       ... 
Creating ozonesecure-mr_kdc_1      ... 
Creating ozonesecure-mr_kms_1      ... 
Creating ozonesecure-mr_nm_1       ... 
Creating ozonesecure-mr_scm_1      ... 
Creating ozonesecure-mr_s3g_1      ... 
Creating jhs                       ... 
Creating ozonesecure-mr_rm_1       ... 
Creating ozonesecure-mr_kdc_1      ... done
Creating ozonesecure-mr_datanode_2 ... done
Creating ozonesecure-mr_datanode_1 ... done
Creating ozonesecure-mr_nm_1       ... done
Creating ozonesecure-mr_scm_1      ... done
Creating ozonesecure-mr_datanode_3 ... done
Creating ozonesecure-mr_om_1       ... done
Creating ozonesecure-mr_kms_1      ... done
Creating jhs                       ... done
Creating ozonesecure-mr_rm_1       ... done
Creating ozonesecure-mr_s3g_1      ... done
ozone.scm.client.address should be set in ozone-site.xml or with the --scm option
SECONDS: 17

SECONDS: 77
com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.22.0.11 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.22.0.11:9860 after 1 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.22.0.11 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.22.0.11:9860 after 2 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.22.0.11 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.22.0.11:9860 after 3 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.22.0.11 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.22.0.11:9860 after 4 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.22.0.11 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.22.0.11:9860 after 5 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.22.0.11 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.22.0.11:9860 after 6 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.22.0.11 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.22.0.11:9860 after 7 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.22.0.11 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.22.0.11:9860 after 8 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.ratis.ServerNotLeaderException): Server:fd15814c-75ac-4e15-8423-88f2b548658d is not the leader. Could not determine the leader node. at org.apache.hadoop.hdds.ratis.ServerNotLeaderException.convertToNotLeaderException(ServerNotLeaderException.java:109) at org.apache.hadoop.hdds.scm.ha.RatisUtil.checkRatisException(RatisUtil.java:245) at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:169) at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:60718) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:466) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:574) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:552) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1035) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:963) at java.base/java.security.AccessController.doPrivileged(Native Method) at java.base/javax.security.auth.Subject.doAs(Subject.java:423) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2966) , while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.22.0.11:9860 after 9 failover attempts. Trying to failover after sleeping for 2000ms. SCM is in safe mode. validated:false, DataNodeSafeModeRule, registered datanodes (=0) >= required datanodes (=3) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:true, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=0)
SECONDS: 107
SCM is in safe mode. validated:true, DataNodeSafeModeRule, registered datanodes (=3) >= required datanodes (=3) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:true, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=0)
SECONDS: 124
SCM is out of safe mode.
Safe mode is off
No OM HA service, no need to wait
CentOS-8 - AppStream                            1.4 MB/s | 8.4 MB     00:05    
CentOS-8 - Base                                 1.7 MB/s | 4.6 MB     00:02    
CentOS-8 - Extras                               9.6 kB/s |  10 kB     00:01    
Extra Packages for Enterprise Linux Modular 8 - 3.4 kB/s | 3.3 kB     00:00    
Errors during downloading metadata for repository 'epel-modular':
  - Status code: 503 for https://mirrors.fedoraproject.org/metalink?repo=epel-modular-8&arch=x86_64&infra=container&content=centos (IP: 152.19.134.198)
Error: Failed to download metadata for repo 'epel-modular': Cannot prepare internal mirrorlist: Status code: 503 for https://mirrors.fedoraproject.org/metalink?repo=epel-modular-8&arch=x86_64&infra=container&content=centos (IP: 152.19.134.198)
ERROR: Test execution of ozonesecure-mr is FAILED!!!!
cp: cannot stat 'ozonesecure-mr/result/docker-*.log': No such file or directory
Exception in thread "main" java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:560)
	at java.net.ServerSocket.accept(ServerSocket.java:528)
	at org.apache.hadoop.test.JacocoServer.main(JacocoServer.java:60)
Log:     /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/log.html
Report:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/report.html
